(function(rp,ln){typeof exports=="object"&&typeof module=="object"?module.exports=ln():typeof define=="function"&&define.amd?define("agCharts",[],ln):typeof exports=="object"?exports.agCharts=ln():rp.agCharts=ln()})(this,()=>{var rp={},ln={exports:rp};if(typeof cbt>"u")var cbt=function(e){throw new Error("Unknown module: "+e)};var Ry=Object.defineProperty,D2=Object.getOwnPropertyDescriptor,A2=Object.getOwnPropertyNames,T3=Object.prototype.hasOwnProperty,A=(t,e)=>function(){return t&&(e=(0,t[A2(t)[0]])(t=0)),e},Oa=(t,e)=>{for(var i in e)Ry(t,i,{get:e[i],enumerable:!0})},N3=(t,e,i,s)=>{if(e&&typeof e=="object"||typeof e=="function")for(let a of A2(e))!T3.call(t,a)&&a!==i&&Ry(t,a,{get:()=>e[a],enumerable:!(s=D2(e,a))||s.enumerable});return t},_=t=>N3(Ry({},"__esModule",{value:!0}),t),M=(t,e,i,s)=>{for(var a=s>1?void 0:s?D2(e,i):e,n=t.length-1,o;n>=0;n--)(o=t[n])&&(a=(s?o(e,i,a):o(a))||a);return s&&a&&Ry(e,i,a),a},C3=A({"packages/ag-charts-locale/src/ar-EG.ts"(){"use strict"}}),O3=A({"packages/ag-charts-locale/src/bg-BG.ts"(){"use strict"}}),E3=A({"packages/ag-charts-locale/src/cs-CZ.ts"(){"use strict"}}),w3=A({"packages/ag-charts-locale/src/da-DK.ts"(){"use strict"}}),R3=A({"packages/ag-charts-locale/src/de-DE.ts"(){"use strict"}}),_3=A({"packages/ag-charts-locale/src/el-GR.ts"(){"use strict"}}),NM,P3=A({"packages/ag-charts-locale/src/en-US.ts"(){"use strict";NM={ariaAnnounceHoverDatum:"${datum}",ariaAnnounceChart:"chart, ${seriesCount}[number] series",ariaAnnounceHierarchyChart:"hierarchy chart, ${caption}",ariaAnnounceGaugeChart:"gauge chart, ${caption}",ariaAnnounceHierarchyDatum:"level ${level}[number], ${count}[number] children, ${description}",ariaAnnounceFlowProportionLink:"link ${index} of ${count}, from ${from} to ${to}, ${sizeName} ${size}",ariaAnnounceFlowProportionNode:"node ${index} of ${count}, ${description}",ariaDescriptionLegendItem:"Press Space or Enter to toggle visibility",ariaLabelAddHorizontalLine:"Add Horizontal Line",ariaLabelAnnotationOptionsToolbar:"Annotation Options",ariaLabelAnnotationSettingsDialog:"Annotation Settings",ariaLabelColorPicker:"Color picker",ariaLabelFinancialCharts:"Financial Charts",ariaLabelLegend:"Legend",ariaLabelLegendPagination:"Legend Pagination",ariaLabelLegendPagePrevious:"Previous Legend Page",ariaLabelLegendPageNext:"Next Legend Page",ariaLabelLegendItem:"${label}, Legend item ${index}[number] of ${count}[number]",ariaLabelLegendItemUnknown:"Unknown legend item",ariaLabelNavigator:"Navigator",ariaLabelNavigatorRange:"Range",ariaLabelNavigatorMinimum:"Minimum",ariaLabelNavigatorMaximum:"Maximum",ariaLabelRangesToolbar:"Ranges",ariaLabelSettingsTabBar:"Settings",ariaLabelZoomToolbar:"Zoom",ariaValuePanRange:"${min}[percent] to ${max}[percent]",iconAltTextLineStyleSolid:"Solid",iconAltTextLineStyleDashed:"Long-dashed",iconAltTextLineStyleDotted:"Short-dashed",iconAltTextPositionTop:"Top",iconAltTextPositionCenter:"Center",iconAltTextPositionBottom:"Bottom",iconAltTextAlignLeft:"Left",iconAltTextAlignCenter:"Center",iconAltTextAlignRight:"Right",iconAltTextClose:"Close",overlayLoadingData:"Loading data...",overlayNoData:"No data to display",overlayNoVisibleSeries:"No visible series",overlayUnsupportedBrowser:"Incompatible browser version. Please upgrade your browser.",seriesHistogramTooltipFrequency:"Frequency",seriesHistogramTooltipSum:"${yName} (sum)",seriesHistogramTooltipCount:"${yName} (count)",seriesHistogramTooltipMean:"${yName} (mean)",toolbarSeriesTypeDropdown:"Chart Type",toolbarSeriesTypeOHLC:"OHLC",toolbarSeriesTypeHLC:"HLC",toolbarSeriesTypeHighLow:"High Low",toolbarSeriesTypeCandles:"Candles",toolbarSeriesTypeHollowCandles:"Hollow Candles",toolbarSeriesTypeLine:"Line",toolbarSeriesTypeLineWithMarkers:"Line with Markers",toolbarSeriesTypeStepLine:"Step Line",toolbarAnnotationsTrendLine:"Trend Line",toolbarAnnotationsFibonacciRetracement:"Fib Retracement",toolbarAnnotationsHorizontalLine:"Horizontal Line",toolbarAnnotationsVerticalLine:"Vertical Line",toolbarAnnotationsParallelChannel:"Parallel Channel",toolbarAnnotationsDisjointChannel:"Disjoint Channel",toolbarAnnotationsClearAll:"Clear All",toolbarAnnotationsFillColor:"Fill Color",toolbarAnnotationsLineColor:"Line Color",toolbarAnnotationsLineStyle:"Line Style",toolbarAnnotationsLineStrokeWidth:"Line Stroke Width",toolbarAnnotationsSettings:"Settings",toolbarAnnotationsTextColor:"Text Color",toolbarAnnotationsTextSize:"Text Size",toolbarAnnotationsLock:"Lock",toolbarAnnotationsUnlock:"Unlock",toolbarAnnotationsDelete:"Delete",toolbarAnnotationsDragHandle:"Drag Toolbar",toolbarAnnotationsLineAnnotations:"Trend Lines",toolbarAnnotationsFibonacciAnnotations:"Fibonacci",toolbarAnnotationsTextAnnotations:"Text Annotations",toolbarAnnotationsShapeAnnotations:"Arrows",toolbarAnnotationsMeasurerAnnotations:"Measurers",toolbarAnnotationsCallout:"Callout",toolbarAnnotationsComment:"Comment",toolbarAnnotationsNote:"Note",toolbarAnnotationsText:"Text",toolbarAnnotationsArrow:"Arrow",toolbarAnnotationsArrowUp:"Arrow Up",toolbarAnnotationsArrowDown:"Arrow Down",toolbarAnnotationsDateRange:"Date Range",toolbarAnnotationsPriceRange:"Price Range",toolbarAnnotationsDatePriceRange:"Date and Price",toolbarAnnotationsQuickDatePriceRange:"Measure",toolbarRange1Month:"1M",toolbarRange1MonthAria:"1 month",toolbarRange3Months:"3M",toolbarRange3MonthsAria:"3 months",toolbarRange6Months:"6M",toolbarRange6MonthsAria:"6 months",toolbarRangeYearToDate:"YTD",toolbarRangeYearToDateAria:"Year to date",toolbarRange1Year:"1Y",toolbarRange1YearAria:"1 year",toolbarRangeAll:"All",toolbarRangeAllAria:"All",toolbarZoomZoomOut:"Zoom out",toolbarZoomZoomIn:"Zoom in",toolbarZoomPanLeft:"Pan left",toolbarZoomPanRight:"Pan right",toolbarZoomPanStart:"Pan to the start",toolbarZoomPanEnd:"Pan to the end",toolbarZoomReset:"Reset the zoom",contextMenuDownload:"Download",contextMenuToggleSeriesVisibility:"Toggle Visibility",contextMenuToggleOtherSeries:"Toggle Other Series",contextMenuZoomToCursor:"Zoom to here",contextMenuPanToCursor:"Pan to here",dialogHeaderChannel:"Channel",dialogHeaderLine:"Line",dialogHeaderFibonacciRange:"Fib Retracement",dialogHeaderDateRange:"Date Range",dialogHeaderPriceRange:"Price Range",dialogHeaderDatePriceRange:"Date and Price",dialogHeaderText:"Text",dialogInputAlign:"Align",dialogInputColorPicker:"Color",dialogInputColorPickerAltText:"Text Color",dialogInputFillColorPicker:"Fill",dialogInputFillColorPickerAltText:"Fill Color",dialogInputExtendChannelStart:"Extend channel start",dialogInputExtendChannelEnd:"Extend channel end",dialogInputExtendLineStart:"Extend line start",dialogInputExtendLineEnd:"Extend line end",dialogInputExtendAbove:"Extend above",dialogInputExtendBelow:"Extend below",dialogInputExtendLeft:"Extend left",dialogInputExtendRight:"Extend right",dialogInputReverse:"Reverse",dialogInputShowFill:"Show Fill",dialogInputFontSize:"Size",dialogInputFontSizeAltText:"Font Size",dialogInputLineStyle:"Dash",dialogInputPosition:"Position",dialogInputStrokeWidth:"Weight",dialogInputStrokeWidthAltText:"Line Weight",dialogInputFibonacciBands:"Bands",dialogInputFibonacciBandsAltText:"Fibonacci Bands",inputTextareaPlaceholder:"Add Text",measurerDateRangeBars:"${value}[number] bars",measurerPriceRangeValue:"${value}[number]",measurerPriceRangePercent:"${value}[percent]",measurerVolume:"Vol ${value}"}}}),B3=A({"packages/ag-charts-locale/src/es-ES.ts"(){"use strict"}}),z3=A({"packages/ag-charts-locale/src/fa-IR.ts"(){"use strict"}}),F3=A({"packages/ag-charts-locale/src/fi-FI.ts"(){"use strict"}}),j3=A({"packages/ag-charts-locale/src/fr-FR.ts"(){"use strict"}}),G3=A({"packages/ag-charts-locale/src/he-IL.ts"(){"use strict"}}),V3=A({"packages/ag-charts-locale/src/hr-HR.ts"(){"use strict"}}),U3=A({"packages/ag-charts-locale/src/hu-HU.ts"(){"use strict"}}),W3=A({"packages/ag-charts-locale/src/it-IT.ts"(){"use strict"}}),H3=A({"packages/ag-charts-locale/src/ja-JP.ts"(){"use strict"}}),Y3=A({"packages/ag-charts-locale/src/ko-KR.ts"(){"use strict"}}),K3=A({"packages/ag-charts-locale/src/nb-NO.ts"(){"use strict"}}),X3=A({"packages/ag-charts-locale/src/nl-NL.ts"(){"use strict"}}),Z3=A({"packages/ag-charts-locale/src/pl-PL.ts"(){"use strict"}}),$3=A({"packages/ag-charts-locale/src/pt-BR.ts"(){"use strict"}}),Q3=A({"packages/ag-charts-locale/src/pt-PT.ts"(){"use strict"}}),q3=A({"packages/ag-charts-locale/src/ro-RO.ts"(){"use strict"}}),J3=A({"packages/ag-charts-locale/src/sk-SK.ts"(){"use strict"}}),tH=A({"packages/ag-charts-locale/src/sv-SE.ts"(){"use strict"}}),eH=A({"packages/ag-charts-locale/src/tr-TR.ts"(){"use strict"}}),iH=A({"packages/ag-charts-locale/src/uk-UA.ts"(){"use strict"}}),sH=A({"packages/ag-charts-locale/src/ur-PK.ts"(){"use strict"}}),aH=A({"packages/ag-charts-locale/src/vi-VN.ts"(){"use strict"}}),nH=A({"packages/ag-charts-locale/src/zh-CN.ts"(){"use strict"}}),oH=A({"packages/ag-charts-locale/src/zh-HK.ts"(){"use strict"}}),rH=A({"packages/ag-charts-locale/src/zh-TW.ts"(){"use strict"}}),I2=A({"packages/ag-charts-locale/src/main.ts"(){"use strict";C3(),O3(),E3(),w3(),R3(),_3(),P3(),B3(),z3(),F3(),j3(),G3(),V3(),U3(),W3(),H3(),Y3(),K3(),X3(),Z3(),$3(),Q3(),q3(),J3(),tH(),eH(),iH(),sH(),aH(),nH(),oH(),rH()}}),lH=A({"packages/ag-charts-types/src/api/initialStateOptions.ts"(){"use strict"}}),cH=A({"packages/ag-charts-types/src/api/agCharts.ts"(){"use strict"}}),hH=A({"packages/ag-charts-types/src/chart/annotationsOptions.ts"(){"use strict"}}),uH=A({"packages/ag-charts-types/src/chart/axisOptions.ts"(){"use strict"}}),dH=A({"packages/ag-charts-types/src/chart/callbackOptions.ts"(){"use strict"}}),pH=A({"packages/ag-charts-types/src/chart/chartOptions.ts"(){"use strict"}}),gH=A({"packages/ag-charts-types/src/chart/chartToolbarOptions.ts"(){"use strict"}}),fH=A({"packages/ag-charts-types/src/chart/contextMenuOptions.ts"(){"use strict"}}),yH=A({"packages/ag-charts-types/src/chart/crossLineOptions.ts"(){"use strict"}}),mH=A({"packages/ag-charts-types/src/chart/crosshairOptions.ts"(){"use strict"}}),xH=A({"packages/ag-charts-types/src/chart/dropShadowOptions.ts"(){"use strict"}}),k2,bH=A({"packages/ag-charts-types/src/chart/errorBarOptions.ts"(){"use strict";k2=["bar","line","scatter"]}}),SH=A({"packages/ag-charts-types/src/chart/eventOptions.ts"(){"use strict"}}),vH=A({"packages/ag-charts-types/src/chart/gradientLegendOptions.ts"(){"use strict"}}),MH=A({"packages/ag-charts-types/src/chart/icons.ts"(){"use strict"}}),DH=A({"packages/ag-charts-types/src/chart/labelOptions.ts"(){"use strict"}}),AH=A({"packages/ag-charts-types/src/chart/legendOptions.ts"(){"use strict"}}),IH=A({"packages/ag-charts-types/src/chart/localeOptions.ts"(){"use strict"}}),L2,T2,kH=A({"packages/ag-charts-types/src/chart/navigatorOptions.ts"(){"use strict";L2=void 0,T2=void 0,T2=L2}}),LH=A({"packages/ag-charts-types/src/chart/polarAxisOptions.ts"(){"use strict"}}),TH=A({"packages/ag-charts-types/src/chart/rangesOptions.ts"(){"use strict"}}),N2,C2,NH=A({"packages/ag-charts-types/src/chart/themeOptions.ts"(){"use strict";N2=void 0,C2=void 0,C2=N2}}),_y,CH=A({"packages/ag-charts-types/src/chart/tooltipOptions.ts"(){"use strict";_y=(t=>(t.POINTER="pointer",t.NODE="node",t.TOP="top",t.RIGHT="right",t.BOTTOM="bottom",t.LEFT="left",t.TOP_LEFT="top-left",t.TOP_RIGHT="top-right",t.BOTTOM_RIGHT="bottom-right",t.BOTTOM_LEFT="bottom-left",t))(_y||{})}}),OH=A({"packages/ag-charts-types/src/chart/types.ts"(){"use strict"}}),EH=A({"packages/ag-charts-types/src/chart/zoomOptions.ts"(){"use strict"}}),wH=A({"packages/ag-charts-types/src/chartBuilderOptions.ts"(){"use strict"}}),RH=A({"packages/ag-charts-types/src/integratedCharts.ts"(){"use strict"}}),_H=A({"packages/ag-charts-types/src/presets/financial/financialOptions.ts"(){"use strict"}}),PH=A({"packages/ag-charts-types/src/presets/financial/priceVolumeOptions.ts"(){"use strict"}}),O2,E2,w2,R2,BH=A({"packages/ag-charts-types/src/presets/gauge/commonOptions.ts"(){"use strict";O2=void 0,E2=void 0,E2=O2,w2=void 0,R2=void 0,R2=w2}}),zH=A({"packages/ag-charts-types/src/presets/gauge/gaugeOptions.ts"(){"use strict"}}),FH=A({"packages/ag-charts-types/src/presets/gauge/linearGaugeOptions.ts"(){"use strict"}}),jH=A({"packages/ag-charts-types/src/presets/gauge/radialGaugeOptions.ts"(){"use strict"}}),GH=A({"packages/ag-charts-types/src/presets/sparkline/sparklineAxisOptions.ts"(){"use strict"}}),VH=A({"packages/ag-charts-types/src/presets/sparkline/sparklineOptions.ts"(){"use strict"}}),UH=A({"packages/ag-charts-types/src/presets/presetOptions.ts"(){"use strict"}}),WH=A({"packages/ag-charts-types/src/series/cartesian/areaOptions.ts"(){"use strict"}}),HH=A({"packages/ag-charts-types/src/series/cartesian/barOptions.ts"(){"use strict"}}),YH=A({"packages/ag-charts-types/src/series/cartesian/boxPlotOptions.ts"(){"use strict"}}),KH=A({"packages/ag-charts-types/src/series/cartesian/bubbleOptions.ts"(){"use strict"}}),XH=A({"packages/ag-charts-types/src/series/cartesian/candlestickOptions.ts"(){"use strict"}}),ZH=A({"packages/ag-charts-types/src/series/cartesian/cartesianOptions.ts"(){"use strict"}}),$H=A({"packages/ag-charts-types/src/series/cartesian/cartesianSeriesTooltipOptions.ts"(){"use strict"}}),QH=A({"packages/ag-charts-types/src/series/cartesian/cartesianSeriesTypes.ts"(){"use strict"}}),qH=A({"packages/ag-charts-types/src/series/cartesian/commonOptions.ts"(){"use strict"}}),JH=A({"packages/ag-charts-types/src/series/cartesian/coneFunnelOptions.ts"(){"use strict"}}),tY=A({"packages/ag-charts-types/src/series/cartesian/funnelOptions.ts"(){"use strict"}}),eY=A({"packages/ag-charts-types/src/series/cartesian/heatmapOptions.ts"(){"use strict"}}),iY=A({"packages/ag-charts-types/src/series/cartesian/histogramOptions.ts"(){"use strict"}}),sY=A({"packages/ag-charts-types/src/series/cartesian/lineOptions.ts"(){"use strict"}}),aY=A({"packages/ag-charts-types/src/series/cartesian/ohlcBaseOptions.ts"(){"use strict"}}),nY=A({"packages/ag-charts-types/src/series/cartesian/ohlcOptions.ts"(){"use strict"}}),oY=A({"packages/ag-charts-types/src/series/cartesian/rangeAreaOptions.ts"(){"use strict"}}),rY=A({"packages/ag-charts-types/src/series/cartesian/rangeBarOptions.ts"(){"use strict"}}),lY=A({"packages/ag-charts-types/src/series/cartesian/scatterOptions.ts"(){"use strict"}}),cY=A({"packages/ag-charts-types/src/series/cartesian/waterfallOptions.ts"(){"use strict"}}),hY=A({"packages/ag-charts-types/src/series/flow-proportion/chordOptions.ts"(){"use strict"}}),uY=A({"packages/ag-charts-types/src/series/flow-proportion/flowProportionOptions.ts"(){"use strict"}}),dY=A({"packages/ag-charts-types/src/series/flow-proportion/sankeyOptions.ts"(){"use strict"}}),pY=A({"packages/ag-charts-types/src/series/standalone/pyramidOptions.ts"(){"use strict"}}),gY=A({"packages/ag-charts-types/src/series/standalone/standaloneOptions.ts"(){"use strict"}}),fY=A({"packages/ag-charts-types/src/series/hierarchy/hierarchyOptions.ts"(){"use strict"}}),yY=A({"packages/ag-charts-types/src/series/hierarchy/sunburstOptions.ts"(){"use strict"}}),mY=A({"packages/ag-charts-types/src/series/hierarchy/treemapOptions.ts"(){"use strict"}}),xY=A({"packages/ag-charts-types/src/series/interpolationOptions.ts"(){"use strict"}}),bY=A({"packages/ag-charts-types/src/series/markerOptions.ts"(){"use strict"}}),SY=A({"packages/ag-charts-types/src/series/polar/donutOptions.ts"(){"use strict"}}),vY=A({"packages/ag-charts-types/src/series/polar/nightingaleOptions.ts"(){"use strict"}}),MY=A({"packages/ag-charts-types/src/series/polar/pieOptions.ts"(){"use strict"}}),DY=A({"packages/ag-charts-types/src/series/polar/polarOptions.ts"(){"use strict"}}),AY=A({"packages/ag-charts-types/src/series/polar/radarAreaOptions.ts"(){"use strict"}}),IY=A({"packages/ag-charts-types/src/series/polar/radarLineOptions.ts"(){"use strict"}}),kY=A({"packages/ag-charts-types/src/series/polar/radarOptions.ts"(){"use strict"}}),LY=A({"packages/ag-charts-types/src/series/polar/radialBarOptions.ts"(){"use strict"}}),TY=A({"packages/ag-charts-types/src/series/polar/radialColumnOptions.ts"(){"use strict"}}),NY=A({"packages/ag-charts-types/src/series/polar/radialOptions.ts"(){"use strict"}}),CY=A({"packages/ag-charts-types/src/series/seriesOptions.ts"(){"use strict"}}),OY=A({"packages/ag-charts-types/src/series/topology/mapLineBackgroundOptions.ts"(){"use strict"}}),EY=A({"packages/ag-charts-types/src/series/topology/mapLineOptions.ts"(){"use strict"}}),wY=A({"packages/ag-charts-types/src/series/topology/mapMarkerOptions.ts"(){"use strict"}}),RY=A({"packages/ag-charts-types/src/series/topology/mapShapeBackgroundOptions.ts"(){"use strict"}}),_Y=A({"packages/ag-charts-types/src/series/topology/mapShapeOptions.ts"(){"use strict"}}),PY=A({"packages/ag-charts-types/src/series/topology/topologyOptions.ts"(){"use strict"}}),Py=A({"packages/ag-charts-types/src/main.ts"(){"use strict";lH(),cH(),hH(),uH(),dH(),pH(),gH(),fH(),yH(),mH(),xH(),bH(),SH(),vH(),MH(),DH(),AH(),IH(),kH(),LH(),TH(),NH(),CH(),OH(),EH(),wH(),RH(),_H(),PH(),BH(),zH(),FH(),jH(),GH(),VH(),UH(),WH(),HH(),YH(),KH(),XH(),ZH(),$H(),QH(),qH(),JH(),tY(),eY(),iY(),sY(),aY(),nY(),oY(),rY(),lY(),cY(),hY(),uY(),dY(),pY(),gY(),fY(),yY(),mY(),xY(),bY(),SY(),vY(),MY(),DY(),AY(),IY(),kY(),LY(),TY(),NY(),CY(),OY(),EY(),wY(),RY(),_Y(),PY()}});function BY(){By.clear()}function Ea(t){const e=t.constructor,i=Object.hasOwn(e,"className")?e.className:e.name;if(!i)throw new Error(`The ${e} is missing the 'className' property.`);const s=(By.get(i)??0)+1;return By.set(i,s),`${i}-${s}`}function zY(){return crypto.randomUUID?.()??FY()}function FY(){const t=new Uint8Array(16);crypto.getRandomValues(t),t[6]=t[6]&15|64,t[8]=t[8]&63|128;let e="";for(let i=0;i<t.length;i++)(i===4||i===6||i===8||i===10)&&(e+="-"),e+=t[i].toString(16).padStart(2,"0");return e}var By,wa=A({"packages/ag-charts-community/src/util/id.ts"(){"use strict";By=new Map}});function*bc(...t){for(const e of t)yield*e}function _2(t){return t!=null&&typeof t=="object"&&Symbol.iterator in t?t:[t]}var lp=A({"packages/ag-charts-community/src/util/iterator.ts"(){"use strict"}});function jY(t,e,i){return e>=t.x&&e<=t.x+t.width&&i>=t.y&&i<=t.y+t.height}function GY(t){return t==null||t.height===0||t.width===0||isNaN(t.height)||isNaN(t.width)}function VY(t){let{x:e,y:i,width:s,height:a}=t;return(s==null||s>0)&&(a==null||a>0)?t:(e!=null&&s!=null&&s<0&&(s=-s,e=e-s),i!=null&&a!=null&&a<0&&(a=-a,i=i-a),{x:e,y:i,width:s,height:a})}var cp,zy=A({"packages/ag-charts-community/src/util/bboxinterface.ts"(){"use strict";cp={containsPoint:jY,isEmpty:GY,normalize:VY}}}),hp,up,CM=A({"packages/ag-charts-community/src/util/interpolating.ts"(){"use strict";hp=Symbol("interpolate"),up=t=>t[hp]!=null}});function Fy(t,e,i,s=1/0){const a={nearest:void 0,distanceSquared:s};for(const n of i){const o=n.distanceSquared(t,e);if(o===0)return{nearest:n,distanceSquared:0};o<a.distanceSquared&&(a.nearest=n,a.distanceSquared=o)}return a}function UY(t,e,i,s=1/0){const{x:a=t,y:n=e}=i.transformPoint?.(t,e)??{},o={nearest:void 0,distanceSquared:s};for(const r of i.children){const{nearest:l,distanceSquared:c}=r.nearestSquared(a,n,o.distanceSquared);if(c===0)return{nearest:l,distanceSquared:c};c<o.distanceSquared&&(o.nearest=l,o.distanceSquared=c)}return o}var jy=A({"packages/ag-charts-community/src/util/nearest.ts"(){"use strict"}});function At(t,e,i){return Math.min(i,Math.max(t,e))}function OM(t,e){const[i,s]=Gi(e);return At(i,t,s)}function Gi(t){if(t.length===0)return[];const e=[1/0,-1/0];for(const i of t)i<e[0]&&(e[0]=i),i>e[1]&&(e[1]=i);return e}function dp(t){const[e,i]=Gi(t);return i-e}function P2(t,e,i=1e-10){return t>=e[0]-i&&t<=e[1]+i}function pp(t,e,i=1e-10){return Math.abs(t-e)<i}function Gy(t){return Math.sign(t)===-1||Object.is(t,-0)}function B2(t){return t%1===0}function EM(t,e=2){const i=10**e;return Math.round(t*i)/i}function wM(t,e){return Math.floor(t%e+(t<0?e:0))}function Vy(t){if(Math.floor(t)===t)return 0;let e=String(t),i=0;if(t<1e-6||t>=1e21){let a;[e,a]=e.split("e"),a!=null&&(i=Number(a))}const s=e.split(".")[1]?.length??0;return Math.max(s-i,0)}var It=A({"packages/ag-charts-community/src/util/number.ts"(){"use strict"}}),lu,lt,kt=A({"packages/ag-charts-community/src/scene/bbox.ts"(){"use strict";zy(),CM(),jy(),It(),lu=class np{constructor(e,i,s,a){this.x=e,this.y=i,this.width=s,this.height=a}static fromDOMRect({x:e,y:i,width:s,height:a}){return new np(e,i,s,a)}static merge(e){let i=1/0,s=1/0,a=-1/0,n=-1/0;for(const o of e)o.x<i&&(i=o.x),o.y<s&&(s=o.y),o.x+o.width>a&&(a=o.x+o.width),o.y+o.height>n&&(n=o.y+o.height);return new np(i,s,a-i,n-s)}static nearestBox(e,i,s){return Fy(e,i,s)}toDOMRect(){return{x:this.x,y:this.y,width:this.width,height:this.height,top:this.y,left:this.x,right:this.x+this.width,bottom:this.y+this.height,toJSON(){return{}}}}clone(){const{x:e,y:i,width:s,height:a}=this;return new np(e,i,s,a)}equals(e){return this.x===e.x&&this.y===e.y&&this.width===e.width&&this.height===e.height}containsPoint(e,i){return cp.containsPoint(this,e,i)}containsBBox(e){const[i,s]=[this.x,this.x+this.width],[a,n]=[this.y,this.y+this.height],[o,r]=[e.x,e.x+e.width],[l,c]=[e.y,e.y+e.height];return Math.min(i,o)===i&&Math.max(s,r)===s&&Math.min(a,l)===a&&Math.max(n,c)===n}intersection(e){if(!this.collidesBBox(e))return;const i=At(e.x,this.x,e.x+e.width),s=At(e.y,this.y,e.y+e.height),a=At(e.x,this.x+this.width,e.x+e.width),n=At(e.y,this.y+this.height,e.y+e.height);return new np(i,s,a-i,n-s)}collidesBBox(e){return this.x<e.x+e.width&&this.x+this.width>e.x&&this.y<e.y+e.height&&this.y+this.height>e.y}computeCenter(){return{x:this.x+this.width/2,y:this.y+this.height/2}}isFinite(){return Number.isFinite(this.x)&&Number.isFinite(this.y)&&Number.isFinite(this.width)&&Number.isFinite(this.height)}distanceSquared(e,i){if(this.containsPoint(e,i))return 0;const s=e-At(this.x,e,this.x+this.width),a=i-At(this.y,i,this.y+this.height);return s*s+a*a}shrink(e,i){if(typeof e=="number")this.applyMargin(e,i);else for(const[s,a]of Object.entries(e))this.applyMargin(a,s);return this.width<0&&(this.width=0),this.height<0&&(this.height=0),this}grow(e,i){if(typeof e=="number")this.applyMargin(-e,i);else for(const[s,a]of Object.entries(e))this.applyMargin(-a,s);return this}applyMargin(e,i){switch(i){case"top":this.y+=e;case"bottom":this.height-=e;break;case"left":this.x+=e;case"right":this.width-=e;break;case"vertical":this.y+=e,this.height-=e*2;break;case"horizontal":this.x+=e,this.width-=e*2;break;case void 0:this.x+=e,this.y+=e,this.width-=e*2,this.height-=e*2;break}}translate(e,i){return this.x+=e,this.y+=i,this}combine(e){const{x:i,y:s,width:a,height:n}=this;this.x=Math.min(i,e.x),this.y=Math.min(s,e.y),this.width=Math.max(i+a,e.x+e.width)-this.x,this.height=Math.max(s+n,e.y+e.height)-this.y}[hp](e,i){return new np(this.x*(1-i)+e.x*i,this.y*(1-i)+e.y*i,this.width*(1-i)+e.width*i,this.height*(1-i)+e.height*i)}},lu.zero=Object.freeze(new lu(0,0,0,0)),lu.NaN=Object.freeze(new lu(NaN,NaN,NaN,NaN)),lt=lu}});function ht(t){return function(e,i){const s=`__${i}`;e[i]||WY(e,i,s,t)}}function WY(t,e,i,s){const{type:a="normal",changeCb:n,convertor:o,checkDirtyOnAssignment:r=!1}=s??{},l={type:a,changeCb:n,checkDirtyOnAssignment:r,convertor:o};let c;switch(a){case"normal":c=XY(i,l);break;case"transform":c=ZY(i);break;case"path":c=$Y(i);break}c=KY(YY(HY(c,l),l),l),Object.defineProperty(t,e,{set:c,get:function(){return this[i]},enumerable:!0,configurable:!0})}function HY(t,e){const{convertor:i}=e;return i?function(s){t.call(this,i(s))}:t}function YY(t,e){const{changeCb:i}=e;return i?function(s){const a=t.call(this,s);return a!==cu&&i.call(this,this),a}:t}function KY(t,e){const{checkDirtyOnAssignment:i}=e;return i?function(s){const a=t.call(this,s);return a!==cu&&s?._dirty===!0&&this.markDirty(),a}:t}function XY(t,e){const{changeCb:i}=e;return function(s){const a=this[t];return s!==a?(this[t]=s,this.markDirty(),i?.(this),s):cu}}function ZY(t){return function(e){const i=this[t];return e!==i?(this[t]=e,this.markDirtyTransform(),e):cu}}function $Y(t){return function(e){const i=this[t];return e!==i?(this[t]=e,this._dirtyPath||(this._dirtyPath=!0,this.markDirty()),e):cu}}var cu,RM=A({"packages/ag-charts-community/src/scene/changeDetectable.ts"(){"use strict";cu=Symbol("no-change")}}),_M,gp,Yo,ae=A({"packages/ag-charts-community/src/scene/node.ts"(){"use strict";wa(),lp(),kt(),RM(),_M=(t=>(t[t.All=0]="All",t[t.None=1]="None",t))(_M||{}),gp=class s3{constructor(e){this.serialNumber=s3._nextSerialNumber++,this.childNodeCounts={groups:0,nonGroups:0,thisComplexity:0,complexity:0},this.id=Ea(this),this.pointerEvents=0,this._dirty=!0,this.dirtyZIndex=!1,this.isContainerNode=!1,this.visible=!0,this.zIndex=0,this.name=e?.name,this.tag=e?.tag??NaN,this.zIndex=e?.zIndex??0}static toSVG(e,i,s){const a=e?.toSVG();if(a==null||!a.elements.length&&!a.defs?.length)return;const n=document.createElementNS("http://www.w3.org/2000/svg","svg");if(n.setAttribute("width",String(i)),n.setAttribute("height",String(s)),n.setAttribute("viewBox",`0 0 ${i} ${s}`),a.defs?.length){const o=document.createElementNS("http://www.w3.org/2000/svg","defs");o.append(...a.defs),n.append(o)}return n.append(...a.elements),n.outerHTML}static*extractBBoxes(e,i){for(const s of e)if(!i||s.visible&&!s.transitionOut){const a=s.getBBox();a&&(yield a)}}get datum(){return this._datum??this.parentNode?.datum}set datum(e){this._datum!==e&&(this._previousDatum=this._datum,this._datum=e)}get previousDatum(){return this._previousDatum}get layerManager(){return this._layerManager}get dirty(){return this._dirty}preRender(e=1){this.childNodeCounts.groups=0,this.childNodeCounts.nonGroups=1,this.childNodeCounts.complexity=e,this.childNodeCounts.thisComplexity=e;for(const i of this.children()){const s=i.preRender();this.childNodeCounts.groups+=s.groups,this.childNodeCounts.nonGroups+=s.nonGroups,this.childNodeCounts.complexity+=s.complexity}return this.childNodeCounts}render(e){const{stats:i}=e;if(this._dirty=!1,e.debugNodeSearch){const s=this.name??this.id;e.debugNodeSearch.some(a=>typeof a=="string"?a===s:a.test(s))&&(e.debugNodes[this.name??this.id]=this)}i&&(i.nodesRendered++,i.opsPerformed+=this.childNodeCounts.thisComplexity)}_setLayerManager(e){this._layerManager=e,this._debug=e?.debug;for(const i of this.children())i._setLayerManager(e)}sortChildren(e){if(this.dirtyZIndex=!1,!this.childNodes)return;const i=[...this.childNodes].sort(e);this.childNodes.clear();for(const s of i)this.childNodes.add(s)}*traverseUp(e){let i=this;for(e&&(yield i);i=i.parentNode;)yield i}*children(){if(this.childNodes)for(const e of this.childNodes)yield e}isLeaf(){return!this.childNodes?.size}isRoot(){return!this.parentNode}append(e){this.childNodes??(this.childNodes=new Set);for(const i of _2(e))i.parentNode?.removeChild(i),this.childNodes.add(i),i.parentNode=this,i._setLayerManager(this.layerManager);this.invalidateCachedBBox(),this.dirtyZIndex=!0,this.markDirty()}appendChild(e){return this.append(e),e}removeChild(e){return this.childNodes?.delete(e)?(delete e.parentNode,e._setLayerManager(),this.invalidateCachedBBox(),this.dirtyZIndex=!0,this.markDirty(),!0):!1}remove(){return this.parentNode?.removeChild(this)??!1}clear(){for(const e of this.children())delete e.parentNode,e._setLayerManager();this.childNodes?.clear(),this.invalidateCachedBBox()}destroy(){this.parentNode?.removeChild(this)}setProperties(e,i){if(i)for(const s of i)this[s]=e[s];else Object.assign(this,e);return this}containsPoint(e,i){return!1}pickNode(e,i,s=!1){if(!this.visible||this.pointerEvents===1||!this.containsPoint(e,i))return;const a=[...this.children()];if(a.length>1e3)for(let n=a.length-1;n>=0;n--){const o=a[n],l=o.containsPoint(e,i)?o.pickNode(e,i):void 0;if(l)return l}else if(a.length)for(let n=a.length-1;n>=0;n--){const o=a[n].pickNode(e,i);if(o)return o}else if(!this.isContainerNode)return this}invalidateCachedBBox(){this.cachedBBox!=null&&(this.cachedBBox=void 0,this.parentNode?.invalidateCachedBBox())}getBBox(){return this.cachedBBox==null&&(this.cachedBBox=Object.freeze(this.computeBBox())),this.cachedBBox}computeBBox(){}markDirty(){const{_dirty:e}=this;this.cachedBBox==null&&e||(this.invalidateCachedBBox(),this._dirty=!0,this.parentNode&&this.parentNode.markDirty())}markClean(){if(this._dirty){this._dirty=!1;for(const e of this.children())e.markClean()}}onZIndexChange(){const{parentNode:e}=this;e&&(e.dirtyZIndex=!0)}toSVG(){}},gp._nextSerialNumber=0,M([ht()],gp.prototype,"visible",2),M([ht({changeCb:t=>t.onZIndexChange()})],gp.prototype,"zIndex",2),Yo=gp}}),fp,Uy,Wy,PM,Ra,yp=A({"packages/ag-charts-community/src/util/color.ts"(){"use strict";It(),fp=(t,e,i)=>t*(1-i)+e*i,Uy=t=>{const e=t<0?-1:1,i=Math.abs(t);return i<=.04045?t/12.92:e*((i+.055)/1.055)**2.4},Wy=t=>{const e=t<0?-1:1,i=Math.abs(t);return i>.0031308?e*(1.055*i**(1/2.4)-.055):12.92*t},PM=class re{constructor(e,i,s,a=1){this.r=At(0,e||0,1),this.g=At(0,i||0,1),this.b=At(0,s||0,1),this.a=At(0,a||0,1)}static validColorString(e){return e.indexOf("#")>=0?!!re.parseHex(e):e.indexOf("rgb")>=0?!!re.stringToRgba(e):!!re.nameToHex.has(e.toLowerCase())}static fromString(e){if(e.indexOf("#")>=0)return re.fromHexString(e);const i=re.nameToHex.get(e.toLowerCase());if(i)return re.fromHexString(i);if(e.indexOf("rgb")>=0)return re.fromRgbaString(e);throw new Error(`Invalid color string: '${e}'`)}static parseHex(e){e=e.replace(/ /g,"").slice(1);let i;switch(e.length){case 6:case 8:i=[];for(let s=0;s<e.length;s+=2)i.push(parseInt(`${e[s]}${e[s+1]}`,16));break;case 3:case 4:i=e.split("").map(s=>parseInt(s,16)).map(s=>s+s*16);break}if(i?.length>=3&&i.every(s=>s>=0))return i.length===3&&i.push(255),i}static fromHexString(e){const i=re.parseHex(e);if(i){const[s,a,n,o]=i;return new re(s/255,a/255,n/255,o/255)}throw new Error(`Malformed hexadecimal color string: '${e}'`)}static stringToRgba(e){let i=-1,s=-1;for(let r=0;r<e.length;r++){const l=e[r];if(i===-1&&l==="(")i=r;else if(l===")"){s=r;break}}if(i===-1||s===-1)return;const n=e.substring(i+1,s).split(","),o=[];for(let r=0;r<n.length;r++){const l=n[r];let c=parseFloat(l);if(!Number.isFinite(c))return;l.indexOf("%")>=0?(c=At(0,c,100),c/=100):r===3?c=At(0,c,1):(c=At(0,c,255),c/=255),o.push(c)}return o}static fromRgbaString(e){const i=re.stringToRgba(e);if(i){if(i.length===3)return new re(i[0],i[1],i[2]);if(i.length===4)return new re(i[0],i[1],i[2],i[3])}throw new Error(`Malformed rgb/rgba color string: '${e}'`)}static fromArray(e){if(e.length===4)return new re(e[0],e[1],e[2],e[3]);if(e.length===3)return new re(e[0],e[1],e[2]);throw new Error("The given array should contain 3 or 4 color components (numbers).")}static fromHSB(e,i,s,a=1){const n=re.HSBtoRGB(e,i,s);return new re(n[0],n[1],n[2],a)}static fromHSL(e,i,s,a=1){const n=re.HSLtoRGB(e,i,s);return new re(n[0],n[1],n[2],a)}static fromOKLCH(e,i,s,a=1){const n=re.OKLCHtoRGB(e,i,s);return new re(n[0],n[1],n[2],a)}static padHex(e){return e.length===1?"0"+e:e}toHexString(){let e="#"+re.padHex(Math.round(this.r*255).toString(16))+re.padHex(Math.round(this.g*255).toString(16))+re.padHex(Math.round(this.b*255).toString(16));return this.a<1&&(e+=re.padHex(Math.round(this.a*255).toString(16))),e}toRgbaString(e=3){const i=[Math.round(this.r*255),Math.round(this.g*255),Math.round(this.b*255)],s=Math.pow(10,e);return this.a!==1?(i.push(Math.round(this.a*s)/s),`rgba(${i.join(", ")})`):`rgb(${i.join(", ")})`}toString(){return this.a===1?this.toHexString():this.toRgbaString()}toHSB(){return re.RGBtoHSB(this.r,this.g,this.b)}static RGBtoOKLCH(e,i,s){const a=Uy(e),n=Uy(i),o=Uy(s),r=Math.cbrt(.4122214708*a+.5363325363*n+.0514459929*o),l=Math.cbrt(.2119034982*a+.6806995451*n+.1073969566*o),c=Math.cbrt(.0883024619*a+.2817188376*n+.6299787005*o),h=.2104542553*r+.793617785*l-.0040720468*c,u=1.9779984951*r-2.428592205*l+.4505937099*c,d=.0259040371*r+.7827717662*l-.808675766*c,p=Math.atan2(d,u)*180/Math.PI,g=h,f=Math.hypot(u,d),x=p>=0?p:p+360;return[g,f,x]}static OKLCHtoRGB(e,i,s){const a=e,n=i*Math.cos(s*Math.PI/180),o=i*Math.sin(s*Math.PI/180),r=(a+.3963377774*n+.2158037573*o)**3,l=(a-.1055613458*n-.0638541728*o)**3,c=(a-.0894841775*n-1.291485548*o)**3,h=4.0767416621*r-3.3077115913*l+.2309699292*c,u=-1.2684380046*r+2.6097574011*l-.3413193965*c,d=-.0041960863*r-.7034186147*l+1.707614701*c,p=Wy(h),g=Wy(u),f=Wy(d);return[p,g,f]}static RGBtoHSL(e,i,s){const a=Math.min(e,i,s),n=Math.max(e,i,s),o=(n+a)/2;let r,l;if(n===a)r=0,l=0;else{const c=n-a;l=o>.5?c/(2-n-a):c/(n+a),n===e?r=(i-s)/c+(i<s?6:0):n===i?r=(s-e)/c+2:r=(e-i)/c+4,r*=360/6}return[r,l,o]}static HSLtoRGB(e,i,s){if(e=(e%360+360)%360,i===0)return[s,s,s];const a=s<.5?s*(1+i):s+i-s*i,n=2*s-a;function o(h){return h<0&&(h+=1),h>1&&(h-=1),h<1/6?n+(a-n)*6*h:h<1/2?a:h<2/3?n+(a-n)*(2/3-h)*6:n}const r=o(e/360+1/3),l=o(e/360),c=o(e/360-1/3);return[r,l,c]}static RGBtoHSB(e,i,s){const a=Math.min(e,i,s),n=Math.max(e,i,s),o=n===0?0:(n-a)/n;let r=0;if(a!==n){const l=n-a,c=(n-e)/l,h=(n-i)/l,u=(n-s)/l;e===n?r=u-h:i===n?r=2+c-u:r=4+h-c,r/=6,r<0&&(r=r+1)}return[r*360,o,n]}static HSBtoRGB(e,i,s){e=(e%360+360)%360/360;let a=0,n=0,o=0;if(i===0)a=n=o=s;else{const r=(e-Math.floor(e))*6,l=r-Math.floor(r),c=s*(1-i),h=s*(1-i*l),u=s*(1-i*(1-l));switch(r>>0){case 0:a=s,n=u,o=c;break;case 1:a=h,n=s,o=c;break;case 2:a=c,n=s,o=u;break;case 3:a=c,n=h,o=s;break;case 4:a=u,n=c,o=s;break;case 5:a=s,n=c,o=h;break}}return[a,n,o]}static mix(e,i,s){return new re(fp(e.r,i.r,s),fp(e.g,i.g,s),fp(e.b,i.b,s),fp(e.a,i.a,s))}},PM.nameToHex=new Map([["aliceblue","#F0F8FF"],["antiquewhite","#FAEBD7"],["aqua","#00FFFF"],["aquamarine","#7FFFD4"],["azure","#F0FFFF"],["beige","#F5F5DC"],["bisque","#FFE4C4"],["black","#000000"],["blanchedalmond","#FFEBCD"],["blue","#0000FF"],["blueviolet","#8A2BE2"],["brown","#A52A2A"],["burlywood","#DEB887"],["cadetblue","#5F9EA0"],["chartreuse","#7FFF00"],["chocolate","#D2691E"],["coral","#FF7F50"],["cornflowerblue","#6495ED"],["cornsilk","#FFF8DC"],["crimson","#DC143C"],["cyan","#00FFFF"],["darkblue","#00008B"],["darkcyan","#008B8B"],["darkgoldenrod","#B8860B"],["darkgray","#A9A9A9"],["darkgreen","#006400"],["darkgrey","#A9A9A9"],["darkkhaki","#BDB76B"],["darkmagenta","#8B008B"],["darkolivegreen","#556B2F"],["darkorange","#FF8C00"],["darkorchid","#9932CC"],["darkred","#8B0000"],["darksalmon","#E9967A"],["darkseagreen","#8FBC8F"],["darkslateblue","#483D8B"],["darkslategray","#2F4F4F"],["darkslategrey","#2F4F4F"],["darkturquoise","#00CED1"],["darkviolet","#9400D3"],["deeppink","#FF1493"],["deepskyblue","#00BFFF"],["dimgray","#696969"],["dimgrey","#696969"],["dodgerblue","#1E90FF"],["firebrick","#B22222"],["floralwhite","#FFFAF0"],["forestgreen","#228B22"],["fuchsia","#FF00FF"],["gainsboro","#DCDCDC"],["ghostwhite","#F8F8FF"],["gold","#FFD700"],["goldenrod","#DAA520"],["gray","#808080"],["green","#008000"],["greenyellow","#ADFF2F"],["grey","#808080"],["honeydew","#F0FFF0"],["hotpink","#FF69B4"],["indianred","#CD5C5C"],["indigo","#4B0082"],["ivory","#FFFFF0"],["khaki","#F0E68C"],["lavender","#E6E6FA"],["lavenderblush","#FFF0F5"],["lawngreen","#7CFC00"],["lemonchiffon","#FFFACD"],["lightblue","#ADD8E6"],["lightcoral","#F08080"],["lightcyan","#E0FFFF"],["lightgoldenrodyellow","#FAFAD2"],["lightgray","#D3D3D3"],["lightgreen","#90EE90"],["lightgrey","#D3D3D3"],["lightpink","#FFB6C1"],["lightsalmon","#FFA07A"],["lightseagreen","#20B2AA"],["lightskyblue","#87CEFA"],["lightslategray","#778899"],["lightslategrey","#778899"],["lightsteelblue","#B0C4DE"],["lightyellow","#FFFFE0"],["lime","#00FF00"],["limegreen","#32CD32"],["linen","#FAF0E6"],["magenta","#FF00FF"],["maroon","#800000"],["mediumaquamarine","#66CDAA"],["mediumblue","#0000CD"],["mediumorchid","#BA55D3"],["mediumpurple","#9370DB"],["mediumseagreen","#3CB371"],["mediumslateblue","#7B68EE"],["mediumspringgreen","#00FA9A"],["mediumturquoise","#48D1CC"],["mediumvioletred","#C71585"],["midnightblue","#191970"],["mintcream","#F5FFFA"],["mistyrose","#FFE4E1"],["moccasin","#FFE4B5"],["navajowhite","#FFDEAD"],["navy","#000080"],["oldlace","#FDF5E6"],["olive","#808000"],["olivedrab","#6B8E23"],["orange","#FFA500"],["orangered","#FF4500"],["orchid","#DA70D6"],["palegoldenrod","#EEE8AA"],["palegreen","#98FB98"],["paleturquoise","#AFEEEE"],["palevioletred","#DB7093"],["papayawhip","#FFEFD5"],["peachpuff","#FFDAB9"],["peru","#CD853F"],["pink","#FFC0CB"],["plum","#DDA0DD"],["powderblue","#B0E0E6"],["purple","#800080"],["rebeccapurple","#663399"],["red","#FF0000"],["rosybrown","#BC8F8F"],["royalblue","#4169E1"],["saddlebrown","#8B4513"],["salmon","#FA8072"],["sandybrown","#F4A460"],["seagreen","#2E8B57"],["seashell","#FFF5EE"],["sienna","#A0522D"],["silver","#C0C0C0"],["skyblue","#87CEEB"],["slateblue","#6A5ACD"],["slategray","#708090"],["slategrey","#708090"],["snow","#FFFAFA"],["springgreen","#00FF7F"],["steelblue","#4682B4"],["tan","#D2B48C"],["teal","#008080"],["thistle","#D8BFD8"],["tomato","#FF6347"],["transparent","#00000000"],["turquoise","#40E0D0"],["violet","#EE82EE"],["wheat","#F5DEB3"],["white","#FFFFFF"],["whitesmoke","#F5F5F5"],["yellow","#FFFF00"],["yellowgreen","#9ACD32"]]),Ra=PM}});function QY(t,e){return i=>Number(t)*(1-i)+Number(e)*i}function z2(t,e){if(typeof t=="string")try{t=Ra.fromString(t)}catch{t=Ra.fromArray([0,0,0])}if(typeof e=="string")try{e=Ra.fromString(e)}catch{e=Ra.fromArray([0,0,0])}return i=>Ra.mix(t,e,i).toRgbaString()}var F2=A({"packages/ag-charts-community/src/util/interpolate.ts"(){"use strict";yp()}});function j2(t,e){Object.getOwnPropertyDescriptor(t,vc)==null&&Object.defineProperty(t,vc,{value:{}});const i=t[vc],s=e.toString();if(typeof i[s]<"u")return i[s];const a=new WeakMap;i[s]={setters:[],getters:[],observers:[],valuesMap:a};const n=Object.getOwnPropertyDescriptor(t,e),o=n?.set,r=n?.get;return Object.defineProperty(t,e,{set:function(h){const{setters:u,observers:d}=i[s];let p;u.some(g=>g.length>2)&&(p=r?r.call(this):a.get(this));for(const g of u)if(h=g(this,e,h,p),h===mp)return;o?o.call(this,h):a.set(this,h);for(const g of d)g(this,h,p)},get:function(){let h=r?r.call(this):a.get(this);for(const u of i[s].getters)if(h=u(this,e,h),h===mp)return;return h},enumerable:!0,configurable:!1}),i[s]}function Ko(t,e,i){return(s,a)=>{const n=j2(s,a);n.setters.push(t),e&&n.getters.unshift(e),i&&Object.assign(n,i)}}function G2(t){return(e,i)=>{j2(e,i).observers.push(t)}}function Hy(t){return typeof t<"u"&&vc in t}function Sc(t){const e=new Set;for(;Hy(t);)e.add(t?.[vc]),t=Object.getPrototypeOf(t);return Array.from(e).flatMap(i=>Object.keys(i))}function V2(t){return Sc(t).reduce((e,i)=>(e[i]=t[i]??null,e),{})}function qY(t,e){const i=e.toString();for(;Hy(t);){const s=t[vc];if(Object.hasOwn(s,i))return s[i];t=Object.getPrototypeOf(t)}}var mp,vc,Jr=A({"packages/ag-charts-community/src/util/decorator.ts"(){"use strict";mp=Symbol("BREAK"),vc="__decorator_config"}});function tl(t){return t!=null}function ce(t){return Array.isArray(t)}function BM(t){return typeof t=="boolean"}function xp(t){return t instanceof Date}function Yy(t){return xp(t)&&!isNaN(Number(t))}function U2(t){return t instanceof RegExp}function el(t){return typeof t=="function"}function ws(t){return typeof t=="object"&&t!==null&&!ce(t)}function JY(t){return ce(t)||xs(t)}function xs(t){return typeof t=="object"&&t!==null&&Object.getPrototypeOf(t)===Object.prototype}function Rs(t){return typeof t=="string"}function cn(t){return typeof t=="number"}function Vt(t){return Number.isFinite(t)}function W2(t){return typeof window<"u"&&t instanceof HTMLElement}function t5(t,e){return Rs(e)&&Object.keys(t).includes(e)}function H2(t,e){return Object.values(t).includes(e)}function e5(t){return typeof t=="symbol"}function Y2(t,e){return t.type!==e}var Ct=A({"packages/ag-charts-community/src/util/type-guards.ts"(){"use strict"}});function Mc(t,e){return Array.isArray(t)?!Array.isArray(e)||t.length!==e.length?!1:t.every((i,s)=>Mc(i,e[s])):xs(t)?xs(e)?zM(t,e,Mc):!1:t===e}function zM(t,e,i){for(const s of Object.keys(e))if(!(s in t))return!1;for(const s of Object.keys(t))if(!(s in e)||!i(t[s],e[s]))return!1;return!0}function i5(...t){return Lt(...t.reverse())}function Lt(...t){const e={};for(const i of t){if(!ws(i))continue;const s=Hy(i)?Sc(i):Object.keys(i);for(const a of s)xs(e[a])&&xs(i[a])?e[a]=Lt(e[a],i[a]):e[a]??(e[a]=i[a])}return e}function Ky(t,...e){return e&&ce(t)?t.map(i=>Lt(i,...e)):t}function s5(t,e){return Object.entries(t).reduce((i,[s,a])=>(i[s]=e(a,s,t),i),{})}function FM(t,e){const i={...t};for(const s of e)delete i[s];return i}function jM(t,e){return(ce(e)?e:e.split(".")).reduce((s,a)=>s[a],t)}function GM(t,e,i){const s=ce(e)?e.slice():e.split("."),a=s.pop();if(s.some(o=>Xy.has(o)))return;const n=s.reduce((o,r)=>o[r],t);return n[a]=i,n[a]}function il(t,e,i){if(i===void 0)return e;for(const s of t){const a=i[s];a!==void 0&&(e[s]=a)}return e}function bp(t){return Object.freeze(t),Object.getOwnPropertyNames(t).forEach(e=>{const i=t[e];i!==null&&(typeof i=="object"||typeof i=="function")&&!Object.isFrozen(i)&&bp(i)}),t}var Xy,Yt=A({"packages/ag-charts-community/src/util/object.ts"(){"use strict";Jr(),Ct(),Xy=new Set(["__proto__","constructor","prototype"])}}),VM={};Oa(VM,{easeIn:()=>K2,easeInOut:()=>X2,easeInOutQuad:()=>Q2,easeInQuad:()=>Z2,easeOut:()=>hu,easeOutQuad:()=>$2,inverseEaseOut:()=>WM,linear:()=>UM});var UM,K2,hu,X2,Z2,$2,Q2,WM,uu=A({"packages/ag-charts-community/src/motion/easing.ts"(){"use strict";UM=t=>t,K2=t=>1-Math.cos(t*Math.PI/2),hu=t=>Math.sin(t*Math.PI/2),X2=t=>-(Math.cos(t*Math.PI)-1)/2,Z2=t=>t*t,$2=t=>1-(1-t)**2,Q2=t=>t<.5?2*t*t:1-(-2*t+2)**2/2,WM=t=>2*Math.asin(t)/Math.PI}});function a5(t){return t.every(e=>e instanceof Yo)}function Zy(t){return a5(t)?{nodes:t,selections:[]}:{nodes:[],selections:t}}function HM(t,e){return t===e?!0:Array.isArray(t)&&Array.isArray(e)?t.length===e.length&&t.every((i,s)=>HM(i,e[s])):up(t)&&up(e)?t.equals(e):xs(t)&&xs(e)?zM(t,e,HM):!1}var Sp,Dc,du,YM,KM,Ac=A({"packages/ag-charts-community/src/motion/animation.ts"(){"use strict";ae(),F2(),CM(),It(),Yt(),Ct(),uu(),Sp=.2,Dc=["initial","remove","update","add","trailing","end","none"],du={initial:{animationDuration:1,animationDelay:0},add:{animationDuration:.25,animationDelay:.75},remove:{animationDuration:.25,animationDelay:0},update:{animationDuration:.5,animationDelay:.25},trailing:{animationDuration:Sp,animationDelay:1,skipIfNoEarlierAnimations:!0},end:{animationDelay:1+Sp,animationDuration:0,skipIfNoEarlierAnimations:!0},none:{animationDuration:0,animationDelay:0}},YM=(t=>(t.Loop="loop",t.Reverse="reverse",t))(YM||{}),KM=class{constructor(t){this.isComplete=!1,this.elapsed=0,this.iteration=0,this.isPlaying=!1,this.isReverse=!1,this.id=t.id,this.groupId=t.groupId,this.autoplay=t.autoplay??!0,this.ease=t.ease??UM,this.phase=t.phase;const e=t.duration??du[this.phase].animationDuration;this.duration=e*t.defaultDuration,this.delay=(t.delay??0)*t.defaultDuration,this.onComplete=t.onComplete,this.onPlay=t.onPlay,this.onStop=t.onStop,this.onUpdate=t.onUpdate,this.interpolate=this.createInterpolator(t.from,t.to),this.from=t.from,t.skip===!0&&(this.onUpdate?.(t.to,!1,this),this.onStop?.(this),this.onComplete?.(this),this.isComplete=!0),t.collapsable!==!1&&(this.duration=this.checkCollapse(t,this.duration))}checkCollapse(t,e){return HM(t.from,t.to)?0:e}play(t=!1){this.isPlaying||this.isComplete||(this.isPlaying=!0,this.onPlay?.(this),this.autoplay&&(this.autoplay=!1,t&&this.onUpdate?.(this.from,!0,this)))}pause(){this.isPlaying=!1}stop(){this.isPlaying=!1,this.isComplete||(this.isComplete=!0,this.onStop?.(this))}update(t){if(this.isComplete)return t;!this.isPlaying&&this.autoplay&&this.play(!0);const e=this.elapsed;if(this.elapsed+=t,this.delay>this.elapsed)return 0;const i=this.interpolate(this.isReverse?1-this.delta:this.delta);this.onUpdate?.(i,!1,this);const s=this.delay+this.duration;return this.elapsed>=s?(this.stop(),this.isComplete=!0,this.onComplete?.(this),t-(s-e)):0}get delta(){return this.ease(At(0,(this.elapsed-this.delay)/this.duration,1))}createInterpolator(t,e){if(typeof e!="object"||up(e))return this.interpolateValue(t,e);const i=[];for(const s of Object.keys(e)){const a=this.interpolateValue(t[s],e[s]);a!=null&&i.push([s,a])}return s=>{const a={};for(const[n,o]of i)a[n]=o(s);return a}}interpolateValue(t,e){if(!(t==null||e==null)){if(up(t))return i=>t[hp](e,i);try{switch(typeof t){case"number":return QY(t,e);case"string":return z2(t,e);case"boolean":if(t===e)return()=>t;break}}catch{}throw new Error(`Unable to interpolate values: ${t}, ${e}`)}}}}}),q2={};Oa(q2,{NODE_UPDATE_STATE_TO_PHASE_MAPPING:()=>Vi,fromToMotion:()=>De,staticFromToMotion:()=>Yn});function De(t,e,i,s,a,n,o){const{fromFn:r,toFn:l,applyFn:c=(g,f)=>g.setProperties(f)}=a,{nodes:h,selections:u}=Zy(s),d=(g,f)=>{let x,m=0,b=0;for(const v of f){const S=g[m]===v,D={last:b>=f.length-1,lastLive:m>=g.length-1,prev:f[b-1],prevFromProps:x,prevLive:g[m-1],next:f[b+1],nextLive:g[m+(S?1:0)]},k=`${t}_${e}_${v.id}`;i.stopByAnimationId(k);let L="unknown";S?n&&o&&(L=n5(v,v.datum,n,o)):L="removed",v.transitionOut=L==="removed";const{phase:T,start:N,finish:C,delay:O,duration:R,...E}=r(v,v.datum,L,D),{phase:z,start:F,finish:G,delay:j,duration:V,...W}=l(v,v.datum,L,D),B=C==null;i.animate({id:k,groupId:t,phase:T??z??"update",duration:R??V,delay:O??j,from:E,to:W,ease:hu,collapsable:B,onPlay:()=>{c(v,{...N,...F,...E})},onUpdate(U){c(v,U)},onStop:()=>{c(v,{...N,...F,...E,...W,...C,...G})}}),S&&m++,b++,x=E}};let p=0;for(const g of u){const f=g.nodes(),x=f.filter(m=>!g.isGarbage(m));d(x,f),i.animate({id:`${t}_${e}_selection_${p}`,groupId:t,phase:"end",from:0,to:1,ease:hu,onStop(){g.cleanup()}}),p++}d(h,h)}function Yn(t,e,i,s,a,n,o){const{nodes:r,selections:l}=Zy(s),{start:c,finish:h,phase:u}=o;i.animate({id:`${t}_${e}`,groupId:t,phase:u??"update",from:a,to:n,ease:hu,onPlay:()=>{if(c){for(const d of r)d.setProperties(c);for(const d of l)for(const p of d.nodes())p.setProperties(c)}},onUpdate(d){for(const p of r)p.setProperties(d);for(const p of l)for(const g of p.nodes())g.setProperties(d)},onStop:()=>{for(const d of r)d.setProperties({...n,...h});for(const d of l){for(const p of d.nodes())p.setProperties({...n,...h});d.cleanup()}}})}function n5(t,e,i,s){const a=i(t,e);return s.added.has(a)?"added":s.removed.has(a)?"removed":"updated"}var Vi,Ii=A({"packages/ag-charts-community/src/motion/fromToMotion.ts"(){"use strict";Ac(),uu(),Vi={added:"add",updated:"update",removed:"remove",unknown:"initial","no-op":"none"}}});function $y(t,e){Qy.has(e)||(Qy.set(e,!0),t())}function XM(t){return t}function o5(t,e=0,i){const{leading:s=!1,trailing:a=!0,maxWait:n=1/0}=i??{};let o,r;if(n<e)throw new Error("Value of maxWait cannot be lower than waitMs.");function l(...c){if(s&&!r){r=Date.now(),o=setTimeout(()=>r=null,e),t(...c);return}let h=e;if(n!==1/0&&r){const u=Date.now()-r;e>n-u&&(h=n-u)}clearTimeout(o),r??(r=Date.now()),o=setTimeout(()=>{r=null,a&&t(...c)},h)}return Object.assign(l,{cancel(){clearTimeout(o),r=null}})}function ZM(t,e,i){const{leading:s=!0,trailing:a=!0}=i??{};let n,o,r=!1;function l(){a&&o?(n=setTimeout(l,e),t(...o)):r=!1,o=null}function c(...h){r?o=h:(r=!0,n=setTimeout(l,e),s?t(...h):o=h)}return Object.assign(c,{cancel(){clearTimeout(n),r=!1,o=null}})}var Qy,qy=A({"packages/ag-charts-community/src/util/function.ts"(){"use strict";Qy=new Map,$y.clear=()=>Qy.clear()}}),st,St=A({"packages/ag-charts-community/src/util/logger.ts"(){"use strict";qy(),st={log(...t){console.log(...t)},warn(t,...e){console.warn(`AG Charts - ${t}`,...e)},error(t,...e){typeof t=="object"?console.error("AG Charts error",t,...e):console.error(`AG Charts - ${t}`,...e)},table(...t){console.table(...t)},warnOnce(t,...e){$y(()=>st.warn(t,...e),`Logger.warn: ${t}`)},errorOnce(t,...e){$y(()=>st.error(t,...e),`Logger.error: ${t}`)}}}}),ci,pu=A({"packages/ag-charts-community/src/scale/invalidating.ts"(){"use strict";ci=(t,e)=>{const i=Symbol(String(e));t[i]=void 0,Object.defineProperty(t,e,{get(){return this[i]},set(s){this[i]!==s&&(this[i]=s,this.invalid=!0)},enumerable:!0,configurable:!1})}}}),hn,ie,Ui=A({"packages/ag-charts-community/src/scale/continuousScale.ts"(){"use strict";St(),It(),pu(),hn=class f2{constructor(e,i){this.invalid=!0,this.nice=!1,this.interval=void 0,this.tickCount=f2.defaultTickCount,this.minTickCount=0,this.maxTickCount=1/0,this.niceDomain=[],this.defaultClamp=!1,this.domain=e,this.range=i}static is(e){return e instanceof f2}transform(e){return e}transformInvert(e){return e}calcBandwidth(e=1){const i=this.getDomain(),s=this.getPixelRange(),a=Math.abs(i[1]-i[0])/e+1,n=Math.floor(s),o=Math.min(a,n);return s/Math.max(1,o)}getDomain(){return this.nice&&(this.refresh(),this.niceDomain.length)?this.niceDomain:this.domain}convert(e,i){if(!this.domain||this.domain.length<2)return NaN;this.refresh();const s=this.getDomain().map(c=>this.transform(c)),[a,n]=s,{range:o}=this,[r,l]=o;if(e=this.transform(e),i??this.defaultClamp){const[c,h]=Gi(s.map(Number));if(Number(e)<c)return r;if(Number(e)>h)return l}return a===n?(r+l)/2:e===a?r:e===n?l:r+(Number(e)-Number(a))/(Number(n)-Number(a))*(l-r)}invert(e,i){this.refresh();const s=this.getDomain().map(p=>this.transform(p)),[a,n]=s,{range:o}=this,[r,l]=o,c=r>l,h=c?l:r,u=c?r:l;if(i??this.defaultClamp){if(e<h)return c?n:a;if(e>u)return c?a:n}let d;return r===l?d=this.toDomain((Number(a)+Number(n))/2):d=this.toDomain(Number(a)+(e-r)/(l-r)*(Number(n)-Number(a))),this.transformInvert(d)}refresh(){this.invalid&&(this.invalid=!1,this.update(),this.invalid&&st.warnOnce("Expected update to not invalidate scale"))}getPixelRange(){const[e,i]=this.range;return Math.abs(i-e)}},hn.defaultTickCount=5,hn.defaultMaxTickCount=6,M([ci],hn.prototype,"domain",2),M([ci],hn.prototype,"range",2),M([ci],hn.prototype,"nice",2),M([ci],hn.prototype,"interval",2),M([ci],hn.prototype,"tickCount",2),M([ci],hn.prototype,"minTickCount",2),M([ci],hn.prototype,"maxTickCount",2),ie=hn}});function Xo(t){if(t.length===0)return null;let e=1/0,i=-1/0;for(let a of t)a instanceof Date&&(a=a.getTime()),typeof a=="number"&&(a<e&&(e=a),a>i&&(i=a));const s=[e,i];return s.every(isFinite)?s:null}function $M(t,e,i){let s=!1;return t.length>2&&(t=Xo(t)??[NaN,NaN]),isNaN(e)||(s||(s=e>t[0]),t=[e,t[1]]),isNaN(i)||(s||(s=i<t[1]),t=[t[0],i]),t[0]>t[1]&&(t=[]),{extent:t,clipped:s}}function sl(t,e){if(t==null||e==null||t.length!==e.length)return!1;for(let i=0;i<t.length;i++)if(Array.isArray(t[i])&&Array.isArray(e[i])){if(!sl(t[i],e[i]))return!1}else if(t[i]!==e[i])return!1;return!0}function vp(t){return typeof t>"u"?[]:Array.isArray(t)?t:[t]}function QM(t){return Array.from(new Set(t))}function Jy(t,e){return t.reduce((i,s)=>{const a=e(s);return i[a]??(i[a]=[]),i[a].push(s),i},{})}function qM(t,e,i=0){if(t.length===0)return[];const s=[];for(let a=0;a<e;a++)s.push(t.at((a+i)%t.length));return s}function J2(t,e){const i=new Map;return e.forEach((s,a)=>{i.set(s,a)}),t.sort((s,a)=>{const n=i.get(s)??1/0,o=i.get(a)??1/0;return n-o})}function JM(t,e){return t.includes(e)}var Ue=A({"packages/ag-charts-community/src/util/array.ts"(){"use strict"}}),Zo,xi,Wi,na,Kn,gu,Ic,Xn=A({"packages/ag-charts-community/src/util/time/duration.ts"(){"use strict";Zo=1e3,xi=Zo*60,Wi=xi*60,na=Wi*24,Kn=na*7,gu=na*30,Ic=na*365}}),kc,_s,Hi=A({"packages/ag-charts-community/src/util/time/interval.ts"(){"use strict";St(),kc=class{constructor(t,e,i){this._encode=t,this._decode=e,this._rangeCallback=i}floor(t){const e=new Date(t),i=this._encode(e);return this._decode(i)}ceil(t){const e=new Date(Number(t)-1),i=this._encode(e);return this._decode(i+1)}range(t,e,i){const s=this._rangeCallback?.(t,e),a=this._encode(i?this.floor(t):this.ceil(t)),n=this._encode(i?this.ceil(e):this.floor(e));if(n<a)return[];const o=[];for(let r=a;r<=n;r++){const l=this._decode(r);o.push(l)}return s?.(),o}},_s=class extends kc{getOffset(t,e){const i=typeof t=="number"||t instanceof Date?this._encode(new Date(t)):0;return Math.floor(i)%e}every(t,e){let i=0,s;const a=t;t=Math.max(1,Math.round(t)),a!==t&&st.warnOnce(`interval step of [${a}] rounded to [${t}].`);const{snapTo:n="start"}=e??{};if(typeof n=="string"){const l=i;s=(c,h)=>{const u=n==="start"?c:h;return i=this.getOffset(u,t),()=>i=l}}else typeof n=="number"?i=this.getOffset(new Date(n),t):n instanceof Date&&(i=this.getOffset(n,t));const o=l=>{const c=this._encode(l);return Math.floor((c-i)/t)},r=l=>this._decode(l*t+i);return new kc(o,r,s)}}}});function r5(t){const e=t.getTimezoneOffset()*xi;return Math.floor((t.getTime()-e)/na)}function l5(t){const e=new Date(1970,0,1);return e.setDate(e.getDate()+t),e}var Mp,t0=A({"packages/ag-charts-community/src/util/time/day.ts"(){"use strict";Xn(),Hi(),Mp=new _s(r5,l5)}});function c5(t){return Math.floor((t.getTime()-e0)/Wi)}function h5(t){return new Date(e0+t*Wi)}var e0,Lc,i0=A({"packages/ag-charts-community/src/util/time/hour.ts"(){"use strict";Xn(),Hi(),e0=new Date().getTimezoneOffset()*xi,Lc=new _s(c5,h5)}});function u5(t){return Math.floor((t.getTime()-s0)/xi)}function d5(t){return new Date(s0+t*xi)}var s0,Tc,a0=A({"packages/ag-charts-community/src/util/time/minute.ts"(){"use strict";Xn(),Hi(),s0=new Date().getTimezoneOffset()*xi,Tc=new _s(u5,d5)}});function p5(t){return t.getFullYear()*12+t.getMonth()}function g5(t){const e=Math.floor(t/12),i=t-e*12;return new Date(e,i,1)}var al,n0=A({"packages/ag-charts-community/src/util/time/month.ts"(){"use strict";Hi(),al=new _s(p5,g5)}});function f5(t){return Math.floor((t.getTime()-o0)/Zo)}function y5(t){return new Date(o0+t*Zo)}var o0,Nc,r0=A({"packages/ag-charts-community/src/util/time/second.ts"(){"use strict";Xn(),Hi(),o0=new Date().getTimezoneOffset()*xi,Nc=new _s(f5,y5)}});function Cc(t){const i=(7+t-4)%7;function s(n){const o=n.getTimezoneOffset()*xi;return Math.floor((n.getTime()-o)/Kn-i/7)}function a(n){const o=new Date(1970,0,1);return o.setDate(o.getDate()+n*7+i),o}return new _s(s,a)}var fu,tO,eO,iO,sO,aO,nO,l0=A({"packages/ag-charts-community/src/util/time/week.ts"(){"use strict";Xn(),Hi(),fu=Cc(0),tO=Cc(1),eO=Cc(2),iO=Cc(3),sO=Cc(4),aO=Cc(5),nO=Cc(6)}});function m5(t){return t.getFullYear()}function x5(t){const e=new Date;return e.setFullYear(t),e.setMonth(0,1),e.setHours(0,0,0,0),e}var Dp,c0=A({"packages/ag-charts-community/src/util/time/year.ts"(){"use strict";Hi(),Dp=new _s(m5,x5)}});function h0(t,e=new Date(t.getFullYear(),0,1)){const i=t.getTimezoneOffset()-e.getTimezoneOffset(),s=t.getTime()-e.getTime()+i*6e4,a=36e5*24;return Math.floor(s/a)}function oO(t,e){const s=new Date(t.getFullYear(),0,1).getDay(),a=(e-s+7)%7,n=new Date(t.getFullYear(),0,a+1);return n<=t?Math.floor(h0(t,n)/7)+1:0}function rO(t,e=t.getFullYear()){const s=new Date(e,0,1).getDay(),a=(d0-s+7)%7,n=new Date(e,0,a-(d0-u0)+1);return n<=t?Math.floor(h0(t,n)/7)+1:rO(t,e-1)}function b5(t){const e=t.getTimezoneOffset(),i=Math.abs(e);return`${e>0?"-":"+"}${ki(Math.floor(i/60),2,"0")}${ki(Math.floor(i%60),2,"0")}`}function ki(t,e,i){const s=String(Math.floor(t));return s.length>=e?s:`${i.repeat(e-s.length)}${s}`}function Ap(t){const e=[];for(;t.length>0;){let i=t.indexOf("%");if(i!==0){const r=i>0?t.substring(0,i):t;e.push(r)}if(i<0)break;const s=t[i+1],a=hO[s];a!=null&&i++;const n=t[i+1],o=cO[n];if(typeof o=="function")e.push([o,a]);else if(typeof o=="string"){const r=Ap(o);e.push([r,a])}else e.push(`${a??""}${n}`);t=t.substring(i+2)}return i=>{const s=typeof i=="number"?new Date(i):i;return e.map(a=>typeof a=="string"?a:a[0](s,a[1])).join("")}}var Ip,lO,u0,d0,cO,hO,tm=A({"packages/ag-charts-community/src/util/timeFormat.ts"(){"use strict";Ip={periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]},lO=0,u0=1,d0=4,cO={a:t=>Ip.shortDays[t.getDay()],A:t=>Ip.days[t.getDay()],b:t=>Ip.shortMonths[t.getMonth()],B:t=>Ip.months[t.getMonth()],c:"%x, %X",d:(t,e)=>ki(t.getDate(),2,e??"0"),e:"%_d",f:(t,e)=>ki(t.getMilliseconds()*1e3,6,e??"0"),H:(t,e)=>ki(t.getHours(),2,e??"0"),I:(t,e)=>{const i=t.getHours()%12;return i===0?"12":ki(i,2,e??"0")},j:(t,e)=>ki(h0(t)+1,3,e??"0"),m:(t,e)=>ki(t.getMonth()+1,2,e??"0"),M:(t,e)=>ki(t.getMinutes(),2,e??"0"),L:(t,e)=>ki(t.getMilliseconds(),3,e??"0"),p:t=>t.getHours()<12?"AM":"PM",Q:t=>String(t.getTime()),s:t=>String(Math.floor(t.getTime()/1e3)),S:(t,e)=>ki(t.getSeconds(),2,e??"0"),u:t=>{let e=t.getDay();return e<1&&(e+=7),String(e%7)},U:(t,e)=>ki(oO(t,lO),2,e??"0"),V:(t,e)=>ki(rO(t),2,e??"0"),w:(t,e)=>ki(t.getDay(),2,e??"0"),W:(t,e)=>ki(oO(t,u0),2,e??"0"),x:"%-m/%-d/%Y",X:"%-I:%M:%S %p",y:(t,e)=>ki(t.getFullYear()%100,2,e??"0"),Y:(t,e)=>ki(t.getFullYear(),4,e??"0"),Z:t=>b5(t),"%":()=>"%"},hO={_:" ",0:"0","-":""}}});function Ps(t){return t instanceof Date?t.getTime():t}function p0(t,e,i){const s=uO(t,e,i),a=Ap(s);return n=>a(n)}function uO(t=[],e=t,i=0){let s=1/0;for(let l=1;l<t.length;l++)s=Math.min(s,Math.abs(t[l]-t[l-1]));const a=new Date(e[0]).getFullYear(),o=new Date(e.at(-1)).getFullYear()-a>0,r=isFinite(s)?S5(s,t):v5(t[0]);return D5(Math.max(r-i,0),o,t)}function S5(t,e){return t<Zo?0:t<xi?1:t<Wi?2:t<na?3:t<Kn?4:t<na*28||t<na*31&&M5(e)?5:t<Ic?6:7}function v5(t){return Nc.floor(t)<t?0:Tc.floor(t)<t?1:Lc.floor(t)<t?2:Mp.floor(t)<t?3:al.floor(t)<t?fu.floor(t)<t?4:5:Dp.floor(t)<t?6:7}function M5(t){let e=new Date(t[0]).getMonth();for(let i=1;i<t.length;i++){const s=new Date(t[i]).getMonth();if(e===s)return!0;e=s}return!1}function D5(t,e,i){const s=Ps(i[0]),a=Ps(i.at(-1)),n=Math.abs(a-s),o=e||t===7,r=n===0,c=[["hour",6*Wi,14*na,3,"%I %p"],["hour",xi,6*Wi,3,"%I:%M"],["second",1e3,6*Wi,1,":%S"],["ms",0,6*Wi,0,".%L"],["am/pm",xi,6*Wi,3,"%p"]," ",["day",na,Kn,4,"%a"],["month",r?0:Kn,52*Kn,5,"%b %d"],["month",5*Kn,10*Ic,6,"%B"]," ",["year",o?0:Ic,1/0,7,"%Y"]].filter(d=>{if(typeof d=="string")return!0;const[p,g,f,x]=d;return x>=t&&g<=n&&n<f}).reduce((d,p)=>(typeof p=="string"?d.result.push(p):d.used.has(p[0])||(d.result.push(p),d.used.add(p[0])),d),{result:[],used:new Set}).result,h=c.findIndex(d=>typeof d!="string"),u=c.findLastIndex(d=>typeof d!="string");return c.slice(h,u+1).map(d=>typeof d=="string"?d:d[4]).join("").replaceAll(/\s+/g," ").trim()}var em=A({"packages/ag-charts-community/src/util/timeFormatDefaults.ts"(){"use strict";t0(),i0(),a0(),n0(),r0(),l0(),c0(),Xn(),tm()}}),kp,$o,nl=A({"packages/ag-charts-community/src/scale/bandScale.ts"(){"use strict";St(),It(),em(),pu(),kp=class a3{constructor(){this.type="band",this.invalid=!0,this.range=[0,1],this.round=!1,this.interval=void 0,this.index=new Map,this._domain=[],this._bandwidth=1,this._step=1,this._inset=1,this._rawBandwidth=1,this._paddingInner=0,this._paddingOuter=0}static is(e){return e instanceof a3}refresh(){this.invalid&&(this.invalid=!1,this.update(),this.invalid&&st.warnOnce("Expected update to not invalidate scale"))}set domain(e){this.index=new Map,this.invalid=!0,this._domain=[];for(const i of e){const s=Ps(i);this.getIndex(s)===void 0&&this.index.set(s,this._domain.push(i)-1)}}get domain(){return this._domain}getDomain(){return this._domain}ticks(){return this.refresh(),this._domain}convert(e){this.refresh();const i=this.getIndex(e);return i==null||i<0||i>=this.domain.length?NaN:this.ordinalRange(i)}invertNearestIndex(e){this.refresh();const{domain:i}=this;if(i.length===0)return-1;let s=0,a=i.length-1,n=1/0,o=0;for(;s<=a;){const r=(a+s)/2|0,l=this.ordinalRange(r),c=Math.abs(l-e);if(c===0)return r;c<n&&(n=c,o=r),l<e?s=r+1:a=r-1}return o}invert(e){this.refresh();const i=this.invertNearestIndex(e),s=this.ordinalRange(i);return e===s?this.domain[i]:void 0}invertNearest(e){const i=this.invertNearestIndex(e);return this.domain[i]}get bandwidth(){return this.refresh(),this._bandwidth}get step(){return this.refresh(),this._step}get inset(){return this.refresh(),this._inset}get rawBandwidth(){return this.refresh(),this._rawBandwidth}set padding(e){e=At(0,e,1),this._paddingInner=e,this._paddingOuter=e}get padding(){return this._paddingInner}set paddingInner(e){this._paddingInner=At(0,e,1)}get paddingInner(){return this._paddingInner}set paddingOuter(e){this._paddingOuter=At(0,e,1)}get paddingOuter(){return this._paddingOuter}update(){const e=this._domain.length;if(e===0)return;const[i,s]=this.range;let{_paddingInner:a}=this;const{_paddingOuter:n,round:o}=this,r=s-i;let l;e===1?(a=0,l=r*(1-n*2)):l=r/Math.max(1,e-a+n*2);const c=o?Math.floor(l):l;let h=i+(r-c*(e-a))/2,u=c*(1-a);o&&(h=Math.round(h),u=Math.round(u)),this._step=c,this._inset=h,this._bandwidth=u,this._rawBandwidth=l*(1-a)}ordinalRange(e){const{_inset:i,_step:s}=this;return i+s*e}getIndex(e){return this.index.get(e instanceof Date?e.getTime():e)}},M([ci],kp.prototype,"range",2),M([ci],kp.prototype,"round",2),M([ci],kp.prototype,"interval",2),$o=kp}});function Zn(t){return t instanceof Mt||t instanceof yu}var Mt,yu,Jt=A({"packages/ag-charts-community/src/util/properties.ts"(){"use strict";Jr(),St(),Ct(),Mt=class{set(t){const{className:e=this.constructor.name}=this.constructor;if(typeof t!="object")return st.warn(`unable to set ${e} - expecting a properties object`),this;const i=new Set(Object.keys(t));for(const s of Sc(this))if(i.has(s)){const a=t[s],n=this;if(Zn(n[s]))if(n[s]instanceof yu){const o=n[s].reset(a);o!=null?n[s]=o:st.warn(`unable to set [${s}] - expecting a properties array`)}else n[s].set(a);else n[s]=a;i.delete(s)}for(const s of i)st.warn(`unable to set [${s}] in ${e} - property is unknown`);return this}isValid(t){return Sc(this).every(e=>{const{optional:i}=qY(this,e),s=i===!0||typeof this[e]<"u";return s||st.warnOnce(`${t??""}[${e}] is required.`),s})}toJson(){return Sc(this).reduce((t,e)=>{const i=this[e];return t[e]=Zn(i)?i.toJson():i,t},{})}},yu=class n3 extends Array{constructor(e,...i){super(i.length);const a=(n=>!!n?.prototype?.constructor?.name)(e)?n=>new e().set(n):e;Object.defineProperty(this,"itemFactory",{value:a,enumerable:!1,configurable:!1}),this.set(i)}set(e){if(ce(e)){this.length=e.length;for(let i=0;i<e.length;i++)this[i]=this.itemFactory(e[i])}return this}reset(e){if(Array.isArray(e))return new n3(this.itemFactory,...e)}toJson(){return this.map(e=>e?.toJson?.()??e)}}}});function I(t,e={}){const{optional:i=!1,property:s}=e;return Ko((a,n,o)=>{const r={...e,target:a,property:n};if(i&&typeof o>"u"||t(o,r))return Zn(a[n])&&!Zn(o)?(a[n].set(o),a[n]):o;const l=s??String(n).replace(/^_*/,""),c=a.constructor.className??a.constructor.name.replace(/Properties$/,"");let h=Tp(o);const u=50;if(h!=null&&h.length>u){const d=h.length-u;h=h.slice(0,u)+`... (+${d} characters)`}return st.warn(`Property [${l}] of [${c}] cannot be set to [${h}]${t.message?`; expecting ${Lp(t,r)}`:""}, ignoring.`),mp},void 0,{optional:i})}function ne(t,e="a"){return Kt((i,s)=>{const a=t.find(n=>{const o=typeof n=="string"?n:n.value;return i===o});if(a==null)return!1;if(typeof a!="string"&&(a.deprecated===!0||a.deprecatedTo!=null)){const n=[`Property [%s] with value '${a.value}' is deprecated.`];a.deprecatedTo&&n.push(`Use ${a.deprecatedTo} instead.`),st.warnOnce(n.join(" "),s.property)}return!0},`${e} keyword such as ${A5(t)}`)}function Kt(t,e){return t.message=e,t}function A5(t){const e=t.filter(s=>typeof s=="string"||s.undocumented!==!0).map(s=>`'${typeof s=="string"?s:s.value}'`);if(e.length===1)return e[0];const i=e.pop();return`${e.join(", ")} or ${i}`}function Lp(t,e){return el(t.message)?t.message(e):t.message}function I5(t){return e=>Lp(e,t)}function k5(t){return Object.assign(t,{restrict({length:e,minLength:i}={}){let s="an array";return cn(i)&&i>0?s="a non-empty array":cn(e)&&(s=`an array of length ${e}`),Kt(a=>ce(a)&&(cn(e)?a.length===e:!0)&&(cn(i)?a.length>=i:!0),s)}})}function L5(t){return Object.assign(t,{restrict({min:e,max:i}={}){const s=["a number"],a=cn(e),n=cn(i);return a&&n?s.push(`between ${e} and ${i} inclusive`):a?s.push(`greater than or equal to ${e}`):n&&s.push(`less than or equal to ${i}`),Kt(o=>Vt(o)&&(a?o>=e:!0)&&(n?o<=i:!0),s.join(" "))}})}function dO(t){return Object.assign(t,{restrict(e){return Kt(i=>i instanceof e,i=>Lp(t,i)??`an instance of ${e.name}`)}})}function Tp(t){if(typeof t=="number"){if(isNaN(t))return"NaN";if(t===1/0)return"Infinity";if(t===-1/0)return"-Infinity"}return JSON.stringify(t)}var un,ol,ct,g0,pt,Yi,J,wt,f0,Np,nt,Ft,Oc,mu,$n,Cp,xu,bu,im,sm,y0,jt,oa,pO,Op,m0,gO,am,fO,yO,mO,Qn,nm,qn,Jn,Ep,x0,xO,bO,b0,SO,wp,om,S0,v0,xt=A({"packages/ag-charts-community/src/util/validation.ts"(){"use strict";yp(),Jr(),St(),Jt(),Ct(),un=(...t)=>{const e=[];return Kt((i,s)=>(e.length=0,t.every(a=>{const n=a(i,s);return n||e.push(Lp(a,s)),n})),()=>e.filter(Boolean).join(" AND "))},ol=(...t)=>Kt((e,i)=>t.some(s=>s(e,i)),e=>t.map(I5(e)).filter(Boolean).join(" OR ")),ct=dO(Kt((t,e)=>Zn(t)||ws(t)&&Zn(e.target[e.property]),"a properties object")),g0=dO(Kt(t=>ws(t),"an object")),pt=Kt(BM,"a boolean"),Yi=Kt(el,"a function"),J=Kt(Rs,"a string"),wt=L5(Kt(Vt,"a number")),f0=Kt(t=>cn(t)&&!isNaN(t),"a real number"),Np=Kt(t=>cn(t)&&isNaN(t),"NaN"),nt=wt.restrict({min:0}),Ft=wt.restrict({min:0,max:1}),Oc=ol(wt,Np),mu=k5(Kt(ce,"an array")),$n=(t,e)=>Kt((i,s)=>ce(i)&&i.every(a=>t(a,s)),i=>{const s=Lp(mu,i)??"";return typeof e=="function"?`${s} of ${e(i)}`:e?`${s} of ${e}`:s}),Cp=t=>Vt(t)||Yy(t),xu=t=>Kt((e,i)=>!Cp(e)||!Cp(i.target[t])||e<i.target[t],`to be less than ${t}`),bu=t=>Kt((e,i)=>!Cp(e)||!Cp(i.target[t])||e>i.target[t],`to be greater than ${t}`),im=Kt(Yy,"Date object"),sm=ol(im,nt),y0="A color string can be in one of the following formats to be valid: #rgb, #rrggbb, rgb(r, g, b), rgba(r, g, b, a) or a CSS color name such as 'white', 'orange', 'cyan', etc",jt=Kt(t=>Rs(t)&&Ra.validColorString(t),`color String. ${y0}`),oa=Kt($n(jt),`color strings. ${y0}`),pO=$n(pt,"boolean values"),Op=$n(wt,"numbers"),m0=$n(J,"strings"),gO=Kt($n(im),"Date objects"),am=Kt($n(ct),"objects"),fO=ne(["butt","round","square"],"a line cap"),yO=ne(["round","bevel","miter"],"a line join"),mO=ne(["solid","dashed","dotted"],"a line style"),Qn=Kt($n(nt),"numbers specifying the length in pixels of alternating dashes and gaps, for example, [6, 3] means dashes with a length of 6 pixels with gaps between of 3 pixels."),nm=ne(["top","right","bottom","left"],"a position"),qn=ne(["normal","italic","oblique"],"a font style"),Jn=ol(ne(["normal","bold","bolder","lighter"],"a font weight"),wt.restrict({min:1,max:1e3})),Ep=ne(["never","always","hyphenate","on-space"],"a text wrap strategy"),x0=ne(["left","center","right"],"a text align"),xO=ne(["top","middle","bottom"],"a vertical align"),bO=ne(["ellipsis","hide"],"an overflow strategy"),b0=ne(["horizontal","vertical"],"a direction"),SO=ne(["inside","outside"],"a placement"),wp=ol(ne(["exact","nearest"],"interaction range"),wt),om=ne(["top","bottom","left","right"]),S0=ol(un(wt.restrict({min:1}),xu("maxSpacing")),Np),v0=ol(un(wt.restrict({min:1}),bu("minSpacing")),Np)}}),rm,fe=A({"packages/ag-charts-community/src/chart/chartAxisDirection.ts"(){"use strict";rm=(t=>(t.X="x",t.Y="y",t))(rm||{})}}),lm,M0=A({"packages/ag-charts-community/src/module/moduleMap.ts"(){"use strict";Ct(),lm=class{constructor(){this.moduleMap=new Map}*modules(){for(const t of this.moduleMap.values())yield t.moduleInstance}addModule(t,e){if(this.moduleMap.has(t.optionsKey))throw new Error(`AG Charts - module already initialised: ${t.optionsKey}`);this.moduleMap.set(t.optionsKey,{module:t,moduleInstance:e(t)})}removeModule(t){const e=Rs(t)?t:t.optionsKey;this.moduleMap.get(e)?.moduleInstance.destroy(),this.moduleMap.delete(e)}getModule(t){return this.moduleMap.get(Rs(t)?t:t.optionsKey)?.moduleInstance}isEnabled(t){return this.moduleMap.has(Rs(t)?t:t.optionsKey)}mapModules(t){return Array.from(this.moduleMap.values(),(e,i)=>t(e.moduleInstance,i))}destroy(){for(const t of this.moduleMap.keys())this.moduleMap.get(t)?.moduleInstance.destroy();this.moduleMap.clear()}}}}),vO={};Oa(vO,{resetMotion:()=>We});function We(t,e){const{nodes:i,selections:s}=Zy(t);for(const a of s){for(const n of a.nodes()){const o=e(n,n.datum);n.setProperties(o)}a.cleanup()}for(const a of i){const n=e(a,a.datum);a.setProperties(n)}}var rl=A({"packages/ag-charts-community/src/motion/resetMotion.ts"(){"use strict";Ac()}});function MO(t){let e,i;const s=kO.exec(t);s&&([,e,t,i]=s);const a=IO.exec(t);if(!a)throw new Error(`The number formatter is invalid: ${t}`);const[,n,o,r,l,c,h,u,d,p,g]=a;return{fill:n,align:o,sign:r,symbol:l,zero:c,width:parseInt(h),comma:u,precision:parseInt(d),trim:!!p,type:g,prefix:e,suffix:i}}function DO(t){const e=typeof t=="string"?MO(t):t,{fill:i,align:s,sign:a="-",symbol:n,zero:o,width:r,comma:l,type:c,prefix:h="",suffix:u="",precision:d}=e;let{trim:p}=e;const g=d==null||isNaN(d);let f;if(!c)f=ra.g,p=!0;else if(c in ra&&c in Ec)f=g?Ec[c]:ra[c];else if(c in ra)f=ra[c];else if(c in Ec)f=Ec[c];else throw new Error(`The number formatter type is invalid: ${c}`);let x;return d==null||g?x=c?6:12:x=d,m=>{let b=f(m,x);return p&&(b=T5(b)),l&&(b=N5(b,l)),b=O5(m,b,a),n&&n!=="#"&&(b=`${n}${b}`),n==="#"&&c==="x"&&(b=`0x${b}`),c==="s"&&(b=`${b}${C5(m)}`),(c==="%"||c==="p")&&(b=`${b}%`),r!=null&&!isNaN(r)&&(b=E5(b,r,i??o,s)),b=`${h}${b}${u}`,b}}function cm(t){return Math.floor(Math.abs(t))}function T5(t){return t.replace(/\.0+$/,"").replace(/(\.[1-9])0+$/,"$1")}function N5(t,e){let i=t.indexOf(".");i<0&&(i=t.length);const s=t.substring(0,i).split(""),a=t.substring(i);for(let n=s.length-3;n>0;n-=3)s.splice(n,0,e);return`${s.join("")}${a}`}function C5(t){return LO[AO(t)]}function AO(t){return At(D0,t?Math.floor(Math.log10(Math.abs(t))/3)*3:0,A0)}function O5(t,e,i=""){if(i==="(")return t>=0?e:`(${e})`;const s=i==="+"?"+":"";return`${t>=0?s:TO}${e}`}function E5(t,e,i=" ",s=">"){let a=t;if(s===">"||!s)a=a.padStart(e,i);else if(s==="<")a=a.padEnd(e,i);else if(s==="^"){const n=Math.max(0,e-a.length),o=Math.ceil(n/2),r=Math.floor(n/2);a=a.padStart(o+a.length,i),a=a.padEnd(r+a.length,i)}return a}var IO,kO,Ec,ra,D0,A0,LO,TO,NO=A({"packages/ag-charts-community/src/util/numberFormat.ts"(){"use strict";It(),IO=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(?:\.(\d+))?(~)?([%a-z])?$/i,kO=/^((?:[^#]|#[^{])*)#{([^}]+)}(.*)$/,Ec={b:t=>cm(t).toString(2),c:t=>String.fromCharCode(t),d:t=>Math.round(Math.abs(t)).toFixed(0),o:t=>cm(t).toString(8),x:t=>cm(t).toString(16),X:t=>Ec.x(t).toUpperCase(),n:t=>Ec.d(t),"%":t=>`${cm(t*100).toFixed(0)}`},ra={e:(t,e)=>Math.abs(t).toExponential(e),E:(t,e)=>ra.e(t,e).toUpperCase(),f:(t,e)=>Math.abs(t).toFixed(e),F:(t,e)=>ra.f(t,e).toUpperCase(),g:(t,e)=>{if(t===0)return"0";const i=Math.abs(t),s=Math.floor(Math.log10(i));return s>=-4&&s<e?i.toFixed(e-1-s):i.toExponential(e-1)},G:(t,e)=>ra.g(t,e).toUpperCase(),n:(t,e)=>ra.g(t,e),p:(t,e)=>ra.r(t*100,e),r:(t,e)=>{if(t===0)return"0";const i=Math.abs(t),a=Math.floor(Math.log10(i))-(e-1);if(a<=0)return i.toFixed(-a);const n=10**a;return(Math.round(i/n)*n).toFixed()},s:(t,e)=>{const i=AO(t);return ra.r(t/10**i,e)},"%":(t,e)=>ra.f(t*100,e)},D0=-24,A0=24,LO={[D0]:"y",[-21]:"z",[-18]:"a",[-15]:"f",[-12]:"p",[-9]:"n",[-6]:"\xB5",[-3]:"m",0:"",3:"k",6:"M",9:"G",12:"T",15:"P",18:"E",21:"Z",[A0]:"Y"},TO="\u2212"}});function w5(t){return t.getTime()}function R5(t){return new Date(t)}var I0,CO=A({"packages/ag-charts-community/src/util/time/millisecond.ts"(){"use strict";Hi(),I0=new _s(w5,R5)}});function OO(t,e){return Math.abs(Math.round(t)-t)<e}function k0(t,e,i,s,a){if(i<2)return[t,e];const n=Rp(t,e,i,s,a);return Number.isFinite(n)?(OO(t/n,1e-12)||(t=Math.ceil(t/n)*n),OO(e/n,1e-12)||(e=Math.floor(e/n)*n),hm(t,e,n)):[]}function EO(t,e,i,s,a,n){const o=n??Math.abs(e-t)/Math.max(i,1);let r=0;for(const d of Su){if(o<=d.duration)break;r++}if(r===0){const d=Math.max(Rp(t,e,i,s,a),1);return I0.every(d)}else if(r===Su.length){const d=n==null?Rp(t/Ic,e/Ic,i,s,a):1;return Dp.every(d)}const l=Su[r-1],c=Su[r],{timeInterval:h,step:u}=o-l.duration<c.duration-o?l:c;return h.every(u)}function Rp(t,e,i,s=0,a=1/0){if(t===e)return At(1,s,a);if(i<1)return NaN;const n=Math.abs(e-t),o=10**Math.floor(Math.log10(n/i));let r=NaN,l=1/0,c=!1;for(const h of L0){const u=Math.ceil(n/(h*o)),d=u>=s&&u<=a;if(c&&!d)continue;const p=Math.abs(u-i);(l>p||c!==d)&&(c||(c=d),l=p,r=h)}return r*o}function wO(t){for(let e=t.length-1;e>=0;e-=1)if(t[e]!=="0")return e+1;return 0}function _5(t,e){const i=MO(e??",f");(i.precision==null||isNaN(i.precision))&&(!i.type||"eEFgGnprs".includes(i.type)?i.precision=Math.max(...t.map(a=>{if(!Number.isFinite(a))return 0;const[n,o]=a.toExponential((i.type?6:12)-1).split(/[.e]/g);return(n!=="1"&&n!=="-1"?1:0)+wO(o)+1})):"f%".includes(i.type)&&(i.precision=Math.max(...t.map(a=>{if(!Number.isFinite(a)||a===0)return 0;const n=Math.floor(Math.log10(Math.abs(a))),o=i.type?6:12,r=a.toExponential(o-1).split(/[.e]/g)[1],l=wO(r);return Math.max(0,l-n)}))));const s=DO(i);return a=>s(Number(a))}function hm(t,e,i){if(!Number.isFinite(i)||i<=0)return[];const s=10**Vy(i),a=Math.min(t,e),n=Math.max(t,e),o=[];for(let r=0;;r+=1){const l=Math.round((a+i*r)*s)/s;if(l>n)break;o.push(l)}return o}function _p(t,e){return t>=e?(st.warnOnce("the configured interval results in more than 1 item per pixel, ignoring. Supply a larger interval or omit this configuration"),!0):!1}function P5(t,e){const i=Math.abs(e-t),s=10**Math.floor(Math.log10(i));let a=1/0,n=[t,e];for(const o of L0){const r=o*s,l=Math.floor(t/r)*r,c=Math.ceil(e/r)*r,h=1-i/Math.abs(c-l);a>h&&(a=h,n=[l,c])}return n}function RO(t,e,i,s,a){a=Math.max(a,t/(s+1)),isNaN(e)&&(e=a),isNaN(i)&&(i=t),e>i&&(e===a?e=i:i=e);const n=Math.max(1,Math.floor(t/e)),o=Math.min(n,Math.ceil(t/i)),r=At(o,s,n);return{minTickCount:o,maxTickCount:n,tickCount:r}}var ye,Su,L0,wc=A({"packages/ag-charts-community/src/util/ticks.ts"(){"use strict";St(),It(),NO(),t0(),Xn(),i0(),Hi(),CO(),a0(),n0(),r0(),l0(),c0(),ye=(t,e,i)=>({duration:e*i,timeInterval:t,step:i}),Su=[ye(Nc,Zo,1),ye(Nc,Zo,5),ye(Nc,Zo,15),ye(Nc,Zo,30),ye(Tc,xi,1),ye(Tc,xi,5),ye(Tc,xi,15),ye(Tc,xi,30),ye(Lc,Wi,1),ye(Lc,Wi,3),ye(Lc,Wi,6),ye(Lc,Wi,12),ye(Mp,na,1),ye(Mp,na,2),ye(fu,Kn,1),ye(fu,Kn,2),ye(fu,Kn,3),ye(al,gu,1),ye(al,gu,2),ye(al,gu,3),ye(al,gu,4),ye(al,gu,6),ye(Dp,Ic,1)],L0=[1,2,5,10]}}),T0,um,N0=A({"packages/ag-charts-community/src/scale/logScale.ts"(){"use strict";qy(),St(),It(),NO(),wc(),Ct(),Ui(),pu(),T0=class y2 extends ie{constructor(){super([1,10],[0,1]),this.type="log",this.base=10,this.baseLog=XM,this.basePow=XM,this.log=e=>Math.min(...this.domain)>=0?this.baseLog(e):-this.baseLog(-e),this.pow=e=>Math.min(...this.domain)>=0?this.basePow(e):-this.basePow(-e),this.defaultClamp=!0}toDomain(e){return e}transform(e){return Math.min(...this.domain)>=0?Math.log(e):-Math.log(-e)}transformInvert(e){return Math.min(...this.domain)>=0?Math.exp(e):-Math.exp(-e)}refresh(){this.base<=0&&(this.base=0,st.warnOnce("expecting a finite Number greater than to 0")),super.refresh()}update(){!this.domain||this.domain.length<2||(this.baseLog=y2.getBaseLogMethod(this.base),this.basePow=y2.getBasePowerMethod(this.base),this.nice&&this.updateNiceDomain())}updateNiceDomain(){const[e,i]=this.domain,s=e>i?Math.ceil:Math.floor,a=e>i?Math.floor:Math.ceil,n=this.pow(s(this.log(e))),o=this.pow(a(this.log(i)));this.niceDomain=[n,o]}ticks(){const e=this.tickCount??10;if(!this.domain||this.domain.length<2||e<1)return[];this.refresh();const i=this.base,[s,a]=this.getDomain(),n=Math.min(s,a),o=Math.max(s,a);let r=this.log(n),l=this.log(o);if(this.interval){const p=x=>x>=n&&x<=o,g=Math.min(Math.abs(this.interval),Math.abs(l-r)),f=hm(r,l,g).map(this.pow).filter(p);if(!_p(f.length,this.getPixelRange()))return f}if(!B2(i)||l-r>=e)return k0(r,l,Math.min(l-r,e)).map(this.pow);const c=[],h=n>0;r=Math.floor(r)-1,l=Math.round(l)+1;const u=dp(this.range)/e;let d=1/0;for(let p=r;p<=l;p++){const g=this.convert(this.pow(p+1));for(let f=1;f<i;f++){const x=h?f:i-f+1,m=this.pow(p)*x,b=this.convert(m),v=Math.abs(d-b),S=Math.abs(b-g),D=v>=u&&S>=u;m>=n&&m<=o&&(f===1||D||c.length===0)&&(c.push(m),d=b)}}return c}tickFormat({specifier:e}){return e??(e=this.base===10?".0e":","),Rs(e)?DO(e):e}static getBaseLogMethod(e){switch(e){case 10:return Math.log10;case Math.E:return Math.log;case 2:return Math.log2;default:return i=>Math.log(i)/Math.log(e)}}static getBasePowerMethod(e){switch(e){case 10:return i=>i>=0?10**i:1/10**-i;case Math.E:return Math.exp;default:return i=>e**i}}},M([ci],T0.prototype,"base",2),um=T0}});function _O(t,e,i){if(t>e)return;let s;for(;e>=t;){const a=Math.floor((e+t)/2);i(a)?(s=a,t=a+1):e=a-1}return s}function PO(t,e,i){if(t>e)return;let s;for(;e>=t;){const a=Math.floor((e+t)/2);i(a)?(s=a,e=a-1):t=a+1}return s}function B5(t,e,i){if(t>e)return;let s;for(;e>=t;){const a=Math.floor((e+t)/2),n=i(a);n==null?e=a-1:(s=n,t=a+1)}return s}function BO(t,e,i){if(t>e)return;let s;for(;e>=t;){const a=Math.floor((e+t)/2),n=i(a);n==null?t=a+1:(s=n,e=a-1)}return s}var C0=A({"packages/ag-charts-community/src/util/binarySearch.ts"(){"use strict"}});function zO(t,e){return t.valueOf()-e.valueOf()}function z5(t){let e=NaN;const i=[];for(const s of t){const a=s.valueOf();e!==a&&i.push(s),e=a}return i}function FO(t){const e=t.slice().sort(zO);return O0(t)==null?z5(e):e}function O0(t){if(t.length===0)return 1;const e=Number(t[t.length-1])>Number(t[0])?1:-1;let i=-1/0*e;for(const s of t){const a=s.valueOf();if(Math.sign(a-i)!==e)return;i=a}return e}var jO=A({"packages/ag-charts-community/src/util/date.ts"(){"use strict"}}),dm,E0=A({"packages/ag-charts-community/src/scale/timeScale.ts"(){"use strict";It(),wc(),Hi(),tm(),em(),Ui(),dm=class MM extends ie{constructor(){super([],[0,1]),this.type="time"}toDomain(e){return new Date(e)}convert(e,i){return e instanceof Date||(e=new Date(e)),super.convert(e,i)}invert(e){return new Date(super.invert(e))}ticks(){if(!this.domain||this.domain.length<2)return[];this.refresh();const{interval:e,nice:i,tickCount:s,minTickCount:a,maxTickCount:n}=this,[o,r]=Gi(this.getDomain().map(Ps));return e!=null?MM.getTicksForInterval({start:o,stop:r,interval:e,availableRange:this.getPixelRange()})??MM.getDefaultTicks({start:o,stop:r,tickCount:s,minTickCount:a,maxTickCount:n}):i&&s===2?this.niceDomain:i&&s===1?this.niceDomain.slice(0,1):MM.getDefaultTicks({start:o,stop:r,tickCount:s,minTickCount:a,maxTickCount:n})}static getDefaultTicks({start:e,stop:i,tickCount:s,minTickCount:a,maxTickCount:n}){const o=EO(e,i,s,a,n);return o?o.range(new Date(e),new Date(i)):[]}static getTicksForInterval({start:e,stop:i,interval:s,availableRange:a}){if(!s)return[];if(s instanceof kc){const h=s.range(new Date(e),new Date(i));return _p(h.length,a)?void 0:h}const n=Math.abs(s);if(_p((i-e)/n,a))return;const o=Su.findLast(h=>n%h.duration===0);if(o)return o.timeInterval.every(n/(o.duration/o.step)).range(new Date(e),new Date(i));let r=new Date(e);const l=new Date(i),c=[];for(;r<=l;)c.push(r),r=new Date(r),r.setMilliseconds(r.getMilliseconds()+n);return c}tickFormat({ticks:e,domain:i,specifier:s,formatOffset:a}){return s==null?p0(e,i,a):Ap(s)}update(){!this.domain||this.domain.length<2||this.nice&&this.updateNiceDomain()}updateNiceDomain(){let[i,s]=this.domain;for(let a=0;a<4;a++){this.updateNiceDomainIteration(i,s);const[n,o]=this.niceDomain;if(Ps(i)===Ps(n)&&Ps(s)===Ps(o))break;i=n,s=o}}updateNiceDomainIteration(e,i){const s=Math.min(Ps(e),Ps(i)),a=Math.max(Ps(e),Ps(i)),n=e>i,{interval:o}=this;let r;if(o instanceof kc)r=o;else{const l=typeof o=="number"?(a-s)/Math.max(o,1):this.tickCount;r=EO(s,a,l,this.minTickCount,this.maxTickCount)}if(r){const l=r.range(new Date(s),new Date(a),!0),c=n?[...l].reverse():l,h=c[0],u=c.at(-1);this.niceDomain=[h,u]}}}}}),vu,_a,Mu=A({"packages/ag-charts-community/src/scale/ordinalTimeScale.ts"(){"use strict";C0(),jO(),tm(),em(),nl(),Ui(),pu(),E0(),vu=class o3 extends $o{constructor(){super(...arguments),this.type="ordinal-time",this.tickCount=ie.defaultTickCount,this.minTickCount=0,this.maxTickCount=1/0,this.interval=void 0,this._domain=[],this.sortedTimestamps=[],this.visibleRange=[0,1],this.isReversed=!1,this._values=void 0}static is(e){return e instanceof o3}setVisibleRange(e){this.visibleRange=e}set domain(e){if(e===this._values)return;this.invalid=!0;const i=O0(e),s=i==null?FO(e):e,a=i===-1,n=s.map(Ps);a&&n.reverse(),this._values=e,this._domain=s,this.isReversed=a,this.sortedTimestamps=n,this.precomputedSteps=void 0;const o=e.length<1e4?n.length:Math.ceil(n.length/16);if(o<=1)return;this.refresh();const r=new Int32Array(o),l=n[0].valueOf(),h=n[n.length-1].valueOf()-l;for(let u=0;u<r.length;u+=1)r[u]=this.findInterval(l+u/o*h);this.precomputedSteps=r}get domain(){return this._domain}ticks(){if(!this._domain.length)return[];this.refresh();const{domain:e,isReversed:i,interval:s}=this,[a,n]=[e[0].valueOf(),e.at(-1).valueOf()],o=Math.min(a,n),r=Math.max(a,n);if(s==null)return this.getDefaultTicks(this.maxTickCount,i);const[l,c]=this.range,h=Math.abs(c-l),u=dm.getTicksForInterval({start:o,stop:r,interval:s,availableRange:h})??[];let d=-1;return u.filter(p=>{const g=this.findInterval(p.valueOf()),f=g===d;return d=g,!f})}getDefaultTicks(e,i){const{domain:s,visibleRange:a}=this,n=[],o=Math.ceil(s.length*(a[1]-a[0])/e),r=Math.floor(o/2);for(let l=0;l<s.length;l+=1){const c=s[l],h=i?s.length-1-l:l;(o<=0||(h+r)%o===0)&&n.push(c)}return i&&n.reverse(),n}convert(e){this.refresh();const i=Number(e);if(i<this.sortedTimestamps[0])return NaN;let s=this.findInterval(i);return this.isReversed&&(s=this.domain.length-s-1),this.ordinalRange(s)}findInterval(e){const{sortedTimestamps:i,precomputedSteps:s}=this;let a,n;if(s==null)a=0,n=i.length-1;else{const o=i[0].valueOf(),r=i[i.length-1].valueOf(),l=Math.min((e-o)/(r-o)*s.length|0,s.length-1|0);a=s[l],n=l<s.length-2?s[l+1]:i.length-1}for(;a<=n;){const o=(a+n)/2|0;if(i[o]===e)return o;i[o]<e?a=o+1:n=o-1}return a}tickFormat({ticks:e,domain:i,specifier:s}){return s==null?p0(e,i):Ap(s)}invert(e){this.refresh();const{domain:i}=this;return BO(0,i.length-1,a=>this.ordinalRange(a)>=e?i[a]:void 0)??i[0]}invertNearest(e){return super.invertNearest(e)}},M([ci],vu.prototype,"tickCount",2),M([ci],vu.prototype,"minTickCount",2),M([ci],vu.prototype,"maxTickCount",2),M([ci],vu.prototype,"interval",2),_a=vu}});function F5(t,e){return typeof t=="number"&&typeof e=="number"?t-e:typeof t=="string"&&typeof e=="string"?t.localeCompare(e):t==null&&e==null?0:t==null?-1:e==null?1:String(t).localeCompare(String(e))}var j5=A({"packages/ag-charts-community/src/util/compare.ts"(){"use strict"}});function Du(t,e,i=1e-8){return t===e||Math.abs(e-t)<i}var w0,pm,Pa,GO=A({"packages/ag-charts-community/src/scene/matrix.ts"(){"use strict";kt(),w0=[1,0,0,1,0,0],pm=class op{get e(){return[...this.elements]}constructor(e=[...w0]){this.elements=e}setElements(e){const i=this.elements;return i[0]=e[0],i[1]=e[1],i[2]=e[2],i[3]=e[3],i[4]=e[4],i[5]=e[5],this}get identity(){const e=this.elements;return Du(e[0],1)&&Du(e[1],0)&&Du(e[2],0)&&Du(e[3],1)&&Du(e[4],0)&&Du(e[5],0)}AxB(e,i,s){const a=e[0]*i[0]+e[2]*i[1],n=e[1]*i[0]+e[3]*i[1],o=e[0]*i[2]+e[2]*i[3],r=e[1]*i[2]+e[3]*i[3],l=e[0]*i[4]+e[2]*i[5]+e[4],c=e[1]*i[4]+e[3]*i[5]+e[5];s=s??e,s[0]=a,s[1]=n,s[2]=o,s[3]=r,s[4]=l,s[5]=c}multiplySelf(e){return this.AxB(this.elements,e.elements),this}multiply(e){const i=new Array(6);return e instanceof op?this.AxB(this.elements,e.elements,i):this.AxB(this.elements,[e.a,e.b,e.c,e.d,e.e,e.f],i),new op(i)}preMultiplySelf(e){return this.AxB(e.elements,this.elements,this.elements),this}inverse(){const e=this.elements;let i=e[0],s=e[1],a=e[2],n=e[3];const o=e[4],r=e[5],l=1/(i*n-s*a);return i*=l,s*=l,a*=l,n*=l,new op([n,-s,-a,i,a*r-n*o,s*o-i*r])}inverseTo(e){const i=this.elements;let s=i[0],a=i[1],n=i[2],o=i[3];const r=i[4],l=i[5],c=1/(s*o-a*n);return s*=c,a*=c,n*=c,o*=c,e.setElements([o,-a,-n,s,n*l-o*r,a*r-s*l]),this}invertSelf(){const e=this.elements;let i=e[0],s=e[1],a=e[2],n=e[3];const o=e[4],r=e[5],l=1/(i*n-s*a);return i*=l,s*=l,a*=l,n*=l,e[0]=n,e[1]=-s,e[2]=-a,e[3]=i,e[4]=a*r-n*o,e[5]=s*o-i*r,this}transformPoint(e,i){const s=this.elements;return{x:e*s[0]+i*s[2]+s[4],y:e*s[1]+i*s[3]+s[5]}}transformBBox(e,i){const s=this.elements,a=s[0],n=s[1],o=s[2],r=s[3],l=e.width*.5,c=e.height*.5,h=e.x+l,u=e.y+c,d=Math.abs(l*a)+Math.abs(c*o),p=Math.abs(l*n)+Math.abs(c*r);return i??(i=new lt(0,0,0,0)),i.x=h*a+u*o+s[4]-d,i.y=h*n+u*r+s[5]-p,i.width=d+d,i.height=p+p,i}toContext(e){if(this.identity)return;const i=this.elements;e.transform(i[0],i[1],i[2],i[3],i[4],i[5])}static flyweight(e){return op.instance.setElements(e.elements)}static updateTransformMatrix(e,i,s,a,n,o,r){const l=i,c=s;let h,u;l===1&&c===1?(h=0,u=0):(h=r?.scalingCenterX??0,u=r?.scalingCenterY??0);const d=a,p=Math.cos(d),g=Math.sin(d);let f,x;d===0?(f=0,x=0):(f=r?.rotationCenterX??0,x=r?.rotationCenterY??0);const m=n,b=o,v=h*(1-l)-f,S=u*(1-c)-x;return e.setElements([p*l,g*l,-g*c,p*c,p*v-g*S+f+m,g*v+p*S+x+b]),e}static fromContext(e){const i=e.getTransform();return new op([i.a,i.b,i.c,i.d,i.e,i.f])}},pm.instance=new pm,Pa=pm}});function ll(t){return VO(t.constructor)}function VO(t){return t[P0]===!0}function R0(t){var e,i;const s=t;if(VO(t))return t;const a=Symbol("matrix_combined_transform");class n extends s{constructor(){super(...arguments),this[i]=new Pa,this._dirtyTransform=!0}markDirtyTransform(){this._dirtyTransform=!0,super.markDirty()}updateMatrix(r){}computeTransformMatrix(){this._dirtyTransform&&(this[a].setElements(w0),this.updateMatrix(this[a]),this._dirtyTransform=!1)}toParent(r){return this.computeTransformMatrix(),this[a].identity?r.clone():this[a].transformBBox(r)}toParentPoint(r,l){return this.computeTransformMatrix(),this[a].identity?{x:r,y:l}:this[a].transformPoint(r,l)}fromParent(r){return this.computeTransformMatrix(),this[a].identity?r.clone():this[a].inverse().transformBBox(r)}fromParentPoint(r,l){return this.computeTransformMatrix(),this[a].identity?{x:r,y:l}:this[a].inverse().transformPoint(r,l)}computeBBox(){const r=super.computeBBox();return r&&this.toParent(r)}computeBBoxWithoutTransforms(){return super.computeBBox()}pickNode(r,l,c=!1){return c||({x:r,y:l}=this.fromParentPoint(r,l)),super.pickNode(r,l)}render(r){this.computeTransformMatrix();const{ctx:l}=r,c=this[a];let h=!1;c.identity||(l.save(),h=!0,c.toContext(l)),super.render(r),h&&l.restore()}toSVG(){this.computeTransformMatrix();const r=super.toSVG(),l=this[a];if(l.identity||r==null)return r;const c=document.createElementNS("http://www.w3.org/2000/svg","g");c.append(...r.elements);const[h,u,d,p,g,f]=l.e;return c.setAttribute("transform",`matrix(${h} ${u} ${d} ${p} ${g} ${f})`),{elements:[c],defs:r.defs}}}return e=P0,i=a,n[e]=!0,n}function Rc(t){var e;const i=t,s=Symbol("matrix_rotation");class a extends R0(i){constructor(){super(...arguments),this[e]=new Pa,this.rotationCenterX=null,this.rotationCenterY=null,this.rotation=0}updateMatrix(o){super.updateMatrix(o);const{rotation:r,rotationCenterX:l,rotationCenterY:c}=this;r!==0&&(Pa.updateTransformMatrix(this[s],1,1,r,0,0,{rotationCenterX:l,rotationCenterY:c}),o.multiplySelf(this[s]))}}return e=s,M([ht({type:"transform"})],a.prototype,"rotationCenterX",2),M([ht({type:"transform"})],a.prototype,"rotationCenterY",2),M([ht({type:"transform"})],a.prototype,"rotation",2),a}function _0(t){var e;const i=t,s=Symbol("matrix_scale");class a extends R0(i){constructor(){super(...arguments),this[e]=new Pa,this.scalingX=1,this.scalingY=1,this.scalingCenterX=null,this.scalingCenterY=null}updateMatrix(o){super.updateMatrix(o);const{scalingX:r,scalingY:l,scalingCenterX:c,scalingCenterY:h}=this;r===1&&l===1||(Pa.updateTransformMatrix(this[s],r,l,0,0,0,{scalingCenterX:c,scalingCenterY:h}),o.multiplySelf(this[s]))}}return e=s,M([ht({type:"transform"})],a.prototype,"scalingX",2),M([ht({type:"transform"})],a.prototype,"scalingY",2),M([ht({type:"transform"})],a.prototype,"scalingCenterX",2),M([ht({type:"transform"})],a.prototype,"scalingCenterY",2),a}function _c(t){var e;const i=t,s=Symbol("matrix_translation");class a extends R0(i){constructor(){super(...arguments),this[e]=new Pa,this.translationX=0,this.translationY=0}updateMatrix(o){super.updateMatrix(o);const{translationX:r,translationY:l}=this;r===0&&l===0||(Pa.updateTransformMatrix(this[s],1,1,0,r,l),o.multiplySelf(this[s]))}}return e=s,M([ht({type:"transform"})],a.prototype,"translationX",2),M([ht({type:"transform"})],a.prototype,"translationY",2),a}var P0,Ae,Ki=A({"packages/ag-charts-community/src/scene/transformable.ts"(){"use strict";GO(),ae(),P0=Symbol("isMatrixTransform"),Ae=class{static fromCanvas(t,e){const i=[];for(const s of t.traverseUp())ll(s)&&i.unshift(s);for(const s of i)e=s.fromParent(e);return ll(t)&&(e=t.fromParent(e)),e}static toCanvas(t,e){e==null?e=t.getBBox():ll(t)&&(e=t.toParent(e));for(const i of t.traverseUp())ll(i)&&(e=i.toParent(e));return e}static fromCanvasPoint(t,e,i){const s=[];for(const a of t.traverseUp())ll(a)&&s.unshift(a);for(const a of s)({x:e,y:i}=a.fromParentPoint(e,i));return ll(t)&&({x:e,y:i}=t.fromParentPoint(e,i)),{x:e,y:i}}static toCanvasPoint(t,e,i){ll(t)&&({x:e,y:i}=t.toParentPoint(e,i));for(const s of t.traverseUp())ll(s)&&({x:e,y:i}=s.toParentPoint(e,i));return{x:e,y:i}}}}});function UO(t,e){if(typeof t=="number"&&typeof e=="number")return gm(t,e);const i=typeof t=="number"?[t]:t,s=typeof e=="number"?[e]:e,a=Math.min(i.length,s.length);for(let n=0;n<a;n+=1){const o=gm(i[n],s[n]);if(o!==0)return o}return gm(i.length,s.length)}var gm,WO=A({"packages/ag-charts-community/src/scene/zIndex.ts"(){"use strict";gm=(t,e)=>Math.sign(t-e)}}),fm,mt,HO,YO,Xi,Au,me=A({"packages/ag-charts-community/src/scene/group.ts"(){"use strict";j5(),It(),kt(),ae(),Ki(),WO(),fm=class DM extends Yo{constructor(e){super(e),this.opacity=1,this.layer=void 0,this.renderToOffscreenCanvas=!1,this.isContainerNode=!0,this.renderToOffscreenCanvas=e?.renderToOffscreenCanvas===!0}static is(e){return e instanceof DM}static computeChildrenBBox(e,i=!0){return lt.merge(Yo.extractBBoxes(e,i))}static compareChildren(e,i){return UO(e.zIndex,i.zIndex)||F5(e.serialNumber,i.serialNumber)}containsPoint(e,i){return!0}computeBBox(){return DM.computeChildrenBBox(this.children())}isDirty(e){const{resized:i}=e,{dirty:s,dirtyZIndex:a}=this;if(s||a||i)return!0;for(const n of this.children())if(n.dirty)return!0;return!1}preRender(){const e=super.preRender(0);return e.groups+=1,e.nonGroups-=1,this.renderToOffscreenCanvas&&e.nonGroups>0&&this.getVisibility()?this.layer??(this.layer=this._layerManager?.addLayer({name:this.name})):this.layer!=null&&(this._layerManager?.removeLayer(this.layer),this.layer=void 0),e}render(e){const{layer:i}=this,s={...e};if(i==null){this.renderInContext(s),super.render(s);return}const{ctx:a,stats:n}=e;if(this.isDirty(e)){const o=a.getTransform(),{globalAlpha:r}=a,l=i.context;s.ctx=l,i.clear(),l.save(),l.setTransform(o),l.globalAlpha=r,this.renderInContext(s),l.restore(),l.verifyDepthZero?.(),n&&n.layersRendered++}else this.skipRender(s),n&&n.layersSkipped++;a.save(),a.resetTransform(),i.drawImage(a),a.restore(),super.render(s)}skipRender(e){const{stats:i}=e;for(const s of this.children())s.markClean(),i&&(i.nodesSkipped+=this.childNodeCounts.groups+this.childNodeCounts.nonGroups,i.opsSkipped+=this.childNodeCounts.complexity)}applyClip(e,i){const{x:s,y:a,width:n,height:o}=i;e.beginPath(),e.rect(s,a,n,o),e.clip()}renderInContext(e){const{ctx:i,stats:s}=e;this.dirtyZIndex&&this.sortChildren(DM.compareChildren),i.save(),i.globalAlpha*=this.opacity,this.clipRect!=null&&(this.applyClip(i,this.clipRect),e.clipBBox=Ae.toCanvas(this,this.clipRect));for(const a of this.children()){if(!a.visible){a.markClean(),s&&(s.nodesSkipped+=a.childNodeCounts.nonGroups+a.childNodeCounts.groups,s.opsSkipped+=a.childNodeCounts.complexity);continue}i.save(),a.render(e),i.restore()}i.restore()}setClipRect(e){this.clipRect=e?Ae.fromCanvas(this,e):void 0}setClipRectCanvasSpace(e){this.clipRect=e}_setLayerManager(e){this.layer&&(this._layerManager?.removeLayer(this.layer),this.layer=void 0),super._setLayerManager(e)}getVisibility(){for(const e of this.traverseUp(!0))if(!e.visible)return!1;return!0}toSVG(){if(!this.visible)return;const e=[],i=[];for(const s of this.children()){const a=s.toSVG();a!=null&&(i.push(...a.elements),a.defs!=null&&e.push(...a.defs))}return{elements:i,defs:e}}},fm.className="Group",M([ht({convertor:t=>At(0,t,1)})],fm.prototype,"opacity",2),mt=fm,HO=class extends _0(mt){},YO=class extends Rc(mt){},Xi=class extends _c(mt){},Au=class extends Rc(_c(mt)){}}});function hi(t){return t?dn.document?.[t]:dn.document}function he(t){return t?dn.window?.[t]:dn.window}function Wt(t,e,i){const s=hi().createElement(t);if(typeof e=="object"&&(i=e,e=void 0),e)for(const a of e.split(" "))s.classList.add(a);return i&&Object.assign(s.style,i),s}function B0(t,e){return hi().createElementNS(t,e)}function KO(t,e){const{body:i}=hi(),s=Wt("a",{display:"none"});s.href=t,s.download=e,i.appendChild(s),s.click(),setTimeout(()=>i.removeChild(s))}function XO(t){dn.document=t}function ZO(t){dn.window=t}function Pp(t,e){t&&(e=cp.normalize(e),e.width==null?t.style.removeProperty("width"):t.style.width=`${e.width}px`,e.height==null?t.style.removeProperty("height"):t.style.height=`${e.height}px`,e.x==null?t.style.removeProperty("left"):t.style.left=`${e.x}px`,e.y==null?t.style.removeProperty("top"):t.style.top=`${e.y}px`)}function $O(t){const e=parseFloat(t.style.width)||t.offsetWidth,i=parseFloat(t.style.height)||t.offsetHeight,s=parseFloat(t.style.left)||t.offsetLeft,a=parseFloat(t.style.top)||t.offsetTop;return{x:s,y:a,width:e,height:i}}function G5(t){if(t.focus({preventScroll:!0}),t.lastChild?.textContent==null)return;const e=hi().createRange();e.setStart(t.lastChild,t.lastChild.textContent.length),e.setEnd(t.lastChild,t.lastChild.textContent.length);const i=he().getSelection();i?.removeAllRanges(),i?.addRange(e)}function V5(t){return`${t??"ag-charts-element"}-${qO++}`}function QO(){const t=he().navigator;if("scheduling"in t){const e=t.scheduling;if("isInputPending"in e)return e.isInputPending({includeContinuous:!0})}return!1}function ym(t){return`ag-charts-icon ag-charts-icon-${t}`}var dn,qO,Nt=A({"packages/ag-charts-community/src/util/dom.ts"(){"use strict";zy(),dn={},typeof window<"u"?dn.window=window:typeof global<"u"&&(dn.window=global.window),typeof document<"u"?dn.document=document:typeof global<"u"&&(dn.document=global.document),qO=0}}),JO,z0,tE,te,He=A({"packages/ag-charts-community/src/util/debug.ts"(){"use strict";Ue(),Nt(),St(),JO=2e3,z0=Date.now(),tE=()=>{const t=Date.now()-z0;if(t>JO){const e=(Math.floor(t/100)/10).toFixed(1);st.log(`**** ${e}s since last log message ****`)}z0=Date.now()},te={create(...t){return Object.assign((...i)=>{te.check(...t)&&(typeof i[0]=="function"&&(i=vp(i[0]())),tE(),st.log(...i))},{check:()=>te.check(...t)})},check(...t){return t.length===0&&t.push(!0),vp(he("agChartsDebug")).some(i=>t.includes(i))}}}}),Te,Qo=A({"packages/ag-charts-community/src/scene/selection.ts"(){"use strict";He(),ae(),Te=class nu{constructor(e,i,s=!0){this.parentNode=e,this.autoCleanup=s,this.garbageBin=new Set,this._nodesMap=new Map,this._nodes=[],this.data=[],this.debug=te.create(!0,"scene","scene:selections"),this.nodeFactory=Object.prototype.isPrototypeOf.call(Yo,i)?()=>new i:i}static select(e,i,s=!0){return new nu(e,i,s)}static selectAll(e,i){const s=[],a=n=>{i(n)&&s.push(n);for(const o of n.children())a(o)};return a(e),s}static selectByClass(e,...i){return nu.selectAll(e,s=>i.some(a=>s instanceof a))}static selectByTag(e,i){return nu.selectAll(e,s=>s.tag===i)}createNode(e,i,s){const a=this.nodeFactory(e);return a.datum=e,i?.(a),s==null?this._nodes.push(a):this._nodes.splice(s,0,a),this.parentNode.appendChild(a),a}update(e,i,s){if(this.garbageBin.size>0&&this.debug("Selection - update() called with pending garbage",e),s){const a=new Map(e.map((n,o)=>[s(n),[n,o]]));for(const[n,o]of this._nodesMap.entries())if(a.has(o)){const[r]=a.get(o);n.datum=r,this.garbageBin.delete(n),a.delete(o)}else this.garbageBin.add(n);for(const[n,[o,r]]of a.entries())this._nodesMap.set(this.createNode(o,i,r),n)}else{const a=Math.max(e.length,this.data.length);for(let n=0;n<a;n++)n>=e.length?this.garbageBin.add(this._nodes[n]):n>=this._nodes.length?this.createNode(e[n],i):(this._nodes[n].datum=e[n],this.garbageBin.delete(this._nodes[n]))}return this.data=e.slice(),this.autoCleanup&&this.cleanup(),this}cleanup(){return this.garbageBin.size===0?this:(this._nodes=this._nodes.filter(e=>this.garbageBin.has(e)?(this._nodesMap.delete(e),this.garbageBin.delete(e),e.destroy(),!1):!0),this)}clear(){return this.update([]),this}isGarbage(e){return this.garbageBin.has(e)}hasGarbage(){return this.garbageBin.size>0}each(e){for(const i of this._nodes.entries())e(i[1],i[1].datum,i[0]);return this}*[Symbol.iterator](){for(let e=0;e<this._nodes.length;e++){const i=this._nodes[e];yield{node:i,datum:i.datum,index:e}}}select(e){return nu.selectAll(this.parentNode,e)}selectByClass(e){return nu.selectByClass(this.parentNode,e)}selectByTag(e){return nu.selectByTag(this.parentNode,e)}nodes(){return this._nodes}at(e){return this._nodes.at(e)}get length(){return this._nodes.length}}}});function Ht(t){return t%=Li,t+=Li,t%=Li,t}function eE(t){return t%=Li,t+=Li,t!==Li&&(t%=Li),t}function Bp(t){return t%=Li,t<-Math.PI?t+=Li:t>=Math.PI&&(t-=Li),t}function Ba(t,e,i){const s=Ht(t),a=Ht(e),n=Ht(i);return a<n?a<=s&&s<=n:a>n?a<=s||s<=n:!0}function Zi(t){return t/180*Math.PI}function U5(t){return t/Math.PI*180}function W5(t,e,i){i&&([t,e]=[e,t]);const s=Ht(t);return(Ht(e)+Li-s)%Li}function zp(t,e){return t=Ht(t),e=Ht(e),e-t+(t>e?Li:0)}function H5(t,e,i,s){const a=t+i*Math.cos(s),n=e+i*Math.sin(s);return{x:a,y:n}}function iE(t,e){return zp(t,e)<aE?e:Ht(t-e)+e}function Y5(t,e,i=0){const a=Math.abs(e-t)>=Li?Li:Ht(e-t);return t=iE(t,i),e=t+a,{startAngle:t,endAngle:e}}function sE(t){const e=Ht(t);return e<=Iu?e/Iu:e<=Math.PI?(Math.PI-e)/Iu:e<=1.5*Math.PI?(e-Math.PI)/Iu:(Li-e)/Iu}var Li,Iu,aE,Ti=A({"packages/ag-charts-community/src/util/angle.ts"(){"use strict";Li=Math.PI*2,Iu=Math.PI/2,aE=1e-6}});function Fp(t,e,i,s){const a=t-i,n=e-s;return a*a+n*n}function jp(t,e,i,s,a,n,o){if(i===a&&s===n)return Math.min(o,Fp(t,e,i,s));const r=a-i,l=n-s,c=Math.max(0,Math.min(1,((t-i)*r+(e-s)*l)/(r*r+l*l))),h=i+c*r,u=s+c*l;return Math.min(o,Fp(t,e,h,u))}function K5(t,e,i,s,a,n,o,r,l){r&&([o,n]=[n,o]);const c=Math.atan2(e-s,t-i);if(!Ba(c,n,o)){const u=i+Math.cos(n)*a,d=s+Math.sin(n)*a,p=i+Math.cos(n)*a,g=s+Math.sin(n)*a;return Math.min(l,Fp(t,e,u,d),Fp(t,e,p,g))}const h=a-Math.sqrt(Fp(t,e,i,s));return Math.min(l,h*h)}var F0=A({"packages/ag-charts-community/src/util/distance.ts"(){"use strict";Ti()}}),j0,mm,G0,nE,cl,Gp=A({"packages/ag-charts-community/src/scale/colorScale.ts"(){"use strict";yp(),St(),It(),pu(),j0=t=>{const e=Ra.fromString(t),[i,s,a]=Ra.RGBtoOKLCH(e.r,e.g,e.b);return{l:i,c:s,h:a,a:e.a}},mm=1e-6,G0=t=>t.c<mm||t.l<mm||t.l>1-mm,nE=(t,e,i)=>{i=At(0,i,1);let s;if(G0(t))s=e.h;else if(G0(e))s=t.h;else{const r=t.h;let l=e.h;const c=e.h-t.h;c>180?l-=360:c<-180&&(l+=360),s=r*(1-i)+l*i}const a=t.c*(1-i)+e.c*i,n=t.l*(1-i)+e.l*i,o=t.a*(1-i)+e.a*i;return Ra.fromOKLCH(n,a,s,o)},cl=class{constructor(){this.type="color",this.invalid=!0,this.domain=[0,1],this.range=["red","blue"],this.parsedRange=this.range.map(j0)}update(){const{domain:t,range:e}=this;t.length<2&&(st.warnOnce("`colorDomain` should have at least 2 values."),t.length===0?t.push(0,1):t.length===1&&t.push(t[0]+1));for(let i=1;i<t.length;i++){const s=t[i-1],a=t[i];if(s>=a){st.warnOnce("`colorDomain` values should be supplied in ascending order."),t.sort((n,o)=>n-o);break}}if(e.length<t.length)for(let i=e.length;i<t.length;i++)e.push(e.length>0?e[0]:"black");this.parsedRange=this.range.map(j0)}convert(t){this.refresh();const{domain:e,range:i,parsedRange:s}=this,a=e[0],n=e.at(-1),o=i[0],r=i[i.length-1];if(t<=a)return o;if(t>=n)return r;let l,c;if(e.length===2){const d=(t-a)/(n-a),p=1/(i.length-1);l=i.length<=2?0:Math.min(Math.floor(d*(i.length-1)),i.length-2),c=(d-l*p)/p}else{for(l=0;l<e.length-2&&!(t<e[l+1]);l++);const d=e[l],p=e[l+1];c=(t-d)/(p-d)}const h=s[l],u=s[l+1];return nE(h,u,c).toRgbaString()}refresh(){this.invalid&&(this.invalid=!1,this.update(),this.invalid&&st.warnOnce("Expected update to not invalidate scale"))}},M([ci],cl.prototype,"domain",2),M([ci],cl.prototype,"range",2)}}),Vp,xm=A({"packages/ag-charts-community/src/scene/gradient/gradient.ts"(){"use strict";Gp(),Vp=class{constructor(t,e=[],i){this.colorSpace=t,this.stops=e,this.bbox=i,this._cache=void 0}createGradient(t,e){const i=this.bbox??e;if(this._cache!=null&&this._cache.ctx===t&&this._cache.bbox.equals(i))return this._cache.gradient;const{stops:s,colorSpace:a}=this;if(s.length===0)return;if(s.length===1)return s[0].color;let n=this.createCanvasGradient(t,i);if(n==null)return;const o=a==="oklch",r=.05;let l=s[0];n.addColorStop(l.offset,l.color);for(let c=1;c<s.length;c+=1){const h=s[c];if(o){const u=new cl;u.domain=[l.offset,h.offset],u.range=[l.color,h.color];for(let d=l.offset+r;d<h.offset;d+=r)n.addColorStop(d,u.convert(d))}n.addColorStop(h.offset,h.color),l=h}return"createPattern"in n&&(n=n.createPattern()),this._cache={ctx:t,bbox:i,gradient:n},n}}}}),V0,oE=A({"packages/ag-charts-community/src/scene/gradient/linearGradient.ts"(){"use strict";Ti(),xm(),V0=class extends Vp{constructor(t,e,i=0,s){super(t,e,s),this.angle=i}createCanvasGradient(t,e){const{angle:s}=this,a=Ht(Zi(s+90)),n=Math.cos(a),o=Math.sin(a),r=e.width,l=e.height,c=e.x+r*.5,h=e.y+l*.5,u=Math.sqrt(l*l+r*r)/2,d=Math.atan2(l,r);let p;a<Math.PI/2?p=a:a<Math.PI?p=Math.PI-a:a<1.5*Math.PI?p=a-Math.PI:p=2*Math.PI-a;const g=u*Math.abs(Math.cos(p-d));return t.createLinearGradient(c+n*g,h+o*g,c-n*g,h-o*g)}}}}),rE,bs,la,hl=A({"packages/ag-charts-community/src/scene/shape/shape.ts"(){"use strict";It(),xm(),oE(),ae(),rE=/^linear-gradient\((-?[\d.]+)deg,(.*?)\)$/i,bs=class Ho extends Yo{constructor(){super(...arguments),this.fillOpacity=1,this.strokeOpacity=1,this.fill=Ho.defaultStyles.fill,this.stroke=Ho.defaultStyles.stroke,this.strokeWidth=Ho.defaultStyles.strokeWidth,this.lineDash=Ho.defaultStyles.lineDash,this.lineDashOffset=Ho.defaultStyles.lineDashOffset,this.lineCap=Ho.defaultStyles.lineCap,this.lineJoin=Ho.defaultStyles.lineJoin,this.miterLimit=void 0,this.opacity=Ho.defaultStyles.opacity,this.fillShadow=Ho.defaultStyles.fillShadow}restoreOwnStyles(){const{defaultStyles:e}=this.constructor;Object.assign(this,e)}getGradient(e){let i;if(e instanceof Vp)return e;if(e?.startsWith("linear-gradient")&&(i=rE.exec(e))){const s=parseFloat(i[1]),a=[],n=i[2],o=/(#[0-9a-f]+)|(rgba?\(.+?\))|([a-z]+)/gi;let r;for(;r=o.exec(n);)a.push(r[0]);return new V0("rgb",a.map((l,c)=>({color:l,offset:c/(a.length-1)})),s)}else return}onFillChange(){this.fillGradient=this.getGradient(this.fill)}onStrokeChange(){this.strokeGradient=this.getGradient(this.stroke)}align(e,i){const s=this.layerManager?.canvas?.pixelRatio??1,a=Math.round(e*s)/s;return i==null?a:i===0?0:i<1?Math.ceil(i*s)/s:Math.round((i+e)*s)/s-a}fillStroke(e,i){this.renderFill(e,i),this.renderStroke(e,i)}renderFill(e,i){if(this.fill){const{globalAlpha:s}=e;this.applyFill(e),this.applyFillAlpha(e),this.applyShadow(e),this.executeFill(e,i),e.globalAlpha=s}e.shadowColor="rgba(0, 0, 0, 0)"}executeFill(e,i){i?e.fill(i):e.fill()}applyFill(e){e.fillStyle=this.fillGradient?.createGradient(e,this.getBBox())??(typeof this.fill=="string"?this.fill:void 0)??"black"}applyStroke(e){e.strokeStyle=this.strokeGradient?.createGradient(e,this.getBBox())??(typeof this.stroke=="string"?this.stroke:void 0)??"black"}applyFillAlpha(e){e.globalAlpha*=this.opacity*this.fillOpacity}applyShadow(e){const i=this.layerManager?.canvas.pixelRatio??1,s=this.fillShadow;s?.enabled&&(e.shadowColor=s.color,e.shadowOffsetX=s.xOffset*i,e.shadowOffsetY=s.yOffset*i,e.shadowBlur=s.blur*i)}renderStroke(e,i){if(this.stroke&&this.strokeWidth){const{globalAlpha:s}=e;this.applyStroke(e),e.globalAlpha*=this.opacity*this.strokeOpacity,e.lineWidth=this.strokeWidth,this.lineDash&&e.setLineDash(this.lineDash),this.lineDashOffset&&(e.lineDashOffset=this.lineDashOffset),this.lineCap&&(e.lineCap=this.lineCap),this.lineJoin&&(e.lineJoin=this.lineJoin),this.miterLimit!=null&&(e.miterLimit=this.miterLimit),this.executeStroke(e,i),e.globalAlpha=s}}executeStroke(e,i){i?e.stroke(i):e.stroke()}containsPoint(e,i){return this.isPointInPath(e,i)}applySvgFillAttributes(e){e.setAttribute("fill",typeof this.fill=="string"?this.fill:"none"),e.setAttribute("fill-opacity",String(this.fillOpacity))}applySvgStrokeAttributes(e){this.stroke!=null&&(e.setAttribute("stroke",typeof this.stroke=="string"?this.stroke:"none"),e.setAttribute("stroke-opacity",String(this.strokeOpacity)),e.setAttribute("stroke-width",String(this.strokeWidth))),this.lineDash!=null&&e.setAttribute("stroke-dasharray",this.lineDash.join(" "))}},bs.defaultStyles={fill:"black",stroke:void 0,strokeWidth:0,lineDash:void 0,lineDashOffset:0,lineCap:void 0,lineJoin:void 0,opacity:1,fillShadow:void 0},M([ht()],bs.prototype,"fillOpacity",2),M([ht()],bs.prototype,"strokeOpacity",2),M([ht({changeCb:t=>t.onFillChange()})],bs.prototype,"fill",2),M([ht({changeCb:t=>t.onStrokeChange()})],bs.prototype,"stroke",2),M([ht()],bs.prototype,"strokeWidth",2),M([ht()],bs.prototype,"lineDash",2),M([ht()],bs.prototype,"lineDashOffset",2),M([ht()],bs.prototype,"lineCap",2),M([ht()],bs.prototype,"lineJoin",2),M([ht()],bs.prototype,"miterLimit",2),M([ht({convertor:t=>At(0,t,1)})],bs.prototype,"opacity",2),M([ht({checkDirtyOnAssignment:!0})],bs.prototype,"fillShadow",2),la=bs}}),Bs,Pc=A({"packages/ag-charts-community/src/scene/shape/line.ts"(){"use strict";F0(),kt(),ae(),hl(),Bs=class extends la{constructor(t={}){super(t),this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.restoreOwnStyles()}set x(t){this.x1=t,this.x2=t}set y(t){this.y1=t,this.y2=t}get midPoint(){return{x:(this.x1+this.x2)/2,y:(this.y1+this.y2)/2}}computeBBox(){return new lt(Math.min(this.x1,this.x2),Math.min(this.y1,this.y2),Math.abs(this.x2-this.x1),Math.abs(this.y2-this.y1))}isPointInPath(t,e){return this.x1===this.x2||this.y1===this.y2?this.getBBox().clone().grow(this.strokeWidth/2).containsPoint(t,e):!1}distanceSquared(t,e){const{x1:i,y1:s,x2:a,y2:n}=this;return jp(t,e,i,s,a,n,1/0)}render(t){const{ctx:e,devicePixelRatio:i}=t;let{x1:s,y1:a,x2:n,y2:o}=this;if(s===n){const{strokeWidth:r}=this,l=Math.round(s*i)/i+Math.trunc(r*i)%2/(i*2);s=l,n=l}else if(a===o){const{strokeWidth:r}=this,l=Math.round(a*i)/i+Math.trunc(r*i)%2/(i*2);a=l,o=l}e.beginPath(),e.moveTo(s,a),e.lineTo(n,o),this.fillStroke(e),this.fillShadow?.markClean(),super.render(t)}toSVG(){if(!this.visible)return;const t=document.createElementNS("http://www.w3.org/2000/svg","line");return t.setAttribute("x1",String(this.x1)),t.setAttribute("y1",String(this.y1)),t.setAttribute("x2",String(this.x2)),t.setAttribute("y2",String(this.y2)),this.applySvgStrokeAttributes(t),{elements:[t]}}},Bs.className="Line",Bs.defaultStyles={...la.defaultStyles,fill:void 0,strokeWidth:1},M([ht()],Bs.prototype,"x1",2),M([ht()],Bs.prototype,"y1",2),M([ht()],Bs.prototype,"x2",2),M([ht()],Bs.prototype,"y2",2)}});function X5(t=0,e=0){return new OffscreenCanvas(t,e).getContext("2d")}var Z5=A({"packages/ag-charts-community/src/util/canvas.util.ts"(){"use strict"}}),bm,lE=A({"packages/ag-charts-community/src/util/lruCache.ts"(){"use strict";bm=class{constructor(t=5){this.maxCacheSize=t,this.store=new Map}get(t){if(!this.store.has(t))return;const e=this.store.get(t);return this.store.delete(t),this.store.set(t,e),e}has(t){return this.store.has(t)}set(t,e){if(this.store.set(t,e),this.store.size>this.maxCacheSize){const i=this.store.keys();let s=this.store.size-this.maxCacheSize;for(;s>0;){const a=i.next();a.done||this.store.delete(a.value),s--}}return e}clear(){this.store.clear()}}}}),to,U0,ue,Sm,ca=A({"packages/ag-charts-community/src/util/textMeasurer.ts"(){"use strict";Z5(),lE(),to=class{static measureText(t,e){return this.getMeasurer(e).measureText(t)}static measureLines(t,e){return this.getMeasurer(e).measureLines(t)}static getMeasurer(t){const e=typeof t.font=="string"?t.font:ue.toFontString(t.font),i=`${e}-${t.textAlign??"start"}-${t.textBaseline??"alphabetic"}`;return this.instanceMap.get(i)??this.createFontMeasurer(e,t,i)}static createFontMeasurer(t,e,i){const s=X5();s.font=t,s.textAlign=e.textAlign??"start",s.textBaseline=e.textBaseline??"alphabetic";const a=new U0(s,e);return this.instanceMap.set(i,a),a}},to.instanceMap=new bm(10),U0=class{constructor(t,e){this.ctx=t,this.measureMap=new bm(100),e.textAlign&&(t.textAlign=e.textAlign),e.textBaseline&&(t.textBaseline=e.textBaseline),t.font=typeof e.font=="string"?e.font:ue.toFontString(e.font),this.textMeasurer=new Sm(i=>this.cachedCtxMeasureText(i),e.textBaseline??"alphabetic")}textWidth(t,e){return this.textMeasurer.textWidth(t,e)}measureText(t){return this.textMeasurer.measureText(t)}measureLines(t){return this.textMeasurer.measureLines(t)}cachedCtxMeasureText(t){if(!this.measureMap.has(t)){const e=this.ctx.measureText(t);this.measureMap.set(t,{actualBoundingBoxAscent:e.actualBoundingBoxAscent,emHeightAscent:e.emHeightAscent,emHeightDescent:e.emHeightDescent,actualBoundingBoxDescent:e.actualBoundingBoxDescent,actualBoundingBoxLeft:e.actualBoundingBoxLeft,actualBoundingBoxRight:e.actualBoundingBoxRight,alphabeticBaseline:e.alphabeticBaseline,fontBoundingBoxAscent:e.fontBoundingBoxAscent,fontBoundingBoxDescent:e.fontBoundingBoxDescent,hangingBaseline:e.hangingBaseline,ideographicBaseline:e.ideographicBaseline,width:e.width})}return this.measureMap.get(t)}},ue=class{static toFontString({fontSize:t=10,fontStyle:e,fontWeight:i,fontFamily:s,lineHeight:a}){let n="";return e&&(n+=`${e} `),i&&(n+=`${i} `),n+=`${t}px`,a&&(n+=`/${a}px`),n+=` ${s}`,n.trim()}static getLineHeight(t){return Math.ceil(t*this.defaultLineHeight)}static getVerticalModifier(t){switch(t){case"hanging":case"top":return 0;case"middle":return .5;case"alphabetic":case"bottom":case"ideographic":default:return 1}}},ue.EllipsisChar="\u2026",ue.defaultLineHeight=1.15,ue.lineSplitter=/\r?\n/g,Sm=class{constructor(t,e="alphabetic"){this.measureTextFn=t,this.textBaseline=e,this.charMap=new Map}getMetrics(t){const e=this.measureTextFn(t);return e.fontBoundingBoxAscent??(e.fontBoundingBoxAscent=e.emHeightAscent),e.fontBoundingBoxDescent??(e.fontBoundingBoxDescent=e.emHeightDescent),{width:e.width,height:e.actualBoundingBoxAscent+e.actualBoundingBoxDescent,lineHeight:e.fontBoundingBoxAscent+e.fontBoundingBoxDescent,offsetTop:e.actualBoundingBoxAscent,offsetLeft:e.actualBoundingBoxLeft}}getMultilineMetrics(t){let e=0,i=0,s=0,a=0,n=0;const o=ue.getVerticalModifier(this.textBaseline),r=[];let l=0;const c=t.length;for(const h of t){const u=this.measureTextFn(h);u.fontBoundingBoxAscent??(u.fontBoundingBoxAscent=u.emHeightAscent),u.fontBoundingBoxDescent??(u.fontBoundingBoxDescent=u.emHeightDescent),e<u.width&&(e=u.width),a<u.actualBoundingBoxLeft&&(a=u.actualBoundingBoxLeft),l===0?(i+=u.actualBoundingBoxAscent,s+=u.actualBoundingBoxAscent):n+=u.fontBoundingBoxAscent,l===c-1?i+=u.actualBoundingBoxDescent:n+=u.fontBoundingBoxDescent,r.push({text:h,width:u.width,height:u.actualBoundingBoxAscent+u.actualBoundingBoxDescent,lineHeight:u.fontBoundingBoxAscent+u.fontBoundingBoxDescent,offsetTop:u.actualBoundingBoxAscent,offsetLeft:u.actualBoundingBoxLeft}),l++}return i+=n,s+=n*o,{width:e,height:i,offsetTop:s,offsetLeft:a,lineMetrics:r}}textWidth(t,e){if(e){let i=0;for(let s=0;s<t.length;s++)i+=this.textWidth(t.charAt(s));return i}return t.length>1?this.measureTextFn(t).width:this.charMap.get(t)??this.charWidth(t)}measureText(t){return this.getMetrics(t)}measureLines(t){const e=typeof t=="string"?t.split(ue.lineSplitter):t;return this.getMultilineMetrics(e)}charWidth(t){const{width:e}=this.measureTextFn(t);return this.charMap.set(t,e),e}}}}),zs,Ye,W0,Bc,Ss=A({"packages/ag-charts-community/src/scene/shape/text.ts"(){"use strict";ca(),kt(),ae(),Ki(),hl(),zs=class AM extends la{constructor(){super(...arguments),this.x=0,this.y=0,this.lines=[],this.text=void 0,this.fontSize=10,this.fontFamily="sans-serif",this.textAlign=AM.defaultStyles.textAlign,this.textBaseline=AM.defaultStyles.textBaseline}onTextChange(){this.lines=this.text?.split(`
`).map(e=>e.trim())??[]}static computeBBox(e,i,s,a){const{offsetTop:n,offsetLeft:o,width:r,height:l}=to.measureLines(e,a);return new lt(i-o,s-n,r,l)}computeBBox(){const{x:e,y:i,lines:s,textBaseline:a,textAlign:n}=this;return AM.computeBBox(s,e,i,{font:this,textBaseline:a,textAlign:n})}isPointInPath(e,i){const s=this.getBBox();return s?s.containsPoint(e,i):!1}render(e){const{ctx:i,stats:s}=e;if(!this.lines.length||!this.layerManager)return s&&(s.nodesSkipped+=1),super.render(e);const{fill:a,stroke:n,strokeWidth:o}=this,{pixelRatio:r}=this.layerManager.canvas;if(i.font=ue.toFontString(this),i.textAlign=this.textAlign,i.textBaseline=this.textBaseline,a){this.applyFill(i),i.globalAlpha*=this.opacity*this.fillOpacity;const{fillShadow:l}=this;l?.enabled&&(i.shadowColor=l.color,i.shadowOffsetX=l.xOffset*r,i.shadowOffsetY=l.yOffset*r,i.shadowBlur=l.blur*r),this.renderLines((c,h,u)=>i.fillText(c,h,u))}if(n&&o){this.applyStroke(i),i.lineWidth=o,i.globalAlpha*=this.opacity*this.strokeOpacity;const{lineDash:l,lineDashOffset:c,lineCap:h,lineJoin:u}=this;l&&i.setLineDash(l),c&&(i.lineDashOffset=c),h&&(i.lineCap=h),u&&(i.lineJoin=u),this.renderLines((d,p,g)=>i.strokeText(d,p,g))}super.render(e)}renderLines(e){const{lines:i,x:s,y:a}=this,n=this.lineHeight??ue.getLineHeight(this.fontSize);let o=(n-n*i.length)*ue.getVerticalModifier(this.textBaseline);for(const r of i)e(r,s,a+o),o+=n}setFont(e){this.fontFamily=e.fontFamily,this.fontSize=e.fontSize,this.fontStyle=e.fontStyle,this.fontWeight=e.fontWeight}setAlign(e){this.textAlign=e.textAlign,this.textBaseline=e.textBaseline}toSVG(){if(!this.visible||!this.text)return;const e=document.createElementNS("http://www.w3.org/2000/svg","text");return this.applySvgFillAttributes(e),e.setAttribute("font-family",this.fontFamily?.split(",")[0]??""),e.setAttribute("font-size",String(this.fontSize)),e.setAttribute("font-style",this.fontStyle??""),e.setAttribute("font-weight",String(this.fontWeight??"")),e.setAttribute("text-anchor",{center:"middle",left:"start",right:"end",start:"start",end:"end"}[this.textAlign??"start"]),e.setAttribute("alignment-baseline",{alphabetic:"alphabetic",top:"top",bottom:"bottom",hanging:"hanging",middle:"middle",ideographic:"ideographic"}[this.textBaseline??"alphabetic"]),e.setAttribute("x",String(this.x)),e.setAttribute("y",String(this.y)),e.textContent=this.text??"",{elements:[e]}}},zs.className="Text",zs.defaultStyles={...la.defaultStyles,textAlign:"start",fontStyle:void 0,fontWeight:void 0,fontSize:10,fontFamily:"sans-serif",textBaseline:"alphabetic"},M([ht()],zs.prototype,"x",2),M([ht()],zs.prototype,"y",2),M([ht({changeCb:t=>t.onTextChange()})],zs.prototype,"text",2),M([ht()],zs.prototype,"fontStyle",2),M([ht()],zs.prototype,"fontWeight",2),M([ht()],zs.prototype,"fontSize",2),M([ht()],zs.prototype,"fontFamily",2),M([ht()],zs.prototype,"textAlign",2),M([ht()],zs.prototype,"textBaseline",2),M([ht()],zs.prototype,"lineHeight",2),Ye=zs,W0=class extends Rc(Ye){},Bc=class extends Rc(_c(Ye)){}}});function $5(t,e,i,s,a,n){if(t.size===0)return!1;let o=t.x,r=t.y;e!=null&&(o-=(e.x-.5)*t.size,r-=(e.y-.5)*t.size);let l=o;o<i?l=i:o>i+a&&(l=i+a);let c=r;r<s?c=s:r>s+n&&(c=s+n);const h=o-l,u=r-c;return Math.sqrt(h*h+u*u)<=t.size*.5}function cE(t,e,i,s,a){const n=t.x+t.width>e&&t.x<e+s,o=t.y+t.height>i&&t.y<i+a;return n&&o}function Q5(t,e,i,s,a){return e+s<t.x+t.width&&e>t.x&&i>t.y&&i+a<t.y+t.height}function q5(t){return t!=null&&typeof t.point=="object"&&typeof t.label=="object"}function J5(t,e,i=5){const s=new Map,a=[],n=new Map([...t.entries()].map(([r,l])=>[r,l.toSorted((c,h)=>h.point.size-c.point.size)])),o=[...n.values()].flat();for(const[r,l]of n.entries()){const c=[];if(l[0]?.label){for(let h=0,u=l.length;h<u;h++){const d=l[h],{point:p,label:g,marker:f}=d,{text:x,width:m,height:b}=g,v=p.size*.5;let S=0,D=0;if(v>0&&d.placement!=null){const R=hE[d.placement];S=(m*.5+v+i)*R.x,D=(b*.5+v+i)*R.y}const k=p.x-m*.5+S-((f?.center.x??.5)-.5)*p.size,L=p.y-b*.5+D-((f?.center.y??.5)-.5)*p.size;if(!(!e||Q5(e,k,L,m,b))||o.some(R=>$5(R.point,R.marker?.center,k,L,m,b))||a.some(R=>cE(R,k,L,m,b)))continue;const O={index:h,text:x,x:k,y:L,width:m,height:b,datum:d};c.push(O),a.push(O)}s.set(r,c)}}return s}function tK(t,e=0){const i=[];for(let s=0;s<t.length;s++){const a=t[s],{point:{x:n,y:o},label:{text:r}}=a;let{width:l,height:c}=a.label;if(l+=e,c+=e,i.some(h=>cE(h,n,o,l,c)))return!0;i.push({index:s,text:r,x:n,y:o,width:l,height:c,datum:a})}return!1}var hE,uE=A({"packages/ag-charts-community/src/scene/util/labelPlacement.ts"(){"use strict";hE={top:{x:0,y:-1},bottom:{x:0,y:1},left:{x:-1,y:0},right:{x:1,y:0},"top-left":{x:-1,y:-1},"top-right":{x:1,y:-1},"bottom-left":{x:-1,y:1},"bottom-right":{x:1,y:1}}}});function eK(t,e){const i=Math.max(t.length,e.length),s=new Set,a=new Set;for(let n=0;n<i;n++){const o=t[n],r=e[n];o!==r&&(a.has(r)?a.delete(r):r&&s.add(r),s.has(o)?s.delete(o):o&&a.add(o))}return{changed:s.size>0||a.size>0,added:s,removed:a}}var iK=A({"packages/ag-charts-community/src/util/diff.util.ts"(){"use strict"}});function Up(t,e=2){return typeof t=="number"?pE(t,e):String(t??"")}function dE(t){return fE.format(t)}function pE(t,e){return e===2?gE.format(t):new Intl.NumberFormat("en-US",{maximumFractionDigits:e,useGrouping:!1}).format(t)}var gE,fE,Wp=A({"packages/ag-charts-community/src/util/format.util.ts"(){"use strict";gE=new Intl.NumberFormat("en-US",{maximumFractionDigits:2,useGrouping:!1}),fE=new Intl.NumberFormat("en-US",{style:"percent"})}});function eo(t,e,i){if(ce(e)){if(!ce(t)||t.length!==e.length||e.some((s,a)=>eo(t[a],s)!=null))return e}else if(xs(e)){if(!xs(t))return e;const s={},a=new Set([...Object.keys(t),...Object.keys(e)]);for(const n of a)if(!(t[n]===e[n]||i?.includes(n)))if(typeof t[n]==typeof e[n]){const o=eo(t[n],e[n]);o!==null&&(s[n]=o)}else s[n]=e[n];return Object.keys(s).length?s:null}else if(t!==e)return e;return null}function yE(t,e){for(const i of Object.keys(t))if(t[i]!==e?.[i])return!1;return!0}function $i(t,e){return ce(t)?t.map(i=>$i(i,e)):xs(t)?sK(t,e):t instanceof Map?new Map($i(Array.from(t))):H0(t)}function sK(t,e){const i={};for(const s of Object.keys(t))i[s]=e?.has(s)?H0(t[s]):$i(t[s],e);return i}function H0(t){return ce(t)?t.slice(0):xs(t)?{...t}:xp(t)?new Date(t):U2(t)?new RegExp(t.source,t.flags):t}function ul(t,e,i,s,a){if(ce(t)){e(t,s,a);let n=0;for(const o of t)ul(o,e,i,s?.[n],a),n++}else if(xs(t)){e(t,s,a);for(const n of Object.keys(t)){if(i?.has(n))continue;const o=t[n];ul(o,e,i,s?.[n],a)}}}function Hp(t,e,i={}){const{path:s,matcherPath:a=s?.replace(/(\[[0-9+]+])/i,"[]"),skip:n=[]}=i;if(t==null)throw new Error(`AG Charts - target is uninitialised: ${s??"<root>"}`);if(e==null)return t;if(Zn(t))return t.set(e);const o=t,r=Y0(t);for(const l of Object.keys(e)){if(Xy.has(l))continue;const c=`${a?a+".":""}${l}`;if(n.includes(c))continue;const h=e[l],u=`${s?s+".":""}${l}`,d=o.constructor,p=o[l];try{const g=Y0(p),f=Y0(h);if(r===vm&&!(l in t)){if(h===void 0)continue;st.warn(`unable to set [${u}] in ${d?.name} - property is unknown`);continue}if(g!=null&&f!=null&&f!==g&&(g!==vm||f!=="object")){st.warn(`unable to set [${u}] in ${d?.name} - can't apply type of [${f}], allowed types are: [${g}]`);continue}Zn(p)?o[l].set(h):f==="object"?(p==null&&(o[l]={}),Hp(p??o[l],h,{...i,path:u,matcherPath:c})):o[l]=h}catch(g){st.warn(`unable to set [${u}] in [${d?.name}]; nested error is: ${g.message}`)}}return t}function Y0(t){return t==null?null:W2(t)||xp(t)?"primitive":ce(t)?"array":ws(t)?xs(t)?"object":vm:el(t)?"function":"primitive"}var vm,ha=A({"packages/ag-charts-community/src/util/json.ts"(){"use strict";St(),Yt(),Jt(),Ct(),vm="class-instance"}});function Ne(t,e){const i=ce(t)?t:t.split(".");if(i.length===1){const[s]=i;return Ko((a,n,o)=>a[s]=o,a=>a[s],e)}return Ko((s,a,n)=>GM(s,i,n),s=>jM(s,i),e)}function aK(t){return Ko((e,i,s)=>e[t]=s)}function bi(t,e){return Ko((i,s,a)=>i[t][e??s]=a)}function ua(t){const{newValue:e,oldValue:i,changeValue:s}=t;return Ko((a,n,o,r)=>(o!==r&&(r!==void 0&&i?.call(a,r),o!==void 0&&e?.call(a,o),s?.call(a,o,r)),o))}function zc(t){return G2(t)}var vs=A({"packages/ag-charts-community/src/util/proxy.ts"(){"use strict";Jr(),Yt(),Ct()}});function nK(){return G2(()=>{})}function K0(t,e){const i=Sc(e);if(i.length===0)return;const s=V2(t);for(const a of i)a in s&&(e[a]=s[a])}var Mm,Dm,X0,Am,ku,mE,Yp=A({"packages/ag-charts-community/src/util/stateMachine.ts"(){"use strict";He(),Jr(),Mm="color: green",Dm="color: grey",X0=class{transitionRoot(t,e){this.parent?this.parent.transitionRoot(t,e):this.transition(t,e)}},Am=class sa extends X0{constructor(e,i,s){super(),this.defaultState=e,this.states=i,this.enterEach=s,this.debug=te.create(!0,"animation"),this.state=e,this.debug(`%c${this.constructor.name} | init -> ${e}`,Mm)}transition(e,i){if(!this.transitionChild(e,i)||this.state===sa.child||this.state===sa.parent)return;const a=this.state,n=this.states[this.state];let o=n[e];const r=`%c${this.constructor.name} | ${this.state} -> ${e} ->`;if(Array.isArray(o))o=o.find(h=>{if(!h.guard)return!0;const u=h.guard(i);return u||this.debug(`${r} (guarded)`,h.target,Dm),u});else if(typeof o=="object"&&!(o instanceof sa)&&o.guard&&!o.guard(i)){this.debug(`${r} (guarded)`,o.target,Dm);return}if(!o){this.debug(`${r} ${this.state}`,Dm);return}const l=this.getDestinationState(o),c=l===this.state?void 0:n.onExit;this.debug(`${r} ${l}`,Mm),this.state=l,typeof o=="function"?o(i):typeof o=="object"&&!(o instanceof sa)&&o.action?.(i),c?.(),this.enterEach?.(a,l),l!==a&&l!==sa.child&&l!==sa.parent&&this.states[l].onEnter?.(a,i)}transitionAsync(e,i){setTimeout(()=>{this.transition(e,i)},0)}is(e){return this.state===sa.child&&this.childState?this.childState.is(e):this.state===e}resetHierarchy(){this.debug(`%c${this.constructor.name} | ${this.state} -> [resetHierarchy] -> ${this.defaultState}`,"color: green"),this.state=this.defaultState}transitionChild(e,i){return this.state!==sa.child||!this.childState||(K0(this,this.childState),this.childState.transition(e,i),!this.childState.is(sa.parent))?!0:(this.debug(`%c${this.constructor.name} | ${this.state} -> ${e} -> ${this.defaultState}`,Mm),this.state=this.defaultState,this.states[this.state].onEnter?.(),this.childState.resetHierarchy(),!1)}getDestinationState(e){let i=this.state;return typeof e=="string"?i=e:e instanceof sa?(this.childState=e,this.childState.parent=this,i=sa.child):typeof e=="object"&&(e.target instanceof sa?(this.childState=e.target,this.childState.parent=this,i=sa.child):e.target!=null&&(i=e.target)),i}},Am.child="__child",Am.parent="__parent",ku=Am,mE=class extends X0{constructor(...t){super(),this.stateMachines=t;for(const e of t)e.parent=this}transition(t,e){for(const i of this.stateMachines)K0(this,i),i.transition(t,e)}transitionAsync(t,e){for(const i of this.stateMachines)K0(this,i),i.transitionAsync(t,e)}}}});function Z0(){const t=new Map;return e=>{const i=t.get(e);return i?(t.set(e,i+1),`${e}_${i}`):(t.set(e,1),e)}}var $0=A({"packages/ag-charts-community/src/util/tempUtils.ts"(){"use strict"}}),Im,Q0=A({"packages/ag-charts-community/src/util/textWrapper.ts"(){"use strict";ca(),Im=class{static wrapText(t,e){return this.wrapLines(t,e).join(`
`)}static wrapLines(t,e){const i=this.textWrap(t,e);return e.overflow==="hide"&&i.some(s=>s.endsWith(ue.EllipsisChar))?[]:i}static appendEllipsis(t){return t.replace(/[.,]{1,5}$/,"")+ue.EllipsisChar}static truncateLine(t,e,i,s){const a=e.textWidth(ue.EllipsisChar);let n=0,o=0;for(;o<t.length;o++){const r=e.textWidth(t.charAt(o));if(n+r>i)break;n+=r}if(t.length===o&&(!s||n+a<=i))return s?t+ue.EllipsisChar:t;for(t=t.slice(0,o).trimEnd();t.length&&e.textWidth(t)+a>i;)t=t.slice(0,-1).trimEnd();return t+ue.EllipsisChar}static textWrap(t,e){const i=t.split(ue.lineSplitter),s=to.getMeasurer(e);if(e.textWrap==="never")return i.map(r=>this.truncateLine(r.trimEnd(),s,e.maxWidth));const a=[],n=e.textWrap==="hyphenate",o=e.textWrap==null||e.textWrap==="on-space";for(const r of i){let l=r.trimEnd();if(l===""){a.push(l);continue}for(let c=0,h=0,u=0;c<l.length;c++){const d=l.charAt(c);if(h+=s.textWidth(d),d===" "&&(u=c),h>e.maxWidth){if(c===0)break;const p=s.textWidth(l.slice(0,c+1));if(p<=e.maxWidth){h=p;continue}if(u){const x=this.getWordAt(l,u+1),m=s.textWidth(x);if(m<=e.maxWidth){a.push(l.slice(0,u).trimEnd()),l=l.slice(u).trimStart(),c=-1,h=0,u=0;continue}else o&&m>e.maxWidth&&a.push(l.slice(0,u).trimEnd(),this.truncateLine(l.slice(u).trimStart(),s,e.maxWidth,!0))}else o&&a.push(this.truncateLine(l,s,e.maxWidth,!0));if(o){l="";break}const g=n?"-":"";let f=l.slice(0,c).trim();for(;f.length&&s.textWidth(f+g)>e.maxWidth;)f=f.slice(0,-1).trimEnd();if(a.push(f+g),!f.length){l="";break}l=l.slice(f.length).trimStart(),c=-1,h=0,u=0}}l&&a.push(l)}return this.avoidOrphans(a,s,e),this.clipLines(a,s,e)}static getWordAt(t,e){const i=t.indexOf(" ",e);return i===-1?t.slice(e):t.slice(e,i)}static clipLines(t,e,i){if(!i.maxHeight)return t;const{height:s,lineMetrics:a}=e.measureLines(t);if(s<=i.maxHeight)return t;for(let n=0,o=0;n<a.length;n++){const{lineHeight:r}=a[n];if(o+=r,o>i.maxHeight){if(i.overflow==="hide")return[];const l=t.slice(0,n||1),c=l.pop();return l.concat(this.truncateLine(c,e,i.maxWidth,!0))}}return t}static avoidOrphans(t,e,i){if(i.avoidOrphans===!1||t.length<2)return;const{length:s}=t,a=t[s-1],n=t[s-2];if(n.length<a.length)return;const o=n.lastIndexOf(" ");if(o===-1||o===n.indexOf(" ")||a.includes(" "))return;const r=n.slice(o+1);e.textWidth(a+r)<=i.maxWidth&&(t[s-2]=n.slice(0,o),t[s-1]=r+" "+a)}}}}),ee,dl=A({"packages/ag-charts-community/src/chart/caption.ts"(){"use strict";ae(),Ss(),Ki(),wa(),Jt(),vs(),ca(),Q0(),xt(),ee=class extends Mt{constructor(){super(...arguments),this.id=Ea(this),this.node=new W0({zIndex:1}).setProperties({textAlign:"center",pointerEvents:1}),this.enabled=!1,this.textAlign="center",this.fontSize=10,this.fontFamily="sans-serif",this.wrapping="always",this.padding=0,this.layoutStyle="block",this.truncated=!1}registerInteraction(t,e){return t.layoutManager.addListener("layout:complete",()=>this.updateA11yText(t,e))}computeTextWrap(t,e){const{text:i,padding:s,wrapping:a}=this,n=Math.min(this.maxWidth??1/0,t)-s*2,o=this.maxHeight??e-s*2;if(!isFinite(n)&&!isFinite(o)){this.node.text=i;return}const r=Im.wrapText(i??"",{maxWidth:n,maxHeight:o,font:this,textWrap:a});this.node.text=r,this.truncated=r.includes(ue.EllipsisChar)}updateA11yText(t,e){const{proxyInteractionService:i}=t;if(this.enabled&&this.text){const s=Ae.toCanvas(this.node);if(s){const{id:a}=this;this.proxyText??(this.proxyText=i.createProxyElement({type:"text",domManagerId:a,where:e})),this.proxyText.textContent=this.text,this.proxyText.setBounds(s),this.proxyText.addListener("mousemove",n=>this.handleMouseMove(t,n)),this.proxyText.addListener("mouseleave",n=>this.handleMouseLeave(t,n))}}else this.proxyText?.destroy(),this.proxyText=void 0}handleMouseMove(t,e){if(e!=null&&this.enabled&&this.node.visible&&this.truncated){const{x:i,y:s}=Ae.toCanvas(this.node),a=e.sourceEvent.offsetX+i,n=e.sourceEvent.offsetY+s,o={type:"hover",canvasX:a,canvasY:n};t.tooltipManager.updateTooltip(this.id,{canvasX:a,canvasY:n,lastPointerEvent:o,showArrow:!1},{title:this.text})}}handleMouseLeave(t,e){t.tooltipManager.removeTooltip(this.id)}},ee.SMALL_PADDING=10,ee.LARGE_PADDING=20,M([I(pt),bi("node","visible")],ee.prototype,"enabled",2),M([I(J,{optional:!0}),bi("node")],ee.prototype,"text",2),M([I(x0,{optional:!0}),bi("node")],ee.prototype,"textAlign",2),M([I(qn,{optional:!0}),bi("node")],ee.prototype,"fontStyle",2),M([I(Jn,{optional:!0}),bi("node")],ee.prototype,"fontWeight",2),M([I(nt),bi("node")],ee.prototype,"fontSize",2),M([I(J),bi("node")],ee.prototype,"fontFamily",2),M([I(jt,{optional:!0}),bi("node","fill")],ee.prototype,"color",2),M([I(nt,{optional:!0})],ee.prototype,"spacing",2),M([I(nt,{optional:!0})],ee.prototype,"maxWidth",2),M([I(nt,{optional:!0})],ee.prototype,"maxHeight",2),M([I(Ep)],ee.prototype,"wrapping",2),M([I(nt)],ee.prototype,"padding",2),M([I(J)],ee.prototype,"layoutStyle",2)}}),za,xE=A({"packages/ag-charts-community/src/scene/shape/range.ts"(){"use strict";kt(),ae(),hl(),za=class extends la{constructor(t={}){super(t),this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.startLine=!1,this.endLine=!1,this.isRange=!1,this.restoreOwnStyles()}computeBBox(){return new lt(this.x1,this.y1,this.x2-this.x1,this.y2-this.y1)}isPointInPath(t,e){return!1}render(t){const{ctx:e}=t;let{x1:i,y1:s,x2:a,y2:n}=this;i=this.align(i),s=this.align(s),a=this.align(a),n=this.align(n);const{fill:o,opacity:r,isRange:l}=this;if(!!(l&&o)){const{fillOpacity:f}=this;this.applyFill(e),e.globalAlpha=r*f,e.beginPath(),e.moveTo(i,s),e.lineTo(a,s),e.lineTo(a,n),e.lineTo(i,n),e.closePath(),e.fill()}const{stroke:h,strokeWidth:u,startLine:d,endLine:p}=this;if(!!((d||p)&&h&&u)){const{strokeOpacity:f,lineDash:x,lineDashOffset:m,lineCap:b,lineJoin:v}=this;this.applyStroke(e),e.globalAlpha=r*f,e.lineWidth=u,x&&e.setLineDash(x),m&&(e.lineDashOffset=m),b&&(e.lineCap=b),v&&(e.lineJoin=v),e.beginPath(),d&&(e.moveTo(i,s),e.lineTo(a,s)),p&&(e.moveTo(a,n),e.lineTo(i,n)),e.stroke()}this.fillShadow?.markClean(),super.render(t)}},za.className="Range",za.defaultStyles={...la.defaultStyles,strokeWidth:1},M([ht()],za.prototype,"x1",2),M([ht()],za.prototype,"y1",2),M([ht()],za.prototype,"x2",2),M([ht()],za.prototype,"y2",2),M([ht()],za.prototype,"startLine",2),M([ht()],za.prototype,"endLine",2),M([ht()],za.prototype,"isRange",2)}});function km(t){const{parallelFlipRotation:e=0,regularFlipRotation:i=0}=t,s=t.rotation?Ht(Zi(t.rotation)):0,a=!s&&e>=0&&e<=Math.PI?-1:1,n=!s&&i>=0&&i<=Math.PI?-1:1;let o=0;return t.parallel?o=a*Math.PI/2:n===-1&&(o=Math.PI),{configuredRotation:s,defaultRotation:o,parallelFlipFlag:a,regularFlipFlag:n}}function oK(t,e){return isNaN(t)?e?0:10:t}function rK(t,e,i,s){return t&&!e?i*s===-1?"hanging":"bottom":"middle"}function q0(t,e,i,s,a){const n=e>0&&e<=Math.PI,o=i>0&&i<=Math.PI,r=n||o?-1:1;if(t)if(e||i){if(s*r===-1)return"end"}else return"center";else if(s*a===-1)return"end";return"start"}function lK(t,e,i,s){const a=[];for(const{tickLabel:n,translationY:o}of t){if(!n)continue;const{width:r,height:l}=s.measureLines(n),c=new lt(e,o,r,l),h=new lt(e,o,0,0);i.transformBBox(h,c);const{x:u,y:d}=c;a.push({point:{x:u,y:d},label:{text:n,width:r,height:l}})}return a}var Ke,Fa=A({"packages/ag-charts-community/src/chart/label.ts"(){"use strict";kt(),Ti(),Jt(),ca(),xt(),Ke=class extends Mt{constructor(){super(...arguments),this.enabled=!0,this.fontSize=12,this.fontFamily="Verdana, sans-serif"}getFont(){return ue.toFontString(this)}},M([I(pt)],Ke.prototype,"enabled",2),M([I(jt,{optional:!0})],Ke.prototype,"color",2),M([I(qn,{optional:!0})],Ke.prototype,"fontStyle",2),M([I(Jn,{optional:!0})],Ke.prototype,"fontWeight",2),M([I(nt)],Ke.prototype,"fontSize",2),M([I(J)],Ke.prototype,"fontFamily",2),M([I(Yi,{optional:!0})],Ke.prototype,"formatter",2)}});function cK(t){return t!=null&&Object.hasOwn(t,"toString")&&Rs(t.toString())}function hK(t){return t!=null&&Object.hasOwn(t,"valueOf")&&Vt(t.valueOf())}function Lm(t){return Vt(t)||Yy(t)||hK(t)}function bE(t,e){return t!=null&&(!e||Lm(t))}function J0(t){return cK(t)&&Object.hasOwn(t,"id")?t.id:t}var Kp=A({"packages/ag-charts-community/src/util/value.ts"(){"use strict";Ct()}}),Tm,tD,SE=A({"packages/ag-charts-community/src/chart/crossline/crossLine.ts"(){"use strict";Ui(),Mu(),St(),xt(),Kp(),Tm=t=>t==="value"?Kt((e,i)=>i.target.type==="line",e=>e.target.type==="range"?"crossLine type 'range' to have a 'range' property instead of 'value'":"crossLine property 'type' to be 'line'"):Kt((e,i)=>i.target.type==="range",e=>e.target.type==="line"?"crossLine type 'line' to have a 'value' property instead of 'range'":"crossLine property 'type' to be 'range'"),tD=(t,e,i,s,a)=>{const n=t==="line"&&e!==void 0,o=t==="range"&&i!==void 0;if(!n&&!o)return!0;const[r,l]=i??[e,void 0],c=ie.is(s)||_a.is(s),h=bE(r,c)&&!isNaN(s.convert(r)),u=bE(l,c)&&!isNaN(s.convert(l));if(n&&h||o&&h&&u)return a?.()??!0;const d=["Expecting crossLine"];return o?(h||d.push(`range start ${Tp(r)}`),u||d.push(`${h?"":"and "}range end ${Tp(l)}`)):d.push(`value ${Tp(r)}`),d.push("to match the axis scale domain."),st.warnOnce(d.join(" ")),!1}}});function eD({yDirection:t,padding:e=0,position:i="top",bbox:s}){const a=t?ME:DE,{xTranslationDirection:n,yTranslationDirection:o}=a[i],r=n*(e+s.width/2),l=o*(e+s.height/2);return{xTranslation:r,yTranslation:l}}function vE({yDirection:t,bbox:e,padding:i=0,position:s="top"}){const a={};return s.startsWith("inside")||(s==="top"&&!t?a.top=i+e.height:s==="bottom"&&!t?a.bottom=i+e.height:s==="left"&&t?a.left=i+e.width:s==="right"&&t&&(a.right=i+e.width)),a}var ME,DE,Xp,iD,sD,aD,AE,nD,oD,rD,lD,cD,IE=A({"packages/ag-charts-community/src/chart/crossline/crossLineLabelPosition.ts"(){"use strict";fe(),ME={top:{xTranslationDirection:0,yTranslationDirection:-1},bottom:{xTranslationDirection:0,yTranslationDirection:1},left:{xTranslationDirection:-1,yTranslationDirection:0},right:{xTranslationDirection:1,yTranslationDirection:0},"top-left":{xTranslationDirection:1,yTranslationDirection:-1},"top-right":{xTranslationDirection:-1,yTranslationDirection:-1},"bottom-left":{xTranslationDirection:1,yTranslationDirection:1},"bottom-right":{xTranslationDirection:-1,yTranslationDirection:1},inside:{xTranslationDirection:0,yTranslationDirection:0},"inside-left":{xTranslationDirection:1,yTranslationDirection:0},"inside-right":{xTranslationDirection:-1,yTranslationDirection:0},"inside-top":{xTranslationDirection:0,yTranslationDirection:1},"inside-bottom":{xTranslationDirection:0,yTranslationDirection:-1},"inside-top-left":{xTranslationDirection:1,yTranslationDirection:1},"inside-bottom-left":{xTranslationDirection:1,yTranslationDirection:-1},"inside-top-right":{xTranslationDirection:-1,yTranslationDirection:1},"inside-bottom-right":{xTranslationDirection:-1,yTranslationDirection:-1}},DE={top:{xTranslationDirection:1,yTranslationDirection:0},bottom:{xTranslationDirection:-1,yTranslationDirection:0},left:{xTranslationDirection:0,yTranslationDirection:-1},right:{xTranslationDirection:0,yTranslationDirection:1},"top-left":{xTranslationDirection:-1,yTranslationDirection:-1},"top-right":{xTranslationDirection:-1,yTranslationDirection:1},"bottom-left":{xTranslationDirection:1,yTranslationDirection:-1},"bottom-right":{xTranslationDirection:1,yTranslationDirection:1},inside:{xTranslationDirection:0,yTranslationDirection:0},"inside-left":{xTranslationDirection:0,yTranslationDirection:1},"inside-right":{xTranslationDirection:0,yTranslationDirection:-1},"inside-top":{xTranslationDirection:-1,yTranslationDirection:0},"inside-bottom":{xTranslationDirection:1,yTranslationDirection:0},"inside-top-left":{xTranslationDirection:-1,yTranslationDirection:1},"inside-bottom-left":{xTranslationDirection:1,yTranslationDirection:1},"inside-top-right":{xTranslationDirection:-1,yTranslationDirection:-1},"inside-bottom-right":{xTranslationDirection:1,yTranslationDirection:-1}},Xp=({direction:t,xEnd:e,yStart:i,yEnd:s})=>t==="y"?{x:e/2,y:i}:{x:e,y:isNaN(s)?i:(i+s)/2},iD=({direction:t,xStart:e,xEnd:i,yStart:s,yEnd:a})=>t==="y"?{x:e,y:isNaN(a)?s:(s+a)/2}:{x:i/2,y:s},sD=({direction:t,xEnd:e,yStart:i,yEnd:s})=>t==="y"?{x:e,y:isNaN(s)?i:(i+s)/2}:{x:e/2,y:isNaN(s)?i:s},aD=({direction:t,xStart:e,xEnd:i,yStart:s,yEnd:a})=>t==="y"?{x:i/2,y:isNaN(a)?s:a}:{x:e,y:isNaN(a)?s:(s+a)/2},AE=({xEnd:t,yStart:e,yEnd:i})=>({x:t/2,y:isNaN(i)?e:(e+i)/2}),nD=({direction:t,xStart:e,xEnd:i,yStart:s})=>t==="y"?{x:e/2,y:s}:{x:i,y:s},oD=({direction:t,xStart:e,yStart:i,yEnd:s})=>t==="y"?{x:e,y:isNaN(s)?i:s}:{x:e,y:i},rD=({direction:t,xEnd:e,yStart:i,yEnd:s})=>t==="y"?{x:e,y:i}:{x:e,y:isNaN(s)?i:s},lD=({direction:t,xStart:e,xEnd:i,yStart:s,yEnd:a})=>t==="y"?{x:i,y:isNaN(a)?s:a}:{x:e,y:isNaN(a)?s:a},cD={top:{c:Xp},bottom:{c:aD},left:{c:iD},right:{c:sD},"top-left":{c:nD},"top-right":{c:rD},"bottom-left":{c:oD},"bottom-right":{c:lD},inside:{c:AE},"inside-left":{c:iD},"inside-right":{c:sD},"inside-top":{c:Xp},"inside-bottom":{c:aD},"inside-top-left":{c:nD},"inside-bottom-left":{c:oD},"inside-top-right":{c:rD},"inside-bottom-right":{c:lD}}}}),kE,da,Ms,uK=A({"packages/ag-charts-community/src/chart/crossline/cartesianCrossLine.ts"(){"use strict";nl(),Ui(),Mu(),kt(),me(),ae(),xE(),Ss(),wa(),It(),Jt(),xt(),fe(),Fa(),SE(),IE(),kE=ne(["top","left","right","bottom","top-left","top-right","bottom-left","bottom-right","inside","inside-left","inside-right","inside-top","inside-bottom","inside-top-left","inside-bottom-left","inside-top-right","inside-bottom-right"],"crossLine label position"),da=class extends Mt{constructor(){super(...arguments),this.fontSize=14,this.fontFamily="Verdana, sans-serif",this.padding=5,this.color="rgba(87, 87, 87, 1)"}},M([I(pt,{optional:!0})],da.prototype,"enabled",2),M([I(J,{optional:!0})],da.prototype,"text",2),M([I(qn,{optional:!0})],da.prototype,"fontStyle",2),M([I(Jn,{optional:!0})],da.prototype,"fontWeight",2),M([I(nt)],da.prototype,"fontSize",2),M([I(J)],da.prototype,"fontFamily",2),M([I(wt)],da.prototype,"padding",2),M([I(jt,{optional:!0})],da.prototype,"color",2),M([I(kE,{optional:!0})],da.prototype,"position",2),M([I(wt,{optional:!0})],da.prototype,"rotation",2),M([I(pt,{optional:!0})],da.prototype,"parallel",2),Ms=class extends Mt{constructor(){super(),this.id=Ea(this),this.label=new da,this.scale=void 0,this.clippedRange=[-1/0,1/0],this.gridLength=0,this.sideFlag=-1,this.parallelFlipRotation=0,this.regularFlipRotation=0,this.direction="x",this.rangeGroup=new mt({name:this.id}),this.lineGroup=new mt({name:this.id}),this.labelGroup=new mt({name:this.id}),this.crossLineRange=new za,this.crossLineLabel=new Bc,this.labelPoint=void 0,this.data=[],this.startLine=!1,this.endLine=!1,this.isRange=!1,this._isRange=void 0,this.lineGroup.append(this.crossLineRange),this.labelGroup.append(this.crossLineLabel),this.crossLineRange.pointerEvents=1}update(t){const{enabled:e,data:i,type:s,value:a,range:n,scale:o}=this;if(!s||!o||!e||!t||!tD(s,a,n,o)||i.length===0){this.rangeGroup.visible=!1,this.lineGroup.visible=!1,this.labelGroup.visible=!1;return}this.rangeGroup.visible=t,this.lineGroup.visible=t,this.labelGroup.visible=t,this.updateNodes();const{isRange:r}=this;r!==this._isRange&&(r?this.rangeGroup.appendChild(this.crossLineRange):this.lineGroup.appendChild(this.crossLineRange)),this._isRange=r}calculateLayout(t,e){if(!t)return;const{scale:i,gridLength:s,sideFlag:a,direction:n,label:{position:o="top"},clippedRange:r,strokeWidth:l=0}=this;if(this.data=[],!i)return;const c=i.bandwidth??0,h=i.step??0,u=(e?-1:1)*(i instanceof $o?(h-c)/2:0),[d,p]=[0,a*s];let[g,f]=this.getRange();const x=f===void 0&&_a.is(i)?c/2+u:0;let[m,b]=[Number(i.convert(g,!0))-u+x,i.convert(f,!0)+c+u];m=OM(m,r),b=OM(b,r),[g,f]=[Number(i.convert(g))+x,i.convert(f)+c];const v=(g===m||f===b||m!==b)&&Math.abs(b-m)>0;if(v&&m>b&&([m,b]=[b,m],[g,f]=[f,g]),g-u>=m&&(g-=u),f+u<=b&&(f+=u),this.isRange=v,this.startLine=l>0&&g>=m&&g<=m+u,this.endLine=l>0&&f>=b-c-u&&f<=b,!v&&!this.startLine&&!this.endLine||(this.data=[m,b],!this.label.enabled))return;const{c:S=Xp}=cD[o]??{},{x:D,y:k}=S({direction:n,xStart:d,xEnd:p,yStart:m,yEnd:b});this.labelPoint={x:D,y:k}}updateNodes(){this.updateRangeNode(),this.label.enabled&&(this.updateLabel(),this.positionLabel())}updateRangeNode(){const{crossLineRange:t,sideFlag:e,gridLength:i,data:s,startLine:a,endLine:n,isRange:o,fill:r,fillOpacity:l,stroke:c,strokeWidth:h,lineDash:u}=this;t.x1=0,t.x2=e*i,t.y1=s[0],t.y2=s[1],t.startLine=a,t.endLine=n,t.isRange=o,t.fill=r,t.fillOpacity=l??1,t.stroke=c,t.strokeWidth=h??1,t.strokeOpacity=this.strokeOpacity??1,t.lineDash=u}updateLabel(){const{crossLineLabel:t,label:e}=this;e.text&&(t.fontStyle=e.fontStyle,t.fontWeight=e.fontWeight,t.fontSize=e.fontSize,t.fontFamily=e.fontFamily,t.fill=e.color,t.text=e.text)}positionLabel(){const{crossLineLabel:t,labelPoint:{x:e=void 0,y:i=void 0}={},label:{parallel:s,rotation:a,position:n="top",padding:o=0},direction:r,parallelFlipRotation:l,regularFlipRotation:c}=this;if(e===void 0||i===void 0)return;const{defaultRotation:h,configuredRotation:u}=km({rotation:a,parallel:s,regularFlipRotation:c,parallelFlipRotation:l});t.rotation=h+u,t.textBaseline="middle",t.textAlign="center";const d=t.getBBox();if(!d)return;const p=r==="y",{xTranslation:g,yTranslation:f}=eD({yDirection:p,padding:o,position:n,bbox:d});t.translationX=e+g,t.translationY=i+f}getRange(){const{value:t,range:e,scale:i}=this,s=ie.is(i)||_a.is(i),a=e?.[0]??t;let n=e?.[1];return!s&&n===void 0&&(n=a),s&&a===n&&(n=void 0),[a,n]}computeLabelBBox(){const{label:t}=this;if(!t.enabled)return;const e=new Bc;e.fontFamily=t.fontFamily,e.fontSize=t.fontSize,e.fontStyle=t.fontStyle,e.fontWeight=t.fontWeight,e.text=t.text;const{labelPoint:{x:i=void 0,y:s=void 0}={},label:{parallel:a,rotation:n,position:o="top",padding:r=0},direction:l,parallelFlipRotation:c,regularFlipRotation:h}=this;if(i===void 0||s===void 0)return;const{configuredRotation:u}=km({rotation:n,parallel:a,regularFlipRotation:h,parallelFlipRotation:c});e.rotation=u,e.textBaseline="middle",e.textAlign="center";const d=e.getBBox();if(!d)return;const p=l==="y",{xTranslation:g,yTranslation:f}=eD({yDirection:p,padding:r,position:o,bbox:d});return e.x=i+g,e.y=s+f,e.getBBox()}calculatePadding(t){const{isRange:e,startLine:i,endLine:s,direction:a,label:{padding:n=0,position:o="top"}}=this;if(!e&&!i&&!s)return;const r=this.computeLabelBBox();if(r?.x==null||r?.y==null)return;const l=vE({yDirection:a==="y",padding:n,position:o,bbox:r});t.left=Math.max(t.left??0,l.left??0),t.right=Math.max(t.right??0,l.right??0),t.top=Math.max(t.top??0,l.top??0),t.bottom=Math.max(t.bottom??0,l.bottom??0)}},Ms.className="CrossLine",M([I(pt,{optional:!0})],Ms.prototype,"enabled",2),M([I(ne(["range","line"],"a crossLine type"),{optional:!0})],Ms.prototype,"type",2),M([I(un(Tm("range"),mu.restrict({length:2})),{optional:!0})],Ms.prototype,"range",2),M([I(Tm("value"),{optional:!0})],Ms.prototype,"value",2),M([I(jt,{optional:!0})],Ms.prototype,"fill",2),M([I(Ft,{optional:!0})],Ms.prototype,"fillOpacity",2),M([I(jt,{optional:!0})],Ms.prototype,"stroke",2),M([I(wt,{optional:!0})],Ms.prototype,"strokeWidth",2),M([I(Ft,{optional:!0})],Ms.prototype,"strokeOpacity",2),M([I(Qn,{optional:!0})],Ms.prototype,"lineDash",2),M([I(ct)],Ms.prototype,"label",2)}}),hD,pl=A({"packages/ag-charts-community/src/chart/zIndexMap.ts"(){"use strict";hD=(t=>(t[t.CHART_BACKGROUND=0]="CHART_BACKGROUND",t[t.AXIS_GRID=1]="AXIS_GRID",t[t.AXIS=2]="AXIS",t[t.SERIES_CROSSLINE_RANGE=3]="SERIES_CROSSLINE_RANGE",t[t.SERIES_LAYER=4]="SERIES_LAYER",t[t.AXIS_FOREGROUND=5]="AXIS_FOREGROUND",t[t.SERIES_CROSSHAIR=6]="SERIES_CROSSHAIR",t[t.SERIES_CROSSLINE_LINE=7]="SERIES_CROSSLINE_LINE",t[t.SERIES_ANNOTATION=8]="SERIES_ANNOTATION",t[t.CHART_ANNOTATION=9]="CHART_ANNOTATION",t[t.CHART_ANNOTATION_FOCUSED=10]="CHART_ANNOTATION_FOCUSED",t[t.STATUS_BAR=11]="STATUS_BAR",t[t.SERIES_LABEL=12]="SERIES_LABEL",t[t.LEGEND=13]="LEGEND",t[t.NAVIGATOR=14]="NAVIGATOR",t[t.FOREGROUND=15]="FOREGROUND",t))(hD||{})}}),LE,TE,Zp,dK=A({"packages/ag-charts-community/src/chart/axis/axisGridLine.ts"(){"use strict";Ct(),xt(),LE=["stroke","lineDash"],TE=$n(t=>ws(t)&&Object.keys(t).every(e=>LE.includes(e)),"objects with gridline style properties such as 'stroke' or 'lineDash'"),Zp=class{constructor(){this.enabled=!0,this.width=1,this.style=[{stroke:void 0,lineDash:[]}]}},M([I(pt)],Zp.prototype,"enabled",2),M([I(nt)],Zp.prototype,"width",2),M([I(TE)],Zp.prototype,"style",2)}});function gl(t,e=[void 0]){return Ko((i,s,a)=>e.includes(a)?el(t)?t(a):t:a)}var $p=A({"packages/ag-charts-community/src/util/default.ts"(){"use strict";Jr(),Ct()}});function pK(t){return Math.floor(t.getTime()/xi)}function gK(t){return new Date(t*xi)}var NE,fK=A({"packages/ag-charts-community/src/util/time/utcMinute.ts"(){"use strict";Xn(),Hi(),NE=new _s(pK,gK)}});function yK(t){return Math.floor(t.getTime()/Wi)}function mK(t){return new Date(t*Wi)}var CE,xK=A({"packages/ag-charts-community/src/util/time/utcHour.ts"(){"use strict";Xn(),Hi(),CE=new _s(yK,mK)}});function bK(t){return Math.floor(t.getTime()/na)}function SK(t){const e=new Date(0);return e.setUTCDate(e.getUTCDate()+t),e.setUTCHours(0,0,0,0),e}var OE,vK=A({"packages/ag-charts-community/src/util/time/utcDay.ts"(){"use strict";Xn(),Hi(),OE=new _s(bK,SK)}});function MK(t){return t.getUTCFullYear()*12+t.getUTCMonth()}function DK(t){const e=Math.floor(t/12),i=t-e*12;return new Date(Date.UTC(e,i,1))}var EE,AK=A({"packages/ag-charts-community/src/util/time/utcMonth.ts"(){"use strict";Hi(),EE=new _s(MK,DK)}});function IK(t){return t.getUTCFullYear()}function kK(t){const e=new Date;return e.setUTCFullYear(t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0),e}var wE,LK=A({"packages/ag-charts-community/src/util/time/utcYear.ts"(){"use strict";Hi(),wE=new _s(IK,kK)}}),RE={};Oa(RE,{TimeInterval:()=>kc,day:()=>Mp,friday:()=>aO,hour:()=>Lc,millisecond:()=>I0,minute:()=>Tc,monday:()=>tO,month:()=>al,saturday:()=>nO,second:()=>Nc,sunday:()=>fu,thursday:()=>sO,tuesday:()=>eO,utcDay:()=>OE,utcHour:()=>CE,utcMinute:()=>NE,utcMonth:()=>EE,utcYear:()=>wE,wednesday:()=>iO,year:()=>Dp});var uD=A({"packages/ag-charts-community/src/util/time/index.ts"(){"use strict";CO(),r0(),a0(),i0(),t0(),l0(),n0(),c0(),fK(),xK(),vK(),AK(),LK(),Hi()}}),dD,fl,pD=A({"packages/ag-charts-community/src/chart/axis/axisInterval.ts"(){"use strict";$p(),Jt(),uD(),Ct(),xt(),dD=Kt(t=>Vt(t)&&t>0||t instanceof kc,"a non-zero positive Number value or, for a time axis, a Time Interval such as 'agCharts.time.month'"),fl=class extends Mt{constructor(){super(...arguments),this.minSpacing=NaN,this.maxSpacing=NaN}},M([I(dD,{optional:!0})],fl.prototype,"step",2),M([I(mu,{optional:!0})],fl.prototype,"values",2),M([I(S0),gl(NaN)],fl.prototype,"minSpacing",2),M([I(v0),gl(NaN)],fl.prototype,"maxSpacing",2)}}),Xe,Nm=A({"packages/ag-charts-community/src/chart/axis/axisLabel.ts"(){"use strict";$p(),Jt(),xt(),Xe=class extends Mt{constructor(){super(...arguments),this.enabled=!0,this.fontSize=12,this.fontFamily="Verdana, sans-serif",this.spacing=5,this.minSpacing=NaN,this.color="#575757",this.avoidCollisions=!0,this.mirrored=!1,this.parallel=!1}getSideFlag(){return this.mirrored?1:-1}},M([I(pt)],Xe.prototype,"enabled",2),M([I(qn,{optional:!0})],Xe.prototype,"fontStyle",2),M([I(Jn,{optional:!0})],Xe.prototype,"fontWeight",2),M([I(wt.restrict({min:1}))],Xe.prototype,"fontSize",2),M([I(J)],Xe.prototype,"fontFamily",2),M([I(nt)],Xe.prototype,"spacing",2),M([I(Oc),gl(NaN)],Xe.prototype,"minSpacing",2),M([I(jt,{optional:!0})],Xe.prototype,"color",2),M([I(wt,{optional:!0})],Xe.prototype,"rotation",2),M([I(pt)],Xe.prototype,"avoidCollisions",2),M([I(pt)],Xe.prototype,"mirrored",2),M([I(pt)],Xe.prototype,"parallel",2),M([I(Yi,{optional:!0})],Xe.prototype,"itemStyler",2),M([I(Yi,{optional:!0})],Xe.prototype,"formatter",2),M([I(J,{optional:!0})],Xe.prototype,"format",2)}}),Qp,TK=A({"packages/ag-charts-community/src/chart/axis/axisLine.ts"(){"use strict";xt(),Qp=class{constructor(){this.enabled=!0,this.width=1,this.stroke=void 0}},M([I(pt)],Qp.prototype,"enabled",2),M([I(nt)],Qp.prototype,"width",2),M([I(jt,{optional:!0})],Qp.prototype,"stroke",2)}}),Fc,_E=A({"packages/ag-charts-community/src/chart/axis/axisTick.ts"(){"use strict";Jt(),uD(),xt(),Fc=class extends Mt{constructor(){super(...arguments),this.enabled=!0,this.width=1,this.size=6}},M([I(pt)],Fc.prototype,"enabled",2),M([I(nt)],Fc.prototype,"width",2),M([I(nt)],Fc.prototype,"size",2),M([I(jt,{optional:!0})],Fc.prototype,"stroke",2)}}),ja,NK=A({"packages/ag-charts-community/src/chart/axis/axisTitle.ts"(){"use strict";Jt(),xt(),dl(),ja=class extends Mt{constructor(){super(...arguments),this.caption=new ee,this.enabled=!1,this.spacing=ee.SMALL_PADDING,this.fontSize=10,this.fontFamily="sans-serif",this.wrapping="always"}},M([I(pt)],ja.prototype,"enabled",2),M([I(J,{optional:!0})],ja.prototype,"text",2),M([I(nt,{optional:!0})],ja.prototype,"spacing",2),M([I(qn,{optional:!0})],ja.prototype,"fontStyle",2),M([I(Jn,{optional:!0})],ja.prototype,"fontWeight",2),M([I(nt)],ja.prototype,"fontSize",2),M([I(J)],ja.prototype,"fontFamily",2),M([I(jt,{optional:!0})],ja.prototype,"color",2),M([I(Ep)],ja.prototype,"wrapping",2),M([I(Yi,{optional:!0})],ja.prototype,"formatter",2)}});function gD(t){const[e,i]=Gi(t.range),s=Math.floor(e),a=Math.ceil(i);return{min:s,max:a,visible:s!==a}}function CK(t,e){return Math.abs(e-t)<GE?e:t>e?e+Cm:e-Cm}function PE(t){const e=(o,r)=>{const[l=t.min,c=t.max]=Gi(r??[]);return o<l||o>c};return{tick:{fromFn(o,r,l){let c=o.y1+o.translationY,h=o.opacity;return(l==="added"||e(o.datum.translationY,o.datum.range))&&(c=r.translationY,h=0),{y:0,translationY:c,opacity:h,phase:Vi[l]}},toFn(o,r,l){const c=r.translationY;let h=1;return l==="removed"&&(h=0),{y:0,translationY:c,opacity:h,finish:{y:c,translationY:0}}},applyFn(o,r){o.setProperties(r),o.visible=!e(o.y)}},line:{fromFn(o,r){return{...o.previousDatum??r,phase:Vi.updated}},toFn(o,r){return{...r}}},label:{fromFn(o,r,l){const c=o.previousDatum??r,h=c.x,u=c.y,d=c.rotationCenterX;let p=Math.round(o.translationY),g=c.rotation,f=o.opacity;return l==="removed"||e(c.y,c.range)?g=r.rotation:(l==="added"||e(o.datum.y,o.datum.range))&&(p=Math.round(c.translationY),f=0,g=r.rotation),{x:h,y:u,rotationCenterX:d,translationY:p,rotation:g,opacity:f,phase:Vi[l]}},toFn(o,r,l){const c=r.x,h=r.y,u=r.rotationCenterX,d=Math.round(r.translationY);let p=0,g=1;return l==="added"?p=r.rotation:l==="removed"?(g=0,p=r.rotation):p=CK(o.previousDatum?.rotation??r.rotation,r.rotation),{x:c,y:h,rotationCenterX:u,translationY:d,rotation:p,opacity:g,finish:{rotation:r.rotation}}}},group:{fromFn(o,r){const{rotation:l,translationX:c,translationY:h}=o;return{rotation:l,translationX:c,translationY:h,phase:Vi.updated}},toFn(o,r){const{rotation:l,translationX:c,translationY:h}=r;return{rotation:l,translationX:c,translationY:h}}}}}function BE(){return(t,e)=>({rotation:e.rotation,rotationCenterX:e.rotationCenterX,rotationCenterY:e.rotationCenterY,translationX:e.translationX,translationY:e.translationY})}function zE(t){const{visible:e,min:i,max:s}=t;return(a,n)=>{const o=n.translationY,r=e&&o>=i&&o<=s;return{y:o,translationY:0,opacity:1,visible:r}}}function FE(){return(t,e)=>({x:e.x,y:e.y,translationY:e.translationY,rotation:e.rotation,rotationCenterX:e.rotationCenterX})}function jE(){return(t,e)=>({...e})}var Cm,GE,VE=A({"packages/ag-charts-community/src/chart/axis/axisUtil.ts"(){"use strict";Ii(),It(),Cm=Math.PI*2,GE=Cm/2}}),UE,Om,io,Em,fD=A({"packages/ag-charts-community/src/chart/axis/axis.ts"(){"use strict";M0(),Ii(),rl(),Ui(),N0(),Mu(),kt(),me(),GO(),Qo(),Pc(),Ss(),Ki(),uE(),Ti(),Ue(),iK(),Wp(),wa(),ha(),St(),It(),Yt(),vs(),Yp(),$0(),ca(),wc(),Ct(),xt(),dl(),fe(),uK(),Fa(),pl(),dK(),pD(),Nm(),TK(),_E(),NK(),VE(),UE=Object.freeze({tickData:{ticks:[],rawTicks:[],labelCount:0,fractionDigits:0},combinedRotation:0,textAlign:"center",textBaseline:"bottom",labelData:[]}),Om=class extends _c(Bs){},io=class r3{constructor(e,i){this.moduleCtx=e,this.scale=i,this.id=Ea(this),this.nice=!0,this.reverse=!1,this.keys=[],this.interval=new fl,this.dataDomain={domain:[],clipped:!1},this.layoutConstraints={stacked:!0,align:"start",width:100,unit:"percent"},this.boundSeries=[],this.includeInvisibleDomains=!1,this.interactionEnabled=!0,this.axisGroup=new Au({name:`${this.id}-axis`}),this.tickLineGroup=this.axisGroup.appendChild(new mt({name:`${this.id}-Axis-tick-lines`})),this.lineNode=this.axisGroup.appendChild(new Om({name:`${this.id}-Axis-line`})),this.tickLabelGroup=this.axisGroup.appendChild(new mt({name:`${this.id}-Axis-tick-labels`})),this.labelGroup=new mt({name:`${this.id}-Labels`,zIndex:8}),this.gridGroup=new Au({name:`${this.id}-Axis-grid`,zIndex:1}),this.gridLineGroup=this.gridGroup.appendChild(new mt({name:`${this.id}-gridLines`})),this.crossLineRangeGroup=new Au({name:`${this.id}-CrossLines-Range`,zIndex:3}),this.crossLineLineGroup=new Au({name:`${this.id}-CrossLines-Line`,zIndex:7}),this.crossLineLabelGroup=new Au({name:`${this.id}-CrossLines-Label`,zIndex:12}),this.tickLineGroupSelection=Te.select(this.tickLineGroup,Om,!1),this.tickLabelGroupSelection=Te.select(this.tickLabelGroup,Bc,!1),this.gridLineGroupSelection=Te.select(this.gridLineGroup,Om,!1),this._crossLines=[],this.line=new Qp,this.tick=new Fc,this.gridLine=new Zp,this.label=this.createLabel(),this.tempText=new Bc,this.tempCaption=new ee,this.defaultTickMinSpacing=r3.defaultTickMinSpacing,this.translation={x:0,y:0},this.rotation=0,this.layout={label:{fractionDigits:0,spacing:this.label.spacing,format:this.label.format}},this.destroyFns=[],this.range=[0,1],this.visibleRange=[0,1],this.title=new ja,this.gridLength=0,this.gridPadding=0,this.seriesAreaPadding=0,this.tickGenerationResult=void 0,this._domainCalculated=!1,this.moduleMap=new lm,this.range=this.scale.range.slice(),this.crossLines.forEach(a=>this.initCrossLine(a)),this.axisGroup.appendChild(this.title.caption.node),this.animationManager=e.animationManager,this.animationState=new ku("empty",{empty:{update:{target:"ready",action:()=>this.resetSelectionNodes()},reset:"empty"},ready:{update:a=>this.animateReadyUpdate(a),resize:()=>this.resetSelectionNodes(),reset:"empty"}});let s;this.destroyFns.push(this.title.caption.registerInteraction(this.moduleCtx,"afterend"),e.layoutManager.addListener("layout:complete",a=>{s!=null&&eo(a.chart,s)!=null&&this.animationState.transition("resize"),s={...a.chart}}))}get type(){return this.constructor.type??""}set crossLines(e){const{CrossLineConstructor:i}=this.constructor;this._crossLines.forEach(s=>this.detachCrossLine(s)),this._crossLines=e.map(s=>{const a=new i;return a.set(s),a}),this._crossLines.forEach(s=>{this.attachCrossLine(s),this.initCrossLine(s)})}get crossLines(){return this._crossLines}resetAnimation(e){e==="initial"&&this.animationState.transition("reset")}attachCrossLine(e){this.crossLineRangeGroup.appendChild(e.rangeGroup),this.crossLineLineGroup.appendChild(e.lineGroup),this.crossLineLabelGroup.appendChild(e.labelGroup)}detachCrossLine(e){this.crossLineRangeGroup.removeChild(e.rangeGroup),this.crossLineLineGroup.removeChild(e.lineGroup),this.crossLineLabelGroup.removeChild(e.labelGroup)}destroy(){this.moduleMap.destroy(),this.destroyFns.forEach(e=>e())}updateRange(){const{range:e,visibleRange:i,scale:s}=this,a=(e[1]-e[0])/(i[1]-i[0]),n=a*i[0],o=e[0]-n;s.setVisibleRange?.(i),s.range=[o,o+a],this.crossLines.forEach(r=>{r.clippedRange=[e[0],e[1]]})}setCrossLinesVisible(e){this.crossLineRangeGroup.visible=e,this.crossLineLineGroup.visible=e,this.crossLineLabelGroup.visible=e}attachAxis(e){e.gridNode.appendChild(this.gridGroup),e.axisNode.appendChild(this.axisGroup),e.labelNode.appendChild(this.labelGroup),e.crossLineRangeNode.appendChild(this.crossLineRangeGroup),e.crossLineLineNode.appendChild(this.crossLineLineGroup),e.crossLineLabelNode.appendChild(this.crossLineLabelGroup)}detachAxis(e){e.gridNode.removeChild(this.gridGroup),e.axisNode.removeChild(this.axisGroup),e.labelNode.removeChild(this.labelGroup),e.crossLineRangeNode.removeChild(this.crossLineRangeGroup),e.crossLineLineNode.removeChild(this.crossLineLineGroup),e.crossLineLabelNode.removeChild(this.crossLineLabelGroup)}attachLabel(e){this.labelGroup.append(e)}inRange(e,i=0){const[s,a]=Gi(this.range);return e>=s-i&&e<=a+i}onFormatChange(e,i,s,a){const{scale:n}=this,o=n instanceof um;if(a&&n?.tickFormat)try{const r=n.tickFormat({ticks:e,specifier:a});this.labelFormatter=r,this.datumFormatter=r;return}catch{st.warnOnce(`the axis label format string ${a} is invalid. No formatting will be applied`)}this.labelFormatter=o?String:r=>Up(r,i),this.datumFormatter=o?String:r=>Up(r,i+1)}onGridLengthChange(e,i){i^e&&this.onGridVisibilityChange(),this.crossLines.forEach(s=>this.initCrossLine(s))}onGridVisibilityChange(){this.gridLineGroupSelection.clear()}createLabel(){return new Xe}update(e=!0){if(!this.tickGenerationResult)return;this.updatePosition();const i=this.getAxisLineCoordinates(),{tickData:s,combinedRotation:a,textBaseline:n,textAlign:o}=this.tickGenerationResult,r=this.tickLabelGroupSelection.nodes().slice();if(this.updateSelections(i,s.ticks,{combinedRotation:a,textAlign:o,textBaseline:n,range:this.scale.range}),!e||this.animationManager.isSkipped())this.resetSelectionNodes();else{const u=eK(r.map(d=>d.datum.tickId),s.ticks.map(d=>d.tickId));this.animationState.transition("update",u)}this.tickLineGroup.visible=this.tick.enabled,this.gridLineGroup.visible=this.gridLine.enabled,this.tickLabelGroup.visible=this.label.enabled;const{enabled:l,stroke:c,width:h}=this.line;this.lineNode.setProperties({stroke:c,strokeWidth:l?h:0}),this.updateLabels(),this.updateGridLines(),this.updateTickLines(),this.updateTitle(!s.ticks.length),this.updateCrossLines()}getAxisLineCoordinates(){const[e,i]=Gi(this.range);return{x:0,y1:e,y2:i}}getTickLineCoordinates(e){const s=this.label.getSideFlag()*this.getTickSize(),a=Math.min(0,s),n=a+Math.abs(s),o=e.translationY;return{x1:a,x2:n,y:o}}getLabelStyles(e,i){const{label:s}=this,a={color:s.color,spacing:s.spacing,fontFamily:s.fontFamily,fontSize:s.fontSize,fontStyle:s.fontStyle,fontWeight:s.fontWeight};let n;s.itemStyler&&(n=this.moduleCtx.callbackCache.call(s.itemStyler,{...e,...a}));const{color:o,fontFamily:r,fontSize:l,fontStyle:c,fontWeight:h,spacing:u}=Lt(n,i,a);return{fill:o,fontFamily:r,fontSize:l,fontStyle:c,fontWeight:h,spacing:u}}getTickLabelProps(e,i){const{label:s}=this,{combinedRotation:a,textBaseline:n,textAlign:o,range:r}=i,l=e.tickLabel,h=s.getSideFlag()*(this.getTickSize()+s.spacing+this.seriesAreaPadding),u=l!==""&&l!=null;return{...this.getLabelStyles({value:e.tickLabel}),tickId:e.tickId,rotation:a,rotationCenterX:h,translationY:e.translationY,text:l,textAlign:o,textBaseline:n,visible:u,x:h,y:0,range:r}}getTickSize(){return this.tick.enabled?this.tick.size:0}setTitleProps(e,i){const{title:s}=this;if(!s.enabled){e.enabled=!1,e.node.visible=!1;return}e.color=s.color,e.fontFamily=s.fontFamily,e.fontSize=s.fontSize,e.fontStyle=s.fontStyle,e.fontWeight=s.fontWeight,e.enabled=s.enabled,e.wrapping=s.wrapping;const a=e.node,n=(s.spacing??0)+i.spacing,o=this.label.getSideFlag(),r=Ht(this.rotation),l=o===-1&&r>Math.PI&&r<Math.PI*2?-1:1,c=l*o*Math.PI/2,h=l===1?"bottom":"top",{range:u}=this,d=Math.floor(l*o*(u[0]+u[1])/2),p=Math.floor(o===-1?l*-n:-n),{callbackCache:g}=this.moduleCtx,{formatter:f=m=>m.defaultValue}=s,x=g.call(f,this.getTitleFormatterParams());e.text=x,a.setProperties({visible:!0,text:x,textBaseline:h,x:d,y:p,rotation:c})}processData(){this._domainCalculated=!1}calculateLayout(e,i){const{rotation:s,parallelFlipRotation:a,regularFlipRotation:n}=this.calculateRotations(),o=this.label.getSideFlag();this.updateScale({domain:e,skipDomainCalculation:this._domainCalculated}),this._domainCalculated=e==null;const r=this.processTicks(i,a,n);this.tickGenerationResult=r.tickGenerationResult;const l=lt.merge(r.boxes),c=this.getTransformBox(l),h=this.isAnySeriesActive();return this.crossLines.forEach(u=>{var d;u.sideFlag=-o,u.direction=s===-Math.PI/2?"x":"y",u instanceof Ms&&((d=u.label).parallel??(d.parallel=this.label.parallel)),u.parallelFlipRotation=a,u.regularFlipRotation=n,u.calculateLayout?.(h,this.reverse)}),{primaryTickCount:r.tickGenerationResult?.primaryTickCount??i,bbox:c}}processTicks(e,i,s){const a=this.label.getSideFlag(),n=a*(this.getTickSize()+this.label.spacing+this.seriesAreaPadding),r=this.label.enabled||this.tick.enabled||this.gridLine.enabled?this.generateTicks({primaryTickCount:e,parallelFlipRotation:i,regularFlipRotation:s,labelX:n,sideFlag:a}):UE,{tickData:l,combinedRotation:c,textBaseline:h,textAlign:u}=r;this.updateLayoutState(l.fractionDigits);const d=[],{x:p,y1:g,y2:f}=this.getAxisLineCoordinates(),x=new lt(p+Math.min(a*this.seriesAreaPadding,0),g,this.seriesAreaPadding,f-g);d.push(x),this.tick.enabled&&l.ticks.forEach(b=>{const{x1:v,x2:S,y:D}=this.getTickLineCoordinates(b),k=new lt(v,D,S-v,0);d.push(k)});const{tempText:m}=this;if(this.label.enabled&&l.ticks.forEach(b=>{const v=this.getTickLabelProps(b,{combinedRotation:c,textAlign:u,textBaseline:h,range:this.scale.range});if(!v.visible)return;m.setProperties({...v,translationY:Math.round(b.translationY)});const S=m.getBBox();S&&d.push(S)}),this.title?.enabled){const b=lt.merge(d).width;this.setTitleProps(this.tempCaption,{spacing:b});const v=this.tempCaption.node.getBBox();v&&d.push(v)}return{tickGenerationResult:r,boxes:d}}updateLayoutState(e){this.layout.label={fractionDigits:e,spacing:this.label.spacing,format:this.label.format}}getTransformBox(e){const i=new Pa,{rotation:s,translationX:a,translationY:n}=this.getAxisTransform();return Pa.updateTransformMatrix(i,1,1,s,a,n),i.transformBBox(e)}setDomain(e){this.dataDomain=this.normaliseDataDomain(e),this.reverse&&this.dataDomain.domain.reverse(),this.scale.domain=this.dataDomain.domain}updateScale(e){const i=e?.domain;(e?.skipDomainCalculation??!1)||(i?this.setDomain(i):this.calculateDomain()),this.updateRange(),this.scale.interval=this.interval.step,ie.is(this.scale)&&(this.scale.nice=this.nice,this.scale.update())}calculateRotations(){const e=Zi(this.rotation),i=Ht(e),s=Ht(e-Math.PI/2);return{rotation:e,parallelFlipRotation:i,regularFlipRotation:s}}generateTicks({primaryTickCount:e,parallelFlipRotation:i,regularFlipRotation:s,labelX:a,sideFlag:n}){const{scale:o,interval:{minSpacing:r,maxSpacing:l},label:{parallel:c,rotation:h,fontFamily:u,fontSize:d,fontStyle:p,fontWeight:g}}=this,f=e!==void 0,{defaultRotation:x,configuredRotation:m,parallelFlipFlag:b,regularFlipFlag:v}=km({rotation:h,parallel:c,regularFlipRotation:s,parallelFlipRotation:i}),S=m+x,D=new Pa,{maxTickCount:k}=this.estimateTickCount(r,l),T=!(ie.is(o)||_a.is(o))||isNaN(k)?10:k;let N=q0(c,m,0,n,v);const C=rK(c,m,n,b),O=ue.toFontString({fontFamily:u,fontSize:d,fontStyle:p,fontWeight:g}),R=to.getMeasurer({font:O}),E={fontFamily:u,fontSize:d,fontStyle:p,fontWeight:g,textBaseline:C,textAlign:N};let z={ticks:[],rawTicks:[],fractionDigits:0,labelCount:0},F=0,G=0,j=!0,V=[],W=!1;for(;j&&F<=T&&!W;){G=0,N=q0(c,m,0,n,v);const U=this.getTickStrategies({secondaryAxis:f,index:F});for(const H of U){({tickData:z,index:F,autoRotation:G,terminate:W}=H({index:F,tickData:z,textProps:E,labelOverlap:j,terminate:W,primaryTickCount:e}));const K=m!==0||G!==0,X=S+G,Q=oK(this.label.minSpacing,K);Pa.updateTransformMatrix(D,1,1,X,0,0),N=q0(c,m,G,n,v),V=lK(z.ticks,a,D,R),j=this.label.avoidCollisions?tK(V,Q):!1}}const B=x+m+G;return!f&&z.rawTicks.length>0&&(e=z.rawTicks.length),{tickData:z,primaryTickCount:e,combinedRotation:B,textBaseline:C,textAlign:N,labelData:V}}getTickStrategies({index:e,secondaryAxis:i}){const{scale:s,label:a}=this,{minSpacing:n}=this.interval,o=ie.is(s)||_a.is(s),r=a.enabled&&a.avoidCollisions,l=!o&&e!==0&&r,c=a.autoRotate===!0&&a.rotation===void 0,h=[];let u;this.interval.values?u=3:i?u=1:l?u=2:u=0;const d=({index:p,tickData:g,primaryTickCount:f,terminate:x})=>this.createTickData(u,p,g,x,f);if(h.push(d),!o&&!isNaN(n)){const p=({index:g,tickData:f,primaryTickCount:x,terminate:m})=>this.createTickData(2,g,f,m,x);h.push(p)}if(r&&c){const p=({index:g,tickData:f,labelOverlap:x,terminate:m})=>({index:g,tickData:f,autoRotation:x?Ht(Zi(this.label.autoRotateAngle??0)):0,terminate:m});h.push(p)}return h}createTickData(e,i,s,a,n){const{scale:o}=this,{step:r,values:l,minSpacing:c,maxSpacing:h}=this.interval,{maxTickCount:u,minTickCount:d,tickCount:p}=this.estimateTickCount(c,h),g=ie.is(o)||_a.is(o),f=!g||isNaN(u)?10:u,x=b=>g?Math.max(p-b,d):u,m=r==null&&l==null&&x(i)>d&&(g||e===2);for(;i<=f;){const b=s.rawTicks;if(s=this.getTicks({tickGenerationType:e,previousTicks:b,minTickCount:d,maxTickCount:u,primaryTickCount:n,tickCount:x(i)}),i++,!m||!sl(s.rawTicks,b))break}return a||(a=r!=null||l!=null),{tickData:s,index:i,autoRotation:0,terminate:a}}getTicks({tickGenerationType:e,previousTicks:i,tickCount:s,minTickCount:a,maxTickCount:n,primaryTickCount:o}){const{range:r,scale:l,visibleRange:c}=this,h=Z0();let u;switch(e){case 3:if(u=this.interval.values,ie.is(l)){const[v,S]=Gi(l.getDomain().map(Number));u=u.filter(D=>D>=v&&D<=S).sort((D,k)=>D-k)}break;case 1:ie.is(l)?u=this.updateSecondaryAxisTicks(o):u=this.createTicks(s,a,n);break;case 2:u=this.filterTicks(i,s);break;default:u=this.createTicks(s,a,n);break}const d=u.reduce((v,S)=>Math.max(v,typeof S=="number"?Vy(S):0),0),p=(l.bandwidth??0)/2,g=[];let f=0;const x=Math.max(0,Math.floor(c[0]*u.length)),m=Math.min(u.length,Math.ceil(c[1]*u.length)),b=u.slice(x,m);this.onFormatChange(b,d,u,this.label.format);for(let v=0;v<b.length;v++){const S=b[v],D=l.convert(S)+p;if(r.length>0&&!this.inRange(D,.001))continue;const k=this.formatTick(S,x+v,d);g.push({tick:S,tickId:h(k),tickLabel:k,translationY:Math.floor(D)}),!(k===""||k==null)&&f++}return{rawTicks:u,fractionDigits:d,ticks:g,labelCount:f}}filterTicks(e,i){const{minSpacing:s,maxSpacing:a}=this.interval,o=!isNaN(s)||!isNaN(a)?Math.ceil(e.length/i):2;return e.filter((r,l)=>l%o===0)}createTicks(e,i,s){const{scale:a}=this;return e&&(ie.is(a)||_a.is(a))&&(a.tickCount=e,a.minTickCount=i??0,a.maxTickCount=s??1/0),a.ticks?.()??[]}estimateTickCount(e,i){return RO(this.calculateRangeWithBleed(),e,i,ie.defaultTickCount,this.defaultTickMinSpacing)}updateCrossLines(){const e=this.isAnySeriesActive();this.crossLines.forEach(i=>{i.update(e)})}updateTickLines(){const{tick:e,label:i}=this,s=i.getSideFlag();this.tickLineGroupSelection.each((a,n)=>{a.strokeWidth=n.tickWidth??e.width,a.stroke=n.tickStroke??e.stroke,a.x1=s*(n.tickSize??this.getTickSize()),a.x2=0})}calculateAvailableRange(){return dp(this.range)}calculateRangeWithBleed(){return EM(this.calculateAvailableRange()/dp(this.visibleRange),2)}calculateDomain(){const{includeInvisibleDomains:e,boundSeries:i,direction:s}=this,a=e?i:i.filter(o=>o.isEnabled()),n=a.length===1?a[0].getDomain(s):a.flatMap(o=>o.getDomain(s));this.setDomain(n)}getAxisTransform(){return{rotation:Zi(this.rotation),translationX:Math.floor(this.translation.x),translationY:Math.floor(this.translation.y)}}updatePosition(){const{crossLineRangeGroup:e,crossLineLineGroup:i,crossLineLabelGroup:s,axisGroup:a,gridGroup:n,translation:o}=this,{rotation:r}=this.calculateRotations(),l=Math.floor(o.x),c=Math.floor(o.y);e.setProperties({rotation:r,translationX:l,translationY:c}),i.setProperties({rotation:r,translationX:l,translationY:c}),s.setProperties({rotation:r,translationX:l,translationY:c}),n.setProperties({rotation:r,translationX:l,translationY:c}),a.datum=this.getAxisTransform()}updateSecondaryAxisTicks(e){throw new Error("AG Charts - unexpected call to updateSecondaryAxisTicks() - check axes configuration.")}updateSelections(e,i,s){const a=o=>o.tickId,n=i.map(o=>this.getTickLabelProps(o,s));this.lineNode.datum=e,this.gridLineGroupSelection.update(this.gridLength?i:[],void 0,a),this.tickLineGroupSelection.update(i,void 0,a),this.tickLabelGroupSelection.update(n,void 0,a)}updateGridLines(){const e=this.label.getSideFlag(),{gridLine:{style:i,width:s},gridPadding:a,gridLength:n}=this;n===0||i.length===0||this.gridLineGroupSelection.each((o,r,l)=>{const{stroke:c,lineDash:h}=i[l%i.length];o.setProperties({x1:a,x2:-e*n+a,stroke:c,strokeWidth:s,lineDash:h})})}updateLabels(){this.label.enabled&&this.tickLabelGroupSelection.each((e,i)=>{e.setProperties(i,["fill","fontFamily","fontSize","fontStyle","fontWeight","text","textAlign","textBaseline"])})}updateTitle(e,i){const{title:s,lineNode:a,tickLineGroup:n,tickLabelGroup:o}=this;s.enabled&&!e&&i==null&&(i=mt.computeChildrenBBox([n,o,a]).width+(this.tickLabelGroup.visible?0:this.seriesAreaPadding)),i??(i=0),this.setTitleProps(s.caption,{spacing:i})}formatTick(e,i,s){const{labelFormatter:a,label:{formatter:n},moduleCtx:{callbackCache:o}}=this;let r;return n?r=o.call(n,{value:e,index:i,fractionDigits:s}):a&&(r=o.call(a,e)),String(r??e)}formatDatum(e){const{label:{formatter:i},moduleCtx:{callbackCache:s},datumFormatter:a=this.labelFormatter}=this;let n;return i?n=s.call(i,{value:e,index:NaN}):a?n=s.call(a,e):ce(e)&&(n=e.filter(Boolean).join(" - ")),String(n??e)}getScaleValueFormatter(e){if(e&&this.scale.tickFormat)try{return this.scale.tickFormat({specifier:e})}catch{st.warnOnce(`the format string ${e} is invalid, ignoring.`)}return i=>this.formatDatum(i)}getBBox(){return this.axisGroup.getBBox()}initCrossLine(e){e.scale=this.scale,e.gridLength=this.gridLength}isAnySeriesActive(){return this.boundSeries.some(e=>this.includeInvisibleDomains||e.isEnabled())}clipTickLines(e,i,s,a){this.tickLineGroup.setClipRect(new lt(e,i,s,a))}clipGrid(e,i,s,a){this.gridGroup.setClipRect(new lt(e,i,s,a))}getTitleFormatterParams(){const{direction:e}=this,i=[];for(const s of this.boundSeries){const a=s.getKeys(e),n=s.getNames(e);for(let o=0;o<a.length;o++)i.push({key:a[o],name:n[o]})}return{direction:e,boundSeries:i,defaultValue:this.title?.text}}normaliseDataDomain(e){return{domain:[...e],clipped:!1}}getLayoutState(){return{id:this.id,rect:this.getBBox(),gridPadding:this.gridPadding,seriesAreaPadding:this.seriesAreaPadding,tickSize:this.getTickSize(),direction:this.direction,domain:this.dataDomain.domain,scale:this.scale,...this.layout}}getModuleMap(){return this.moduleMap}createModuleContext(){return this.axisContext??(this.axisContext=this.createAxisContext()),{...this.moduleCtx,parent:this.axisContext}}createAxisContext(){const{scale:e}=this;return{axisId:this.id,scale:this.scale,direction:this.direction,continuous:ie.is(e)||_a.is(e),getCanvasBounds:()=>Ae.toCanvas(this.axisGroup),seriesKeyProperties:()=>this.boundSeries.reduce((i,s)=>(s.getKeyProperties(this.direction).forEach(n=>{i.indexOf(n)<0&&i.push(n)}),i),[]),scaleValueFormatter:i=>this.getScaleValueFormatter(i),scaleInvert:_a.is(e)?i=>e.invertNearest?.(i):i=>e.invert?.(i),scaleInvertNearest:i=>e.invertNearest?.(i),attachLabel:i=>this.attachLabel(i),inRange:(i,s)=>this.inRange(i,s)}}animateReadyUpdate(e){const{animationManager:i}=this.moduleCtx,s=gD(this),a=PE(s);De(this.id,"axis-group",i,[this.axisGroup],a.group),De(this.id,"line",i,[this.lineNode],a.line),De(this.id,"line-paths",i,[this.gridLineGroupSelection,this.tickLineGroupSelection],a.tick,(n,o)=>o.tickId,e),De(this.id,"tick-labels",i,[this.tickLabelGroupSelection],a.label,(n,o)=>o.tickId,e)}resetSelectionNodes(){const e=gD(this);We([this.axisGroup],BE()),We([this.gridLineGroupSelection,this.tickLineGroupSelection],zE(e)),We([this.tickLabelGroupSelection],FE()),We([this.lineNode],jE())}isReversed(){return this.reverse}},io.defaultTickMinSpacing=50,io.CrossLineConstructor=Ms,M([I(pt)],io.prototype,"nice",2),M([I(pt)],io.prototype,"reverse",2),M([I(m0)],io.prototype,"keys",2),M([I(ct)],io.prototype,"interval",2),M([I(ct)],io.prototype,"title",2),M([zc((t,e,i)=>t.onGridLengthChange(e,i))],io.prototype,"gridLength",2),Em=io}}),wm,OK=A({"packages/ag-charts-community/src/chart/axis/cartesianAxisLabel.ts"(){"use strict";xt(),Nm(),wm=class extends Xe{constructor(){super(...arguments),this.autoRotateAngle=335}},M([I(pt,{optional:!0})],wm.prototype,"autoRotate",2),M([I(wt)],wm.prototype,"autoRotateAngle",2)}}),Rm,yl,Lu=A({"packages/ag-charts-community/src/chart/axis/cartesianAxis.ts"(){"use strict";xt(),fe(),fD(),OK(),Rm=class l3 extends Em{static is(e){return e instanceof l3}get direction(){return this.position==="top"||this.position==="bottom"?"x":"y"}updateDirection(){switch(this.position){case"top":this.rotation=-90,this.label.mirrored=!0,this.label.parallel=!0;break;case"right":this.rotation=0,this.label.mirrored=!0,this.label.parallel=!1;break;case"bottom":this.rotation=-90,this.label.mirrored=!1,this.label.parallel=!0;break;case"left":this.rotation=0,this.label.mirrored=!1,this.label.parallel=!1;break}this.axisContext&&(this.axisContext.position=this.position,this.axisContext.direction=this.direction)}update(e){this.updateDirection(),super.update(e)}calculateLayout(e,i){return this.updateDirection(),super.calculateLayout(e,i)}createAxisContext(){return{...super.createAxisContext(),position:this.position}}createLabel(){return new wm}},M([I(nt,{optional:!0})],Rm.prototype,"thickness",2),M([I(nm)],Rm.prototype,"position",2),yl=Rm}}),jc,Gc,Tu=A({"packages/ag-charts-community/src/chart/axis/categoryAxis.ts"(){"use strict";nl(),Ct(),xt(),Lu(),jc=class c3 extends yl{constructor(e,i=new $o){super(e,i),this.groupPaddingInner=.1,this.categoryAnimatable=!0,this.includeInvisibleDomains=!0}static is(e){return e instanceof c3}domainOrderedToNormalizedDomain(e,i){let s=-1;for(const a of e){const n=i.indexOf(a);if(n===-1)s=1/0;else{if(n<=s)return!1;s=n}}return!0}calculateDomain(){let e;const i=new Set;let s=!0;for(const a of this.boundSeries){if(!this.includeInvisibleDomains&&!a.isEnabled())continue;const n=a.getDomain(this.direction);i.has(n)||(i.add(n),e==null?e=this.normaliseDataDomain(n).domain:(s&&(s=this.domainOrderedToNormalizedDomain(n,e)),e=this.normaliseDataDomain([...e,...n]).domain))}e??(e=[]),this.setDomain(e),this.categoryAnimatable=s}update(){super.update(),this.categoryAnimatable||this.moduleCtx.animationManager.skip()}normaliseDataDomain(e){const i=[],s=new Set;for(const a of e){const n=a instanceof Date?a.getTime():a;s.has(n)||(s.add(n),i.push(a))}return{domain:i,clipped:!1}}updateScale(e){let{paddingInner:i,paddingOuter:s}=this;if(!Vt(i)||!Vt(s)){const a=this.reduceBandScalePadding();i??(i=a.inner),s??(s=a.outer)}this.scale.paddingInner=i??0,this.scale.paddingOuter=s??0,super.updateScale(e)}reduceBandScalePadding(){return this.boundSeries.reduce((e,i)=>{const s=i.getBandScalePadding?.();return s&&(e.inner>s.inner&&(e.inner=s.inner),e.outer<s.outer&&(e.outer=s.outer)),e},{inner:1/0,outer:-1/0})}},jc.className="CategoryAxis",jc.type="category",M([I(Ft)],jc.prototype,"groupPaddingInner",2),M([I(Ft,{optional:!0})],jc.prototype,"paddingInner",2),M([I(Ft,{optional:!0})],jc.prototype,"paddingOuter",2),Gc=jc}}),qp,yD,pn,so=A({"packages/ag-charts-community/src/module/module.ts"(){"use strict";qp=class{constructor(){this.destroyFns=[]}destroy(){for(const t of this.destroyFns)t()}},yD=class{constructor(){this.modules=[],this.dependencies=new Map,this.modulesByOptionKey=new Map}register(...t){for(const e of t){this.registerDependencies(e);const i=this.modules.find(s=>e.type===s.type&&("optionsKey"in e&&"optionsKey"in s?e.optionsKey===s.optionsKey:!0)&&e.identifier===s.identifier);if(i){if(e.packageType==="enterprise"&&i.packageType==="community"){const s=this.modules.indexOf(i);this.modules.splice(s,1,e),"optionsKey"in e&&this.modulesByOptionKey.set(e.optionsKey,e)}}else this.modules.push(e),"optionsKey"in e&&this.modulesByOptionKey.set(e.optionsKey,e)}}hasEnterpriseModules(){return this.modules.some(t=>t.packageType==="enterprise")}*byType(...t){const e=new Set,i=this.modules.filter(n=>t.includes(n.type)),s=n=>{const o=this.dependencies.get(n);return o?.flatMap(s).concat(o)??[]},a=[];for(const n of i){const o="optionsKey"in n?n.optionsKey:n.contextKey;if(!e.has(o)){for(const r of s(o)){if(e.has(r))continue;const l=this.modulesByOptionKey.get(r);if(!l){a.push(r);continue}t.includes(l.type)&&(yield l,e.add(r))}yield n,e.add(o)}}if(a.length>0)throw new Error(`Could not resolve module dependencies: ${a}`)}registerDependencies(t){if(t.dependencies==null||t.dependencies.length===0)return;const e="optionsKey"in t?t.optionsKey:t.contextKey;this.dependencies.set(e,t.dependencies)}},pn=new yD}});function EK(){return new Promise(t=>{setTimeout(t,0)})}var mD,wK=A({"packages/ag-charts-community/src/util/async.ts"(){"use strict";mD=class{constructor(){this.queue=[]}await(t=50){return new Promise(e=>{const i=()=>{clearTimeout(a),e(!0)},a=setTimeout(()=>{const n=this.queue.indexOf(i);n<0||(this.queue.splice(n,1),e(!1))},t);this.queue.push(i)})}notify(){this.queue.splice(0).forEach(t=>t())}}}}),WE,RK=A({"packages/ag-charts-community/src/util/mutex.ts"(){"use strict";St(),WE=class{constructor(){this.available=!0,this.acquireQueue=[]}acquire(t){return new Promise(e=>{this.acquireQueue.push([t,e]),this.available&&this.dispatchNext().catch(i=>st.errorOnce(i))})}async acquireImmediately(t){return this.available?(await this.acquire(t),!0):!1}async waitForClearAcquireQueue(){return this.acquire(()=>Promise.resolve(void 0))}async dispatchNext(){this.available=!1;let[t,e]=this.acquireQueue.shift()??[];for(;t;){try{await t(),e?.()}catch(i){st.error("mutex callback error",i),e?.()}[t,e]=this.acquireQueue.shift()??[]}this.available=!0}}}}),xD,HE=A({"packages/ag-charts-community/src/util/observable.ts"(){"use strict";xD=class{constructor(){this.eventListeners=new Map}addEventListener(t,e){if(typeof e!="function")throw new Error("AG Charts - listener must be a Function");const i=this.eventListeners.get(t);i?i.add(e):this.eventListeners.set(t,new Set([e]))}removeEventListener(t,e){this.eventListeners.get(t)?.delete(e),this.eventListeners.size===0&&this.eventListeners.delete(t)}hasEventListener(t){return this.eventListeners.has(t)}clearEventListeners(){this.eventListeners.clear()}fireEvent(t){this.eventListeners.get(t.type)?.forEach(e=>e(t))}}}}),qo,bD=A({"packages/ag-charts-community/src/util/padding.ts"(){"use strict";Jt(),xt(),qo=class extends Mt{constructor(t=0,e=t,i=t,s=e){super(),this.top=t,this.right=e,this.bottom=i,this.left=s}},M([I(nt)],qo.prototype,"top",2),M([I(nt)],qo.prototype,"right",2),M([I(nt)],qo.prototype,"bottom",2),M([I(nt)],qo.prototype,"left",2)}});function _K(t){return YE((e,i)=>he().requestAnimationFrame(e),t)}function PK(t){return YE((e,i=0)=>{i===0?queueMicrotask(e):setTimeout(e,i)},t)}function YE(t,e){let i=0,s=!1,a,n;const o=()=>s,r=()=>{s=!1,n?.(),n=void 0,a=void 0,i>0&&t(l)},l=()=>{const c=i;i=0,s=!0;const h=e({count:c});if(!h){r();return}h.then(r,r)};return{schedule(c){i===0&&!o()&&t(l,c),i++},async await(){if(o())for(a==null&&(a=new Promise(c=>{n=c}));o();)await a}}}var KE=A({"packages/ag-charts-community/src/util/render.ts"(){"use strict";Nt()}}),SD,XE=A({"packages/ag-charts-community/src/util/eventEmitter.ts"(){"use strict";St(),SD=class{constructor(){this.events=new Map}on(t,e){return this.events.has(t)||this.events.set(t,new Set),this.events.get(t)?.add(e),()=>this.off(t,e)}off(t,e){const i=this.events.get(t);i&&(i.delete(e),i.size===0&&this.events.delete(t))}emit(t,e){for(const i of this.events.get(t)??[]){const s=i(e);s&&s.catch(a=>st.error(a))}}clear(t){t?this.events.delete(t):this.events.clear()}}}}),_m,vD,ZE,Jp=A({"packages/ag-charts-community/src/chart/layout/layoutManager.ts"(){"use strict";kt(),XE(),St(),_m=(t=>(t[t.Caption=0]="Caption",t[t.Legend=1]="Legend",t[t.ToolbarLeft=2]="ToolbarLeft",t[t.ToolbarBottom=3]="ToolbarBottom",t[t.Navigator=4]="Navigator",t[t.Overlay=5]="Overlay",t))(_m||{}),vD=class{constructor(){this.events=new SD,this.elements=new Map}addListener(t,e){return this.events.on(t,e)}registerElement(t,e){return this.elements.has(t)?this.elements.get(t).add(e):this.elements.set(t,new Set([e])),()=>this.elements.get(t)?.delete(e)}createContext(t,e){const i=new ZE(t,e);for(const s of Object.values(_m))typeof s=="number"&&this.elements.get(s)?.forEach(a=>{a(i)?.catch(n=>st.error(n))});return i}emitLayoutComplete(t,e){const i="layout:complete",{width:s,height:a}=t;this.events.emit(i,{type:i,axes:e.axes??[],chart:{width:s,height:a},clipSeries:e.clipSeries??!1,series:e.series})}},ZE=class{constructor(t,e){this.width=t,this.height=e,this.layoutBox=new lt(0,0,t,e)}}}}),tg,BK=A({"packages/ag-charts-community/src/chart/chartCaptions.ts"(){"use strict";ca(),xt(),dl(),Jp(),tg=class{constructor(){this.title=new ee,this.subtitle=new ee,this.footnote=new ee}positionCaptions(t){const{title:e,subtitle:i,footnote:s}=this,a=t.layoutBox.height/10;if(e.enabled){const{spacing:n=i.enabled?ee.SMALL_PADDING:ee.LARGE_PADDING}=e;this.positionCaption("top",e,t.layoutBox,a),this.shrinkLayoutByCaption("top",e,t.layoutBox,n)}i.enabled&&(this.positionCaption("top",i,t.layoutBox,a),this.shrinkLayoutByCaption("top",i,t.layoutBox,i.spacing)),s.enabled&&(this.positionCaption("bottom",s,t.layoutBox,a),this.shrinkLayoutByCaption("bottom",s,t.layoutBox,s.spacing))}positionAbsoluteCaptions(t){const{title:e,subtitle:i,footnote:s}=this,{rect:a}=t.series;for(const n of[e,i,s])if(n.layoutStyle==="overlay"){if(n.textAlign==="left")n.node.x=a.x+n.padding;else if(n.textAlign==="right"){const o=n.node.getBBox();n.node.x=a.x+a.width-o.width-n.padding}}}computeX(t,e){return t==="left"?e.x:t==="right"?e.x+e.width:e.x+e.width/2}positionCaption(t,e,i,s){const a=Math.max(ue.getLineHeight(e.fontSize),s);e.node.x=this.computeX(e.textAlign,i)+e.padding,e.node.y=i.y+(t==="top"?0:i.height)+e.padding,e.node.textBaseline=t,e.computeTextWrap(i.width,a)}shrinkLayoutByCaption(t,e,i,s=0){if(e.layoutStyle==="block"){const a=e.node.getBBox();i.shrink(Math.ceil(t==="top"?a.y-i.y+a.height+s:i.y+i.height-a.y+s),t)}}},M([I(ct)],tg.prototype,"title",2),M([I(ct)],tg.prototype,"subtitle",2),M([I(ct)],tg.prototype,"footnote",2)}}),$E,QE,zK=A({"packages/ag-charts-community/src/api/preset/chartTypeOriginator.ts"(){"use strict";Ue(),St(),Ct(),$E=["candlestick","hollow-candlestick","ohlc","line","step-line","hlc","high-low"],QE=class{constructor(t){this.chartService=t,this.mementoOriginatorKey="chartType"}createMemento(){let t=this.chartService.publicApi?.getOptions()?.chartType;return t==null&&(t="candlestick"),t}guardMemento(t){return t==null||Rs(t)&&JM($E,t)}restoreMemento(t,e,i){if(i==null)return;const s={chartType:i};this.chartService.publicApi?.updateDelta(s).catch(a=>st.error("error restoring state",a))}}}}),gn,ao=A({"packages/ag-charts-community/src/util/listeners.ts"(){"use strict";St(),gn=class{constructor(){this.registeredListeners=new Map}addListener(t,e){const i={symbol:Symbol(t),handler:e};return this.registeredListeners.has(t)?this.registeredListeners.get(t).push(i):this.registeredListeners.set(t,[i]),()=>this.removeListener(i.symbol)}removeListener(t){for(const[e,i]of this.registeredListeners.entries()){const s=i.findIndex(a=>a.symbol===t);if(s>=0){i.splice(s,1),i.length===0&&this.registeredListeners.delete(e);break}}}dispatch(t,...e){for(const i of this.getListenersByType(t))try{i.handler(...e)}catch(s){st.errorOnce(s)}}dispatchWrapHandlers(t,e,...i){for(const s of this.getListenersByType(t))try{e(s.handler,...i)}catch(a){st.errorOnce(a)}}getListenersByType(t){return this.registeredListeners.get(t)??[]}destroy(){this.registeredListeners.clear()}}}}),fn,no=A({"packages/ag-charts-community/src/util/baseManager.ts"(){"use strict";ao(),fn=class{constructor(){this.listeners=new gn,this.destroyFns=[]}addListener(t,e){return this.listeners.addListener(t,e)}destroy(){this.listeners.destroy(),this.destroyFns.forEach(t=>t())}}}}),Pm,MD,DD=A({"packages/ag-charts-community/src/chart/interaction/interactionStateListener.ts"(){"use strict";no(),Pm=(t=>(t[t.Default=32]="Default",t[t.ZoomDrag=16]="ZoomDrag",t[t.Annotations=8]="Annotations",t[t.ContextMenu=4]="ContextMenu",t[t.Animation=2]="Animation",t[t.AnnotationsSelected=1]="AnnotationsSelected",t[t.All=63]="All",t))(Pm||{}),MD=class extends fn{addListener(t,e,i=32){return super.addListener(t,s=>{this.getState()&i&&e(s)})}}}}),AD,qE=A({"packages/ag-charts-community/src/util/destroy.ts"(){"use strict";AD=class{constructor(){this.destroyFns=[]}destroy(){this.destroyFns.forEach(t=>t()),this.destroyFns.length=0}setFns(t){this.destroy(),this.destroyFns=t}push(...t){this.destroyFns.push(...t)}}}}),Vc,eg=A({"packages/ag-charts-community/src/version.ts"(){"use strict";Vc="11.0.0"}}),ID,JE,FK=A({"packages/ag-charts-community/src/api/state/historyManager.ts"(){"use strict";DD(),He(),qE(),eg(),ID=Symbol("previous-memento-not-found"),JE=class{constructor(t){this.history=[],this.historyIndex=-1,this.originators=new Map,this.clearState=new Map,this.maxHistoryLength=100,this.debug=te.create(!0,"history"),this.destroyFns=new AD,this.destroyFns.setFns([t.addListener("undo",this.undo.bind(this),63),t.addListener("redo",this.redo.bind(this),63)])}destroy(){this.destroyFns.destroy()}addMementoOriginator(t){this.originators.set(t.mementoOriginatorKey,t),this.clearState.set(t.mementoOriginatorKey,t.createMemento()),this.debugEvent("History add originator:",t.mementoOriginatorKey)}clear(){this.debug("History clear:",Object.keys(this.originators)),this.history=[],this.historyIndex=-1;for(const[t,e]of this.originators.entries())this.clearState.set(t,e.createMemento())}record(t,...e){this.historyIndex<this.history.length-1&&(this.history=this.history.slice(0,this.historyIndex+1)),this.history.length>this.maxHistoryLength&&(this.history=this.history.slice(-this.maxHistoryLength));const i=new Map;for(const s of e){if(!this.originators.has(s.mementoOriginatorKey))throw new Error(`Originator [${s.mementoOriginatorKey}] has not been added to the HistoryManager.`);i.set(s.mementoOriginatorKey,s.createMemento())}this.history.push({label:t,mementos:i}),this.historyIndex=this.history.length-1,this.debugEvent(`History record: [${t}]`)}undo(){const t=this.history[this.historyIndex];if(t){for(const e of t.mementos.keys()){const i=this.findPreviousMemento(e);if(i===ID)throw new Error(`Could not find previous memento for [${e}].`);this.restoreMemento(e,i)}this.historyIndex-=1,this.debugEvent(`History undo: [${t.label}]`)}}redo(){const t=this.history[this.historyIndex+1];if(t){for(const[e,i]of t.mementos.entries())this.restoreMemento(e,i);this.historyIndex+=1,this.debugEvent(`History redo: [${t.label}]`)}}findPreviousMemento(t){for(let e=this.historyIndex-1;e>=0;e--)if(this.history[e].mementos.has(t))return this.history[e].mementos.get(t);return this.clearState.has(t)?this.clearState.get(t):ID}restoreMemento(t,e){this.originators.get(t)?.restoreMemento(Vc,Vc,e)}debugEvent(...t){this.debug(...t,this.history.map((e,i)=>i===this.historyIndex?`** ${e.label} **`:e.label))}}}}),kD,LD=A({"packages/ag-charts-community/src/api/state/memento.ts"(){"use strict";St(),Ct(),kD=class m2{constructor(e){this.version=e.split("-")[0]}save(...e){const i={version:this.version};for(const s of Object.values(e))i[s.mementoOriginatorKey]=this.encode(s,s.createMemento());return i}restore(e,...i){if(typeof e!="object"){st.warnOnce(`Could not restore data of type [${typeof e}], expecting an object, ignoring.`);return}if(e==null){st.warnOnce("Could not restore data of type [null], expecting an object, ignoring.");return}if(!("version"in e)||typeof e.version!="string"){st.warnOnce("Could not restore data, missing [version] string in object, ignoring.");return}for(const s of i){const a=this.decode(s,e[s.mementoOriginatorKey]);if(!s.guardMemento(a)){st.warnOnce(`Could not restore [${s.mementoOriginatorKey}] data, value was invalid, ignoring.`,a);return}s.restoreMemento(this.version,e.version,a)}}encode(e,i){try{return JSON.parse(JSON.stringify(i,m2.encodeTypes))}catch(s){throw new Error(`Failed to encode [${e.mementoOriginatorKey}] value [${s}].`,{cause:s})}}decode(e,i){if(i==null)return i;try{return JSON.parse(JSON.stringify(i),m2.decodeTypes)}catch(s){throw new Error(`Failed to decode [${e.mementoOriginatorKey}] value [${s}].`,{cause:s})}}static encodeTypes(e,i){return xp(this[e])?{__type:"date",value:this[e].toISOString()}:i}static decodeTypes(e,i){return ws(this[e])&&"__type"in this[e]&&this[e].__type==="date"?new Date(this[e].value):i}}}}),tw,jK=A({"packages/ag-charts-community/src/api/state/stateManager.ts"(){"use strict";Yt(),eg(),LD(),tw=class{constructor(){this.caretaker=new kD(Vc),this.state=new Map}setState(t,e){Mc(this.state.get(t.mementoOriginatorKey),e)||this.setStateAndRestore(t,e)}setStateAndRestore(t,e){this.state.set(t.mementoOriginatorKey,e),this.restoreState(t)}restoreState(t){const{caretaker:e,state:i}=this;if(!i.has(t.mementoOriginatorKey))return;const s=i.get(t.mementoOriginatorKey);e.restore({version:e.version,[t.mementoOriginatorKey]:s},t)}}}}),ew,GK=A({"packages/ag-charts-community/src/styles.css"(){ew=`.ag-charts-wrapper,.ag-charts-wrapper:after,.ag-charts-wrapper:before,.ag-charts-wrapper *,.ag-charts-wrapper *:after,.ag-charts-wrapper *:before{box-sizing:border-box}.ag-charts-wrapper{position:relative;user-select:none}.ag-charts-tab-guard{width:0%;height:0%;position:absolute;pointer-events:none}.ag-charts-canvas-center{width:100%;height:100%;position:absolute;touch-action:auto;pointer-events:auto;display:flex;align-items:var(--ag-charts-align);justify-content:var(--ag-charts-justify)}.ag-charts-canvas-container,.ag-charts-canvas{position:relative;user-select:none}.ag-charts-canvas-container>*,.ag-charts-canvas>*{display:block;pointer-events:none}.ag-charts-series-area{outline:none;pointer-events:none;position:absolute}.ag-charts-swapchain{outline:none;opacity:0;pointer-events:auto;position:absolute;width:100%;height:100%}.ag-charts-swapchain:focus-visible{opacity:1}.ag-charts-canvas-proxy,.ag-charts-canvas-overlay{inset:0;pointer-events:none;position:absolute;user-select:none}.ag-charts-canvas-overlay>*{position:absolute;pointer-events:auto}.ag-charts-theme-default,.ag-charts-theme-default-dark{--ag-charts-active-color: var(--ag-active-color, #2196f3);--ag-charts-background-color: var(--ag-background-color, #fff);--ag-charts-foreground-color: var(--ag-foreground-color, #181d1f);--ag-charts-border-color: var(--ag-border-color, #dddddd);--ag-charts-hover-color: color-mix(in srgb, var(--ag-charts-background-color), var(--ag-charts-active-color) 12%);--ag-charts-font-family: "Verdana", sans-serif;--ag-charts-font-size: var(--ag-font-size, 14px);--ag-charts-size: var(--ag-grid-size, 8px);--ag-charts-border: var(--ag-charts-border-color) var(--ag-borders, solid 1px);--ag-charts-border-critical: var(--ag-borders-critical, solid 1px);--ag-charts-floating-shadow: 0 2px 8px 0 color-mix(in srgb, black 8%, transparent);--ag-charts-layer-ui-overlay: 5;--ag-charts-layer-tooltip: 4;--ag-charts-layer-toolbar: 3;--ag-charts-layer-crosshair: 2;--ag-charts-layer-annotations: 1;--ag-charts-align: center;--ag-charts-justify: center;--ag-charts-axis-label-background-color: #474747;--ag-charts-axis-label-color: #ffffff;--ag-charts-tooltip-background-color: #fafafb;--ag-charts-tooltip-text-color: var(--ag-charts-foreground-color);--ag-charts-tooltip-border: 1px solid var(--ag-charts-border-color);--ag-charts-content-padding: 8px 12px;--ag-charts-content-gap: 8px;--ag-charts-content-compact-padding: 3px 6px;--ag-charts-tooltip-border-radius: 4px;--ag-charts-toolbar-foreground-color: var(--ag-header-foreground-color, var(--ag-charts-foreground-color));--ag-charts-toolbar-background-color: var( --ag-header-background-color, color-mix(in srgb, var(--ag-charts-background-color), var(--ag-charts-foreground-color) 2%) );--ag-charts-toolbar-shadow: var(--ag-charts-floating-shadow);--ag-charts-toolbar-size: 34px;--ag-charts-toolbar-size-small: 24px;--ag-charts-toolbar-border: var(--ag-charts-border-critical, solid 1px) var(--ag-charts-border-color);--ag-charts-toolbar-hover-color: color-mix( in srgb, var(--ag-charts-background-color), var(--ag-charts-active-color) 12% );--ag-charts-toolbar-focus-color: var(--ag-charts-active-color);--ag-charts-toolbar-active-background-color: var(--ag-charts-toolbar-hover-color);--ag-charts-toolbar-active-color: var(--ag-charts-active-color);--ag-charts-toolbar-disabled-foreground-color: var( --ag-disabled-foreground-color, color-mix(in srgb, transparent, var(--ag-charts-toolbar-foreground-color) 50%) );--ag-charts-toolbar-disabled-background-color: color-mix( in srgb, var(--ag-charts-toolbar-background-color), var(--ag-charts-toolbar-foreground-color) 6% );--ag-charts-toolbar-gap: var(--ag-charts-size);--ag-charts-toolbar-font-size: 13px;--ag-charts-toolbar-font-size-small: 12px;--ag-charts-toolbar-button-padding: 6px;--ag-charts-toolbar-button-padding-small: 1px;--ag-charts-popover-background-color: var(--ag-charts-toolbar-background-color);--ag-charts-popover-foreground-color: var(--ag-charts-toolbar-foreground-color);--ag-charts-popover-border: var(--ag-charts-toolbar-border);--ag-charts-popover-border-radius: var(--ag-border-radius, 4px);--ag-charts-popover-active-color: var(--ag-charts-toolbar-active-color);--ag-charts-popover-hover-color: var(--ag-charts-toolbar-hover-color);--ag-charts-popover-active-background-color: var(--ag-charts-toolbar-active-background-color);--ag-charts-popover-font-size: 14px;--ag-charts-popover-font-size-small: var(--ag-charts-toolbar-font-size-small);--ag-charts-popover-shadow: var(--ag-charts-floating-shadow);--ag-charts-dialog-input-group-label-color: color-mix(in srgb, transparent, var(--ag-charts-foreground-color) 55%);--ag-charts-dialog-tab-color--inactive: color-mix(in srgb, transparent, var(--ag-charts-foreground-color) 55%);--ag-charts-button-radius: var(--ag-border-radius, 4px);--ag-charts-focus-border-color: var(--ag-input-focus-border-color, var(--ag-charts-active-color));--ag-charts-focus-border: solid 1px var(--ag-charts-focus-border-color);--ag-charts-focus-border-shadow: var( --ag-input-focus-box-shadow, 0 0 0 3px color-mix(in srgb, transparent, var(--ag-input-focus-border-color, var(--ag-charts-active-color)) 20%) );--ag-charts-focus-box-shadow: var(--box-shadow), 0 0 0 2px #fff8, var(--ag-charts-focus-border-shadow);--ag-charts-icon-font-family: "agChartsDefault";--ag-charts-icon-font-weight: normal;--ag-charts-icon-font-color: color-mix(in srgb, transparent, var(--ag-charts-foreground-color), 90%);--ag-charts-icon-size: 20px;--ag-charts-input-background-color: var(--ag-charts-background-color);--ag-charts-input-background-color--hover: var(--ag-charts-hover-color);--ag-charts-input-background-color--active: var(--ag-charts-hover-color);--ag-charts-input-border-color: var(--ag-charts-border-color);--ag-charts-input-border-color--active: var(--ag-charts-active-color);--ag-charts-input-border-radius: var(--ag-border-radius, 4px);--ag-charts-input-color--active: var(--ag-charts-active-color);--ag-charts-input-focus-outline: var(--ag-charts-focus-border);--ag-charts-input-focus-box-shadow: var(--ag-charts-focus-border-shadow);--ag-charts-input-font-family: var(--ag-charts-font-family);--ag-charts-input-font-size: var(--ag-charts-font-size);--ag-charts-input-padding: 8px;--ag-charts-input-padding-large: 10px;--ag-charts-input-placeholder-color: #888888;--ag-charts-input-spacing: 8px;--ag-charts-input-transition-duration: .25s;--ag-charts-input-transition-duration--fast: .1s;--ag-charts-input-transition-timing-function: ease-out;--ag-charts-input-checkbox-background-color: #babbbc;--ag-charts-input-checkbox-background-color--checked: var(--ag-charts-active-color)}.ag-charts-theme-default-dark{--ag-charts-background-color: var(--ag-background-color, color-mix(in srgb, #fff, #182230 97%));--ag-charts-foreground-color: var(--ag-foreground-color, #fff);--ag-charts-border-color: var(--ag-border-color, rgba(255, 255, 255, .16));--ag-charts-hover-color: color-mix(in srgb, var(--ag-charts-background-color), var(--ag-charts-active-color) 18%);--ag-charts-floating-shadow: 0 2px 12px 0 color-mix(in srgb, black 33.3%, transparent);--ag-charts-axis-label-background-color: #9caebb;--ag-charts-axis-label-color: #000000;--ag-charts-tooltip-background-color: #28313e;--ag-charts-tooltip-border: 1px solid #474e59;--ag-charts-toolbar-background-color: var(--ag-header-background-color, color-mix(in srgb, #fff, #182230 93%));--ag-charts-toolbar-hover-color: color-mix( in srgb, var(--ag-charts-background-color), var(--ag-charts-active-color) 18% );--ag-charts-dialog-input-group-label-text-color: #ffffff;--ag-charts-focus-border-shadow: var( --ag-input-focus-box-shadow, 0 0 0 3px color-mix(in srgb, transparent, var(--ag-input-focus-border-color, var(--ag-charts-active-color)) 20%) );--ag-charts-input-placeholder-color: #aaaaaa}.ag-charts-icon{display:block;width:var(--ag-charts-icon-size);height:var(--ag-charts-icon-size);speak:none;speak:never;mask:var(--icon) center / contain no-repeat;background-color:currentColor;transition:background-color .25s ease-in-out}.ag-charts-icon-align-center{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBmaWxsPSIjMDAwIiBkPSJNNyAxMGg2djFIN3pNNCA3aDEydjFINHptMSA2aDEwdjFINXoiLz48L3N2Zz4=)}.ag-charts-icon-align-left{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBmaWxsPSIjMDAwIiBkPSJNNCAxMGg2djFINHptMC0zaDEydjFINHptMCA2aDEwdjFINHoiLz48L3N2Zz4=)}.ag-charts-icon-align-right{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBmaWxsPSIjMDAwIiBkPSJNMTAgMTBoNnYxaC02ek00IDdoMTJ2MUg0em0yIDZoMTB2MUg2eiIvPjwvc3ZnPg==)}.ag-charts-icon-arrow-drawing{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTE1LjI5MyA0LjVIMTIuNXYtMUgxN3Y0aC0xVjUuMjA3bC05LjY0NiA5LjY0Ny0uNzA4LS43MDh6IiBmaWxsPSIjMDAwIi8+PHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik03IDE2YTIuNSAyLjUgMCAxIDEtNSAwIDIuNSAyLjUgMCAwIDEgNSAwbS0yLjUgMS41YTEuNSAxLjUgMCAxIDAgMC0zIDEuNSAxLjUgMCAwIDAgMCAzIiBmaWxsPSIjMDAwIi8+PC9zdmc+)}.ag-charts-icon-arrow-down-drawing{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik02IDhMMS41IDhMMTAgMThMMTguNSA4TDE0IDhMMTQgM0w2IDNMNiA4Wk03IDRMNyA5SDMuNjYyNDRMMTAgMTYuNDU2TDE2LjMzNzYgOUwxMyA5TDEzIDRMNyA0WiIgZmlsbD0iYmxhY2siLz4KPC9zdmc+Cg==)}.ag-charts-icon-arrow-up-drawing{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik0xNCAxMkgxOC41TDEwIDJMMS41IDEySDZMNi4wMDAwMiAxN0gxNFYxMlpNMTMgMTZWMTFIMTYuMzM3NkwxMCAzLjU0NDA1TDMuNjYyNDQgMTFIN0w3LjAwMDAyIDE2SDEzWiIgZmlsbD0iYmxhY2siLz4KPC9zdmc+Cg==)}.ag-charts-icon-callout-annotation{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzAwMCIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNMyA0LjVBMS41IDEuNSAwIDAgMSA0LjUgM2gxMUExLjUgMS41IDAgMCAxIDE3IDQuNXY4YTEuNSAxLjUgMCAwIDEtMS41IDEuNWgtNC41MTRhMjYgMjYgMCAwIDAtMi4wMTcgMS41NGwtLjMxNC4yNmMtLjU1LjQ1Ny0xLjExNS45MjYtMS43NiAxLjQtLjY2OS40OTEtMS41NjItLjAxMi0xLjU2Mi0uOFYxNEg0LjVBMS41IDEuNSAwIDAgMSAzIDEyLjV6TTQuNSA0YS41LjUgMCAwIDAtLjUuNXY4YS41LjUgMCAwIDAgLjUuNWgxLjgzM3YzLjM3MmEzNiAzNiAwIDAgMCAxLjY3OC0xLjMzOGwuMzItLjI2NWEyNiAyNiAwIDAgMSAyLjIyNS0xLjY4NWwuMTI2LS4wODRIMTUuNWEuNS41IDAgMCAwIC41LS41di04YS41LjUgMCAwIDAtLjUtLjV6IiBjbGlwLXJ1bGU9ImV2ZW5vZGQiLz48L3N2Zz4=)}.ag-charts-icon-candlestick-series{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzEzMTcyMiIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNNyAxdjNoMnYxMkg3djNINnYtM0g0VjRoMlYxek01IDVoM3YxMEg1ek0xMSAxNFY2aDJWMy4yNWgxVjZoMnY4aC0ydjIuNzVoLTFWMTR6bTEtN2gzdjZoLTN6IiBjbGlwLXJ1bGU9ImV2ZW5vZGQiLz48L3N2Zz4=)}.ag-charts-icon-close{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBkPSJtNSA1IDEwIDEwTTUgMTUgMTUgNSIgc3Ryb2tlPSIjMDAwIi8+PC9zdmc+)}.ag-charts-icon-comment-annotation{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzAwMCIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNNy41MTMgMy45OTVhNi41IDYuNSAwIDAgMSA2LjA5OCAxMS40MWMtLjU4OC4zOTMtMS4yMTcuNTM2LTEuODI5LjU4NWExMyAxMyAwIDAgMS0xLjI3LjAxN0EyNyAyNyAwIDAgMCAxMCAxNkg0LjVhLjUuNSAwIDAgMS0uNS0uNVYxMHEwLS4yNDctLjAwNy0uNTEzYy0uMDA4LS40MTYtLjAxNi0uODU3LjAxNy0xLjI2OS4wNS0uNjEyLjE5Mi0xLjI0LjU4NS0xLjgzYTYuNSA2LjUgMCAwIDEgMi45MTgtMi4zOTNtMy41Ni42MWE1LjUgNS41IDAgMCAwLTUuNjQ2IDIuMzRjLS4yNjYuMzk3LS4zNzkuODQyLS40MiAxLjM1NC0uMDMuMzYtLjAyMi43MTgtLjAxNSAxLjEwOFE1IDkuNjg5IDUgMTB2NWg1cS4zMTEuMDAxLjU5My4wMDhjLjM5LjAwNy43NDcuMDE1IDEuMTA4LS4wMTUuNTEyLS4wNDEuOTU3LS4xNTQgMS4zNTUtLjQyYTUuNSA1LjUgMCAwIDAtMS45ODMtOS45NjciIGNsaXAtcnVsZT0iZXZlbm9kZCIvPjwvc3ZnPg==)}.ag-charts-icon-crosshair-add-line{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzAwMCIgZD0iTTEwIDUuNWEuNS41IDAgMCAxIC41LjV2My41aDMuODc1YS41LjUgMCAwIDEgMCAxSDEwLjV2NC4yNWEuNS41IDAgMSAxLTEgMFYxMC41SDUuNjI1YS41LjUgMCAxIDEgMC0xSDkuNVY2YS41LjUgMCAwIDEgLjUtLjUiLz48L3N2Zz4=)}.ag-charts-icon-date-range-drawing{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBkPSJNMiAyaDF2MTZIMnptMTUgMGgxdjE2aC0xeiIgZmlsbD0iIzE4MUQxRiIvPjxwYXRoIGQ9Ik0xMy4xNTcgMTFINXYtMWg3Ljc5M0wxMSA4LjIwN2wuNzA3LS43MDcgMy4xODIgMy4xODItMy4xODIgMy4xODItLjcwNy0uNzA3eiIgZmlsbD0iIzAwMCIvPjwvc3ZnPg==)}.ag-charts-icon-date-price-range-drawing{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBkPSJNMyAySDJ2MTZoMXptMy41MDcgNC44OUw4LjUgNC44OTVWMTBINXYxaDMuNXY3aDF2LTdoNS4wODhsLTEuOTU3IDEuOTU3LjcwNy43MDcgMy4xODItMy4xODJMMTMuMzM4IDcuM2wtLjcwNy43MDdMMTQuNjI0IDEwSDkuNVY0LjkzMmwxLjk1NyAxLjk1Ny43MDctLjcwN0w4Ljk4MiAzIDUuOCA2LjE4MnoiIGZpbGw9IiMxODFEMUYiLz48L3N2Zz4=)}.ag-charts-icon-delete{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzEzMTcyMiIgZD0iTTguNDk2IDguOTk2QS41LjUgMCAwIDEgOSA5LjQ5MnY0YS41LjUgMCAxIDEtMSAuMDA4di00YS41LjUgMCAwIDEgLjQ5Ni0uNTA0TTEyIDkuNWEuNS41IDAgMCAwLTEgMHY0YS41LjUgMCAwIDAgMSAweiIvPjxwYXRoIGZpbGw9IiMxMzE3MjIiIGZpbGwtcnVsZT0iZXZlbm9kZCIgZD0iTTYgNVYzLjVBMi41IDIuNSAwIDAgMSA4LjUgMWgzQTIuNSAyLjUgMCAwIDEgMTQgMy41VjVoMi44MzNhLjUuNSAwIDAgMSAwIDFIMTV2MTAuMjVjMCAuNDE1LS4wNjYuODYzLS4zIDEuMjIxLS4yNTcuMzk0LS42NzIuNjEyLTEuMi42MTJoLTdjLS41MjggMC0uOTQzLS4yMTgtMS4yLS42MTItLjIzNC0uMzU4LS4zLS44MDYtLjMtMS4yMjFWNkgzLjMzM2EuNS41IDAgMCAxIDAtMXptMS0xLjVBMS41IDEuNSAwIDAgMSA4LjUgMmgzQTEuNSAxLjUgMCAwIDEgMTMgMy41VjVIN3pNNiAxNi4yNVY2aDh2MTAuMjVjMCAuMzM1LS4wNTkuNTU0LS4xMzguNjc1LS4wNTUuMDg1LS4xNC4xNTgtLjM2Mi4xNThoLTdjLS4yMjIgMC0uMzA3LS4wNzMtLjM2Mi0uMTU4LS4wOC0uMTIxLS4xMzgtLjM0LS4xMzgtLjY3NSIgY2xpcC1ydWxlPSJldmVub2RkIi8+PC9zdmc+)}.ag-charts-icon-disjoint-channel,.ag-charts-icon-disjoint-channel-drawing{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzEzMTcyMiIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNMTkuMDI4IDE3LjQ2YTIuMjUgMi4yNSAwIDAgMC00LjA5Mi0xLjg1bC05LjUxMS0yLjM3OGEyLjI1IDIuMjUgMCAxIDAtLjIyNS45NzRsOS40NzUgMi4zNjlhMi4yNTEgMi4yNTEgMCAwIDAgNC4zNTMuODg2bS0xLjY2Mi0xLjk2NWExLjI1IDEuMjUgMCAxIDEtLjg4NSAyLjMzOCAxLjI1IDEuMjUgMCAwIDEgLjg4NS0yLjMzOE00LjM0MyAxMy42NjlhMS4yNSAxLjI1IDAgMSAwLTIuMzM4LS44ODUgMS4yNSAxLjI1IDAgMCAwIDIuMzM4Ljg4NU0zLjk3IDguNzY5YTIuMjUgMi4yNSAwIDAgMCAxLjQ1NS0yLjExbDkuNTExLTIuMzc4YTIuMjUgMi4yNSAwIDEgMC0uMjYtLjk2NUw1LjIgNS42ODVhMi4yNSAyLjI1IDAgMSAwLTEuMjMgMy4wODRtLjM3My0yLjU0N2ExLjI1IDEuMjUgMCAxIDEtMi4zMzguODg1IDEuMjUgMS4yNSAwIDAgMSAyLjMzOC0uODg1bTEzLjc1LTMuNDM4YTEuMjUgMS4yNSAwIDEgMS0yLjMzOC44ODUgMS4yNSAxLjI1IDAgMCAxIDIuMzM4LS44ODUiIGNsaXAtcnVsZT0iZXZlbm9kZCIvPjwvc3ZnPg==)}.ag-charts-icon-drag-handle{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48Y2lyY2xlIGN4PSI1Ljc1IiBjeT0iNy43NSIgcj0iLjc1IiBmaWxsPSIjMDAwIiBmaWxsLW9wYWNpdHk9Ii41Ii8+PGNpcmNsZSBjeD0iOS43NSIgY3k9IjcuNzUiIHI9Ii43NSIgZmlsbD0iIzAwMCIgZmlsbC1vcGFjaXR5PSIuNSIvPjxjaXJjbGUgY3g9IjEzLjc1IiBjeT0iNy43NSIgcj0iLjc1IiBmaWxsPSIjMDAwIiBmaWxsLW9wYWNpdHk9Ii41Ii8+PGNpcmNsZSBjeD0iMTMuNzUiIGN5PSIxMS43NSIgcj0iLjc1IiBmaWxsPSIjMDAwIiBmaWxsLW9wYWNpdHk9Ii41Ii8+PGNpcmNsZSBjeD0iOS43NSIgY3k9IjExLjc1IiByPSIuNzUiIGZpbGw9IiMwMDAiIGZpbGwtb3BhY2l0eT0iLjUiLz48Y2lyY2xlIGN4PSI1Ljc1IiBjeT0iMTEuNzUiIHI9Ii43NSIgZmlsbD0iIzAwMCIgZmlsbC1vcGFjaXR5PSIuNSIvPjwvc3ZnPg==)}.ag-charts-icon-fibonacci-retracement-drawing{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBmaWxsPSIjMDAwIiBkPSJNMiA1aDEydjFIMnoiLz48Y2lyY2xlIGN4PSIxNS43NSIgY3k9IjUuNSIgcj0iMS43NSIgc3Ryb2tlPSIjMDAwIi8+PGNpcmNsZSBjeD0iNC4yNSIgY3k9IjE0LjUiIHI9IjEuNzUiIHN0cm9rZT0iIzAwMCIvPjxwYXRoIGZpbGw9IiMwMDAiIGQ9Ik0xOCAxNUg2di0xaDEyem0wLTQuNUgydi0xaDE2eiIvPjwvc3ZnPg==)}.ag-charts-icon-fill-color{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzAwMCIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJtOC4wNzEgNC4wNi0uOTI0LS45MjQuNzA3LS43MDcgNy4yODggNy4yODgtNC45NSA0Ljk1YTMuNSAzLjUgMCAwIDEtNC45NSAwbC0xLjQxNC0xLjQxNGEzLjUgMy41IDAgMCAxIDAtNC45NXptLjcwNy43MDhMNC41MzYgOS4wMWEyLjUgMi41IDAgMCAwIDAgMy41MzZMNS45NSAxMy45NmEyLjUgMi41IDAgMCAwIDMuNTM1IDBsNC4yNDMtNC4yNDN6bTYuOSA3LjIwMi0uMzQ1LjM2My0uMzQ0LS4zNjNhLjUuNSAwIDAgMSAuNjg4IDBtLS4zNDUgMS4wOGE4IDggMCAwIDAtLjI4LjMyMyA0LjMgNC4zIDAgMCAwLS40MDkuNTgyYy0uMTEzLjIwMS0uMTQ0LjMyNi0uMTQ0LjM3OGEuODMzLjgzMyAwIDAgMCAxLjY2NyAwYzAtLjA1Mi0uMDMxLS4xNzctLjE0NC0uMzc4YTQuMyA0LjMgMCAwIDAtLjQxLS41ODIgOCA4IDAgMCAwLS4yOC0uMzIybS0uMzQ0LTEuMDguMzQ0LjM2My4zNDQtLjM2My4wMDIuMDAyLjAwNC4wMDQuMDEzLjAxMmE2IDYgMCAwIDEgLjIwNi4yMDhjLjEzMS4xMzYuMzA4LjMyNy40ODUuNTQ1LjE3Ni4yMTUuMzYzLjQ2Ny41MDcuNzI0LjEzNy4yNDMuMjczLjU1My4yNzMuODY4YTEuODMzIDEuODMzIDAgMSAxLTMuNjY3IDBjMC0uMzE1LjEzNi0uNjI1LjI3My0uODY4LjE0NC0uMjU3LjMzLS41MDkuNTA3LS43MjRhOSA5IDAgMCAxIC42NDUtLjcwOGwuMDQ2LS4wNDUuMDEzLS4wMTIuMDA0LS4wMDR6IiBjbGlwLXJ1bGU9ImV2ZW5vZGQiLz48L3N2Zz4=)}.ag-charts-icon-hollow-candlestick-series{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzEzMTcyMiIgZmlsbC1vcGFjaXR5PSIuMTUiIGQ9Ik01IDVoM3YxMEg1eiIvPjxwYXRoIGZpbGw9IiMxMzE3MjIiIGZpbGwtcnVsZT0iZXZlbm9kZCIgZD0iTTcgMXYzaDJ2MTJIN3YzSDZ2LTNINFY0aDJWMXpNNSA1aDN2MTBINXptNyAyaDN2NmgtM3ptLTEgN1Y2aDJWMy4yNWgxVjZoMnY4aC0ydjIuNzVoLTFWMTR6IiBjbGlwLXJ1bGU9ImV2ZW5vZGQiLz48L3N2Zz4=)}.ag-charts-icon-horizontal-line,.ag-charts-icon-horizontal-line-drawing{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzEzMTcyMiIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNLjUgOS41aDcuMzA2YTIuMjUgMi4yNSAwIDAgMSA0LjM4OCAwSDE5LjV2MWgtNy4zMDZhMi4yNSAyLjI1IDAgMCAxLTQuMzg4IDBILjV6bTkuNSAxLjc1YTEuMjUgMS4yNSAwIDEgMCAwLTIuNSAxLjI1IDEuMjUgMCAwIDAgMCAyLjUiIGNsaXAtcnVsZT0iZXZlbm9kZCIvPjwvc3ZnPg==)}.ag-charts-icon-line-color{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzAwMCIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNMTQuMjQyIDIuNzIyYy0uNjEyIDAtMS4yLjI0My0xLjYzMi42NzVsLTEuMzQzIDEuMzQ0YS41LjUgMCAwIDAtLjExMi4xMTJMNC4wNSAxMS45NTljLS4yMDcuMjA3LS4zNi40Ni0uNDQ2Ljc0di4wMDFsLS42OSAyLjc2N3YuMDAyYS44Mi44MiAwIDAgMCAxLjAyMiAxLjAyMWguMDAybDIuNjM0LS44MjJjLjI4LS4wODUuNTM0LS4yMzcuNzQtLjQ0M2w3LjEwNy03LjEwOGEuNS41IDAgMCAwIC4xMTItLjExMmwxLjM0My0xLjM0M2EyLjMwOCAyLjMwOCAwIDAgMC0xLjYzMi0zLjk0TTE0LjEyMiA3bDEuMDQ0LTEuMDQ1YTEuMzA4IDEuMzA4IDAgMSAwLTEuODQ5LTEuODVMMTIuMjcxIDUuMTV6bS0yLjU1OC0xLjE0Mi02LjgwNyA2LjgwOWEuOC44IDAgMCAwLS4xOTYuMzI1bC0uNzUgMi40NjggMi40Ny0uNzQ5YS44LjggMCAwIDAgLjMyNS0uMTk0bDYuODA4LTYuODF6IiBjbGlwLXJ1bGU9ImV2ZW5vZGQiLz48L3N2Zz4=)}.ag-charts-icon-line-series{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzEzMTcyMiIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJtMTcuMzYyIDQuODczLTQuNTk0IDYuNjU0LTQuODUtMy4zMTctNC4yNTEgNi45NzctLjg1NC0uNTJMNy42MTIgNi43OWw0Ljg5OSAzLjM1IDQuMDI4LTUuODM2eiIgY2xpcC1ydWxlPSJldmVub2RkIi8+PC9zdmc+)}.ag-charts-icon-line-style-dashed{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBmaWxsPSIjMDAwIiBkPSJNMiA5aDR2MUgyem0xMiAwaDR2MWgtNHpNOCA5aDR2MUg4eiIvPjwvc3ZnPg==)}.ag-charts-icon-line-style-dotted{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48Y2lyY2xlIGN4PSIyLjUiIGN5PSI5LjUiIHI9Ii41IiBmaWxsPSIjMDAwIi8+PGNpcmNsZSBjeD0iNC41IiBjeT0iOS41IiByPSIuNSIgZmlsbD0iIzAwMCIvPjxjaXJjbGUgY3g9IjYuNSIgY3k9IjkuNSIgcj0iLjUiIGZpbGw9IiMwMDAiLz48Y2lyY2xlIGN4PSI4LjUiIGN5PSI5LjUiIHI9Ii41IiBmaWxsPSIjMDAwIi8+PGNpcmNsZSBjeD0iMTAuNSIgY3k9IjkuNSIgcj0iLjUiIGZpbGw9IiMwMDAiLz48Y2lyY2xlIGN4PSIxMi41IiBjeT0iOS41IiByPSIuNSIgZmlsbD0iIzAwMCIvPjxjaXJjbGUgY3g9IjE0LjUiIGN5PSI5LjUiIHI9Ii41IiBmaWxsPSIjMDAwIi8+PGNpcmNsZSBjeD0iMTYuNSIgY3k9IjkuNSIgcj0iLjUiIGZpbGw9IiMwMDAiLz48L3N2Zz4=)}.ag-charts-icon-line-style-solid{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBmaWxsPSIjMDAwIiBkPSJNMiA5aDE2djFIMnoiLz48L3N2Zz4=)}.ag-charts-icon-line-with-markers-series{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzEzMTcyMiIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJtMTguMTk4IDQuODg4LTMuNTU2IDQuOTE4YTIuMjUgMi4yNSAwIDEgMS0zLjg2Ni43NWwtMS40MzItLjlhMi4yNCAyLjI0IDAgMCAxLTIuMDA5LjQzNWwtMy44MjggNi40MjgtLjg2LS41MTJMNi40NSA5LjYyM2EyLjI1IDIuMjUgMCAxIDEgMy41MS0uNzYxbDEuMzI5LjgzNWEyLjI0IDIuMjQgMCAwIDEgMi41NTctLjQ5N2wzLjU0Mi00Ljg5OHptLTQuOTYgNS4xNTNhMS4yNSAxLjI1IDAgMSAwLS42NCAyLjQxOSAxLjI1IDEuMjUgMCAwIDAgLjY0LTIuNDE5TTkuMSA4LjMyMXEuMDY2LS4xOTIuMDY3LS40MDRhMS4yNSAxLjI1IDAgMSAwLS4wNjcuNDA0IiBjbGlwLXJ1bGU9ImV2ZW5vZGQiLz48L3N2Zz4=)}.ag-charts-icon-lock,.ag-charts-icon-locked{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzAwMCIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNMTAuMjA3IDMuNzY0YTIuODk0IDIuODk0IDAgMCAwLTIuODk1IDIuODk0VjloNS43ODlWNi42NThhMi44OTQgMi44OTQgMCAwIDAtMi44OTUtMi44OTRNMTQuMSA5VjYuNjU4YTMuODk0IDMuODk0IDAgMSAwLTcuNzg5IDB2Mi4zNDlBMi41IDIuNSAwIDAgMCA0IDExLjV2M0EyLjUgMi41IDAgMCAwIDYuNSAxN2g4YTIuNSAyLjUgMCAwIDAgMi41LTIuNXYtM0EyLjUgMi41IDAgMCAwIDE0LjUgOXpNNi41IDEwQTEuNSAxLjUgMCAwIDAgNSAxMS41djNBMS41IDEuNSAwIDAgMCA2LjUgMTZoOGExLjUgMS41IDAgMCAwIDEuNS0xLjV2LTNhMS41IDEuNSAwIDAgMC0xLjUtMS41eiIgY2xpcC1ydWxlPSJldmVub2RkIi8+PC9zdmc+)}.ag-charts-icon-measurer-drawing{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0ibTQuNDYxIDEyLjcxIDEuNTMyLTEuNTMxIDEuNDE0IDEuNDE0LjcwNy0uNzA3TDYuNyAxMC40NzJsMS41MzItMS41MzMgMiAyIC43MDctLjcwNy0yLTIgNi4wMS02LjAxIDIuODMgMi44MjhMNS4wNSAxNy43NzggMi4yMjIgMTQuOTVsMS41MzItMS41MzIgMS40MTQgMS40MTQuNzA3LS43MDd6TS44MDggMTQuOTVsLjcwNy0uNzA3TDE0LjI0MyAxLjUxNWwuNzA3LS43MDcuNzA3LjcwNyAyLjgyOCAyLjgyOC43MDcuNzA3LS43MDcuNzA3TDUuNzU3IDE4LjQ4NWwtLjcwNy43MDctLjcwNy0uNzA3LTIuODI4LTIuODI4em0xMS4wNzgtNi44MzVMMTAuNDcgNi43bC43MDctLjcwNyAxLjQxNSAxLjQxNHptLjgyNC0zLjY1NCAxIDEgLjcwOC0uNzA3LTEtMXoiIGZpbGw9IiMxODFEMUYiLz48L3N2Zz4=)}.ag-charts-icon-note-annotation{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzAwMCIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNMyA0LjVBMS41IDEuNSAwIDAgMSA0LjUgM2gxMUExLjUgMS41IDAgMCAxIDE3IDQuNXY4YTEuNSAxLjUgMCAwIDEtMS41IDEuNWgtMy4yMWwtMS40NjkgMi41N2ExIDEgMCAwIDEtMS42ODIuMDg1TDcuMjQzIDE0SDQuNUExLjUgMS41IDAgMCAxIDMgMTIuNXpNNC41IDRhLjUuNSAwIDAgMC0uNS41djhhLjUuNSAwIDAgMCAuNS41aDMuMjU3bDIuMTk2IDMuMDc0TDExLjcxIDEzaDMuNzlhLjUuNSAwIDAgMCAuNS0uNXYtOGEuNS41IDAgMCAwLS41LS41eiIgY2xpcC1ydWxlPSJldmVub2RkIi8+PHBhdGggZmlsbD0iIzAwMCIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNNi41IDYuNUEuNS41IDAgMCAxIDcgNmg2YS41LjUgMCAwIDEgMCAxSDdhLjUuNSAwIDAgMS0uNS0uNU02LjUgOS41QS41LjUgMCAwIDEgNyA5aDZhLjUuNSAwIDAgMSAwIDFIN2EuNS41IDAgMCAxLS41LS41IiBjbGlwLXJ1bGU9ImV2ZW5vZGQiLz48L3N2Zz4=)}.ag-charts-icon-ohlc-series{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzEzMTcyMiIgZD0iTTEzIDExaC0zdi0xaDNWM2gxdjJoNHYxaC00djExaC0xek02IDE3di0yaDN2LTFINlY0SDV2MUgydjFoM3YxMXoiLz48L3N2Zz4=)}.ag-charts-icon-pan-end{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzAwMCIgZD0ibTYuNjQ2IDEzLjgxMy0uMzUzLjM1NC43MDcuNzA3LjM1NC0uMzU0ek0xMS4xNjYgMTBsLjM1NC4zNTQuMzU0LS4zNTQtLjM1NC0uMzU0ek03LjM1NSA1LjQ4IDcgNS4xMjZsLS43MDcuNzA3LjM1My4zNTR6bTAgOS4wNCA0LjE2Ni00LjE2Ni0uNzA3LS43MDgtNC4xNjcgNC4xNjd6bTQuMTY2LTQuODc0TDcuMzU0IDUuNDhsLS43MDguNzA3IDQuMTY3IDQuMTY3ek0xMy4wODMgNXYxMGgxVjV6Ii8+PC9zdmc+)}.ag-charts-icon-pan-left{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzAwMCIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNMTIuNzkgNS44MzMgOC42MjUgMTBsNC4xNjYgNC4xNjctLjcwNy43MDdMNy4yMSAxMGw0Ljg3My00Ljg3NHoiIGNsaXAtcnVsZT0iZXZlbm9kZCIvPjwvc3ZnPg==)}.ag-charts-icon-pan-right{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzAwMCIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNNy4yMSAxNC4xNjcgMTEuMzc2IDEwIDcuMjEgNS44MzNsLjcwNy0uNzA3TDEyLjc5IDEwbC00Ljg3MyA0Ljg3NHoiIGNsaXAtcnVsZT0iZXZlbm9kZCIvPjwvc3ZnPg==)}.ag-charts-icon-pan-start{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzAwMCIgZD0iTTYgNXYxMGgxVjV6TTkuNjI0IDEwbDQuMTY2LTQuMTY3LS43MDctLjcwN0w4LjIxIDEwbDQuODc0IDQuODc0LjcwNy0uNzA3eiIvPjwvc3ZnPg==)}.ag-charts-icon-parallel-channel,.ag-charts-icon-parallel-channel-drawing{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzEzMTcyMiIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNMTcuNzIgNS4zMzFBMi4yNSAyLjI1IDAgMSAwIDE0LjcwNSAzLjZsLTkuNDkgNC41NjJhMi4yNSAyLjI1IDAgMSAwIC4yMDkgMS4wMWw5LjY2Mi00LjY0NmEyLjI1IDIuMjUgMCAwIDAgMi42MzQuODA1bS4zNzMtMi41NDdhMS4yNSAxLjI1IDAgMSAxLTIuMzM4Ljg4NSAxLjI1IDEuMjUgMCAwIDEgMi4zMzgtLjg4NU00LjM0MyA4LjY3YTEuMjUgMS4yNSAwIDEgMS0yLjMzOC44ODUgMS4yNSAxLjI1IDAgMCAxIDIuMzM4LS44ODVNNS4zMDcgMTYuNzI4YTIuMjUgMi4yNSAwIDEgMS0uNTI1LS44NThsOS45MjMtNC43N2EyLjI1IDIuMjUgMCAxIDEgLjM4MS45MjZ6bS0uOTY0LjI3NGExLjI1IDEuMjUgMCAxIDEtMi4zMzguODg1IDEuMjUgMS4yNSAwIDAgMSAyLjMzOC0uODg1bTEzLjAyMy01LjEwNmExLjI1IDEuMjUgMCAxIDAtLjg4NS0yLjMzOSAxLjI1IDEuMjUgMCAwIDAgLjg4NSAyLjMzOSIgY2xpcC1ydWxlPSJldmVub2RkIi8+PC9zdmc+)}.ag-charts-icon-position-bottom{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBmaWxsPSIjMDAwIiBmaWxsLW9wYWNpdHk9Ii4yNSIgZD0iTTMgMTBoMTR2MUgzem0zLTNoOHYxSDZ6Ii8+PHBhdGggZmlsbD0iIzAwMCIgZD0iTTYgMTNoOHYxSDZ6Ii8+PC9zdmc+)}.ag-charts-icon-position-center{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBmaWxsPSIjMDAwIiBkPSJNMyAxMGgxNHYxSDN6Ii8+PHBhdGggZmlsbD0iIzAwMCIgZmlsbC1vcGFjaXR5PSIuMjUiIGQ9Ik02IDdoOHYxSDZ6bTAgNmg4djFINnoiLz48L3N2Zz4=)}.ag-charts-icon-position-top{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBmaWxsPSIjMDAwIiBmaWxsLW9wYWNpdHk9Ii4yNSIgZD0iTTMgMTBoMTR2MUgzeiIvPjxwYXRoIGZpbGw9IiMwMDAiIGQ9Ik02IDdoOHYxSDZ6Ii8+PHBhdGggZmlsbD0iIzAwMCIgZmlsbC1vcGFjaXR5PSIuMjUiIGQ9Ik02IDEzaDh2MUg2eiIvPjwvc3ZnPg==)}.ag-charts-icon-price-label-annotation{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzAwMCIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNNC41IDNBMS41IDEuNSAwIDAgMCAzIDQuNVYxM2ExLjUgMS41IDAgMCAwIDEuNSAxLjVoLjgzM3YuMDU3Yy4yNDItLjI5OS41OTctLjUwMyAxLS41NDhWMTMuNUg0LjVBLjUuNSAwIDAgMSA0IDEzVjQuNWEuNS41IDAgMCAxIC41LS41aDExYS41LjUgMCAwIDEgLjUuNXY4YS41LjUgMCAwIDEtLjUuNWgtNC44MThsLS4xMjYuMDg0YTI2IDI2IDAgMCAwLTIuMjI1IDEuNjg1bC0uMzIuMjY1LS4wNjguMDU2YTEuNSAxLjUgMCAwIDEtMi42MDkgMS4zNTRjLjAzMy43NjMuOTA1IDEuMjM4IDEuNTYuNzU2LjY0Ni0uNDc0IDEuMjEtLjk0MyAxLjc2MS0xLjRsLjMxMy0uMjZBMjYgMjYgMCAwIDEgMTAuOTg2IDE0SDE1LjVhMS41IDEuNSAwIDAgMCAxLjUtMS41di04QTEuNSAxLjUgMCAwIDAgMTUuNSAzeiIgY2xpcC1ydWxlPSJldmVub2RkIi8+PHBhdGggZmlsbD0iIzEzMTcyMiIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNOC43MTYgMTQuODE1YTIuMjUgMi4yNSAwIDEgMS00LjIxIDEuNTkzIDIuMjUgMi4yNSAwIDAgMSA0LjIxLTEuNTkzbS0xLjY2MiAxLjk2NmExLjI1IDEuMjUgMCAxIDAtLjg4NS0yLjMzOSAxLjI1IDEuMjUgMCAwIDAgLjg4NSAyLjMzOSIgY2xpcC1ydWxlPSJldmVub2RkIi8+PC9zdmc+)}.ag-charts-icon-price-range-drawing{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBkPSJNOS4wNDYgMTVWNS44NzdoLjk0MlYxNXoiIGZpbGw9IiMxODFEMUYiLz48cGF0aCBkPSJNOS4wNDYgMTVWNS44NzdoLjk0MlYxNXoiIGZpbGw9IiMxODFEMUYiLz48cGF0aCBkPSJNOS41IDYuMjI4IDcuMTY3IDguMzc2IDYuNSA3Ljc2MiA5LjUgNWwzIDIuNzYyLS42NjcuNjE0eiIgZmlsbD0iIzAwMCIvPjxwYXRoIGQ9Ik0yIDE4di0xaDE2djF6TTIgM1YyaDE2djF6IiBmaWxsPSIjMTgxRDFGIi8+PC9zdmc+)}.ag-charts-icon-reset{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzAwMCIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNMTIuMDQgNC40NDVhNS44MSA1LjgxIDAgMCAwLTcuMjU3IDIuNDUzLjUuNSAwIDAgMS0uODY1LS41MDJBNi44MSA2LjgxIDAgMSAxIDMgOS44MTNhLjUuNSAwIDAgMSAxIDAgNS44MSA1LjgxIDAgMSAwIDguMDQtNS4zNjgiIGNsaXAtcnVsZT0iZXZlbm9kZCIvPjxwYXRoIGZpbGw9IiMwMDAiIGZpbGwtcnVsZT0iZXZlbm9kZCIgZD0iTTQuMjg5IDMuMDAyYS41LjUgMCAwIDEgLjUuNXYyLjY1NWgyLjY1NWEuNS41IDAgMCAxIDAgMUg0LjI5YS41LjUgMCAwIDEtLjUtLjVWMy41MDJhLjUuNSAwIDAgMSAuNS0uNSIgY2xpcC1ydWxlPSJldmVub2RkIi8+PC9zdmc+)}.ag-charts-icon-settings{--icon: url(data:image/svg+xml;base64,PHN2ZyB2aWV3Qm94PSIwIDAgMjAgMjAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSIgc3R5bGU9ImZpbGwtcnVsZTpldmVub2RkIj48cGF0aCBkPSJNMTAgMTNhMyAzIDAgMSAwIDAtNiAzIDMgMCAwIDAgMCA2bTAtMWEyIDIgMCAxIDEtLjAwMS0zLjk5OUEyIDIgMCAwIDEgMTAgMTIiLz48cGF0aCBkPSJNMi4zMSAxNC4zNDVjLS44MTctMS40OTEuMDI3LTIuNDk5LjQ3NC0yLjg2NS41MzEtLjQzNC45NjktLjM2NS45NzItMS40OC0uMDAzLTEuMTE1LS40NDEtMS4wNDYtLjk3Mi0xLjQ4MS0uNDU0LS4zNzEtMS4zMTctMS40MDUtLjQzNC0yLjkzNmwuMDA1LS4wMDljLjg4NC0xLjUyIDIuMjA3LTEuMjkgMi43NTUtMS4wODMuNjQxLjI0My44MDEuNjU2IDEuNzY4LjEwMS45NjQtLjU2LjY4Ni0uOTA0Ljc5Ni0xLjU4Mi4wOTQtLjU3OC41NTktMS44NDMgMi4zMjYtMS44NDNoLjAxYzEuNzU5LjAwNSAyLjIyMiAxLjI2NiAyLjMxNiAxLjg0My4xMS42NzgtLjE2OCAxLjAyMi43OTYgMS41ODIuOTY3LjU1NSAxLjEyNy4xNDIgMS43NjgtLjEwMS41NDktLjIwOCAxLjg3Ni0uNDM4IDIuNzYgMS4wOTJzLjAyIDIuNTY1LS40MzQgMi45MzZjLS41MzEuNDM1LS45NjkuMzY2LS45NzIgMS40ODEuMDAzIDEuMTE1LjQ0MSAxLjA0Ni45NzIgMS40OC40NTQuMzcyIDEuMzE3IDEuNDA2LjQzNCAyLjkzN2wtLjAwNS4wMDljLS44ODQgMS41Mi0yLjIwNyAxLjI5LTIuNzU1IDEuMDgzLS42NDEtLjI0My0uODAxLS42NTYtMS43NjgtLjEwMS0uOTY0LjU2LS42ODYuOTA0LS43OTYgMS41ODEtLjA5NC41NzktLjU1OSAxLjg0NC0yLjMyNiAxLjg0NGgtLjAxYy0xLjc1OS0uMDA1LTIuMjIyLTEuMjY2LTIuMzE2LTEuODQ0LS4xMS0uNjc3LjE2OC0xLjAyMS0uNzk2LTEuNTgxLS45NjctLjU1NS0xLjEyNy0uMTQyLTEuNzY4LjEwMS0uNTQ5LjIwOC0xLjg3Ni40MzgtMi43Ni0xLjA5MmwtLjAyLS4wMzZ6TTkuOTg0IDIuMTYySDEwYzEuMzU1IDAgMS4zNDIgMS4wMzkgMS4zNTMgMS40MjUuMDA4LjMxMi4wNCAxLjE2IDEuMjU5IDEuODcybC4wMTUuMDA4YzEuMjI1LjcgMS45NzYuMzA0IDIuMjUxLjE1NS4zMzctLjE4MyAxLjIyNi0uNzExIDEuOTAyLjQ0NWwuMDA4LjAxNGMuNjc4IDEuMTczLS4yMjkgMS42ODItLjU1OCAxLjg4NC0uMjY2LjE2My0uOTg0LjYxNS0uOTkxIDIuMDI3di4wMTZjLjAwNyAxLjQxMi43MjUgMS44NjQuOTkxIDIuMDI3LjMyOC4yMDEgMS4yMjkuNzA3LjU2NiAxLjg3bC0uMDA4LjAxNGMtLjY3NyAxLjE3NC0xLjU3MS42NDMtMS45MS40NTktLjI3NS0uMTQ5LTEuMDI2LS41NDUtMi4yNTEuMTU0bC0uMDE1LjAwOWMtMS4yMTkuNzEyLTEuMjUxIDEuNTYtMS4yNTkgMS44NzItLjAxMS4zODYuMDAyIDEuNDI1LTEuMzUzIDEuNDI1cy0xLjM0Mi0xLjAzOS0xLjM1My0xLjQyNWMtLjAwOC0uMzEyLS4wNC0xLjE2LTEuMjU5LTEuODcybC0uMDE1LS4wMDljLTEuMjI1LS42OTktMS45NzYtLjMwMy0yLjI1MS0uMTU0LS4zMzYuMTgzLTEuMjE5LjcwNi0xLjg5NC0uNDMybC0uMDE2LS4wMjdjLS42NzgtMS4xNzQuMjI5LTEuNjgyLjU1OC0xLjg4NC4yNjYtLjE2My45ODQtLjYxNS45OTEtMi4wMjd2LS4wMTZjLS4wMDctMS40MTItLjcyNS0xLjg2NC0uOTkxLTIuMDI3LS4zMjgtLjIwMS0xLjIyOS0uNzA3LS41NjYtMS44N2wuMDA4LS4wMTRjLjY3Ny0xLjE3NCAxLjU3MS0uNjQzIDEuOTEtLjQ1OS4yNzUuMTQ5IDEuMDI2LjU0NSAyLjI1MS0uMTU1bC4wMTUtLjAwOGMxLjIxOS0uNzEyIDEuMjUxLTEuNTYgMS4yNTktMS44NzIuMDEtLjM4NC0uMDAyLTEuNDE3IDEuMzM3LTEuNDI1Ii8+PC9zdmc+)}.ag-charts-icon-step-line-series{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzE4MUQxRiIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNNiA0aDV2OGgzVjhoNXYxaC00djRoLTVWNUg3djEwSDJ2LTFoNHoiIGNsaXAtcnVsZT0iZXZlbm9kZCIvPjwvc3ZnPg==)}.ag-charts-icon-text-annotation{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik00IDRIMTZWN0gxNVY1SDEwLjVWMTVIMTRWMTZINlYxNUg5LjVWNUg1VjdINFY0WiIgZmlsbD0iYmxhY2siLz4KPC9zdmc+Cg==)}.ag-charts-icon-trend-line,.ag-charts-icon-trend-line-drawing{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzEzMTcyMiIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNNS4zMTQgMTAuOTM4YTIuMjUgMi4yNSAwIDEgMSAuMDEtMWg5LjM1MmEyLjI1IDIuMjUgMCAxIDEgLjAxIDF6bS0yLjE4OS43MjlhMS4yNSAxLjI1IDAgMSAwIDAtMi41IDEuMjUgMS4yNSAwIDAgMCAwIDIuNW0xMy43NSAwYTEuMjUgMS4yNSAwIDEgMCAwLTIuNSAxLjI1IDEuMjUgMCAwIDAgMCAyLjUiIGNsaXAtcnVsZT0iZXZlbm9kZCIvPjwvc3ZnPg==)}.ag-charts-icon-unlock,.ag-charts-icon-unlocked{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzAwMCIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNMTAuNjUxIDMuNWEyLjg5NCAyLjg5NCAwIDAgMC0yLjg5NCAyLjg5NFY5SDE0LjVhMi41IDIuNSAwIDAgMSAyLjUgMi41djNhMi41IDIuNSAwIDAgMS0yLjUgMi41aC04QTIuNSAyLjUgMCAwIDEgNCAxNC41di0zQTIuNSAyLjUgMCAwIDEgNi41IDloLjI1N1Y2LjM5NGEzLjg5NCAzLjg5NCAwIDEgMSA3Ljc4OSAwIC41LjUgMCAwIDEtMSAwQTIuODk0IDIuODk0IDAgMCAwIDEwLjY1IDMuNU02LjUgMTBBMS41IDEuNSAwIDAgMCA1IDExLjV2M0ExLjUgMS41IDAgMCAwIDYuNSAxNmg4YTEuNSAxLjUgMCAwIDAgMS41LTEuNXYtM2ExLjUgMS41IDAgMCAwLTEuNS0xLjV6IiBjbGlwLXJ1bGU9ImV2ZW5vZGQiLz48L3N2Zz4=)}.ag-charts-icon-vertical-line,.ag-charts-icon-vertical-line-drawing{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzEzMTcyMiIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNMTAuNSA3LjgwNmEyLjI1IDIuMjUgMCAwIDEgMCA0LjM4OFYxOS41aC0xdi03LjMwNmEyLjI1IDIuMjUgMCAwIDEgMC00LjM4OFYuNWgxem0tLjUuOTQ0YTEuMjUgMS4yNSAwIDEgMSAwIDIuNSAxLjI1IDEuMjUgMCAwIDEgMC0yLjUiIGNsaXAtcnVsZT0iZXZlbm9kZCIvPjwvc3ZnPg==)}.ag-charts-icon-zoom-in{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzAwMCIgZD0iTTEwIDUuNWEuNS41IDAgMCAxIC41LjV2My41aDMuODc1YS41LjUgMCAwIDEgMCAxSDEwLjV2NC4yNWEuNS41IDAgMSAxLTEgMFYxMC41SDUuNjI1YS41LjUgMCAxIDEgMC0xSDkuNVY2YS41LjUgMCAwIDEgLjUtLjUiLz48L3N2Zz4=)}.ag-charts-icon-zoom-out{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzAwMCIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNNS41IDEwYS41LjUgMCAwIDEgLjUtLjVoOGEuNS41IDAgMCAxIDAgMUg2YS41LjUgMCAwIDEtLjUtLjUiIGNsaXAtcnVsZT0iZXZlbm9kZCIvPjwvc3ZnPg==)}.ag-charts-icon-high-low-series{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzEzMTcyMiIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNNyA0aDJ2MTJINFY0aDNNNSA1aDN2MTBINXpNMTEgMTRWNmg1djhoLTVtMS03aDN2NmgtM3oiIGNsaXAtcnVsZT0iZXZlbm9kZCIvPjwvc3ZnPg==)}.ag-charts-icon-hlc-series{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzEzMTcyMiIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJtMTguMTYzIDEuODM3LTUuMzM0IDExLjYyMUw2Ljk1NyA4LjEybC00LjE5OSA5LjYyMi0uOTE2LS40IDQuNzU2LTEwLjlMMTIuNDkgMTEuOCAxNy4yNTQgMS40MnoiIGNsaXAtcnVsZT0iZXZlbm9kZCIvPjxwYXRoIGZpbGw9IiMwMDAiIGZpbGwtb3BhY2l0eT0iLjQiIGZpbGwtcnVsZT0iZXZlbm9kZCIgZD0iTTUuODI1IDIuNzA0LjU1IDEzLjc4NWwuOTAyLjQzIDQuNzI0LTkuOTE5IDYuMDM0IDUuMDI5IDMuMjU1LTguMTQtLjkyOC0uMzctMi43NDUgNi44NnptNy44NTIgMTQuNjM2IDUuNzgtMTMuMTM5LS45MTUtLjQwMi01LjIxOSAxMS44Ni02LjAwNS01LjUwNC0zLjI3OCA3LjY0OC45Mi4zOTQgMi43MjItNi4zNTJ6IiBjbGlwLXJ1bGU9ImV2ZW5vZGQiLz48L3N2Zz4=)}.ag-charts-icon-zoom-in-alt{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJub25lIiBzdHJva2U9ImN1cnJlbnRDb2xvciIgc3Ryb2tlLXdpZHRoPSIyIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIGNsYXNzPSJsdWNpZGUgbHVjaWRlLXpvb20taW4iPjxjaXJjbGUgY3g9IjExIiBjeT0iMTEiIHI9IjgiLz48bGluZSB4MT0iMjEiIHgyPSIxNi42NSIgeTE9IjIxIiB5Mj0iMTYuNjUiLz48bGluZSB4MT0iMTEiIHgyPSIxMSIgeTE9IjgiIHkyPSIxNCIvPjxsaW5lIHgxPSI4IiB4Mj0iMTQiIHkxPSIxMSIgeTI9IjExIi8+PC9zdmc+)}.ag-charts-icon-zoom-out-alt{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJub25lIiBzdHJva2U9ImN1cnJlbnRDb2xvciIgc3Ryb2tlLXdpZHRoPSIyIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIGNsYXNzPSJsdWNpZGUgbHVjaWRlLXpvb20tb3V0Ij48Y2lyY2xlIGN4PSIxMSIgY3k9IjExIiByPSI4Ii8+PGxpbmUgeDE9IjIxIiB4Mj0iMTYuNjUiIHkxPSIyMSIgeTI9IjE2LjY1Ii8+PGxpbmUgeDE9IjgiIHgyPSIxNCIgeTE9IjExIiB5Mj0iMTEiLz48L3N2Zz4=)}.ag-charts-input{--input-layer-active: 1;--input-layer-focus: 2;color:inherit;font-family:var(--ag-charts-input-font-family);font-size:var(--ag-charts-input-font-size);transition-duration:var(--ag-charts-input-transition-duration);transition-property:none;transition-timing-function:var(--ag-charts-input-transition-timing-function)}.ag-charts-input:focus-visible{outline:var(--ag-charts-input-focus-outline);box-shadow:var(--ag-charts-input-focus-box-shadow);z-index:var(--input-layer-focus)}.ag-charts-button{background:var(--ag-charts-input-background-color);border:1px solid var(--ag-charts-input-border-color);border-radius:var(--ag-charts-input-border-radius);cursor:pointer;padding:var(--ag-charts-input-padding);transition-property:background,border-color}.ag-charts-button:hover{background:var(--ag-charts-input-background-color--hover)}.ag-charts-button:has(.ag-charts-icon){padding:2px}.ag-charts-checkbox{appearance:none;background:var(--ag-charts-input-checkbox-background-color);border-radius:9px;cursor:pointer;height:18px;margin:0;transition-duration:var(--ag-charts-input-transition-duration--fast);transition-property:margin;width:29px}.ag-charts-checkbox:before{display:block;background:var(--ag-charts-input-background-color);border-radius:7px;content:" ";height:14px;margin:2px;transition-duration:var(--ag-charts-input-transition-duration--fast);transition-property:margin;transition-timing-function:var(--ag-charts-input-transition-easing);width:14px}.ag-charts-checkbox:checked{background:var(--ag-charts-input-checkbox-background-color--checked)}.ag-charts-checkbox:checked:before{margin-left:13px}.ag-charts-select{background:var(--ag-charts-input-background-color);border:1px solid var(--ag-charts-input-border-color);border-radius:var(--ag-charts-input-border-radius);padding:3px 2px 4px;font-size:inherit}.ag-charts-textarea{--line-height: 1.38;background:var(--ag-charts-input-background-color);border:1px solid var(--ag-charts-input-border-color);border-radius:var(--ag-charts-input-border-radius);line-height:var(--line-height);font-family:var(--ag-charts-input-font-family);font-size:var(--ag-charts-input-font-size);padding:var(--ag-charts-input-padding-large) var(--ag-charts-input-padding)}.ag-charts-textarea[placeholder]:empty:before{color:var(--ag-charts-input-placeholder);content:attr(placeholder)}.ag-charts-proxy-container{pointer-events:none;position:absolute}.ag-charts-proxy-elem{-webkit-appearance:none;appearance:none;background:none;border:none;color:#0000;overflow:hidden;pointer-events:auto;position:absolute}.ag-charts-proxy-elem::-moz-range-thumb,.ag-charts-proxy-elem::-moz-range-track{opacity:0}.ag-charts-proxy-elem::-webkit-slider-runnable-track,.ag-charts-proxy-elem::-webkit-slider-thumb{opacity:0}.ag-charts-proxy-elem:focus-visible{outline:var(--ag-charts-focus-border);box-shadow:var(--ag-charts-focus-border-shadow)}.ag-charts-focus-indicator{position:absolute;display:block;pointer-events:none;user-select:none;width:100%;height:100%}.ag-charts-focus-indicator>div{position:absolute;outline:var(--ag-charts-focus-border);outline-width:2px;box-shadow:var(--ag-charts-focus-border-shadow)}.ag-charts-focus-indicator>svg{width:100%;height:100%;fill:none;stroke:var(--ag-charts-focus-border-color);stroke-width:2px}.ag-charts-overlay{color:#181d1f;pointer-events:none}.ag-charts-overlay.ag-charts-dark-overlay{color:#fff}.ag-charts-overlay--loading{color:#8c8c8c}.ag-charts-overlay__loading-background{background:#fff;pointer-events:none}.ag-charts-overlay.ag-charts-dark-overlay .ag-charts-overlay__loading-background{background:#192232}.ag-charts-tooltip{position:fixed;inset:unset;margin:0;padding:0;overflow:visible;width:max-content;max-width:100%;font:12px Verdana,sans-serif;color:var(--ag-charts-tooltip-text-color);background:var(--ag-charts-tooltip-background-color);border:var(--ag-charts-tooltip-border);border-radius:var(--ag-charts-tooltip-border-radius);box-shadow:0 4px 8px #00000014}.ag-charts-tooltip--compact{--ag-charts-content-padding: var(--ag-charts-content-compact-padding)}.ag-charts-tooltip--arrow:before{--tooltip-arrow-size: 8px;content:"";position:absolute;top:100%;left:50%;margin:0 auto;transform:translate(-50%) translateY(calc(var(--tooltip-arrow-size) * -.5)) rotate(45deg);display:block;width:var(--tooltip-arrow-size);height:var(--tooltip-arrow-size);border:inherit;background:inherit;border-top:none;border-left:none;clip-path:polygon(0 100%,100% 0,100% 100%)}.ag-charts-tooltip--no-interaction{pointer-events:none;user-select:none}.ag-charts-tooltip--wrap-always{overflow-wrap:break-word;word-break:break-word;hyphens:none}.ag-charts-tooltip--wrap-hyphenate{overflow-wrap:break-word;word-break:break-word;hyphens:auto}.ag-charts-tooltip--wrap-on-space{overflow-wrap:normal;word-break:normal}.ag-charts-tooltip--wrap-never{white-space:nowrap}.ag-charts-tooltip-heading,.ag-charts-tooltip-title,.ag-charts-tooltip-label,.ag-charts-tooltip-value{overflow:hidden;text-overflow:ellipsis}.ag-charts-tooltip-content{display:grid;grid:auto-flow minmax(1em,auto) / 1fr;padding:var(--ag-charts-content-padding);gap:var(--ag-charts-content-gap)}.ag-charts-tooltip-content:has(.ag-charts-tooltip-symbol){grid:auto-flow minmax(1em,auto) / auto 1fr}.ag-charts-tooltip-heading{grid-column:1 / -1}.ag-charts-tooltip-symbol{grid-column:1 / 2;align-self:center}.ag-charts-tooltip-symbol svg{display:block}.ag-charts-tooltip-title{grid-column:-2 / -1}.ag-charts-tooltip-row{grid-column:1 / -1;display:flex;gap:16px;align-items:baseline;justify-content:space-between;overflow:hidden}.ag-charts-tooltip-row--inline{grid-column:-2 / -1}.ag-charts-tooltip-label{flex:1;min-width:0}.ag-charts-tooltip-value{min-width:0}.ag-charts-popover{position:absolute;border:var(--ag-charts-popover-border);border-radius:var(--ag-charts-popover-border-radius);background:var(--ag-charts-popover-background-color);color:var(--ag-charts-popover-foreground-color);font-family:var(--ag-charts-font-family);font-size:var(--ag-charts-popover-font-size);box-shadow:var(--ag-charts-popover-shadow);z-index:var(--ag-charts-layer-ui-overlay)}.ag-charts-menu{--item-padding: 6px 12px;--icon-color: var(--ag-charts-popover-foreground-color);display:grid;grid:auto-flow auto / 1fr;column-gap:12px;font-size:var(--ag-charts-popover-font-size-small)}.ag-charts-menu:has(.ag-charts-menu__icon,.ag-charts-menu__row--stroke-width-visible){grid:auto-flow auto / auto 1fr}.ag-charts-menu__row--stroke-width-visible:before{content:"";height:var(--strokeWidth);width:12px;background:var(--icon-color)}.ag-charts-menu__row--stroke-width-visible[aria-disabled=true]:before{filter:grayscale(1);opacity:.5}.ag-charts-menu__row{display:grid;grid-column:1 / -1;grid-template-columns:subgrid;align-items:center;padding:var(--item-padding)}.ag-charts-menu__row:not(.ag-charts-menu__row--active){cursor:pointer}.ag-charts-menu__row:first-child{border-top-left-radius:inherit;border-top-right-radius:inherit}.ag-charts-menu__row:last-child{border-bottom-left-radius:inherit;border-bottom-right-radius:inherit}.ag-charts-menu__row:focus{background:var(--ag-charts-popover-hover-color)}.ag-charts-menu__row:focus-visible{outline:var(--ag-charts-focus-border);box-shadow:var(--ag-charts-focus-border-shadow);z-index:calc(var(--ag-charts-layer-ui-overlay) + 1)}.ag-charts-menu__row--active{--icon-color: var(--ag-charts-popover-active-color);background:var(--ag-charts-popover-active-background-color);color:var(--ag-charts-popover-active-color)}.ag-charts-menu__label{grid-column:-1 / span 1}.ag-charts-toolbar{align-items:center;display:flex;flex-wrap:nowrap;position:absolute}.ag-charts-toolbar__button{align-items:center;background:var(--ag-charts-toolbar-background-color);border:var(--ag-charts-toolbar-border);color:var(--ag-charts-toolbar-foreground-color);cursor:pointer;display:flex;font:var(--ag-charts-toolbar-font-size) var(--ag-charts-font-family);justify-content:center;min-height:var(--ag-charts-toolbar-size);min-width:var(--ag-charts-toolbar-size);padding:var(--ag-charts-toolbar-button-padding);position:relative;transition:background-color .25s ease-in-out,border-color .25s ease-in-out,color .25s ease-in-out;white-space:nowrap}.ag-charts-toolbar__button:hover{background:var(--ag-charts-toolbar-hover-color);z-index:1}.ag-charts-toolbar__button:focus-visible{outline:var(--ag-charts-focus-border);box-shadow:var(--ag-charts-focus-border-shadow);z-index:calc(var(--ag-charts-layer-ui-overlay) + 1)}.ag-charts-toolbar__button--active{background:var(--ag-charts-toolbar-active-background-color);border-color:var(--ag-charts-toolbar-active-color);color:var(--ag-charts-toolbar-active-color);z-index:2}.ag-charts-toolbar__button[aria-disabled=true]{background:var(--ag-charts-toolbar-disabled-background-color);color:var(--ag-charts-toolbar-disabled-foreground-color);cursor:default}.ag-charts-toolbar--horizontal{flex-direction:row;.ag-charts-toolbar__button{margin:0 0 0 -1px}.ag-charts-toolbar__button--first{border-bottom-left-radius:var(--ag-charts-button-radius);border-top-left-radius:var(--ag-charts-button-radius);margin:0}.ag-charts-toolbar__button--last{border-bottom-right-radius:var(--ag-charts-button-radius);border-top-right-radius:var(--ag-charts-button-radius)}}.ag-charts-toolbar--vertical{flex-direction:column;.ag-charts-toolbar__button{margin:-1px 0 0;max-width:100%}.ag-charts-toolbar__button--first{border-top-left-radius:var(--ag-charts-button-radius);border-top-right-radius:var(--ag-charts-button-radius);margin:0}.ag-charts-toolbar__button--last{border-bottom-left-radius:var(--ag-charts-button-radius);border-bottom-right-radius:var(--ag-charts-button-radius)}}.ag-charts-toolbar__icon+.ag-charts-toolbar__label{margin-left:var(--ag-charts-toolbar-gap)}.ag-charts-toolbar__icon,.ag-charts-toolbar__label{pointer-events:none}.ag-charts-floating-toolbar{border:none;display:flex;.ag-charts-toolbar{align-items:unset;position:unset}}.ag-charts-floating-toolbar__drag-handle{align-items:center;background:var(--ag-charts-toolbar-background-color);border:var(--ag-charts-toolbar-border);border-bottom-left-radius:var(--ag-charts-button-radius);border-top-left-radius:var(--ag-charts-button-radius);cursor:grab;display:flex;justify-content:center;min-width:24px;padding-left:0;padding-right:0}.ag-charts-floating-toolbar__drag-handle--dragging{cursor:grabbing}
`}});function Uc(t){return t==="true"}function VK(t){return Number(t)}function yn(t){return t}function se(t,e,i){i==null||i===""||i===""?t?.removeAttribute(e):t?.setAttribute(e,i.toString())}function Wc(t,e){if(e!=null)for(const[i,s]of Object.entries(e))i!=="class"&&se(t,i,s)}function Bm(t,e,i){if(!(t instanceof HTMLElement))return;const s=t.getAttribute(e);return s===null?i:iw[e]?.(s)??void 0}function mn(t,e,i){t!=null&&(i==null?t.style.removeProperty(e):t.style.setProperty(e,i.toString()))}function UK(t,e){for(const[i,s]of Object.entries(e))mn(t,i,s)}var iw,Qi=A({"packages/ag-charts-community/src/util/attributeUtil.ts"(){"use strict";iw={role:yn,"aria-checked":Uc,"aria-controls":yn,"aria-describedby":yn,"aria-disabled":Uc,"aria-expanded":Uc,"aria-haspopup":Uc,"aria-hidden":Uc,"aria-label":yn,"aria-labelledby":yn,"aria-live":yn,"aria-orientation":yn,"aria-selected":Uc,"data-preventdefault":Uc,class:yn,id:yn,tabindex:VK,title:yn,placeholder:yn}}}),sw,WK=A({"packages/ag-charts-community/src/util/guardedElement.ts"(){"use strict";Qi(),Nt(),sw=class IM{constructor(e,i,s){this.element=e,this.topTabGuard=i,this.bottomTabGuard=s,this.destroyFns=[],this.guardTabIndex=0,this.hasFocus=!1,this.initTabGuard(this.topTabGuard,a=>this.onTab(a,!1)),this.initTabGuard(this.bottomTabGuard,a=>this.onTab(a,!0)),this.element.addEventListener("focus",()=>this.onFocus(),{capture:!0}),this.element.addEventListener("blur",a=>this.onBlur(a),{capture:!0})}set tabIndex(e){this.guardTabIndex=e,this.guardTabIndex===0?this.setGuardIndices(void 0):this.hasFocus||this.setGuardIndices(this.guardTabIndex)}destroy(){for(const e of this.destroyFns)e();this.destroyFns.length=0}initTabGuard(e,i){const s=()=>i(e);e.addEventListener("focus",s),this.destroyFns.push(()=>e.removeEventListener("focus",s))}setGuardIndices(e){const i=e;se(this.topTabGuard,"tabindex",i),se(this.bottomTabGuard,"tabindex",i)}onFocus(){this.hasFocus=!0,this.guardTabIndex!==0&&this.setGuardIndices(0)}onBlur({relatedTarget:e}){const{topTabGuard:i,bottomTabGuard:s}=this;this.hasFocus=!1,this.guardTabIndex!==0&&e!==i&&e!==s&&this.setGuardIndices(this.guardTabIndex)}onTab(e,i){if(this.guardTabIndex!==0){let s;e.tabIndex===0?(s=this.findExitTarget(!i),this.setGuardIndices(this.guardTabIndex)):s=this.findEnterTarget(i),s?.focus()}}static queryFocusable(e,i){const s=he();return Array.from(e.querySelectorAll(i)).filter(a=>{if(a instanceof HTMLElement){const n=s.getComputedStyle(a);return n.display!=="none"&&n.visibility!=="none"}return!1})}findEnterTarget(e){const i=IM.queryFocusable(this.element,'[tabindex="0"]'),s=e?i.length-1:0;return i[s]}findExitTarget(e){const i=IM.queryFocusable(hi(),"[tabindex]").filter(n=>n.tabIndex>0).sort((n,o)=>n.tabIndex-o.tabIndex),{before:s,after:a}=IM.findBeforeAndAfter(i,this.guardTabIndex);return e?s:a}static findBeforeAndAfter(e,i){let s=0,a=e.length-1,n,o;for(;s<=a;){const r=Math.floor((s+a)/2),l=e[r].tabIndex;if(l===i){n=e[r-1]||void 0,o=e[r+1]||void 0;break}else l<i?(n=e[r],s=r+1):(o=e[r],a=r-1)}return{before:n,after:o}}}}});function Jo(t,e,i,s){e.addEventListener(i,s);const a=()=>e.removeEventListener(i,s);return t.push(a),a}function aw(t,e,i){Jo(t,e,"keydown",s=>{s.key==="Escape"&&i(s)})}function HK(t,e,i){const s=Jo(t,window,"mousedown",a=>{[0,2].includes(a.button)&&!YK(e,a)&&(i(),s())});return s}function YK(t,e){if(e.target instanceof Element){const{x:i,y:s,width:a,height:n}=t.getBoundingClientRect(),{clientX:o,clientY:r}=e;return o>=i&&r>=s&&o<=i+a&&r<=s+n}return!1}function zm(t){return!(t.shiftKey||t.altKey||t.ctrlKey||t.metaKey)}function TD(t,e,...i){return zm(t)&&(t.key===e||i.some(s=>t.key===s))}function nw(t,e,i,s){i&&Jo(t,e,"keydown",a=>{TD(a,s)&&i.focus()})}function KK(t,e,i,s,a,n){nw(t,e,a,n),nw(t,e,i,s),Jo(t,e,"keydown",o=>{TD(o,s,n)&&o.preventDefault()})}function XK(t){return t.toolbar.role="toolbar",t.toolbar.ariaOrientation=t.orientation,t.toolbar.ariaHidden=(t.buttons.length===0).toString(),ND(t)}function ND(t){const{orientation:e,buttons:i,wrapAround:s=!1,onEscape:a,onFocus:n,onBlur:o}=t,{nextKey:r,prevKey:l}=Hc[e],c=p=>{p.target&&"tabIndex"in p.target&&(i.forEach(g=>g.tabIndex=-1),p.target.tabIndex=0)},[h,u]=s?[i.length,i.length]:[0,1/0],d=[];for(let p=0;p<i.length;p++){const g=i[(h+p-1)%u],f=i[p],x=i[(h+p+1)%u];Jo(d,f,"focus",c),n&&Jo(d,f,"focus",n),o&&Jo(d,f,"blur",o),a&&aw(d,f,a),KK(d,f,x,r,g,l),f.tabIndex=p===0?0:-1}return d}function ow(t){const{sourceEvent:e,orientation:i,menu:s,buttons:a,closeCallback:n,autoCloseOnBlur:o=!1}=t,{nextKey:r,prevKey:l}=Hc[i],c=OD(e);se(c,"aria-expanded",!0);const h=new lw(s,c,n),u=()=>h.close(),{destroyFns:d}=h;if(s.role="menu",s.ariaOrientation=i,d.push(...ND({orientation:i,buttons:a,onEscape:u,wrapAround:!0})),s.tabIndex=-1,aw(d,s,u),Jo(d,s,"keydown",p=>{p.target===s&&(p.key===r||p.key===l)&&(p.preventDefault(),a[0]?.focus())}),o){const p=g=>{!a.includes(g.relatedTarget)&&u()};for(const g of a)Jo(d,g,"blur",p)}return a[0]?.focus({preventScroll:!0}),h}function ZK(t,e){return i=>{if(t.ariaDisabled==="true")return i.preventDefault();e(i)}}function CD(t){return"button"in t?t.button===0:zm(t)&&(t.code==="Space"||t.key==="Enter")}function OD(t){if(t?.target instanceof HTMLElement&&"tabindex"in t.target.attributes)return t.target}function rw(t){const e=i=>{if(i.defaultPrevented)return;Bm(i.target,"data-preventdefault",!0)&&TD(i,"ArrowRight","ArrowLeft","ArrowDown","ArrowUp")&&i.preventDefault()};return t.addEventListener("keydown",e),()=>t.removeEventListener("keydown",e)}var Hc,lw,Nu=A({"packages/ag-charts-community/src/util/keynavUtil.ts"(){"use strict";Qi(),Hc={horizontal:{nextKey:"ArrowRight",prevKey:"ArrowLeft"},vertical:{nextKey:"ArrowDown",prevKey:"ArrowUp"}},lw=class{constructor(t,e,i){this.lastFocus=e,this.closeCallback=i,this.destroyFns=[],this.destroyFns.push(HK(this.destroyFns,t,()=>this.close(!0)))}close(t){this.destroyFns.forEach(e=>e()),this.destroyFns.length=0,this.closeCallback(),this.finishClosing(t)}finishClosing(t){this.destroyFns.forEach(e=>e()),this.destroyFns.length=0,se(this.lastFocus,"aria-expanded",!1),t||this.lastFocus?.focus({preventScroll:!0}),this.lastFocus=void 0}}}}),cw,$K=A({"packages/ag-charts-community/src/util/sizeMonitor.ts"(){"use strict";Nt(),cw=class{constructor(){this.elements=new Map,this.documentReady=!1,this.queuedObserveRequests=[],this.onLoad=()=>{this.documentReady=!0,this.queuedObserveRequests.forEach(([t,e])=>this.observe(t,e)),this.queuedObserveRequests=[]},!(typeof ResizeObserver>"u")&&(this.resizeObserver=new ResizeObserver(t=>{for(const{target:e,contentRect:{width:i,height:s}}of t){const a=this.elements.get(e);this.checkSize(a,e,i,s)}}),this.documentReady=hi("readyState")==="complete",this.documentReady||he()?.addEventListener("load",this.onLoad))}destroy(){he()?.removeEventListener("load",this.onLoad),this.resizeObserver?.disconnect(),this.resizeObserver=null}checkSize(t,e,i,s){t&&(i!==t.size?.width||s!==t.size?.height)&&(t.size={width:i,height:s},t.cb(t.size,e))}observe(t,e){if(!this.documentReady){this.queuedObserveRequests.push([t,e]);return}this.elements.has(t)?this.removeFromQueue(t):this.resizeObserver?.observe(t);const i={cb:e};this.elements.set(t,i)}unobserve(t){this.resizeObserver?.unobserve(t),this.elements.delete(t),this.removeFromQueue(t),this.elements.size||this.destroy()}removeFromQueue(t){this.queuedObserveRequests=this.queuedObserveRequests.filter(([e])=>e!==t)}}}}),hw,QK=A({"packages/ag-charts-community/src/dom/domLayout.html"(){hw='<div role="presentation" class="ag-charts-wrapper ag-charts-styles" data-ag-charts><div role="presentation" class="ag-charts-canvas-center"><div role="presentation" class="ag-charts-canvas-container"><div role="presentation" class="ag-charts-canvas" aria-hidden="true"></div><div role="figure" class="ag-charts-canvas-proxy"><div role="presentation" class="ag-charts-series-area"></div></div><div role="presentation" class="ag-charts-canvas-overlay"></div></div></div></div>'}});function qK(t,e){if(typeof IntersectionObserver>"u")return;const i=new IntersectionObserver(s=>{for(const a of s)a.target===t&&e(a.intersectionRatio)},{root:t});return i.observe(t),i}function uw(t,e){const i=Wt("div");return i.className="ag-charts-tab-guard",t.insertAdjacentElement(e,i),i}var dw,pw,ED,wD,gw=A({"packages/ag-charts-community/src/dom/domManager.ts"(){"use strict";kt(),GK(),Qi(),no(),Nt(),WK(),Nu(),$K(),QK(),dw=["styles","canvas","canvas-center","canvas-container","canvas-overlay","canvas-proxy","series-area"],pw=new Map([["styles",{childElementType:"style"}],["canvas",{childElementType:"canvas"}],["canvas-proxy",{childElementType:"div"}],["canvas-overlay",{childElementType:"div"}],["canvas-center",{childElementType:"div"}],["series-area",{childElementType:"div"}]]),ED={x:0,y:0,width:0,height:0,top:0,bottom:0,left:0,right:0,toJSON(){return ED}},wD=class extends fn{constructor(t,e){super(),this.styles=new Map,this.container=void 0,this.containerSize=void 0,this.sizeMonitor=new cw;const i=Wt("div");i.innerHTML=hw,this.element=i.children.item(0),this.styleRootElement=e,this.rootElements=dw.reduce((r,l)=>{const c=`ag-charts-${l}`,h=this.element.classList.contains(c)?this.element:this.element.querySelector(`.${c}`);if(!h)throw new Error(`AG Charts - unable to find DOM element ${c}`);return r[l]={element:h,children:new Map,listeners:[]},r},{});let s=!1;this.observer=qK(this.element,r=>{r===0&&!s&&this.listeners.dispatch("hidden",{type:"hidden"}),s=r===0}),this.setSizeOptions(),this.addStyles("ag-charts-community",ew),t&&this.setContainer(t),this.destroyFns.push(rw(this.element));const a=this.element.querySelector(".ag-charts-canvas-center");if(a==null)throw new Error("Error initializing tab guards");const n=uw(a,"beforebegin"),o=uw(a,"afterend");this.tabGuards=new sw(a,n,o)}destroy(){super.destroy(),this.observer?.unobserve(this.element),this.container&&this.sizeMonitor.unobserve(this.container),Object.values(this.rootElements).forEach(t=>{t.children.forEach(e=>e.remove()),t.element.remove()}),this.element.remove()}setSizeOptions(t=300,e=300,i,s){const{style:a}=this.element;a.width=`${i??t}px`,a.height=`${s??e}px`}updateContainerSize(){const{style:t}=this.rootElements["canvas-center"].element;t.width=`${this.containerSize?.width??0}px`,t.height=`${this.containerSize?.height??0}px`}setTabGuardIndex(t){this.tabGuards.tabIndex=t}setContainer(t){if(t===this.container)return;if(this.container&&(this.container.removeChild(this.element),this.sizeMonitor.unobserve(this.container)),!(this.getShadowDocumentRoot(t)!=null))for(const i of this.rootElements.styles.children.keys())this.removeChild("styles",i);this.container=t;for(const[i,s]of this.styles)this.addStyles(i,s);t.appendChild(this.element),this.sizeMonitor.observe(t,i=>{this.containerSize=i,this.updateContainerSize(),this.listeners.dispatch("resize",{type:"resize"})}),this.listeners.dispatch("container-changed",{type:"container-changed"})}setThemeClass(t){const e="ag-charts-theme-";this.element.classList.forEach(i=>{i.startsWith(e)&&i!==t&&this.element.classList.remove(i)}),this.element.classList.add(t)}updateCanvasLabel(t){se(this.rootElements["canvas-proxy"].element,"aria-label",t)}getEventElement(t,e){return["focus","blur","keydown","keyup"].includes(e)?this.rootElements["series-area"].element:t}addEventListener(t,e,i){this.getEventElement(this.element,t).addEventListener(t,e,i)}removeEventListener(t,e,i){this.getEventElement(this.element,t).removeEventListener(t,e,i)}getBoundingClientRect(){return this.rootElements.canvas.element.getBoundingClientRect()}getOverlayClientRect(){const t=he(),e=new lt(0,0,t.innerWidth,t.innerHeight),i=this.getRawOverlayClientRect();return e.intersection(i)?.toDOMRect()??ED}getRawOverlayClientRect(){let t=this.element;for(;t!=null;){const n=t.computedStyleMap?.()?.get("overflow-y")?.toString();if(n==="auto"||n==="scroll")return lt.fromDOMRect(t.getBoundingClientRect());t=t.parentElement}const e=this.getShadowDocumentRoot();if(e!=null)return lt.fromDOMRect(e.getBoundingClientRect());const{innerWidth:i,innerHeight:s}=he();return new lt(0,0,i,s)}getShadowDocumentRoot(t=this.container){const e=t?.ownerDocument?.body??hi("body");for(;t!=null;){if(t===e)return;if(t.parentNode instanceof DocumentFragment)return t;t=t.parentNode}return this.container}getParent(t){return this.rootElements[t].element}getChildBoundingClientRect(t){const{children:e}=this.rootElements[t],i=[];for(const s of e.values())i.push(lt.fromDOMRect(s.getBoundingClientRect()));return lt.merge(i)}calculateCanvasPosition(t){let e=0,i=0;const{x:s=0,y:a=0}=this.getChildBoundingClientRect("canvas")??{},n=t.getBoundingClientRect();return e=n.x-s,i=n.y-a,{x:e,y:i}}isManagedChildDOMElement(t,e,i){const{children:s}=this.rootElements[e],a=s?.get(i);return a!=null&&t.contains(a)}contains(t,e){return e==null?this.element.contains(t):this.rootElements[e].element.contains(t)}addStyles(t,e){const i="data-ag-charts";if(this.styles.set(t,e),this.container==null)return;const s=o=>o.getAttribute(i)===t,a=o=>{const r=new Set(["TITLE","META"]);let l=!0,c;for(const u of o.children){if(l&&r.has(u.tagName)){c=u;continue}if(l=!1,s(u))return;u.hasAttribute(i)&&(c=u)}const h=Wt("style");return c!=null?o.insertBefore(h,c.nextSibling):o.prepend(h),h};let n;this.styleRootElement?n=a(this.styleRootElement):this.getShadowDocumentRoot(this.container)!=null?n=this.addChild("styles",t):n=a(hi("head")),!(n==null||s(n))&&(n.setAttribute(i,t),n.innerHTML=e)}removeStyles(t){this.removeChild("styles",t)}updateCursor(t){this.element.style.cursor=t}getCursor(){return this.element.style.cursor}addChild(t,e,i,s){const{element:a,children:n,listeners:o}=this.rootElements[t];if(!n)throw new Error("AG Charts - unable to create DOM elements after destroy()");if(n.has(e))return n.get(e);const{childElementType:r="div"}=pw.get(t)??{};if(i&&i.tagName.toLowerCase()!==r.toLowerCase())throw new Error("AG Charts - mismatching DOM element type");const l=i??Wt(r);for(const[c,h,u]of o)l.addEventListener(c,h,u);if(n.set(e,l),s){const c=a.querySelector(s.query);if(c==null)throw new Error(`AG Charts - addChild query failed ${s.query}`);c.insertAdjacentElement(s.where,l)}else a?.appendChild(l);return l}removeChild(t,e){const{children:i}=this.rootElements[t];i&&(i.get(e)?.remove(),i.delete(e))}incrementDataCounter(t){const{dataset:e}=this.element;e[t]??(e[t]="0"),e[t]=String(Number(e[t])+1)}setDataBoolean(t,e){this.element.dataset[t]=String(e)}}}});function Cu(t,e){const{offsetX:i,offsetY:s,clientX:a,clientY:n}=e;return{type:t,offsetX:i,offsetY:s,clientX:a,clientY:n,sourceEvent:e}}var Fm,fw,Ou,RD=A({"packages/ag-charts-community/src/widget/widgetEvents.ts"(){"use strict";Fm=["blur","change","contextmenu","focus","keydown","keyup","click","dblclick","mouseenter","mousemove","mouseleave","wheel"],fw={blur:t=>({type:"blur",sourceEvent:t}),change:t=>({type:"change",sourceEvent:t}),contextmenu:t=>Cu("contextmenu",t),focus:t=>({type:"focus",sourceEvent:t}),keydown:t=>({type:"keydown",sourceEvent:t}),keyup:t=>({type:"keyup",sourceEvent:t}),click:t=>Cu("click",t),dblclick:t=>Cu("dblclick",t),mouseenter:t=>Cu("mouseenter",t),mousemove:t=>Cu("mousemove",t),mouseleave:t=>Cu("mouseleave",t),wheel:t=>{const{offsetX:e,offsetY:i,clientX:s,clientY:a,deltaX:n,deltaY:o}=t;return{type:"wheel",offsetX:e,offsetY:i,clientX:s,clientY:a,deltaX:n,deltaY:o,sourceEvent:t}}},Ou=class{static alloc(t,e){return fw[t](e)}static isHTMLEvent(t){return Fm.includes(t)}}}}),yw,JK=A({"packages/ag-charts-community/src/widget/widgetListenerHTML.ts"(){"use strict";RD(),yw=class{constructor(){this.maps={}}lazyGetMap(t){let e=this.maps[t];return e===void 0&&(e=new Map,this.maps[t]=e),e}add(t,e,i){const s=this.lazyGetMap(t);if(s.has(i))throw new Error("AG Charts - duplicate add(handler)");const a=n=>{const o=Ou.alloc(t,n);i(o,e)};e.getElement().addEventListener(t,a),s.set(i,a)}remove(t,e,i){const s=this.lazyGetMap(t),a=s.get(i);a&&e.getElement().removeEventListener(t,a),s.delete(i)}destroy(t){for(const e of Object.keys(this.maps))this.typedDestroy(e,t)}typedDestroy(t,e){const i=this.maps[t];if(i!=null)for(const[s,a]of i.entries())e.getElement().removeEventListener(t,a)}}}});function _D(t,e,i){const s=i.pageX-e.pageX,a=i.pageY-e.pageY;return{type:t,offsetX:e.offsetX+s,offsetY:e.offsetY+a,clientX:i.clientX,clientY:i.clientY,originDeltaX:s,originDeltaY:a,sourceEvent:i}}function tX(t,e,i){if(t.globalDragCallbacks!=null)return;const s=he(),a=r=>{r.stopPropagation(),r.stopImmediatePropagation()},n=r=>{r.stopPropagation(),r.stopImmediatePropagation(),t.globalDragCallbacks?.move(r)},o=r=>{r.button===0&&(r.stopPropagation(),r.stopImmediatePropagation(),s.removeEventListener("mousedown",a,{capture:!0}),s.removeEventListener("mouseenter",a,{capture:!0}),s.removeEventListener("mouseleave",a,{capture:!0}),s.removeEventListener("mouseout",a,{capture:!0}),s.removeEventListener("mouseover",a,{capture:!0}),s.removeEventListener("mousemove",n,{capture:!0}),s.removeEventListener("mouseup",o,{capture:!0}),t.globalDragCallbacks?.up(r),t.globalDragCallbacks=void 0)};s.addEventListener("mousedown",a,{capture:!0}),s.addEventListener("mouseenter",a,{capture:!0}),s.addEventListener("mouseleave",a,{capture:!0}),s.addEventListener("mouseout",a,{capture:!0}),s.addEventListener("mouseover",a,{capture:!0}),s.addEventListener("mousemove",n,{capture:!0}),s.addEventListener("mouseup",o,{capture:!0}),t.globalDragCallbacks=e,t.globalDragCallbacks.down(i)}var mw,eX=A({"packages/ag-charts-community/src/widget/widgetListenerInternal.ts"(){"use strict";zy(),Nt(),Yt(),mw=class kM{destroy(){this.dragTriggerRemovers?.forEach(e=>e()),this.dragTriggerRemovers=void 0,this.dragStartListeners=void 0,this.dragMoveListeners=void 0,this.dragEndListeners=void 0,kM.globalDragCallbacks===this.localDragCallbacks&&(kM.globalDragCallbacks=void 0)}add(e,i,s){switch(e){case"drag-start":{this.dragStartListeners??(this.dragStartListeners=[]),this.dragStartListeners.push(s),this.registerDragTrigger(i,s);break}case"drag-move":{this.dragMoveListeners??(this.dragMoveListeners=[]),this.dragMoveListeners.push(s);break}case"drag-end":{this.dragEndListeners??(this.dragEndListeners=[]),this.dragEndListeners.push(s);break}}}remove(e,i,s){switch(e){case"drag-start":return this.removeHandler(this.dragStartListeners,s);case"drag-move":return this.removeHandler(this.dragMoveListeners,s);case"drag-end":return this.removeHandler(this.dragEndListeners,s)}}removeHandler(e,i){const s=e?.indexOf(i);s!==void 0&&e?.splice(s,1)}registerDragTrigger(e,i){const s=a=>a.button===0&&this.startDrag(e,a);e.getElement().addEventListener("mousedown",s),this.dragTriggerRemovers??(this.dragTriggerRemovers=new Map),this.dragTriggerRemovers.set(i,()=>e.getElement().removeEventListener("mousedown",s))}startDrag(e,i){const s={pageX:NaN,pageY:NaN,offsetX:NaN,offsetY:NaN};il(["pageX","pageY","offsetX","offsetY"],s,i);const a={down:n=>{this.localDragCallbacks=a;const o=_D("drag-start",s,n);this.dispatch("drag-start",e,o)},move:n=>{const o=_D("drag-move",s,n);this.dispatch("drag-move",e,o)},up:n=>{const o=_D("drag-end",s,n);this.dispatch("drag-end",e,o),this.endDrag(e,o)}};tX(kM,a,i)}endDrag(e,{sourceEvent:i,clientX:s,clientY:a}){const n=e.getElement(),o=n.getBoundingClientRect();cp.containsPoint(o,s,a)||(n.dispatchEvent(new MouseEvent("mouseleave",i)),i.target?.dispatchEvent(new MouseEvent("mouseenter",i)))}dispatch(e,i,s){switch(e){case"drag-start":return this.dragStartListeners?.forEach(a=>a(s,i));case"drag-move":return this.dragMoveListeners?.forEach(a=>a(s,i));case"drag-end":return this.dragEndListeners?.forEach(a=>a(s,i))}}}}}),xw,oo,ml=A({"packages/ag-charts-community/src/widget/widget.ts"(){"use strict";Qi(),Nt(),RD(),JK(),eX(),xw=class{constructor(t){this.elem=t}setBounds(t){Pp(this.elemContainer??this.elem,t)}getBounds(){return $O(this.elemContainer??this.elem)}static setElementContainer(t,e){const i=t.getBounds();Pp(e,i),UK(t.elem,{width:"100%",height:"100%"}),t.elem.remove(),t.elemContainer=e,t.elemContainer.replaceChildren(t.elem)}},oo=class extends xw{constructor(t){super(t),this.elem=t,this.index=NaN,this.children=[]}getElement(){return this.elem}get clientWidth(){return this.elem.clientWidth}get clientHeight(){return this.elem.clientHeight}destroy(){this.parent?.removeChild(this),this.children.forEach(t=>{t.parent=void 0,t.destroy()}),this.children.length=0,this.destructor(),this.elem.remove(),this.elemContainer?.remove(),this.internalListener?.destroy(),this.htmlListener?.destroy(this)}setHidden(t){mn(this.elem,"display",t?"none":void 0)}isHidden(){return he()?.getComputedStyle?.(this.elem).display==="none"}setCursor(t){mn(this.elem,"cursor",t)}setTextContent(t){this.elem.textContent=t??null}setAriaDescribedBy(t){se(this.elem,"aria-describedby",t)}setAriaHidden(t){se(this.elem,"aria-hidden",t)}setAriaLabel(t){se(this.elem,"aria-label",t)}setInnerHTML(t){this.elem.innerHTML=t}isDisabled(){return Bm(this.elem,"aria-disabled",!1)}parseFloat(t){return t===""?0:parseFloat(t)}cssLeft(){return this.parseFloat(this.elem.style.left)}cssTop(){return this.parseFloat(this.elem.style.top)}focus(){this.elem.focus()}setPreventsDefault(t){se(this.elem,"data-preventdefault",t)}setTabIndex(t){se(this.elem,"tabindex",t)}addChild(t){this.addChildToDOM(t,this.getBefore(t)),this.children.push(t),t.index=this.children.length-1,t.parent=this,this.onChildAdded(t)}removeChild(t){const e=this.children.findIndex(i=>i===t);this.children.splice(e,1),this.removeChildFromDOM(t),this.onChildRemoved(t)}addClass(...t){this.elem.classList.add(...t)}removeClass(...t){this.elem.classList.remove(...t)}toggleClass(t,e){this.elem.classList.toggle(t,e)}appendOrInsert(t,e){e?e.getElement().insertAdjacentElement("beforebegin",t):this.elem.appendChild(t)}addChildToDOM(t,e){this.appendOrInsert(t.getElement(),e)}removeChildFromDOM(t){this.elem.removeChild(t.getElement())}onChildAdded(t){}onChildRemoved(t){}getBefore({domIndex:t}){if(t!==void 0)return this.children.filter(e=>e.domIndex!==void 0&&e.domIndex>t).reduce((e,i)=>!e||i.domIndex<e.domIndex?i:e,void 0)}addListener(t,e){Ou.isHTMLEvent(t)?(this.htmlListener??(this.htmlListener=new yw),this.htmlListener.add(t,this,e)):(this.internalListener??(this.internalListener=new mw),this.internalListener.add(t,this,e))}removeListener(t,e){Ou.isHTMLEvent(t)?this.htmlListener?.remove(t,this,e):this.htmlListener!=null&&this.internalListener?.remove(t,this,e)}}}}),bw,iX=A({"packages/ag-charts-community/src/widget/boundedTextWidget.ts"(){"use strict";Nt(),ml(),bw=class extends oo{constructor(){super(hi().createElement("div")),this.textElement=B0("http://www.w3.org/2000/svg","text"),this.textElement.role="presentation",this.svgElement=B0("http://www.w3.org/2000/svg","svg"),this.svgElement.appendChild(this.textElement),this.svgElement.style.width="100%",this.svgElement.style.opacity="0",this.svgElement.role="presentation",this.elem.appendChild(this.svgElement),this.elem.role="presentation"}set textContent(t){this.textElement.textContent=t;const i=this.textElement.getBBox?.();i&&this.svgElement.setAttribute("viewBox",`${i.x} ${i.y} ${i.width} ${i.height}`)}get textContent(){return this.textElement.textContent}destructor(){}}}}),Eu,jm=A({"packages/ag-charts-community/src/widget/buttonWidget.ts"(){"use strict";Qi(),Nt(),ml(),Eu=class extends oo{constructor(){super(hi().createElement("button")),this.setEnabled(!0)}destructor(){}setEnabled(t){se(this.elem,"aria-disabled",!t),mn(this.elem,"pointer-events",t?void 0:"none")}addListener(t,e){return super.addListener(t,(i,s)=>{(t==="click"||t==="dblclick")&&this.isDisabled()||e(i,s)})}}}}),Sw,sX=A({"packages/ag-charts-community/src/widget/groupWidget.ts"(){"use strict";Qi(),Nt(),ml(),Sw=class extends oo{constructor(){super(hi().createElement("div")),se(this.elem,"role","group")}destructor(){}}}}),PD,vw=A({"packages/ag-charts-community/src/widget/rovingTabContainerWidget.ts"(){"use strict";Qi(),Nt(),Nu(),ml(),PD=class extends oo{constructor(t,e){super(hi().createElement("div")),this.focusedChildIndex=0,this.onChildFocus=(i,s)=>{const a=this.children[this.focusedChildIndex];this.focusedChildIndex=s.index,a?.setTabIndex(-1),s.setTabIndex(0)},this.onChildKeyDown=(i,s)=>{const a=this.orientation,[n,o]=a==="both"?[Hc.horizontal,Hc.vertical]:[Hc[a],void 0];let r=-1;if(zm(i.sourceEvent)){const l=i.sourceEvent.key;l===n.nextKey||l===o?.nextKey?r=s.index+1:(l===n.prevKey||l===o?.prevKey)&&(r=s.index-1)}this.children[r]?.focus()},this.orientation=t,se(this.elem,"role",e)}get orientation(){return Bm(this.elem,"aria-orientation")??"both"}set orientation(t){se(this.elem,"aria-orientation",t!=="both"?t:void 0)}focus(){this.children[this.focusedChildIndex]?.focus()}onChildAdded(t){t.addListener("focus",this.onChildFocus),t.addListener("keydown",this.onChildKeyDown),t.setTabIndex(this.children.length===1?0:-1)}onChildRemoved(t){t.removeListener("focus",this.onChildFocus),t.removeListener("keydown",this.onChildKeyDown)}}}}),Mw,aX=A({"packages/ag-charts-community/src/widget/listWidget.ts"(){"use strict";Qi(),Nt(),vw(),ml(),Mw=class extends PD{constructor(){super("both","list"),this.setHidden(!0)}destructor(){this.children.forEach(t=>t.getElement().parentElement.remove())}addChildToDOM(t,e){const i=hi().createElement("div");se(i,"role","listitem"),mn(i,"position","absolute"),oo.setElementContainer(t,i),this.appendOrInsert(i,e),this.setHidden(!1)}removeChildFromDOM(t){t.getElement().parentElement.remove(),this.setHidden(this.children.length===0)}setHidden(t){this.children.length===0&&(t=!0),super.setHidden(t)}}}}),tr,Gm=A({"packages/ag-charts-community/src/widget/nativeWidget.ts"(){"use strict";ml(),tr=class extends oo{constructor(t){super(t)}destructor(){}}}}),Vm,Um,Dw=A({"packages/ag-charts-community/src/widget/sliderWidget.ts"(){"use strict";Qi(),Nt(),Wp(),It(),ml(),Vm=class Cy extends oo{constructor(){super(hi().createElement("input")),this._step=Cy.STEP_ONE,this.orientation="both"}get step(){return this._step}set step(e){this._step=e,this.getElement().step=e.attributeValue}get keyboardStep(){return this._keyboardStep?.step??this._step}set keyboardStep(e){if(e!==this._keyboardStep?.step&&(this._keyboardStep!==void 0&&(this.removeListener("keydown",this._keyboardStep.onKeyDown),this.removeListener("keyup",this._keyboardStep.onKeyUp),this.removeListener("blur",this._keyboardStep.onBlur),this._keyboardStep=void 0),e!==void 0)){const i=()=>this.getElement().step=e.attributeValue,s=()=>this.getElement().step=this._step.attributeValue;this._keyboardStep={step:e,onKeyDown:i,onKeyUp:s,onBlur:s},this.addListener("keydown",this._keyboardStep.onKeyDown),this.addListener("keyup",this._keyboardStep.onKeyUp),this.addListener("blur",this._keyboardStep.onBlur)}}get orientation(){return Bm(this.elem,"aria-orientation")??"both"}set orientation(e){se(this.elem,"aria-orientation",e!=="both"?e:void 0),Cy.registerDefaultPreventers(this,e)}destructor(){}clampValueRatio(e,i){const s=this.getValueRatio(),a=At(e,s,i);return a!==s&&this.setValueRatio(a),a}setValueRatio(e,i){const{divider:s}=this.step,a=Math.round(e*1e4)/s,{ariaValueText:n=dE(a/s)}=i??{},o=this.getElement();o.value=`${a}`,o.ariaValueText=n}getValueRatio(){return parseFloat(this.getElement().value)/this.step.divider}static registerDefaultPreventers(e,i){i==="both"?e.removeListener("keydown",Cy.onKeyDown):e.addListener("keydown",Cy.onKeyDown)}static onKeyDown(e,i){let s=[];const{orientation:a}=i;a==="horizontal"?s=["ArrowUp","ArrowDown"]:a==="vertical"&&(s=["ArrowLeft","ArrowRight"]),s.includes(e.sourceEvent.code)&&e.sourceEvent.preventDefault()}},Vm.STEP_ONE={attributeValue:"1",divider:1},Vm.STEP_HUNDRETH={attributeValue:"0.01",divider:100},Um=Vm}}),Aw,nX=A({"packages/ag-charts-community/src/widget/switchWidget.ts"(){"use strict";Qi(),jm(),Aw=class extends Eu{constructor(){super(),se(this.elem,"role","switch"),this.setChecked(!1)}setChecked(t){se(this.elem,"aria-checked",t)}}}}),ig,BD=A({"packages/ag-charts-community/src/widget/toolbarWidget.ts"(){"use strict";vw(),ig=class extends PD{constructor(t="horizontal"){super(t,"toolbar")}destructor(){}}}});function wu(t,e){return e.params?.type===t}function oX(t){if(t==="button")return new Eu;if(t==="slider")return new Um;if(t==="toolbar")return new ig;if(t==="group")return new Sw;if(t==="list")return new Mw;if(t==="region")return new tr(Wt("div"));if(t==="text")return new bw;if(t==="listswitch")return new Aw;throw Error("AG Charts - error allocating meta")}function Iw(t){const e={params:t,result:void 0};return e.result=oX(e.params.type),e}var zD,kw=A({"packages/ag-charts-community/src/dom/proxyInteractionService.ts"(){"use strict";Qi(),Nt(),iX(),jm(),sX(),aX(),Gm(),Dw(),nX(),BD(),zD=class{constructor(t,e){this.localeManager=t,this.domManager=e,this.destroyFns=[]}destroy(){this.destroyFns.forEach(t=>t())}addLocalisation(t){t(),this.destroyFns.push(this.localeManager.addListener("locale-changed",t))}createProxyContainer(t){const e=Iw(t),{params:i,result:s}=e,a=s.getElement();return this.domManager.addChild("canvas-proxy",i.domManagerId,a),a.classList.add(...i.classList,"ag-charts-proxy-container"),a.role=i.type,"ariaOrientation"in i&&(a.ariaOrientation=i.ariaOrientation),wu("toolbar",e)&&(e.result.orientation=e.params.orientation),this.addLocalisation(()=>{a.ariaLabel=this.localeManager.t(i.ariaLabel.id,i.ariaLabel.params)}),s}createProxyElement(t){const e=Iw(t);if(wu("button",e)){const{params:i,result:s}=e,a=s.getElement();if(this.initInteract(i,s),typeof i.textContent=="string")a.textContent=i.textContent;else{const{textContent:n}=i;this.addLocalisation(()=>{a.textContent=this.localeManager.t(n.id,n.params)})}this.setParent(e.params,e.result)}if(wu("slider",e)){const{params:i,result:s}=e,a=s.getElement();this.initInteract(i,s),a.type="range",a.role="presentation",a.style.margin="0px",this.addLocalisation(()=>{a.ariaLabel=this.localeManager.t(i.ariaLabel.id,i.ariaLabel.params)}),this.setParent(e.params,e.result)}if(wu("text",e)){const{params:i,result:s}=e;this.initElement(i,s),this.setParent(e.params,e.result)}if(wu("listswitch",e)){const{params:i,result:s}=e;this.initInteract(i,s),s.setTextContent(i.textContent),s.setChecked(i.ariaChecked),s.setAriaDescribedBy(i.ariaDescribedBy),this.setParent(e.params,e.result)}if(wu("region",e)){const{params:i,result:s}=e,a=s.getElement();this.initInteract(i,s),a.role="region",this.setParent(e.params,e.result)}return e.result}initElement(t,e){const i=e.getElement();return se(i,"id",t.id),mn(i,"cursor",t.cursor),i.classList.toggle("ag-charts-proxy-elem",!0),i}initInteract(t,e){const{tabIndex:i,domIndex:s}=t,a=this.initElement(t,e);i!==void 0&&(a.tabIndex=i),s!==void 0&&(e.domIndex=s)}setParent(t,e){if("parent"in t)t.parent?.addChild(e);else{const i={where:t.where,query:".ag-charts-series-area"};this.domManager.addChild("canvas-proxy",t.domManagerId,e.getElement(),i)}}}}}),Lw,Wm,Tw,rX=A({"packages/ag-charts-community/src/locale/defaultMessageFormatter.ts"(){"use strict";St(),Lw=/\$\{(\w+)}(?:\[(\w+)])?/gi,Wm={number:new Intl.NumberFormat("en-US"),percent:new Intl.NumberFormat("en-US",{style:"percent",minimumFractionDigits:2,maximumFractionDigits:2}),date:new Intl.DateTimeFormat("en-US",{dateStyle:"full"}),time:new Intl.DateTimeFormat("en-US",{timeStyle:"full"}),datetime:new Intl.DateTimeFormat("en-US",{dateStyle:"full",timeStyle:"full"})},Tw=({defaultValue:t,variables:e})=>t?.replaceAll(Lw,(i,s,a)=>{const n=e[s],o=a!=null?Wm[a]:null;return a!=null&&o==null&&st.warnOnce(`Format style [${a}] is not supported`),o!=null?o.format(n):typeof n=="number"?Wm.number.format(n):n instanceof Date?Wm.datetime.format(n):String(n)})}}),Nw,lX=A({"packages/ag-charts-community/src/locale/localeManager.ts"(){"use strict";I2(),ao(),rX(),Nw=class extends gn{constructor(){super(...arguments),this.localeText=void 0,this.getLocaleText=void 0}setLocaleText(t){this.localeText!==t&&(this.localeText=t,this.dispatch("locale-changed"))}setLocaleTextFormatter(t){this.getLocaleText=t,this.getLocaleText!==t&&(this.getLocaleText=t,this.dispatch("locale-changed"))}t(t,e={}){const{localeText:i=NM,getLocaleText:s}=this,a=i[t];return s?.({key:t,defaultValue:a,variables:e})??Tw({key:t,defaultValue:a,variables:e})??t}}}});function Cw({context:t,pixelRatio:e,width:i,height:s}){t.save(),t.setTransform(e,0,0,e,0,0),t.clearRect(0,0,i,s),t.restore()}function Ow(t){if(te.check("canvas")){const e=t.save.bind(t),i=t.restore.bind(t);let s=0;Object.assign(t,{save(){e(),s++},restore(){if(s===0)throw new Error("AG Charts - Unable to restore() past depth 0");i(),s--},verifyDepthZero(){if(s!==0)throw new Error(`AG Charts - Save/restore depth is non-zero: ${s}`)}})}}var Ew=A({"packages/ag-charts-community/src/scene/canvas/canvasUtil.ts"(){"use strict";He()}}),Hm,FD=A({"packages/ag-charts-community/src/scene/canvas/hdpiCanvas.ts"(){"use strict";Nt(),vs(),Ew(),Hm=class{constructor(t){this.enabled=!0,this.width=600,this.height=300;const{width:e,height:i,pixelRatio:s,canvasElement:a,willReadFrequently:n=!1}=t;this.pixelRatio=s??he("devicePixelRatio"),this.element=a??Wt("canvas"),this.element.style.display="block",this.element.style.width=(e??this.width)+"px",this.element.style.height=(i??this.height)+"px",this.element.width=Math.round((e??this.width)*this.pixelRatio),this.element.height=Math.round((i??this.height)*this.pixelRatio),this.context=this.element.getContext("2d",{willReadFrequently:n}),this.onEnabledChange(),this.resize(e??0,i??0),Ow(this.context)}drawImage(t,e=0,i=0){return t.drawImage(this.context.canvas,e,i)}toDataURL(t){return this.element.toDataURL(t)}resize(t,e){if(!(t>0&&e>0))return;const{element:i,context:s,pixelRatio:a}=this;i.width=Math.round(t*a),i.height=Math.round(e*a),s.setTransform(a,0,0,a,0,0),i.style.width=t+"px",i.style.height=e+"px",this.width=t,this.height=e}clear(){Cw(this)}destroy(){this.element.remove(),this.element.width=0,this.element.height=0,this.context.clearRect(0,0,0,0),Object.freeze(this)}onEnabledChange(){this.element&&(this.element.style.display=this.enabled?"":"none")}},M([zc(t=>t.onEnabledChange())],Hm.prototype,"enabled",2)}}),ww,cX=A({"packages/ag-charts-community/src/scene/canvas/hdpiOffscreenCanvas.ts"(){"use strict";Nt(),Ew(),ww=class{constructor(t){this.width=600,this.height=300;const{width:e,height:i,pixelRatio:s,willReadFrequently:a=!1}=t;this.pixelRatio=s??he("devicePixelRatio"),this.canvas=new OffscreenCanvas(e??this.width,i??this.height),this.context=this.canvas.getContext("2d",{willReadFrequently:a}),this.resize(e??0,i??0),Ow(this.context)}drawImage(t,e=0,i=0){return t.drawImage(this.context.canvas,e,i)}resize(t,e){if(!(t>0&&e>0))return;const{canvas:i,context:s,pixelRatio:a}=this;i.width=Math.round(t*a),i.height=Math.round(e*a),s.setTransform(a,0,0,a,0,0),this.width=t,this.height=e}clear(){Cw(this)}destroy(){this.canvas.width=0,this.canvas.height=0,this.context.clearRect(0,0,0,0),this.canvas=null,this.context=null,Object.freeze(this)}}}}),Rw,hX=A({"packages/ag-charts-community/src/scene/layersManager.ts"(){"use strict";He(),FD(),cX(),Rw=class{constructor(t){this.canvas=t,this.debug=te.create(!0,"scene"),this.layersMap=new Map,this.nextLayerId=0}get size(){return this.layersMap.size}resize(t,e){this.canvas.resize(t,e),this.layersMap.forEach(({canvas:i})=>i.resize(t,e))}addLayer(t){const{width:e,height:i,pixelRatio:s}=this.canvas,{name:a}=t,n=new ww({width:e,height:i,pixelRatio:s});return this.layersMap.set(n,{id:this.nextLayerId++,name:a,canvas:n}),this.debug("Scene.addLayer() - layers",this.layersMap),n}removeLayer(t){this.layersMap.has(t)&&(this.layersMap.delete(t),t.destroy(),this.debug("Scene.removeLayer() -  layers",this.layersMap))}clear(){for(const t of this.layersMap.values())t.canvas.destroy();this.layersMap.clear()}}}}),jD,GD,_w=A({"packages/ag-charts-community/src/scene/spriteRenderer.ts"(){"use strict";lp(),jD=class h3{constructor(){this.offscreenCanvas=new OffscreenCanvas(1,1),h3.offscreenCanvasCount++;const e=this.offscreenCanvas.getContext("2d");if(e==null)throw new TypeError("AG Charts - invalid 2d context");this.renderCtx={ctx:e,devicePixelRatio:1,resized:!1,debugNodes:{}}}resize({spritePixelRatio:e,spriteWidth:i,spriteHeight:s}){this.offscreenCanvas.width=Math.max(i,0)*e,this.offscreenCanvas.height=Math.max(s,0)*e}renderSprite(e,i){e=_2(e);const{renderCtx:s,renderCtx:{ctx:a},offscreenCanvas:n}=this,{scale:o=1,translateX:r=0,translateY:l=0}=i??{};a.save(),a.resetTransform(),a.clearRect(0,0,n.width,n.height),a.beginPath(),a.setTransform(o,0,0,o,r,l);for(const c of e)c.preRender(),c.render(s);return a.closePath(),a.restore(),n.transferToImageBitmap()}},jD.offscreenCanvasCount=0,GD=jD}});function uX(t){for(const e of["B","KB","MB","GB"]){if(t<1536)return`${t.toFixed(1)}${e}`;t/=1024}return`${t.toFixed(1)}TB}`}function dX(){if(!("memory"in performance))return;const{totalJSHeapSize:t,usedJSHeapSize:e,jsHeapSizeLimit:i}=performance.memory,s=[];for(const a of[e,t,i])typeof a=="number"&&s.push(uX(a));return`Heap ${s.join(" / ")}`}function Pw(t,e,i,s,a={},n=lt.zero){if(!te.check("scene:stats","scene:stats:verbose"))return;const{layersRendered:o=0,layersSkipped:r=0,nodesRendered:l=0,nodesSkipped:c=0,opsPerformed:h=0,opsSkipped:u=0}=s??{},d=performance.now(),{start:p,...g}=e,f=Object.entries(g).map(([C,O])=>zw(C,O)).filter(C=>C!=null).join(" + "),x=Object.entries(a).map(([C,O])=>`${C}: ${JSON.stringify(O)}`).join(" ; "),m=te.check("scene:stats:verbose"),b=dX(),v=[`${zw("\u23F1\uFE0F",p,d)} (${f})`,`${x}`,`Layers: ${m?VD(o,r):t.size}; Sprites: ${GD.offscreenCanvasCount}`,m?`Nodes: ${VD(l,c)}`:null,m?`Ops: ${VD(h,u)}`:null,m&&b?b:null].filter(Rs),S=new Sm(C=>i.measureText(C)),D=new Map(v.map(C=>[C,S.measureLines(C)])),k=Math.max(...Array.from(D.values(),C=>C.width)),L=yX(D.values(),C=>C.height),T=2+n.x;i.save(),i.fillStyle="white",i.fillRect(T,0,k,L),i.fillStyle="black";let N=0;for(const[C,O]of D.entries())N+=O.height,i.fillText(C,T,N);i.restore()}function pX(t){const e=vp(he("agChartsSceneDebug")),i=[];for(const s of e)s==="layout"?i.push("seriesRoot","legend","root",/.*Axis-\d+-axis.*/):i.push(s);t.debugNodeSearch=i}function gX(t,e){t.save();for(const[i,s]of Object.entries(e)){const a=Ae.toCanvas(s);if(!a){st.log(`Scene.render() - no bbox for debugged node [${i}].`);continue}t.globalAlpha=.8,t.strokeStyle="red",t.lineWidth=1,t.strokeRect(a.x,a.y,a.width,a.height),t.fillStyle="red",t.strokeStyle="white",t.font="16px sans-serif",t.textBaseline="top",t.textAlign="left",t.lineWidth=2,t.strokeText(i,a.x,a.y,a.width),t.fillText(i,a.x,a.y,a.width)}t.restore()}function fX(t){const{...e}=t;for(const i of Object.keys(e))jw.has(i)||typeof e[i]!="number"&&typeof e[i]!="string"&&typeof e[i]!="boolean"&&(Fw.add(i),delete e[i]);return e}function Ym(t,e){if(!te.check(!0,"scene"))return{};let i=0;return{node:e==="json"?fX(t):t,name:t.name??t.id,dirty:t.dirty,...Array.from(t.children(),s=>Ym(s,e)).reduce((s,a)=>{let{name:n}=a;const{node:{visible:o,opacity:r,zIndex:l,translationX:c,translationY:h,rotation:u,scalingX:d,scalingY:p},node:g}=a;(!o||r<=0)&&(n=`(${n})`),mt.is(g)&&g.renderToOffscreenCanvas&&(n=`*${n}*`);const f=Array.isArray(l)?`(${l.join(", ")})`:l,x=[`${(i++).toString().padStart(3,"0")}|`,`${n??"<unknown>"}`,`z: ${f}`,c&&`x: ${c}`,h&&`y: ${h}`,u&&`r: ${u}`,d!=null&&d!==1&&`sx: ${d}`,p!=null&&p!==1&&`sy: ${p}`].filter(v=>!!v).join(" ");let m=x,b=1;for(;s[m]!=null&&b<100;)m=`${x} (${b++})`;return s[m]=a,s},{})}}function Bw(t){if(!t.dirty)return{dirtyTree:{},paths:[]};const e=Array.from(t.children(),a=>Bw(a)).filter(a=>a.paths.length>0),i=mt.is(t)?t.name??t.id:t.id,s=e.length?e.flatMap(a=>a.paths).map(a=>`${i}.${a}`):[i];return{dirtyTree:{name:i,node:t,dirty:t.dirty,...e.map(a=>a.dirtyTree).filter(a=>a.dirty!=null).reduce((a,n)=>(a[n.name??"<unknown>"]=n,a),{})},paths:s}}function VD(t,e){const i=t+e;return`${t} / ${i} (${Math.round(100*t/i)}%)`}function zw(t,e,i){const s=i!=null?i-e:e;return`${t}: ${Math.round(s*100)/100}ms`}function yX(t,e){let i=0;for(const s of t)i+=e(s);return i}var Fw,jw,mX=A({"packages/ag-charts-community/src/scene/sceneDebug.ts"(){"use strict";Ue(),He(),Nt(),St(),ca(),Ct(),kt(),me(),ae(),_w(),Ki(),Fw=new Set,jw=new Set(["gradient","zIndex","clipRect","cachedBBox","childNodeCounts","path","__zIndex","name","__scalingCenterX","__scalingCenterY","__rotationCenterX","__rotationCenterY","_previousDatum","__fill","__lineDash","borderPath","borderClipPath","_clipPath"])}}),sg,UD=A({"packages/ag-charts-community/src/scene/scene.ts"(){"use strict";He(),Nt(),wa(),FD(),hX(),ae(),mX(),sg=class{constructor(t){this.debug=te.create(!0,"scene"),this.id=Ea(this),this.root=null,this.pendingSize=null,this.isDirty=!1,this.canvas=new Hm(t),this.layersManager=new Rw(this.canvas)}get width(){return this.pendingSize?.[0]??this.canvas.width}get height(){return this.pendingSize?.[1]??this.canvas.height}setContainer(t){const{element:e}=this.canvas;return e.parentElement?.removeChild(e),t.appendChild(e),this}setRoot(t){return this.root===t?this:(this.isDirty=!0,this.root?._setLayerManager(),this.root=t,t&&(t.visible=!0,t._setLayerManager(this.layersManager)),this)}clear(){this.canvas.clear()}attachNode(t){return this.appendChild(t),()=>this.removeChild(t)}appendChild(t){return this.root?.appendChild(t),this}removeChild(t){return this.root?.removeChild(t),this}download(t,e){KO(this.canvas.toDataURL(e),t?.trim()??"image")}getDataURL(t){return this.canvas.toDataURL(t)}resize(t,e){return t=Math.round(t),e=Math.round(e),t>0&&e>0&&(t!==this.width||e!==this.height)?(this.pendingSize=[t,e],this.isDirty=!0,!0):!1}render(t){const{debugSplitTimes:e={start:performance.now()},extraDebugStats:i,seriesRect:s}=t??{},{canvas:a,canvas:{context:n}={},root:o,pendingSize:r}=this;if(!n)return;const l=performance.now();if(r&&(this.layersManager.resize(...r),this.pendingSize=null),o&&!o.visible){this.isDirty=!1;return}if(o?.dirty===!1&&!this.isDirty){this.debug.check()&&this.debug("Scene.render() - no-op",{tree:Ym(o,"console")}),Pw(this.layersManager,e,n,void 0,i,s);return}const c={ctx:n,devicePixelRatio:this.canvas.pixelRatio??1,resized:!!r,debugNodes:{}};te.check("scene:stats:verbose")&&(c.stats={layersRendered:0,layersSkipped:0,nodesRendered:0,nodesSkipped:0,opsPerformed:0,opsSkipped:0}),pX(c);let h=!1;if(o?.dirty!==!1&&(h=!0,a.clear()),o&&te.check("scene:dirtyTree")){const{dirtyTree:u,paths:d}=Bw(o);te.create("scene:dirtyTree")("Scene.render() - dirtyTree",{dirtyTree:u,paths:d})}if(o&&h){if(o.visible&&o.preRender(),this.debug.check()){const u=Ym(o,"console");this.debug("Scene.render() - before",{canvasCleared:h,tree:u})}o.visible&&(n.save(),o.render(c),n.restore())}e["\u270D\uFE0F"]=performance.now()-l,n.verifyDepthZero?.(),this.isDirty=!1,Pw(this.layersManager,e,n,c.stats,i,s),gX(n,c.debugNodes),o&&this.debug.check()&&this.debug("Scene.render() - after",{tree:Ym(o,"console"),canvasCleared:h})}toSVG(){const{root:t,width:e,height:i}=this;if(t!=null)return Yo.toSVG(t,e,i)}strip(){const{context:t,pixelRatio:e}=this.canvas;t.setTransform(e,0,0,e,0,0),this.layersManager.clear(),this.setRoot(null),this.isDirty=!1}destroy(){this.strip(),this.canvas.destroy(),Object.assign(this,{canvas:void 0})}},sg.className="Scene"}}),Gw,xX=A({"packages/ag-charts-community/src/util/callbackCache.ts"(){"use strict";St(),Gw=class{constructor(){this.cache=new WeakMap}call(t,...e){let i,s=this.cache.get(t);try{i=JSON.stringify(e)}catch{return this.invoke(t,e,s)}return s==null&&(s=new Map,this.cache.set(t,s)),s.has(i)?s.get(i):this.invoke(t,e,s,i)}invoke(t,e,i,s){try{const a=t(...e);return i&&s!=null&&i.set(s,a),a}catch(a){st.warnOnce("User callback errored, ignoring",a);return}}invalidateCache(){this.cache=new WeakMap}}}}),Vw,bX=A({"packages/ag-charts-community/src/chart/annotation/annotationManager.ts"(){"use strict";no(),Yt(),Ct(),Vw=class extends fn{constructor(t){super(),this.annotationRoot=t,this.mementoOriginatorKey="annotations",this.annotations=[]}createMemento(){return this.annotations}guardMemento(t){return t==null||ce(t)}restoreMemento(t,e,i){this.annotations=this.cleanData(i??[]).map(s=>{const a=this.getAnnotationTypeStyles(s.type);return Lt(s,a)}),this.listeners.dispatch("restore-annotations",{type:"restore-annotations",annotations:this.annotations})}updateData(t){this.annotations=this.cleanData(t??[])}attachNode(t){return this.annotationRoot.append(t),()=>(this.annotationRoot?.removeChild(t),this)}setAnnotationStyles(t){this.styles=t}getAnnotationTypeStyles(t){return this.styles?.[t]}cleanData(t){for(const e of t)"textAlign"in e&&delete e.textAlign;return t}}}}),Uw,SX=A({"packages/ag-charts-community/src/chart/axis/axisManager.ts"(){"use strict";me(),ae(),pl(),Uw=class{constructor(t){this.sceneRoot=t,this.axes=new Map,this.axisGridGroup=new mt({name:"Axes-Grids",zIndex:1}),this.axisGroup=new mt({name:"Axes",zIndex:2}),this.axisLabelGroup=new mt({name:"Axes-Labels",zIndex:12}),this.axisCrosslineRangeGroup=new mt({name:"Axes-Crosslines-Range",zIndex:3}),this.axisCrosslineLineGroup=new mt({name:"Axes-Crosslines-Line",zIndex:7}),this.axisCrosslineLabelGroup=new mt({name:"Axes-Crosslines-Label",zIndex:12}),this.sceneRoot.appendChild(this.axisGroup),this.sceneRoot.appendChild(this.axisGridGroup),this.sceneRoot.appendChild(this.axisLabelGroup),this.sceneRoot.appendChild(this.axisCrosslineRangeGroup),this.sceneRoot.appendChild(this.axisCrosslineLineGroup),this.sceneRoot.appendChild(this.axisCrosslineLabelGroup)}updateAxes(t,e){const i={axisNode:this.axisGroup,gridNode:this.axisGridGroup,labelNode:this.axisLabelGroup,crossLineRangeNode:this.axisCrosslineRangeGroup,crossLineLineNode:this.axisCrosslineLineGroup,crossLineLabelNode:this.axisCrosslineLabelGroup};for(const s of t)e.includes(s)||(s.detachAxis(i),s.destroy());for(const s of e)t?.includes(s)||s.attachAxis(i);this.axes.clear();for(const s of e){const a=s.createAxisContext();this.axes.has(a.direction)?this.axes.get(a.direction)?.push(a):this.axes.set(a.direction,[a])}}getAxisContext(t){return this.axes.get(t)??[]}destroy(){this.axes.clear(),this.sceneRoot.removeChild(this.axisGroup),this.sceneRoot.removeChild(this.axisGridGroup)}}}}),ag,Ww=A({"packages/ag-charts-community/src/chart/data/dataService.ts"(){"use strict";He(),qy(),ao(),St(),vs(),ag=class extends gn{constructor(t){super(),this.animationManager=t,this.dispatchOnlyLatest=!0,this.dispatchThrottle=0,this.requestThrottle=300,this.isLoadingInitialData=!1,this.isLoadingData=!1,this.freshRequests=[],this.requestCounter=0,this.debug=te.create(!0,"data-model","data-source"),this.throttledFetch=this.createThrottledFetch(this.requestThrottle),this.throttledDispatch=this.createThrottledDispatch(this.dispatchThrottle)}updateCallback(t){typeof t=="function"&&(this.debug("DataService - updated data source callback"),this.dataSourceCallback=t,this.isLoadingInitialData=!0,this.animationManager.skip(),this.dispatch("data-source-change"))}clearCallback(){this.dataSourceCallback=void 0}load(t){this.isLoadingData=!0,this.throttledFetch(t)}isLazy(){return this.dataSourceCallback!=null}isLoading(){return this.isLazy()&&(this.isLoadingInitialData||this.isLoadingData)}createThrottledFetch(t){return ZM(e=>this.fetch(e).catch(i=>st.error("callback failed",i)),t,{leading:!1,trailing:!0})}createThrottledDispatch(t){return ZM((e,i)=>{this.debug(`DataService - dispatching 'data-load' | ${e}`),this.dispatch("data-load",{type:"data-load",data:i})},t,{leading:!0,trailing:!0})}async fetch(t){if(!this.dataSourceCallback)throw new Error("DataService - [dataSource.getData] callback not initialised");const e=performance.now(),i=this.requestCounter++;this.debug(`DataService - requesting | ${i}`),this.freshRequests.push(i);let s;try{s=await this.dataSourceCallback(t),this.debug(`DataService - response | ${performance.now()-e}ms | ${i}`)}catch(n){this.debug(`DataService - request failed | ${i}`),st.errorOnce(`DataService - request failed | [${n}]`)}this.isLoadingInitialData=!1;const a=this.freshRequests.findIndex(n=>n===i);if(a===-1||this.dispatchOnlyLatest&&a!==this.freshRequests.length-1){this.debug(`DataService - discarding stale request | ${i}`);return}this.freshRequests=this.freshRequests.slice(a+1),this.freshRequests.length===0&&(this.isLoadingData=!1),Array.isArray(s)?this.throttledDispatch(i,s):this.dispatch("data-error")}},M([ua({newValue(t){this.throttledDispatch=this.createThrottledDispatch(t)}})],ag.prototype,"dispatchThrottle",2),M([ua({newValue(t){this.throttledFetch=this.createThrottledFetch(t)}})],ag.prototype,"requestThrottle",2)}}),WD,vX=A({"packages/ag-charts-community/src/chart/interaction/animationBatch.ts"(){"use strict";Ac(),He(),St(),WD=class{constructor(t){this.maxAnimationTime=t,this.debug=te.create(!0,"animation"),this.controllers=new Map,this.stoppedCbs=new Set,this.currentPhase=0,this.phases=new Map(Dc.map(e=>[e,[]])),this.skipAnimations=!1,this.animationTimeConsumed=0,this.isReady=!1}get size(){return this.controllers.size}get consumedTimeMs(){return this.animationTimeConsumed}isActive(){return this.controllers.size>0}getActiveControllers(){return this.phases.get(Dc[this.currentPhase])??[]}checkOverlappingId(t){t!=null&&this.controllers.has(t)&&(this.controllers.get(t).stop(),this.debug(`Skipping animation batch due to update of existing animation: ${t}`),this.skip())}addAnimation(t){if(t.isComplete)return;if(Dc.indexOf(t.phase)<this.currentPhase){this.debug("Skipping animation due to being for an earlier phase",t.id),t.stop();return}this.controllers.set(t.id,t),this.phases.get(t.phase)?.push(t)}removeAnimation(t){this.controllers.delete(t.id);const e=this.phases.get(t.phase),i=e?.indexOf(t);i!=null&&i>=0&&e?.splice(i,1)}progress(t){if(!this.isReady)return;let e=t===0?.01:t;const i=()=>{const c=Dc[this.currentPhase];return{phaseControllers:[...this.getActiveControllers()],phase:c,phaseMeta:du[c]}};let{phase:s,phaseControllers:a,phaseMeta:n}=i();const o=()=>Dc[this.currentPhase]==null,r=()=>{for({phase:s,phaseControllers:a,phaseMeta:n}=i();!o()&&a.length===0;)this.currentPhase++,{phase:s,phaseControllers:a,phaseMeta:n}=i(),this.debug(`AnimationBatch - phase changing to ${s}`,{unusedTime:e},a)},l=this.controllers.size;this.debug(`AnimationBatch - ${t}ms; phase ${s} with ${a?.length} of ${l}`);do{const c=e,h=n.skipIfNoEarlierAnimations&&this.animationTimeConsumed===0;let u=0;for(const d of a)h?d.stop():e=Math.min(d.update(c),e),d.isComplete&&(u++,this.removeAnimation(d));this.animationTimeConsumed+=c-e,this.debug(`AnimationBatch - updated ${a.length} controllers; ${u} completed`),this.debug(`AnimationBatch - animationTimeConsumed: ${this.animationTimeConsumed}`),r()}while(e>0&&!o());this.animationTimeConsumed>this.maxAnimationTime&&(this.debug("Animation batch exceeded max animation time, skipping",[...this.controllers]),this.stop())}ready(){if(this.isReady)return;this.isReady=!0,this.debug(`AnimationBatch - ready; skipped: ${this.skipAnimations}`,[...this.controllers]);let t=!0;for(const[,e]of this.controllers)if(e.duration>0&&du[e.phase].skipIfNoEarlierAnimations!==!0){t=!1;break}if(!t)for(const[,e]of this.controllers)e.autoplay&&e.play(!0)}skip(t=!0){if(this.skipAnimations===!1&&t===!0){for(const e of this.controllers.values())e.stop();this.controllers.clear()}this.skipAnimations=t}play(){for(const t of this.controllers.values())t.play()}pause(){for(const t of this.controllers.values())t.pause()}stop(){for(const t of this.controllers.values())try{t.stop(),this.removeAnimation(t)}catch(e){st.error("Error during animation stop",e)}this.dispatchStopped()}stopByAnimationId(t){if(t!=null&&this.controllers.has(t)){const e=this.controllers.get(t);e&&(e.stop(),this.removeAnimation(e))}}stopByAnimationGroupId(t){for(const e of this.controllers.values())e.groupId===t&&this.stopByAnimationId(e.id)}dispatchStopped(){this.stoppedCbs.forEach(t=>t()),this.stoppedCbs.clear()}isSkipped(){return this.skipAnimations}destroy(){this.stop(),this.controllers.clear()}}}});function ng(t){const e={...t,preventDefault(){e.sourceEvent?.preventDefault()}};return e}function Hw(t,e){t.dispatchWrapHandlers(e.type,(i,s)=>i(s),ng(e))}var og=A({"packages/ag-charts-community/src/chart/interaction/preventableEvent.ts"(){"use strict"}});function MX(t){return HD.includes(t)}function DX(t){return Yw.includes(t)}var HD,Yw,Km,YD,KD,XD,Xm,Yc=A({"packages/ag-charts-community/src/chart/interaction/interactionManager.ts"(){"use strict";He(),Nt(),Yt(),Ct(),DD(),og(),HD=["click","dblclick","contextmenu","hover","leave","enter","page-left","wheel"],Yw=["keydown","keyup"],Km=["mousemove","mouseup"],YD=["pagehide","mousemove","mouseup"],KD=["click","dblclick","contextmenu","mousedown","mouseleave","mouseenter","touchstart","touchmove","touchend","touchcancel","wheel","keydown","keyup"],XD=class LM extends MD{constructor(e,i){super(),this.keyboardOptions=e,this.domManager=i,this.debug=te.create(!0,"interaction"),this.eventHandler=s=>this.processEvent(s),this.clickHistory=[{offsetX:NaN,offsetY:NaN,type:"mousedown"}],this.dblclickHistory=[{offsetX:NaN,offsetY:NaN,type:"mousedown"},{offsetX:NaN,offsetY:NaN,type:"mouseup"},{offsetX:NaN,offsetY:NaN,type:"mousedown"}],this.stateQueue=34,this.rootElement=this.domManager.getShadowDocumentRoot();for(const s of KD)s.startsWith("touch")||s==="wheel"?this.domManager.addEventListener(s,this.eventHandler,{passive:!1}):this.domManager.addEventListener(s,this.eventHandler);for(const s of YD)he().addEventListener(s,this.eventHandler);this.containerChanged(!0),this.domManager.addListener("container-changed",()=>this.containerChanged())}containerChanged(e=!1){const i=this.domManager.getShadowDocumentRoot();if(!(!e&&i===this.rootElement)){for(const s of Km)this.rootElement?.removeEventListener(s,this.eventHandler);this.rootElement=i,this.debug("[InteractionManager] Switching rootElement to:",this.rootElement);for(const s of Km)this.rootElement?.addEventListener(s,this.eventHandler)}}destroy(){super.destroy();for(const e of YD)he().removeEventListener(e,this.eventHandler);for(const e of Km)this.rootElement?.removeEventListener(e,this.eventHandler);for(const e of KD)this.domManager.removeEventListener(e,this.eventHandler);this.domManager.removeStyles("interactionManager")}pushState(e){this.stateQueue|=e}popState(e){this.stateQueue&=~e}getState(){return this.stateQueue&-this.stateQueue}processEvent(e){this.debug("Received raw event",e);let i=this.decideInteractionEventTypes(e);i!=null&&!Array.isArray(i)&&(i=[i]);for(const s of i??[])this.dispatchEvent(e,s)}dispatchEvent(e,i){if(MX(i)){this.dispatchPointerEvent(e,i);return}const{relatedElement:s,targetElement:a}=this.extractElements(e);if(DX(i)){const n=e;this.dispatchTypedEvent(this.listeners,{type:i,sourceEvent:n,relatedElement:s,targetElement:a})}}dispatchTypedEvent(e,i){const s=ng(i);this.debug("Dispatching typed event",s,this.getState()),e.dispatchWrapHandlers(i.type,(a,n)=>a(n),s)}extractElements(e){let i,s;return"relatedTarget"in e&&e.relatedTarget instanceof HTMLElement&&(i=e.relatedTarget),"target"in e&&e.target instanceof HTMLElement&&(s=e.target),{relatedElement:i,targetElement:s}}dispatchPointerEvent(e,i){const s=this.calculateCoordinates(e);if(s==null)return;const a=this.buildPointerEvent({type:i,event:e,...s});this.debug("Dispatching pointer event",a,this.getState()),Hw(this.listeners,a)}getEventHTMLTarget(e){if(e.target instanceof HTMLElement)return e.target;if(e.currentTarget instanceof HTMLElement)return e.currentTarget}recordDown(e){e instanceof MouseEvent&&(il(["offsetX","offsetY"],this.clickHistory[0],e),il(["offsetX","offsetY"],this.dblclickHistory[2],this.dblclickHistory[0]),il(["offsetX","offsetY"],this.dblclickHistory[0],e))}recordUp(e){e instanceof MouseEvent&&il(["offsetX","offsetY"],this.dblclickHistory[1],e)}decideInteractionEventTypes(e){switch(e.type){case"keydown":case"keyup":return this.keyboardOptions.enabled?e.type:void 0;case"click":case"dblclick":return e.type;case"contextmenu":case"wheel":return e.type;case"touchstart":case"mousedown":if(!this.isEventOverElement(e))return;this.recordDown(e);return;case"touchmove":case"mousemove":return this.isEventOverElement(e)?"hover":void 0;case"mouseup":case"touchend":if(!this.isEventOverElement(e))return;this.recordUp(e);return;case"mouseleave":case"touchcancel":return"leave";case"mouseenter":return"enter";case"pagehide":return"page-left"}}isEventOverElement(e){return e.target instanceof HTMLElement&&this.domManager.contains(e.target)}calculateCoordinates(e){if(e instanceof MouseEvent)return this.getMouseEventCoords(e);if(typeof TouchEvent<"u"&&e instanceof TouchEvent){const i=e.touches[0]??e.changedTouches[0],{clientX:s,clientY:a,pageX:n,pageY:o}=i;return{...LM.NULL_COORDS,clientX:s,clientY:a,pageX:n,pageY:o}}else if(e instanceof PageTransitionEvent)return e.persisted?void 0:LM.NULL_COORDS}getMouseEventCoords(e){const{clientX:i,clientY:s,pageX:a,pageY:n}=e;let{offsetX:o,offsetY:r}=e;const l=this.getEventHTMLTarget(e),{x:c=0,y:h=0}=l?this.domManager.calculateCanvasPosition(l):{};return o+=c,r+=h,{clientX:i,clientY:s,pageX:a,pageY:n,offsetX:o,offsetY:r}}static isWheelEvent(e){return e.type==="wheel"}static getWheelDeltas(e){let[i,s]=[NaN,NaN];if(this.isWheelEvent(e)){const a=e.deltaMode===0?.01:1;i=e.deltaX*a,s=e.deltaY*a}return{deltaX:i,deltaY:s}}buildPointerEvent(e){const{type:i,event:s,clientX:a,clientY:n}=e;let{offsetX:o,offsetY:r,pageX:l,pageY:c}=e;if(!Vt(o)||!Vt(r)){const m=this.domManager.getBoundingClientRect();o=a-m.left,r=n-m.top}if(!Vt(l)||!Vt(c)){const m=this.rootElement?.getBoundingClientRect();l=a-(m?.left??0),c=n-(m?.top??0)}const{deltaX:h,deltaY:u}=LM.getWheelDeltas(s);let d=[];s.type==="click"?d=this.clickHistory:s.type==="dblclick"&&(d=this.dblclickHistory);const{relatedElement:p,targetElement:g}=this.extractElements(s),f="button"in s?Number(s.button):0,x={type:i,offsetX:o,offsetY:r,pageX:l,pageY:c,deltaX:h,deltaY:u,button:f,pointerHistory:d,sourceEvent:s,relatedElement:p,targetElement:g};return this.debug("InteractionManager - builtEvent: ",x,this.getState()),x}},XD.NULL_COORDS={clientX:-1/0,clientY:-1/0,pageX:-1/0,pageY:-1/0,offsetX:-1/0,offsetY:-1/0},Xm=XD}});function Kw(t){return t==null?!0:!isNaN(t)&&t>=0&&t<=2}var ZD,Xw=A({"packages/ag-charts-community/src/chart/interaction/animationManager.ts"(){"use strict";Ac(),He(),Nt(),XE(),St(),vX(),Yc(),ZD=class{constructor(t,e){this.interactionManager=t,this.chartUpdateMutex=e,this.defaultDuration=1e3,this.batch=new WD(this.defaultDuration*1.5),this.debug=te.create(!0,"animation"),this.events=new SD,this.rafAvailable=typeof requestAnimationFrame<"u",this.isPlaying=!0,this.requestId=null,this.skipAnimations=!0,this.currentAnonymousAnimationId=0}addListener(t,e){return this.events.on(t,e)}animate(t){const e=this.batch;try{e.checkOverlappingId(t.id)}catch(r){this.failsafeOnError(r);return}let{id:i}=t;i==null&&(i=`__${this.currentAnonymousAnimationId}`,this.currentAnonymousAnimationId+=1);const s=this.isSkipped()||t.phase==="none";s&&this.debug("AnimationManager - skipping animation");const{delay:a,duration:n}=t;if(!Kw(a))throw new Error(`Animation delay of ${a} is unsupported (${i})`);if(!Kw(n))throw new Error(`Animation duration of ${n} is unsupported (${i})`);const o=new KM({...t,id:i,skip:s,autoplay:this.isPlaying?t.autoplay:!1,phase:t.phase,defaultDuration:this.defaultDuration});if(!this.forceTimeJump(o,this.defaultDuration))return this.batch.addAnimation(o),o}play(){if(!this.isPlaying){this.isPlaying=!0,this.debug("AnimationManager.play()");try{this.batch.play()}catch(t){this.failsafeOnError(t)}this.requestAnimation()}}pause(){if(this.isPlaying){this.isPlaying=!1,this.cancelAnimation(),this.debug("AnimationManager.pause()");try{this.batch.pause()}catch(t){this.failsafeOnError(t)}}}stop(){this.isPlaying=!1,this.cancelAnimation(),this.debug("AnimationManager.stop()"),this.batch.stop()}stopByAnimationId(t){try{this.batch.stopByAnimationId(t)}catch(e){this.failsafeOnError(e)}}stopByAnimationGroupId(t){try{this.batch.stopByAnimationGroupId(t)}catch(e){this.failsafeOnError(e)}}reset(){this.isPlaying?(this.stop(),this.play()):this.stop()}skip(t=!0){this.skipAnimations=t}isSkipped(){return!this.rafAvailable||this.skipAnimations||this.batch.isSkipped()}isActive(){return this.isPlaying&&this.batch.isActive()}skipCurrentBatch(){this.debug.check()&&this.debug("AnimationManager - skipCurrentBatch()",{stack:new Error().stack}),this.batch.skip()}isSkippingFrames(){return!0}scheduleAnimationFrame(t){this.requestId=he().requestAnimationFrame(e=>{t(e).catch(i=>st.error(i))})}forceTimeJump(t,e){return!1}requestAnimation(){if(!this.rafAvailable||!this.batch.isActive()||this.requestId!==null)return;let t;const e=async i=>{const s=()=>{const a=i-(t??i);t=i,this.debug("AnimationManager - onAnimationFrame()",{controllersCount:this.batch.size,deltaTime:a}),this.interactionManager.pushState(2);try{this.batch.progress(a)}catch(n){this.failsafeOnError(n)}this.events.emit("animation-frame",{type:"animation-frame",deltaMs:a})};this.isSkippingFrames()?await this.chartUpdateMutex.acquireImmediately(s):await this.chartUpdateMutex.acquire(s),this.batch.isActive()?this.scheduleAnimationFrame(e):(this.batch.stop(),this.events.emit("animation-stop",{type:"animation-stop",deltaMs:this.batch.consumedTimeMs}))};this.events.emit("animation-start",{type:"animation-start",deltaMs:0}),this.scheduleAnimationFrame(e)}cancelAnimation(){this.requestId!==null&&(cancelAnimationFrame(this.requestId),this.requestId=null,this.startBatch())}failsafeOnError(t,e=!0){st.error("Error during animation, skipping animations",t),e&&this.cancelAnimation()}startBatch(t){this.debug(`AnimationManager - startBatch() with skipAnimations=${t}.`),this.reset(),this.batch.destroy(),this.batch=new WD(this.defaultDuration*1.5),t===!0&&this.batch.skip()}endBatch(){this.batch.isActive()?(this.batch.ready(),this.requestAnimation()):(this.interactionManager.popState(2),this.batch.isSkipped()&&this.batch.skip(!1))}onBatchStop(t){this.batch.stoppedCbs.add(t)}destroy(){this.stop(),this.events.clear()}}}}),$D,Zw=A({"packages/ag-charts-community/src/chart/interaction/chartEventManager.ts"(){"use strict";no(),$D=class extends fn{legendItemClick(t,e,i,s,a){const n={type:"legend-item-click",legendType:t,series:e,itemId:i,enabled:s,legendItemName:a};this.listeners.dispatch("legend-item-click",n)}legendItemDoubleClick(t,e,i,s,a,n){const o={type:"legend-item-double-click",legendType:t,series:e,itemId:i,enabled:s,legendItemName:n,numVisibleItems:a};this.listeners.dispatch("legend-item-double-click",o)}axisHover(t,e){const i={type:"axis-hover",axisId:t,direction:e};this.listeners.dispatch("axis-hover",i)}}}}),QD,$w=A({"packages/ag-charts-community/src/chart/interaction/contextMenuRegistry.ts"(){"use strict";ao(),og(),QD=class{constructor(){this.defaultActions=[],this.disabledActions=new Set,this.hiddenActions=new Set,this.listeners=new gn}static check(t,e){return e.type===t}static checkCallback(t,e,i){return t===e}dispatchContext(t,e,i,s){const{sourceEvent:a}=e,n=s?.x??e.canvasX,o=s?.y??e.canvasY;a.stopPropagation(),this.listeners.dispatch("",ng({type:t,x:n,y:o,context:i,sourceEvent:a}))}addListener(t){return this.listeners.addListener("",t)}filterActions(t){return this.defaultActions.filter(e=>e.id&&!this.hiddenActions.has(e.id)&&["all",t].includes(e.type))}registerDefaultAction(t){const e=t.id!=null&&!this.defaultActions.some(({id:i})=>i===t.id);return e&&this.defaultActions.push(t),()=>{const i=e?this.defaultActions.findIndex(({id:s})=>s===t.id):-1;i!==-1&&this.defaultActions.splice(i,1)}}enableAction(t){this.disabledActions.delete(t)}disableAction(t){this.disabledActions.add(t)}showAction(t){this.hiddenActions.add(t)}hideAction(t){this.hiddenActions.delete(t)}isDisabled(t){return this.disabledActions.has(t)}}}}),Kc,Zm=A({"packages/ag-charts-community/src/util/stateTracker.ts"(){"use strict";Kc=class extends Map{constructor(t,e){super(),this.defaultValue=t,this.defaultState=e}set(t,e){return this.delete(t),typeof e<"u"&&super.set(t,e),this}stateId(){return Array.from(this.keys()).pop()??this.defaultState}stateValue(){return Array.from(this.values()).pop()??this.defaultValue}}}}),qD,JD,Qw=A({"packages/ag-charts-community/src/chart/interaction/cursorManager.ts"(){"use strict";Zm(),qD=(t=>(t.Auto="auto",t.Default="default",t.Grab="grab",t.Grabbing="grabbing",t.Move="move",t.NotAllowed="not-allowed",t.Pointer="pointer",t.EWResize="ew-resize",t.NSResize="ns-resize",t.ZoomIn="zoom-in",t.ZoomOut="zoom-out",t))(qD||{}),JD=class{constructor(t){this.domManager=t,this.stateTracker=new Kc("default")}updateCursor(t,e){this.stateTracker.set(t,e),this.domManager.updateCursor(this.stateTracker.stateValue())}getCursor(){return this.domManager.getCursor()}}}});function AX(t,e){const i=t.screenX-e.screenX,s=t.screenY-e.screenY;return i*i+s*s}function qw(t,e){return Math.sqrt(AX(t,e))}var Jw,tA,tR=A({"packages/ag-charts-community/src/chart/interaction/gestureDetector.ts"(){"use strict";no(),St(),Yt(),og(),Jw=1,tA=class extends fn{constructor(t){super(),this.domManager=t,this.touchstart=e=>this.onTouchStart(e),this.touchmove=e=>this.onTouchMove(e),this.touchend=e=>this.onTouchEnd(e),this.touchcancel=e=>this.onTouchCancel(e),this.pinch={finger1:{identifier:NaN,screenX:NaN,screenY:NaN},finger2:{identifier:NaN,screenX:NaN,screenY:NaN},origin:{x:NaN,y:NaN},distance:NaN,status:0},this.domManager.addEventListener("touchstart",this.touchstart,{passive:!0}),this.domManager.addEventListener("touchmove",this.touchmove,{passive:!1}),this.domManager.addEventListener("touchend",this.touchend),this.domManager.addEventListener("touchcancel",this.touchcancel)}destroy(){this.domManager.removeEventListener("touchstart",this.touchstart),this.domManager.removeEventListener("touchmove",this.touchmove),this.domManager.removeEventListener("touchend",this.touchend),this.domManager.removeEventListener("touchcancel",this.touchcancel)}findPinchTouches(t){const{touches:e}=t,{finger1:i,finger2:s}=this.pinch;if(this.pinch.status!==0&&e.length===2){if(e[0].identifier===i.identifier&&e[1].identifier===s.identifier)return[e[0],e[1]];if(e[0].identifier===s.identifier&&e[1].identifier===i.identifier)return[e[1],e[0]]}}copyTouchData(t){const e=["identifier","screenX","screenY"];il(e,this.pinch.finger1,t.touches[0]),il(e,this.pinch.finger2,t.touches[1]),this.pinch.distance=qw(this.pinch.finger1,this.pinch.finger2)}dispatchPinchEvent(t,e,i){const{finger1:s,finger2:a,origin:n}=this.pinch;this.listeners.dispatch(t,ng({sourceEvent:i,type:t,finger1:s,finger2:a,deltaDistance:e,origin:n}))}onTouchStart(t){this.stopPinchTracking(t);const{pinch:e}=this;t.touches.length===2&&(e.status=1,this.copyTouchData(t),e.origin.x=(t.touches[0].clientX+t.touches[1].clientX)/2,e.origin.y=(t.touches[0].clientY+t.touches[1].clientY)/2)}onTouchMove(t){const e=this.findPinchTouches(t);if(e!==void 0){const[i,s]=e,{pinch:a}=this,n=qw(i,s),o=n-a.distance;a.status===1?Math.abs(o)>Jw&&(a.status=2,this.copyTouchData(t),this.dispatchPinchEvent("pinch-start",0,t)):a.status===2?(a.distance=n,this.copyTouchData(t),this.dispatchPinchEvent("pinch-move",o,t)):st.error(`unexpected pinch.status: ${a.status}`)}}onTouchEnd(t){this.stopPinchTracking(t)}onTouchCancel(t){this.stopPinchTracking(t)}stopPinchTracking(t){const{pinch:e}=this;e.status===2&&this.dispatchPinchEvent("pinch-end",0,t),this.pinch.status=0}}}}),eA,eR=A({"packages/ag-charts-community/src/chart/interaction/highlightManager.ts"(){"use strict";no(),Zm(),eA=class extends fn{constructor(){super(...arguments),this.highlightStates=new Kc}updateHighlight(t,e){const{activeHighlight:i}=this;this.highlightStates.set(t,e),this.activeHighlight=this.highlightStates.stateValue(),this.isEqual(this.activeHighlight,i)||this.listeners.dispatch("highlight-change",{type:"highlight-change",currentHighlight:this.activeHighlight,previousHighlight:i,callerId:t})}getActiveHighlight(){return this.activeHighlight}isEqual(t,e){return t===e||t!=null&&e!=null&&t?.series===e?.series&&t?.itemId===e?.itemId&&t?.datum===e?.datum}}}}),iA,iR=A({"packages/ag-charts-community/src/chart/interaction/keyNavManager.ts"(){"use strict";DD(),og(),iA=class extends MD{constructor(t,e){super(),this.interactionManager=t,this.previousInputDevice="keyboard";const i=e.getRegion("series"),s=41;this.destroyFns.push(t.addListener("click",()=>this.onClick(),s),t.addListener("hover",()=>this.onMouse(),s),t.addListener("wheel",()=>this.onClick(),s),t.addListener("keydown",a=>this.onKeyDown(a),63),i.addListener("drag-start",()=>this.onClick(),s))}getState(){return this.interactionManager.getState()}destroy(){super.destroy()}onClick(){this.focusIndicator?.overrideFocusVisible(!1),this.previousInputDevice="mouse"}onMouse(){this.previousInputDevice="mouse"}onKeyDown(t){const e=this.getState(),{key:i,code:s,altKey:a,shiftKey:n,metaKey:o,ctrlKey:r}=t.sourceEvent;if(r||o){if(i==="y"||i==="z"&&n)return this.focusIndicator?.overrideFocusVisible(this.previousInputDevice==="keyboard"),this.dispatch("redo",0,t);if(i==="z")return this.focusIndicator?.overrideFocusVisible(this.previousInputDevice==="keyboard"),this.dispatch("undo",0,t)}if(e&9){this.focusIndicator?.overrideFocusVisible(!1);return}switch(i){case"+":return this.dispatch("nav-zoom",1,t);case"-":return this.dispatch("nav-zoom",-1,t)}if(!(a||n||o||r))switch(this.focusIndicator?.overrideFocusVisible(!0),s){case"ArrowDown":return this.dispatch("nav-vert",1,t);case"ArrowUp":return this.dispatch("nav-vert",-1,t);case"ArrowLeft":return this.dispatch("nav-hori",-1,t);case"ArrowRight":return this.dispatch("nav-hori",1,t);case"ZoomIn":case"Add":return this.dispatch("nav-zoom",1,t);case"ZoomOut":case"Substract":return this.dispatch("nav-zoom",-1,t);case"Space":case"Enter":return this.dispatch("submit",0,t)}}dispatch(t,e,i){const{previousInputDevice:s}=this;Hw(this.listeners,{type:t,delta:e,sourceEvent:i,previousInputDevice:s});const a=["redo","undo","nav-zoom"];i.type==="keydown"&&!a.includes(t)&&(this.previousInputDevice="keyboard")}}}});function sR(t,e,i,s,a=32){return t?.addListener(i,n=>{e.getState()&a&&s(n)})??(()=>{})}function IX(t){if(t==null||!(t instanceof HTMLElement))return;let e=t;for(;e!=null&&!e?.classList.contains("ag-charts-wrapper");){if(e.classList.contains("ag-charts-tooltip"))return e;e=e.parentElement}}function kX(t){const{sourceEvent:e}=t,{className:i,classList:s,ariaHidden:a}=t.sourceEvent?.target??{};return i==="ag-charts-proxy-elem"||!(s instanceof DOMTokenList)?"leave":s.contains("ag-charts-annotations__axis-button-icon")||i==="ag-charts-swapchain"||i==="ag-charts-canvas-container"||i==="ag-charts-canvas-proxy"||e?.target instanceof HTMLCanvasElement?"none":IX(e.target)&&a!=="true"?"wait":"leave"}var $m,aR,nR,sA,oR=A({"packages/ag-charts-community/src/chart/interaction/regionManager.ts"(){"use strict";He(),ao(),Yc(),Yc(),og(),$m=class extends gn{},aR=300,nR=3,sA=class{constructor(t){this.interactionManager=t,this.debug=te.create(!0,"region"),this.regions={root:{properties:{name:"root"},listeners:new $m},series:{properties:{name:"series"},listeners:new $m}},this.destroyFns=[],this.allRegionsListeners=new $m,this.isDragMoving=!1,this.blockNextClickEvent=!1,this.processPointerEvent=e=>{const i=kX(e),{current:s}=this;let a=s;if(!this.isDragMoving&&this.deferredDragStart==null)switch(i){case"wait":return;case"none":a=this.pickRegion(e);break;case"leave":a=void 0;break}const n=a;s!==void 0&&n?.properties.name!==s.properties.name&&this.dispatch(s,e,"leave"),n!==void 0&&n.properties.name!==s?.properties.name&&this.dispatch(a,e,"enter"),n!==void 0&&this.dispatch(a,e),this.current=a}}destroy(){this.destroyFns.forEach(t=>t()),this.current=void 0,this.regions.root.listeners.destroy(),this.regions.series.listeners.destroy()}initRegions(t,e){this.regions.root.properties.widget=t,this.regions.series.properties.widget=e,t.addListener("wheel",this.processPointerEvent),t.addListener("contextmenu",this.processPointerEvent),t.addListener("click",this.processPointerEvent),t.addListener("dblclick",this.processPointerEvent),t.addListener("mouseenter",this.processPointerEvent),t.addListener("mousemove",this.processPointerEvent),t.addListener("mouseleave",this.processPointerEvent),t.addListener("drag-start",this.processPointerEvent),t.addListener("drag-move",this.processPointerEvent),t.addListener("drag-end",this.processPointerEvent)}getRegion(t){return this.makeObserver(this.regions[t])}listenAll(t,e,i=32){return sR(this.allRegionsListeners,this.interactionManager,t,e,i)}makeObserver(t){const{interactionManager:e}=this;class i{addListener(a,n,o=32){return sR(t?.listeners,e,a,n,o)}}return new i}widgetEventTypeToRegionEventType(t,e){return e!==void 0?e:{contextmenu:"contextmenu",click:"click",dblclick:"dblclick",mouseenter:"enter",mousemove:"hover",mouseleave:"leave",wheel:"wheel","drag-start":"drag-start","drag-move":"drag","drag-end":"drag-end"}[t.type]}computeEventOffsets(t,e,i){const{deltaX:s,deltaY:a}=Xm.getWheelDeltas(i.sourceEvent);if("mockRegion"in i.sourceEvent){const r=i.sourceEvent.mockRegion;if(r)return{deltaX:s,deltaY:a,...r}}const n=e.getElement().getBoundingClientRect(),o=t.getElement().getBoundingClientRect();return{canvasX:i.clientX-n.x,canvasY:i.clientY-n.y,regionX:i.clientX-o.x,regionY:i.clientY-o.y,deltaX:s,deltaY:a}}dispatch(t,e,i){const{widget:s}=t?.properties??{},{widget:a}=this.regions.root.properties;if(t==null||s==null||a==null)return;const n=ng({...this.computeEventOffsets(s,a,e),sourceEvent:e.sourceEvent,type:this.widgetEventTypeToRegionEventType(e,i),region:t.properties.name,timestamp:Date.now()});switch(n.type){case"drag-start":{this.deferredDragStart=n;break}case"drag":{if(this.deferredDragStart)if(this.canStartDrag(n))this.dispatchEvent(t,this.deferredDragStart);else return;this.dispatchEvent(t,n),this.deferredDragStart=void 0,this.isDragMoving=!0,this.blockNextClickEvent=!0;break}case"drag-end":{this.isDragMoving&&this.dispatchEvent(t,n),this.deferredDragStart=void 0,this.isDragMoving=!1;break}case"click":{this.blockNextClickEvent||this.dispatchEvent(t,n),this.blockNextClickEvent=!1;break}case"leave":case"enter":(!this.isDragMoving||this.deferredDragStart!=null)&&this.dispatchEvent(t,n);break;case"hover":{this.blockNextClickEvent=!1,this.dispatchEvent(t,n);break}default:{this.dispatchEvent(t,n);break}}}dispatchEvent(t,e){this.debug("Dispatching region event: ",e),this.allRegionsListeners.dispatch(e.type,e),t.listeners.dispatch(e.type,e)}pickRegion({sourceEvent:t}){return"mockRegion"in t&&t.mockRegion?t.mockRegion.region==="series"?this.regions.series:this.regions.root:t.target==this.regions.root?.properties.widget?.getElement()?this.regions.root:this.regions.series}canStartDrag(t){return this.deferredDragStart?t.timestamp-this.deferredDragStart.timestamp>aR?!0:Math.abs(t.canvasX-this.deferredDragStart.canvasX)+Math.abs(t.canvasY-this.deferredDragStart.canvasY)>nR:!1}}}});function aA(t){const e=t.yBar?.upperPoint??t.midPoint??t.series.datumMidPoint?.(t);if(e){const{x:i,y:s}=Ae.toCanvasPoint(t.series.contentGroup,e.x,e.y);return{canvasX:Math.round(i),canvasY:Math.round(s)}}}var nA=A({"packages/ag-charts-community/src/chart/series/seriesTypes.ts"(){"use strict";Ki()}}),rg,oA=A({"packages/ag-charts-community/src/chart/interaction/tooltipManager.ts"(){"use strict";Zm(),nA(),rg=class{constructor(t,e){this.domManager=t,this.tooltip=e,this.stateTracker=new Kc,this.suppressState=new Kc(!1),this.appliedState=null,e.setup(t),t.addListener("hidden",()=>this.tooltip.hide())}updateTooltip(t,e,i){this.tooltip.enabled&&(i??(i=this.stateTracker.get(t)?.content),this.stateTracker.set(t,{content:i,meta:e}),this.applyStates())}removeTooltip(t){this.tooltip.enabled&&(this.stateTracker.delete(t),this.applyStates())}suppressTooltip(t){this.suppressState.set(t,!0)}unsuppressTooltip(t){this.suppressState.delete(t)}getTooltipMeta(t){return this.stateTracker.get(t)?.meta}destroy(){this.domManager.removeStyles("tooltip")}applyStates(){const t=this.stateTracker.stateId(),e=t?this.stateTracker.get(t):null;if(this.suppressState.stateValue()||e?.meta==null||e?.content==null){this.appliedState=null,this.tooltip.hide();return}const i=this.domManager.getBoundingClientRect(),s=this.tooltip.bounds==="extended"?this.domManager.getOverlayClientRect():i;if(this.appliedState?.content===e?.content){const a=this.tooltip.isVisible();this.tooltip.show(s,i,e?.meta,null,a)}else this.tooltip.show(s,i,e?.meta,e?.content);this.appliedState=e}static makeTooltipMeta(t,e){const{canvasX:i,canvasY:s}=t,a=e.series.properties.tooltip,n={canvasX:i,canvasY:s,enableInteraction:a.interaction?.enabled??!1,lastPointerEvent:{type:t.type,canvasX:i,canvasY:s},showArrow:a.showArrow,position:{type:a.position.type,xOffset:a.position.xOffset,yOffset:a.position.yOffset}},o=aA(e);return(a.position.type==="node"||a.position.type==="sparkline")&&o?{...n,canvasX:o.canvasX,canvasY:o.canvasY}:n}}}});function LX(t){return{x:t.x1,y:t.y1}}function TX(t){return{x:t.x2,y:t.y2}}function NX(t){return{x:(t.x1+t.x2)/2,y:Math.min(t.y1,t.y2)}}function CX(t){return{x:(t.x1+t.x2)/2,y:(t.y1+t.y2)/2}}function OX(t){return{x:(t.x1+t.x2)/2,y:Math.max(t.y1,t.y2)}}function EX(t){return Math.abs(t.x2-t.x1)}function wX(t){return Math.abs(t.y2-t.y1)}function RX(t){return{x1:Math.round(t.x1),y1:Math.round(t.y1),x2:Math.round(t.x2),y2:Math.round(t.y2)}}function _X(t){return{x1:t.x1,y1:t.y1,x2:t.x2,y2:t.y2}}function PX(t,e,i,s){if(typeof t=="number")return{x1:t,y1:e,x2:i,y2:s};if("width"in t)return{x1:t.x,y1:t.y,x2:t.x+t.width,y2:t.y+t.height};throw new Error(`Values can not be converted into a vector4: [${JSON.stringify(t)}] [${e}] [${i}] [${s}]`)}function BX(){return{x1:0,y1:0,x2:0,y2:0}}var Qm,rR=A({"packages/ag-charts-community/src/util/vector4.ts"(){"use strict";Qm={bottomCenter:OX,center:CX,clone:_X,end:TX,from:PX,height:wX,round:RX,start:LX,topCenter:NX,origin:BX,width:EX}}});function qm(t,e,i,s,a){return e+(s-e)*((a-t)/(i-t))}function lR(t,e,i,s,a){return t+(a-e)*((i-t)/(s-e))}function cR(t,e,i){return[lR(t,i.min,e,i.max,0),lR(t,i.min,e,i.max,1)]}function zX(t,e,i){const[s,a]=cR(t.x1,t.x2,e),[n,o]=cR(t.y1,t.y2,i);return{x1:s,x2:a,y1:n,y2:o}}function hR(t,e,i,s,a,n){if(i<=a&&n<=s)return i;const o=a-i,r=n-s,l=Math.abs(o)<Math.abs(r)?o:r;return At(t,i+l,e)}function FX(t,e,i){const{x:s={min:0,max:1},y:a={min:0,max:1}}=e,n=Qm.from(i),o=Qm.from(t),r=zX(o,s,a),l=hR(r.x1,r.x2,o.x1,o.x2,n.x1,n.x2),c=hR(r.y1,r.y2,o.y1,o.y2,n.y1,n.y2);return{x:{min:qm(o.x1,s.min,o.x2,s.max,l),max:qm(o.x1,s.min,o.x2,s.max,l+t.width)},y:{min:qm(o.y1,a.min,o.y2,a.max,c),max:qm(o.y1,a.min,o.y2,a.max,c+t.height)}}}var jX=A({"packages/ag-charts-community/src/util/panToBBox.ts"(){"use strict";It(),rR()}}),uR,dR,rA,pR,gR=A({"packages/ag-charts-community/src/chart/interaction/zoomManager.ts"(){"use strict";Ui(),Mu(),Ue(),no(),ha(),St(),It(),jX(),Zm(),Ct(),fe(),uR=["rangeX","rangeY","ratioX","ratioY","autoScaleYAxis"],dR=class{constructor(){this.enabled=!1,this.padding=0,this.manuallyAdjusted=!1}},rA=class extends fn{constructor(){super(...arguments),this.mementoOriginatorKey="zoom",this.axisZoomManagers=new Map,this.state=new Kc(void 0,"initial"),this.axes=[],this.didLayoutAxes=!1,this.autoScaleYAxis=new dR,this.lastRestoredState=void 0,this.independentAxes=!1,this.navigatorModule=!1,this.zoomModule=!1,this.pendingMemento=void 0}addLayoutListeners(t){this.destroyFns.push(t.addListener("layout:complete",()=>{const{pendingMemento:e}=this,i=!this.didLayoutAxes;this.didLayoutAxes=!0,e?this.restoreMemento(e.version,e.mementoVersion,e.memento):i&&this.autoScaleYZoom("zoom-manager")}))}createMemento(){const t=this.getDefinedZoom(),e={rangeX:this.getRangeDirection(t.x,"x"),rangeY:this.getRangeDirection(t.y,"y"),ratioX:{start:t.x.min,end:t.x.max},ratioY:{start:t.y.min,end:t.y.max}};return this.autoScaleYAxis.enabled&&(e.autoScaleYAxis=!this.autoScaleYAxis.manuallyAdjusted),e}guardMemento(t){if(t==null)return!0;if(!ws(t))return!1;for(const e of Object.keys(t))if(!JM(uR,e))return!1;return!0}restoreMemento(t,e,i){const{independentAxes:s}=this;if(!this.axes||!this.didLayoutAxes){this.pendingMemento={version:t,mementoVersion:e,memento:i};return}this.pendingMemento=void 0;const a=this.getDefinedZoom();if(i?.rangeX?a.x=this.rangeToRatio(i.rangeX,"x")??{min:0,max:1}:i?.ratioX?a.x={min:i.ratioX.start??0,max:i.ratioX.end??1}:a.x={min:0,max:1},(!this.navigatorModule||this.zoomModule)&&(i?.rangeY?a.y=this.rangeToRatio(i.rangeY,"y")??{min:0,max:1}:i?.ratioY?a.y={min:i.ratioY.start??0,max:i.ratioY.end??1}:a.y={min:0,max:1}),i?.autoScaleYAxis!=null&&(this.autoScaleYAxis.manuallyAdjusted=!i.autoScaleYAxis),this.lastRestoredState=a,s!==!0){this.updateZoom("zoom-manager",a);return}const n=this.getPrimaryAxis("x"),o=this.getPrimaryAxis("y");for(const r of[n,o])r&&this.updateAxisZoom("zoom-manager",r.id,a[r.direction])}updateAxes(t){this.axes=t;const e=new Map(t.map(i=>[i.id,this.axisZoomManagers.get(i.id)]));this.axisZoomManagers.clear();for(const i of t)this.axisZoomManagers.set(i.id,e.get(i.id)??new pR(i));this.state.size>0&&t.length>0&&this.updateZoom(this.state.stateId(),this.state.stateValue())}setIndependentAxes(t=!0){this.independentAxes=t}setAutoScaleYAxis(t,e){this.autoScaleYAxis.enabled=t,this.autoScaleYAxis.padding=e}setNavigatorEnabled(t=!0){this.navigatorModule=t}setZoomModuleEnabled(t=!0){this.zoomModule=t}isZoomEnabled(){return this.zoomModule}updateZoom(t,e){if(this.axisZoomManagers.size===0){const i=this.state.stateId();(i==="initial"||i===t)&&this.state.set(t,e);return}this.state.set(t,e),this.axisZoomManagers.forEach(i=>{i.updateZoom(t,e?.[i.getDirection()])}),this.applyChanges(t)}updateAxisZoom(t,e,i){this.axisZoomManagers.get(e)?.updateZoom(t,i),this.applyChanges(t)}resetZoom(t){this.autoScaleYAxis.manuallyAdjusted=!1;const e=this.getRestoredZoom();this.updateZoom(t,{x:{min:e?.x?.min??0,max:e?.x?.max??1},y:{min:e?.y?.min??0,max:e?.y?.max??1}})}resetAxisZoom(t,e){const s=this.axisZoomManagers.get(e)?.getDirection();s!=null&&(s==="y"&&(this.autoScaleYAxis.manuallyAdjusted=!1),this.updateAxisZoom(t,e,this.getRestoredZoom()?.[s]??{min:0,max:1}))}setAxisManuallyAdjusted(t,e){this.axisZoomManagers.get(e)?.getDirection()==="y"&&(this.autoScaleYAxis.manuallyAdjusted=!0)}updatePrimaryAxisZoom(t,e,i){const s=this.getPrimaryAxis(e);s&&this.updateAxisZoom(t,s.id,i)}panToBBox(t,e,i){const s=this.getZoom();if(s===void 0||!s.x&&!s.y)return;if(!(e.width>0&&e.height>0&&Math.abs(i.width)<=Math.abs(e.width)&&Math.abs(i.height)<=Math.abs(e.height))){st.warnOnce("cannot pan to target BBox - chart too small?");return}const n=FX(e,s,i);this.independentAxes?(this.updatePrimaryAxisZoom(t,"x",n.x),this.updatePrimaryAxisZoom(t,"y",n.y)):this.updateZoom(t,n)}fireZoomPanStartEvent(t){this.listeners.dispatch("zoom-pan-start",{type:"zoom-pan-start",callerId:t})}extendToEnd(t,e,i){return this.extendWith(t,e,s=>Number(s)-i)}extendWith(t,e,i){const s=this.getPrimaryAxis(e);if(!s)return;const a=this.getDomainExtents(s);if(!a)return;const[,n]=a,o=i(n),r=this.rangeToRatio({start:o,end:n},e);r&&this.updateZoom(t,{[e]:r})}updateWith(t,e,i){const s=this.getPrimaryAxis(e);if(!s)return;const a=this.getDomainExtents(s);if(!a)return;let[n,o]=a;[n,o]=i(n,o);const r=this.rangeToRatio({start:n,end:o},e);r&&this.updateZoom(t,{[e]:r})}getZoom(){let t,e;if(this.axisZoomManagers.forEach(i=>{i.getDirection()==="x"?t??(t=i.getZoom()):i.getDirection()==="y"&&(e??(e=i.getZoom()))}),t||e)return{x:t,y:e}}getAxisZoom(t){return this.axisZoomManagers.get(t)?.getZoom()??{min:0,max:1}}getAxisZooms(){const t={};for(const[e,i]of this.axisZoomManagers.entries())t[e]={direction:i.getDirection(),zoom:i.getZoom()};return t}getRestoredZoom(){return this.lastRestoredState}autoScaleYZoom(t,e=!0){const{independentAxes:i,autoScaleYAxis:s}=this,a=this.getZoom();if(a?.x==null||!s.enabled||s.manuallyAdjusted)return;const{padding:n}=s,o=i?this.primaryAxisZoom("y",a.x,{padding:n}):this.combinedAxisZoom("y",a.x,{padding:n});if(o!=null){if(i){const r=this.getPrimaryAxis("y");(r==null?void 0:this.axisZoomManagers.get(r.id))?.updateZoom("zoom-manager",o)}else for(const r of this.axisZoomManagers.values())r.getDirection()==="y"&&r.updateZoom("zoom-manager",o);e&&this.applyChanges(t)}}applyChanges(t){if(this.autoScaleYZoom(t,!1),!Array.from(this.axisZoomManagers.values(),s=>s.applyChanges()).includes(!0))return;const i={};for(const[s,a]of this.axisZoomManagers.entries())i[s]=a.getZoom();this.listeners.dispatch("zoom-change",{type:"zoom-change",...this.getZoom(),axes:i,callerId:t})}getRangeDirection(t,e){const i=this.getPrimaryAxis(e);if(!i||!ie.is(i.scale)&&!_a.is(i.scale))return;const s=this.getDomainPixelExtents(i);if(!s)return;const[a,n]=s;let o,r;return a<=n?(o=i.scale.invert?.(0),r=i.scale.invert?.(a+(n-a)*t.max)):(o=i.scale.invert?.(a-(a-n)*t.min),r=i.scale.invert?.(0)),{start:o,end:r}}rangeToRatio(t,e){const i=this.getPrimaryAxis(e);if(!i)return;const s=this.getDomainPixelExtents(i);if(!s)return;const[a,n]=s,o=t.start==null?a:i.scale.convert?.(t.start),r=t.end==null?n:i.scale.convert?.(t.end);if(!Vt(o)||!Vt(r))return;const l=n-a,c=Math.abs((o-a)/l),h=Math.abs((r-a)/l);return{min:c,max:h}}getPrimaryAxis(t){return this.axes?.find(e=>e.direction===t)}getDomainExtents(t){const e=t.scale.getDomain?.(),i=e?.at(0),s=e?.at(-1);if(!(i==null||s==null))return[i,s]}getDomainPixelExtents(t){const e=t.scale.getDomain?.(),i=t.scale.convert?.(e?.at(0)),s=t.scale.convert?.(e?.at(-1));if(!(!Vt(i)||!Vt(s)))return[i,s]}getDefinedZoom(){const t=this.getZoom();return{x:{min:t?.x?.min??0,max:t?.x?.max??1},y:{min:t?.y?.min??0,max:t?.y?.max??1}}}zoomBounds(t,e,i,s){const a=t.scale,n=a.range;a.range=[0,1];const[o,r]=Gi(e.scale.domain);let l=1,c=!1,h=0,u=!1;for(const g of e.boundSeries){const[f,x]=g.getRange("y",[i.min,i.max]);let m=(f-o)/(r-o),b=(x-o)/(r-o);if([m,b]=Gi([m,b]),!Number.isFinite(m)||!Number.isFinite(b))continue;const{connectsToYAxis:v}=g;m<l&&(l=m,c=!v||f<0),b>h&&(h=b,u=!v||x>0)}a.range=n;const d=(c?s:0)+(u?s:0),p=(h-l)*(1+d);if(!(p<=0||p>=1)){if(c&&u){const g=(h+l)/2;l=g-p/2,h=g+p/2}else!c&&u?h=l+p:c&&!u&&(l=h-p);return l<0?(h+=-l,l=0):h>1&&(l-=h-1,h=1),{min:l,max:h}}}primaryAxisZoom(t,e,{padding:i=0}={}){const s=t==="x"?"y":"x",a=this.getPrimaryAxis(s),n=this.getPrimaryAxis(t);if(!(a==null||n==null))return this.zoomBounds(a,n,e,i)}combinedAxisZoom(t,e,{padding:i=0}={}){const s=t==="x"?"y":"x",a=new Map;for(const r of this.axes)if(r.direction===s)for(const l of r.boundSeries)a.set(l,r);let n=1,o=0;for(const r of this.axes)if(r.direction===t)for(const l of r.boundSeries){const c=a.get(l);if(c==null)continue;const h=this.zoomBounds(c,r,e,i);if(h==null)return;n=Math.min(n,h.min),o=Math.max(o,h.max)}if(!(n>o))return{min:n,max:o}}},pR=class{constructor(t){this.axis=t;const[e=0,i=1]=t.visibleRange;this.state=new Kc({min:e,max:i}),this.currentZoom=this.state.stateValue()}getDirection(){return this.axis.direction}updateZoom(t,e){this.state.set(t,e)}getZoom(){return $i(this.state.stateValue())}hasChanges(){const t=this.currentZoom,e=this.state.stateValue();return t.min!==e.min||t.max!==e.max}applyChanges(){const t=this.hasChanges();return this.currentZoom=this.state.stateValue(),t}}}}),fR,GX=A({"packages/ag-charts-community/src/chart/layout/seriesLabelLayoutManager.ts"(){"use strict";kt(),uE(),fR=class{constructor(){this.labelData=new Map}updateLabels(t,e,i=lt.zero){const s={x:-e.left,y:-e.top,width:i.width+e.left+e.right,height:i.height+e.top+e.bottom},a=new Set(t.map(o=>o.id));for(const o of this.labelData.keys())a.has(o)||this.labelData.delete(o);for(const o of t){const r=o.getLabelData();r.every(q5)&&this.labelData.set(o.id,r)}const n=J5(this.labelData,s,5);for(const o of t)o.updatePlacedLabelData?.(n.get(o.id)??[])}}}}),yR,VX=A({"packages/ag-charts-community/src/chart/legend/legendManager.ts"(){"use strict";no(),St(),Ct(),yR=class extends fn{constructor(t){super(),this.chartService=t,this.mementoOriginatorKey="legend",this.legendDataMap=new Map}createMemento(){return this.getData().filter(({hideInLegend:t,isFixed:e})=>!t&&!e).map(({enabled:t,seriesId:e,itemId:i,legendItemName:s})=>({visible:t,seriesId:e,itemId:i,legendItemName:s}))}guardMemento(t){return t==null||ce(t)}restoreMemento(t,e,i){i?.forEach(s=>{const{seriesId:a,data:n}=this.getRestoredData(s)??{};!a||!n||this.updateData(a,n)}),this.update()}getRestoredData(t){const{seriesId:e,itemId:i,legendItemName:s,visible:a}=t;if(e){const o=(this.legendDataMap.get(e)??[]).map(r=>{const l=r.seriesId===e&&(!i||r.itemId===i);return l&&r.isFixed&&this.warnFixed(r.seriesId,r.itemId),!r.isFixed&&l?{...r,enabled:a}:r});return{seriesId:e,data:o}}if(!(i==null&&s==null))for(const n of this.getData()){if(i!=null&&n.itemId!==i||s!=null&&n.legendItemName!==s)continue;if(n.isFixed){this.warnFixed(n.seriesId,i);return}const o=(this.legendDataMap.get(n.seriesId)??[]).map(r=>r.itemId===i||r.legendItemName===s?{...r,enabled:a}:r);return{seriesId:n.seriesId,data:o}}}warnFixed(t,e){st.warnOnce(`The legend item with seriesId [${t}] and itemId [${e}] is not configurable, this series item cannot be toggled through the legend.`)}update(t){this.listeners.dispatch("legend-change",{type:"legend-change",legendData:t??this.getData()})}updateData(t,e=[]){this.legendDataMap.set(t,e)}clearData(){this.legendDataMap.clear()}toggleItem({enabled:t,seriesId:e,itemId:i,legendItemName:s}){if(s){this.getData().forEach(r=>{const l=(this.legendDataMap.get(r.seriesId)??[]).map(c=>c.legendItemName===s?{...c,enabled:t}:c);this.updateData(r.seriesId,l)});return}const a=this.getData(e),n=a.length===1,o=a.map(r=>i==null&&n||r.itemId===i?{...r,enabled:t}:r);this.updateData(e,o)}getData(t){return t?this.legendDataMap.get(t)??[]:[...this.legendDataMap].reduce((e,[i,s])=>e.concat(s),[])}getDatum({seriesId:t,itemId:e}={}){return this.getData(t).find(i=>i.itemId===e)}getSeriesEnabled(t){const e=this.getData(t);if(e.length>0)return e.some(i=>i.enabled)}getItemEnabled({seriesId:t,itemId:e}={}){return this.getDatum({seriesId:t,itemId:e})?.enabled??!0}}}}),mR,UX=A({"packages/ag-charts-community/src/chart/series/seriesStateManager.ts"(){"use strict";mR=class{constructor(){this.groups={}}registerSeries({internalId:t,seriesGrouping:e,visible:i,type:s}){var a;e&&((a=this.groups)[s]??(a[s]={}),this.groups[s][t]={grouping:e,visible:i})}updateSeries({internalId:t,seriesGrouping:e,visible:i,type:s}){if(!e)return;const a=this.groups[s]?.[t];a&&(a.grouping=e,a.visible=i)}deregisterSeries({internalId:t,type:e}){this.groups[e]&&delete this.groups[e][t],this.groups[e]&&Object.keys(this.groups[e]).length===0&&delete this.groups[e]}getVisiblePeerGroupIndex({type:t,seriesGrouping:e,visible:i}){if(!e)return{visibleGroupCount:i?1:0,visibleSameStackCount:i?1:0,index:0};const s=new Set,a=new Set;for(const o of Object.values(this.groups[t]??{}))o.visible&&(s.add(o.grouping.groupIndex),o.grouping.groupIndex===e.groupIndex&&a.add(o.grouping.stackIndex));const n=Array.from(s);return n.sort((o,r)=>o-r),{visibleGroupCount:n.length,visibleSameStackCount:a.size,index:n.indexOf(e.groupIndex)}}}}}),Ru,ro=A({"packages/ag-charts-community/src/chart/chartUpdateType.ts"(){"use strict";Ru=(t=>(t[t.FULL=0]="FULL",t[t.UPDATE_DATA=1]="UPDATE_DATA",t[t.PROCESS_DATA=2]="PROCESS_DATA",t[t.PERFORM_LAYOUT=3]="PERFORM_LAYOUT",t[t.SERIES_UPDATE=4]="SERIES_UPDATE",t[t.PRE_SCENE_RENDER=5]="PRE_SCENE_RENDER",t[t.SCENE_RENDER=6]="SCENE_RENDER",t[t.NONE=7]="NONE",t))(Ru||{})}}),lA,xR=A({"packages/ag-charts-community/src/chart/updateService.ts"(){"use strict";ao(),ro(),lA=class extends gn{constructor(t){super(),this.updateCallback=t}update(t=0,e){this.updateCallback(t,e)}dispatchUpdateComplete(t){this.dispatch("update-complete",{type:"update-complete",minRect:t?.minRect,minVisibleRect:t?.minVisibleRect})}dispatchPreDomUpdate(){this.dispatch("pre-dom-update",{type:"pre-dom-update"})}dispatchPreSceneRender(t){this.dispatch("pre-scene-render",{type:"pre-scene-render",...t})}}}}),bR,WX=A({"packages/ag-charts-community/src/chart/chartContext.ts"(){"use strict";zK(),FK(),jK(),gw(),kw(),lX(),so(),UD(),xX(),bX(),SX(),Ww(),Xw(),Zw(),$w(),Qw(),tR(),eR(),Yc(),iR(),oR(),oA(),gR(),Jp(),GX(),VX(),UX(),xR(),bR=class{constructor(t,e){this.callbackCache=new Gw,this.chartEventManager=new $D,this.highlightManager=new eA,this.layoutManager=new vD,this.localeManager=new Nw,this.seriesStateManager=new mR,this.stateManager=new tw,this.zoomManager=new rA,this.seriesLabelLayoutManager=new fR,this.contextModules=[];const{scene:i,root:s,syncManager:a,container:n,updateCallback:o,updateMutex:r,pixelRatio:l,styleContainer:c,chartType:h}=e;this.chartService=t,this.syncManager=a,this.domManager=new wD(n,c);const u=this.domManager.addChild("canvas","scene-canvas",i?.canvas.element);this.scene=i??new sg({pixelRatio:l,canvasElement:u}),this.scene.setRoot(s),this.axisManager=new Uw(s),this.legendManager=new yR(this.chartService),this.annotationManager=new Vw(t.annotationRoot),this.chartTypeOriginator=new QE(t),this.cursorManager=new JD(this.domManager),this.interactionManager=new Xm(t.keyboard,this.domManager),this.regionManager=new sA(this.interactionManager),this.keyNavManager=new iA(this.interactionManager,this.regionManager),this.contextMenuRegistry=new QD,this.gestureDetector=new tA(this.domManager),this.updateService=new lA(o),this.proxyInteractionService=new zD(this.localeManager,this.domManager),this.historyManager=new JE(this.keyNavManager),this.animationManager=new ZD(this.interactionManager,r),this.dataService=new ag(this.animationManager),this.tooltipManager=new rg(this.domManager,t.tooltip),this.zoomManager.addLayoutListeners(this.layoutManager);for(const d of pn.byType("context")){if(!d.chartTypes.includes(h))continue;const p=d.moduleFactory(this);this.contextModules.push(p),this[d.contextKey]=p}}destroy(){this.animationManager.destroy(),this.highlightManager.destroy(),this.axisManager.destroy(),this.callbackCache.invalidateCache(),this.chartEventManager.destroy(),this.domManager.destroy(),this.highlightManager.destroy(),this.keyNavManager.destroy(),this.regionManager.destroy(),this.interactionManager.destroy(),this.proxyInteractionService.destroy(),this.syncManager.destroy(),this.tooltipManager.destroy(),this.zoomManager.destroy(),this.contextModules.forEach(t=>t.destroy())}}}}),cA,HX=A({"packages/ag-charts-community/src/chart/chartHighlight.ts"(){"use strict";Jt(),xt(),cA=class extends Mt{constructor(){super(...arguments),this.range="tooltip"}},M([I(ne(["tooltip","node"],"a range"))],cA.prototype,"range",2)}});function YX(t,e){if(t.size!==e.size)return!1;for(const i of t)if(!e.has(i))return!1;return!0}function KX(t,e){if(t==null||e==null)return t===e;if(t.size!==e.size)return!1;for(const[i,s]of t){const a=e.get(i);if(a==null||!YX(s,a))return!1}return!0}function XX(t,e){if(t.length!==e.length)return!1;for(let i=0;i<t.length;i+=1){const{idsMap:s,...a}=t[i],{idsMap:n,...o}=e[i];if(!Mc(a,o)||!KX(s,n))return!1}return!0}function ZX(t,e){const{props:i,...s}=t,{props:a,...n}=e;return Mc(s,n)&&XX(i,a)}function $X(t,e,i,s){return e===t.data&&sl(i,t.ids)&&ZX(s,t.opts)}var SR=A({"packages/ag-charts-community/src/chart/data/caching.ts"(){"use strict";Ue(),Yt()}}),hA,er,vR=A({"packages/ag-charts-community/src/chart/data/dataDomain.ts"(){"use strict";hA=class u3{constructor(){this.domain=new Set}static is(e){return e instanceof u3}extend(e){this.domain.add(e)}getDomain(){return Array.from(this.domain)}},er=class d3{constructor(){this.domain=[1/0,-1/0]}static is(e){return e instanceof d3}static extendDomain(e,i=[1/0,-1/0]){for(const s of e)typeof s=="number"&&(i[0]>s&&(i[0]=s),i[1]<s&&(i[1]=s));return i}extend(e){this.domain[0]>e&&(this.domain[0]=e),this.domain[1]<e&&(this.domain[1]=e)}getDomain(){return[...this.domain]}}}}),Xc,Zc,xn,MR,QX=A({"packages/ag-charts-community/src/chart/data/rangeLookup.ts"(){"use strict";Xc=0,Zc=1,xn=2,MR=class{constructor(t){const e=t.reduce((n,o)=>Math.max(n,o.length),0);let s=1<<32-Math.clz32(e);e===s/2&&(s=s>>>1),this.maxLevelSize=s;const a=new Float64Array((s*2-1)*2).fill(NaN);for(const n of t)for(let o=0;o<n.length;o+=1){const r=Number(n[o]),l=s+o-1,c=(l*xn|0)+Xc,h=(l*xn|0)+Zc,u=a[c],d=a[h];(!Number.isFinite(u)||r<u)&&(a[c]=r),(!Number.isFinite(d)||r>d)&&(a[h]=r)}for(let n=s/2|0;n>=1;n=n/2|0){const o=n-1|0,r=o+n|0;for(let l=0;l<n;l+=1){const c=o+l,h=r+l*2,u=h+1,d=a[(h*xn|0)+Xc],p=a[(u*xn|0)+Xc];a[(c*xn|0)+Xc]=!Number.isFinite(p)||d<p?d:p;const g=a[(h*xn|0)+Zc],f=a[(u*xn|0)+Zc];a[(c*xn|0)+Zc]=!Number.isFinite(f)||g>f?g:f}}this.buffer=a}computeRangeInto(t,e,i,s,a,n,o){const r=a+n-1;if(r<e||a>i)return o;if(a>=e&&r<=i){const l=t[(s*xn|0)+Xc],c=t[(s*xn|0)+Zc];Number.isFinite(l)&&(o[0]=Math.min(o[0],l)),Number.isFinite(c)&&(o[1]=Math.max(o[1],c))}else n>1&&(s=s*2|0,n=n/2|0,this.computeRangeInto(t,e,i,s+1|0,a,n,o),this.computeRangeInto(t,e,i,s+2|0,a+n,n,o));return o}rangeBetween(t,e){const{maxLevelSize:i,buffer:s}=this,a=[1/0,-1/0];return this.computeRangeInto(s,t,e,0,0,i,a),a}get range(){const{buffer:t}=this;return[t[Xc],t[Zc]]}}}});function qX(t){return t.map(e=>ws(e)?JSON.stringify(e):e).join("-")}function DR(t){return Number.isInteger(t)?t:Math.abs(t)>1e4?Math.trunc(t):Math.round(t*1e4)/1e4}function Fs(t){const e=t?.map(Number);return e?.every(Number.isFinite)?e:[]}function uA(t,e){return e?.get(t.id)??0}function Jm(t,e){const i=[];for(let s=0;s<t;s+=1)i[s]=e;return i}function lg(t,e){const i=[];for(const s of t){const a=s[e];if(a==null)return;i.push(a)}return i}function AR(t){const e=[];let i=0,s;const a=/((?:(?:^|\.)\s*\w+|\[\s*(?:'(?:[^']|(?<!\\)\\')*'|"(?:[^"]|(?<!\\)\\")*"|-?\d+)\s*\])\s*)/g;for(;s=a.exec(t);){if(s.index!==i)return;i=s.index+s[0].length;const n=s[1].trim();if(n.startsWith("."))e.push(n.slice(1).trim());else if(n.startsWith("[")){const o=n.slice(1,-1).trim();o.startsWith("'")?e.push(o.slice(1,-1).replace(/(?<!\\)\\'/g,"'")):o.startsWith('"')?e.push(o.slice(1,-1).replace(/(?<!\\)\\"/g,'"')):e.push(o)}else e.push(n)}if(i===t.length)return e}function JX(t){return e=>{let i=e;for(const s of t)i=i[s];return i}}function tZ(t){const e=(i,s)=>{s.length>0&&(st.log(`DataModel.processData() - ${i}`),st.table(s))};st.log("DataModel.processData() - processedData",t),e("Key Domains",t.domain.keys),e("Group Domains",t.domain.groups??[]),e("Value Domains",t.domain.values),e("Aggregate Domains",t.domain.aggValues??[])}var dA,_u,pA,Ga=A({"packages/ag-charts-community/src/chart/data/dataModel.ts"(){"use strict";He(),lp(),St(),It(),Ct(),vR(),QX(),dA=Symbol("domain-ranges"),_u=Symbol("invalid"),pA=class{constructor(t,e="standalone",i=!1){this.opts=t,this.mode=e,this.suppressFieldDotNotation=i,this.debug=te.create(!0,"data-model"),this.scopeCache=new Map,this.keys=[],this.values=[],this.aggregates=[],this.groupProcessors=[],this.propertyProcessors=[],this.reducers=[],this.processors=[];let s=!0;for(const n of t.props){if(n.type==="key"&&!s)throw new Error("AG Charts - internal config error: keys must come before values.");n.type==="value"&&s&&(s=!1)}const a=({matchGroupIds:n=[]})=>{for(const o of n)if(this.values.every(r=>r.groupId!==o))throw new Error(`AG Charts - internal config error: matchGroupIds properties must match defined groups (${o}).`)};for(const n of t.props)switch(n.type){case"key":this.keys.push({...n,index:this.keys.length,missing:new Map});break;case"value":if(n.property==null)throw new Error(`AG Charts - internal config error: no properties specified for value definitions: ${JSON.stringify(n)}`);this.values.push({...n,index:this.values.length,missing:new Map});break;case"aggregate":a(n),this.aggregates.push({...n,index:this.aggregates.length});break;case"group-value-processor":a(n),this.groupProcessors.push({...n,index:this.groupProcessors.length});break;case"property-value-processor":this.propertyProcessors.push({...n,index:this.propertyProcessors.length});break;case"reducer":this.reducers.push({...n,index:this.reducers.length});break;case"processor":this.processors.push({...n,index:this.processors.length});break}}resolveProcessedDataDefById(t,e){const i=this.scopeCache.get(t.id)?.get(e);if(!i)throw new Error(`AG Charts - didn't find property definition for [${e}, ${t.id}]`);return{index:i.index,def:i}}resolveProcessedDataIndexById(t,e){return this.resolveProcessedDataDefById(t,e).index}resolveProcessedDataDefsByIds(t,e){return e.map(i=>[i,this.resolveProcessedDataDefById(t,i)])}resolveKeysById(t,e,i){const s=this.resolveProcessedDataIndexById(t,e),a=i.keys[s];if(a==null)throw new Error(`AG Charts - didn't find keys for [${e}, ${t.id}]`);return a}resolveColumnById(t,e,i){const s=this.resolveProcessedDataIndexById(t,e),a=i.columns?.[s];if(a==null)throw new Error(`AG Charts - didn't find column for [${e}, ${t.id}]`);return a}resolveProcessedDataDefsValues(t,{keys:e,values:i}){const s={};for(const[a,{index:n,def:o}]of t){const r=o.type==="key"?e:i;s[a]=r[n]}return s}getDomain(t,e,i,s){return this.getDomainsByType(i??"value",s)?.[this.resolveProcessedDataIndexById(t,e)]??[]}getDomainBetweenRange(t,e,[i,s],a){const n=e.map(c=>this.resolveProcessedDataIndexById(t,c)),o=n.join(":"),r=a[dA];let l=r.get(o);if(l==null){const c=n.map(h=>a.columns[h]);l=new MR(c),r.set(o,l)}return l.rangeBetween(i,s)}getDomainsByType(t,e){switch(t){case"key":return e.domain.keys;case"value":return e.domain.values;case"aggregate":return e.domain.aggValues;case"group-value-processor":return e.domain.groups;default:return null}}processData(t,e){const{opts:{groupByKeys:i,groupByFn:s},aggregates:a,groupProcessors:n,reducers:o,processors:r,propertyProcessors:l}=this,c=performance.now();if(i&&this.keys.length===0)return;let h=this.extractData(t,e);i?h=this.groupData(h):s&&(h=this.groupData(h,s(h))),n.length>0&&this.postProcessGroups(h),a.length>0&&this.aggregateData(h),l.length>0&&this.postProcessProperties(h),o.length>0&&this.reduceData(h),r.length>0&&this.postProcessData(h),this.warnDataMissingProperties(t);const u=performance.now();return h.time=u-c,this.debug.check()&&tZ(h),this.processScopeCache(),h}warnDataMissingProperties(t){if(t.length!==0)for(const e of bc(this.keys,this.values))for(const[i,s]of e.missing){if(s<t.length)continue;const a=i==null?"":` for ${i}`;st.warnOnce(`the key '${e.property}' was not found in any data element${a}.`)}}processScopeCache(){this.scopeCache.clear();for(const t of bc(this.keys,this.values,this.aggregates))if(t.idsMap)for(const[e,i]of t.idsMap)for(const s of i)if(!this.scopeCache.has(e))this.scopeCache.set(e,new Map([[s,t]]));else{if(this.scopeCache.get(e)?.has(s))throw new Error("duplicate definition ids on the same scope are not allowed.");this.scopeCache.get(e).set(s,t)}}valueGroupIdxLookup({matchGroupIds:t}){const e=[];for(const[i,s]of this.values.entries())(!t||s.groupId&&t.includes(s.groupId))&&e.push(i);return e}valueIdxLookup(t,e){const i=t==null||t.length===0,s=typeof e=="string"?e:e.id,a=o=>{if(o.idsMap){for(const[r,l]of o.idsMap)if(t?.includes(r)&&l.has(s))return!0}return!1},n=this.values.reduce((o,r,l)=>((r.scopes==null||i&&!r.scopes.length||r.scopes.some(h=>t?.includes(h)))&&(r.property===s||r.id===s||a(r))&&o.push(l),o),[]);if(n.length===0)throw new Error(`AG Charts - configuration error, unknown property ${JSON.stringify(e)} in scope(s) ${JSON.stringify(t)}`);return n}extractData(t,e){const{dataDomain:i,processValue:s,scopes:a,allScopesHaveSameDefs:n}=this.initDataDomainProcessor(),o=new Map(e?.map(b=>[b.id,b])),{keys:r,values:l}=this,c=t.length;let h=0,u,d;const p=r.map(b=>{const{invalidValue:v}=b;return t.map((S,D)=>{const k=s(b,S,D);return k!==_u?k:(u??(u=Jm(c,!1)),u[D]=!0,d??(d=Jm(c,!1)),d[D]=!0,v)})});let g;const f=(b,v)=>{g??(g=new Map);let S=g.get(b);S==null&&(S=Jm(c,!1),g.set(b,S)),S[v]=!0,d??(d=Jm(c,!1)),d[v]=!0},x=[];l.forEach(b=>{const{invalidValue:v}=b,S=x.length>0?x[x.length-1]:void 0,D=t.map((k,L)=>{const T=u?.[L]===!0;let N=S?.[L];for(const C of b.scopes??a){const R=o.get(C)?.data[L]??k;N=s(b,R,L,N,C),(T||N===_u)&&f(C,L)}return T?v:N===_u?(h+=1,v):N});x.push(D)});const m=b=>{const v=i.get(b),S=v.getDomain();return er.is(v)&&S[0]>S[1]?[]:S};return{type:"ungrouped",input:{count:t.length},rawData:t,rawDataSources:e!=null?new Map(e.map(b=>[b.id,b.data])):void 0,aggregation:void 0,keys:p,columns:x,invalidKeys:u,invalidDataScopes:g,invalidData:d,domain:{keys:r.map(m),values:l.map(m)},defs:{allScopesHaveSameDefs:n,keys:r,values:l},partialValidDataCount:h,time:0,[dA]:new Map}}groupData(t,e){const i=new Map,{rawData:s,keys:a,invalidKeys:n,invalidDataScopes:o,invalidData:r}=t;for(let h=0;h<s.length;h+=1){const u=s[h],d=lg(a,h);if(d==null||d.length===0)continue;const p=e?.({index:h,keys:d,values:void 0,aggValues:void 0,datum:u,validScopes:void 0})??d,g=qX(p);if(n?.[h]===!0)continue;let f;if(o!=null&&r?.[h]===!0&&(f=new Set,o.forEach((m,b)=>{m[h]===!1&&f.add(b)}),f.size===0))continue;const x=i.get(g);if(x!=null){if(x.datumIndices.push(h),f!=null&&x.validScopes!=null)for(const m of x.validScopes)f.has(m)||x.validScopes.delete(m)}else i.set(g,{keys:p,datumIndices:[h],validScopes:f})}const l=[],c=[];for(const{keys:h,datumIndices:u,validScopes:d}of i.values())d?.size!==0&&(l.push(h),c.push({datumIndices:u,keys:h,aggregation:[],validScopes:d}));return{...t,type:"grouped",domain:{...t.domain,groups:l},groups:c}}aggregateData(t){const e=this.aggregates.map(()=>[1/0,-1/0]);t.domain.aggValues=e;const{keys:i,columns:s,rawData:a}=t;if(t.type==="ungrouped"){const n=a.map((o,r)=>{const l=[];for(const[c,h]of this.aggregates.entries()){const u=this.valueGroupIdxLookup(h);let d=h.groupAggregateFunction?.()??[1/0,-1/0];const p=u.map(m=>s[m][r]),g=lg(i,r),f=g!=null?h.aggregateFunction(p,g):void 0;f&&(d=h.groupAggregateFunction?.(f,d)??er.extendDomain(f,d));const x=(h.finalFunction?.(d)??d).map(m=>DR(m));l[c]=x,er.extendDomain(x,e[c])}return l});t.aggregation=n}else for(const[n,o]of this.aggregates.entries()){const r=this.valueGroupIdxLookup(o);for(const l of t.groups){if(l.aggregation??(l.aggregation=[]),l.validScopes!=null)continue;const c=l.keys;let h=o.groupAggregateFunction?.()??[1/0,-1/0];for(const d of l.datumIndices){const p=r.map(f=>s[f][d]),g=o.aggregateFunction(p,c);g&&(h=o.groupAggregateFunction?.(g,h)??er.extendDomain(g,h))}const u=(o.finalFunction?.(h)??h).map(d=>DR(d));l.aggregation[n]=u,er.extendDomain(u,e[n])}}}postProcessGroups(t){const{groupProcessors:e}=this,{rawData:i,columns:s,invalidData:a}=t;for(const n of e){const o=this.valueGroupIdxLookup(n),r=n.adjust()();for(let l=0;l<i.length;l+=1)a?.[l]!==!0&&r(s,o,l);for(const l of o){const h=this.values[l].valueType==="category",u=s[l],d=h?new hA:new er;for(let p=0;p<i.length;p+=1)a?.[p]!==!0&&d.extend(u[p]);t.domain.values[l]=d.getDomain()}}}postProcessProperties(t){for(const{adjust:e,property:i,scopes:s}of this.propertyProcessors)for(const a of this.valueIdxLookup(s,i))e()(t,a)}reduceData(t){t.reduced??(t.reduced={});for(const e of this.reducers){const i=e.reducer();let s=e.initialValue;const{rawData:a,keys:n,columns:o}=t;if(t.type==="grouped")for(const r of t.groups)(!r.validScopes||e.scopes?.some(l=>r.validScopes?.has(l)))&&(s=i(s,{index:r.datumIndices,keys:r.datumIndices.flatMap(l=>n.map(c=>c[l])),values:r.datumIndices.map(l=>o[l]),datum:r.datumIndices.map(l=>a[l])}));else for(let r=0;r<a.length;r+=1)s=i(s,{index:[r],keys:n.map(l=>l[r]),values:[o[r]],datum:[a[r]]});t.reduced[e.property]=s}}postProcessData(t){t.reduced??(t.reduced={});for(const e of this.processors)t.reduced[e.property]=e.calculate(t,t.reduced[e.property])}initDataDomainProcessor(){const{keys:t,values:e}=this,i=new Set;for(const c of e)if(c.scopes)for(const h of c.scopes)i.add(h);const s=new Map,a=new Map;let n=!0;const o=()=>{for(const c of bc(t,e))c.valueType==="category"?s.set(c,new hA):(s.set(c,new er),n&&(n=(c.scopes??[]).length===i.size))};o();const r=this.buildAccessors(bc(t,e));return{dataDomain:s,processValue:(c,h,u,d,p)=>{let g,f;if(r.has(c.property)){try{f=r.get(c.property)(h)}catch{}g=f!=null}else g=c.property in h,f=g?h[c.property]:c.missingValue;c.forceValue!=null&&(f=g&&Gy(f)?-1*c.forceValue:c.forceValue,g=!0);const x="missingValue"in c;if(!g&&!x){const m=c.missing.get(p)??0;c.missing.set(p,m+1)}if(s.has(c)||o(),g&&c.validation?.(f,h,u)===!1)if("invalidValue"in c)f=c.invalidValue;else return this.mode!=="integrated"&&st.warnOnce(`invalid value of type [${typeof f}] for [${c.scopes} / ${c.id}] ignored:`,`[${f}]`),_u;return c.processor&&(a.has(c)||a.set(c,c.processor()),f=a.get(c)?.(f,d===_u?void 0:d)),s.get(c)?.extend(f),f},initDataDomain:o,scopes:i,allScopesHaveSameDefs:n}}buildAccessors(t){const e=new Map;if(this.suppressFieldDotNotation)return e;for(const i of t){if(!(i.property.includes(".")||i.property.includes("[")))continue;const a=AR(i.property);if(a==null){st.warnOnce("Invalid property path [%s]",i.property);continue}const n=JX(a);e.set(i.property,n)}return e}}}}),gA,fA,IR=A({"packages/ag-charts-community/src/chart/data/dataController.ts"(){"use strict";He(),Nt(),SR(),Ga(),gA=class $r{constructor(e,i){this.mode=e,this.suppressFieldDotNotation=i,this.debug=te.create(!0,"data-model"),this.requested=[],this.status="setup"}async request(e,i,s){if(this.status!=="setup")throw new Error("AG Charts - data request after data setup phase.");return new Promise((a,n)=>{this.requested.push({id:e,opts:s,data:i,resolve:a,reject:n})})}execute(e){if(this.status!=="setup")throw new Error("AG Charts - data request after data setup phase.");this.status="executed",this.debug("DataController.execute() - requested",this.requested);const i=this.validateRequests(this.requested);this.debug("DataController.execute() - validated",i);const s=this.mergeRequested(i);this.debug("DataController.execute() - merged",s),this.debug.check()&&(he().processedData=[]);const a=[];for(const{data:n,ids:o,opts:r,resolves:l,rejects:c}of s){const h=e?.find(p=>$X(p,n,o,r));let u,d;if(h==null)try{u=new pA(r,this.mode,this.suppressFieldDotNotation),d=u.processData(n,i)}catch(p){c.forEach(g=>g(p));continue}else({dataModel:u,processedData:d}=h);a.push({opts:r,data:n,ids:o,dataModel:u,processedData:d}),this.debug.check()&&he("processedData").push(d),d?.partialValidDataCount===0?l.forEach(p=>p({dataModel:u,processedData:d})):d?this.splitResult(u,d,o,l):c.forEach(p=>p(new Error("AG Charts - no processed data generated")))}return a}validateRequests(e){const i=[];for(const[s,a]of e.entries())s>0&&a.data.length!==e[0].data.length&&a.opts.groupByData===!1?a.reject(new Error("all series[].data arrays must be of the same length and have matching keys.")):i.push(a);return i}mergeRequested(e){const i=[];for(const s of e){const a=i.find($r.groupMatch(s));a?a.push(s):i.push([s])}return i.map($r.mergeRequests)}splitResult(e,i,s,a){for(let n=0;n<s.length;n++){const o=a[n];o({dataModel:e,processedData:i})}}static groupMatch({data:e,opts:i}){function s(c){return c.filter(h=>h.type==="key").map(h=>h.property).join(";")}const{groupByData:a,groupByKeys:n=!1,groupByFn:o,props:r}=i,l=s(r);return([c])=>(a===!1||c.data===e)&&(c.opts.groupByKeys??!1)===n&&c.opts.groupByFn===o&&s(c.opts.props)===l}static mergeRequests(e){return e.reduce((i,{id:s,data:a,resolve:n,reject:o,opts:{props:r,...l}})=>{i.ids.push(s),i.rejects.push(o),i.resolves.push(n),i.data??(i.data=a),i.opts??(i.opts={...l,props:[]});for(const c of r){const h={...c,scopes:[s]};$r.createIdsMap(s,h);const u=i.opts.props.find(d=>d.type===h.type&&$r.deepEqual(d,h));if(!u){i.opts.props.push(h);continue}u.scopes??(u.scopes=[]),u.scopes.push(...h.scopes??[]),(u.type==="key"||u.type==="value")&&h.idsMap?.size&&$r.mergeIdsMap(h.idsMap,u.idsMap)}return i},{ids:[],rejects:[],resolves:[],data:null,opts:null})}static mergeIdsMap(e,i){for(const[s,a]of e){const n=i.get(s);if(n==null)i.set(s,new Set(a));else for(const o of a)n.add(o)}}static createIdsMap(e,i){i.id!=null&&(i.idsMap??(i.idsMap=new Map),i.idsMap.has(e)?i.idsMap.get(e).add(i.id):i.idsMap.set(e,new Set([i.id])))}static deepEqual(e,i){if(e===i)return!0;if(e&&i&&typeof e=="object"&&typeof i=="object"){if(e.constructor!==i.constructor)return!1;let s,a;if(Array.isArray(e)){if(a=e.length,a!==i.length)return!1;for(s=a-1;s>=0;s--)if(!$r.deepEqual(e[s],i[s]))return!1;return!0}const n=Object.keys(e);if(a=n.length,a!==Object.keys(i).length)return!1;for(s=a-1;s>=0;s--){const o=n[s];if(!$r.skipKeys.has(o)&&(!Object.hasOwn(i,o)||!$r.deepEqual(e[o],i[o])))return!1}return!0}return!1}},gA.skipKeys=new Set(["id","idsMap","type","scopes"]),fA=gA}}),kR,lo,Pu=A({"packages/ag-charts-community/src/chart/factory/axisRegistry.ts"(){"use strict";kR=class{constructor(){this.axesMap=new Map,this.hidden=new Set,this.themeTemplates=new Map}register(t,e){this.axesMap.set(t,e.moduleFactory),e.themeTemplate&&this.setThemeTemplate(t,e.themeTemplate),e.hidden&&this.hidden.add(t)}create(t,e){const i=this.axesMap.get(t);if(i)return i(e);throw new Error(`AG Charts - unknown axis type: ${t}`)}has(t){return this.axesMap.has(t)}keys(){return this.axesMap.keys()}publicKeys(){return[...this.keys()].filter(t=>!this.hidden.has(t))}setThemeTemplate(t,e){return this.themeTemplates.set(t,e),this}getThemeTemplate(t){return this.themeTemplates.get(t)}},lo=new kR}});function eZ(t){return Qc.some(e=>e.type==="series"&&e.identifier===t)}function $c(t){return Qc.find(e=>e.type==="series"&&e.identifier===t)?.chartTypes}function iZ(t){return $c(t)?.find(i=>i==="cartesian")==="cartesian"}function sZ(t){return $c(t)?.find(i=>i==="polar")==="polar"}function aZ(t){return $c(t)?.find(i=>i==="hierarchy")==="hierarchy"}function nZ(t){return $c(t)?.find(i=>i==="topology")==="topology"}function oZ(t){return $c(t)?.find(i=>i==="flow-proportion")==="flow-proportion"}function rZ(t){return $c(t)?.find(i=>i==="standalone")==="standalone"}function lZ(t){return $c(t)?.find(i=>i==="gauge")==="gauge"}function cZ(t){return t.packageType==="enterprise"}function hZ(t){if(!cZ(t))throw new Error("AG Charts - internal configuration error, only enterprise modules need verification.");const e=Qc.find(i=>i.type===t.type&&("optionsKey"in i&&"optionsKey"in t?i.optionsKey===t.optionsKey:!0)&&("contextKey"in i&&"contextKey"in t?i.contextKey===t.contextKey:!0)&&i.identifier===t.identifier&&t.chartTypes.every(s=>i.chartTypes.includes(s)));return e&&(e.useCount??(e.useCount=0),e.useCount++),e!=null}function uZ(){return Qc.filter(({useCount:t})=>t==null||t===0)}var Qc,cg=A({"packages/ag-charts-community/src/chart/factory/expectedEnterpriseModules.ts"(){"use strict";Qc=[{type:"root",optionsKey:"animation",chartTypes:["cartesian","polar","hierarchy","topology","flow-proportion","standalone","gauge"]},{type:"root",optionsKey:"annotations",chartTypes:["cartesian"]},{type:"root",optionsKey:"background",chartTypes:["cartesian","polar","hierarchy","topology","flow-proportion","standalone","gauge"],optionsInnerKey:"image"},{type:"root",optionsKey:"foreground",chartTypes:["cartesian","polar","hierarchy","topology","flow-proportion","standalone","gauge"],optionsInnerKey:"image"},{type:"root",optionsKey:"chartToolbar",chartTypes:["cartesian"]},{type:"root",optionsKey:"contextMenu",chartTypes:["cartesian","polar","hierarchy","topology","flow-proportion","standalone","gauge"]},{type:"root",optionsKey:"statusBar",chartTypes:["cartesian"],identifier:"status-bar"},{type:"root",optionsKey:"dataSource",chartTypes:["cartesian","polar","hierarchy","topology","flow-proportion","standalone","gauge"]},{type:"root",optionsKey:"sync",chartTypes:["cartesian"]},{type:"root",optionsKey:"zoom",chartTypes:["cartesian","topology"]},{type:"root",optionsKey:"ranges",chartTypes:["cartesian"]},{type:"legend",optionsKey:"gradientLegend",chartTypes:["cartesian","polar","hierarchy","topology","flow-proportion","standalone","gauge"],identifier:"gradient"},{type:"root",optionsKey:"navigator",chartTypes:["cartesian"]},{type:"axis",optionsKey:"axes[]",chartTypes:["polar"],identifier:"angle-category"},{type:"axis",optionsKey:"axes[]",chartTypes:["polar"],identifier:"angle-number"},{type:"axis",optionsKey:"axes[]",chartTypes:["polar"],identifier:"radius-category"},{type:"axis",optionsKey:"axes[]",chartTypes:["polar"],identifier:"radius-number"},{type:"series",optionsKey:"series[]",chartTypes:["cartesian"],identifier:"bar",community:!0},{type:"series",optionsKey:"series[]",chartTypes:["cartesian"],identifier:"line",community:!0},{type:"axis",optionsKey:"axes[]",chartTypes:["cartesian"],identifier:"ordinal-time"},{type:"axis-option",optionsKey:"crosshair",chartTypes:["cartesian"]},{type:"series",optionsKey:"series[]",chartTypes:["cartesian"],identifier:"box-plot"},{type:"series",optionsKey:"series[]",chartTypes:["cartesian"],identifier:"candlestick"},{type:"series",optionsKey:"series[]",chartTypes:["cartesian"],identifier:"cone-funnel"},{type:"series",optionsKey:"series[]",chartTypes:["cartesian"],identifier:"funnel"},{type:"series",optionsKey:"series[]",chartTypes:["cartesian"],identifier:"ohlc"},{type:"series",optionsKey:"series[]",chartTypes:["cartesian"],identifier:"heatmap"},{type:"series",optionsKey:"series[]",chartTypes:["cartesian"],identifier:"range-area"},{type:"series",optionsKey:"series[]",chartTypes:["cartesian"],identifier:"range-bar"},{type:"series",optionsKey:"series[]",chartTypes:["cartesian"],identifier:"waterfall"},{type:"series",optionsKey:"series[]",chartTypes:["polar"],identifier:"nightingale"},{type:"series",optionsKey:"series[]",chartTypes:["polar"],identifier:"radar-area"},{type:"series",optionsKey:"series[]",chartTypes:["polar"],identifier:"radar-line"},{type:"series",optionsKey:"series[]",chartTypes:["polar"],identifier:"radial-bar"},{type:"series",optionsKey:"series[]",chartTypes:["polar"],identifier:"radial-column"},{type:"series",optionsKey:"series[]",chartTypes:["hierarchy"],identifier:"sunburst"},{type:"series",optionsKey:"series[]",chartTypes:["hierarchy"],identifier:"treemap"},{type:"series",optionsKey:"series[]",chartTypes:["topology"],identifier:"map-shape"},{type:"series",optionsKey:"series[]",chartTypes:["topology"],identifier:"map-line"},{type:"series",optionsKey:"series[]",chartTypes:["topology"],identifier:"map-marker"},{type:"series",optionsKey:"series[]",chartTypes:["topology"],identifier:"map-shape-background"},{type:"series",optionsKey:"series[]",chartTypes:["topology"],identifier:"map-line-background"},{type:"series",optionsKey:"series[]",chartTypes:["flow-proportion"],identifier:"chord"},{type:"series",optionsKey:"series[]",chartTypes:["flow-proportion"],identifier:"sankey"},{type:"series",optionsKey:"series[]",chartTypes:["standalone"],identifier:"pyramid"},{type:"series",optionsKey:"series[]",chartTypes:["gauge"],identifier:"linear-gauge"},{type:"series",optionsKey:"series[]",chartTypes:["gauge"],identifier:"radial-gauge"},{type:"series-option",optionsKey:"errorBar",chartTypes:["cartesian"],identifier:"error-bars"},{type:"context",contextKey:"sharedToolbar",chartTypes:["cartesian"]}]}}),LR,tx,yA=A({"packages/ag-charts-community/src/chart/factory/legendRegistry.ts"(){"use strict";LR=class{constructor(){this.legendMap=new Map,this.themeTemplates=new Map}register(t,{optionsKey:e,moduleFactory:i,themeTemplate:s}){this.legendMap.set(t,{optionsKey:e,moduleFactory:i}),this.themeTemplates.set(e,s)}create(t,e){const i=this.legendMap.get(t)?.moduleFactory;if(i)return i(e);throw new Error(`AG Charts - unknown legend type: ${t}`)}getThemeTemplates(){return Object.fromEntries(this.themeTemplates)}getKeys(){return Array.from(this.legendMap.entries()).reduce((t,[e,i])=>(t[e]=i.optionsKey,t),{})}},tx=new LR}}),mA,TR,le,xA,ex,Bu=A({"packages/ag-charts-community/src/chart/factory/chartTypes.ts"(){"use strict";Yt(),mA=class extends Map{get(t){return super.get(t)??"unknown"}isCartesian(t){return this.get(t)==="cartesian"}isPolar(t){return this.get(t)==="polar"}isHierarchy(t){return this.get(t)==="hierarchy"}isTopology(t){return this.get(t)==="topology"}isFlowProportion(t){return this.get(t)==="flow-proportion"}isStandalone(t){return this.get(t)==="standalone"}isGauge(t){return this.get(t)==="gauge"}get seriesTypes(){return Array.from(this.keys())}get cartesianTypes(){return this.seriesTypes.filter(t=>this.isCartesian(t))}get polarTypes(){return this.seriesTypes.filter(t=>this.isPolar(t))}get hierarchyTypes(){return this.seriesTypes.filter(t=>this.isHierarchy(t))}get topologyTypes(){return this.seriesTypes.filter(t=>this.isTopology(t))}get flowProportionTypes(){return this.seriesTypes.filter(t=>this.isFlowProportion(t))}get standaloneTypes(){return this.seriesTypes.filter(t=>this.isStandalone(t))}get gaugeTypes(){return this.seriesTypes.filter(t=>this.isGauge(t))}},TR=class extends Map{set(t,e){return super.set(t,Lt(e,this.get(t)))}},le=new mA,xA=new mA,ex=new TR}}),NR,js,ix=A({"packages/ag-charts-community/src/chart/factory/seriesRegistry.ts"(){"use strict";ha(),Yt(),Bu(),NR=class{constructor(){this.seriesMap=new Map,this.themeTemplates=new Map}register(t,{chartTypes:[e],moduleFactory:i,tooltipDefaults:s,defaultAxes:a,themeTemplate:n,paletteFactory:o,solo:r,stackable:l,groupable:c,stackedByDefault:h,hidden:u}){this.setThemeTemplate(t,n),this.seriesMap.set(t,{moduleFactory:i,tooltipDefaults:s,defaultAxes:a,paletteFactory:o,solo:r,stackable:l,groupable:c,stackedByDefault:h}),le.set(t,e),u||xA.set(t,e)}create(t,e){const i=this.seriesMap.get(t)?.moduleFactory;if(i)return i(e);throw new Error(`AG Charts - unknown series type: ${t}`)}cloneDefaultAxes(t,e){const i=this.seriesMap.get(t)?.defaultAxes;if(i==null)return null;const s=typeof i=="function"?i(e):i;return{axes:$i(s)}}setThemeTemplate(t,e){const i=this.themeTemplates.get(t);this.themeTemplates.set(t,Lt(e,i))}getThemeTemplate(t){return this.themeTemplates.get(t)}getPaletteFactory(t){return this.seriesMap.get(t)?.paletteFactory}getTooltipDefauls(t){return this.seriesMap.get(t)?.tooltipDefaults}isSolo(t){return this.seriesMap.get(t)?.solo??!1}isGroupable(t){return this.seriesMap.get(t)?.groupable??!1}isStackable(t){return this.seriesMap.get(t)?.stackable??!1}isStackedByDefault(t){return this.seriesMap.get(t)?.stackedByDefault??!1}},js=new NR}}),sx,CR,dZ=A({"packages/ag-charts-community/src/chart/interaction/syncManager.ts"(){"use strict";no(),sx=class ou extends fn{constructor(e){super(),this.chart=e}subscribe(e=ou.DEFAULT_GROUP){let i=this.get(e);return i||(i=new Set,ou.chartsGroups.set(e,i)),i.add(this.chart),this}unsubscribe(e=ou.DEFAULT_GROUP){return this.get(e)?.delete(this.chart),this}getChart(){return this.chart}getGroup(e=ou.DEFAULT_GROUP){const i=this.get(e);return i?Array.from(i):[]}getGroupSiblings(e=ou.DEFAULT_GROUP){return this.getGroup(e).filter(i=>i!==this.chart)}get(e){return ou.chartsGroups.get(e)}},sx.chartsGroups=new Map,sx.DEFAULT_GROUP=Symbol("sync-group-default"),CR=sx}}),ax,pZ=A({"packages/ag-charts-community/src/chart/keyboard.ts"(){"use strict";Jt(),xt(),ax=class extends Mt{constructor(){super(...arguments),this.enabled=!1}},M([I(pt)],ax.prototype,"enabled",2),M([I(wt)],ax.prototype,"tabIndex",2)}});function gZ(t){return typeof t=="string"&&bA.includes(t)}function fZ(t){const e=[],i=[],s=[...bA];for(const a of t)a instanceof yl&&(gZ(a.position)?i.push(a.position):e.push(a));for(const a of e){let n;do n=s.pop();while(n&&i.includes(n));if(n==null)break;a.position=n}}var bA,yZ=A({"packages/ag-charts-community/src/chart/mapping/prepareAxis.ts"(){"use strict";Lu(),bA=["top","right","bottom","left"]}});function mZ(t,e,i){const s=(c,h,u)=>{const d=[c];for(const p of OR)p in h&&h[p]!=null&&d.push(`${p}=${h[p]}`);return u?.seriesGrouping&&d.push(`seriesGrouping.groupId=${u?.seriesGrouping.groupId}`),d.join(";")},a=new Map;let n=0;for(const c of t){const h=s(c.type,c.properties,i?.[n]);a.has(h)||a.set(h,[]),a.get(h)?.push([c,n++])}const o=new Map;n=0;for(const c of e){const h=s(c.type,c,c);o.has(h)||o.set(h,[]),o.get(h)?.push([c,n++])}if(![...a.keys()].some(c=>o.has(c)))return{status:"no-overlap",oldKeys:a.keys(),newKeys:o.keys()};const l=[];for(const[c,h]of o.entries())for(const[u,d]of h){const p=a.get(c);if(p==null||p.length<1){l.push({opts:u,targetIdx:d,idx:d,status:"add"}),a.delete(c);continue}const[g,f]=p.shift(),x=i?.[f]??{},m=eo(x,u??{}),{groupIndex:b,stackIndex:v}=m?.seriesGrouping??{};b!=null||v!=null?l.push({opts:u,series:g,diff:m,targetIdx:d,idx:f,status:"series-grouping"}):m?l.push({opts:u,series:g,diff:m,targetIdx:d,idx:f,status:"update"}):l.push({opts:u,series:g,targetIdx:d,idx:f,status:"no-op"}),p.length===0&&a.delete(c)}for(const c of a.values())for(const[h,u]of c)l.push({series:h,idx:u,targetIdx:-1,status:"remove"});return{status:"overlap",changes:l}}var OR,xZ=A({"packages/ag-charts-community/src/chart/mapping/prepareSeries.ts"(){"use strict";ha(),OR=["direction","xKey","yKey","sizeKey","angleKey","radiusKey","normalizedTo"]}});function ir(t){const{series:e}=t;if(e)return e[0]?.type??"line"}function hg(t){const e=ir(t);return e==null?!1:le.isCartesian(e)||iZ(e)}function nx(t){const e=ir(t);return e==null?!1:le.isPolar(e)||sZ(e)}function SA(t){const e=ir(t);return e==null?!1:le.isHierarchy(e)||aZ(e)}function vA(t){const e=ir(t);return e==null?!1:le.isTopology(e)||nZ(e)}function MA(t){const e=ir(t);return e==null?!1:le.isFlowProportion(e)||oZ(e)}function ox(t){const e=ir(t);return e==null?!1:le.isStandalone(e)||rZ(e)}function rx(t){const e=ir(t);return e==null?!1:le.isGauge(e)||lZ(e)}function bZ(t){const e=ir(t);return nx(t)&&e!=="pie"&&e!=="donut"}function SZ(t){return t==null?!1:le.has(t)}function vZ(t){return t==null?!1:lo.has(t)}var lx=A({"packages/ag-charts-community/src/chart/mapping/types.ts"(){"use strict";Pu(),Bu(),cg()}}),ER,MZ=A({"packages/ag-charts-community/src/chart/modulesManager.ts"(){"use strict";M0(),Jt(),ER=class extends lm{applyOptions(t){for(const e of this.moduleMap.values())e.module.optionsKey in t&&Zn(e.moduleInstance)&&e.moduleInstance.set(t[e.module.optionsKey])}*legends(){for(const{module:t,moduleInstance:e}of this.moduleMap.values())t.type==="legend"&&(yield{legendType:t.identifier,legend:e})}}}}),cx,DA,xl,AA=A({"packages/ag-charts-community/src/chart/overlay/overlay.ts"(){"use strict";Nt(),Jt(),xt(),cx="ag-charts-overlay",DA="ag-charts-dark-overlay",xl=class extends Mt{constructor(t,e){super(),this.className=t,this.defaultMessageId=e,this.enabled=!0}getText(t){return t.t(this.text??this.defaultMessageId)}getElement(t,e,i){if(this.content?.remove(),this.focusBox=i,this.renderer){const s=this.renderer();if(s instanceof HTMLElement)this.content=s;else{const a=Wt("div");a.innerHTML=s,this.content=a.firstElementChild}}else{const s=Wt("div",{display:"flex",alignItems:"center",justifyContent:"center",boxSizing:"border-box",height:"100%",margin:"8px",font:"12px Verdana, sans-serif"});s.innerText=this.getText(e),this.content=s,t?.animate({from:0,to:1,id:"overlay",phase:"add",groupId:"opacity",onUpdate(a){s.style.opacity=String(a)},onStop(){s.style.opacity="1"}})}return this.content}removeElement(t=()=>this.content?.remove(),e){if(this.content){if(e){const{content:i}=this;e.animate({from:1,to:0,phase:"remove",id:"overlay",groupId:"opacity",onUpdate(s){i.style.opacity=String(s)},onStop(){t?.()}})}else t?.();this.content=void 0,this.focusBox=void 0}}},M([I(pt)],xl.prototype,"enabled",2),M([I(J,{optional:!0})],xl.prototype,"text",2),M([I(Yi,{optional:!0})],xl.prototype,"renderer",2)}}),qc,DZ=A({"packages/ag-charts-community/src/chart/overlay/chartOverlays.ts"(){"use strict";Jt(),xt(),AA(),qc=class extends Mt{constructor(){super(...arguments),this.darkTheme=!1,this.loading=new xl("ag-charts-loading-overlay","overlayLoadingData"),this.noData=new xl("ag-charts-no-data-overlay","overlayNoData"),this.noVisibleSeries=new xl("ag-charts-no-visible-series","overlayNoVisibleSeries"),this.unsupportedBrowser=new xl("ag-charts-unsupported-browser","overlayUnsupportedBrowser")}getFocusInfo(t){for(const e of[this.loading,this.noData,this.noVisibleSeries,this.unsupportedBrowser])if(e.focusBox!==void 0)return{text:e.getText(t),rect:e.focusBox}}destroy(){this.loading.removeElement(),this.noData.removeElement(),this.noVisibleSeries.removeElement(),this.unsupportedBrowser.removeElement()}},M([I(pt)],qc.prototype,"darkTheme",2),M([I(ct)],qc.prototype,"loading",2),M([I(ct)],qc.prototype,"noData",2),M([I(ct)],qc.prototype,"noVisibleSeries",2),M([I(ct)],qc.prototype,"unsupportedBrowser",2)}});function AZ(t,e){const{animationDuration:i}=du.add,s=i*e,a=Wt("div",`${cx}--loading`,{display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column",height:"100%",boxSizing:"border-box",font:"13px Verdana, sans-serif",userSelect:"none",animation:`ag-charts-loading ${s}ms linear 50ms both`}),n=Wt("span",{width:"45px",height:"40px",backgroundImage:["linear-gradient(#0000 calc(1 * 100% / 6), #ccc 0 calc(3 * 100% / 6), #0000 0), ","linear-gradient(#0000 calc(2 * 100% / 6), #ccc 0 calc(4 * 100% / 6), #0000 0), ","linear-gradient(#0000 calc(3 * 100% / 6), #ccc 0 calc(5 * 100% / 6), #0000 0)"].join(""),backgroundSize:"10px 400%",backgroundRepeat:"no-repeat",animation:"ag-charts-loading-matrix 1s infinite linear"}),o=Wt("p",{marginTop:"1em"});o.innerText=t;const r=Wt("div",`${cx}__loading-background`,{position:"absolute",inset:"0",opacity:"0.5",zIndex:"-1"}),l=Wt("style");return l.innerText=["@keyframes ag-charts-loading { from { opacity: 0 } to { opacity: 1 } }","@keyframes ag-charts-loading-matrix {","0% { background-position: 0% 0%, 50% 0%, 100% 0%; }","100% { background-position: 0% 100%, 50% 100%, 100% 100%; }","}"].join(" "),a.replaceChildren(l,n,o,r),a}var IZ=A({"packages/ag-charts-community/src/chart/overlay/loadingSpinner.ts"(){"use strict";Ac(),Nt(),AA()}}),IA,kA,hx=A({"packages/ag-charts-community/src/chart/series/seriesZIndexMap.ts"(){"use strict";IA=(t=>(t[t.BACKGROUND=0]="BACKGROUND",t[t.ANY_CONTENT=1]="ANY_CONTENT",t))(IA||{}),kA=(t=>(t[t.FOREGROUND=0]="FOREGROUND",t[t.HIGHLIGHT=1]="HIGHLIGHT",t[t.LABEL=2]="LABEL",t))(kA||{})}}),LA,wR,RR,zu,ux,Jc,Ds=A({"packages/ag-charts-community/src/chart/series/series.ts"(){"use strict";M0(),me(),Wp(),wa(),ha(),ao(),lE(),jy(),Yt(),HE(),vs(),fe(),hx(),LA=(t=>(t[t.EXACT_SHAPE_MATCH=0]="EXACT_SHAPE_MATCH",t[t.NEAREST_NODE=1]="NEAREST_NODE",t[t.AXIS_ALIGNED=2]="AXIS_ALIGNED",t))(LA||{}),wR=.25,RR=.125,zu=class{constructor(t,e,{datum:i},s){this.type=t,this.event=e,this.datum=i,this.seriesId=s.id}},ux=class{constructor(t,e,i){this.series=t,this.seriesGrouping=e,this.oldGrouping=i,this.type="groupingChanged"}},Jc=class extends xD{constructor(t){super(),this.destroyFns=[],this.usesPlacedLabels=!1,this.seriesGrouping=void 0,this.NodeEvent=zu,this.internalId=Ea(this),this.contentGroup=new Xi({name:`${this.internalId}-content`,zIndex:1}),this.highlightGroup=new Xi({name:`${this.internalId}-highlight`,zIndex:1}),this.annotationGroup=new Xi({name:`${this.internalId}-annotation`}),this.labelGroup=new Xi({name:`${this.internalId}-series-labels`}),this.axes={x:void 0,y:void 0},this.directions=["x","y"],this.nodeDataRefresh=!0,this.moduleMap=new lm,this.datumCallbackCache=new Map,this.connectsToYAxis=!1,this._declarationOrder=-1,this.seriesListeners=new gn,this._pickNodeCache=new bm;const{moduleCtx:e,pickModes:i,directionKeys:s={},directionNames:a={},canHaveAxes:n=!1,usesPlacedLabels:o=!1}=t;this.ctx=e,this.directionKeys=s,this.directionNames=a,this.canHaveAxes=n,this.usesPlacedLabels=o,this.highlightGroup=new Xi({name:`${this.internalId}-highlight`}),this.highlightNode=this.highlightGroup.appendChild(new mt({name:"highlightNode",zIndex:0})),this.highlightLabel=this.highlightGroup.appendChild(new mt({name:"highlightLabel",zIndex:10})),this.pickModes=i}get pickModeAxis(){return"main"}get id(){return this.properties?.id??this.internalId}get type(){return this.constructor.type??""}get data(){return this._data??this._chartData}set visible(t){this.properties.visible=t,this.ctx.legendManager.toggleItem({enabled:t,seriesId:this.id}),this.ctx.legendManager.update(),this.visibleMaybeChanged()}get visible(){return this.ctx.legendManager.getSeriesEnabled(this.id)??this.properties.visible}get hasData(){return this.data!=null&&this.data.length>0}get tooltipEnabled(){return this.properties.tooltip?.enabled??!1}onDataChange(){this.nodeDataRefresh=!0,this._pickNodeCache.clear()}setOptionsData(t){this._data=t,this.onDataChange()}setChartData(t){this._chartData=t,this.data===t&&this.onDataChange()}onSeriesGroupingChange(t,e){const{internalId:i,type:s,visible:a}=this;t&&this.ctx.seriesStateManager.deregisterSeries(this),e&&this.ctx.seriesStateManager.registerSeries({internalId:i,type:s,visible:a,seriesGrouping:e}),this.fireEvent(new ux(this,e,t))}getBandScalePadding(){return{inner:1,outer:0}}attachSeries(t,e,i){t.appendChild(this.contentGroup),e.appendChild(this.highlightGroup),e.appendChild(this.labelGroup),i?.appendChild(this.annotationGroup)}detachSeries(t,e,i){t?.removeChild(this.contentGroup),e.removeChild(this.highlightGroup),e.removeChild(this.labelGroup),i?.removeChild(this.annotationGroup)}setSeriesIndex(t){return t===this._declarationOrder?!1:(this._declarationOrder=t,this.contentGroup.zIndex=[1,t,0],this.highlightGroup.zIndex=[1,t,1],this.labelGroup.zIndex=[1,t,2],this.annotationGroup.zIndex=t,!0)}renderToOffscreenCanvas(){return!1}addEventListener(t,e){return super.addEventListener(t,e)}addListener(t,e){return this.seriesListeners.addListener(t,e)}dispatch(t,e){this.seriesListeners.dispatch(t,e)}addChartEventListeners(){}destroy(){this.destroyFns.forEach(t=>t()),this.destroyFns=[],this.resetDatumCallbackCache(),this.ctx.seriesStateManager.deregisterSeries(this)}getDirectionValues(t,e){const i=this.resolveKeyDirection(t),s=e?.[i],a=[];if(!s)return a;const n=(...o)=>{for(const r of o)Array.isArray(r)?n(...r):typeof r=="object"?n(...Object.values(r)):a.push(r)};return n(...s.map(o=>this.properties[o])),a}getKeys(t){return this.getDirectionValues(t,this.directionKeys)}getKeyProperties(t){return this.directionKeys[this.resolveKeyDirection(t)]??[]}getNames(t){return this.getDirectionValues(t,this.directionNames)}resolveKeyDirection(t){return t}getDomain(t){const e=this.getSeriesDomain(t),i=this.moduleMap.mapModules(s=>s.getDomain(t)).flat();return i.length!==0?e.concat(i):e}getRange(t,e){return this.getSeriesRange(t,e)}markNodeDataDirty(){this.nodeDataRefresh=!0,this._pickNodeCache.clear(),this.visibleMaybeChanged()}visibleMaybeChanged(){this.ctx.seriesStateManager.updateSeries(this)}getOpacity(){const{dimOpacity:e=1,enabled:i=!0}=this.properties.highlightStyle.series;if(!i||e===1)return 1;switch(this.isItemIdHighlighted()){case 0:case 1:return 1;case 2:default:return e}}getStrokeWidth(t){const{strokeWidth:e,enabled:i=!0}=this.properties.highlightStyle.series;if(!i||e===void 0)return t;switch(this.isItemIdHighlighted()){case 1:return e;case 0:case 2:return t}}isItemIdHighlighted(){const t=this.ctx.highlightManager?.getActiveHighlight()?.series;return t==null?0:t!==this?2:1}getModuleTooltipParams(){return this.moduleMap.mapModules(t=>t.getTooltipParams()).reduce((t,e)=>Object.assign(t,e),{})}pickNode(t,e,i=!1){const{pickModes:s,pickModeAxis:a,visible:n,contentGroup:o}=this;if(!n||!o.visible||e==="highlight"&&!this.properties.highlight.enabled||e==="highlight-tooltip"&&!this.properties.highlight.enabled)return;let r=1/0;if(e==="tooltip"||e==="highlight-tooltip"){const{tooltip:d}=this.properties;r=typeof d.range=="number"?d.range:1/0,i||(i=d.range==="exact")}else if(e==="event"||e==="context-menu"){const{nodeClickRange:d}=this.properties;r=typeof d=="number"?d:1/0,i||(i=d==="exact")}const l=s.filter(d=>!i||d===0),{x:c,y:h}=t,u=JSON.stringify({x:c,y:h,maxDistance:r,selectedPickModes:l});if(this._pickNodeCache.has(u))return this._pickNodeCache.get(u);for(const d of l){let p;switch(d){case 0:p=this.pickNodeExactShape(t);break;case 1:p=this.pickNodeClosestDatum(t);break;case 2:p=a!=null?this.pickNodeMainAxisFirst(t,a==="main-category"):void 0;break}if(p&&p.distance<=r)return this._pickNodeCache.set(u,{pickMode:d,match:p.datum,distance:p.distance})}return this._pickNodeCache.set(u,void 0)}pickNodeExactShape(t){const e=this.contentGroup.pickNode(t.x,t.y);if(e&&e.datum.missing!==!0)return{datum:e.datum,distance:0}}pickNodeClosestDatum(t){throw new Error("AG Charts - Series.pickNodeClosestDatum() not implemented")}pickNodeNearestDistantObject(t,e){const i=Fy(t.x,t.y,e);if(i.nearest!==void 0&&i.nearest.datum.missing!==!0)return{datum:i.nearest.datum,distance:Math.sqrt(i.distanceSquared)}}pickNodeMainAxisFirst(t,e){throw new Error("AG Charts - Series.pickNodeMainAxisFirst() not implemented")}getLabelData(){return[]}updatePlacedLabelData(t){}fireNodeClickEvent(t,e){this.fireEvent(new this.NodeEvent("nodeClick",t,e,this))}fireNodeDoubleClickEvent(t,e){this.fireEvent(new this.NodeEvent("nodeDoubleClick",t,e,this))}createNodeContextMenuActionEvent(t,e){return new this.NodeEvent("nodeContextMenuAction",t,e,this)}onLegendInitialState(t,e){const{visible:i=!0,itemId:s,legendItemName:a}=e??{};this.toggleSeriesItem(i,t,s,a)}onLegendItemClick(t){const{enabled:e,itemId:i,series:s,legendType:a}=t,n="legendItemName"in this.properties?this.properties.legendItemName:void 0,o="legendItemKey"in this.properties?this.properties.legendItemKey:void 0,r=n!=null&&n===t.legendItemName;(s.id===this.id||r||o!=null)&&this.toggleSeriesItem(e,a,i,n,t)}onLegendItemDoubleClick(t){const{enabled:e,itemId:i,series:s,numVisibleItems:a,legendType:n}=t,o="legendItemName"in this.properties?this.properties.legendItemName:void 0,r="legendItemKey"in this.properties?this.properties.legendItemKey:void 0,l=o!=null&&o===t.legendItemName;s.id===this.id||l||r!=null?this.toggleSeriesItem(!0,n,i,o,t):e&&a===1?this.toggleSeriesItem(!0,n,void 0,o):this.toggleSeriesItem(!1,n,void 0,o)}toggleSeriesItem(t,e,i,s,a){const n=this.id;(t||e!=="category")&&(this.visible=t),this.nodeDataRefresh=!0,this._pickNodeCache.clear();const o={type:"seriesVisibilityChange",seriesId:n,itemId:i,legendItemName:a?.legendItemName??s,visible:t};this.fireEvent(o),this.ctx.legendManager.toggleItem({enabled:t,seriesId:n,itemId:i,legendItemName:s})}isEnabled(){return this.visible}getModuleMap(){return this.moduleMap}createModuleContext(){return{...this.ctx,series:this}}getLabelText(t,e,i=Up){return t.formatter?this.ctx.callbackCache.call(t.formatter,{seriesId:this.id,...e})??i(e.value):i(e.value)}getMarkerStyle(t,e,i=t.getStyle()){const s={size:e.datum.point?.size??0},a=Lt(s,i);if(t.itemStyler){const n=this.ctx.callbackCache.call(t.itemStyler,{seriesId:this.id,...a,...e,datum:e.datum.datum});return Lt(n,a)}return a}updateMarkerStyle(t,e,i,s=e.getStyle(),{applyTranslation:a=!0,selected:n=!0}={}){const{point:o}=i.datum,r=this.getMarkerStyle(e,i,s),l=this.visible&&r.size>0&&o&&!isNaN(o.x)&&!isNaN(o.y);if(a?t.setProperties({visible:l,...r,translationX:o?.x,translationY:o?.y}):t.setProperties({visible:l,...r}),n||(t.fillOpacity*=wR,t.strokeOpacity*=RR),typeof e.shape=="function"&&!t.dirtyPath){t.path.clear(!0),t.updatePath(),t.checkPathDirty();const c=t.getBBox();if(o!==void 0&&c.isFinite()){const h=c.computeCenter(),[u,d]=["x","y"].map(g=>(r.strokeWidth??0)+Math.abs(h[g]-o[g])),p=Math.max(c.width+u,c.height+d);o.focusSize=p}}}getMinRects(t,e){}get nodeDataDependencies(){return this._nodeDataDependencies??{seriesRectWidth:NaN,seriesRectHeight:NaN}}checkResize(t){const{width:e,height:i}=t??{width:NaN,height:NaN},s=t?{seriesRectWidth:e,seriesRectHeight:i}:void 0,a=eo(this.nodeDataDependencies,s)!=null;return a&&(this._nodeDataDependencies=s,this.markNodeDataDirty()),a}pickFocus(t){}resetDatumCallbackCache(){this.datumCallbackCache.clear()}cachedDatumCallback(t,e){const{datumCallbackCache:i}=this,s=i.get(t);if(s!=null)return s;const a=e();return i.set(t,a),a}},Jc.highlightedZIndex=1e12,M([ua({changeValue:function(t,e){this.onSeriesGroupingChange(e,t)}})],Jc.prototype,"seriesGrouping",2)}});function kZ(t,e){const i=-e/t;return t!==0&&i>=0&&i<=1?[i]:[]}function LZ(t,e,i){if(t===0)return kZ(e,i);const s=e*e-4*t*i,a=[];if(s===0){const n=-e/(2*t);n>=0&&n<=1&&a.push(n)}else if(s>0){const n=Math.sqrt(s),o=(-e-n)/(2*t),r=(-e+n)/(2*t);o>=0&&o<=1&&a.push(o),r>=0&&r<=1&&a.push(r)}return a}function TZ(t,e,i,s){if(t===0)return LZ(e,i,s);const a=e/t,n=i/t,o=s/t,r=(3*n-a*a)/9,l=(9*a*n-27*o-2*a*a*a)/54,c=r*r*r+l*l,h=1/3,u=[];if(c>=0){const d=Math.sqrt(c),p=Math.sign(l+d)*Math.pow(Math.abs(l+d),h),g=Math.sign(l-d)*Math.pow(Math.abs(l-d),h),f=Math.abs(Math.sqrt(3)*(p-g)/2),x=-h*a+(p+g);if(x>=0&&x<=1&&u.push(x),f===0){const m=-h*a-(p+g)/2;m>=0&&m<=1&&u.push(m)}}else{const d=Math.acos(l/Math.sqrt(-r*r*r)),p=h*a,g=2*Math.sqrt(-r),f=g*Math.cos(h*d)-p,x=g*Math.cos(h*(d+2*Math.PI))-p,m=g*Math.cos(h*(d+4*Math.PI))-p;f>=0&&f<=1&&u.push(f),x>=0&&x<=1&&u.push(x),m>=0&&m<=1&&u.push(m)}return u}var NZ=A({"packages/ag-charts-community/src/scene/polyRoots.ts"(){"use strict"}});function Fu(t,e,i,s,a,n,o,r){const l=(i-t)*(r-n)-(s-e)*(o-a);if(l===0)return 0;const c=((o-a)*(e-n)-(t-a)*(r-n))/l,h=((i-t)*(e-n)-(s-e)*(t-a))/l;return c>=0&&c<=1&&h>=0&&h<=1?1:0}function CZ(t,e,i,s,a,n,o,r,l,c,h,u){let d=0;const p=c-u,g=h-l,f=l*(u-c)-c*(h-l),x=_R(t,i,a,o),m=_R(e,s,n,r),b=p*x[0]+g*m[0],v=p*x[1]+g*m[1],S=p*x[2]+g*m[2],D=p*x[3]+g*m[3]+f,k=TZ(b,v,S,D);for(const L of k){const T=L*L,N=L*T,C=x[0]*N+x[1]*T+x[2]*L+x[3],O=m[0]*N+m[1]*T+m[2]*L+m[3];let R;l===h?R=(O-c)/(u-c):R=(C-l)/(h-l),R>=0&&R<=1&&d++}return d}function _R(t,e,i,s){return[-t+3*e-3*i+s,3*t-6*e+3*i,-3*t+3*e,t]}function PR(t,e,i,s,a,n,o,r,l,c){if(isNaN(t)||isNaN(e))return 0;n&&([a,s]=[s,a]);const h=(c-r)/(l-o),u=r-h*o,d=Math.pow(h,2)+1,p=2*(h*(u-e)-t),g=Math.pow(t,2)+Math.pow(u-e,2)-Math.pow(i,2),f=Math.pow(p,2)-4*d*g;if(f<0)return 0;const x=(-p+Math.sqrt(f))/2/d,m=(-p-Math.sqrt(f))/2/d;let b=0;return[x,m].forEach(v=>{if(!(v>=Math.min(o,l)&&v<=Math.max(o,l)))return;const D=h*v+u,k=v-t,L=D-e,T=Math.atan2(L,k);Ba(T,s,a)&&b++}),b}var BR=A({"packages/ag-charts-community/src/scene/intersection.ts"(){"use strict";Ti(),NZ()}});function dx(t,e,i,s,a){return(1-a)**3*t+3*(1-a)**2*a*e+3*(1-a)*a**2*i+a**3*s}function px(t,e,i,s,a){if(a<=Math.min(t,s))return t<s?0:1;if(a>=Math.max(t,s))return t<s?1:0;let n=0,o=1,r=NaN;for(let l=0;l<12;l+=1)r=(n+o)/2,dx(t,e,i,s,r)<a?n=r:o=r;return r}function gx(t,e,i,s,a,n,o,r,l){const c=(1-l)*t+l*i,h=(1-l)*e+l*s,u=(1-l)*i+l*a,d=(1-l)*s+l*n,p=(1-l)*a+l*o,g=(1-l)*n+l*r,f=(1-l)*c+l*u,x=(1-l)*h+l*d,m=(1-l)*u+l*p,b=(1-l)*d+l*g,v=(1-l)*f+l*m,S=(1-l)*x+l*b;return[[{x:t,y:e},{x:c,y:h},{x:f,y:x},{x:v,y:S}],[{x:v,y:S},{x:m,y:b},{x:p,y:g},{x:o,y:r}]]}function TA(t,e,i,s){const a=-t+3*e-3*i+s,n=3*t-6*e+3*i,o=-3*t+3*e;if(a===0){if(n!==0){const l=-o/n;if(l>0&&l<1)return[l]}return[]}const r=n*n-4*a*o;if(r>=0){const l=Math.sqrt(r),c=(-n+l)/(2*a),h=(-n-l)/(2*a);return[c,h].filter(u=>u>0&&u<1)}return[]}function zR(t,e,i,s,a,n,o,r){const l=TA(t,i,a,o),c=TA(e,s,n,r);return[...l,...c]}var fx=A({"packages/ag-charts-community/src/scene/util/bezier.ts"(){"use strict"}}),ju,NA=A({"packages/ag-charts-community/src/scene/extendedPath2D.ts"(){"use strict";Ti(),F0(),St(),kt(),BR(),fx(),ju=class{constructor(){this.path2d=new Path2D,this.previousCommands=[],this.previousParams=[],this.previousClosedPath=!1,this.commands=[],this.params=[],this.openedPath=!1,this.closedPath=!1}isEmpty(){return this.commands.length===0}isDirty(){return this.closedPath!==this.previousClosedPath||this.previousCommands.length!==this.commands.length||this.previousParams.length!==this.params.length||this.previousCommands.toString()!==this.commands.toString()||this.previousParams.toString()!==this.params.toString()}getPath2D(){return this.path2d}moveTo(t,e){this.openedPath=!0,this.path2d.moveTo(t,e),this.commands.push(0),this.params.push(t,e)}lineTo(t,e){this.openedPath?(this.path2d.lineTo(t,e),this.commands.push(1),this.params.push(t,e)):this.moveTo(t,e)}rect(t,e,i,s){this.moveTo(t,e),this.lineTo(t+i,e),this.lineTo(t+i,e+s),this.lineTo(t,e+s),this.closePath()}roundRect(t,e,i,s,a){a=Math.min(a,i/2,s/2),this.moveTo(t,e+a),this.arc(t+a,e+a,a,Math.PI,1.5*Math.PI),this.lineTo(t+a,e),this.lineTo(t+i-a,e),this.arc(t+i-a,e+a,a,1.5*Math.PI,2*Math.PI),this.lineTo(t+i,e+a),this.lineTo(t+i,e+s-a),this.arc(t+i-a,e+s-a,a,0,Math.PI/2),this.lineTo(t+i-a,e+s),this.lineTo(t+a,e+s),this.arc(t+ +a,e+s-a,a,Math.PI/2,Math.PI),this.lineTo(t,e+s-a),this.closePath()}arc(t,e,i,s,a,n){this.openedPath=!0,this.path2d.arc(t,e,i,s,a,n),this.commands.push(2),this.params.push(t,e,i,s,a,n?1:0)}cubicCurveTo(t,e,i,s,a,n){this.openedPath||this.moveTo(t,e),this.path2d.bezierCurveTo(t,e,i,s,a,n),this.commands.push(3),this.params.push(t,e,i,s,a,n)}closePath(){this.openedPath&&(this.path2d.closePath(),this.commands.push(4),this.openedPath=!1,this.closedPath=!0)}clear(t){t&&(this.previousCommands=this.commands,this.previousParams=this.params,this.previousClosedPath=this.closedPath),this.path2d=new Path2D,this.openedPath=!1,this.closedPath=!1,this.commands=[],this.params=[]}isPointInPath(t,e){const i=this.commands,s=this.params,a=i.length,n=-1e4,o=-1e4;let r=NaN,l=NaN,c=0,h=0,u=0;for(let d=0,p=0;d<a;d++)switch(i[d]){case 0:u+=Fu(r,l,c,h,n,o,t,e),c=s[p++],r=c,h=s[p++],l=h;break;case 1:u+=Fu(c,h,s[p++],s[p++],n,o,t,e),c=s[p-2],h=s[p-1];break;case 3:u+=CZ(c,h,s[p++],s[p++],s[p++],s[p++],s[p++],s[p++],n,o,t,e),c=s[p-2],h=s[p-1];break;case 2:{const g=s[p++],f=s[p++],x=s[p++],m=s[p++],b=s[p++],v=!!s[p++];if(u+=PR(g,f,x,m,b,v,n,o,t,e),!isNaN(r)){const S=g+Math.cos(m)*x,D=f+Math.sin(m)*x;u+=Fu(c,h,S,D,n,o,t,e)}c=g+Math.cos(b)*x,h=f+Math.sin(b)*x;break}case 4:u+=Fu(r,l,c,h,n,o,t,e);break}return u%2===1}distanceSquared(t,e){let i=1/0;const s=this.commands,a=this.params,n=s.length;let o=NaN,r=NaN,l=0,c=0;for(let h=0,u=0;h<n;h++)switch(s[h]){case 0:l=o=a[u++],c=r=a[u++];break;case 1:{const d=a[u++],p=a[u++];i=jp(t,e,l,c,d,p,i);break}case 3:st.error("Command.Curve distanceSquare not implemented");break;case 2:{const d=a[u++],p=a[u++],g=a[u++],f=a[u++],x=a[u++],m=d+Math.cos(f)*g,b=p+Math.sin(f)*g,v=!!a[u++];i=jp(t,e,l,c,m,b,i),i=K5(t,e,d,p,g,f,x,v,i),l=d+Math.cos(x)*g,c=p+Math.sin(x)*g;break}case 4:i=jp(t,e,l,c,o,r,i);break}return i}getPoints(){const{commands:t,params:e}=this,i=[];let s=0;for(const a of t)switch(a){case 0:case 1:i.push({x:e[s++],y:e[s++]});break;case 3:s+=4,i.push({x:e[s++],y:e[s++]});break;case 2:i.push({x:e[s++],y:e[s++]}),s+=4;break;case 4:break}return i}toSVG(t=(e,i)=>({x:e,y:i})){const e=[],{commands:i,params:s}=this,a=(o,...r)=>{e.push(o);for(let l=0;l<r.length;l+=2){const{x:c,y:h}=t(r[l],r[l+1]);e.push(c,h)}};let n=0;for(const o of i)switch(o){case 0:a("M",s[n++],s[n++]);break;case 1:a("L",s[n++],s[n++]);break;case 3:a("C",s[n++],s[n++],s[n++],s[n++],s[n++],s[n++]);break;case 2:{const r=s[n++],l=s[n++],c=s[n++],h=s[n++],u=s[n++],d=s[n++];let p=d?h-u:u-h;p<0&&(p+=Math.ceil(-p/(2*Math.PI))*2*Math.PI),d&&(p=-p);const g=Math.max(Math.ceil(Math.abs(p)/(Math.PI/2)),1),f=p/g,x=4/3*Math.tan(f/4),m=e.length===0?"M":"L";a(m,r+Math.cos(h)*c,l+Math.sin(h)*c);for(let b=0;b<g;b+=1){const v=h+f*(b+0),S=h+f*(b+1),D=c*Math.sin(v),k=c*Math.cos(v),L=c*Math.sin(S),T=c*Math.cos(S);a("C",r+k-x*D,l+D+x*k,r+T+x*L,l+L-x*T,r+T,l+L)}break}case 4:e.push("Z");break}return e.join(" ")}computeBBox(){const{commands:t,params:e}=this;let[i,s,a,n]=[1/0,1/0,-1/0,-1/0],[o,r]=[NaN,NaN],[l,c]=[NaN,NaN];const h=(d,p,g)=>{i=Math.min(p,i),s=Math.min(d,s),a=Math.max(d,a),n=Math.max(p,n),g&&([o,r]=[d,p])};let u=0;for(const d of t)switch(d){case 0:h(e[u++],e[u++],!0),[l,c]=[o,r];break;case 1:h(e[u++],e[u++],!0);break;case 3:{const p=e[u++],g=e[u++],f=e[u++],x=e[u++],m=e[u++],b=e[u++];h(m,b,!0),zR(o,r,p,g,f,x,m,b).forEach(S=>{const D=dx(o,p,f,m,S),k=dx(r,g,x,b,S);h(D,k)});break}case 2:{const p=e[u++],g=e[u++],f=e[u++];let x=Ht(e[u++]),m=Ht(e[u++]);e[u++]&&([x,m]=[m,x]);const v=(D,k)=>{const L=p+f*Math.cos(D),T=g+f*Math.sin(D);h(L,T,k)};v(x),v(m,!0);const S=[0,Math.PI/2,Math.PI,3*Math.PI/2];for(const D of S)(x<m&&x<=D&&D<=m||x>m&&(x<=D||D<=m))&&v(D);break}case 4:[o,r]=[l,c];break}return new lt(s,i,a-s,n-i)}}}});function vt(t){const{changeCb:e,convertor:i}=t??{};return ht({type:"path",convertor:i,changeCb:e})}var qi,Va=A({"packages/ag-charts-community/src/scene/shape/path.ts"(){"use strict";NA(),ae(),hl(),qi=class extends la{constructor(){super(...arguments),this.path=new ju,this._clipX=NaN,this._clipY=NaN,this.clip=!1,this._dirtyPath=!0}set clipX(t){this._clipX=t,this.dirtyPath=!0}set clipY(t){this._clipY=t,this.dirtyPath=!0}set dirtyPath(t){this._dirtyPath!==t&&(this._dirtyPath=t,t&&this.markDirty())}get dirtyPath(){return this._dirtyPath}checkPathDirty(){this._dirtyPath||(this.dirtyPath=this.path.isDirty()||(this.fillShadow?.isDirty()??!1)||(this._clipPath?.isDirty()??!1))}isPointInPath(t,e){return this.updatePathIfDirty(),this.path.closedPath&&this.path.isPointInPath(t,e)}distanceSquared(t,e){return this.distanceSquaredTransformedPoint(t,e)}svgPathData(t){return this.updatePathIfDirty(),this.path.toSVG(t)}distanceSquaredTransformedPoint(t,e){return this.updatePathIfDirty(),this.path.closedPath&&this.path.isPointInPath(t,e)?0:this.path.distanceSquared(t,e)}isDirtyPath(){return!1}updatePath(){}updatePathIfDirty(){(this.dirtyPath||this.isDirtyPath())&&(this.updatePath(),this.dirtyPath=!1)}preRender(){return this.updatePathIfDirty(),super.preRender(this.path.commands.length)}render(t){const{ctx:e}=t;if(this.clip&&!isNaN(this._clipX)&&!isNaN(this._clipY)){e.save();const i=this.strokeWidth/2;this._clipPath??(this._clipPath=new ju),this._clipPath.clear(),this._clipPath.rect(-i,-i,this._clipX+i,this._clipY+i+i),e.clip(this._clipPath?.getPath2D()),this._clipX>0&&this._clipY>0&&this.drawPath(e),e.restore()}else this._clipPath=void 0,this.drawPath(e);this.fillShadow?.markClean(),super.render(t)}drawPath(t){this.fillStroke(t,this.path.getPath2D())}toSVG(){if(!this.visible)return;const t=document.createElementNS("http://www.w3.org/2000/svg","path");return t.setAttribute("d",this.svgPathData()),this.applySvgFillAttributes(t),this.applySvgStrokeAttributes(t),{elements:[t]}}},qi.className="Path",M([vt()],qi.prototype,"clip",2),M([vt()],qi.prototype,"clipX",1),M([vt()],qi.prototype,"clipY",1)}}),FR,OZ=A({"packages/ag-charts-community/src/dom/focusIndicator.ts"(){"use strict";kt(),Va(),Ki(),Nt(),FR=class{constructor(t){this.swapChain=t,this.div=hi().createElement("div"),this.svg=hi().createElementNS("http://www.w3.org/2000/svg","svg"),this.path=hi().createElementNS("http://www.w3.org/2000/svg","path"),this.svg.append(this.path),this.element=hi().createElement("div"),this.element.classList.add("ag-charts-focus-indicator"),this.element.ariaHidden="true",this.element.append(this.svg),this.swapChain.addListener("swap",e=>this.onSwap(e))}updateBounds(t,e,i=0,s=0){if(t!==void 0)if(t instanceof qi){const a=(n,o)=>{let{x:r,y:l}=Ae.toCanvasPoint(t,n,o);return r-=i,l-=s,{x:r,y:l}};this.path.setAttribute("d",t.svgPathData(a)),this.show(this.svg)}else{if(e==null)Pp(this.div,t);else{const a=Math.max(t.x,e.x),n=Math.max(t.y,e.y),o=Math.min(t.x+t.width,e.x+e.width),r=Math.min(t.y+t.height,e.y+e.height);Pp(this.div,new lt(a,n,o-a,r-n))}this.show(this.div)}}onSwap(t){t!==this.element.parentElement&&(this.element.remove(),t.appendChild(this.element),this.overrideFocusVisible(this.focusVisible))}show(t){this.element.innerHTML="",this.element.append(t)}overrideFocusVisible(t){this.focusVisible=t;const e={true:"1",false:"0",undefined:""};this.element.parentElement?.style.setProperty("opacity",e[`${t}`])}isFocusVisible(){const t=this.element.parentElement;return t!=null&&he().getComputedStyle(t).opacity==="1"}}}}),jR,EZ=A({"packages/ag-charts-community/src/dom/focusSwapChain.ts"(){"use strict";Qi(),Nt(),jR=class{constructor(t,e,i,s){this.label1=t,this.label2=e,this.hasFocus=!1,this.skipDispatch=!1,this.listeners={blur:[],focus:[],swap:[]},this.onBlur=a=>!this.skipDispatch&&this.dispatch("blur",a),this.onFocus=a=>!this.skipDispatch&&this.dispatch("focus",a),se(this.label1,"id",`${i}-label1`),se(this.label2,"id",`${i}-label2`),mn(this.label1,"display","none"),mn(this.label2,"display","none"),this.activeAnnouncer=this.createAnnouncer(s),this.inactiveAnnouncer=this.createAnnouncer(s),se(this.activeAnnouncer,"tabindex",0),this.label2.insertAdjacentElement("afterend",this.activeAnnouncer),this.label2.insertAdjacentElement("afterend",this.inactiveAnnouncer),this.swap("")}createAnnouncer(t){const e=Wt("div");return e.role=t,e.className="ag-charts-swapchain",e.addEventListener("blur",this.onBlur),e.addEventListener("focus",this.onFocus),e}destroy(){for(const t of[this.activeAnnouncer,this.inactiveAnnouncer])t.removeEventListener("blur",this.onBlur),t.removeEventListener("focus",this.onFocus),t.remove()}focus(){this.activeAnnouncer.focus()}update(t){this.skipDispatch=!0,this.swap(t),this.hasFocus&&this.activeAnnouncer.focus(),this.skipDispatch=!1}addListener(t,e){this.listeners[t].push(e),t==="swap"&&e(this.activeAnnouncer)}dispatch(t,e){t==="focus"?this.hasFocus=!0:t==="blur"&&(this.hasFocus=!1),this.listeners[t].forEach(i=>i(e))}swap(t){const e=this.activeAnnouncer.tabIndex;this.label2.textContent=t,[this.inactiveAnnouncer,this.activeAnnouncer]=[this.activeAnnouncer,this.inactiveAnnouncer],[this.label1,this.label2]=[this.label2,this.label1],Wc(this.inactiveAnnouncer,{"aria-labelledby":this.label1.id,"aria-hidden":!0,tabindex:void 0}),Wc(this.activeAnnouncer,{"aria-labelledby":this.label1.id,"aria-hidden":!1,tabindex:e}),mn(this.inactiveAnnouncer,"pointer-events","none"),mn(this.activeAnnouncer,"pointer-events",void 0),this.dispatch("swap",this.activeAnnouncer)}}}});function wZ(t,e){const i=aA(e.datum);if(i!=null)return{x:i.canvasX,y:i.canvasY};const s=e.bounds;if(s!=null){if(s instanceof lt){const{x:a,y:n}=s.computeCenter();return{x:t.x+a,y:t.y+n}}return Ae.toCanvas(s).computeCenter()}}function RZ(t,e,i,s,a){const{bounds:n,showFocusBox:o,clipFocusBox:r=!0}=i;o&&e?.updateBounds(n,r?t:void 0,s,a)}function _Z({bounds:t}){return t instanceof lt?t:t!=null?t.getBBox():lt.NaN}function PZ(t,e){const{x:i,y:s}=wZ(t,e)??{};if(i!==void 0&&s!==void 0)return{type:"keyboard",canvasX:i,canvasY:s}}var BZ=A({"packages/ag-charts-community/src/chart/keyboardUtil.ts"(){"use strict";kt(),Ki(),nA()}});function CA(t,e,i,s){let{top:a,right:n,bottom:o,left:r,width:l,height:c}=s;return r!=null?l!=null?n=i.width-r+l:n!=null&&(l=i.width-r-n):n!=null&&l!=null&&(r=i.width-n-l),a!=null?c!=null?o=i.height-a-c:o!=null&&(c=i.height-o-a):o!=null&&c!=null&&(a=i.height-o-c),l==null?c==null?(l=t,c=e):l=Math.ceil(t*c/e):c==null&&(c=Math.ceil(e*l/t)),r==null&&(n==null?r=Math.floor((i.width-l)/2):r=i.width-n-l),a==null&&(o==null?a=Math.floor((i.height-c)/2):a=i.height-c-o),{x:r,y:a,width:l,height:c}}var GR=A({"packages/ag-charts-community/src/util/placement.ts"(){"use strict"}});function Gu(t){if(t!=null)return t===""?"":(ug??(ug=Wt("div")),ug.textContent=String(t),ug.innerHTML)}var ug,VR=A({"packages/ag-charts-community/src/util/sanitize.ts"(){"use strict";Nt(),ug=null}}),UR,WR,dg,Ji,Gs=A({"packages/ag-charts-community/src/chart/marker/marker.ts"(){"use strict";kt(),Va(),Ki(),UR=["ArrowDown","ArrowUp","Circle","Cross","Diamond","Heart","MapPin","Plus","Square","Star","Triangle"],WR=Object.freeze({x:.5,y:.5}),dg=class extends qi{constructor(){super(...arguments),this.x=0,this.y=0,this.size=12}isBuiltIn(){return UR.includes(this.constructor.className??"")}computeBBox(){if(!this.isBuiltIn())return this.updatePathIfDirty(),this.path.computeBBox();const{x:t,y:e,size:i}=this,{center:s}=this.constructor;return new lt(t-i*s.x,e-i*s.y,i,i)}applyPath(t,e){const{path:i}=this;let{x:s,y:a}=this;i.clear();for(const{x:n,y:o,t:r}of e)s+=n*t,a+=o*t,r==="move"?i.moveTo(s,a):i.lineTo(s,a);i.closePath()}executeFill(t,e){if(e)return super.executeFill(t,e)}executeStroke(t,e){if(e)return super.executeStroke(t,e)}},M([vt()],dg.prototype,"x",2),M([vt()],dg.prototype,"y",2),M([vt({convertor:Math.abs})],dg.prototype,"size",2),Ji=class extends Rc(_0(_c(dg))){},Ji.center=WR}}),sr,pg=A({"packages/ag-charts-community/src/chart/marker/circle.ts"(){"use strict";Gs(),sr=class extends Ji{updatePath(){const{x:t,y:e,path:i,size:s}=this,a=s/2;i.clear(),i.arc(t,e,a,0,Math.PI*2),i.closePath()}},sr.className="Circle"}}),yx,HR,zZ=A({"packages/ag-charts-community/src/chart/marker/cross.ts"(){"use strict";Gs(),yx=class p3 extends Ji{updatePath(){const e=this.size/4.2;super.applyPath(e,p3.moves)}},yx.className="Cross",yx.moves=[{x:-1,y:0,t:"move"},{x:-1,y:-1},{x:1,y:-1},{x:1,y:1},{x:1,y:-1},{x:1,y:1},{x:-1,y:1},{x:1,y:1},{x:-1,y:1},{x:-1,y:-1},{x:-1,y:1},{x:-1,y:-1}],HR=yx}}),mx,OA,YR=A({"packages/ag-charts-community/src/chart/marker/diamond.ts"(){"use strict";Gs(),mx=class g3 extends Ji{updatePath(){const e=this.size/2;super.applyPath(e,g3.moves)}},mx.className="Diamond",mx.moves=[{x:0,y:-1,t:"move"},{x:1,y:1},{x:-1,y:1},{x:-1,y:-1},{x:1,y:-1}],OA=mx}}),EA,KR,FZ=A({"packages/ag-charts-community/src/chart/marker/heart.ts"(){"use strict";Gs(),EA=class f3 extends Ji{static rad(e){return e/180*Math.PI}updatePath(){const{x:e,path:i,size:s}=this,{rad:a}=f3,n=s/4,o=this.y+n/2;i.clear(),i.arc(e-n,o-n,n,a(130),a(330)),i.arc(e+n,o-n,n,a(220),a(50)),i.lineTo(e,o+n),i.closePath()}},EA.className="Heart",KR=EA}}),xx,jZ=A({"packages/ag-charts-community/src/chart/marker/pin.ts"(){"use strict";Gs(),xx=class extends Ji{updatePath(){const{path:t,x:e,y:i}=this,s=this.size,a=.5,n=1;t.clear(),t.moveTo(e+(.15625-a)*s,i+(.34375-n)*s),t.cubicCurveTo(e+(.15625-a)*s,i+(.151491-n)*s,e+(.307741-a)*s,i+(0-n)*s,e+(.5-a)*s,i+(0-n)*s),t.cubicCurveTo(e+(.692259-a)*s,i+(0-n)*s,e+(.84375-a)*s,i+(.151491-n)*s,e+(.84375-a)*s,i+(.34375-n)*s),t.cubicCurveTo(e+(.84375-a)*s,i+(.493824-n)*s,e+(.784625-a)*s,i+(.600181-n)*s,e+(.716461-a)*s,i+(.695393-n)*s),t.cubicCurveTo(e+(.699009-a)*s,i+(.719769-n)*s,e+(.681271-a)*s,i+(.743104-n)*s,e+(.663785-a)*s,i+(.766105-n)*s),t.cubicCurveTo(e+(.611893-a)*s,i+(.834367-n)*s,e+(.562228-a)*s,i+(.899699-n)*s,e+(.528896-a)*s,i+(.980648-n)*s),t.cubicCurveTo(e+(.524075-a)*s,i+(.992358-n)*s,e+(.512663-a)*s,i+(1-n)*s,e+(.5-a)*s,i+(1-n)*s),t.cubicCurveTo(e+(.487337-a)*s,i+(1-n)*s,e+(.475925-a)*s,i+(.992358-n)*s,e+(.471104-a)*s,i+(.980648-n)*s),t.cubicCurveTo(e+(.487337-a)*s,i+(1-n)*s,e+(.475925-a)*s,i+(.992358-n)*s,e+(.471104-a)*s,i+(.980648-n)*s),t.cubicCurveTo(e+(.437772-a)*s,i+(.899699-n)*s,e+(.388107-a)*s,i+(.834367-n)*s,e+(.336215-a)*s,i+(.766105-n)*s),t.cubicCurveTo(e+(.318729-a)*s,i+(.743104-n)*s,e+(.300991-a)*s,i+(.719769-n)*s,e+(.283539-a)*s,i+(.695393-n)*s),t.cubicCurveTo(e+(.215375-a)*s,i+(.600181-n)*s,e+(.15625-a)*s,i+(.493824-n)*s,e+(.15625-a)*s,i+(.34375-n)*s),t.closePath()}},xx.className="MapPin",xx.center={x:.5,y:1}}}),bx,XR,GZ=A({"packages/ag-charts-community/src/chart/marker/plus.ts"(){"use strict";Gs(),bx=class y3 extends Ji{updatePath(){const e=this.size/3;super.applyPath(e,y3.moves)}},bx.className="Plus",bx.moves=[{x:-.5,y:-.5,t:"move"},{x:0,y:-1},{x:1,y:0},{x:0,y:1},{x:1,y:0},{x:0,y:1},{x:-1,y:0},{x:0,y:1},{x:-1,y:0},{x:0,y:-1},{x:-1,y:0},{x:0,y:-1}],XR=bx}}),gg,ZR=A({"packages/ag-charts-community/src/chart/marker/square.ts"(){"use strict";Gs(),gg=class extends Ji{updatePath(){const{path:t,x:e,y:i}=this,s=this.size/2;t.clear(),t.moveTo(this.align(e-s),this.align(i-s)),t.lineTo(this.align(e+s),this.align(i-s)),t.lineTo(this.align(e+s),this.align(i+s)),t.lineTo(this.align(e-s),this.align(i+s)),t.closePath()}},gg.className="Square"}}),wA,VZ=A({"packages/ag-charts-community/src/chart/marker/star.ts"(){"use strict";Gs(),wA=class extends Ji{updatePath(){const{x:t,y:e,path:i,size:s}=this,a=5,n=s/2,o=n/2,r=Math.PI/2;i.clear();for(let l=0;l<a*2;l++){const c=l%2===0?n:o,h=l*Math.PI/a-r,u=t+Math.cos(h)*c,d=e+Math.sin(h)*c;i.lineTo(u,d)}i.closePath()}},wA.className="Star"}}),Sx,Vu,RA=A({"packages/ag-charts-community/src/chart/marker/triangle.ts"(){"use strict";Gs(),Sx=class m3 extends Ji{updatePath(){const e=this.size*1.1;super.applyPath(e,m3.moves)}},Sx.className="Triangle",Sx.moves=[{x:0,y:-.48,t:"move"},{x:.5,y:.87},{x:-1,y:0}],Vu=Sx}});function $R(t){return typeof t=="string"&&QR.includes(t)}function UZ(t){return class extends Ji{updatePath(){const{path:i,x:s,y:a,size:n}=this;t({path:i,x:s,y:a,size:n})}}}function Ua(t="square"){return $R(t)?_A[t]:typeof t=="function"?UZ(t):gg}var _A,QR,co=A({"packages/ag-charts-community/src/chart/marker/util.ts"(){"use strict";pg(),zZ(),YR(),FZ(),Gs(),jZ(),GZ(),ZR(),VZ(),RA(),_A={circle:sr,cross:HR,diamond:OA,heart:KR,pin:xx,plus:XR,square:gg,star:wA,triangle:Vu},QR=Object.keys(_A)}});function qR(t,e,i=e*(5/3)){const s=new mt,a=Math.min(t.marker.strokeWidth,2),n=Math.min(t.line?.strokeWidth??0,2),o=Math.max(t.marker.enabled===!1?0:e,t.line==null?0:i),r=Math.max(t.marker.enabled===!1?0:e,n);if(t.line!=null){const{stroke:l,strokeOpacity:c,lineDash:h}=t.line,u=new Bs;u.x1=0,u.y1=r/2,u.x2=o,u.y2=r/2,u.stroke=l,u.strokeOpacity=c,u.strokeWidth=n,u.lineDash=h,s.append(u)}if(t.marker.enabled!==!1){const{shape:l,fill:c,fillOpacity:h,stroke:u,strokeOpacity:d}=t.marker,p=Ua(l),g=new p,{center:f}=p;g.size=e,g.translationX=o/2+(f.x-.5)*e,g.translationY=r/2+(f.y-.5)*e,g.fill=c,g.fillOpacity=h,g.stroke=u,g.strokeOpacity=d,g.strokeWidth=a;const x=o/2+(f.x-.5)*e,m=r/2+(f.y-.5)*e;if(typeof l=="string"){const b=e/(e+a);g.translationX=x,g.translationY=m,g.scalingX=b,g.scalingY=b}else{const b=g.getBBox(),v=Math.min(o/(b.width+a),r/(b.height+a),1);g.translationX=x*v-b.x*v+(o-b.width*v)/2,g.translationY=m*v-b.y*v+(r-b.height*v)/2,g.scalingX=v,g.scalingY=v}s.append(g)}return mt.toSVG(s,o,r)}var PA=A({"packages/ag-charts-community/src/chart/legend/legendSymbol.ts"(){"use strict";me(),Pc(),co()}}),BA,zA,FA,JR,t_,WZ=A({"packages/ag-charts-community/src/chart/tooltip/springAnimation.ts"(){"use strict";ao(),BA=.1,zA=200,FA=12,JR=.5,t_=class extends gn{constructor(){super(...arguments),this.x1=NaN,this.y1=NaN,this.x=NaN,this.y=NaN,this.vx=0,this.vy=0,this.t0=NaN,this.animationFrameHandle=void 0}reset(){this.x=NaN,this.y=NaN,this.animationFrameHandle!=null&&(cancelAnimationFrame(this.animationFrameHandle),this.animationFrameHandle=void 0)}update(t,e){if(Number.isNaN(this.x)||Number.isNaN(this.y)){this.x=t,this.y=e,this.vx=0,this.vy=0,this.emitUpdate(),this.animationFrameHandle!=null&&(cancelAnimationFrame(this.animationFrameHandle),this.animationFrameHandle=void 0);return}this.x1=t,this.y1=e,this.t0=Date.now(),this.animationFrameHandle==null&&(this.animationFrameHandle=requestAnimationFrame(this.onFrame.bind(this)))}onFrame(){this.animationFrameHandle=void 0;const{x1:t,y1:e,t0:i}=this,s=Date.now(),a=s-i;this.t0=s;const n=.001,o=Math.ceil(a/(n*1e3))|0;let{x:r,y:l,vx:c,vy:h}=this;for(let u=0;u<o;u+=1){const d=r-t,p=l-e,g=-(zA*d+FA*c)/BA,f=-(zA*p+FA*h)/BA;c+=g*n,h+=f*n,r+=c*n,l+=h*n}Math.hypot(r-t,l-e)<JR?(this.x=this.x1,this.y=this.y1,this.vx=0,this.vy=0):(this.x=r,this.y=l,this.vx=c,this.vy=h,this.animationFrameHandle=requestAnimationFrame(this.onFrame.bind(this))),this.emitUpdate()}emitUpdate(){this.dispatch("update",{type:"update",x:this.x,y:this.y})}}}});function e_(t){if(typeof t=="string")return"";const e=[];return t.heading!=null&&e.push(t.heading),t.title!=null&&e.push(t.title),t.data?.forEach(i=>{e.push(i.label??i.fallbackLabel,i.value)}),e.join("; ")}function i_(t,e,i){let s="";t==null?s+=`<span class="${Ni}-label">${Gu(e)}</span>`:(s+=`<span class="${Ni}-label">${Gu(t)}</span>`,s+=" ",s+=`<span class="${Ni}-value">${Gu(e)}</span>`);const a=[`${Ni}-row`];return i&&a.push(`${Ni}-row--inline`),s=`<div class="${a.join(" ")}">${s}</div>`,s}function HZ(t){if(typeof t=="string")return t;let e="";if((t.heading==null||t.title==null)&&t.data?.length===1&&t.data[0].label==null&&t.data[0].value!=null){const i=t.data[0];e+=i_(t.heading??t.title,i.value,!1)}else{const i=t.title==null&&t.data?.length===1;t.heading!=null&&(e+=`<span class="${Ni}-heading">${Gu(t.heading)}</span>`,e+=" ");const s=t.symbol==null?void 0:qR(t.symbol,12);s!=null&&(t.title!=null||t.data?.length)&&(e+=`<span class="${Ni}-symbol">${s}</span>`),t.title!=null&&(e+=`<span class="${Ni}-title">${Gu(t.title)}</span>`,e+=" "),t.data?.forEach(a=>{e+=i_(a.label??a.fallbackLabel,a.value,i),e+=" "})}return e=`<div class="${Ni}-content">${e.trimEnd()}</div>`,e}var Ni,jA,th,bn,Vs=A({"packages/ag-charts-community/src/chart/tooltip/tooltip.ts"(){"use strict";Nt(),It(),GR(),Jt(),VR(),xt(),PA(),WZ(),Ni="ag-charts-tooltip",jA="ag-charts-tooltip--dark",th=class extends Mt{constructor(){super(...arguments),this.type="pointer",this.xOffset=0,this.yOffset=0}},M([I(ne(["pointer","node","top","right","bottom","left","top-left","top-right","bottom-right","bottom-left",{value:"sparkline",undocumented:!0},{value:"sparkline-",undocumented:!0}],"a position type"))],th.prototype,"type",2),M([I(wt)],th.prototype,"xOffset",2),M([I(wt)],th.prototype,"yOffset",2),bn=class extends Mt{constructor(){super(),this.enabled=!0,this.delay=0,this.range=void 0,this.wrapping="hyphenate",this.position=new th,this.darkTheme=!1,this.bounds="extended",this.destroyFns=[],this.springAnimation=new t_,this.enableInteraction=!1,this.wrapTypes=["always","hyphenate","on-space","never"],this.showTimeout=0,this._showArrow=!0,this._compact=!1,this._visible=!1,this.positionParams=void 0,this.destroyFns.push(this.springAnimation.addListener("update",this.updateTooltipPosition.bind(this)))}get interactive(){return this.enableInteraction}setup(t){"togglePopover"in he().HTMLElement.prototype&&(this.element=t.addChild("canvas-overlay",Ni),this.element.setAttribute("popover","manual"),this.element.className=Ni)}destroy(t){t.removeChild("canvas-overlay",Ni)}isVisible(){return this._visible}updateTooltipPosition(){const{element:t,positionParams:e}=this;if(t==null||e==null)return;const{canvasRect:i,relativeRect:s,meta:a}=e,{x:n,y:o}=this.springAnimation,r=a.position?.type??this.position.type,l=a.position?.xOffset??0,c=a.position?.yOffset??0,h=s.x,u=s.y,d=s.width-t.clientWidth-1+h,p=s.height-t.clientHeight+u;let g=this.getTooltipBounds({positionType:r,canvasX:n,canvasY:o,yOffset:c,xOffset:l,canvasRect:i}),f=CA(t.clientWidth,t.clientHeight,s,g);r==="sparkline"&&(f.x<=h||f.x>=d)&&(g=this.getTooltipBounds({positionType:"sparkline-constrained",canvasX:n,canvasY:o,yOffset:c,xOffset:l,canvasRect:i}),f=CA(t.clientWidth,t.clientHeight,s,g));const x=At(h,f.x,d),m=At(u,f.y,p),b=x!==f.x||m!==f.y,v=(r==="node"||r==="pointer")&&!b&&!l&&!c,S=a.showArrow??this.showArrow??v;this.updateShowArrow(S),this.updateCompact(r==="sparkline"||r==="sparkline-constrained"),t.style.transform=`translate(${x}px, ${m}px)`}show(t,e,i,s,a=!1){const{element:n}=this;if(n!=null&&s!=null)n.innerHTML=HZ(s);else if(n==null||n.innerHTML===""){this.toggle(!1);return}const o={x:t.x-e.x,y:t.y-e.y,width:t.width,height:t.height};this.positionParams={canvasRect:e,relativeRect:o,meta:i},this.springAnimation.update(i.canvasX,i.canvasY),n.style.top=`${e.top}px`,n.style.left=`${e.left}px`,i.enableInteraction?(this.enableInteraction=!0,n.style.pointerEvents="auto",n.removeAttribute("aria-hidden")):(this.enableInteraction=!1,n.style.pointerEvents="none",n.setAttribute("aria-hidden","true")),this.delay>0&&!a?(this.toggle(!1),this.showTimeout=setTimeout(()=>{this.toggle(!0)},this.delay)):this.toggle(!0)}hide(){this.springAnimation.reset(),this.toggle(!1)}toggle(t){if(!this.element?.isConnected)return;this._visible=t;const{classList:e}=this.element,i=(s,a)=>e.toggle(`${Ni}--${s}`,a);t||clearTimeout(this.showTimeout),i("no-interaction",!this.enableInteraction),i("arrow",this._showArrow),i("compact",this._compact),e.toggle(jA,this.darkTheme),this.element.togglePopover(t),t&&this.updateTooltipPosition();for(const s of this.wrapTypes)e.toggle(`${Ni}--wrap-${s}`,s===this.wrapping)}updateShowArrow(t){this._showArrow=t}updateCompact(t){this._compact=t}getTooltipBounds(t){if(!this.element)return{};const{positionType:e,canvasX:i,canvasY:s,yOffset:a,xOffset:n,canvasRect:o}=t,{clientWidth:r,clientHeight:l}=this.element,c={width:r,height:l};switch(e){case"node":case"pointer":return c.top=s+a-l-8,c.left=i+n-r/2,c;case"top":return c.top=a,c.left=o.width/2-r/2+n,c;case"right":return c.top=o.height/2-l/2+a,c.left=o.width-r/2+n,c;case"left":return c.top=o.height/2-l/2+a,c.left=n,c;case"bottom":return c.top=o.height-l+a,c.left=o.width/2-r/2+n,c;case"top-left":return c.top=a,c.left=n,c;case"top-right":return c.top=a,c.left=o.width-r+n,c;case"bottom-right":return c.top=o.height-l+a,c.left=o.width-r+n,c;case"bottom-left":return c.top=o.height-l+a,c.left=n,c;case"sparkline":return c.top=s+a-l/2,c.left=i+n+8,c;case"sparkline-constrained":return c.top=s+a-l/2,c.left=i+n-8-r,c}}},M([I(pt)],bn.prototype,"enabled",2),M([I(pt,{optional:!0})],bn.prototype,"showArrow",2),M([I(nt)],bn.prototype,"delay",2),M([I(wp,{optional:!0})],bn.prototype,"range",2),M([I(Ep)],bn.prototype,"wrapping",2),M([I(ct)],bn.prototype,"position",2),M([I(pt)],bn.prototype,"darkTheme",2),M([I(ne(["extended","canvas"]))],bn.prototype,"bounds",2)}});function Uu(t,e,i,s){const a=[...t].reverse();let n;for(const o of a){if(!o.visible||!o.contentGroup.visible)continue;const{match:r,distance:l}=o.pickNode(e,i,s)??{};if(!(!r||l==null)&&((!n||n.distance>l)&&(n={series:o,distance:l,datum:r}),l===0))break}return n}function s_(t,e){if(t==null||e.length===0)return[!1,!1];const i=t.valueOf(),s=e[0],a=e[e.length-1];if(typeof s=="string")return[i===s,i===a];let n=s.valueOf(),o=a.valueOf();return n>o&&([n,o]=[o,n]),[i===n,i===o]}function bl(t,e,i,s,a){const{xValue:n,yValue:o}=t,[r,l]=s_(o,a),[c,h]=s_(n,s);return{datum:t,xKey:e,yKey:i,xValue:n,yValue:o,first:c,last:h,min:r,max:l}}function vx(t,[e,i],s){const a=PO(0,t-1,o=>{const r=s(o)?.[1];return!Number.isFinite(r)||r>e})??0;let n=_O(0,t-1,o=>{const r=s(o)?.[0];return!Number.isFinite(r)||r<i})??t-1;return n=Math.min(n+1,t),[a,n]}var fg=A({"packages/ag-charts-community/src/chart/series/util.ts"(){"use strict";C0()}}),a_,YZ=A({"packages/ag-charts-community/src/chart/series/seriesAreaManager.ts"(){"use strict";OZ(),EZ(),kt(),Ki(),no(),wa(),It(),KE(),Ct(),Gm(),ro(),Yc(),oA(),BZ(),Vs(),Ds(),fg(),a_=class extends fn{constructor(t){super(),this.chart=t,this.id=Ea(this),this.series=[],this.highlight={pendingHoverEvent:void 0,appliedHoverEvent:void 0,stashedHoverEvent:void 0},this.tooltip={lastHover:void 0},this.hoverDevice="mouse",this.focus={sortedSeries:[],series:void 0,seriesIndex:0,datumIndex:0,datum:void 0},this.hoverScheduler=_K(()=>{if(!(!this.tooltip.lastHover&&!this.highlight.pendingHoverEvent)){if(this.chart.getUpdateType()<=4){this.hoverScheduler.schedule();return}this.highlight.pendingHoverEvent&&this.handleHoverHighlight(!1),this.tooltip.lastHover&&this.handleHoverTooltip(this.tooltip.lastHover,!1)}});const e=41,i=34,s=63,{domManager:a}=t.ctx,n="series-area",o=a.addChild(n,"series-area-aria-label1"),r=a.addChild(n,"series-area-aria-label2");this.seriesWidget=new tr(a.getParent(n)),this.chartWidget=new tr(a.getParent("canvas-proxy")),this.containerWidget=new tr(a.getParent("canvas-container")),t.ctx.regionManager.initRegions(this.containerWidget,this.seriesWidget),this.swapChain=new jR(o,r,this.id,"img"),this.swapChain.addListener("blur",()=>this.onBlur(i)),this.swapChain.addListener("focus",()=>this.onFocus(i)),this.focusIndicator=new FR(this.swapChain),this.focusIndicator.overrideFocusVisible(t.mode==="integrated"?!1:void 0),this.chart.ctx.keyNavManager.focusIndicator=this.focusIndicator;const l=t.ctx.regionManager.getRegion("series");this.destroyFns.push(()=>t.ctx.domManager.removeChild(n,"series-area-aria-label1"),()=>t.ctx.domManager.removeChild(n,"series-area-aria-label2"),l.addListener("drag",c=>this.onHoverLikeEvent(c),e),l.addListener("hover",c=>this.onHover(c),e),l.addListener("leave",()=>this.onLeave(),e),t.ctx.animationManager.addListener("animation-start",()=>this.clearAll()),t.ctx.domManager.addListener("resize",()=>this.clearAll()),t.ctx.highlightManager.addListener("highlight-change",c=>this.changeHighlightDatum(c)),t.ctx.keyNavManager.addListener("nav-hori",c=>this.onNavHori(c),i),t.ctx.keyNavManager.addListener("nav-vert",c=>this.onNavVert(c),i),t.ctx.keyNavManager.addListener("submit",c=>this.onSubmit(c),i),t.ctx.layoutManager.addListener("layout:complete",c=>this.layoutComplete(c)),t.ctx.regionManager.listenAll("contextmenu",c=>this.onContextMenu(c),s),t.ctx.regionManager.listenAll("click",c=>this.onClick(c)),t.ctx.regionManager.listenAll("dblclick",c=>this.onClick(c)),t.ctx.updateService.addListener("pre-scene-render",()=>this.preSceneRender()),t.ctx.zoomManager.addListener("zoom-change",()=>this.clearAll()),t.ctx.zoomManager.addListener("zoom-pan-start",()=>this.clearAll()))}dataChanged(){var t;(t=this.highlight).stashedHoverEvent??(t.stashedHoverEvent=this.highlight.appliedHoverEvent),this.chart.ctx.tooltipManager.removeTooltip(this.id),this.focusIndicator.updateBounds(void 0),this.clearHighlight()}preSceneRender(){this.focusIndicator.isFocusVisible()&&this.handleSeriesFocus(0,0,!0),this.highlight.stashedHoverEvent!=null&&(this.highlight.pendingHoverEvent=this.highlight.stashedHoverEvent,this.highlight.stashedHoverEvent=void 0,this.handleHoverHighlight(!0)),this.tooltip.lastHover!=null&&this.handleHoverTooltip(this.tooltip.lastHover,!0)}update(t,e){this.chart.ctx.updateService.update(t,e)}seriesChanged(t){this.focus.sortedSeries=[...t].sort((e,i)=>{let s=e.properties.focusPriority??1/0,a=i.properties.focusPriority??1/0;return s===a&&([s,a]=[e._declarationOrder,i._declarationOrder]),s<a?-1:s>a?1:0}),this.series=t}layoutComplete(t){this.seriesRect=t.series.rect,this.hoverRect=t.series.paddedRect,this.seriesWidget.setBounds(t.series.paddedRect),this.chartWidget.setBounds(t.chart)}onContextMenu(t){const{Default:e,ContextMenu:i}=Pm;if(t.region==="root"){this.chart.ctx.interactionManager.getState()&(e|i)&&this.chart.ctx.contextMenuRegistry.dispatchContext("all",t,{});return}let s,a;if(this.focusIndicator.isFocusVisible())s=this.chart.ctx.highlightManager.getActiveHighlight(),s&&this.seriesRect&&s.midPoint&&(a=Ae.toCanvasPoint(s.series.contentGroup,s.midPoint.x,s.midPoint.y));else if(this.chart.ctx.interactionManager.getState()&(e|i)){const o=Uu(this.series,{x:t.regionX,y:t.regionY},"context-menu");o&&(this.chart.ctx.highlightManager.updateHighlight(this.id),s=o.datum)}const n=s?.series;this.clearAll(),this.chart.ctx.contextMenuRegistry.dispatchContext("series-area",t,{pickedSeries:n,pickedNode:s},a)}onLeave(){this.chart.ctx.cursorManager.updateCursor(this.id),this.focusIndicator.isFocusVisible()||this.clearAll()}onHover(t){this.hoverDevice="mouse",this.onHoverLikeEvent(t)}onHoverLikeEvent(t){if(Y2(t,"drag")&&(this.tooltip.lastHover=t),this.highlight.pendingHoverEvent=t,this.hoverScheduler.schedule(),this.chart.ctx.interactionManager.getState()===32){const{regionX:e,regionY:i}=t,s=Uu(this.series,{x:e,y:i},"event");s?.series.hasEventListener("nodeClick")||s?.series.hasEventListener("nodeDoubleClick")?this.chart.ctx.cursorManager.updateCursor(this.id,"pointer"):this.chart.ctx.cursorManager.updateCursor(this.id)}}onClick(t){if(this.hoverDevice="mouse",this.onHoverLikeEvent(t),this.seriesRect?.containsPoint(t.canvasX,t.canvasY)&&this.checkSeriesNodeClick(t)){this.update(4),t.preventDefault();return}const e={type:t.type==="click"?"click":"doubleClick",event:t.sourceEvent};this.chart.fireEvent(e)}onFocus(t){this.chart.ctx.interactionManager.getState()&t&&(this.hoverDevice=this.focusIndicator.isFocusVisible()?"keyboard":"mouse",this.handleFocus(0,0))}onBlur(t){this.chart.ctx.interactionManager.getState()&t&&(this.hoverDevice="mouse",this.clearAll(),this.focusIndicator.overrideFocusVisible(void 0))}onNavVert(t){this.hoverDevice="keyboard",this.focus.seriesIndex+=t.delta,this.handleFocus(t.delta,0),t.preventDefault()}onNavHori(t){this.hoverDevice="keyboard",this.focus.datumIndex+=t.delta,this.handleFocus(0,t.delta),t.preventDefault()}onSubmit(t){const{series:e,datum:i}=this.focus,s=t.sourceEvent.sourceEvent;e!==void 0&&i!==void 0?e.fireNodeClickEvent(s,i):this.chart.fireEvent({type:"click",event:s}),t.preventDefault()}checkSeriesNodeClick(t){let e={x:t.regionX,y:t.regionY};t.region!=="series"&&(e=Ae.fromCanvasPoint(this.chart.seriesRoot,t.canvasX,t.canvasY));const i=Uu(this.series,e,"event");return i==null?!1:t.type==="click"?(i.series.fireNodeClickEvent(t.sourceEvent,i.datum),!0):t.type==="dblclick"?(t.preventZoomDblClick=i.distance===0,i.series.fireNodeDoubleClickEvent(t.sourceEvent,i.datum),!0):!1}handleFocus(t,e){const i=this.chart.overlays.getFocusInfo(this.chart.ctx.localeManager);i==null?this.handleSeriesFocus(t,e):this.focusIndicator.updateBounds(new lt(0,0,i.rect.width,i.rect.height))}handleSeriesFocus(t,e,i=!1){if(this.chart.chartType==="hierarchy"){this.handleHierarchySeriesFocus(t,e,i);return}const{focus:s,seriesRect:a}=this,n=s.sortedSeries.filter(c=>c.visible);if(n.length===0)return;s.seriesIndex=At(0,s.seriesIndex,n.length-1),s.series=n[s.seriesIndex];const{datumIndex:o,seriesIndex:r}=s,l=s.series.pickFocus({datumIndex:o,datumIndexDelta:e,otherIndex:r,otherIndexDelta:t,seriesRect:a});this.updatePickedFocus(l,i)}handleHierarchySeriesFocus(t,e,i){this.focus.series=this.focus.sortedSeries[0];const{focus:{series:s,seriesIndex:a,datumIndex:n},seriesRect:o}=this;if(s==null)return;const r=s.pickFocus({datumIndex:n,datumIndexDelta:e,otherIndex:a,otherIndexDelta:t,seriesRect:o});this.updatePickedFocus(r,i)}updatePickedFocus(t,e){const{focus:i,hoverRect:s,seriesRect:a}=this;if(t===void 0||i.series===void 0||s===void 0)return;const{datum:n,datumIndex:o}=t;if(i.datumIndex=o,i.datum=n,this.focusIndicator.isFocusVisible()&&this.chart.ctx.animationManager.reset(),this.focusIndicator.isFocusVisible()){let l=_Z(t);if(a!=null){const u=l.clone();u.x+=a.x,u.y+=a.y,l=u}const{x:c,y:h}=l.computeCenter();s.containsPoint(c,h)||this.chart.ctx.zoomManager.panToBBox(this.id,s,l)}RZ(a!=null?new lt(0,0,a.width,a?.height):void 0,this.focusIndicator,t,a?.x,a?.y);const r=PZ(s,t);if(r!==void 0&&this.hoverDevice==="keyboard"){this.tooltip.lastHover=void 0,this.highlight.appliedHoverEvent=void 0,this.highlight.pendingHoverEvent=void 0,this.highlight.stashedHoverEvent=void 0;const l=i.series.getTooltipContent(n),c=rg.makeTooltipMeta(r,n);this.chart.ctx.highlightManager.updateHighlight(this.id,n),this.chart.ctx.tooltipManager.updateTooltip(this.id,c,l),e||this.swapChain.update(this.getDatumAriaText(n,l))}}getDatumAriaText(t,e){const i=e==null?"":e_(e);return this.chart.ctx.localeManager.t("ariaAnnounceHoverDatum",{datum:t.series.getDatumAriaText?.(t,i)??i})}clearHighlight(){this.highlight.pendingHoverEvent=void 0,this.highlight.appliedHoverEvent=void 0,this.chart.ctx.highlightManager.updateHighlight(this.id)}clearTooltip(){this.chart.ctx.tooltipManager.removeTooltip(this.id),this.tooltip.lastHover=void 0}clearAll(){this.clearHighlight(),this.clearTooltip(),this.focusIndicator.updateBounds(void 0)}handleHoverHighlight(t){this.highlight.appliedHoverEvent=this.highlight.pendingHoverEvent,this.highlight.pendingHoverEvent=void 0;const e=this.highlight.appliedHoverEvent;if(!e)return;const i=this.chart.ctx.interactionManager.getState();if(i!==32&&i!==8&&i!==1)return;const{canvasX:s,canvasY:a}=e;if(t?this.chart.ctx.animationManager.isActive():!this.hoverRect?.containsPoint(s,a)){this.clearHighlight();return}let n={x:e.regionX,y:e.regionY};e.region!=="series"&&(n=Ae.fromCanvasPoint(this.chart.seriesRoot,s,a));const{range:o}=this.chart.highlight,r=o==="tooltip"?"highlight-tooltip":"highlight",l=Uu(this.series,n,r);if(l){this.chart.ctx.highlightManager.updateHighlight(this.id,l.datum),this.hoverDevice="mouse";return}this.chart.ctx.highlightManager.updateHighlight(this.id)}handleHoverTooltip(t,e){const i=this.chart.ctx.interactionManager.getState();if(i!==32&&i!==8&&i!==1)return;const{canvasX:s,canvasY:a,regionX:n,regionY:o}=t,r=t.sourceEvent.target;if(e?this.chart.ctx.animationManager.isActive():!this.hoverRect?.containsPoint(s,a)){this.hoverDevice=="mouse"&&this.clearTooltip();return}if(r&&this.chart.tooltip.interactive&&this.chart.ctx.domManager.isManagedChildDOMElement(r,"canvas-overlay",Ni))return;let l={x:n,y:o};t.region!=="series"&&(l=Ae.fromCanvasPoint(this.chart.seriesRoot,s,a));const c=Uu(this.series,l,"tooltip");if(!c){this.hoverDevice=="mouse"&&this.clearTooltip();return}this.hoverDevice="mouse";const h=c.series.getTooltipContent(c.datum);if(this.chart.tooltip.enabled&&c.series.tooltipEnabled&&h!=null){const p=rg.makeTooltipMeta(t,c.datum);this.chart.ctx.tooltipManager.updateTooltip(this.id,p,h)}}changeHighlightDatum(t){const e=new Set,{series:i=void 0,datum:s}=t.currentHighlight??{},{series:a=void 0,datum:n}=t.previousHighlight??{};a&&e.add(a),i&&e.add(i),a?.properties.cursor&&n&&this.chart.ctx.cursorManager.updateCursor(a.id),i?.properties.cursor&&i?.properties.cursor!=="default"&&s&&this.chart.ctx.cursorManager.updateCursor(i.id,i.properties.cursor),i==null||a==null?this.update(4):this.update(4,{seriesToUpdate:e})}}}}),GA,n_,KZ=A({"packages/ag-charts-community/src/chart/series/seriesLayerManager.ts"(){"use strict";me(),WO(),It(),hx(),GA=30,n_=class{constructor(t){this.seriesRoot=t,this.groups=new Map,this.series=new Map,this.expectedSeriesCount=1,this.mode="normal"}setSeriesCount(t){this.expectedSeriesCount=t}requestGroup(t){const{internalId:e,type:i,contentGroup:s,seriesGrouping:a}=t,{groupIndex:n=e}=a??{},o=this.series.get(e);if(o!=null)throw new Error(`AG Charts - series already has an allocated layer: ${JSON.stringify(o)}`);this.series.size===0&&(this.mode=this.expectedSeriesCount>=GA?"aggressive-grouping":"normal");let r=this.groups.get(i);r==null&&(r=new Map,this.groups.set(i,r));const l=this.lookupIdx(n);let c=r.get(l);return c==null&&(c={type:i,id:l,seriesIds:[],group:this.seriesRoot.appendChild(new mt({name:`${t.contentGroup.name??i}-managed-layer`,zIndex:t.contentGroup.zIndex,renderToOffscreenCanvas:!1}))},r.set(l,c)),this.series.set(e,{layerState:c,seriesConfig:t}),c.seriesIds.push(e),c.group.appendChild(s),c.group}changeGroup(t){const{internalId:e,seriesGrouping:i,type:s,contentGroup:a,oldGrouping:n}=t,{groupIndex:o=e}=i??{};this.groups.get(s)?.get(o)?.seriesIds.includes(e)||(this.series.has(e)&&this.releaseGroup({internalId:e,seriesGrouping:n,type:s,contentGroup:a}),this.requestGroup(t))}releaseGroup(t){const{internalId:e,contentGroup:i,type:s}=t;if(!this.series.has(e))throw new Error(`AG Charts - series doesn't have an allocated layer: ${e}`);const a=this.series.get(e)?.layerState;a&&(a.seriesIds=a.seriesIds.filter(n=>n!==e),a.group.removeChild(i)),a?.seriesIds.length===0?(this.seriesRoot.removeChild(a.group),this.groups.get(a.type)?.delete(a.id),this.groups.get(s)?.delete(e)):a!=null&&a.seriesIds.length>0&&(a.group.zIndex=this.getLowestSeriesZIndex(a.seriesIds)),this.series.delete(e)}updateLayerCompositing(){this.groups.forEach(t=>{t.forEach(e=>{const{group:i,seriesIds:s}=e;let a;s.length===0?a=!1:s.length>1?a=!0:a=this.series.get(s[0])?.seriesConfig.renderToOffscreenCanvas()===!0,i.renderToOffscreenCanvas=a,i.zIndex=this.getLowestSeriesZIndex(s)})})}lookupIdx(t){return this.mode==="normal"?t:typeof t=="string"&&(t=Number(t.split("-").at(-1)),!t)?0:Math.floor(At(0,t/this.expectedSeriesCount,1)*GA)}destroy(){this.groups.forEach(t=>{t.forEach(e=>{this.seriesRoot.removeChild(e.group)})}),this.groups.clear(),this.series.clear()}getLowestSeriesZIndex(t){return t.reduce((i,s)=>{const n=this.series.get(s)?.seriesConfig.contentGroup.zIndex;return i==null||n==null?n:UO(i,n)<=0?i:n},void 0)??1}}}}),o_,XZ=A({"packages/ag-charts-community/src/chart/update/dataWindowProcessor.ts"(){"use strict";ro(),o_=class{constructor(t,e,i,s,a){this.chart=t,this.dataService=e,this.updateService=i,this.zoomManager=s,this.animationManager=a,this.dirtyZoom=!1,this.dirtyDataSource=!1,this.lastAxisZooms=new Map,this.destroyFns=[],this.destroyFns.push(this.dataService.addListener("data-source-change",()=>this.onDataSourceChange()),this.dataService.addListener("data-load",()=>this.onDataLoad()),this.dataService.addListener("data-error",()=>this.onDataError()),this.updateService.addListener("update-complete",()=>this.onUpdateComplete()),this.zoomManager.addListener("zoom-change",()=>this.onZoomChange()))}destroy(){this.destroyFns.forEach(t=>t())}onDataLoad(){this.animationManager.skip(),this.updateService.update(1)}onDataError(){this.updateService.update(3)}onDataSourceChange(){this.dirtyDataSource=!0}onUpdateComplete(){!this.dirtyZoom&&!this.dirtyDataSource||this.updateWindow()}onZoomChange(){this.dirtyZoom=!0}updateWindow(){if(!this.dataService.isLazy())return;const t=this.getValidAxis();let e,i=!0;if(t){const s=this.zoomManager.getAxisZoom(t.id);e=this.getAxisWindow(t,s),i=this.shouldRefresh(t,s)}this.dirtyZoom=!1,this.dirtyDataSource=!1,i&&this.dataService.load({windowStart:e?.min,windowEnd:e?.max})}getValidAxis(){return this.chart.axes.find(t=>t.type==="time")}shouldRefresh(t,e){if(this.dirtyDataSource)return!0;if(!this.dirtyZoom)return!1;const i=this.lastAxisZooms.get(t.id);return i&&e.min===i.min&&e.max===i.max?!1:(this.lastAxisZooms.set(t.id,e),!0)}getAxisWindow(t,e){const i=t.scale.getDomain?.();if(!e||!i||i.length===0||isNaN(Number(i[0])))return;const s=Number(i[1])-Number(i[0]),a=new Date(Number(i[0])+s*e.min),n=new Date(Number(i[0])+s*e.max);return{min:a,max:n}}}}});function ZZ(){const{userAgent:t}=he().navigator;if(r_.test(t)){const e=parseFloat(l_.exec(t)?.[1]??"0"),i=Math.floor(e)>16;return i||st.warnOnce(`Unsupported Safari version: ${e} ; ${t}`),!i}else if(c_.test(t)&&!u_.test(t)&&!d_.test(t)){const e=parseInt(h_.exec(t)?.[1]??"0",10),i=e>126;return i||st.warnOnce(`Unsupported Chrome version: ${e} ; ${t}`),!i}return!1}var r_,l_,c_,h_,u_,d_,$Z=A({"packages/ag-charts-community/src/util/browser.ts"(){"use strict";Nt(),St(),r_=/^((?!chrome|android).)*safari/i,l_=/Version\/(\d+(\.\d+)?)/,c_=/Chrome/,h_=/Chrome\/(\d+)/,u_=/Edg/,d_=/OPR/}}),p_,QZ=A({"packages/ag-charts-community/src/chart/update/overlaysProcessor.ts"(){"use strict";Qi(),$Z(),AA(),p_=class{constructor(t,e,i,s,a,n,o){this.chartLike=t,this.overlays=e,this.dataService=i,this.layoutManager=s,this.localeManager=a,this.animationManager=n,this.domManager=o,this.destroyFns=[],this.overlayElem=this.domManager.addChild("canvas-overlay","overlay"),this.overlayElem.role="status",this.overlayElem.ariaAtomic="false",this.overlayElem.ariaLive="polite",this.overlayElem.classList.toggle(cx),this.destroyFns.push(this.layoutManager.addListener("layout:complete",r=>this.onLayoutComplete(r)))}destroy(){this.destroyFns.forEach(t=>t()),this.domManager.removeStyles("overlays"),this.domManager.removeChild("canvas-overlay","overlay")}onLayoutComplete({series:{rect:t}}){const e=this.dataService.isLoading(),i=this.chartLike.series.some(c=>c.hasData),s=this.chartLike.series.some(c=>c.visible);this.overlays.darkTheme?this.overlayElem.classList.add(DA):this.overlayElem.classList.remove(DA),this.overlayElem.style.left=`${t.x}px`,this.overlayElem.style.top=`${t.y}px`,this.overlayElem.style.width=`${t.width}px`,this.overlayElem.style.height=`${t.height}px`;const a=e,n=!e&&!i,o=i&&!s,r=this.overlays.unsupportedBrowser.enabled&&ZZ();a?this.showOverlay(this.overlays.loading,t):this.hideOverlay(this.overlays.loading),n?this.showOverlay(this.overlays.noData,t):this.hideOverlay(this.overlays.noData),o?this.showOverlay(this.overlays.noVisibleSeries,t):this.hideOverlay(this.overlays.noVisibleSeries),r?this.showOverlay(this.overlays.unsupportedBrowser,t):this.hideOverlay(this.overlays.unsupportedBrowser);const l=a||n||o||r;se(this.overlayElem,"aria-hidden",!l)}showOverlay(t,e){if(!t.enabled)return;const i=t.getElement(this.animationManager,this.localeManager,e);this.overlayElem.appendChild(i)}hideOverlay(t){t.removeElement(()=>{this.overlayElem.innerText="\xA0"},this.animationManager)}}}}),Wa,Mx,Ze,ar,Sl=A({"packages/ag-charts-community/src/chart/chart.ts"(){"use strict";so(),kt(),me(),Ue(),wK(),He(),Nt(),wa(),ha(),St(),RK(),Yt(),HE(),bD(),Jt(),vs(),KE(),Ct(),xt(),dl(),fe(),BK(),WX(),HX(),ro(),SR(),IR(),Pu(),cg(),yA(),ix(),dZ(),pZ(),Jp(),yZ(),xZ(),lx(),MZ(),DZ(),IZ(),Ds(),YZ(),KZ(),Vs(),XZ(),QZ(),pl(),Wa=te.create(!0,"opts"),Mx=class extends Mt{constructor(){super(...arguments),this.padding=new qo(0)}},M([I(pt,{optional:!0})],Mx.prototype,"clip",2),M([I(ct)],Mx.prototype,"padding",2),Ze=class x3 extends xD{constructor(e,i){var s;super(),this.id=Ea(this),this.seriesRoot=new Xi({name:`${this.id}-series-root`,zIndex:4}),this.annotationRoot=new Xi({name:`${this.id}-annotation-root`,zIndex:8}),this.titleGroup=new mt({name:"titles",zIndex:12}),this.debug=te.create(),this.extraDebugStats={},this.data=[],this._firstAutoSize=!0,this._autoSizeNotify=new mD,this.padding=new qo(20),this.seriesArea=new Mx,this.keyboard=new ax,this.mode="standalone",this.chartCaptions=new tg,this.suppressFieldDotNotation=!1,this.destroyed=!1,this._destroyFns=[],this.skipSync=!1,this.chartAnimationPhase="initial",this.modulesManager=new ER,this.processors=[],this.queuedUserOptions=[],this.queuedChartOptions=[],this.firstApply=!0,this._pendingFactoryUpdatesCount=0,this._performUpdateSkipAnimations=!1,this._performUpdateNotify=new mD,this.performUpdateType=7,this.runningUpdateType=7,this.updateShortcutCount=0,this.seriesToUpdate=new Set,this.updateMutex=new WE,this.updateRequestors={},this.performUpdateTrigger=PK(({count:h})=>{this.destroyed||this.updateMutex.acquire(async()=>{try{await this.performUpdate(h)}catch(u){st.error("update error",u)}}).catch(u=>st.errorOnce(u))}),this._performUpdateSplits={},this.axes=[],this.series=[],this._cachedData=void 0,this.onSeriesNodeClick=h=>{this.fireEvent({...h,type:"seriesNodeClick"})},this.onSeriesNodeDoubleClick=h=>{this.fireEvent({...h,type:"seriesNodeDoubleClick"})},this.onSeriesVisibilityChange=h=>{this.fireEvent(h)},this.seriesGroupingChanged=h=>{if(!(h instanceof ux))return;const{series:u,seriesGrouping:d,oldGrouping:p}=h;u.contentGroup.isRoot()||this.seriesLayerManager.changeGroup({internalId:u.internalId,type:u.type,contentGroup:u.contentGroup,renderToOffscreenCanvas:()=>u.renderToOffscreenCanvas(),seriesGrouping:d,oldGrouping:p})},this.chartOptions=e;const a=i?.scene,n=i?.container??e.processedOptions.container??void 0,o=i?.styleContainer??e.specialOverrides.styleContainer,r=new mt({name:"root"});r.visible=!1,r.append(this.seriesRoot),r.append(this.annotationRoot),r.append(this.titleGroup),this.titleGroup.append(this.title.node),this.titleGroup.append(this.subtitle.node),this.titleGroup.append(this.footnote.node),this.tooltip=new bn,this.seriesLayerManager=new n_(this.seriesRoot),this.mode=e.userOptions.mode??this.mode;const l=this.ctx=new bR(this,{chartType:this.getChartType(),scene:a,root:r,container:n,styleContainer:o,syncManager:new CR(this),pixelRatio:e.specialOverrides.overrideDevicePixelRatio,updateCallback:(h,u)=>this.update(h,u),updateMutex:this.updateMutex});this._destroyFns.push(l.domManager.addListener("resize",()=>this.parentResize(l.domManager.containerSize))),this.overlays=new qc,(s=this.overlays.loading).renderer??(s.renderer=()=>AZ(this.overlays.loading.getText(l.localeManager),l.animationManager.defaultDuration)),this.processors=[new o_(this,l.dataService,l.updateService,l.zoomManager,l.animationManager),new p_(this,this.overlays,l.dataService,l.layoutManager,l.localeManager,l.animationManager,l.domManager)],this.highlight=new cA,this.container=n;const c=this.getModuleContext();l.domManager.setDataBoolean("animating",!1),this.seriesAreaManager=new a_(this.initSeriesAreaDependencies()),this._destroyFns.push(l.layoutManager.registerElement(0,h=>{h.layoutBox.shrink(this.padding.toJson()),this.chartCaptions.positionCaptions(h)}),l.layoutManager.addListener("layout:complete",h=>this.chartCaptions.positionAbsoluteCaptions(h)),l.dataService.addListener("data-load",h=>{this.data=h.data}),this.title.registerInteraction(c,"beforebegin"),this.subtitle.registerInteraction(c,"beforebegin"),this.footnote.registerInteraction(c,"afterend"),l.interactionManager.addListener("page-left",()=>this.destroy()),l.animationManager.addListener("animation-frame",()=>{this.update(6)}),l.animationManager.addListener("animation-start",()=>l.domManager.setDataBoolean("animating",!0)),l.animationManager.addListener("animation-stop",()=>l.domManager.setDataBoolean("animating",!1)),l.zoomManager.addListener("zoom-change",()=>{this.series.forEach(u=>u.animationState?.transition("updateData"));const h=this.chartAnimationPhase!=="initial";this.update(3,{forceNodeDataRefresh:!0,skipAnimations:h})})),this.parentResize(l.domManager.containerSize)}static getInstance(e){return x3.chartsInstances.get(e)}get canvasElement(){return this.ctx.scene.canvas.element}download(e,i){this.ctx.scene.download(e,i)}getCanvasDataURL(e){return this.ctx.scene.getDataURL(e)}toSVG(){return this.ctx.scene.toSVG()}getOptions(){return this.queuedUserOptions.at(-1)??this.chartOptions.userOptions}getChartOptions(){return this.queuedChartOptions.at(-1)??this.chartOptions}initSeriesAreaDependencies(){const{ctx:e,tooltip:i,highlight:s,overlays:a,seriesRoot:n,mode:o}=this,r=this.getChartType();return{fireEvent:this.fireEvent.bind(this),getUpdateType:()=>this.performUpdateType,chartType:r,ctx:e,tooltip:i,highlight:s,overlays:a,seriesRoot:n,mode:o}}getModuleContext(){return this.ctx}getCaptionText(){return[this.title,this.subtitle,this.footnote].filter(e=>e.enabled&&e.text).map(e=>e.text).join(". ")}getAriaLabel(){return this.ctx.localeManager.t("ariaAnnounceChart",{seriesCount:this.series.length})}resetAnimations(){this.chartAnimationPhase="initial";for(const e of this.series)e.resetAnimation(this.chartAnimationPhase);for(const e of this.axes)e.resetAnimation(this.chartAnimationPhase);this.animationRect=void 0,this.ctx.animationManager.reset()}skipAnimations(){this.ctx.animationManager.skipCurrentBatch(),this._performUpdateSkipAnimations=!0}detachAndClear(){this.container=void 0,this.ctx.scene.clear()}destroy(e){if(this.destroyed)return;const i=e?.keepTransferableResources;let s;return this.performUpdateType=7,this._destroyFns.forEach(a=>a()),this.processors.forEach(a=>a.destroy()),this.tooltip.destroy(this.ctx.domManager),this.overlays.destroy(),this.modulesManager.destroy(),i?(this.ctx.scene.strip(),s={container:this.container,scene:this.ctx.scene}):(this.ctx.scene.destroy(),this.container=void 0),this.destroySeries(this.series),this.seriesLayerManager.destroy(),this.axes.forEach(a=>a.destroy()),this.axes=[],this.animationRect=void 0,this.ctx.destroy(),this.destroyed=!0,Object.freeze(this),s}requestFactoryUpdate(e){this.destroyed||(this._pendingFactoryUpdatesCount++,this.updateMutex.acquire(async()=>{if(!this.destroyed)try{await e(this)}finally{this.destroyed||this._pendingFactoryUpdatesCount--}}).catch(i=>st.errorOnce(i)))}update(e=0,i){const{forceNodeDataRefresh:s=!1,skipAnimations:a,seriesToUpdate:n=this.series,newAnimationBatch:o}=i??{};s&&this.series.forEach(r=>r.markNodeDataDirty());for(const r of n)this.seriesToUpdate.add(r);if(a&&(this.ctx.animationManager.skipCurrentBatch(),this._performUpdateSkipAnimations=!0),o&&this.ctx.animationManager.isActive()&&(this._performUpdateSkipAnimations=!0),this.skipSync=i?.skipSync??!1,this.debug.check()){let r=new Error().stack??"<unknown>";r=r.replace(/\([^)]*/g,""),this.updateRequestors[r]=e}e<this.performUpdateType&&(this.performUpdateType=e,this.ctx.domManager.setDataBoolean("updatePending",!0),this.performUpdateTrigger.schedule(i?.backOffMs))}async performUpdate(e){const{performUpdateType:i,extraDebugStats:s,_performUpdateSplits:a,ctx:n}=this,o=[...this.seriesToUpdate];this.performUpdateType=7,this.seriesToUpdate.clear(),this.runningUpdateType=i,this.updateShortcutCount===0&&i<6&&(n.animationManager.startBatch(this._performUpdateSkipAnimations),n.animationManager.onBatchStop(()=>this.chartAnimationPhase="ready")),this.debug("Chart.performUpdate() - start",Ru[i]);let r=performance.now();a.start??(a.start=r);const l=h=>{a[h]??(a[h]=0),a[h]+=performance.now()-r,r=performance.now()};switch(i){case 0:if(this.checkUpdateShortcut(0))break;this.ctx.updateService.dispatchPreDomUpdate(),this.updateDOM();case 1:if(this.checkUpdateShortcut(1))break;await this.updateData(),l("\u2B07\uFE0F");case 2:if(this.checkUpdateShortcut(2))break;await this.processData(),this.seriesAreaManager.dataChanged(),l("\u{1F3ED}");case 3:if(await this.checkFirstAutoSize(),this.checkUpdateShortcut(3))break;await this.processLayout(),l("\u2316");case 4:{if(this.checkUpdateShortcut(4))break;await this.updateSeries(o),l("\u{1F914}"),this.updateAriaLabels(),this.seriesLayerManager.updateLayerCompositing()}case 5:if(this.checkUpdateShortcut(5))break;n.updateService.dispatchPreSceneRender(this.getMinRects()),l("\u2196");case 6:if(this.checkUpdateShortcut(6))break;n.animationManager.endBatch(),s.updateShortcutCount=this.updateShortcutCount,n.scene.render({debugSplitTimes:a,extraDebugStats:s,seriesRect:this.seriesRect}),this.extraDebugStats={};for(const h of Object.keys(a))delete a[h];this.ctx.domManager.incrementDataCounter("sceneRenders");case 7:this.updateShortcutCount=0,this.updateRequestors={},this._performUpdateSkipAnimations=!1,n.animationManager.endBatch()}this.destroyed||(n.updateService.dispatchUpdateComplete(this.getMinRects()),this.ctx.domManager.setDataBoolean("updatePending",!1),this.runningUpdateType=7),this._performUpdateNotify.notify();const c=performance.now();this.debug("Chart.performUpdate() - end",{chart:this,durationMs:Math.round((c-a.start)*100)/100,count:e,performUpdateType:Ru[i]})}updateThemeClassName(){const e="ag-charts-theme-",i=[`${e}default`,`${e}default-dark`];let s=i[0],a=!1,{theme:n}=this.chartOptions.processedOptions;for(;typeof n!="string"&&n!=null;)n=n.baseTheme;typeof n=="string"&&(s=n.replace("ag-",e),a=n.includes("-dark")),i.includes(s)||(s=a?i[1]:i[0]),this.ctx.domManager.setThemeClass(s)}updateDOM(){this.updateThemeClassName();const{enabled:e,tabIndex:i}=this.keyboard;this.ctx.domManager.setTabGuardIndex(e?i??0:-1)}updateAriaLabels(){this.ctx.domManager.updateCanvasLabel(this.getAriaLabel())}checkUpdateShortcut(e){return this.destroyed?!0:this.updateShortcutCount>3?(st.warn("exceeded the maximum number of simultaneous updates (4), discarding changes and rendering",this.updateRequestors),!1):this.performUpdateType<=e?(this.updateShortcutCount++,!0):!1}async checkFirstAutoSize(){this.width!=null&&this.height!=null||this._lastAutoSize||await this._autoSizeNotify.await(500)||this.debug("Chart.checkFirstAutoSize() - timeout for first size update.")}onAxisChange(e,i){i==null&&e.length===0||this.ctx.axisManager.updateAxes(i??[],e)}onSeriesChange(e,i){const s=i?.filter(a=>!e.includes(a))??[];this.destroySeries(s),this.seriesLayerManager?.setSeriesCount(e.length);for(const a of e){if(i?.includes(a))continue;const n=this.seriesLayerManager.requestGroup(a);a.attachSeries(n,this.seriesRoot,this.annotationRoot);const o=this;a.chart={get mode(){return o.mode},get isMiniChart(){return!1},get seriesRect(){return o.seriesRect}},a.resetAnimation(this.chartAnimationPhase),this.addSeriesListeners(a),a.addChartEventListeners()}this.seriesAreaManager?.seriesChanged(e)}destroySeries(e){e?.forEach(i=>{i.removeEventListener("nodeClick",this.onSeriesNodeClick),i.removeEventListener("nodeDoubleClick",this.onSeriesNodeDoubleClick),i.removeEventListener("groupingChanged",this.seriesGroupingChanged),i.destroy(),this.seriesLayerManager.releaseGroup(i),i.detachSeries(void 0,this.seriesRoot,this.annotationRoot),i.chart=void 0})}addSeriesListeners(e){this.hasEventListener("seriesNodeClick")&&e.addEventListener("nodeClick",this.onSeriesNodeClick),this.hasEventListener("seriesNodeDoubleClick")&&e.addEventListener("nodeDoubleClick",this.onSeriesNodeDoubleClick),this.hasEventListener("seriesVisibilityChange")&&e.addEventListener("seriesVisibilityChange",this.onSeriesVisibilityChange),e.addEventListener("groupingChanged",this.seriesGroupingChanged)}assignSeriesToAxes(){for(const e of this.axes)e.boundSeries=this.series.filter(i=>i.axes[e.direction]===e)}assignAxesToSeries(){const e=Jy(this.axes,i=>i.direction);for(const i of this.series)for(const s of i.directions){const a=e[s];if(!a){st.warnOnce(`no available axis for direction [${s}]; check series and axes configuration.`);return}const n=i.getKeys(s),o=a.find(r=>!r.keys.length||n.some(l=>r.keys.includes(l)));if(!o){st.warnOnce(`no matching axis for direction [${s}] and keys [${n}]; check series and axes configuration.`);return}i.axes[s]=o}}parentResize(e){if(e==null||this.width!=null&&this.height!=null)return;let{width:i,height:s}=e;if(i=Math.floor(i),s=Math.floor(s),i===0&&s===0)return;const[a=0,n=0]=this._lastAutoSize??[];a===i&&n===s||(this._lastAutoSize=[i,s],this.resize("SizeMonitor",{}))}resize(e,i){const{scene:s,animationManager:a}=this.ctx,{inWidth:n,inHeight:o,inMinWidth:r,inMinHeight:l}=i;this.ctx.domManager.setSizeOptions(r??this.minWidth,l??this.minHeight,n??this.width,o??this.height);const c=n??this.width??this._lastAutoSize?.[0],h=o??this.height??this._lastAutoSize?.[1];if(this.debug(`Chart.resize() from ${e}`,{width:c,height:h,stack:new Error().stack}),!(c==null||h==null||!Vt(c)||!Vt(h))&&s.resize(c,h)){a.reset();let u=!0;(this.width==null||this.height==null)&&this._firstAutoSize&&(u=!1,this._firstAutoSize=!1),this.update(3,{forceNodeDataRefresh:!0,skipAnimations:u}),this._autoSizeNotify.notify()}}async updateData(){this.series.forEach(i=>i.setChartData(this.data));const e=this.modulesManager.mapModules(i=>i.updateData?.(this.data));await Promise.all(e)}async processData(){this.series.some(a=>a.canHaveAxes)&&(this.assignAxesToSeries(),this.assignSeriesToAxes());for(const a of this.axes)a.processData();const e=new fA(this.mode,this.suppressFieldDotNotation),i=this.series.map(a=>(a.resetDatumCallbackCache(),a.processData(e))),s=this.modulesManager.mapModules(a=>a.processData?.(e));this._cachedData=e.execute(this._cachedData),await Promise.all([...i,...s]),this.updateLegends()}updateLegends(e){for(const{legend:i,legendType:s}of this.modulesManager.legends())s==="category"?this.setCategoryLegendData(e):this.setLegendData(s,i)}setCategoryLegendData(e){var i;const{ctx:{legendManager:s,stateManager:a}}=this;e&&this.series.forEach(o=>{const r=e.find(l=>l.seriesId===o.id);o.onLegendInitialState("category",r)});const n=this.series.flatMap(o=>{const r=o.getLegendData("category");return s.updateData(o.id,r),r});if(e){a.setStateAndRestore(s,e);return}if(this.mode!=="integrated"){const o={},r=new Map(this.series.map(l=>[l.id,l.type]));for(const{seriesId:l,symbol:{marker:c},label:h}of n.filter(u=>!u.hideInLegend)){if(c.fill==null)continue;const u=r.get(l),d=o[u]??(o[u]={});d[i=h.text]??(d[i]=c.fill),d[h.text]!==c.fill&&st.warnOnce(`legend item '${h.text}' has multiple fill colors, this may cause unexpected behaviour.`)}}s.update()}setLegendData(e,i){i.data=this.series.filter(s=>s.properties.showInLegend).flatMap(s=>s.getLegendData(e))}async processLayout(){const e=this.animationRect,{width:i,height:s}=this.ctx.scene,a=this.ctx.layoutManager.createContext(i,s);await this.performLayout(a),e&&!this.animationRect?.equals(e)&&this.ctx.animationManager.skipCurrentBatch(),this.debug("Chart.performUpdate() - seriesRect",this.seriesRect)}async updateSeries(e){const{seriesRect:i}=this;await Promise.all(e.map(s=>s.update({seriesRect:i}))),this.ctx.seriesLabelLayoutManager.updateLabels(this.series.filter(s=>s.visible&&s.usesPlacedLabels),this.padding,this.seriesRect)}async waitForUpdate(e=1e4,i=!1){const s=performance.now();for(;this._pendingFactoryUpdatesCount>0||this.performUpdateType!==7||this.runningUpdateType!==7;){if(this._pendingFactoryUpdatesCount>0&&await this.updateMutex.waitForClearAcquireQueue(),(this.performUpdateType!==7||this.runningUpdateType!==7)&&await this._performUpdateNotify.await(),performance.now()-s>e){const a=`Chart.waitForUpdate() timeout of ${e} reached - first chart update taking too long.`;if(i)throw new Error(a);st.warnOnce(a)}QO()&&await EK()}}getMinRects(){const{width:e,height:i}=this.ctx.scene,s=this.series.map(h=>h.getMinRects(e,i)).filter(tl);if(s.length===0)return;let a=0,n=0,o=0,r=0;for(const{minRect:h,minVisibleRect:u}of s)a=Math.max(a,h.width),n=Math.max(n,h.height),o=Math.max(o,u.width),r=Math.max(r,u.height);const l=new lt(0,0,a,n);let c=l.clone();return o>0&&r>0&&(c=new lt(0,0,o,r)),{minRect:l,minVisibleRect:c}}filterMiniChartSeries(e){return e?.filter(i=>i.showInMiniChart!==!1)}applyOptions(e){const i=this.firstApply?e.processedOptions:e.diffOptions(this.chartOptions);if(i==null||Object.keys(i).length===0)return;const s=this.firstApply?{}:this.chartOptions.processedOptions,a=e.processedOptions;Wa("Chart.applyOptions() - applying delta",i);const n=this.applyModules(a),o=["type","data","series","listeners","preset","theme","legend.listeners","navigator.miniChart.series","navigator.miniChart.label","locale.localeText","axes","topology","nodes","initialState","styleContainer"];i.listeners&&this.registerListeners(this,i.listeners),Hp(this,i,{skip:o});let r=!1,l="no-op";i.series!=null&&(l=this.applySeries(this,i.series,s?.series),r=!0),l==="replaced"&&this.resetAnimations(),this.applyAxes(this,a,s,l,[])&&(r=!0),i.data&&(this.data=i.data),i.legend?.listeners&&this.modulesManager.isEnabled("legend")&&Object.assign(this.legend.listeners,i.legend.listeners),i.locale?.localeText&&(this.modulesManager.getModule("locale").localeText=i.locale?.localeText),this.chartOptions=e;const c=this.modulesManager.getModule("navigator"),h=this.modulesManager.getModule("zoom");!c?.enabled&&!h?.enabled&&this.ctx.zoomManager.updateZoom("chart");const u=c?.miniChart,d=a.navigator?.miniChart?.series??a.series;u?.enabled===!0&&d!=null?this.applyMiniChartOptions(u,d,a,s):u?.enabled===!1&&(u.series=[],u.axes=[]),this.ctx.annotationManager.setAnnotationStyles(e.annotationThemes),r||(r=this.shouldForceNodeDataRefresh(i,l));const g=r||n?0:3;this.maybeResetAnimations(l),Wa("Chart.applyOptions() - update type",Ru[g],{seriesStatus:l,forceNodeDataRefresh:r}),this.update(g,{forceNodeDataRefresh:r,newAnimationBatch:!0}),this.ctx.legendManager.clearData(),this.applyInitialState(a),this.firstApply=!1}applyInitialState(e){const{annotationManager:i,chartTypeOriginator:s,historyManager:a,stateManager:n,zoomManager:o}=this.ctx,{initialState:r}=e;if("annotations"in e&&e.annotations?.enabled&&r?.annotations!=null){const l=r.annotations.map(c=>{const h=i.getAnnotationTypeStyles(c.type);return Lt(c,h)});n.setState(i,l)}r?.chartType!=null&&n.setState(s,r.chartType),(e.navigator?.enabled||e.zoom?.enabled)&&r?.zoom!=null&&n.setState(o,r.zoom),r?.legend!=null&&this.updateLegends(r.legend),r!=null&&a.clear()}maybeResetAnimations(e){if(this.mode==="standalone")switch(e){case"series-grouping-change":case"replaced":this.resetAnimations();break;default:}}shouldForceNodeDataRefresh(e,i){const s=!!e.data||i==="data-change"||i==="replaced",a=tx.getKeys(),n=Object.values(a).some(r=>e[r]!=null),o=e.title!=null&&e.subtitle!=null;return s||n||o}applyMiniChartOptions(e,i,s,a){const n=a?.navigator?.miniChart?.series??a?.series,o=this.applySeries(e,this.filterMiniChartSeries(i),this.filterMiniChartSeries(n));this.applyAxes(e,s,a,o,["axes[].tick","axes[].thickness","axes[].title","axes[].crosshair","axes[].gridLine","axes[].label"]);const r=e.series;for(const h of r)h.properties.id=void 0;const l=e.axes,c=l.find(h=>h.direction==="x");for(const h of l)h.gridLine.enabled=!1,h.label.enabled=h===c,h.tick.enabled=!1,h.interactionEnabled=!1;if(c!=null){const h=s.navigator?.miniChart,u=h?.label,d=h?.label?.interval;if(c.line.enabled=!1,c.label.set(FM(u,["interval","rotation","minSpacing","autoRotate","autoRotateAngle"])),c.tick.set(FM(d,["enabled","width","size","color","interval","step"])),c.type==="grouped-category"){c.label.enabled=!1,c.label.rotation=0;const{depthOptions:g}=c;if(g.length===0)g.set([{label:{enabled:!0}}]);else for(let f=1;f<g.length;f++)g[f].label.enabled=!1}const p=d?.step;p!=null&&(c.interval.step=p)}}applyModules(e){const{type:i}=this.constructor;let s=!1;for(const a of pn.byType("root","legend")){const o=e[a.optionsKey]!=null&&a.chartTypes.includes(i);o!==this.modulesManager.isEnabled(a)&&(o?(this.modulesManager.addModule(a,r=>r.moduleFactory(this.getModuleContext())),a.type==="legend"&&this.modulesManager.getModule(a)?.attachLegend(this.ctx.scene),this[a.optionsKey]=this.modulesManager.getModule(a)):(this.modulesManager.removeModule(a),delete this[a.optionsKey]),s=!0)}return s}initSeriesDeclarationOrder(e){for(let i=0;i<e.length;i++)e[i].setSeriesIndex(i)}applySeries(e,i,s){if(!i)return"no-change";const a=mZ(e.series,i,s);if(a.status==="no-overlap"){Wa(`Chart.applySeries() - creating new series instances, status: ${a.status}`,a);const h=i.map(u=>this.createSeries(u));return this.initSeriesDeclarationOrder(h),e.series=h,"replaced"}Wa("Chart.applySeries() - matchResult",a);const n=[];let o=!1,r=!1,l=!1;const c=a.changes.toSorted((h,u)=>h.targetIdx-u.targetIdx);for(const h of c)switch(r||(r=h.status==="series-grouping"),o||(o=h.diff?.data!=null),l||(l=h.status!=="no-op"),h.status){case"add":{const u=this.createSeries(h.opts);n.push(u),Wa("Chart.applySeries() - created new series",u);break}case"remove":Wa(`Chart.applySeries() - removing series at previous idx ${h.idx}`,h.series);break;case"no-op":n.push(h.series),Wa(`Chart.applySeries() - no change to series at previous idx ${h.idx}`,h.series);break;case"series-grouping":case"update":default:{const{series:u,diff:d,idx:p}=h;Wa(`Chart.applySeries() - applying series diff previous idx ${p}`,d,u),this.applySeriesValues(u,d),u.markNodeDataDirty(),n.push(u)}}return this.initSeriesDeclarationOrder(n),Wa("Chart.applySeries() - final series instances",n),e.series=n,r?"series-grouping-change":o?"data-change":l?"updated":"no-op"}applyAxes(e,i,s,a,n=[]){if(!("axes"in i)||!i.axes)return!1;n=["axes[].type",...n];const{axes:o}=i;return!(a==="replaced")&&e.axes.length===o.length&&e.axes.every((c,h)=>c.type===o[h].type)&&hg(s)?(e.axes.forEach((c,h)=>{const u=s.axes?.[h]??{},d=eo(u,o[h]);Wa(`Chart.applyAxes() - applying axis diff idx ${h}`,d);const p=`axes[${h}]`;Hp(c,d,{path:p,skip:n})}),!0):(Wa(`Chart.applyAxes() - creating new axes instances; seriesStatus: ${a}`),e.axes=this.createAxis(o,n),!0)}createSeries(e){const i=js.create(e.type,this.getModuleContext());return this.applySeriesOptionModules(i,e),this.applySeriesValues(i,e),i}applySeriesOptionModules(e,i){const s=e.createModuleContext(),a=e.getModuleMap();for(const n of pn.byType("series-option"))n.optionsKey in i&&n.seriesTypes.includes(e.type)&&a.addModule(n,o=>o.moduleFactory(s))}applySeriesValues(e,i){const s=e.getModuleMap(),{type:a,data:n,listeners:o,seriesGrouping:r,showInMiniChart:l,...c}=i;for(const h of Qc)if(h.type==="series-option"&&h.optionsKey in c){const u=s.getModule(h.optionsKey);if(u){const d=c[h.optionsKey];delete c[h.optionsKey],u.properties.set(d)}}e.properties.set(c),"data"in i&&e.setOptionsData(n),o&&this.registerListeners(e,o),"seriesGrouping"in i&&(r==null?e.seriesGrouping=void 0:e.seriesGrouping={...e.seriesGrouping,...r})}createAxis(e,i){const s=[],a=this.getModuleContext();for(let n=0;n<e.length;n++){const o=e[n],r=lo.create(o.type,a);this.applyAxisModules(r,o),Hp(r,o,{path:`axes[${n}]`,skip:i}),s.push(r)}return fZ(s),s}applyAxisModules(e,i){const s=e.createModuleContext(),a=e.getModuleMap();for(const n of pn.byType("axis-option")){const o=i[n.optionsKey]!=null;o!==a.isEnabled(n)&&(o?(a.addModule(n,r=>r.moduleFactory(s)),e[n.optionsKey]=a.getModule(n)):(a.removeModule(n),delete e[n.optionsKey]))}}registerListeners(e,i){e.clearEventListeners();for(const[s,a]of Object.entries(i))el(a)&&e.addEventListener(s,a)}},Ze.chartsInstances=new WeakMap,M([ua({newValue(t){this.destroyed||(this.ctx.domManager.setContainer(t),Ze.chartsInstances.set(t,this))},oldValue(t){Ze.chartsInstances.delete(t)}})],Ze.prototype,"container",2),M([ua({newValue(t){this.resize("width option",{inWidth:t})}})],Ze.prototype,"width",2),M([ua({newValue(t){this.resize("height option",{inHeight:t})}})],Ze.prototype,"height",2),M([ua({newValue(t){this.resize("minWidth option",{inMinWidth:t})}})],Ze.prototype,"minWidth",2),M([ua({newValue(t){this.resize("minHeight option",{inMinHeight:t})}})],Ze.prototype,"minHeight",2),M([I(ct)],Ze.prototype,"padding",2),M([I(ct)],Ze.prototype,"seriesArea",2),M([I(ct)],Ze.prototype,"keyboard",2),M([I(ne(["standalone","integrated"],"a chart mode"))],Ze.prototype,"mode",2),M([Ne("chartCaptions.title")],Ze.prototype,"title",2),M([Ne("chartCaptions.subtitle")],Ze.prototype,"subtitle",2),M([Ne("chartCaptions.footnote")],Ze.prototype,"footnote",2),M([I(pt)],Ze.prototype,"suppressFieldDotNotation",2),M([ua({changeValue(t,e){this.onAxisChange(t,e)}})],Ze.prototype,"axes",2),M([ua({changeValue(t,e){this.onSeriesChange(t,e)}})],Ze.prototype,"series",2),ar=Ze}}),g_,f_,y_,m_,qZ=A({"packages/ag-charts-community/src/scene/util/quadtree.ts"(){"use strict";jy(),kt(),g_=class{constructor(t,e,i){this.root=new m_(t,e,i)}clear(t){this.root.clear(t)}addValue(t,e){const i={hitTester:t,value:e,distanceSquared:(s,a)=>t.distanceSquared(s,a)};this.root.addElem(i)}find(t,e){const i={best:{nearest:void 0,distanceSquared:1/0}};return this.root.find(t,e,i),i.best}},f_=class{constructor(t,e,i,s){this.nw=t,this.ne=e,this.sw=i,this.se=s}addElem(t){this.nw.addElem(t),this.ne.addElem(t),this.sw.addElem(t),this.se.addElem(t)}find(t,e,i){this.nw.find(t,e,i),this.ne.find(t,e,i),this.sw.find(t,e,i),this.se.find(t,e,i)}},y_=class{constructor(t,e,i){this.capacity=t,this.maxdepth=e,this.boundary=i??lt.NaN,this.elems=[],this.subdivisions=void 0}clear(t){this.elems.length=0,this.boundary=t,this.subdivisions=void 0}addElem(t){this.addCondition(t)&&(this.subdivisions===void 0?this.maxdepth===0||this.elems.length<this.capacity?this.elems.push(t):this.subdivide(t):this.subdivisions.addElem(t))}find(t,e,i){this.findCondition(t,e,i)&&(this.subdivisions===void 0?this.findAction(t,e,i):this.subdivisions.find(t,e,i))}subdivide(t){this.subdivisions=this.makeSubdivisions();for(const e of this.elems)this.subdivisions.addElem(e);this.subdivisions.addElem(t),this.elems.length=0}makeSubdivisions(){const{x:t,y:e,width:i,height:s}=this.boundary,{capacity:a}=this,n=this.maxdepth-1,o=i/2,r=s/2,l=new lt(t,e,o,r),c=new lt(t+o,e,o,r),h=new lt(t,e+r,o,r),u=new lt(t+o,e+r,o,r);return new f_(this.child(a,n,l),this.child(a,n,c),this.child(a,n,h),this.child(a,n,u))}},m_=class b3 extends y_{addCondition(e){const{x:i,y:s}=e.hitTester.midPoint;return this.boundary.containsPoint(i,s)}findCondition(e,i,s){const{best:a}=s;return a.distanceSquared!==0&&this.boundary.distanceSquared(e,i)<a.distanceSquared}findAction(e,i,s){const a=Fy(e,i,this.elems,s.best.distanceSquared);a.nearest!==void 0&&a.distanceSquared<s.best.distanceSquared&&(s.best=a)}child(e,i,s){return new b3(e,i,s)}}}}),Dx,VA=A({"packages/ag-charts-community/src/chart/series/dataModelSeries.ts"(){"use strict";Ui(),It(),fe(),Ds(),Dx=class extends Jc{constructor(){super(...arguments),this.showFocusBox=!0,this.clipFocusBox=!0}getScaleInformation({xScale:t,yScale:e}){const i=ie.is(t),s=ie.is(e);return{isContinuousX:i,isContinuousY:s,xScaleType:t?.type,yScaleType:e?.type}}getModulePropertyDefinitions(){const t=this.axes.x?.scale,e=this.axes.y?.scale;return this.moduleMap.mapModules(i=>i.getPropertyDefinitions(this.getScaleInformation({xScale:t,yScale:e}))).flat()}async requestDataModel(t,e,i){i.props.push(...this.getModulePropertyDefinitions());const{dataModel:s,processedData:a}=await t.request(this.id,e??[],i);return this.dataModel=s,this.processedData=a,this.dispatch("data-processed",{dataModel:s,processedData:a}),{dataModel:s,processedData:a}}isProcessedDataAnimatable(){const t=this.processedData?.reduced?.animationValidation;if(!t)return!0;const{orderedKeys:e,uniqueKeys:i}=t;return e&&i}checkProcessedDataAnimatable(){this.isProcessedDataAnimatable()||this.ctx.animationManager.skipCurrentBatch()}pickFocus(t){const e=this.getNodeData();if(e===void 0||e.length===0)return;const i=this.computeFocusDatumIndex(t,e);if(i===void 0)return;const{showFocusBox:s,clipFocusBox:a}=this,n=e[i],o={...t,datumIndex:i},r=this.computeFocusBounds(o);if(r!==void 0)return{bounds:r,showFocusBox:s,clipFocusBox:a,datum:n,datumIndex:i}}computeFocusDatumIndex(t,e){const i=r=>{const{missing:l=!1,enabled:c=!0,focusable:h=!0}=e[r];return!l&&c&&h},s=r=>{for(;r>=0&&!i(r);)r+=t.datumIndexDelta;return r===-1?void 0:r},a=r=>{for(;r<e.length&&!i(r);)r+=t.datumIndexDelta;return r===e.length?void 0:r};let n;const o=At(0,t.datumIndex,e.length-1);return t.datumIndexDelta<0?n=s(o):t.datumIndexDelta>0?n=a(o):n=a(o)??s(o),n===void 0?t.datumIndexDelta===0?void 0:t.datumIndex-t.datumIndexDelta:n}}}}),ho,yg,UA,Ax,Wu,Us,mg=A({"packages/ag-charts-community/src/chart/series/seriesProperties.ts"(){"use strict";Jt(),xt(),ho=class extends Mt{constructor(){super(...arguments),this.fill="rgba(255,255,255, 0.33)",this.stroke="rgba(0, 0, 0, 0.4)",this.strokeWidth=2}},M([I(jt,{optional:!0})],ho.prototype,"fill",2),M([I(Ft,{optional:!0})],ho.prototype,"fillOpacity",2),M([I(jt,{optional:!0})],ho.prototype,"stroke",2),M([I(nt,{optional:!0})],ho.prototype,"strokeWidth",2),M([I(Ft,{optional:!0})],ho.prototype,"strokeOpacity",2),M([I(Qn,{optional:!0})],ho.prototype,"lineDash",2),M([I(nt,{optional:!0})],ho.prototype,"lineDashOffset",2),yg=class extends Mt{},M([I(nt,{optional:!0})],yg.prototype,"strokeWidth",2),M([I(Ft,{optional:!0})],yg.prototype,"dimOpacity",2),M([I(pt,{optional:!0})],yg.prototype,"enabled",2),UA=class extends Mt{constructor(){super(...arguments),this.color="black"}},M([I(jt,{optional:!0})],UA.prototype,"color",2),Ax=class extends Mt{constructor(){super(...arguments),this.enabled=!0}},M([I(pt,{optional:!0})],Ax.prototype,"enabled",2),Wu=class extends Mt{constructor(){super(...arguments),this.item=new ho,this.series=new yg,this.text=new UA}},M([I(ct)],Wu.prototype,"item",2),M([I(ct)],Wu.prototype,"series",2),M([I(ct)],Wu.prototype,"text",2),Us=class extends Mt{constructor(){super(...arguments),this.visible=!0,this.focusPriority=1/0,this.showInLegend=!0,this.cursor="default",this.nodeClickRange="exact",this.highlight=new Ax,this.highlightStyle=new Wu}},M([I(J,{optional:!0})],Us.prototype,"id",2),M([I(pt)],Us.prototype,"visible",2),M([I(f0,{optional:!0})],Us.prototype,"focusPriority",2),M([I(pt)],Us.prototype,"showInLegend",2),M([I(J)],Us.prototype,"cursor",2),M([I(wp)],Us.prototype,"nodeClickRange",2),M([I(ct)],Us.prototype,"highlight",2),M([I(ct)],Us.prototype,"highlightStyle",2)}}),vl,Ml,Ix,uo,xg,nr,Ws=A({"packages/ag-charts-community/src/chart/series/cartesian/cartesianSeries.ts"(){"use strict";rl(),nl(),Ui(),N0(),kt(),me(),Qo(),Va(),Ss(),qZ(),He(),Yp(),xt(),Tu(),fe(),co(),VA(),Ds(),mg(),vl={x:["xKey"],y:["yKey"]},Ml={x:["xName"],y:["yName"]},Ix=class extends zu{constructor(t,e,i,s){super(t,e,i,s),this.xKey=s.properties.xKey,this.yKey=s.properties.yKey}},uo=class extends Us{constructor(){super(...arguments),this.pickOutsideVisibleMinorAxis=!1}},M([I(J,{optional:!0})],uo.prototype,"legendItemName",2),M([I(pt,{optional:!0})],uo.prototype,"pickOutsideVisibleMinorAxis",2),xg=100,nr=class extends Dx{constructor({pathsPerSeries:t=["path"],hasMarkers:e=!1,hasHighlightedLabels:i=!1,pathsZIndexSubOrderOffset:s=[],datumSelectionGarbageCollection:a=!0,markerSelectionGarbageCollection:n=!0,animationAlwaysUpdateSelections:o=!1,animationResetFns:r,directionKeys:l,directionNames:c,...h}){if(super({directionKeys:l,directionNames:c,canHaveAxes:!0,...h}),this.NodeEvent=Ix,this.dataNodeGroup=this.contentGroup.appendChild(new mt({name:`${this.id}-series-dataNodes`,zIndex:0})),this.markerGroup=this.contentGroup.appendChild(new mt({name:`${this.id}-series-markers`,zIndex:1})),this.labelGroup=this.contentGroup.appendChild(new Xi({name:`${this.id}-series-labels`})),this.labelSelection=Te.select(this.labelGroup,Ye),this.highlightSelection=Te.select(this.highlightNode,()=>this.opts.hasMarkers?this.markerFactory():this.nodeFactory()),this.highlightLabelSelection=Te.select(this.highlightLabel,Ye),this.annotationSelections=new Set,this.minRectsCache={dirtyNodeData:!0},this.debug=te.create(),!l||!c)throw new Error(`Unable to initialise series type ${this.type}`);this.opts={pathsPerSeries:t,hasMarkers:e,hasHighlightedLabels:i,pathsZIndexSubOrderOffset:s,directionKeys:l,directionNames:c,animationResetFns:r,animationAlwaysUpdateSelections:o,datumSelectionGarbageCollection:a,markerSelectionGarbageCollection:n},this.paths=t.map(u=>new qi({name:`${this.id}-${u}`})),this.datumSelection=Te.select(this.dataNodeGroup,()=>this.nodeFactory(),a),this.markerSelection=Te.select(this.markerGroup,()=>this.markerFactory(),n),this.animationState=new ku("empty",{empty:{update:{target:"ready",action:u=>this.animateEmptyUpdateReady(u)},reset:"empty",skip:"ready",disable:"disabled"},ready:{updateData:"waiting",clear:"clearing",highlight:u=>this.animateReadyHighlight(u),highlightMarkers:u=>this.animateReadyHighlightMarkers(u),resize:u=>this.animateReadyResize(u),reset:"empty",skip:"ready",disable:"disabled"},waiting:{update:{target:"ready",action:u=>{this.ctx.animationManager.isSkipped()?this.resetAllAnimation(u):this.animateWaitingUpdateReady(u)}},reset:"empty",skip:"ready",disable:"disabled"},disabled:{update:u=>this.resetAllAnimation(u),reset:"empty"},clearing:{update:{target:"empty",action:u=>this.animateClearingUpdateEmpty(u)},reset:"empty",skip:"ready"}},()=>this.checkProcessedDataAnimatable())}get contextNodeData(){return this._contextNodeData}getNodeData(){return this.contextNodeData?.nodeData}attachSeries(t,e,i){super.attachSeries(t,e,i),this.attachPaths(this.paths,e,i)}detachSeries(t,e,i){super.detachSeries(t,e,i),this.detachPaths(this.paths,e,i)}attachPaths(t,e,i){for(const s of t)this.contentGroup.appendChild(s)}detachPaths(t,e,i){for(const s of t)this.contentGroup.removeChild(s)}renderToOffscreenCanvas(){const t=this.getNodeData();return t!=null&&t.length>xg}resetAnimation(t){t==="initial"?this.animationState.transition("reset"):t==="ready"?this.animationState.transition("skip"):t==="disabled"&&this.animationState.transition("disable")}addChartEventListeners(){this.destroyFns.push(this.ctx.chartEventManager.addListener("legend-item-click",t=>this.onLegendItemClick(t)),this.ctx.chartEventManager.addListener("legend-item-double-click",t=>this.onLegendItemDoubleClick(t)))}destroy(){super.destroy(),this._contextNodeData=void 0}update({seriesRect:t}){const{visible:e,_contextNodeData:i}=this,a=this.ctx.highlightManager?.getActiveHighlight()?.series===this,n=this.checkResize(t),o=this.updateHighlightSelection(a);this.updateSelections(e),this.updateNodes(o,a,e);const r=this.getAnimationData(t,i);r&&(n&&this.animationState.transition("resize",r),this.animationState.transition("update",r))}updateSelections(t){var e;const i=!this.opts.animationAlwaysUpdateSelections&&this.ctx.animationManager.isSkipped();if(!(!t&&i)&&!(!this.nodeDataRefresh&&!this.isPathOrSelectionDirty())){if(this.nodeDataRefresh){this.nodeDataRefresh=!1,this.debug("CartesianSeries.updateSelections() - calling createNodeData() for",this.id),this.markQuadtreeDirty(),this._contextNodeData=this.createNodeData();const s=this.isProcessedDataAnimatable();this._contextNodeData&&((e=this._contextNodeData).animationValid??(e.animationValid=s)),this.minRectsCache.dirtyNodeData=!0;const{dataModel:a,processedData:n}=this;a!==void 0&&n!==void 0&&this.dispatch("data-update",{dataModel:a,processedData:n})}this.updateSeriesSelections()}}updateSeriesSelections(t){const{datumSelection:e,labelSelection:i,markerSelection:s,paths:a}=this,n=this._contextNodeData;if(!n)return;const{nodeData:o,labelData:r,itemId:l}=n;this.updatePaths({seriesHighlighted:t,itemId:l,contextData:n,paths:a}),this.datumSelection=this.updateDatumSelection({nodeData:o,datumSelection:e}),this.labelSelection=this.updateLabelSelection({labelData:r,labelSelection:i})??i,this.opts.hasMarkers&&(this.markerSelection=this.updateMarkerSelection({nodeData:o,markerSelection:s}))}markerFactory(){const t=Ua();return new t}updateNodes(t,e,i){const{highlightSelection:s,highlightLabelSelection:a,opts:{hasMarkers:n,hasHighlightedLabels:o}}=this,r=!this.ctx.animationManager.isSkipped(),l=this.visible&&this._contextNodeData!=null&&i;this.contentGroup.visible=r||l,this.highlightGroup.visible=(r||l)&&e;const c=this.getOpacity();n?(this.updateMarkerNodes({markerSelection:s,isHighlight:!0}),this.animationState.transition("highlightMarkers",s)):(this.updateDatumNodes({datumSelection:s,isHighlight:!0}),this.animationState.transition("highlight",s)),o&&this.updateLabelNodes({labelSelection:a});const{dataNodeGroup:h,markerGroup:u,datumSelection:d,labelSelection:p,markerSelection:g,paths:f,labelGroup:x}=this,{itemId:m}=this.contextNodeData??{};h.opacity=c,h.visible=r||l,x.visible=l,n&&(u.opacity=c,u.visible=l),x&&(x.opacity=c),this.updatePathNodes({seriesHighlighted:e,itemId:m,paths:f,opacity:c,visible:l,animationEnabled:r}),h.visible&&(this.updateDatumNodes({datumSelection:d,highlightedItems:t,isHighlight:!1}),this.usesPlacedLabels||this.updateLabelNodes({labelSelection:p}),n&&this.updateMarkerNodes({markerSelection:g,isHighlight:!1}))}getHighlightLabelData(t,e){const i=t.filter(s=>s.datum===e.datum&&s.itemId===e.itemId);return i.length===0?void 0:i}getHighlightData(t,e){return e?[e]:void 0}updateHighlightSelection(t){const{highlightSelection:e,highlightLabelSelection:i,_contextNodeData:s}=this;if(!s)return;const a=this.ctx.highlightManager?.getActiveHighlight(),n=t&&a?.datum?a:void 0;let o,r;if(n!=null){const l=this.isLabelEnabled(),{labelData:c,nodeData:h}=s;r=this.getHighlightData(h,n),o=l?this.getHighlightLabelData(c,n):void 0}return this.highlightSelection=this.updateHighlightSelectionItem({items:r,highlightSelection:e}),this.highlightLabelSelection=this.updateHighlightSelectionLabel({items:o,highlightLabelSelection:i}),r}markQuadtreeDirty(){this.quadtree=void 0}*datumNodesIter(){for(const{node:t}of this.datumSelection)t.datum.missing!==!0&&(yield t)}getQuadTree(){if(this.quadtree===void 0){const{width:t,height:e}=this.ctx.scene.canvas,i=new lt(0,0,t,e);this.quadtree=new g_(100,10,i),this.initQuadTree(this.quadtree)}return this.quadtree}initQuadTree(t){}pickNodeExactShape(t){const e=super.pickNodeExactShape(t);if(e)return e;const{x:i,y:s}=t,{opts:{hasMarkers:a}}=this;let n;const{dataNodeGroup:o,markerGroup:r}=this;if(n=o.pickNode(i,s),!n&&a&&(n=r?.pickNode(i,s)),n&&n.datum.missing!==!0)return{datum:n.datum,distance:0};for(const l of this.moduleMap.modules()){const{datum:c}=l.pickNodeExact(t)??{};if(c!=null&&c?.missing!==!0)return{datum:c,distance:0}}}pickNodeClosestDatum(t){const{x:e,y:i}=t,{axes:s,_contextNodeData:a}=this;if(!a)return;const n=s.x,o=s.y,r={x:e,y:i};let l=1/0,c;for(const h of a.nodeData){const{point:{x:u=NaN,y:d=NaN}={}}=h;if(isNaN(u)||isNaN(d)||!(n?.inRange(u)&&o?.inRange(d)))continue;const g=Math.max((r.x-u)**2+(r.y-d)**2,0);g<l&&(l=g,c=h)}for(const h of this.moduleMap.modules()){const u=h.pickNodeNearest(t);if(u!==void 0&&u.distanceSquared<l){l=u.distanceSquared,c=u.datum;break}}if(c){const h=Math.max(Math.sqrt(l)-(c.point?.size??0),0);return{datum:c,distance:h}}}pickNodeMainAxisFirst(t,e){const{x:i,y:s}=t,{axes:a,_contextNodeData:n}=this,{pickOutsideVisibleMinorAxis:o}=this.properties;if(!n)return;const r=a.x,l=a.y,c=[r,l].filter(Gc.is).map(g=>g.direction);if(e&&c.length===0)return;const[h="x"]=c,u=[i,s];h!=="x"&&u.reverse();const d=[1/0,1/0];let p;for(const g of n.nodeData){const{x:f=NaN,y:x=NaN}=g.point??g.midPoint??{};if(isNaN(f)||isNaN(x)||g.missing===!0)continue;const m=[r?.inRange(f),l?.inRange(x)];if(h!=="x"&&m.reverse(),!m[0]||!o&&!m[1])continue;const b=[f,x];h!=="x"&&b.reverse();let v=!0;for(let S=0;S<b.length;S++){const D=Math.abs(b[S]-u[S]);if(D>d[S]){v=!1;break}else D<d[S]&&(d[S]=D,d.fill(1/0,S+1,d.length))}v&&(p=g)}if(p){let g=Math.max(d[0]**2+d[1]**2-(p.point?.size??0),0);for(const f of this.moduleMap.modules()){const x=f.pickNodeMainAxisFirst(t);if(x!==void 0&&x.distanceSquared<g){p=x.datum,g=x.distanceSquared;break}}return{datum:p,distance:Math.sqrt(g)}}}isPathOrSelectionDirty(){return!1}shouldFlipXY(){return!1}getMinRects(t,e){const{dirtyNodeData:i,sizeCache:s,minRect:a,minVisibleRect:n}=this.minRectsCache,o=JSON.stringify({width:t,height:e});if(!(o!==s)&&!i&&a&&n)return{minRect:a,minVisibleRect:n};const l=this.computeMinRects(t,e);return this.minRectsCache={dirtyNodeData:!1,sizeCache:o,minRect:l?.minRect,minVisibleRect:l?.minVisibleRect},l}computeMinRects(t,e){const i=this._contextNodeData;if(!i?.nodeData.length)return;const{nodeData:s}=i,a=Array(s.length),n=Array(s.length);for(const[b,{midPoint:v}]of s.entries())a[b]=v?.x??0,n[b]=v?.y??0;a.sort((b,v)=>b-v),n.sort((b,v)=>b-v);let o,r,l,c,h=0,u=0;for(let b=1;b<s.length;b++)a[b]>=0&&(o??(o=b)),a[b]>t&&(r??(r=b)),n[b]>=0&&(l??(l=b)),n[b]>e&&(c??(c=b)),h=Math.max(h,a[b]-a[b-1]),u=Math.max(u,n[b]-n[b-1]);r??(r=s.length),c??(c=s.length);const d=o!=null&&r!=null?a.slice(o,r):[],p=l!=null&&c!=null?n.slice(l,c):[];let g=0,f=0;for(let b=1;b<Math.max(d.length,p.length);b++){const v=d[b],S=d[b-1],D=p[b],k=p[b-1];v!=null&&S!=null&&(g=Math.max(g,v-S)),D!=null&&k!=null&&(f=Math.max(f,D-k))}const x=new lt(0,0,h,u),m=new lt(0,0,g,f);return{minRect:x,minVisibleRect:m}}updateHighlightSelectionItem(t){const{opts:{hasMarkers:e}}=this,{items:i,highlightSelection:s}=t,a=i??[];if(e){const n=s;return this.updateMarkerSelection({nodeData:a,markerSelection:n})}else return this.updateDatumSelection({nodeData:a,datumSelection:s})}updateHighlightSelectionLabel(t){return this.updateLabelSelection({labelData:t.items??[],labelSelection:t.highlightLabelSelection})}updateDatumSelection(t){return t.datumSelection}updateDatumNodes(t){}updateMarkerSelection(t){return t.markerSelection}updateMarkerNodes(t){}updatePaths(t){t.paths.forEach(e=>e.visible=!1)}updatePathNodes(t){const{paths:e,opacity:i,visible:s}=t;for(const a of e)a.opacity=i,a.visible=s}resetPathAnimation(t){const{path:e}=this.opts?.animationResetFns??{};e&&t.paths.forEach(i=>{We([i],e)})}resetDatumAnimation(t){const{datum:e}=this.opts?.animationResetFns??{};e&&We([t.datumSelection],e)}resetLabelAnimation(t){const{label:e}=this.opts?.animationResetFns??{};e&&We([t.labelSelection],e)}resetMarkerAnimation(t){const{marker:e}=this.opts?.animationResetFns??{};e&&this.opts.hasMarkers&&We([t.markerSelection],e)}resetAllAnimation(t){this.ctx.animationManager.stopByAnimationGroupId(this.id),this.resetPathAnimation(t),this.resetDatumAnimation(t),this.resetLabelAnimation(t),this.resetMarkerAnimation(t),t.contextData?.animationValid===!1&&this.ctx.animationManager.skipCurrentBatch()}animateEmptyUpdateReady(t){this.ctx.animationManager.skipCurrentBatch(),this.resetAllAnimation(t)}animateWaitingUpdateReady(t){this.ctx.animationManager.skipCurrentBatch(),this.resetAllAnimation(t)}animateReadyHighlight(t){const{datum:e}=this.opts?.animationResetFns??{};e&&We([t],e)}animateReadyHighlightMarkers(t){const{marker:e}=this.opts?.animationResetFns??{};e&&We([t],e)}animateReadyResize(t){this.resetAllAnimation(t)}animateClearingUpdateEmpty(t){this.ctx.animationManager.skipCurrentBatch(),this.resetAllAnimation(t)}getAnimationData(t,e){const{_contextNodeData:i}=this;return i?{datumSelection:this.datumSelection,markerSelection:this.markerSelection,labelSelection:this.labelSelection,annotationSelections:[...this.annotationSelections],contextData:i,previousContextData:e,paths:this.paths,seriesRect:t}:void 0}updateLabelSelection(t){return t.labelSelection}getScaling(t){if(t instanceof um){const{range:e,domain:i}=t;return{type:"log",convert:s=>t.convert(s),domain:[i[0],i[1]],range:[e[0],e[1]]}}else if(t instanceof ie){const{range:e}=t,i=t.getDomain();return{type:"continuous",domain:[i[0],i[1]],range:[e[0],e[1]]}}else if(t instanceof $o){const{domain:e}=t;return{type:"category",domain:e,inset:t.inset,step:t.step}}}calculateScaling(){const t={};for(const e of Object.values(rm)){const i=this.axes[e];if(!i)continue;const s=this.getScaling(i.scale);s!=null&&(t[e]=s)}return t}}}}),x_,bg,b_,JZ=A({"packages/ag-charts-community/src/chart/cartesianChart.ts"(){"use strict";Ii(),Ui(),Ue(),St(),It(),Tu(),Sl(),fe(),Ws(),x_=["top","right","bottom","left"],bg=class S3 extends ar{constructor(e,i){super(e,i),this.paired=!0,this.firstSeriesTranslation=!0,this.lastUpdateClipRect=void 0}onAxisChange(e,i){super.onAxisChange(e,i),this.ctx!=null&&this.ctx.zoomManager.updateAxes(e)}destroySeries(e){super.destroySeries(e),this.firstSeriesTranslation=!0}getChartType(){return"cartesian"}setRootClipRects(e){const{seriesRoot:i,annotationRoot:s}=this;i.setClipRect(e),s.setClipRect(e)}performLayout(e){const{firstSeriesTranslation:i,seriesRoot:s,annotationRoot:a}=this,{clipSeries:n,seriesRect:o,visible:r}=this.updateAxes(e.layoutBox);this.seriesRoot.visible=r,this.seriesRect=o,this.animationRect=e.layoutBox;const{x:l,y:c}=o;if(i){for(const p of[s,a])p.translationX=Math.floor(l),p.translationY=Math.floor(c);this.firstSeriesTranslation=!1}else{const{translationX:p,translationY:g}=s;Yn(this.id,"seriesRect",this.ctx.animationManager,[s,a],{translationX:p,translationY:g},{translationX:Math.floor(l),translationY:Math.floor(c)},{phase:"update"})}const h=o.clone().grow(this.seriesArea.padding),u=this.seriesArea.clip||n?h:void 0,{lastUpdateClipRect:d}=this;this.lastUpdateClipRect=u,this.ctx.animationManager.isActive()&&d!=null?this.ctx.animationManager.animate({id:this.id,groupId:"clip-rect",phase:"update",from:d,to:h,onUpdate:p=>this.setRootClipRects(p),onComplete:()=>this.setRootClipRects(u)}):this.setRootClipRects(u),this.ctx.layoutManager.emitLayoutComplete(e,{axes:this.axes.map(p=>p.getLayoutState()),series:{visible:r,rect:o,paddedRect:h,shouldFlipXY:this.shouldFlipXY()},clipSeries:n})}updateAxes(e){const{clipSeries:i,seriesRect:s,overflows:a}=this.resolveAxesLayout(e);for(const n of this.axes)n.update(),n.setCrossLinesVisible(!a),this.clipAxis(n,s,e);return{clipSeries:i,seriesRect:s,visible:!a}}resolveAxesLayout(e){let i,s,a=0;const n=10;do if(s=i??this.getDefaultState(),i=this.updateAxesPass(new Map(s.axisAreaWidths),e.clone()),a++>n){st.warn("Max iterations reached. Unable to stabilize axes layout.");break}while(!this.isLayoutStable(i,s));return this.lastAreaWidths=i.axisAreaWidths,i}updateAxesPass(e,i){const s=new Map,a={};let n=!1,o=!1;for(const m of x_){const b=this.seriesArea.padding[m],v=this.axes.findLast(S=>S.position===m);v?v.seriesAreaPadding=b:i.shrink(b,m)}const r=(e.get("left")??0)+(e.get("right")??0),l=(e.get("top")??0)+(e.get("bottom")??0),c=this.buildCrossLinePadding(e);i.width<=r+c.hPadding||i.height<=l+c.vPadding?n=!0:i.shrink(c);const h=i.clone().shrink(Object.fromEntries(e));for(const m of this.axes){const{position:b="left",direction:v}=m;this.sizeAxis(m,h,b);const S=this.getSyncedDomain(m),D=v==="y",k=m.calculateLayout(S,m.nice?a[v]:void 0);a[v]??(a[v]=k.primaryTickCount),o||(o=m.dataDomain.clipped||m.visibleRange[0]>0||m.visibleRange[1]<1),s.set(m.id,Math.ceil(m.thickness??(D?k.bbox.width:k.bbox.height)))}const u=Object.entries(Jy(this.axes,m=>m.position??"left")),{width:d,height:p,canvas:g}=this.ctx.scene,f=new Map,x=new Map;for(const[m,b]of u){let S=m==="left"||m==="right"?p%g.pixelRatio:d%g.pixelRatio,D=0;for(const k of b){x.set(k.id,S);const L=s.get(k.id)??0;D=Math.max(D,S+L),k.layoutConstraints.stacked&&(S+=L+S3.AxesPadding)}f.set(m,Math.ceil(D))}for(const[m,b]of u)this.positionAxes({axes:b,position:m,axisWidths:s,axisOffsets:x,axisAreaWidths:f,axisBound:i,seriesRect:h});return{clipSeries:o,seriesRect:h,axisAreaWidths:f,overflows:n}}buildCrossLinePadding(e){const i={top:0,right:0,bottom:0,left:0,hPadding:0,vPadding:0};this.axes.forEach(s=>{s.crossLines?.forEach(a=>{a.calculatePadding?.(i)})});for(const[s,a=0]of Object.entries(i))i[s]=Math.max(a-(e.get(s)??0),0);return i.hPadding=i.left+i.right,i.vPadding=i.top+i.bottom,i}clampToOutsideSeriesRect(e,i,s,a){const n=s==="x"?e.x:e.y,o=s==="x"?e.width:e.height;return a===1?Math.min(i,n+o):Math.max(i,n)}getSyncedDomain(e){const i=this.modulesManager.getModule("sync");if(!i?.enabled)return;const s=i.getSyncedDomain(e);if(s&&e.dataDomain.domain.length){let a;const{domain:n}=e.scale;if(ie.is(e.scale)){const[o,r]=Gi(s);a=o!==n[0]||r!==n[1]}else a=!sl(s,n);a&&!this.skipSync&&i.updateSiblings()}return s}sizeAxis(e,i,s){const a=e instanceof Gc,n=s==="left"||s==="right",{width:o,height:r}=i,l=n?r:o;let c=0,h=l,{min:u,max:d}=this.ctx.zoomManager.getAxisZoom(e.id);const{width:p,unit:g,align:f}=e.layoutConstraints;g==="px"?h=c+p:h=h*p/100,f==="end"&&(c=l-(h-c),h=l),n&&(a?[u,d]=[1-d,1-u]:[c,h]=[h,c]),e.range=[c,h],e.visibleRange=[u,d],e.gridLength=n?o:r}positionAxes(e){const{axes:i,axisBound:s,axisWidths:a,axisOffsets:n,axisAreaWidths:o,seriesRect:r,position:l}=e,c=o.get(l)??0;let h="x",u="y",d=1;(l==="top"||l==="bottom")&&(h="y",u="x");let p=s[h];(l==="right"||l==="bottom")&&(d=-1,p+=h==="x"?s.width:s.height);for(const g of i){const f=o.get(u==="x"?"left":"top")??0,x=a.get(g.id)??0,m=n.get(g.id)??0;g.gridPadding=c-m-x,g.translation[u]=s[u]+f,g.translation[h]=this.clampToOutsideSeriesRect(r,p+d*(m+x),h,d)}}shouldFlipXY(){return this.series.every(e=>e instanceof nr&&e.shouldFlipXY())}getDefaultState(){const e=new Map;if(this.lastAreaWidths)for(const{position:i="left"}of this.axes){const s=this.lastAreaWidths.get(i);s!=null&&e.set(i,s)}return{axisAreaWidths:e,clipSeries:!1,overflows:!1}}isLayoutStable(e,i){if(i.overflows!==e.overflows||i.clipSeries!==e.clipSeries)return!1;for(const s of e.axisAreaWidths.keys())if(!i.axisAreaWidths.has(s))return!1;for(const[s,a]of i.axisAreaWidths.entries()){const n=e.axisAreaWidths.get(s);if((a!=null||n!=null)&&a!==n)return!1}return!0}clipAxis(e,i,s){const a=Math.ceil(e.gridLine?.width??0),n=Math.ceil(e.line?.width??0);let{width:o,height:r}=i;switch(o+=e.direction==="x"?a:n,r+=e.direction==="y"?a:n,e.clipGrid(i.x,i.y,o,r),e.position){case"left":case"right":e.clipTickLines(s.x,i.y-a,s.width+a,i.height+a*2);break;case"top":case"bottom":e.clipTickLines(i.x-a,s.y,i.width+a*2,s.height+a);break}}},bg.className="CartesianChart",bg.type="cartesian",bg.AxesPadding=15,b_=bg}}),Hu,WA,t6=A({"packages/ag-charts-community/src/chart/chartProxy.ts"(){"use strict";so(),ha(),vs(),ro(),Hu=class v3{constructor(e,i,s){this.factoryApi=i,this.licenseManager=s,this.chart=e}static isInstance(e){return e instanceof v3||e.constructor?.name==="AgChartInstanceProxy"&&e.chart!=null?!0:e.chart!=null&&this.validateImplementation(e)}static validateImplementation(e){const i=["getOptions","destroy"],s=Object.keys(Object.getPrototypeOf(e)??{});return i.every(a=>s.includes(a))}async update(e){this.factoryApi.update(e,this),await this.chart.waitForUpdate()}async updateDelta(e){this.factoryApi.updateUserDelta(this,e),await this.chart.waitForUpdate()}getOptions(){const e=$i(this.chart.getOptions());for(const i of Object.keys(e))i.startsWith("_")&&delete e[i];return e}waitForUpdate(){return this.chart.waitForUpdate()}async download(e){const i=await this.prepareResizedChart(this,e);try{i.chart.download(e?.fileName,e?.fileFormat)}finally{i.destroy()}}async __toSVG(e){const i=await this.prepareResizedChart(this,{width:600,height:300,...e});try{return i.chart.toSVG()}finally{i.destroy()}}async getImageDataURL(e){const i=await this.prepareResizedChart(this,e);try{return i.chart.getCanvasDataURL(e?.fileFormat)}finally{i.destroy()}}getState(){return this.factoryApi.caretaker.save(...this.getEnabledOriginators())}async setState(e){const i=this.getEnabledOriginators();if(!i.includes(this.chart.ctx.legendManager)){await this.setStateOriginators(e,i);return}await this.setStateOriginators(e,i.filter(s=>s!==this.chart.ctx.zoomManager)),await this.setStateOriginators(e,[this.chart.ctx.zoomManager])}resetAnimations(){this.chart.resetAnimations()}skipAnimations(){this.chart.skipAnimations()}destroy(){this.releaseChart?(this.releaseChart(),this.chart=null):(this.chart.publicApi=void 0,this.chart.destroy())}async prepareResizedChart(e,i={}){const{chart:s}=e,a=i.width??s.width??s.ctx.scene.canvas.width,n=i.height??s.height??s.ctx.scene.canvas.height,o=e.getState(),r=pn.hasEnterpriseModules(),l={...s.chartOptions.processedOverrides,container:document.createElement("div"),width:a,height:n},c=s.getOptions();r&&(l.animation={enabled:!1},this.licenseManager?.isDisplayWatermark()&&(l.foreground={text:this.licenseManager.getWatermarkMessage(),image:{url:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjU4IiBoZWlnaHQ9IjQwIiB2aWV3Qm94PSIwIDAgMjU4IDQwIiBmaWxsPSJub25lIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPgo8cGF0aCBkPSJNMjUuNzc5IDI4LjY1N0gxMy4zNTlMMTEuMTczIDM0LjAxMkg1LjY3Mjk3TDE3LjE4MiA3LjA1OTk5SDIxLjk1M0wzMy40NjIgMzQuMDEySDI3Ljk2MkwyNS43NzYgMjguNjU3SDI1Ljc3OVpNMjQuMDY4IDI0LjM5N0wxOS41ODggMTMuNDM0TDE1LjEwNyAyNC4zOTdIMjQuMDY4Wk02Mi4wOTIgMTguODIzSDQ5LjgxN1YyMy4wODZINTYuNzc1QzU2LjU1NSAyNS4yMjIgNTUuNzU1IDI2LjkyNyA1NC4zNzIgMjguMjAyQzUyLjk4OSAyOS40NzYgNTEuMTY2IDMwLjExNSA0OC45MDkgMzAuMTE1QzQ3LjYyMiAzMC4xMTUgNDYuNDUgMjkuODg1IDQ1LjM5MyAyOS40MjNDNDQuMzU4MyAyOC45NzgxIDQzLjQzMjYgMjguMzEzOCA0Mi42OCAyNy40NzZDNDEuOTI3IDI2LjYzOSA0MS4zNDQgMjUuNjMxIDQwLjkzMSAyNC40NTNDNDAuNTE5IDIzLjI3NSA0MC4zMTEgMjEuOTcgNDAuMzExIDIwLjUzN0M0MC4zMTEgMTkuMTA1IDQwLjUxNiAxNy44IDQwLjkzMSAxNi42MjFDNDEuMzQ0IDE1LjQ0MyA0MS45MjcgMTQuNDM2IDQyLjY4IDEzLjU5OEM0My40Mzc2IDEyLjc1NzcgNDQuMzY5NiAxMi4wOTMyIDQ1LjQxMSAxMS42NTFDNDYuNDc4IDExLjE4OSA0Ny42NTYgMTAuOTYgNDguOTQ2IDEwLjk2QzUxLjYxMiAxMC45NiA1My42MzcgMTEuNjAyIDU1LjAyIDEyLjg4NUw1OC4zIDkuNjA0OTlDNTUuODE3IDcuNjY5OTkgNTIuNjc2IDYuNjk5OTkgNDguODcyIDYuNjk5OTlDNDYuNzYgNi42OTk5OSA0NC44NTMgNy4wMzQ5OSA0My4xNTQgNy43MDA5OUM0MS40NTUgOC4zNjc5OSAzOS45OTggOS4zMDM5OSAzOC43ODMgMTAuNTA0QzM3LjU2NyAxMS43MDcgMzYuNjM0IDEzLjE1OCAzNS45NzcgMTQuODU3QzM1LjMxOSAxNi41NTYgMzQuOTk0IDE4LjQ1MSAzNC45OTQgMjAuNTRDMzQuOTk0IDIyLjYzIDM1LjMyOSAyNC40OTQgMzUuOTk1IDI2LjIwNUMzNi42NjIgMjcuOTE2IDM3LjYwNSAyOS4zNzQgMzguODE3IDMwLjU3N0M0MC4wMzIgMzEuNzggNDEuNDg2IDMyLjcxMyA0My4xODggMzMuMzgzQzQ0Ljg4OCAzNC4wNDkgNDYuNzgyIDM0LjM4NCA0OC44NzIgMzQuMzg0QzUwLjk2MSAzNC4zODQgNTIuNzUgMzQuMDQ5IDU0LjM5IDMzLjM4M0M1Ni4wMzEgMzIuNzE2IDU3LjQyNiAzMS43OCA1OC41NzkgMzAuNTc3QzU5LjczMyAyOS4zNzQgNjAuNjE5IDI3LjkxNiA2MS4yMzkgMjYuMjA1QzYxLjg2IDI0LjQ5NCA2Mi4xNyAyMi42MDUgNjIuMTcgMjAuNTRDNjIuMTY5NiAxOS45Njg4IDYyLjE0NDUgMTkuMzk4IDYyLjA5NSAxOC44MjlMNjIuMDkyIDE4LjgyM1pNMTUxLjgxIDE2Ljk4MUMxNTMuNDEgMTQuNjA5IDE1Ny40MTkgMTQuMzU4IDE1OS4wMjIgMTQuMzU4VjE4LjkxQzE1Ni45NTcgMTguOTEgMTU0Ljk4NSAxOC45OTYgMTUzLjc1NyAxOS44OTJDMTUyLjUyOSAyMC43OTIgMTUxLjkxOSAyMS45ODIgMTUxLjkxOSAyMy40NjRWMzMuOTlIMTQ2Ljk2NFYxNC4zNThIMTUxLjczNkwxNTEuODEgMTYuOTgxWk0xNDMuMDExIDE0LjM2MVYzNC4wMzFIMTM4LjI0TDEzOC4xMzEgMzEuMDQ1QzEzNy40NjYgMzIuMDc2IDEzNi41NTEgMzIuOTIxOSAxMzUuNDcxIDMzLjUwNEMxMzQuMzc2IDM0LjA5OSAxMzMuMDY4IDM0LjM5NiAxMzEuNTM2IDM0LjM5NkMxMzAuMiAzNC4zOTYgMTI4Ljk2MyAzNC4xNTIgMTI3LjgyMiAzMy42NjhDMTI2LjcgMzMuMTk2NCAxMjUuNjg5IDMyLjQ5NSAxMjQuODU1IDMxLjYwOUMxMjQuMDE4IDMwLjcyMiAxMjMuMzU0IDI5LjY2MiAxMjIuODcxIDI4LjQyMkMxMjIuMzg0IDI3LjE4NSAxMjIuMTQyIDI1LjgxMSAxMjIuMTQyIDI0LjMwNEMxMjIuMTQyIDIyLjc5OCAxMjIuMzg0IDIxLjM3OCAxMjIuODcxIDIwLjExNkMxMjMuMzU3IDE4Ljg1NCAxMjQuMDE4IDE3Ljc3MiAxMjQuODU1IDE2Ljg3M0MxMjUuNjg4IDE1Ljk3NjQgMTI2LjY5OCAxNS4yNjM2IDEyNy44MjIgMTQuNzhDMTI4Ljk2MyAxNC4yODEgMTMwLjIwMyAxNC4wMzMgMTMxLjUzNiAxNC4wMzNDMTMzLjA0MyAxNC4wMzMgMTM0LjMzIDE0LjMxOCAxMzUuMzk3IDE0Ljg4OEMxMzYuNDYyIDE1LjQ1ODkgMTM3LjM3NSAxNi4yNzggMTM4LjA1NyAxNy4yNzZWMTQuMzYxSDE0My4wMTFaTTEzMi42MzEgMzAuMTMzQzEzNC4yNTYgMzAuMTMzIDEzNS41NjcgMjkuNTk0IDEzNi41NjUgMjguNTEyQzEzNy41NjEgMjcuNDMgMTM4LjA2IDI1Ljk5MSAxMzguMDYgMjQuMTk2QzEzOC4wNiAyMi40MDEgMTM3LjU2MSAyMC45OSAxMzYuNTY1IDE5Ljg5OUMxMzUuNTcgMTguODA3IDEzNC4yNTkgMTguMjU4IDEzMi42MzEgMTguMjU4QzEzMS4wMDMgMTguMjU4IDEyOS43MjkgMTguODA0IDEyOC43MzQgMTkuODk5QzEyNy43MzggMjAuOTkzIDEyNy4yMzkgMjIuNDM4IDEyNy4yMzkgMjQuMjMzQzEyNy4yMzkgMjYuMDI4IDEyNy43MzUgMjcuNDMzIDEyOC43MzQgMjguNTE1QzEyOS43MjkgMjkuNTk0IDEzMS4wMjggMzAuMTM2IDEzMi42MzEgMzAuMTM2VjMwLjEzM1pNOTMuNjk4IDI3Ljg3NkM5My41Nzk1IDI4LjAwMjUgOTMuNDU2NCAyOC4xMjQ2IDkzLjMyOSAyOC4yNDJDOTEuOTQ3IDI5LjUxNiA5MC4xMjMgMzAuMTU1IDg3Ljg2NiAzMC4xNTVDODYuNTggMzAuMTU1IDg1LjQwOCAyOS45MjYgODQuMzUgMjkuNDY0QzgzLjMxNTUgMjkuMDE4OSA4Mi4zODk4IDI4LjM1NDYgODEuNjM3IDI3LjUxN0M4MC44ODQgMjYuNjc5IDgwLjMwMSAyNS42NzIgNzkuODg5IDI0LjQ5NEM3OS40NzYgMjMuMzE1IDc5LjI2OSAyMi4wMSA3OS4yNjkgMjAuNTc4Qzc5LjI2OSAxOS4xNDUgNzkuNDczIDE3Ljg0IDc5Ljg4OSAxNi42NjJDODAuMzAxIDE1LjQ4NCA4MC44ODQgMTQuNDc2IDgxLjYzNyAxMy42MzlDODIuMzk0OSAxMi43OTg3IDgzLjMyNzMgMTIuMTM0MiA4NC4zNjkgMTEuNjkyQzg1LjQzNiAxMS4yMyA4Ni42MTQgMTEgODcuOTAzIDExQzkwLjU3IDExIDkyLjU5NSAxMS42NDIgOTMuOTc3IDEyLjkyNkw5Ny4yNTggOS42NDQ5OUM5NC43NzQgNy43MTA5OSA5MS42MzMgNi43Mzk5OSA4Ny44MjkgNi43Mzk5OUM4NS43MTggNi43Mzk5OSA4My44MTEgNy4wNzQ5OSA4Mi4xMTIgNy43NDE5OUM4MC40MTMgOC40MDc5OSA3OC45NTYgOS4zNDQ5OSA3Ny43NCAxMC41NDVDNzYuNTI1IDExLjc0NyA3NS41OTIgMTMuMTk5IDc0LjkzNCAxNC44OThDNzQuMjc3IDE2LjU5NyA3My45NTEgMTguNDkxIDczLjk1MSAyMC41ODFDNzMuOTUxIDIyLjY3IDc0LjI4NiAyNC41MzQgNzQuOTUzIDI2LjI0NUM3NS42MTkgMjcuOTU3IDc2LjU2MiAyOS40MTQgNzcuNzc0IDMwLjYxN0M3OC45OSAzMS44MiA4MC40NDQgMzIuNzUzIDgyLjE0NiAzMy40MjNDODMuODQ1IDM0LjA5IDg1LjczOSAzNC40MjQgODcuODI5IDM0LjQyNEM4OS45MTkgMzQuNDI0IDkxLjcwOCAzNC4wOSA5My4zNDggMzMuNDIzQzk0LjcxOCAzMi44NjUgOTUuOTE4IDMyLjEyMSA5Ni45NDggMzEuMTkxQzk3LjE0OSAzMS4wMDggOTcuMzQ4IDMwLjgxNSA5Ny41MzcgMzAuNjJMOTMuNzAxIDI3Ljg4NUw5My42OTggMjcuODc2Wk0xMTAuODAyIDE0LjAxNUMxMDkuMTk5IDE0LjAxNSAxMDYuODM2IDE0LjQ3MSAxMDUuNjExIDE2LjE1OEwxMDUuNTM3IDYuMDE1OTlIMTAwLjc2NVYzMy45MzlIMTA1LjcyVjIyLjY0MUMxMDUuNzcxIDIxLjQ2MDcgMTA2LjI4OCAyMC4zNDg4IDEwNy4xNTcgMTkuNTQ4OUMxMDguMDI3IDE4Ljc0OTEgMTA5LjE3OCAxOC4zMjY2IDExMC4zNTggMTguMzc0QzExMy4zOTcgMTguMzc0IDExNC4yNjggMjEuMTU5IDExNC4yNjggMjIuNjQxVjMzLjkzOUgxMTkuMjIzVjIxLjA1OUMxMTkuMjIzIDIxLjA1OSAxMTkuMTQyIDE0LjAxNSAxMTAuODAyIDE0LjAxNVpNMTczLjc2MyAxNC4zNThIMTY5Ljk5OVY4LjcxNDk5SDE2NS4wNDhWMTQuMzU4SDE2MS4yODRWMTguOTE2SDE2NS4wNDhWMzQuMDAzSDE2OS45OTlWMTguOTE2SDE3My43NjNWMTQuMzU4Wk0xOTAuNzg3IDI1LjI2MkMxOTAuMTI5IDI0LjUwMTQgMTg5LjMwNyAyMy44OTk0IDE4OC4zODQgMjMuNTAxQzE4Ny40ODggMjMuMTE3IDE4Ni4zMzEgMjIuNzMyIDE4NC45NDggMjIuMzY0QzE4NC4xNjUgMjIuMTQzOSAxODMuMzkgMjEuODk3OCAxODIuNjIzIDIxLjYyNkMxODIuMTYzIDIxLjQ2MjEgMTgxLjc0MSAyMS4yMDY2IDE4MS4zODMgMjAuODc1QzE4MS4yMzUgMjAuNzQyMSAxODEuMTE4IDIwLjU3ODkgMTgxLjAzOSAyMC4zOTY0QzE4MC45NjEgMjAuMjE0IDE4MC45MjIgMjAuMDE2NiAxODAuOTI3IDE5LjgxOEMxODAuOTI3IDE5LjI3MiAxODEuMTU2IDE4Ljg0NCAxODEuNjI1IDE4LjUxQzE4Mi4xMjEgMTguMTU2IDE4Mi44NjIgMTcuOTc2IDE4My44MjYgMTcuOTc2QzE4NC43OSAxNy45NzYgMTg1LjU4NyAxOC4yMDkgMTg2LjE0OCAxOC42NjhDMTg2LjcwNiAxOS4xMjQgMTg3LjAwNyAxOS43MjUgMTg3LjA3MiAyMC41TDE4Ny4wOTQgMjAuNzgySDE5MS42MzNMMTkxLjYxNyAyMC40NkMxOTEuNTIxIDE4LjQ4NSAxOTAuNzcxIDE2LjkgMTg5LjM4NSAxNS43NUMxODguMDEyIDE0LjYxMiAxODYuMTg1IDE0LjAzMyAxODMuOTYyIDE0LjAzM0MxODIuNDc3IDE0LjAzMyAxODEuMTQxIDE0LjI4NyAxNzkuOTk0IDE0Ljc4NkMxNzguODMxIDE1LjI5MSAxNzcuOTI2IDE1Ljk5NSAxNzcuMjk2IDE2Ljg4MkMxNzYuNjczIDE3Ljc0NTUgMTc2LjMzOCAxOC43ODQgMTc2LjM0MSAxOS44NDlDMTc2LjM0MSAyMS4xNjcgMTc2LjY5OCAyMi4yNDkgMTc3LjM5OSAyMy4wNjRDMTc4LjA2IDIzLjg0MzIgMTc4Ljg5OCAyNC40NTM0IDE3OS44NDIgMjQuODQ0QzE4MC43NDQgMjUuMjE2IDE4MS45MjggMjUuNjA3IDE4My4zNjEgMjZDMTg0LjgwNiAyNi40MSAxODUuODcyIDI2Ljc4NSAxODYuNTMgMjcuMTIzQzE4Ny4xIDI3LjQxNCAxODcuMzc5IDI3Ljg0NSAxODcuMzc5IDI4LjQ0NEMxODcuMzc5IDI5LjA0MiAxODcuMTIyIDI5LjQ2NyAxODYuNTk1IDI5LjgzOUMxODYuMDQzIDMwLjIyNiAxODUuMjM3IDMwLjQyNSAxODQuMjAxIDMwLjQyNUMxODMuMTY2IDMwLjQyNSAxODIuMzk0IDMwLjE3NCAxODEuNzQ5IDI5LjY3NEMxODEuMTEzIDI5LjE4MSAxODAuNzcyIDI4LjU4OSAxODAuNzEgMjcuODY0TDE4MC42ODUgMjcuNTgySDE3Ni4wMTNMMTc2LjAyNSAyNy45MDFDMTc2LjA2NyAyOS4wOTU1IDE3Ni40NzIgMzAuMjQ4NyAxNzcuMTg4IDMxLjIwNkMxNzcuOTA3IDMyLjE4IDE3OC44OTMgMzIuOTU4IDE4MC4xMTggMzMuNTE5QzE4MS4zMzYgMzQuMDc3IDE4Mi43MzIgMzQuMzYyIDE4NC4yNjYgMzQuMzYyQzE4NS44MDEgMzQuMzYyIDE4Ny4xMDkgMzQuMTA4IDE4OC4yMzggMzMuNjA5QzE4OS4zNzYgMzMuMTA0IDE5MC4yNzIgMzIuMzk0IDE5MC45MDEgMzEuNDk0QzE5MS41MzQgMzAuNTkyIDE5MS44NTMgMjkuNTU0IDE5MS44NTMgMjguNDAzQzE5MS44MjggMjcuMTEgMTkxLjQ2NiAyNi4wNTMgMTkwLjc3NyAyNS4yNjJIMTkwLjc4N1oiIGZpbGw9IiM5QjlCOUIiLz4KPHBhdGggZD0iTTI0MS45ODIgMjUuNjU4MlYxNy43MTE3SDIyOC40NDFMMjIwLjQ5NCAyNS42NTgySDI0MS45ODJaIiBmaWxsPSIjOUI5QjlCIi8+CjxwYXRoIGQ9Ik0yNTcuMjM5IDUuOTUwODFIMjQwLjI2NUwyMzIuMjU1IDEzLjg5NzNIMjU3LjIzOVY1Ljk1MDgxWiIgZmlsbD0iIzlCOUI5QiIvPgo8cGF0aCBkPSJNMjEyLjYxMSAzMy42MDQ4TDIxNi42OCAyOS41MzYxSDIzMC40MTJWMzcuNDgyN0gyMTIuNjExVjMzLjYwNDhaIiBmaWxsPSIjOUI5QjlCIi8+CjxwYXRoIGQ9Ik0yMTUuNTk5IDIxLjc4MDNIMjI0LjM3MkwyMzIuMzgyIDEzLjgzMzdIMjE1LjU5OVYyMS43ODAzWiIgZmlsbD0iIzlCOUI5QiIvPgo8cGF0aCBkPSJNMjA2IDMzLjYwNDdIMjEyLjYxMUwyMjAuNDk0IDI1LjY1ODJIMjA2VjMzLjYwNDdaIiBmaWxsPSIjOUI5QjlCIi8+CjxwYXRoIGQ9Ik0yNDAuMjY1IDUuOTUwODFMMjM2LjE5NyAxMC4wMTk0SDIxMC4yNTlWMi4wNzI4OEgyNDAuMjY1VjUuOTUwODFaIiBmaWxsPSIjOUI5QjlCIi8+Cjwvc3ZnPgo=",width:170,height:25,right:25,bottom:50,opacity:.7}}));const h={...s.chartOptions.specialOverrides},u={...s.chartOptions.optionMetadata};i.width!=null&&i.height!=null&&(h.overrideDevicePixelRatio=1);const d=this.factoryApi.create(c,l,h,u);await d.setState(o),d.chart.ctx.zoomManager.updateZoom("chartProxy",s.ctx.zoomManager.getZoom()),d.chart.ctx.legendManager.clearData(),d.chart.ctx.legendManager.update(s.ctx.legendManager.getData()),s.series.forEach((g,f)=>{g.visible||(d.chart.series[f].visible=!1)});const p=[];for(const g of s.modulesManager.legends())p.push(g.legend.pagination?.currentPage??0);for(const g of d.chart.modulesManager.legends()){const f=p.shift()??0;g.legend.pagination&&g.legend.pagination.setPage(f)}return d.chart.update(0,{forceNodeDataRefresh:!0}),await d.waitForUpdate(),d}getEnabledOriginators(){const{chartOptions:{processedOptions:e,optionMetadata:i},ctx:{annotationManager:s,chartTypeOriginator:a,zoomManager:n,legendManager:o}}=this.chart,r=[];return"annotations"in e&&e.annotations?.enabled&&r.push(s),i.presetType==="price-volume"&&r.push(a),(e.navigator?.enabled||e.zoom?.enabled)&&r.push(n),"legend"in this.chart&&r.push(o),r}async setStateOriginators(e,i){this.factoryApi.caretaker.restore(e,...i),this.chart.ctx.updateService.update(2,{forceNodeDataRefresh:!0}),await this.chart.waitForUpdate()}},Hu.chartInstances=new WeakMap,M([ua({oldValue(t){t.destroyed||(t.publicApi=void 0),Hu.chartInstances.delete(t)},newValue(t){t&&(t.publicApi=this,Hu.chartInstances.set(t,this))}})],Hu.prototype,"chart",2),WA=Hu}}),kx,e6=A({"packages/ag-charts-community/src/locale/locale.ts"(){"use strict";so(),vs(),xt(),kx=class extends qp{constructor(t){super(),this.ctx=t,this.localeText=void 0}},M([zc(t=>{t.ctx.localeManager.setLocaleText(t.localeText)}),I(g0,{optional:!0})],kx.prototype,"localeText",2),M([zc(t=>{t.ctx.localeManager.setLocaleTextFormatter(t.getLocaleText)}),I(Yi,{optional:!0})],kx.prototype,"getLocaleText",2)}}),S_,i6=A({"packages/ag-charts-community/src/locale/localeModule.ts"(){"use strict";e6(),S_={type:"root",optionsKey:"locale",packageType:"community",chartTypes:["cartesian","polar","hierarchy","topology","flow-proportion","standalone","gauge"],moduleFactory:t=>new kx(t)}}});function s6(t,e=1/0){switch(typeof t){case"undefined":return"undefined";case"number":if(isNaN(t))return"NaN";if(t===1/0)return"Infinity";if(t===-1/0)return"-Infinity";default:return t=JSON.stringify(t),t.length>e?`${t.slice(0,e)}... (+${t.length-e} characters)`:t}}function a6(t){let e=1;for(let i=0;i<t.length;i++)t.charCodeAt(i)===10&&e++;return e}var v_=A({"packages/ag-charts-community/src/util/string.util.ts"(){"use strict"}});function Lx(t,e){const i=JSON.stringify(t,null,0);return Yu.has(e)||Yu.set(e,new Map),Yu.get(e)?.has(i)||Yu.get(e)?.set(i,e(t)),Yu.get(e)?.get(i)}function As(t){const e=new Map,i=(...n)=>n.map(o=>typeof o=="object"||typeof o=="symbol"?o:(e.has(o)||e.set(o,{v:o}),e.get(o))),s={},a=new WeakMap;return(...n)=>{const o=n.length===0?[s]:i(...n);let r=a;for(const h of o.slice(0,-1))r.has(h)||r.set(h,new WeakMap),r=r.get(h);const l=o.at(-1);let c=r.get(l);return c||(c=t(...n),r.set(l,c)),c}}var Yu,HA=A({"packages/ag-charts-community/src/util/memo.ts"(){"use strict";Yu=new WeakMap}});function Tx(t,e=[0,0]){for(const i of t)typeof i=="number"&&(i<0&&(e[0]+=i),i>0&&(e[1]+=i));return e}function n6(t,e){return{id:t,matchGroupIds:[e],type:"aggregate",aggregateFunction:s=>Tx(s)}}function M_(t,e){return{id:t,type:"aggregate",matchGroupIds:e?[e]:void 0,aggregateFunction:i=>Tx(i),groupAggregateFunction:(i,s=[0,0])=>(s[0]+=i?.[0]??0,s[1]+=i?.[1]??0,s)}}function o6(t,e){return{id:t,matchGroupIds:[e],type:"aggregate",aggregateFunction:s=>er.extendDomain(s)}}function YA(t){return{id:t,type:"aggregate",aggregateFunction:()=>[0,1],groupAggregateFunction:(e,i=[0,0])=>(i[0]+=e?.[0]??0,i[1]+=e?.[1]??0,i)}}function D_(t,e){return{id:t,matchGroupIds:e?[e]:void 0,type:"aggregate",aggregateFunction:s=>Tx(s),groupAggregateFunction:(s,a=[0,0,-1])=>(a[0]+=s?.[0]??0,a[1]+=s?.[1]??0,a[2]++,a),finalFunction:(s=[0,0,0])=>{const a=s[0]+s[1];return a>=0?[0,a/s[2]]:[a/s[2],0]}}}function KA(t,e,i){const s={id:t,matchGroupIds:i?[i]:void 0,type:"aggregate",aggregateFunction:(a,n=[])=>{const o=n[1]-n[0];return e.aggregateFunction(a).map(r=>r/o)}};return e.groupAggregateFunction&&(s.groupAggregateFunction=e.groupAggregateFunction),s}function A_(t){return()=>{let e=0;return i=>Vt(i)?(e+=t?Math.max(0,i):i,e):i}}function I_(){return()=>{let t=0;return e=>{if(!Vt(e))return e;const i=t;return t+=e,i}}}var XA=A({"packages/ag-charts-community/src/chart/data/aggregateFunctions.ts"(){"use strict";Ct(),vR()}});function k_(t){return t!=null&&Lm(t)}function r6(t){return t!=null}function L_(t){switch(t){case"number":case"log":case"ordinal-time":case"time":case"color":return k_;default:return r6}}function T_(t){switch(t){case"number":case"log":case"time":case"color":return"range";default:return"category"}}function Sn(t,e,i={}){return{property:t,type:"key",valueType:T_(e),validation:L_(e),...i}}function Tt(t,e,i={}){return{property:t,type:"value",valueType:T_(e),validation:L_(e),...i}}function ZA(t,e={}){const{min:i=-1/0,max:s=1/0,...a}=e;return{type:"value",property:t,valueType:"range",validation:k_,processor:()=>n=>Vt(n)?At(i,n,s):n,...a}}function Sg(t,e,i={}){const{onlyPositive:s,...a}=i;return{...Tt(t,e,a),processor:A_(s)}}function l6(t,e,i={}){return{...Tt(t,e,i),processor:I_()}}function Dl(t,e,i,s,a){return[Tt(t,a,s),C_(s.groupId,e,i,s.separateNegative),...s.rangeId!=null?[o6(s.rangeId,s.groupId)]:[]]}function N_(t,e,i){return[Tt(t,e,i),O_(i.groupId)]}function c6({normaliseTo:t,mode:e}){const i=(s,a)=>{if(a===0)return null;const n=(s??0)*t/a;return n>=0?Math.min(t,n):Math.max(-t,n)};return()=>()=>(s,a,n)=>{const o=h6(e,s,a,n);for(const r of a){const l=s[r],c=l[n];if(c==null){l[n]=void 0;continue}l[n]=typeof c=="number"?i(c,o):c.map(h=>i(h,o))}}}function h6(t,e,i,s){const a=[0,0];for(const n of i){const r=e[n][s];if(r==null)continue;const l=typeof r=="number"?r:Math.max(...r.map(h=>h??0)),c=l<0?0:1;t==="sum"?a[c]+=l:c===0?a[c]=Math.min(a[c],l):a[c]=Math.max(a[c],l)}return Math.max(Math.abs(a[0]),a[1])}function Nx(t,e,i="sum"){return{type:"group-value-processor",matchGroupIds:t,adjust:Lx({normaliseTo:e,mode:i},c6)}}function u6({normaliseTo:t,zeroDomain:e,rangeMin:i,rangeMax:s}){const a=t[1]-t[0],n=(o,r,l)=>{const c=t[0]+(o-r)/l*a;return l===0?e:c>=t[1]?t[1]:c<t[0]?t[0]:c};return()=>(o,r)=>{let[l,c]=o.domain.values[r];i!=null&&(l=i),s!=null&&(c=s);const h=c-l;o.domain.values[r]=[t[0],t[1]];const{rawData:u}=o,d=o.columns[r];for(let p=0;p<u.length;p+=1)d[p]=n(d[p],l,h)}}function eh(t,e,i,s,a){return{type:"property-value-processor",property:t,adjust:Lx({normaliseTo:e,rangeMin:s,rangeMax:a,zeroDomain:i},u6)}}function Ku(t){return{type:"processor",property:"animationValidation",calculate(e){const{keys:i,values:s}=e.defs,{input:{count:a},domain:{keys:n,values:o},rawData:r,keys:l,columns:c}=e;let h=Zu|vg;if(r.length!==0){for(let u=0;h!==0&&u<i.length;u++)h&=tI(a,i[u],n[u],l[u]);for(let u=0;h!==0&&u<s.length;u++){const d=s[u];t?.includes(d.id)&&(h&=tI(a,d,o[u],c[u]))}}return{uniqueKeys:(h&Zu)!==0,orderedKeys:(h&vg)!==0}}}}function d6({mode:t,separateNegative:e}){return()=>()=>(i,s,a)=>{const n=[0,0];for(const o of s){const r=i[o],l=r[a],c=Gy(l)&&e?0:1;Vt(l)&&(t==="normal"&&(n[c]+=l),r[a]=n[c],t==="trailing"&&(n[c]+=l))}}}function p6({mode:t,sum:e}){return()=>{const i=[];let s=!0;return()=>(a,n,o)=>{let r=0;for(const l of n){const c=a[l],h=c[o],u=s&&e==="current"?0:i[l];i[l]=h;const d=e==="current"?h:u;if(!Vt(h)||!Vt(u)){c[o]=r;continue}t==="normal"&&(r+=d),c[o]=r,t==="trailing"&&(r+=d)}s=!1}}}function C_(t,e,i,s=!1){let a;if(e.startsWith("window")){const n=e.endsWith("-trailing")?"trailing":"normal";a=Lx({mode:n,sum:i},p6)}else a=Lx({mode:e,separateNegative:s},d6);return{type:"group-value-processor",matchGroupIds:[t],adjust:a}}function g6(){return()=>(t,e,i)=>{const s=new Float64Array(32);let a=0;for(const n of e){const o=t[n],r=o[i];s[a]=Number.isFinite(r)?r:NaN,a+=1,o[i]=s.subarray(0,a)}}}function O_(t){return{type:"group-value-processor",matchGroupIds:[t],adjust:g6}}function E_(t){return t.id??t.property}function f6(t,e,i){const s=new Map,a=e.defs.values;for(let r=0;r<a.length;r+=1){const l=a[r];if(l.scopes?.includes(t)===!1)continue;const c=E_(l);if(s.has(c))return;s.set(c,r)}const n=[],o=i.defs.values;for(let r=0;r<o.length;r+=1){const l=o[r];if(l.scopes?.includes(t)===!1)continue;const c=E_(l),h=s.get(c);if(h==null)return;s.delete(c),n.push({previousIndex:h,nextIndex:r})}if(s.size===0)return n}function $A(t,e,i,s,a){for(const{previousIndex:n,nextIndex:o}of i){const r=t[n],l=e[o],c=r[s],h=l[a];if(c!==h)return!1}return!0}function Xu(t,e,i=!0){return{type:"processor",property:"diff",calculate(s,a){const n=new Map,o=new Map,r=new Map,l=new Map,c=e.keys,h=s.keys,u=e.columns,d=s.columns,p=f6(t,e,s);if(p==null)return a;const g=Math.max(e.rawData.length,s.rawData.length);for(let m=0;m<g;m++){const b=m<e.rawData.length,v=m<s.rawData.length,S=b?lg(c,m):void 0,D=S!=null?Ci(S):"",k=v?lg(h,m):void 0,L=k!=null?Ci(k):"";if(v&&b&&D===L){$A(u,d,p,m,m)||r.set(L,m);continue}const T=l.get(L);T!=null?((i||!$A(u,d,p,T,m))&&(r.set(L,m),n.set(L,m)),l.delete(L)):v&&o.set(L,m);const N=o.get(D);N!=null?((i||!$A(u,d,p,N,m))&&(r.set(D,m),n.set(D,m)),o.delete(D)):b&&(r.delete(D),l.set(D,m))}const x={changed:o.size>0||r.size>0||l.size>0,added:new Set(o.keys()),updated:new Set(r.keys()),removed:new Set(l.keys()),moved:new Set(n.keys())};return{...a,[t]:x}}}}function Ci(t,...e){let i;return ce(t)?i=t.map(a=>J0(a)).join("___"):i=J0(t),(typeof i=="string"||typeof i=="number"||typeof i=="boolean"||i instanceof Date)&&e.length>0&&(i+=`___${e.join("___")}`),i}var QA,qA,JA,Zu,vg,tI,vn=A({"packages/ag-charts-community/src/chart/data/processors.ts"(){"use strict";HA(),It(),Ct(),Kp(),XA(),Ga(),QA={type:"reducer",property:"smallestKeyInterval",initialValue:1/0,reducer:()=>{let t=NaN;return(e=1/0,i)=>{const s=i.keys[0],a=Math.abs(s-t);return t=s,!isNaN(a)&&a>0&&a<e?a:e}}},qA={type:"reducer",property:"largestKeyInterval",initialValue:-1/0,reducer:()=>{let t=NaN;return(e=-1/0,i)=>{const s=i.keys[0],a=Math.abs(s-t);return t=s,!isNaN(a)&&a>0&&a>e?a:e}}},JA={type:"processor",property:"sortedGroupDomain",calculate:({domain:{groups:t}})=>t?.slice().sort((e,i)=>{for(let s=0;s<e.length;s++){const a=e[s]-i[s];if(a!==0)return a}return 0})},Zu=1,vg=2,tI=(t,e,i,s)=>{let a=Zu|vg;if(e.valueType==="category")return i.length!==t&&(a&=~Zu),a;let n=s[0]?.valueOf();for(let o=1;a!==0&&o<s.length;o++){const r=s[o]?.valueOf();(!Number.isFinite(r)||n>r)&&(a&=~vg),Number.isFinite(r)&&n===r&&(a&=~Zu),n=r}return a}}});function y6(t){const e=t.reduce((s,a)=>s<a.length?a.length:s,0),i=new B_;for(let s=0;s<t.length;s++){const a=t[s];for(;a.length<e;)a.push("");i.insertTick(a,s)}return i}function m6(t,e,i){const s=e.index-t.index,a=i/s;e.change-=a,e.shift+=i,t.change+=a,e.prelim+=i,e.mod+=i}function x6(t,e,i){return e.getSiblings().indexOf(t.ancestor)>=0?t.ancestor:i}function b6({children:t}){let e=0,i=0;for(let s=t.length-1;s>=0;s--){const a=t[s];a.prelim+=e,a.mod+=e,i+=a.change,e+=a.shift+i}}function S6(t,e){const i=t.getLeftSibling();if(i){let s=t,a=t,n=i,o=a.getLeftmostSibling(),r=a.mod,l=s.mod,c=n.mod,h=o.mod;for(;n.nextRight()&&a.nextLeft();){n=n.nextRight(),a=a.nextLeft(),o=o.nextLeft(),s=s.nextRight(),s.ancestor=t;const u=n.prelim+c-(a.prelim+r)+1;u>0&&(m6(x6(n,t,e),t,u),r+=u,l+=u),c+=n.mod,r+=a.mod,h+=o.mod,l+=s.mod}n.nextRight()&&!s.nextRight()?s.mod+=c-l:(a.nextLeft()&&!o.nextLeft()&&(o.mod+=r-h),e=t)}return e}function w_(t){const{children:e}=t;if(e.length){let[i]=e;for(const n of e)w_(n),i=S6(n,i);b6(t);const s=(e[0].prelim+e.at(-1).prelim)/2,a=t.getLeftSibling();a?(t.prelim=a.prelim+1,t.mod=t.prelim-s):t.prelim=s}else{const i=t.getLeftSibling();t.prelim=i?i.prelim+1:0}}function R_(t,e,i){t.x=t.prelim+e,t.y=t.depth,i.insertNode(t);for(const s of t.children)R_(s,e+t.mod,i)}function __(t){const{children:e}=t;let i=0;for(const s of e)__(s),s.children.length?i+=s.leafCount:i++;t.leafCount=i,e.length?(t.subtreeLeft=e[0].subtreeLeft,t.subtreeRight=e[e.length-1].subtreeRight,t.x=(t.subtreeLeft+t.subtreeRight)/2):(t.subtreeLeft=t.x,t.subtreeRight=t.x)}function v6(t){const e=new z_,i=y6(t);return w_(i),R_(i,-i.prelim,e),__(i),e}var P_,B_,z_,M6=A({"packages/ag-charts-community/src/chart/axis/tree.ts"(){"use strict";P_=class{constructor(){this.top=1/0,this.right=-1/0,this.bottom=-1/0,this.left=1/0}update(t,e){t>this.right&&(this.right=t),t<this.left&&(this.left=t),e>this.bottom&&(this.bottom=e),e<this.top&&(this.top=e)}},B_=class M3{constructor(e="",i,s){this.label=e,this.parent=i,this.refId=s,this.x=0,this.y=0,this.subtreeLeft=NaN,this.subtreeRight=NaN,this.children=[],this.leafCount=0,this.prelim=0,this.mod=0,this.ancestor=this,this.change=0,this.shift=0,this.index=0,this.screenX=0,this.screenY=0,this.depth=i?i.depth+1:0}insertTick(e,i){let s=this;for(let a=0;a<e.length;a++){const n=e[a],o=a!==e.length-1,{children:r}=s,l=r.find(c=>c.label===n);if(l&&o)s=l;else{const c=new M3(n,s,i);c.index=r.length,r.push(c),o&&(s=c)}}}getLeftSibling(){return this.index>0?this.parent?.children[this.index-1]:void 0}getLeftmostSibling(){return this.index>0?this.parent?.children[0]:void 0}nextLeft(){return this.children[0]}nextRight(){return this.children.at(-1)}getSiblings(){return this.parent?.children.filter((e,i)=>i!==this.index)??[]}},z_=class{constructor(){this.dimensions=new P_,this.nodes=[],this.depth=0}insertNode(t){this.depth<t.depth&&(this.depth=t.depth),this.dimensions.update(t.x,t.y),this.nodes.push(t)}scalingX(t,e){let i=1;if(t>0){const{left:s,right:a}=this.dimensions;i=t/(a-s)}return e&&(i*=-1),i}scalingY(t,e){let i=1;if(t>0){const{top:s,bottom:a}=this.dimensions;i=t/(a-s)}return e&&(i*=-1),i}}}}),po,Mg,Cx,Al,eI=A({"packages/ag-charts-community/src/chart/axis/groupedCategoryAxis.ts"(){"use strict";nl(),kt(),Ss(),Ki(),Ti(),Ue(),lp(),It(),Jt(),v_(),$0(),ca(),xt(),vn(),Fa(),Tu(),M6(),po=class extends Mt{constructor(){super(...arguments),this.enabled=!0}},M([I(pt)],po.prototype,"enabled",2),M([I(pt,{optional:!0})],po.prototype,"avoidCollisions",2),M([I(jt,{optional:!0})],po.prototype,"color",2),M([I(nt,{optional:!0})],po.prototype,"spacing",2),M([I(qn,{optional:!0})],po.prototype,"fontStyle",2),M([I(Jn,{optional:!0})],po.prototype,"fontWeight",2),M([I(wt.restrict({min:1}),{optional:!0})],po.prototype,"fontSize",2),M([I(J,{optional:!0})],po.prototype,"fontFamily",2),Mg=class extends Mt{constructor(){super(...arguments),this.enabled=!0}},M([I(pt)],Mg.prototype,"enabled",2),M([I(nt,{optional:!0})],Mg.prototype,"width",2),M([I(jt,{optional:!0})],Mg.prototype,"stroke",2),Cx=class extends Mt{constructor(){super(...arguments),this.label=new po,this.tick=new Mg}},M([I(ct)],Cx.prototype,"label",2),M([I(ct)],Cx.prototype,"tick",2),Al=class extends Gc{constructor(t){super(t),this.tickScale=new $o,this.depthOptions=new yu(Cx),this.includeInvisibleDomains=!0,this.tickScale.paddingInner=1,this.tickScale.paddingOuter=0}resizeTickTree(){if(!this.tickTreeLayout)return;const{nodes:t}=this.tickTreeLayout,{range:e,step:i,inset:s,bandwidth:a}=this.scale,n=Math.abs(e[1]-e[0])-i,o=this.tickTreeLayout.scalingX(n,e[0]>e[1]),r=s+a/2;let l=0;for(const c of t){const h=c.x*o;l>h&&(l=h),c.screenX=h+r}for(const c of t)c.screenX-=l}getDepthOptionsMap(t){const e=[],{depthOptions:i,label:s}=this;for(let a=0;a<t;a++)e.push(i[a]?.label.enabled??s.enabled?{enabled:!0,spacing:i[a]?.label.spacing??s.spacing,lineHeight:ue.getLineHeight(i[a]?.label.fontSize??s.fontSize??10),avoidCollisions:i[a]?.label.avoidCollisions??s.avoidCollisions}:{enabled:!1,spacing:0,lineHeight:0,avoidCollisions:!1});return e}updateCategoryLabels(){this.computedLayout&&this.tickLabelGroupSelection.update(this.computedLayout.tickLabelLayout).each((t,e)=>t.setProperties(e))}updateAxisLine(){this.computedLayout&&(this.lineNode.visible=this.line.enabled,this.lineNode.stroke=this.line.stroke,this.lineNode.strokeWidth=this.line.width)}computeLayout(){if(this.updateDirection(),this.updateScale(),this.updateRange(),this.resizeTickTree(),!this.tickTreeLayout?.depth)return{bbox:lt.zero,separatorLayout:[],tickLabelLayout:[]};const{step:t}=this.scale,{title:e,label:i,range:s,depthOptions:a}=this,{depth:n,nodes:o}=this.tickTreeLayout,r=Math.ceil(i.fontSize/t),l=Zi(this.rotation),c=this.position==="top"||this.position==="bottom",h=i.getSideFlag(),u=[],d=new Map,p=new Bc,{defaultRotation:g,configuredRotation:f}=km({rotation:i.rotation,parallel:i.parallel,regularFlipRotation:Ht(l-Math.PI/2),parallelFlipRotation:Ht(l)}),x=g+f,m=this.getDepthOptionsMap(n),b=(F,G)=>{const j=n-F.depth;if(!m[j]?.enabled||G%r!==0||!P2(F.screenX,s))return!1;const V=this.formatTick(F.label,G-1),W=this.getLabelStyles({value:V,depth:j},a[j]?.label);return p.setProperties({...W,text:V,textAlign:"center",textBaseline:i.parallel?"hanging":"bottom",rotation:0,translationX:0,translationY:F.screenX}),!0};let v=0;const S={};o.forEach((F,G)=>{const j=n-F.depth,V=a6(F.label);if(S[j]??(S[j]=1),S[j]<V&&(S[j]=V),!(!b(F,G)||!p.getBBox())&&(d.set(G,p.getBBox()),!F.leafCount)){p.rotation=x;const{width:B}=p.getBBox();v<B&&(v=B)}});const D=Z0(),k=h*m[0].spacing,L=new Map,T=F=>{let G=v;for(let j=1;j<=F;j++)G+=m[j].spacing,(i.mirrored||j!==F)&&(G+=S[j]*m[j].lineHeight);return G};o.forEach((F,G)=>{if(G===0)return;const j=b(F,G),V=!F.children.length,W=n-F.depth;if(F.parent){const U=V?F.x:F.x-(F.leafCount-1)/2;if(!L.has(U)){const H=this.depthOptions[W]?.tick;let K=v;for(let X=0;X<=W;X++)K+=m[X].spacing,X!==0&&(K+=S[X]*m[X].lineHeight);L.set(U,{tickSize:K,tickStroke:H?.stroke,tickWidth:H?.enabled!==!1?H?.width:0})}}if(!j)return;if(p.x=k,p.y=0,V){const{width:U}=d.get(G),H=sE(x);p.rotation=x,p.textAlign="end",p.textBaseline="middle",p.rotationCenterX=k-U/2,p.translationX=(m[W].spacing-U)/2*H*h,i.mirrored&&(p.translationX+=U)}else p.rotation=c?g:-Math.PI/2,p.rotationCenterX=k,p.translationX=h*T(W);if(m[W].avoidCollisions){const U=V?t:F.leafCount*t;if(p.getBBox().height>U){d.delete(G);return}}const{text:B=""}=p;u.push({text:B,visible:!0,range:this.scale.range,tickId:D(B),fill:p.fill,fontFamily:p.fontFamily,fontSize:p.fontSize,fontStyle:p.fontStyle,fontWeight:p.fontWeight,rotation:p.rotation,rotationCenterX:p.rotationCenterX,textAlign:p.textAlign,textBaseline:p.textBaseline,translationX:p.translationX,translationY:p.translationY,x:p.x,y:p.y}),d.set(G,Ae.toCanvas(p))});const{enabled:N,stroke:C,width:O}=this.line;this.lineNode.datum={x:0,y1:s[0],y2:s[1]},this.lineNode.setProperties({stroke:C,strokeWidth:N?O:0});const R=[...L.values()];R.push(R[0]);const E=[this.lineNode.getBBox(),new lt(0,0,R[0].tickSize*h,0)];e.enabled&&(this.updateTitle(!1,R[0].tickSize),E.push(e.caption.node.getBBox()));const z=lt.merge(bc(d.values(),E));return{bbox:this.getTransformBox(z),separatorLayout:R,tickLabelLayout:u}}update(){if(!this.computedLayout)return;const{tickScale:t,gridLine:e,gridLength:i}=this,{separatorLayout:s}=this.computedLayout,a=t.ticks().map((n,o)=>({...s[o],tick:n,tickId:Ci(n,o),tickLabel:n.filter(Boolean).join(" - "),translationY:Math.round(t.convert(n))}));this.gridLineGroupSelection.update(e.enabled&&i?a:[]),this.tickLineGroupSelection.update(this.tick.enabled?a:[]),this.updatePosition(),this.updateCategoryLabels(),this.updateAxisLine(),this.updateGridLines(),this.updateTickLines(),this.updateTitle(),this.resetSelectionNodes()}calculateLayout(){const{separatorLayout:t,tickLabelLayout:e,bbox:i}=this.computeLayout();return this.computedLayout={separatorLayout:t,tickLabelLayout:e},{bbox:i,primaryTickCount:void 0}}onGridVisibilityChange(){this.gridLineGroupSelection.clear(),this.tickLabelGroupSelection.clear()}updateRange(){super.updateRange(),this.tickScale.range=this.scale.range}calculateDomain(){const{direction:t}=this,e=this.boundSeries.filter(a=>a.visible).flatMap(a=>a.getDomain(t));this.setDomain(Xo(e)??QM(e));const i=this.dataDomain.domain.map(vp);this.tickTreeLayout=v6(i);const s=[];for(const a of this.tickTreeLayout.nodes)a.leafCount||a.refId==null||s.push(this.dataDomain.domain[a.refId]);this.scale.domain=J2(this.dataDomain.domain,s),this.tickScale.domain=i.concat([[""]])}updateGridLines(){if(!this.gridLength)return;const{width:t,style:e}=this.gridLine,i=this.gridLength*-this.label.getSideFlag();this.gridLineGroupSelection.each((s,a,n)=>{const{stroke:o,lineDash:r}=e[n%e.length],l=a.translationY;s.visible=this.inRange(l),s.x1=0,s.x2=i,s.y=l,s.stroke=o,s.strokeWidth=t,s.lineDash=r})}updateScale(t){super.updateScale(t),this.scale.paddingOuter=this.scale.paddingInner/2}},Al.className="GroupedCategoryAxis",Al.type="grouped-category",M([I(am)],Al.prototype,"depthOptions",2)}});function iI(t,e,i){let[s,a]=Gi(t);s=D6(Math.floor(s),a,e);const n=I6(s,a,e),o=e-1;a=s+o*n;const r=i?[a,s]:[s,a],l=A6(s,n,e);return{domain:r,ticks:l}}function D6(t,e,i){const s=Math.abs(e-t)/(i-1),a=Math.floor(Math.log10(s)),n=Math.pow(10,a);return Math.floor(t/n)*n}function A6(t,e,i){const s=Math.floor(Math.log10(e)),a=e>0&&e<1?Math.abs(s):0,n=Math.pow(10,a),o=[];for(let r=0;r<i;r++){const l=t+e*r;o[r]=Math.round(l*n)/n}return o}function I6(t,e,i){const s=i-1,a=(e-t)/s;return k6(a)}function k6(t){const e=Math.floor(Math.log10(t)),i=Math.pow(10,e),s=t/i*10;return s>0&&s<=1?i/10:s>1&&s<=2?2*i/10:s>1&&s<=5?5*i/10:s>5&&s<=10?10*i/10:s>10&&s<=20?20*i/10:s>20&&s<=40?40*i/10:s>40&&s<=50?50*i/10:s>50&&s<=100?100*i/10:s}var sI=A({"packages/ag-charts-community/src/util/secondaryAxisTicks.ts"(){"use strict";It()}}),pa,Il=A({"packages/ag-charts-community/src/scale/linearScale.ts"(){"use strict";wc(),Ui(),pa=class extends ie{constructor(){super([0,1],[0,1]),this.type="number"}toDomain(t){return t}ticks(){const t=this.tickCount??ie.defaultTickCount;if(!this.domain||this.domain.length<2||t<1||!this.domain.every(isFinite))return[];this.refresh();const[e,i]=this.getDomain();if(this.interval){const s=Math.abs(this.interval);if(!_p((i-e)/s,this.getPixelRange()))return hm(e,i,s)}return k0(e,i,t,this.minTickCount,this.maxTickCount)}update(){!this.domain||this.domain.length<2||this.nice&&this.updateNiceDomain()}getTickStep(t,e){return this.interval??Rp(t,e,this.tickCount,this.minTickCount,this.maxTickCount)}updateNiceDomain(){const t=this.tickCount;let[e,i]=this.domain;if(t===1)[e,i]=P5(e,i);else if(t>1){const s=e>i?Math.ceil:Math.floor,a=e>i?Math.floor:Math.ceil,n=4;for(let o=0;o<n;o++){const r=e,l=i,c=this.getTickStep(e,i),[h,u]=this.domain;if(e=s(h/c)*c,i=a(u/c)*c,e===r&&i===l)break}}this.niceDomain=[e,i]}tickFormat({ticks:t,specifier:e}){return _5(t??this.ticks(),e)}}}}),or,aI=A({"packages/ag-charts-community/src/chart/axis/numberAxis.ts"(){"use strict";Il(),Ue(),$p(),sI(),xt(),Lu(),or=class extends yl{constructor(t,e=new pa){super(t,e),this.min=NaN,this.max=NaN}normaliseDataDomain(t){const{min:e,max:i}=this,{extent:s,clipped:a}=$M(t,e,i);return{domain:s,clipped:a}}updateSecondaryAxisTicks(t){if(!this.dataDomain?.domain.length)return[];const{domain:e,ticks:i}=iI(this.dataDomain.domain,t??0,this.reverse);return this.scale.nice=!1,this.scale.domain=e,this.scale.update(),i}},or.className="NumberAxis",or.type="number",M([I(un(Oc,xu("max"))),gl(NaN)],or.prototype,"min",2),M([I(un(Oc,bu("min"))),gl(NaN)],or.prototype,"max",2)}}),nI,kl,oI=A({"packages/ag-charts-community/src/chart/axis/logAxis.ts"(){"use strict";N0(),Ue(),$p(),St(),sI(),Ct(),xt(),aI(),nI=Kt(t=>cn(t)&&t!==0,"a non-zero number"),kl=class extends or{constructor(t){super(t,new um),this.min=NaN,this.max=NaN}normaliseDataDomain(t){const{min:e,max:i}=this,{extent:s,clipped:a}=$M(t,e,i);return s[0]<0&&s[1]>0?(st.warn("The log axis domain crosses zero, the chart data cannot be rendered. See log axis documentation for more information."),{domain:[],clipped:a}):s[0]===0||s[1]===0?(st.warn("The log axis domain contains a value of 0, the chart data cannot be rendered. See log axis documentation for more information."),{domain:[],clipped:a}):{domain:s,clipped:a}}set base(t){this.scale.base=t}get base(){return this.scale.base}updateSecondaryAxisTicks(t){if(!this.dataDomain?.domain.length)return[];const{domain:e,ticks:i}=iI(this.dataDomain.domain,t??0,this.reverse);return this.scale.nice=!1,this.scale.domain=e,this.scale.update(),i}},kl.className="LogAxis",kl.type="log",M([I(un(Oc,nI,xu("max"))),gl(NaN)],kl.prototype,"min",2),M([I(un(Oc,nI,bu("min"))),gl(NaN)],kl.prototype,"max",2)}}),ih,F_=A({"packages/ag-charts-community/src/chart/axis/timeAxis.ts"(){"use strict";E0(),Ue(),sI(),xt(),Lu(),ih=class extends yl{constructor(t){super(t,new dm),this.min=void 0,this.max=void 0}normaliseDataDomain(t){let{min:e,max:i}=this,s=!1;return typeof e=="number"&&(e=new Date(e)),typeof i=="number"&&(i=new Date(i)),t.length>2&&(t=Xo(t)?.map(a=>new Date(a))??[]),e instanceof Date&&(s||(s=e>t[0]),t=[e,t[1]]),i instanceof Date&&(s||(s=i<t[1]),t=[t[0],i]),t[0]>t[1]&&(t=[]),{domain:t,clipped:s}}onFormatChange(t,e,i,s){s?super.onFormatChange(t,e,i,s):(this.labelFormatter=this.scale.tickFormat({ticks:t,domain:i}),this.datumFormatter=this.scale.tickFormat({ticks:t,domain:i,formatOffset:1}))}updateSecondaryAxisTicks(t){if(!this.dataDomain?.domain.length)return[];const{domain:e,ticks:i}=iI(this.dataDomain.domain.map(Number),t??0,this.reverse);return this.scale.nice=!1,this.scale.domain=e.map(s=>new Date(s)),this.scale.update(),i}},ih.className="TimeAxis",ih.type="time",M([I(un(sm,xu("max")),{optional:!0})],ih.prototype,"min",2),M([I(un(sm,bu("min")),{optional:!0})],ih.prototype,"max",2)}}),$u,j_=A({"packages/ag-charts-community/src/scene/util/corner.ts"(){"use strict";$u=(t,{x0:e,y0:i,x1:s,y1:a,cx:n,cy:o},r,l)=>{if(l&&t.moveTo(e,i),e!==s||i!==a){const c=Math.atan2(i-o,e-n),h=Math.atan2(a-o,s-n);t.arc(n,o,r,c,h)}else t.lineTo(e,i)}}}),rI,Dg,Ag,Oi,Ig=A({"packages/ag-charts-community/src/scene/shape/rect.ts"(){"use strict";kt(),NA(),j_(),Va(),hl(),rI=1e-6,Dg=(t,e,i,s,a)=>{let n=!1,o=!1,r=s-Math.sqrt(Math.max(a**2-i**2,0)),l=0,c=0,h=i-Math.sqrt(Math.max(a**2-s**2,0));return r>t?(n=!0,r=t,l=i-Math.sqrt(Math.max(a**2-(s-t)**2))):r<rI&&(r=0),h>e?(o=!0,c=s-Math.sqrt(Math.max(a**2-(i-e)**2)),h=e):h<rI&&(h=0),{leading0:r,leading1:l,trailing0:c,trailing1:h,leadingClipped:n,trailingClipped:o}},Ag=(t,e,i,s,a,n,o)=>{let{topLeft:r,topRight:l,bottomRight:c,bottomLeft:h}=n;const u=Math.max(r+h,l+c),d=Math.max(r+l,h+c);if(u<=0&&d<=0){o==null?t.rect(e,i,s,a):t.rect(o.x,o.y,o.width,o.height);return}else if(o==null&&r===l&&r===c&&r===h){t.roundRect(e,i,s,a,r);return}if(s<0&&(e+=s,s=Math.abs(s)),a<0&&(i+=a,a=Math.abs(a)),s<=0||a<=0)return;if(o==null)o=new lt(e,i,s,a);else{const L=Math.max(e,o.x),T=Math.min(e+s,o.x+o.width),N=Math.max(i,o.y),C=Math.min(i+a,o.y+o.height);o=new lt(L,N,T-L,C-N)}const p=Math.max(u/a,d/s,1);p>1&&(r/=p,l/=p,c/=p,h/=p);let g=!0,f=!0,x=!0,m=!0,b,v,S,D;if(g){const L=Dg(o.height,o.width,Math.max(e+r-o.x,0),Math.max(i+r-o.y,0),r);L.leadingClipped&&(m=!1),L.trailingClipped&&(f=!1);const T=Math.max(o.x+L.leading1,o.x),N=Math.max(o.y+L.leading0,o.y),C=Math.max(o.x+L.trailing1,o.x),O=Math.max(o.y+L.trailing0,o.y),R=e+r,E=i+r;b={x0:T,y0:N,x1:C,y1:O,cx:R,cy:E}}if(f){const L=Dg(o.width,o.height,Math.max(i+l-o.y,0),Math.max(o.x+o.width-(e+s-l),0),l);L.leadingClipped&&(g=!1),L.trailingClipped&&(x=!1);const T=Math.min(o.x+o.width-L.leading0,o.x+o.width),N=Math.max(o.y+L.leading1,o.y),C=Math.min(o.x+o.width-L.trailing0,o.x+o.width),O=Math.max(o.y+L.trailing1,o.y),R=e+s-l,E=i+l;v={x0:T,y0:N,x1:C,y1:O,cx:R,cy:E}}if(x){const L=Dg(o.height,o.width,Math.max(o.x+o.width-(e+s-c),0),Math.max(o.y+o.height-(i+a-c),0),c);L.leadingClipped&&(f=!1),L.trailingClipped&&(m=!1);const T=Math.min(o.x+o.width-L.leading1,o.x+o.width),N=Math.min(o.y+o.height-L.leading0,o.y+o.height),C=Math.min(o.x+o.width-L.trailing1,o.x+o.width),O=Math.min(o.y+o.height-L.trailing0,o.y+o.height),R=e+s-c,E=i+a-c;S={x0:T,y0:N,x1:C,y1:O,cx:R,cy:E}}if(m){const L=Dg(o.width,o.height,Math.max(o.y+o.height-(i+a-h),0),Math.max(e+h-o.x,0),h);L.leadingClipped&&(x=!1),L.trailingClipped&&(g=!1);const T=Math.max(o.x+L.leading0,o.x),N=Math.min(o.y+o.height-L.leading1,o.y+o.height),C=Math.max(o.x+L.trailing0,o.x),O=Math.min(o.y+o.height-L.trailing1,o.y+o.height),R=e+h,E=i+a-h;D={x0:T,y0:N,x1:C,y1:O,cx:R,cy:E}}let k=!1;g&&b!=null&&($u(t,b,r,!k),k||(k=!0)),f&&v!=null&&($u(t,v,l,!k),k||(k=!0)),x&&S!=null&&($u(t,S,c,!k),k||(k=!0)),m&&D!=null&&$u(t,D,h,!k),t.closePath()},Oi=class extends qi{constructor(){super(...arguments),this.borderPath=new ju,this.x=0,this.y=0,this.width=10,this.height=10,this.topLeftCornerRadius=0,this.topRightCornerRadius=0,this.bottomRightCornerRadius=0,this.bottomLeftCornerRadius=0,this.clipBBox=void 0,this.crisp=!1,this.lastUpdatePathStrokeWidth=la.defaultStyles.strokeWidth,this.effectiveStrokeWidth=la.defaultStyles.strokeWidth,this.hittester=super.isPointInPath.bind(this),this.distanceCalculator=super.distanceSquaredTransformedPoint.bind(this),this.microPixelEffectOpacity=1}set cornerRadius(t){this.topLeftCornerRadius=t,this.topRightCornerRadius=t,this.bottomRightCornerRadius=t,this.bottomLeftCornerRadius=t}isDirtyPath(){return this.lastUpdatePathStrokeWidth!==this.strokeWidth||!!(this.path.isDirty()||this.borderPath.isDirty())}updatePath(){const{path:t,borderPath:e,crisp:i,topLeftCornerRadius:s,topRightCornerRadius:a,bottomRightCornerRadius:n,bottomLeftCornerRadius:o}=this;let{x:r,y:l,width:c,height:h,strokeWidth:u,clipBBox:d}=this;const g=1/(this.layerManager?.canvas.pixelRatio??1);let f=1;if(t.clear(!0),e.clear(!0),i&&(c<=g&&(f*=c/g),h<=g&&(f*=h/g),c=this.align(r,c),h=this.align(l,h),r=this.align(r),l=this.align(l),d=d!=null?new lt(this.align(d.x),this.align(d.y),this.align(d.x,d.width),this.align(d.y,d.height)):void 0),u)if(c<g){const x=r+g/2;e.moveTo(x,l),e.lineTo(x,l+h),u=g,this.borderClipPath=void 0}else if(h<g){const x=l+g/2;e.moveTo(r,x),e.lineTo(r+c,x),u=g,this.borderClipPath=void 0}else if(u<c&&u<h){const x=u/2;r+=x,l+=x,c-=u,h-=u;const m=d?.clone().shrink(x),b={topLeft:s>0?s-u:0,topRight:a>0?a-u:0,bottomRight:n>0?n-u:0,bottomLeft:o>0?o-u:0};this.borderClipPath=void 0,c>0&&h>0&&(m==null||m?.width>0&&m?.height>0)&&(Ag(t,r,l,c,h,b,m),Ag(e,r,l,c,h,b,m))}else this.borderClipPath=this.borderClipPath??new ju,this.borderClipPath.clear(!0),this.borderClipPath.rect(r,l,c,h),e.rect(r,l,c,h);else{const x={topLeft:s,topRight:a,bottomRight:n,bottomLeft:o};this.borderClipPath=void 0,Ag(t,r,l,c,h,x,d)}if([s,a,n,o].every(x=>x===0)){const x=this.getBBox();this.hittester=x.containsPoint.bind(x),this.distanceSquared=(m,b)=>this.getBBox().distanceSquared(m,b)}else this.hittester=super.isPointInPath,this.distanceCalculator=super.distanceSquaredTransformedPoint;this.effectiveStrokeWidth=u,this.lastUpdatePathStrokeWidth=u,this.microPixelEffectOpacity=f}computeBBox(){const{x:t,y:e,width:i,height:s,clipBBox:a}=this;return a?.clone()??new lt(t,e,i,s)}isPointInPath(t,e){return this.hittester(t,e)}get midPoint(){return{x:this.x+this.width/2,y:this.y+this.height/2}}distanceSquared(t,e){return this.distanceCalculator(t,e)}applyFillAlpha(t){const{fillOpacity:e,microPixelEffectOpacity:i,opacity:s}=this;t.globalAlpha*=s*e*i}renderStroke(t){const{stroke:e,effectiveStrokeWidth:i}=this;if(e&&i){const{globalAlpha:s}=t,{strokeOpacity:a,lineDash:n,lineDashOffset:o,lineCap:r,lineJoin:l,borderPath:c,borderClipPath:h,opacity:u,microPixelEffectOpacity:d}=this;h&&t.clip(h.getPath2D()),this.applyStroke(t),t.globalAlpha*=u*a*d,t.lineWidth=i,n&&t.setLineDash(n),o&&(t.lineDashOffset=o),r&&(t.lineCap=r),l&&(t.lineJoin=l),t.stroke(c.getPath2D()),t.globalAlpha=s}}},Oi.className="Rect",M([vt()],Oi.prototype,"x",2),M([vt()],Oi.prototype,"y",2),M([vt()],Oi.prototype,"width",2),M([vt()],Oi.prototype,"height",2),M([vt()],Oi.prototype,"topLeftCornerRadius",2),M([vt()],Oi.prototype,"topRightCornerRadius",2),M([vt()],Oi.prototype,"bottomRightCornerRadius",2),M([vt()],Oi.prototype,"bottomLeftCornerRadius",2),M([vt()],Oi.prototype,"clipBBox",2),M([vt()],Oi.prototype,"crisp",2)}}),sh,G_=A({"packages/ag-charts-community/src/chart/background/background.ts"(){"use strict";so(),me(),Ig(),Ss(),vs(),xt(),pl(),sh=class extends qp{constructor(t){super(),this.ctx=t,this.rectNode=new Oi,this.textNode=new Ye,this.fill="white",this.node=this.createNode(),this.node.append([this.rectNode,this.textNode]),this.visible=!0,this.destroyFns.push(t.scene.attachNode(this.node),t.layoutManager.addListener("layout:complete",e=>this.onLayoutComplete(e)))}createNode(){return new mt({name:"background",zIndex:0})}onLayoutComplete(t){const{width:e,height:i}=t.chart;this.rectNode.width=e,this.rectNode.height=i}},M([I(pt),bi("node","visible")],sh.prototype,"visible",2),M([I(jt,{optional:!0}),bi("rectNode","fill")],sh.prototype,"fill",2),M([I(ct,{optional:!0})],sh.prototype,"image",2),M([I(J,{optional:!0}),bi("textNode")],sh.prototype,"text",2)}}),lI,V_=A({"packages/ag-charts-community/src/chart/background/backgroundModule.ts"(){"use strict";G_(),lI={type:"root",optionsKey:"background",packageType:"community",chartTypes:["cartesian","polar","hierarchy","topology","flow-proportion","standalone","gauge"],moduleFactory:t=>new sh(t)}}});function L6({orientation:t,bboxes:e,maxHeight:i,maxWidth:s,itemPaddingY:a=0,itemPaddingX:n=0,forceResult:o=!1}){const r=t==="horizontal",l={max:r?s:i,fn:r?d=>d.width:d=>d.height,padding:r?n:a},c={max:r?i:s,fn:r?d=>d.height:d=>d.width,padding:r?a:n};let h=0;const u=[];for(;h<e.length;){const d=e.slice(h),p=T6(d,h,l,c,o);if(!p)return;h+=p.processedBBoxCount,u.push(p.pageIndices)}return C6(u,t,e,a,n)}function T6(t,e,i,s,a){let o=E6(t,i);if(o<1){if(!a)return;o=1}let r=o;for(;r>=1;){const l=N6(t,e,r,i,s,a);if(l==null&&r<=1)return;if(l==null){r--;continue}if(typeof l=="number"){if(l<=1)return;r=l<r&&l>1?l:r,r--;continue}return{processedBBoxCount:l.length*l[0].length,pageIndices:l}}}function N6(t,e,i,s,a,n){const o=[];let r=0,l=0,c=[];const h=[];for(let u=0;u<t.length;u++){const d=(u+i)%i;d===0&&(r+=l,l=0,c.length>0&&o.push(c),c=[]);const p=s.fn(t[u])+s.padding;h[d]=Math.max(h[d]??0,p),l=Math.max(l,a.fn(t[u])+a.padding);const g=r+l,f=!n||o.length>0;if(g>a.max&&f){c=[];break}if(h.reduce((m,b)=>m+b,0)>s.max&&!n)return h.length<i?h.length:void 0;c.push(u+e)}return c.length>0&&o.push(c),o.length>0?o:void 0}function C6(t,e,i,s,a){let n=0,o=0;return{pages:t.map(l=>{e==="horizontal"&&(l=O6(l));let c=0;const h=l.map(p=>{const g=p.map(m=>(c=Math.max(m,c),i[m]));let f=0,x=0;return g.forEach(m=>{f+=m.height+s,x=Math.max(x,m.width+a)}),{indices:p,bboxes:g,columnHeight:Math.ceil(f),columnWidth:Math.ceil(x)}});let u=0,d=0;return h.forEach(p=>{u+=p.columnWidth,d=Math.max(d,p.columnHeight)}),n=Math.max(u,n),o=Math.max(d,o),{columns:h,startIndex:l[0][0],endIndex:c,pageWidth:u,pageHeight:d}}),maxPageWidth:n,maxPageHeight:o}}function O6(t){const e=[];for(const i of t[0])e.push([]);return t.forEach((i,s)=>{i.forEach((a,n)=>{e[n][s]=a})}),e}function E6(t,e){const i=t.length;let s=0;for(let a=0;a<i;a++)if(s+=e.fn(t[a])+e.padding,s>e.max)return i/a<2?Math.ceil(i/2):a;return i}var w6=A({"packages/ag-charts-community/src/chart/gridLayout.ts"(){"use strict"}}),ah,go,kg,Ll,R6=A({"packages/ag-charts-community/src/chart/pagination/pagination.ts"(){"use strict";me(),Ss(),Ki(),wa(),It(),Jt(),vs(),xt(),ro(),RA(),co(),ah=class extends Mt{constructor(){super(...arguments),this.color="black",this.fontStyle=void 0,this.fontWeight=void 0,this.fontSize=12,this.fontFamily="Verdana, sans-serif"}},M([I(jt)],ah.prototype,"color",2),M([I(qn,{optional:!0})],ah.prototype,"fontStyle",2),M([I(Jn,{optional:!0})],ah.prototype,"fontWeight",2),M([I(nt)],ah.prototype,"fontSize",2),M([I(J)],ah.prototype,"fontFamily",2),go=class extends Mt{constructor(){super(...arguments),this.size=15,this.fill=void 0,this.fillOpacity=void 0,this.stroke=void 0,this.strokeWidth=1,this.strokeOpacity=1}},M([I(nt)],go.prototype,"size",2),M([I(jt,{optional:!0})],go.prototype,"fill",2),M([I(Ft,{optional:!0})],go.prototype,"fillOpacity",2),M([I(jt,{optional:!0})],go.prototype,"stroke",2),M([I(nt)],go.prototype,"strokeWidth",2),M([I(Ft)],go.prototype,"strokeOpacity",2),kg=class extends Mt{constructor(t){super(),this.parent=t,this.shape="triangle",this.size=15,this.padding=8}},M([ua({changeValue(){this.parent.marker===this&&this.parent.onMarkerShapeChange()}})],kg.prototype,"shape",2),M([I(nt)],kg.prototype,"size",2),M([I(nt)],kg.prototype,"padding",2),Ll=class extends Mt{constructor(t,e){super(),this.chartUpdateCallback=t,this.pageUpdateCallback=e,this.id=Ea(this),this.marker=new kg(this),this.activeStyle=new go,this.inactiveStyle=new go,this.highlightStyle=new go,this.label=new ah,this.group=new Xi({name:"pagination"}),this.labelNode=new Ye,this.destroyFns=[],this.totalPages=0,this.currentPage=0,this.translationX=0,this.translationY=0,this.nextButtonDisabled=!1,this.previousButtonDisabled=!1,this._visible=!0,this._enabled=!0,this._orientation="vertical",this._nextButton=new Vu,this._previousButton=new Vu,this.labelNode.setProperties({textBaseline:"middle",fontSize:12,fontFamily:"Verdana, sans-serif",fill:"black",y:1}),this.group.append([this.nextButton,this.previousButton,this.labelNode]),this.update(),this.updateMarkers()}destroy(){this.destroyFns.forEach(t=>t())}set visible(t){this._visible=t,this.updateGroupVisibility()}get visible(){return this._visible}set enabled(t){this._enabled=t,this.updateGroupVisibility()}get enabled(){return this._enabled}updateGroupVisibility(){this.group.visible=this.enabled&&this.visible}set orientation(t){switch(this._orientation=t,t){case"horizontal":{this.previousButton.rotation=-Math.PI/2,this.nextButton.rotation=Math.PI/2;break}case"vertical":default:this.previousButton.rotation=0,this.nextButton.rotation=Math.PI}}get orientation(){return this._orientation}set nextButton(t){this._nextButton!==t&&(this.group.removeChild(this._nextButton),this._nextButton=t,this.group.appendChild(t))}get nextButton(){return this._nextButton}set previousButton(t){this._previousButton!==t&&(this.group.removeChild(this._previousButton),this._previousButton=t,this.group.appendChild(t))}get previousButton(){return this._previousButton}update(){this.updateLabel(),this.updatePositions(),this.enableOrDisableButtons()}updatePositions(){this.group.translationX=this.translationX,this.group.translationY=this.translationY,this.updateLabelPosition(),this.updateNextButtonPosition()}updateLabelPosition(){const{size:t,padding:e}=this.marker;this.nextButton.size=t,this.previousButton.size=t,this.labelNode.x=t/2+e}updateNextButtonPosition(){const t=this.labelNode.getBBox();this.nextButton.translationX=t.width+(this.marker.size/2+this.marker.padding)*2}updateLabel(){const{currentPage:t,totalPages:e,labelNode:i,label:{color:s,fontStyle:a,fontWeight:n,fontSize:o,fontFamily:r}}=this;i.text=`${t+1} / ${e}`,i.fill=s,i.fontStyle=a,i.fontWeight=n,i.fontSize=o,i.fontFamily=r}updateMarkers(){const{nextButton:t,previousButton:e,nextButtonDisabled:i,previousButtonDisabled:s,activeStyle:a,inactiveStyle:n,highlightStyle:o,highlightActive:r}=this,l=(c,h)=>h?n:c===r?o:a;this.updateMarker(t,l("next",i)),this.updateMarker(e,l("previous",s))}updateMarker(t,e){const{size:i}=this.marker;t.size=i,t.fill=e.fill,t.fillOpacity=e.fillOpacity??1,t.stroke=e.stroke,t.strokeWidth=e.strokeWidth,t.strokeOpacity=e.strokeOpacity}enableOrDisableButtons(){const{currentPage:t,totalPages:e}=this,i=e===0,s=t===e-1,a=t===0;this.nextButtonDisabled=s||i,this.previousButtonDisabled=a||i}setPage(t){t=At(0,t,Math.max(0,this.totalPages-1)),this.currentPage!==t&&(this.currentPage=t,this.onPaginationChanged())}getCursor(t){return{previous:this.previousButtonDisabled,next:this.nextButtonDisabled}[t]?void 0:"pointer"}onClick(t,e){t.preventDefault(),e==="next"&&!this.nextButtonDisabled?(this.incrementPage(),this.onPaginationChanged()):e==="previous"&&!this.previousButtonDisabled&&(this.decrementPage(),this.onPaginationChanged())}onMouseHover(t){this.highlightActive=t,this.updateMarkers(),this.chartUpdateCallback(6)}onPaginationChanged(){this.pageUpdateCallback(this.currentPage)}incrementPage(){this.currentPage=Math.min(this.currentPage+1,this.totalPages-1)}decrementPage(){this.currentPage=Math.max(this.currentPage-1,0)}onMarkerShapeChange(){const t=Rc(Ua(this.marker.shape||Vu));this.previousButton=new t,this.nextButton=new t,this.updatePositions(),this.updateMarkers(),this.chartUpdateCallback(6)}attachPagination(t){t.append(this.group)}getBBox(){return this.group.getBBox()}computeCSSBounds(){const t=Ae.toCanvas(this.previousButton),e=Ae.toCanvas(this.nextButton);return{prev:t,next:e}}},Ll.className="Pagination",M([I(ct)],Ll.prototype,"marker",2),M([I(ct)],Ll.prototype,"activeStyle",2),M([I(ct)],Ll.prototype,"inactiveStyle",2),M([I(ct)],Ll.prototype,"highlightStyle",2),M([I(ct)],Ll.prototype,"label",2)}}),U_,_6=A({"packages/ag-charts-community/src/chart/legend/legendDOMProxy.ts"(){"use strict";Ki(),qE(),Nt(),U_=class{constructor(t,e){this.idPrefix=e,this.dirty=!0,this.destroyFns=new AD,this.itemList=t.proxyInteractionService.createProxyContainer({type:"list",domManagerId:`${e}-toolbar`,classList:["ag-charts-proxy-legend-toolbar"],ariaLabel:{id:"ariaLabelLegend"}}),this.paginationGroup=t.proxyInteractionService.createProxyContainer({type:"group",domManagerId:`${e}-pagination`,classList:["ag-charts-proxy-legend-pagination"],ariaLabel:{id:"ariaLabelLegendPagination"},ariaOrientation:"horizontal"}),this.itemDescription=Wt("p"),this.itemDescription.style.display="none",this.itemDescription.id=`${e}-ariaDescription`,this.itemDescription.textContent=this.getItemAriaDescription(t.localeManager),this.itemList.getElement().append(this.itemDescription)}destroy(){this.destroyFns.destroy()}initLegendList(t){if(!this.dirty)return;const{ctx:e,itemSelection:i,datumReader:s,itemListener:a}=t,n=e.localeManager,o=i.length;i.each((r,l,c)=>{r.proxyButton?.destroy(),r.proxyButton=e.proxyInteractionService.createProxyElement({type:"listswitch",id:`ag-charts-legend-item-${c}`,textContent:this.getItemAriaText(n,s.getItemLabel(l),c,o),ariaChecked:!!r.datum.enabled,ariaDescribedBy:this.itemDescription.id,parent:this.itemList});const h=r.proxyButton;h.addListener("click",u=>a.onClick(u.sourceEvent,r.datum,h)),h.addListener("dblclick",u=>a.onDoubleClick(u.sourceEvent,r.datum)),h.addListener("mouseenter",u=>a.onHover(u.sourceEvent,r)),h.addListener("mouseleave",()=>a.onLeave()),h.addListener("contextmenu",u=>a.onContextClick(u.sourceEvent,r)),h.addListener("blur",()=>a.onLeave()),h.addListener("focus",u=>a.onHover(u.sourceEvent,r))}),this.dirty=!1}update(t){this.updateVisibility(t.visible),t.visible&&(this.initLegendList(t),this.updateItemProxyButtons(t),this.updatePaginationProxyButtons(t))}updateVisibility(t){this.itemList.setHidden(!t),this.paginationGroup.setHidden(!t)}updateItemProxyButtons({itemSelection:t,group:e,pagination:i,interactive:s}){const a=Ae.toCanvas(e);this.itemList.setBounds(a);const n=Math.max(...t.nodes().map(o=>o.getBBox().height));t.each((o,r)=>{if(o.proxyButton){const l=o.pageIndex===i.currentPage,{x:c,y:h,height:u,width:d}=Ae.toCanvas(o),p=(n-u)/2,g={x:c-a.x,y:h-p-a.y,height:n,width:d};o.proxyButton.setCursor("pointer"),o.proxyButton.setEnabled(s&&l),o.proxyButton.setBounds(g)}})}updatePaginationProxyButtons(t){const{ctx:e,pagination:i,oldPages:s,newPages:a}=t;this.paginationGroup.setHidden(!i.visible);const n=(s?.length??a.length)>1,o=a.length>1;n!==o&&(o?(this.prevButton=e.proxyInteractionService.createProxyElement({type:"button",id:`${this.idPrefix}-prev-page`,textContent:{id:"ariaLabelLegendPagePrevious"},tabIndex:0,parent:this.paginationGroup}),this.prevButton.addListener("click",c=>i.onClick(c.sourceEvent,"previous")),this.prevButton.addListener("mouseenter",()=>i.onMouseHover("previous")),this.prevButton.addListener("mouseleave",()=>i.onMouseHover(void 0)),this.nextButton??(this.nextButton=e.proxyInteractionService.createProxyElement({type:"button",id:`${this.idPrefix}-next-page`,textContent:{id:"ariaLabelLegendPageNext"},tabIndex:0,parent:this.paginationGroup})),this.nextButton.addListener("click",c=>i.onClick(c.sourceEvent,"next")),this.nextButton.addListener("mouseenter",()=>i.onMouseHover("next")),this.nextButton.addListener("mouseleave",()=>i.onMouseHover(void 0))):(this.nextButton?.destroy(),this.prevButton?.destroy(),this.nextButton=void 0,this.prevButton=void 0));const{prev:r,next:l}=i.computeCSSBounds();this.prevButton?.setBounds(r),this.nextButton?.setBounds(l),this.updatePaginationCursors(t)}updatePaginationCursors({pagination:t}){this.nextButton?.setCursor(t.getCursor("next")),this.prevButton?.setCursor(t.getCursor("previous"))}onDataUpdate(t,e){this.dirty=t.length!==e.length||t.some((i,s,a)=>{const[n,o]=[e[s],t[s]];return n.id!==o.id})}onLocaleChanged(t,e,i){const s=e.length;e.each(({proxyButton:a},n,o)=>{const r=a?.getElement();if(r!=null){const l=i.getItemLabel(n);r.textContent=this.getItemAriaText(t,l,o,s)}}),this.itemDescription.textContent=this.getItemAriaDescription(t)}onPageChange(t){this.updateItemProxyButtons(t),this.updatePaginationCursors(t)}getItemAriaText(t,e,i,s){return i>=0&&e?(i++,t.t("ariaLabelLegendItem",{label:e,index:i,count:s})):t.t("ariaLabelLegendItemUnknown")}getItemAriaDescription(t){return t.t("ariaDescriptionLegendItem")}}}});function W_(t,e,i,s){const a={defaultPrevented:!1,apiEvent:{type:t,itemId:e,seriesId:i,event:s,preventDefault:()=>a.defaultPrevented=!0}};return a}var P6=A({"packages/ag-charts-community/src/chart/legend/legendEvent.ts"(){"use strict"}}),Tl,H_=A({"packages/ag-charts-community/src/scene/image.ts"(){"use strict";ae(),Tl=class extends Yo{constructor(t){super(),this.sourceImage=t,this.x=0,this.y=0,this.width=0,this.height=0,this.opacity=1}updateBitmap(t,e,i,s){this.sourceImage=t,this.width=t.width/e,this.height=t.height/e,this.x=i/e,this.y=s/e,this.markDirty()}render(t){const{ctx:e}=t,i=this.sourceImage;i&&(e.globalAlpha=this.opacity,e.drawImage(i,0,0,i.width,i.height,this.x,this.y,this.width,this.height)),super.render(t)}},M([ht()],Tl.prototype,"x",2),M([ht()],Tl.prototype,"y",2),M([ht()],Tl.prototype,"width",2),M([ht()],Tl.prototype,"height",2),M([ht()],Tl.prototype,"opacity",2)}}),fo,Y_=A({"packages/ag-charts-community/src/chart/legend/legendMarkerLabel.ts"(){"use strict";kt(),me(),H_(),Ss(),Ki(),vs(),Ct(),fo=class extends _c(mt){constructor(){super({name:"markerLabelGroup"}),this.label=new Ye,this.symbolsGroup=new mt({name:"legend-markerLabel-symbols"}),this.bitmap=new Tl,this.bitmapDirty=!0,this.enabled=!0,this.pageIndex=NaN,this._marker=void 0,this._line=void 0;const{marker:t,label:e,line:i}=this;e.textBaseline="middle",e.fontSize=12,e.fontFamily="Verdana, sans-serif",e.fill="black",e.y=1,this.updateSymbols(t,i),this.append([this.symbolsGroup,e])}destroy(){super.destroy(),this.proxyButton?.destroy()}get marker(){return this._marker}get line(){return this._line}updateSymbols(t,e){this._marker===t&&this._line===e||(this.bitmapDirty=!0,this._marker=t,this._line=e,this.symbolsGroup.clear(),this.symbolsGroup.append([this.bitmap,e,t].filter(tl)))}setEnabled(t){this.enabled=t,this.refreshVisibilities()}refreshVisibilities(){const t=this.enabled?1:.5;this.label.opacity=t,this.opacity=t,this.bitmap.opacity=t,this.setBitmapVisibility(!this.enabled)}setBitmapVisibility(t){const{line:e,marker:i}=this;i!=null&&(i.visible=!t),e!=null&&(e.visible=!t),this.bitmap.visible=t}update(t,{spriteAAPadding:e,spritePixelRatio:i},s){const{marker:a,line:n}=this,{length:o,spacing:r,isCustomMarker:l}=s;let c=1/0,h=1/0,u=1/0,d=1/0,p=1/0,g=0,f=0;if(a){const{size:S}=a,D=a.constructor.center,k=(S+a.strokeWidth)/2;g=(D.x-.5)*S,f=(D.y-.5)*S,l?(a.x=0,a.y=0,a.translationX=g*S+o/2,a.translationY=f*S,d=a.translationY-k,p=a.translationX-k):(a.x=g+o/2,a.y=f,d=a.y-k,p=a.x-k)}n&&(n.x1=0,n.x2=o,n.y1=0,n.y2=0,n.markDirty(),c=-n.strokeWidth/2,h=n.x1,u=n.x2);const x=Math.min(h,u,p),m=Math.min(c,d),b=n?.x2??-1/0,v=(a?.x??0)+(a?.size??0)/2;if(this.label.x=Math.max(b,v)+r,this.bitmapDirty){this.setBitmapVisibility(!1);const S=g+(e+x)*i,D=f+(e-m)*i,k=t.renderSprite(this.symbolsGroup,{scale:i,translateX:Math.floor(S),translateY:Math.floor(D)});this.bitmap.updateBitmap(k,i,Math.ceil(-S),Math.ceil(-D)),this.bitmapDirty=!1,this.refreshVisibilities()}}computeBBox(){const{label:t,line:e,marker:i}=this;return this.toParent(mt.computeChildrenBBox([t,e,i].filter(tl),!1))}},fo.className="MarkerLabel",M([bi("label")],fo.prototype,"text",2),M([bi("label")],fo.prototype,"fontStyle",2),M([bi("label")],fo.prototype,"fontWeight",2),M([bi("label")],fo.prototype,"fontSize",2),M([bi("label")],fo.prototype,"fontFamily",2),M([bi("label","fill")],fo.prototype,"color",2)}}),rr,nh,Ox,lr,Ex,Qu,wx,Is,B6=A({"packages/ag-charts-community/src/chart/legend/legend.ts"(){"use strict";kt(),me(),Qo(),Pc(),_w(),Ki(),Nt(),wa(),St(),It(),Yt(),Jt(),vs(),ca(),Q0(),xt(),ro(),w6(),Yc(),Jp(),co(),R6(),Vs(),pl(),_6(),P6(),Y_(),rr=class extends Mt{constructor(){super(...arguments),this.maxLength=void 0,this.color="black",this.fontStyle=void 0,this.fontWeight=void 0,this.fontSize=12,this.fontFamily="Verdana, sans-serif"}},M([I(nt,{optional:!0})],rr.prototype,"maxLength",2),M([I(jt)],rr.prototype,"color",2),M([I(qn,{optional:!0})],rr.prototype,"fontStyle",2),M([I(Jn,{optional:!0})],rr.prototype,"fontWeight",2),M([I(nt)],rr.prototype,"fontSize",2),M([I(J)],rr.prototype,"fontFamily",2),M([I(Yi,{optional:!0})],rr.prototype,"formatter",2),nh=class extends Mt{constructor(){super(...arguments),this.size=15,this.padding=8}},M([zc(t=>t.parent?.onMarkerShapeChange())],nh.prototype,"shape",2),M([I(nt)],nh.prototype,"size",2),M([I(nt)],nh.prototype,"padding",2),M([I(nt,{optional:!0})],nh.prototype,"strokeWidth",2),M([I(pt)],nh.prototype,"enabled",2),Ox=class extends Mt{},M([I(nt,{optional:!0})],Ox.prototype,"strokeWidth",2),M([I(nt,{optional:!0})],Ox.prototype,"length",2),lr=class extends Mt{constructor(){super(...arguments),this.paddingX=16,this.paddingY=8,this.showSeriesStroke=!1,this.marker=new nh,this.label=new rr,this.line=new Ox}},M([I(nt,{optional:!0})],lr.prototype,"maxWidth",2),M([I(nt)],lr.prototype,"paddingX",2),M([I(nt)],lr.prototype,"paddingY",2),M([I(pt)],lr.prototype,"showSeriesStroke",2),M([I(ct)],lr.prototype,"marker",2),M([I(ct)],lr.prototype,"label",2),M([I(ct)],lr.prototype,"line",2),Ex=class extends Mt{},M([I(Yi,{optional:!0})],Ex.prototype,"legendItemClick",2),M([I(Yi,{optional:!0})],Ex.prototype,"legendItemDoubleClick",2),Qu="legend-visibility",wx="legend-other-series",Is=class extends Mt{constructor(t){super(),this.ctx=t,this.id=Ea(this),this.group=new Xi({name:"legend",zIndex:13}),this.itemSelection=Te.select(this.group,fo),this.spriteRenderer=void 0,this.oldSize=[0,0],this.pages=[],this.maxPageSize=[0,0],this.paginationTrackingIndex=0,this.truncatedItems=new Set,this._data=[],this._symbolsDirty=!0,this.toggleSeries=!0,this.item=new lr,this.listeners=new Ex,this.enabled=!0,this.position="bottom",this.spacing=20,this.destroyFns=[],this.size=[0,0],this._visible=!0,this.item.marker.parent=this,this.pagination=new Ll(e=>t.updateService.update(e),e=>this.updatePageNumber(e)),this.pagination.attachPagination(this.group),this.destroyFns.push(t.contextMenuRegistry.registerDefaultAction({id:Qu,type:"legend",label:"contextMenuToggleSeriesVisibility",action:e=>this.contextToggleVisibility(e)}),t.contextMenuRegistry.registerDefaultAction({id:wx,type:"legend",label:"contextMenuToggleOtherSeries",action:e=>this.contextToggleOtherSeries(e)}),t.legendManager.addListener("legend-change",this.onLegendDataChange.bind(this))),this.destroyFns.push(t.layoutManager.registerElement(1,e=>this.positionLegend(e)),t.localeManager.addListener("locale-changed",()=>this.onLocaleChanged()),()=>this.group.remove()),this.domProxy=new U_(this.ctx,this.id),this.ctx.historyManager.addMementoOriginator(t.legendManager)}set data(t){this.domProxy.onDataUpdate(this._data,t),this._data=t,this._symbolsDirty=!0,this.updateGroupVisibility()}get data(){return this._data}onLegendDataChange({legendData:t=[]}){if(!this.enabled)return;const e=t.filter(s=>!s.hideInLegend),{data:i}=this;Mc(t,i)||(this.data=e)}destroy(){this.ctx.domManager.removeChild("canvas-overlay",`${this.id}-toolbar`),this.ctx.domManager.removeChild("canvas-overlay",`${this.id}-pagination`),this.destroyFns.forEach(t=>t()),this.pagination.destroy(),this.itemSelection.clear(),this.domProxy.destroy()}onMarkerShapeChange(){this.itemSelection.clear(),this.group.markDirty()}getOrientation(){if(this.orientation!==void 0)return this.orientation;switch(this.position){case"right":case"left":return"vertical";case"bottom":case"top":return"horizontal"}}set visible(t){this._visible=t,this.updateGroupVisibility()}get visible(){return this._visible}updateGroupVisibility(){this.group.visible=this.enabled&&this.visible&&this.data.length>0}attachLegend(t){t.appendChild(this.group)}getItemLabel(t){const{ctx:{callbackCache:e}}=this,{formatter:i}=this.item.label;if(i){const s=t.datum;return e.call(i,{itemId:t.itemId,value:t.label.text,seriesId:t.seriesId,...s&&{datum:s}})}return t.label.text}calcLayout(t,e){const{paddingX:i,paddingY:s,label:a,maxWidth:n,label:{maxLength:o=1/0,fontStyle:r,fontWeight:l,fontSize:c,fontFamily:h}}=this.item,u=[...this.data];this.reverseOrder&&u.reverse(),this.itemSelection.update(u);const d=[],p=ue.toFontString(a),f=n??t*.8,x=this.calculateSpriteDimensions();if(this.spriteRenderer??(this.spriteRenderer=new GD),this.spriteRenderer.resize(x),this.itemSelection.each((N,C)=>{N.fontStyle=r,N.fontWeight=l,N.fontSize=c,N.fontFamily=h;const O=this.updateMarkerLabel(this.spriteRenderer,N,C,x),R=C.itemId??C.id,z=(this.getItemLabel(C)??"<unknown>").replace(/\r?\n/g," ");N.text=this.truncate(z,o,f,O,p,R),d.push(N.getBBox())}),this._symbolsDirty=!1,t=Math.max(1,t),e=Math.max(1,e),!isFinite(t))return{};const m=this.size,b=this.oldSize;m[0]=t,m[1]=e,(m[0]!==b[0]||m[1]!==b[1])&&(b[0]=m[0],b[1]=m[1]);const{pages:v,maxPageHeight:S,maxPageWidth:D}=this.updatePagination(d,t,e),k=this.pages;this.pages=v,this.maxPageSize=[D-i,S-s];const L=this.pagination.currentPage,T=this.pages[L];return this.pages.length<1||!T?(this.visible=!1,{oldPages:k}):(this.visible=!0,this.updatePositions(L),this.update(),{oldPages:k})}isCustomMarker(t,e){return t&&e!==void 0&&typeof e!="string"}calcSymbolsEnabled(t){const{showSeriesStroke:e,marker:i}=this.item,s=!!i.enabled||!e||(t.marker.enabled??!0),a=!!(t.line&&e),n=this.isCustomMarker(s,t.marker.shape);return{markerEnabled:s,lineEnabled:a,isCustomMarker:n}}calcSymbolsLengths(t){const{marker:e,line:i}=this.item,{markerEnabled:s,lineEnabled:a}=this.calcSymbolsEnabled(t),{strokeWidth:n}=this.getMarkerStyles(t),{strokeWidth:o}=a?this.getLineStyles(t):{strokeWidth:0};let r;const{shape:l}=t.marker;if(this.isCustomMarker(s,l)){const u=Ua(l),d=new u;d.updatePath();const p=d.getBBox();r=Math.max(p.width,p.height)}const c=s?e.size:0,h=a?i.length??25:0;return{markerLength:c,markerStrokeWidth:n,lineLength:h,lineStrokeWidth:o,customMarkerSize:r}}calculateSpriteDimensions(){let t=0,e=0,i=0,s=0;return this.itemSelection.each((n,o)=>{const{symbol:r}=o,{markerLength:l,markerStrokeWidth:c,lineLength:h,lineStrokeWidth:u,customMarkerSize:d=-1/0}=this.calcSymbolsLengths(r),p=l+c;s=Math.max(s,h,d,l),e=Math.max(e,h,d,p),i=Math.max(i,u,p),t=Math.max(t,c+.5)}),e+=t*2,i+=t*2,{spritePixelRatio:he().devicePixelRatio,spriteAAPadding:t,spriteWidth:e,spriteHeight:i,markerWidth:s}}updateMarkerLabel(t,e,i,s){const{marker:a,paddingX:n}=this.item,{markerWidth:o}=s,{symbol:r}=i;let l=n;const{markerEnabled:c,lineEnabled:h,isCustomMarker:u}=this.calcSymbolsEnabled(r);if(this._symbolsDirty){const{shape:x=r.marker.shape}=a,m=Ua(x);e.updateSymbols(new m({zIndex:1}),new Bs({zIndex:0}))}const d=a.padding,{marker:p,line:g}=e;p!=null&&(p.size=c||!h?a.size:0);const f={length:o,spacing:d,isCustomMarker:u};if((c||h)&&(l+=d+o),p){const{strokeWidth:x,fill:m,stroke:b,fillOpacity:v,strokeOpacity:S}=this.getMarkerStyles(r);p.fill=m,p.stroke=b,p.strokeWidth=x,p.fillOpacity=v,p.strokeOpacity=S}if(!h&&g!=null)g.strokeWidth=0;else if(g){const x=this.getLineStyles(r);g.stroke=x.stroke,g.strokeOpacity=x.strokeOpacity,g.strokeWidth=x.strokeWidth,g.lineDash=x.lineDash}return e.update(t,s,f),l}truncate(t,e,i,s,a,n){let o=!1;t.length>e&&(t=t.substring(0,e),o=!0);const r=to.getMeasurer({font:a}),l=Im.truncateLine(t,r,i-s,o);return l.endsWith(ue.EllipsisChar)?this.truncatedItems.add(n):this.truncatedItems.delete(n),l}updatePagination(t,e,i){const s=this.getOrientation(),a=Math.min(this.paginationTrackingIndex,t.length);this.pagination.orientation=s,this.pagination.translationX=0,this.pagination.translationY=0;const{pages:n,maxPageHeight:o,maxPageWidth:r,paginationBBox:l,paginationVertical:c}=this.calculatePagination(t,e,i),h=n.findIndex(v=>v.endIndex>=a);this.pagination.currentPage=At(0,h,n.length-1);const{paddingX:u,paddingY:d}=this.item,p=8,g=r-u,f=o-d;let x=0,m=-l.y-this.item.marker.size/2;c?m+=f+p:(x+=-l.x+g+p,m+=(f-l.height)/2),this.pagination.translationX=x,this.pagination.translationY=m,this.pagination.update(),this.pagination.updateMarkers();let b=0;return this.itemSelection.each((v,S,D)=>{D>(n[b]?.endIndex??1/0)&&b++,v.pageIndex=b}),{maxPageHeight:o,maxPageWidth:r,pages:n}}calculatePagination(t,e,i){const{paddingX:s,paddingY:a}=this.item,n=this.getOrientation(),o=["left","right"].includes(this.position);let r=this.pagination.getBBox(),l=new lt(0,0,0,0),c=[],h=0,u=0,d=0;const p=f=>f.width===r.width&&f.height===r.height,g=this.maxWidth!==void 0&&this.maxHeight!==void 0;do{if(d++>10){st.warn("unable to find stable legend layout.");break}r=l;const f=e-(o?0:r.width),x=i-(o?r.height:0),m=L6({orientation:n,bboxes:t,maxHeight:x,maxWidth:f,itemPaddingY:a,itemPaddingX:s,forceResult:g});c=m?.pages??[],h=m?.maxPageWidth??0,u=m?.maxPageHeight??0;const b=c.length;if(this.pagination.visible=b>1,this.pagination.totalPages=b,this.pagination.update(),this.pagination.updateMarkers(),l=this.pagination.getBBox(),!this.pagination.visible)break}while(!p(l));return{maxPageWidth:h,maxPageHeight:u,pages:c,paginationBBox:l,paginationVertical:o}}updatePositions(t=0){const{item:{paddingY:e},itemSelection:i,pages:s}=this;if(s.length<1||!s[t])return;const{columns:a,startIndex:n,endIndex:o}=s[t];let r=0,l=0;const c=a.length,h=a[0].indices.length,u=this.getOrientation()==="horizontal",d=a[0].bboxes[0].height+e,p=[];i.each((g,f,x)=>{if(x<n||x>o){g.visible=!1;return}const m=x-n;let b,v;u?(b=m%c,v=Math.floor(m/c)):(b=Math.floor(m/h),v=m%h),g.visible=!0;const S=a[b];S&&(l=Math.floor(d*v),r=Math.floor(p[v]??0),p[v]=(p[v]??0)+S.columnWidth,g.translationX=r,g.translationY=l)})}updatePageNumber(t){const{itemSelection:e,group:i,pagination:s,pages:a,toggleSeries:n}=this,{startIndex:o,endIndex:r}=a[t];o===0?this.paginationTrackingIndex=0:t===a.length-1?this.paginationTrackingIndex=r:this.paginationTrackingIndex=Math.floor((o+r)/2),this.pagination.update(),this.pagination.updateMarkers(),this.updatePositions(t),this.domProxy.onPageChange({itemSelection:e,group:i,pagination:s,interactive:n}),this.ctx.updateService.update(6)}update(){const{label:{color:t}}=this.item;this.itemSelection.each((e,i)=>{e.setEnabled(i.enabled),e.color=t}),this.updateContextMenu()}updateContextMenu(){const{toggleSeries:t,ctx:{contextMenuRegistry:e}}=this;t?(e.hideAction(Qu),e.hideAction(wx)):(e.showAction(Qu),e.showAction(wx))}getLineStyles(t){const{stroke:e,strokeOpacity:i=1,strokeWidth:s,lineDash:a}=t.line??{},n=Math.min(2,s??1);return{stroke:e,strokeOpacity:i,strokeWidth:this.item.line.strokeWidth??n,lineDash:a}}getMarkerStyles(t){const{fill:e,stroke:i,strokeOpacity:s=1,fillOpacity:a=1,strokeWidth:n}=t.marker,o=Math.min(2,n??1);return{fill:e,stroke:i,strokeOpacity:s,fillOpacity:a,strokeWidth:this.item.marker.strokeWidth??o}}computePagedBBox(){const t=mt.computeChildrenBBox(this.group.children());if(this.pages.length>1){const[e,i]=this.maxPageSize;t.height=Math.max(i,t.height),t.width=Math.max(e,t.width)}return t}findNode(t){const{datum:e,proxyButton:i}=this.itemSelection.select(s=>s.datum?.itemId===t.itemId)[0]??{};if(e===void 0||i===void 0)throw new Error(`AG Charts - Missing required properties { datum: ${e}, proxyButton: ${JSON.stringify(i)} }`);return{datum:e,proxyButton:i}}contextToggleVisibility(t){const{datum:e,proxyButton:i}=this.findNode(t);this.doClick(t.event,e,i)}contextToggleOtherSeries(t){this.doDoubleClick(t.event,this.findNode(t).datum)}onContextClick(t,e){const i=e.datum;this.preventHidingAll&&this.contextMenuDatum?.enabled&&this.getVisibleItemCount()<=1?this.ctx.contextMenuRegistry.disableAction(Qu):this.ctx.contextMenuRegistry.enableAction(Qu);const{offsetX:s,offsetY:a}=t,{x:n,y:o}=Ae.toCanvasPoint(e,s,a);this.ctx.contextMenuRegistry.dispatchContext("legend",{sourceEvent:t,canvasX:n,canvasY:o},{legendItem:i})}onClick(t,e,i){this.doClick(t,e,i)&&t.preventDefault()}getVisibleItemCount(){return this.ctx.chartService.series.flatMap(t=>t.getLegendData("category")).filter(t=>t.enabled).length}doClick(t,e,i){const{listeners:{legendItemClick:s},ctx:{chartService:a,highlightManager:n},preventHidingAll:o,toggleSeries:r}=this;if(!e)return!1;const{legendType:l,seriesId:c,itemId:h,enabled:u}=e,d=a.series.find(f=>f.id===c);if(!d)return!1;let p=u;const g=W_("click",h,d.id,t);return s?.(g.apiEvent),g.defaultPrevented||(r&&(p=!u,o&&!p&&this.getVisibleItemCount()<2&&(p=!0),i.setChecked(p),this.ctx.chartEventManager.legendItemClick(l,d,h,p,e.legendItemName)),p?n.updateHighlight(this.id,{series:d,itemId:h,datum:void 0}):n.updateHighlight(this.id),this.ctx.legendManager.update(),this.ctx.updateService.update(2,{forceNodeDataRefresh:!0,skipAnimations:e.skipAnimations??!1})),!0}onDoubleClick(t,e){this.doDoubleClick(t,e)&&t.preventDefault()}doDoubleClick(t,e){const{listeners:{legendItemDoubleClick:i},ctx:{chartService:s},toggleSeries:a}=this;if(s.mode==="integrated"||!e)return!1;const{legendType:n,id:o,itemId:r,seriesId:l}=e,c=s.series.find(u=>u.id===o);if(!c)return!1;const h=W_("dblclick",r,c.id,t);if(i?.(h.apiEvent),h.defaultPrevented)return!0;if(a){const u=s.series.flatMap(g=>g.getLegendData("category")),d=u.filter(g=>g.enabled).length,p=u.find(g=>g.itemId===r&&g.seriesId===l);this.ctx.chartEventManager.legendItemDoubleClick(n,c,r,p?.enabled??!1,d,p?.legendItemName)}return this.ctx.legendManager.update(),this.ctx.updateService.update(2,{forceNodeDataRefresh:!0}),!0}toTooltipMeta(t,e){let i;if(t instanceof FocusEvent){const{x:n,y:o}=Ae.toCanvas(e).computeCenter();i={type:"keyboard",canvasX:n,canvasY:o}}else{t.preventDefault();const{x:n,y:o}=Ae.toCanvasPoint(e,t.offsetX,t.offsetY);i={type:"hover",canvasX:n,canvasY:o}}const{canvasX:s,canvasY:a}=i;return{canvasX:s,canvasY:a,lastPointerEvent:i,showArrow:!1}}onHover(t,e){if(!this.enabled)throw new Error("AG Charts - onHover handler called on disabled legend");this.pagination.setPage(e.pageIndex);const i=e.datum,s=i?this.ctx.chartService.series.find(a=>a.id===i?.id):void 0;if(i&&this.truncatedItems.has(i.itemId??i.id)){const a=this.toTooltipMeta(t,e);this.ctx.tooltipManager.updateTooltip(this.id,a,{title:this.getItemLabel(i)})}else this.ctx.tooltipManager.removeTooltip(this.id);i?.enabled&&s?this.updateHighlight({series:s,itemId:i?.itemId,datum:void 0}):this.updateHighlight()}onLeave(){this.ctx.tooltipManager.removeTooltip(this.id),this.updateHighlight()}updateHighlight(t){const e=this.ctx.interactionManager.getState();e===32?this.ctx.highlightManager.updateHighlight(this.id,t):e===2&&(this.pendingHighlightDatum=t,this.ctx.animationManager.onBatchStop(()=>{this.ctx.highlightManager.updateHighlight(this.id,this.pendingHighlightDatum)}))}onLocaleChanged(){this.domProxy.onLocaleChanged(this.ctx.localeManager,this.itemSelection,this)}positionLegend(t){const e=this.positionLegendScene(t);this.positionLegendDOM(e)}positionLegendScene(t){if(!this.enabled||!this.data.length)return;const{layoutBox:e}=t,{x:i,y:s,width:a,height:n}=e,[o,r]=this.calculateLegendDimensions(e),{oldPages:l}=this.calcLayout(o,r),c=this.computePagedBBox(),h=()=>{switch(this.position){case"top":case"left":return 0;case"bottom":return n-c.height;case"right":default:return a-c.width}};if(this.visible){const u=this.spacing;let d,p;switch(this.position){case"top":case"bottom":d=(a-c.width)/2,p=h(),e.shrink(c.height+u,this.position);break;case"left":case"right":default:d=h(),p=(n-c.height)/2,e.shrink(c.width+u,this.position)}this.group.translationX=Math.floor(i+d-c.x),this.group.translationY=Math.floor(s+p-c.y)}return l}positionLegendDOM(t){const{ctx:e,itemSelection:i,pagination:s,pages:a,toggleSeries:n,group:o}=this,r=this.visible&&this.enabled;this.domProxy.update({visible:r,interactive:n,ctx:e,itemSelection:i,group:o,pagination:s,oldPages:t,newPages:a,datumReader:this,itemListener:this})}calculateLegendDimensions(t){const{width:e,height:i}=t,s=e/i,a=.5,n=.2,o=.25;let r,l;switch(this.position){case"top":case"bottom":{const c=s<1?Math.min(a,n*(1/s)):n;r=this.maxWidth?Math.min(this.maxWidth,e):e,l=this.maxHeight?Math.min(this.maxHeight,i):Math.round(i*c);break}case"left":case"right":default:{const c=s>1?Math.min(a,o*s):o;r=this.maxWidth?Math.min(this.maxWidth,e):Math.round(e*c),l=this.maxHeight?Math.min(this.maxHeight,i):i}}return[r,l]}},Is.className="Legend",M([I(pt)],Is.prototype,"toggleSeries",2),M([I(ct)],Is.prototype,"pagination",2),M([I(ct)],Is.prototype,"item",2),M([I(ct)],Is.prototype,"listeners",2),M([zc((t,e,i)=>{if(t.updateGroupVisibility(),e===i)return;const{ctx:{legendManager:s,stateManager:a}}=t;i===!1&&e===!0&&a.restoreState(s)}),I(pt)],Is.prototype,"enabled",2),M([I(nm)],Is.prototype,"position",2),M([I(nt,{optional:!0})],Is.prototype,"maxWidth",2),M([I(nt,{optional:!0})],Is.prototype,"maxHeight",2),M([I(pt,{optional:!0})],Is.prototype,"reverseOrder",2),M([I(ne(["horizontal","vertical"],"an orientation"),{optional:!0})],Is.prototype,"orientation",2),M([I(pt,{optional:!0})],Is.prototype,"preventHidingAll",2),M([I(nt)],Is.prototype,"spacing",2)}}),K_,z6=A({"packages/ag-charts-community/src/chart/legend/legendModule.ts"(){"use strict";B6(),K_={type:"legend",optionsKey:"legend",identifier:"category",chartTypes:["cartesian","polar","hierarchy","topology","flow-proportion","standalone","gauge"],moduleFactory:t=>new Is(t),packageType:"community",removable:"standalone-only"}}}),X_={};Oa(X_,{CARTESIAN_AXIS_TYPE:()=>uI,CARTESIAN_POSITION:()=>hI,FONT_SIZE:()=>cI,POLAR_AXIS_SHAPE:()=>pI,POLAR_AXIS_TYPE:()=>dI});var cI,hI,uI,dI,pI,yo=A({"packages/ag-charts-community/src/chart/themes/constants.ts"(){"use strict";cI=(t=>(t[t.SMALL=12]="SMALL",t[t.MEDIUM=13]="MEDIUM",t[t.LARGE=17]="LARGE",t))(cI||{}),hI=(t=>(t.TOP="top",t.RIGHT="right",t.BOTTOM="bottom",t.LEFT="left",t))(hI||{}),uI=(t=>(t.CATEGORY="category",t.GROUPED_CATEGORY="grouped-category",t.ORDINAL_TIME="ordinal-time",t.NUMBER="number",t.TIME="time",t.LOG="log",t))(uI||{}),dI=(t=>(t.ANGLE_CATEGORY="angle-category",t.ANGLE_NUMBER="angle-number",t.RADIUS_CATEGORY="radius-category",t.RADIUS_NUMBER="radius-number",t))(dI||{}),pI=(t=>(t.CIRCLE="circle",t.POLYGON="polygon",t))(pI||{})}}),gI={};Oa(gI,{DEFAULT_ANNOTATION_BACKGROUND_FILL:()=>Ts,DEFAULT_ANNOTATION_COLOR:()=>Ls,DEFAULT_ANNOTATION_HANDLE_FILL:()=>jg,DEFAULT_ANNOTATION_STATISTICS_COLOR:()=>Ug,DEFAULT_ANNOTATION_STATISTICS_DIVIDER_STROKE:()=>Wg,DEFAULT_ANNOTATION_STATISTICS_DOWN_FILL:()=>Ux,DEFAULT_ANNOTATION_STATISTICS_DOWN_STROKE:()=>Wx,DEFAULT_ANNOTATION_STATISTICS_FILL:()=>Gg,DEFAULT_ANNOTATION_STATISTICS_STROKE:()=>Vg,DEFAULT_AXIS_GRID_COLOUR:()=>ur,DEFAULT_AXIS_LINE_COLOUR:()=>qu,DEFAULT_BACKGROUND_COLOUR:()=>td,DEFAULT_CAPTION_ALIGNMENT:()=>gr,DEFAULT_CAPTION_LAYOUT_STYLE:()=>pr,DEFAULT_COLOURS:()=>fI,DEFAULT_CROSS_LINES_COLOUR:()=>rh,DEFAULT_DIVERGING_SERIES_COLOR_RANGE:()=>ks,DEFAULT_FIBONACCI_STROKES:()=>Vx,DEFAULT_FONT_FAMILY:()=>xe,DEFAULT_FUNNEL_SERIES_COLOR_RANGE:()=>Mn,DEFAULT_GAUGE_SERIES_COLOR_RANGE:()=>ga,DEFAULT_GRIDLINE_ENABLED:()=>Dn,DEFAULT_HIERARCHY_FILLS:()=>Bg,DEFAULT_HIERARCHY_STROKES:()=>zg,DEFAULT_INSIDE_SERIES_LABEL_COLOUR:()=>cr,DEFAULT_INVERTED_BACKGROUND_COLOUR:()=>Lg,DEFAULT_INVERTED_LABEL_COLOUR:()=>Px,DEFAULT_LABEL_COLOUR:()=>$e,DEFAULT_MUTED_LABEL_COLOUR:()=>hr,DEFAULT_NAVIGATOR_STROKE:()=>Tg,DEFAULT_PADDING:()=>mo,DEFAULT_POLAR_SERIES_STROKE:()=>_g,DEFAULT_SEPARATION_LINES_COLOUR:()=>Ju,DEFAULT_SHADOW_COLOUR:()=>dr,DEFAULT_SPARKLINE_CROSSHAIR_STROKE:()=>Pg,DEFAULT_TEXTBOX_COLOR:()=>Kg,DEFAULT_TEXTBOX_FILL:()=>Hg,DEFAULT_TEXTBOX_STROKE:()=>Yg,DEFAULT_TEXT_ANNOTATION_COLOR:()=>Fg,DEFAULT_TOOLBAR_POSITION:()=>ed,IS_COMMUNITY:()=>Rx,IS_DARK_THEME:()=>oh,IS_ENTERPRISE:()=>_x,PALETTE_ALT_DOWN_FILL:()=>jx,PALETTE_ALT_DOWN_STROKE:()=>zx,PALETTE_ALT_NEUTRAL_FILL:()=>Gx,PALETTE_ALT_NEUTRAL_STROKE:()=>Rg,PALETTE_ALT_UP_FILL:()=>Fx,PALETTE_ALT_UP_STROKE:()=>Bx,PALETTE_DOWN_FILL:()=>Eg,PALETTE_DOWN_STROKE:()=>Cg,PALETTE_NEUTRAL_FILL:()=>wg,PALETTE_NEUTRAL_STROKE:()=>lh,PALETTE_UP_FILL:()=>Og,PALETTE_UP_STROKE:()=>Ng});var oh,Rx,_x,xe,$e,Px,cr,hr,ur,qu,rh,Ju,td,Lg,dr,fI,mo,pr,gr,Tg,Ng,Cg,Og,Eg,lh,wg,Bx,zx,Fx,jx,Gx,Rg,_g,ks,Pg,ga,Mn,Bg,zg,Ls,Vx,Fg,Ts,jg,Gg,Vg,Ug,Wg,Ux,Wx,Hg,Yg,Kg,ed,Dn,de=A({"packages/ag-charts-community/src/chart/themes/symbols.ts"(){"use strict";oh=Symbol("is-dark-theme"),Rx=Symbol("is-community"),_x=Symbol("is-enterprise"),xe=Symbol("default-font"),$e=Symbol("default-label-colour"),Px=Symbol("default-inverted-label-colour"),cr=Symbol("default-inside-series-label-colour"),hr=Symbol("default-muted-label-colour"),ur=Symbol("default-axis-grid-colour"),qu=Symbol("default-axis-line-colour"),rh=Symbol("default-cross-lines-colour"),Ju=Symbol("default-separation-lines-colour"),td=Symbol("default-background-colour"),Lg=Symbol("default-inverted-background-colour"),dr=Symbol("default-shadow-colour"),fI=Symbol("default-colours"),mo=Symbol("default-padding"),pr=Symbol("default-caption-layout-style"),gr=Symbol("default-caption-alignment"),Tg=Symbol("default-navigator-stroke"),Ng=Symbol("palette-up-stroke"),Cg=Symbol("palette-down-stroke"),Og=Symbol("palette-up-fill"),Eg=Symbol("palette-down-fill"),lh=Symbol("palette-neutral-stroke"),wg=Symbol("palette-neutral-fill"),Bx=Symbol("palette-alt-up-stroke"),zx=Symbol("palette-alt-down-stroke"),Fx=Symbol("palette-alt-up-fill"),jx=Symbol("palette-alt-down-fill"),Gx=Symbol("palette-gray-fill"),Rg=Symbol("palette-gray-stroke"),_g=Symbol("default-polar-series-stroke"),ks=Symbol("default-diverging-series-colour-range"),Pg=Symbol("default-sparkline-crosshair-stroke"),ga=Symbol("default-gauge-series-colour-range"),Mn=Symbol("default-funnel-series-colour-range"),Bg=Symbol("default-hierarchy-fills"),zg=Symbol("default-hierarchy-strokes"),Ls=Symbol("default-annotation-stroke"),Vx=Symbol("default-hierarchy-strokes"),Fg=Symbol("default-text-annotation-color"),Ts=Symbol("default-annotation-background-fill"),jg=Symbol("default-annotation-handle-fill"),Gg=Symbol("default-annotation-statistics-fill"),Vg=Symbol("default-annotation-statistics-stroke"),Ug=Symbol("default-annotation-statistics-color"),Wg=Symbol("default-annotation-statistics-divider-stroke"),Ux=Symbol("default-annotation-statistics-fill"),Wx=Symbol("default-annotation-statistics-stroke"),Hg=Symbol("default-textbox-fill"),Yg=Symbol("default-textbox-stroke"),Kg=Symbol("default-textbox-color"),ed=Symbol("default-toolbar-position"),Dn=Symbol("default-gridline-enabled")}});function Z_(t,e){return i=>e(i)?[{...t[0],position:t[1].position},{...t[1],position:t[0].position}]:t}function Xg({takeColors:t}){const{fills:[e],strokes:[i]}=t(1);return{fill:e,stroke:i}}function yI(t){return{marker:Xg(t)}}var id=A({"packages/ag-charts-community/src/chart/themes/util.ts"(){"use strict"}});function Hx(t,e,i,s,a){const{addPhaseFn:n,updatePhaseFn:o,removePhaseFn:r}=a,l=(c,h,u)=>{i.animate({id:`${t}_${e}_${h.id}_${c}`,groupId:t,from:0,to:1,ease:hu,collapsable:!1,onUpdate(d,p){p&&c!=="removed"||(h.path.clear(!0),u(d,h),h.checkPathDirty())},onStop(){c==="added"&&(h.path.clear(!0),u(1,h),h.checkPathDirty())},phase:Vi[c]})};for(const c of s)i.isSkipped()||(l("removed",c,r),l("updated",c,o)),l("added",c,n)}var mI=A({"packages/ag-charts-community/src/motion/pathMotion.ts"(){"use strict";uu(),Ii()}});function Gt({id:t},e,i,...s){Yn(t,e,i,s,{opacity:0},{opacity:1},{phase:"trailing"})}function Nl({id:t},e,i,...s){Yn(t,e,i,s,{opacity:1},{opacity:0},{phase:"remove"})}function fr(t){return{opacity:1}}var yr=A({"packages/ag-charts-community/src/chart/series/seriesLabelUtil.ts"(){"use strict";Ii()}}),Yx,xI=A({"packages/ag-charts-community/src/scene/util/changeDetectableProperties.ts"(){"use strict";Jt(),Yx=class extends Mt{constructor(){super(...arguments),this._dirty=!0}markDirty(){this._dirty=!0}markClean(t){this._dirty=!1}isDirty(){return this._dirty}}}}),Ha,sd=A({"packages/ag-charts-community/src/scene/dropShadow.ts"(){"use strict";xt(),ae(),xI(),Ha=class extends Yx{constructor(){super(...arguments),this.enabled=!0,this.color="rgba(0, 0, 0, 0.5)",this.xOffset=0,this.yOffset=0,this.blur=5}},M([I(pt),ht()],Ha.prototype,"enabled",2),M([I(jt),ht()],Ha.prototype,"color",2),M([I(wt),ht()],Ha.prototype,"xOffset",2),M([I(wt),ht()],Ha.prototype,"yOffset",2),M([I(nt),ht()],Ha.prototype,"blur",2)}}),bI,Ns,Zg=A({"packages/ag-charts-community/src/chart/series/seriesMarker.ts"(){"use strict";RM(),xI(),xt(),co(),bI=Kt(t=>$R(t)||typeof t=="function","a marker shape keyword such as 'circle', 'diamond' or 'square' or an object extending the Marker class"),Ns=class extends Yx{constructor(){super(...arguments),this.enabled=!0,this.shape="circle",this.size=6,this.fillOpacity=1,this.strokeWidth=1,this.strokeOpacity=1}getStyle(){const{size:t,shape:e,fill:i,fillOpacity:s,stroke:a,strokeWidth:n,strokeOpacity:o}=this;return{size:t,shape:e,fill:i,fillOpacity:s,stroke:a,strokeWidth:n,strokeOpacity:o}}getDiameter(){return this.size+this.strokeWidth}},M([I(pt),ht()],Ns.prototype,"enabled",2),M([I(bI),ht()],Ns.prototype,"shape",2),M([I(nt),ht()],Ns.prototype,"size",2),M([I(jt,{optional:!0}),ht()],Ns.prototype,"fill",2),M([I(Ft),ht()],Ns.prototype,"fillOpacity",2),M([I(jt,{optional:!0}),ht()],Ns.prototype,"stroke",2),M([I(nt),ht()],Ns.prototype,"strokeWidth",2),M([I(Ft),ht()],Ns.prototype,"strokeOpacity",2),M([I(Yi,{optional:!0}),ht()],Ns.prototype,"itemStyler",2)}}),SI,Ei,mr=A({"packages/ag-charts-community/src/chart/series/seriesTooltip.ts"(){"use strict";Jt(),xt(),Vs(),SI=class extends Mt{constructor(){super(...arguments),this.enabled=!1}},M([I(pt)],SI.prototype,"enabled",2),Ei=class extends Mt{constructor(){super(...arguments),this.enabled=!0,this.interaction=new SI,this.position=new th,this.range=void 0,this.class=void 0}formatTooltip(t,e){const i=this.renderer?.(e);return typeof i=="string"?i:i!=null?{...t,...i}:t}},M([I(pt)],Ei.prototype,"enabled",2),M([I(pt,{optional:!0})],Ei.prototype,"showArrow",2),M([I(Yi,{optional:!0})],Ei.prototype,"renderer",2),M([I(ct)],Ei.prototype,"interaction",2),M([I(ct)],Ei.prototype,"position",2),M([I(wp,{optional:!0})],Ei.prototype,"range",2),M([I(J,{optional:!0})],Ei.prototype,"class",2)}}),vI,MI,ch,DI=A({"packages/ag-charts-community/src/chart/series/cartesian/interpolationProperties.ts"(){"use strict";Jt(),xt(),vI=ne(["linear","smooth","step"],"a line style"),MI=ne(["start","middle","end"]),ch=class extends Mt{constructor(){super(...arguments),this.type="linear",this.tension=1,this.position="end"}},M([I(vI)],ch.prototype,"type",2),M([I(Ft)],ch.prototype,"tension",2),M([I(MI)],ch.prototype,"position",2)}}),_e,F6=A({"packages/ag-charts-community/src/chart/series/cartesian/areaSeriesProperties.ts"(){"use strict";sd(),xt(),Fa(),Zg(),mr(),Ws(),DI(),_e=class extends uo{constructor(){super(...arguments),this.xName=void 0,this.fill="#c16068",this.fillOpacity=1,this.stroke="#874349",this.strokeWidth=2,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.interpolation=new ch,this.shadow=new Ha,this.marker=new Ns,this.label=new Ke,this.tooltip=new Ei,this.connectMissingData=!1}},M([I(J)],_e.prototype,"xKey",2),M([I(J,{optional:!0})],_e.prototype,"xName",2),M([I(J)],_e.prototype,"yKey",2),M([I(J,{optional:!0})],_e.prototype,"yName",2),M([I(J,{optional:!0})],_e.prototype,"yFilterKey",2),M([I(nt,{optional:!0})],_e.prototype,"normalizedTo",2),M([I(jt)],_e.prototype,"fill",2),M([I(Ft)],_e.prototype,"fillOpacity",2),M([I(jt)],_e.prototype,"stroke",2),M([I(nt)],_e.prototype,"strokeWidth",2),M([I(Ft)],_e.prototype,"strokeOpacity",2),M([I(Qn)],_e.prototype,"lineDash",2),M([I(nt)],_e.prototype,"lineDashOffset",2),M([I(ct)],_e.prototype,"interpolation",2),M([I(ct)],_e.prototype,"shadow",2),M([I(ct)],_e.prototype,"marker",2),M([I(ct)],_e.prototype,"label",2),M([I(ct)],_e.prototype,"tooltip",2),M([I(pt)],_e.prototype,"connectMissingData",2)}});function xo(t){switch(t.type){case"linear":case"step":return[{x:t.x0,y:t.y0},{x:t.x1,y:t.y1}];case"cubic":return[{x:t.cp0x,y:t.cp0y},{x:t.cp3x,y:t.cp3y}]}}function j6(t){const e=xo(t);return e[0].x>e[1].x&&e.reverse(),e}function G6(t,e){const{x:i,y:s}=e;switch(t.type){case"linear":return{type:"linear",moveTo:t.moveTo,x0:i,y0:s,x1:i,y1:s};case"step":return{type:"step",moveTo:t.moveTo,x0:i,y0:s,x1:i,y1:s,stepX:i};case"cubic":return{type:"cubic",moveTo:t.moveTo,cp0x:i,cp0y:s,cp1x:i,cp1y:s,cp2x:i,cp2y:s,cp3x:i,cp3y:s}}}function $g(t,e,i){const[s,a]=xo(t),n=a.x!==s.x?(i.x-e.x)/(a.x-s.x):0,o=a.y!==s.y?(i.y-e.y)/(a.y-s.y):0;switch(t.type){case"linear":return{type:"linear",moveTo:t.moveTo,x0:e.x,y0:e.y,x1:i.x,y1:i.y};case"cubic":return{type:"cubic",moveTo:t.moveTo,cp0x:e.x,cp0y:e.y,cp1x:i.x-(t.cp2x-s.x)*n,cp1y:i.y-(t.cp2y-s.y)*o,cp2x:i.x-(t.cp1x-s.x)*n,cp2y:i.y-(t.cp1y-s.y)*o,cp3x:i.x,cp3y:i.y};case"step":return{type:"step",moveTo:t.moveTo,x0:e.x,y0:e.y,x1:i.x,y1:i.y,stepX:i.x-(t.stepX-s.x)*n}}}function $_(t,e,i){const{moveTo:s}=t,[a,n]=j6(t),{x:o,y:r}=a,{x:l,y:c}=n;if(i<o)return $g(t,a,a);if(e>l)return $g(t,n,n);switch(t.type){case"linear":{const h=r===c?void 0:(c-r)/(l-o),u=h==null?r:h*(e-o)+r,d=h==null?r:h*(i-o)+r;return{type:"linear",moveTo:s,x0:e,y0:u,x1:i,y1:d}}case"step":if(i<=t.stepX){const h=t.y0;return{type:"step",moveTo:s,x0:e,y0:h,x1:i,y1:h,stepX:i}}else if(e>=t.stepX){const h=t.y1;return{type:"step",moveTo:s,x0:e,y0:h,x1:i,y1:h,stepX:e}}else{const{y0:h,y1:u,stepX:d}=t;return{type:"step",moveTo:s,x0:e,y0:h,x1:i,y1:u,stepX:d}}case"cubic":{const h=px(t.cp0x,t.cp1x,t.cp2x,t.cp3x,e);let[u,d]=gx(t.cp0x,t.cp0y,t.cp1x,t.cp1y,t.cp2x,t.cp2y,t.cp3x,t.cp3y,h);const p=px(d[0].x,d[1].x,d[2].x,d[3].x,i);return[d,u]=gx(d[0].x,d[0].y,d[1].x,d[1].y,d[2].x,d[2].y,d[3].x,d[3].y,p),{type:"cubic",moveTo:s,cp0x:d[0].x,cp0y:d[0].y,cp1x:d[1].x,cp1y:d[1].y,cp2x:d[2].x,cp2y:d[2].y,cp3x:d[3].x,cp3y:d[3].y}}}}function V6(t){const e=[];let i=0,s=NaN,a=NaN;for(const{x:n,y:o}of t){if(i>0){const r=i===1;e.push({type:"linear",moveTo:r,x0:s,y0:a,x1:n,y1:o})}i+=1,s=n,a=o}return e}function U6(t,e){const i=[];let s=0,a=NaN,n=NaN;const o=typeof e=="number"?e:Q_[e];for(const{x:r,y:l}of t){if(s>0){const c=s===1,h=a+(r-a)*o;i.push({type:"step",moveTo:c,x0:a,y0:n,x1:r,y1:l,stepX:h})}s+=1,a=r,n=l}return i}function W6(t,e){const i=Array.isArray(t)?t:Array.from(t);if(i.length<=1)return[];const s=i.map((n,o)=>{const r=o===0?n:i[o-1],l=o===i.length-1?n:i[o+1],c=o===0||o===i.length-1;if(Math.sign(r.y-n.y)===Math.sign(l.y-n.y))return 0;if(!c){const h=Math.abs(r.y-l.y),u=Math.abs(n.y-r.y)/h,d=Math.abs(n.y-l.y)/h;if(u<=Qg||1-u<=Qg||d<=Qg||1-d<=Qg)return 0}return(l.y-r.y)/(l.x-r.x)});s[1]===0&&(s[0]*=2),s[s.length-2]===0&&(s[s.length-1]*=2);const a=[];for(let n=1;n<i.length;n+=1){const o=i[n-1],r=s[n-1],l=i[n],c=s[n],h=l.x-o.x,u=l.y-o.y;let d=h*e/3,p=h*r*e/3,g=h*e/3,f=h*c*e/3;c===0&&Math.abs(p)>Math.abs(u)&&(d*=Math.abs(u/p),p=Math.sign(p)*Math.abs(u)),r===0&&Math.abs(f)>Math.abs(u)&&(g*=Math.abs(u/f),f=Math.sign(f)*Math.abs(u)),a.push({type:"cubic",moveTo:n===1,cp0x:o.x,cp0y:o.y,cp1x:o.x+d,cp1y:o.y+p,cp2x:l.x-g,cp2y:l.y-f,cp3x:l.x,cp3y:l.y})}return a}var Q_,Qg,Kx=A({"packages/ag-charts-community/src/chart/series/cartesian/lineInterpolation.ts"(){"use strict";fx(),Q_={start:0,middle:.5,end:1},Qg=.05}});function Qe(t,e,i){return(e-t)*i+t}function H6(t,e){const{x0:i,y0:s,x1:a,y1:n}=t,r=(n-s)/(a-i)*(e-i)+s;return{leftCp1x:i,leftCp1y:s,leftCp2x:e,leftCp2y:r,stepX:e,stepY0:r,stepY1:r,rightCp1x:e,rightCp1y:r,rightCp2x:a,rightCp2y:n}}function Y6(t,e){const{cp0x:i,cp0y:s,cp1x:a,cp1y:n,cp2x:o,cp2y:r,cp3x:l,cp3y:c}=t,h=px(i,a,o,l,e),[u,d]=gx(i,s,a,n,o,r,l,c,h),p=u[3].y;return{leftCp1x:u[1].x,leftCp1y:u[1].y,leftCp2x:u[2].x,leftCp2y:u[2].y,stepX:e,stepY0:p,stepY1:p,rightCp1x:d[1].x,rightCp1y:d[1].y,rightCp2x:d[2].x,rightCp2y:d[2].y}}function K6(t){const{x0:e,y0:i,x1:s,y1:a,stepX:n}=t;return{leftCp1x:(e+n)/2,leftCp1y:i,leftCp2x:(e+n)/2,leftCp2y:i,stepX:n,stepY0:i,stepY1:a,rightCp1x:(n+s)/2,rightCp1y:a,rightCp2x:(n+s)/2,rightCp2y:a}}function q_(t,e){return t.type==="linear"?H6(t,e):t.type==="cubic"?Y6(t,e):K6(t)}function J_(t,e,i,s,a,n,o){switch(e){case 0:o?t.moveTo(a,n):t.moveTo(i,s);break;case 1:o?t.lineTo(a,n):t.lineTo(i,s);break}}function t1(t,e,i,s,a,n){n?t.lineTo(e,i):t.lineTo(s,a)}function e1(t,e,i,s,a,n,o,r,l,c){c?t.cubicCurveTo(n,o,s,a,e,i):t.cubicCurveTo(s,a,n,o,r,l)}function i1(t,e,i,s,a,n,o){o?(t.lineTo(n,a),t.lineTo(n,i),t.lineTo(e,i)):(t.lineTo(n,i),t.lineTo(n,a),t.lineTo(s,a))}function AI(t,e,i,s){const[a,n]=xo(e);switch(J_(t,i,a.x,a.y,n.x,n.y,s),e.type){case"linear":t1(t,e.x0,e.y0,e.x1,e.y1,s);break;case"cubic":e1(t,e.cp0x,e.cp0y,e.cp1x,e.cp1y,e.cp2x,e.cp2y,e.cp3x,e.cp3y,s);break;case"step":i1(t,e.x0,e.y0,e.x1,e.y1,e.stepX,s);break}}function s1(t,e,i){const[s,a]=xo(t),[n,o]=xo(e),r=Qe(s.x,n.x,i),l=Qe(s.y,n.y,i),c=Qe(a.x,o.x,i),h=Qe(a.y,o.y,i);return[{x:r,y:l},{x:c,y:h}]}function II(t,e,i,s,a,n){const[{x:o,y:r},{x:l,y:c}]=s1(e,i,s);if(J_(t,a,o,r,l,c,n),e.type==="cubic"&&i.type==="cubic"){const h=Qe(e.cp1x,i.cp1x,s),u=Qe(e.cp1y,i.cp1y,s),d=Qe(e.cp2x,i.cp2x,s),p=Qe(e.cp2y,i.cp2y,s);e1(t,o,r,h,u,d,p,l,c,n)}else if(e.type==="step"&&i.type==="step"){const h=Qe(e.stepX,i.stepX,s);i1(t,o,r,l,c,h,n)}else if(e.type==="linear"&&i.type==="linear")t1(t,o,r,l,c,n);else{let h;e.type==="step"?h=e.stepX:i.type==="step"?h=i.stepX:h=(o+l)/2;const u=q_(e,h),d=q_(i,h),p=Qe(u.leftCp1x,d.leftCp1x,s),g=Qe(u.leftCp1y,d.leftCp1y,s),f=Qe(u.leftCp2x,d.leftCp2x,s),x=Qe(u.leftCp2y,d.leftCp2y,s),m=Qe(u.stepX,d.stepX,s),b=Qe(u.stepY0,d.stepY0,s),v=Qe(u.stepY1,d.stepY1,s),S=Qe(u.rightCp1x,d.rightCp1x,s),D=Qe(u.rightCp1y,d.rightCp1y,s),k=Qe(u.rightCp2x,d.rightCp2x,s),L=Qe(u.rightCp2y,d.rightCp2y,s);n?(t.cubicCurveTo(k,L,S,D,m,v),t.lineTo(m,b),t.cubicCurveTo(f,x,p,g,o,r)):(t.cubicCurveTo(p,g,f,x,m,b),t.lineTo(m,v),t.cubicCurveTo(S,D,k,L,l,c))}}var a1=A({"packages/ag-charts-community/src/chart/series/cartesian/lineInterpolationPlotting.ts"(){"use strict";fx(),Kx()}});function X6(t,e){return t==null||e==null||typeof t!="object"||typeof e!="object"?!1:"id"in t&&"id"in e?t.id===e.id:t.toString()===e.toString()}function ts(t,e){if(!e)return NaN;if(t instanceof Date&&(t=t.getTime()),e.type==="continuous"&&typeof t=="number")return(t-e.domain[0])/(e.domain[1]-e.domain[0])*(e.range[1]-e.range[0])+e.range[0];if(e.type==="log"&&typeof t=="number")return e.convert(t);if(e.type!=="category")return NaN;const i=e.domain.findIndex(a=>a===t);return i>=0||e.domain.findIndex(a=>X6(t,a))>=0?e.inset+e.step*i:NaN}function Ya(t){return J0(t).valueOf()}function n1({data:t},e){return t.map((i,s)=>({xValue0Index:e.indexOf(Ya(i.xValue0)),xValue1Index:e.indexOf(Ya(i.xValue1)),datumIndex:s}))}function Z6(t,e){const i=e.scales.x,s=t.scales.x;if(i?.type!=="category"||s?.type!=="category")return!0;let a=-1/0;for(const n of i.domain){const o=ts(n,s);if(Number.isFinite(o)){if(o<a)return!1;a=o}else continue}return!0}function $6(t,e){let i=-1/0;for(const s of t){const a=ts(s.value,e.scales.x);if(Number.isFinite(a)){if(a<i)return!1;i=a}else continue}return!0}function Q6(t,e){const i=new Map;for(const{xValue0:h,xValue1:u}of t.data){const d=Ya(h),p=Ya(u);i.set(d,h).set(p,u)}const s=Array.from(i,([h,u])=>({axisValue:h,value:u}));s.sort((h,u)=>ts(h.value,t.scales.x)-ts(u.value,t.scales.x));const a=[];for(const{xValue0:h,xValue1:u}of e.data){const d=Ya(h),p=Ya(u);i.has(d)||(i.set(d,h),a.push({axisValue:d,value:h})),i.has(p)||(i.set(p,u),a.push({axisValue:p,value:u}))}a.sort((h,u)=>ts(h.value,e.scales.x)-ts(u.value,e.scales.x));const n=s;let o=0;for(const h of a){for(let u=n.length-1;u>o;u-=1){const d=ts(h.value,e.scales.x),p=ts(n[u].value,e.scales.x);if(d>p){o=u+1;break}}n.splice(o,0,h),o+=1}if(!$6(n,e))return;const r=n.map(h=>h.axisValue),l=n1(e,r),c=n1(t,r);return{axisValues:r,oldDataAxisIndices:l,newDataAxisIndices:c}}function o1(t,e,i){if(i.xValue1Index===i.xValue0Index+1)return t;const s=xo(t),a=(s[1].x-s[0].x)/(i.xValue1Index-i.xValue0Index),n=s[0].x+(e-i.xValue0Index)*a,o=n+a;return $_(t,n,o)}function r1(t,e){const[i,s]=xo(t),a=ts(0,e.scales.y);return $g(t,{x:i.x,y:a},{x:s.x,y:a})}function l1(t){const[e,i]=xo(t);return G6(t,{x:(e.x+i.x)/2,y:(e.y+i.y)/2})}function c1(t,e,i,s,a,n){let o,r;if(a.xValue0Index>=n.xValue1Index){const u=s.findLast(p=>p.xValue1Index<=n.xValue1Index)?.datumIndex,d=u!=null?i.data[u]:void 0;o=d?.xValue1,r=d?.yValue1}else if(a.xValue0Index<=n.xValue0Index){const u=s.find(p=>p.xValue0Index>=n.xValue0Index)?.datumIndex,d=u!=null?i.data[u]:void 0;o=d?.xValue0,r=d?.yValue0}if(o==null||r==null)switch(e){case 0:return r1(t,i);case 1:return l1(t)}const l=ts(o,i.scales.x),c=ts(r,i.scales.y),h={x:l,y:c};return $g(t,h,h)}function kI(t,e){if(e==null)return;const i=Ya(t.xValue0),s=Ya(t.xValue1);return e.find(a=>Ya(a.xValue0)===i&&Ya(a.xValue1)===s)?.span}function h1(t,e,i,s,a,n,o){const r=t.data[s.datumIndex],l=r.span,c=kI(r,a);if(c!=null)o.removed.push({from:c,to:c}),o.moved.push({from:c,to:l}),o.added.push({from:l,to:l});else{const h=c1(l,e,t,i,s,n);o.added.push({from:h,to:l})}}function u1(t,e,i,s,a,n,o){const r=t.data[s.datumIndex],l=r.span,c=kI(r,a);if(c!=null)o.removed.push({from:l,to:l}),o.moved.push({from:l,to:c}),o.added.push({from:c,to:c});else{const h=c1(l,e,t,i,s,n);o.removed.push({from:l,to:h})}}function d1(t,e,i,s,a){const n=e[a.xValue0Index],o=i.data.find(x=>Ya(x.xValue0)===n),r=e[a.xValue1Index],l=i.data.find(x=>Ya(x.xValue1)===r);if(o==null||l==null)return;const[{x:c},{x:h}]=xo(t),u=ts(o.xValue0,i.scales.x),d=ts(o.yValue0,i.scales.y),p=ts(l.xValue1,i.scales.x),g=ts(l.yValue1,i.scales.y);let f=s.data[a.datumIndex].span;return f=$g(f,{x:u,y:d},{x:p,y:g}),f=$_(f,c,h),f}function q6(t,e,i,s,a,n,o,r,l){const c=a+1,h=o.find(v=>v.xValue0Index<=a&&v.xValue1Index>=c),u=n.find(v=>v.xValue0Index<=a&&v.xValue1Index>=c),d=e.zeroData,p=t.zeroData;if(h==null&&u!=null){h1(t,i,n,u,d,r,l);return}else if(h!=null&&u==null){u1(e,i,o,h,p,r,l);return}else if(h==null||u==null)return;let g;h.xValue0Index===u.xValue0Index&&h.xValue1Index===u.xValue1Index?g=0:h.xValue0Index<=u.xValue0Index&&h.xValue1Index>=u.xValue1Index?g=-1:h.xValue0Index>=u.xValue0Index&&h.xValue1Index<=u.xValue1Index?g=1:g=0;const f=e.data[h.datumIndex],x=o1(f.span,a,h),m=t.data[u.datumIndex],b=o1(m.span,a,u);if(g===1){const v=d1(x,s,e,t,u);v!=null?(l.removed.push({from:x,to:v}),l.moved.push({from:v,to:b}),l.added.push({from:b,to:b})):u1(e,i,o,h,p,r,l)}else if(g===-1){const v=d1(b,s,t,e,h);v!=null?(l.removed.push({from:x,to:x}),l.moved.push({from:x,to:v}),l.added.push({from:v,to:b})):h1(t,i,n,u,d,r,l)}else l.removed.push({from:x,to:x}),l.moved.push({from:x,to:b}),l.added.push({from:b,to:b})}function J6(t,e,i,s){const a={removed:[],moved:[],added:[]},{axisValues:n,oldDataAxisIndices:o,newDataAxisIndices:r}=t,l={xValue0Index:Math.max(o.at(0)?.xValue0Index??-1/0,r.at(0)?.xValue0Index??-1/0),xValue1Index:Math.min(o.at(-1)?.xValue1Index??1/0,r.at(-1)?.xValue1Index??1/0)};for(let c=0;c<n.length-1;c+=1)q6(e,i,s,n,c,r,o,l,a);return a}function p1(t,e,i){const{span:s}=e;switch(i){case 0:return kI(e,t.zeroData)??r1(s,t);case 1:return l1(s)}}function t9(t,e,i){const s=[],a=[];for(const n of e.data){const o=n.span,r=p1(e,n,i);a.push({from:o,to:r})}for(const n of t.data){const o=n.span,r=p1(t,n,i);s.push({from:r,to:o})}return{removed:a,moved:[],added:s}}function qg(t,e,i){if(!Z6(t,e))return;const s=Q6(t,e);return s==null?t9(t,e,i):J6(s,t,e,i)}var LI,TI=A({"packages/ag-charts-community/src/chart/series/cartesian/lineInterpolationUtil.ts"(){"use strict";Kp(),Kx(),LI=(t=>(t[t.Zero=0]="Zero",t[t.Split=1]="Split",t))(LI||{})}});function g1(t){return t.type==="continuous"||t.type==="log"}function f1(t){return t.type==="category"}function ad(t,e){return t===void 0||e===void 0?t!==void 0||e!==void 0:g1(t)&&g1(e)?t.type===e.type&&sl(t.domain,e.domain)&&sl(t.range,e.range):f1(t)&&f1(e)?t.inset===e.inset&&t.step===e.step&&sl(t.domain,e.domain):!1}function Jg(t){return t==null?!1:t.type==="category"?t.domain.every(e=>e!=null):t.domain.every(e=>Number.isFinite(e)||e instanceof Date)&&t.range.every(e=>Number.isFinite(e))}var Xx=A({"packages/ag-charts-community/src/chart/series/cartesian/scaling.ts"(){"use strict";Ue()}});function Zx(t,e){let i;const s=t.map(a=>a.point);switch(e.type){case"linear":i=V6(s);break;case"smooth":i=W6(s,e.tension);break;case"step":i=U6(s,e.position);break}return i.map((a,n)=>({span:a,xValue0:t[n].xDatum,yValue0:t[n].yDatum,xValue1:t[n+1].xDatum,yValue1:t[n+1].yDatum}))}function y1(t,e,i=.001){return Math.abs(t.x-e.x)<i&&Math.abs(t.y-e.y)<i}function NI({path:t},e){let i;for(const{span:s}of e){const[a,n]=xo(s),o=i!=null&&y1(i,a)?1:0;AI(t,s,o,!1),i=n}}function $x(t,e,i){let s;for(const a of i){const[n,o]=s1(a.from,a.to,t),r=s!=null&&y1(s,n)?1:0;II(e.path,a.from,a.to,t,r,!1),s=o}}function CI(t,e,i){const s=(r,l)=>$x(r,l,e.removed),a=(r,l)=>$x(r,l,e.moved),n=(r,l)=>$x(r,l,e.added),o=OI(t,i);return{status:t,path:{addPhaseFn:n,updatePhaseFn:a,removePhaseFn:s},pathProperties:o}}function OI(t,e){const i=e==="none"?"updated":t,s={fromFn:a=>{let n;return t==="removed"?n={finish:{visible:!1}}:t==="added"?n={start:{visible:!0}}:n={},{phase:Vi[i],...n}},toFn:a=>({phase:Vi[i]})};return e==="fade"?{fromFn:a=>({opacity:t==="added"?0:a.opacity,...s.fromFn(a)}),toFn:a=>({opacity:t==="removed"?0:1,...s.toFn(a)})}:s}function m1(t,e,i){const s=t.scales.x?.type==="category",a=e.scales.x?.type==="category";if(s!==a||!Jg(t.scales.x)||!Jg(e.scales.x)||t.strokeData==null||e.strokeData==null)return;let n="updated";e.visible&&!t.visible?n="removed":!e.visible&&t.visible&&(n="added");const o=qg({scales:t.scales,data:t.strokeData.spans},{scales:e.scales,data:e.strokeData.spans},1);if(o==null)return;const r=CI(n,o,"fade"),l=(i?.changed??!0)||!ad(t.scales.x,e.scales.x)||!ad(t.scales.y,e.scales.y)||n!=="updated";return{status:n,stroke:r,hasMotion:l}}var Qx=A({"packages/ag-charts-community/src/chart/series/cartesian/lineUtil.ts"(){"use strict";Ii(),Kx(),a1(),TI(),Xx()}});function x1({path:t},{spans:e,phantomSpans:i}){for(let s=0;s<e.length;s+=1){const{span:a}=e[s],n=i[s].span;AI(t,a,0,!1),AI(t,n,1,!0),t.closePath()}}function qx(t,{path:e},i,s){for(let a=0;a<i.length;a+=1){const n=i[a],o=s[a];II(e,n.from,n.to,t,0,!1),II(e,o.from,o.to,t,1,!0),e.closePath()}}function b1(t,e,i,s){const a=(l,c)=>qx(l,c,e.removed,i.removed),n=(l,c)=>qx(l,c,e.moved,i.moved),o=(l,c)=>qx(l,c,e.added,i.added),r=OI(t,s);return{status:t,path:{addPhaseFn:o,updatePhaseFn:n,removePhaseFn:a},pathProperties:r}}function S1(t,e){const i=t.scales.x?.type==="category",s=e.scales.x?.type==="category";if(i!==s||!Jg(t.scales.x)||!Jg(e.scales.x))return;let a="updated";e.visible&&!t.visible?a="removed":!e.visible&&t.visible&&(a="added");const n=qg({scales:t.scales,data:t.fillData.spans},{scales:e.scales,data:e.fillData.spans},0);if(n==null)return;const o=qg({scales:t.scales,data:t.fillData.phantomSpans},{scales:e.scales,data:e.fillData.phantomSpans},0);if(o==null)return;const r=qg({scales:t.scales,data:t.strokeData.spans,zeroData:t.fillData.phantomSpans},{scales:e.scales,data:e.strokeData.spans,zeroData:e.fillData.phantomSpans},0);if(r==null)return;const l="none",c=b1(a,n,o,l),h=CI(a,r,l);return{status:a,fill:c,stroke:h}}var v1=A({"packages/ag-charts-community/src/chart/series/cartesian/areaUtil.ts"(){"use strict";Kx(),a1(),TI(),Qx(),Xx()}});function tf({id:t},e,i,...s){const a={phase:i?Vi[i]:"trailing"};Yn(t,"markers",e,s,{opacity:0},{opacity:1},a),s.forEach(n=>n.cleanup())}function EI({id:t},e,...i){Yn(t,"markers",e,i,{scalingX:0,scalingY:0},{scalingX:1,scalingY:1},{phase:"initial"}),i.forEach(s=>s.cleanup())}function wI({id:t,nodeDataDependencies:e},i,...s){const a=e.seriesRectWidth;De(t,"markers",i,s,{fromFn:(r,l)=>{const c=l.midPoint?.x??a;let h=At(0,WM(c/a),1);return isNaN(h)&&(h=0),{scalingX:0,scalingY:0,delay:h,duration:Sp,phase:"initial"}},toFn:()=>({scalingX:1,scalingY:1})})}function ef(t){return{opacity:1,scalingX:1,scalingY:1}}function sf(t,e){return{translationX:e.point?.x??NaN,translationY:e.point?.y??NaN}}function e9(t,e){const i=(o,r)=>{const l=t[r][o];return Array.isArray(l)?l[0]:l},s=o=>{const{xValue:r}=o;return t.moved[r]?{point:i(r,"moved"),status:"updated"}:t.removed[r]?{point:i(r,"removed"),status:"removed"}:t.added[r]?{point:i(r,"added"),status:"added"}:{status:"unknown"}};return{fromFn:(o,r)=>{const{status:l,point:c}=s(r);if(l==="unknown")return{opacity:0};const h={translationX:c?.from?.x??o.translationX,translationY:c?.from?.y??o.translationY,opacity:o.opacity,phase:Vi[l]};return e==="added"?{...h,opacity:0,translationX:c?.to?.x,translationY:c?.to?.y,phase:Vi.added}:(l==="added"&&(h.opacity=0),h)},toFn:(o,r)=>{const{status:l,point:c}=s(r);if(l==="unknown")return{opacity:0};const h={translationX:r.point.x,translationY:r.point.y,opacity:1,phase:Vi[l]};return l==="removed"||e==="removed"?{...h,translationX:c?.to?.x,translationY:c?.to?.y,opacity:0,phase:Vi.removed}:h}}}function af(t,{datumIndex:e}){const i=t.getNodeData();if(i===void 0)return;const s=i[e],{point:a}=s;if(s==null||a==null)return;const n=a.focusSize??t.getFormattedMarkerStyle(s).size,o=n/2,r=s.point.x-o,l=s.point.y-o;return new lt(r,l,n,n)}var nf=A({"packages/ag-charts-community/src/chart/series/cartesian/markerUtil.ts"(){"use strict";Ac(),Ii(),kt(),It(),uu()}});function i9(t,e,i){let s=i;for(const{x:a,y:n}of e)s?t.lineTo(a,n):(t.moveTo(a,n),s=!0)}function s9(t,e,i,s){const a=Array.isArray(e)?e:Array.from(e);if(a.length===0||(s?t.lineTo(a[0].x,a[0].y):t.moveTo(a[0].x,a[0].y),a.length<=1))return;const n=a.map((o,r)=>{const l=r===0?o:a[r-1],c=r===a.length-1?o:a[r+1],h=r===0||r===a.length-1;if(Math.sign(l.y-o.y)===Math.sign(c.y-o.y))return 0;if(!h){const u=Math.abs(l.y-c.y),d=Math.abs(o.y-l.y)/u,p=Math.abs(o.y-c.y)/u;if(d<=of||1-d<=of||p<=of||1-p<=of)return 0}return(c.y-l.y)/(c.x-l.x)});n[1]===0&&(n[0]*=2),n[n.length-2]===0&&(n[n.length-1]*=2);for(let o=1;o<a.length;o+=1){const r=a[o-1],l=n[o-1],c=a[o],h=n[o],u=c.x-r.x,d=c.y-r.y;let p=u*i/3,g=u*l*i/3,f=u*i/3,x=u*h*i/3;h===0&&Math.abs(g)>Math.abs(d)&&(p*=Math.abs(d/g),g=Math.sign(g)*Math.abs(d)),l===0&&Math.abs(x)>Math.abs(d)&&(f*=Math.abs(d/x),x=Math.sign(x)*Math.abs(d)),t.cubicCurveTo(r.x+p,r.y+g,c.x-f,c.y-x,c.x,c.y)}}function a9(t,e,i,s){let a;for(const n of e){if(a!=null){const o=a.x<n.x?i:1-i,r=(n.x-a.x)*o+a.x;t.lineTo(r,a?.y??n.y),t.lineTo(r,n.y),t.lineTo(n.x,n.y)}else s?t.lineTo(n.x,n.y):t.moveTo(n.x,n.y);a=n}}var of,n9=A({"packages/ag-charts-community/src/chart/series/cartesian/linePlotter.ts"(){"use strict";of=.05}});function o9(t){return t.reduce(({min:e,max:i},s)=>((e==null||e.point.x>s.point.x)&&(e=s),(i==null||i.point.x<s.point.x)&&(i=s),{min:e,max:i}),{})}function M1(t,e,i){const s=(e.y-t.y)/(e.x-t.x),a=(i-t.x)*s+t.y;return{x:i,y:a}}function D1(t,e,i,s){let a=-1,n=0;const o=[];for(;n<t.length;){if(t[n].change===e){o.push(t[n]),n++;continue}if(t[n].change===i){n++;continue}o.length>0&&(s(o,a,n),o.length=0),a=n,n++}o.length>0&&s(o,a,n)}function r9(t,e){D1(t,"out","in",(i,s,a)=>{s===-1&&t[a]?i.forEach(n=>n.to=t[a].from):a===t.length&&t[s]?i.forEach(n=>n.to=t[s].from):e==="intersect"&&t[s]?.from&&t[a]?.from?i.forEach(n=>n.to=M1(t[s].from,t[a].from,n.from.x)):i.forEach(n=>n.to=n.from)}),D1(t,"in","out",(i,s,a)=>{s===-1&&t[a]?i.forEach(n=>n.from=t[a].to):a===t.length&&t[s]?i.forEach(n=>n.from=t[s].to):e==="intersect"&&t[s]?.to&&t[a]?.to?i.forEach(n=>n.from=M1(t[s].to,t[a].to,n.to.x)):i.forEach(n=>n.from=n.to)})}function A1(t,e,i){const s=isNaN(t.x)?e.x:t.x,a=isNaN(t.y)?e.y:t.y,n=e.x-t.x,o=e.y-t.y,r=isNaN(n)?0:n*i,l=isNaN(o)?0:o*i;return{x:s+r,y:a+l}}function I1(t,e,i,s=!1){const{path:a}=e;i?.type==="smooth"?s9(a,t,i.tension??1,s):i?.type==="step"?a9(a,t,L1[i.position??"end"],s):i9(a,t,s)}function k1(t,e){let i,s;const a=[],n=()=>{s!=null&&(a.push(s),s=void 0)};for(const o of t){const{from:r,to:l}=o,c=e[o.change];if(c==null||r==null||l==null)continue;const h=A1(r,l,c);if(o.moveTo===!1)s??(s=[]),s.push(h);else if(o.moveTo===!0||!i)n(),s=[h];else if(i){const u=o.moveTo==="in"?c:1-c,{x:d,y:p}=A1(i,h,u);s??(s=[]),s.push({x:d,y:p}),n(),s=[h]}i=h}return n(),a}function l9(t,e,i,s){k1(t,e).forEach(a=>{I1(a,i,s)})}function RI({id:t,visible:e,nodeDataDependencies:i},s,...a){const{seriesRectWidth:n,seriesRectHeight:o}=i;Yn(t,"path_properties",s,a,{clipX:0},{clipX:n},{phase:"initial",start:{clip:!0,clipY:o,visible:e},finish:{clip:!1,visible:e}})}function Jx({id:t},e,i,s="add",...a){Yn(t,e,i,a,{opacity:0},{opacity:1},{phase:s})}function c9({id:t},e,i,...s){Yn(t,e,i,s,{opacity:1},{opacity:0},{phase:"remove"})}function _I(t){return e=>({visible:t.getVisible(),opacity:t.getOpacity(),clipScalingX:1,clip:!1})}function tb({nodeDataDependencies:t},e){const i=s=>isFinite(s)?s:0;e.clipX=i(t.seriesRectWidth),e.clipY=i(t.seriesRectHeight)}var L1,PI=A({"packages/ag-charts-community/src/chart/series/cartesian/pathUtil.ts"(){"use strict";Ii(),n9(),L1={start:0,middle:.5,end:1}}}),T1,N1,eb,h9=A({"packages/ag-charts-community/src/chart/series/cartesian/areaSeries.ts"(){"use strict";Ii(),mI(),rl(),me(),ae(),Ue(),Yt(),Ct(),Kp(),oI(),F_(),fe(),Ga(),vn(),co(),Vs(),Ds(),yr(),hx(),fg(),F6(),v1(),Ws(),Qx(),nf(),PI(),T1=.125,N1=.25,eb=class extends nr{constructor(t){super({moduleCtx:t,directionKeys:vl,directionNames:Ml,pathsPerSeries:["fill","stroke"],pathsZIndexSubOrderOffset:[0,1e3],hasMarkers:!0,markerSelectionGarbageCollection:!1,pickModes:[2,0],animationResetFns:{path:_I({getVisible:()=>this.visible,getOpacity:()=>this.getOpacity()}),label:fr,marker:(e,i)=>({...ef(e),...sf(e,i)})}}),this.properties=new _e,this.connectsToYAxis=!0,this.backgroundGroup=new mt({name:`${this.id}-background`,zIndex:0}),this._isStacked=void 0}get pickModeAxis(){return"main"}renderToOffscreenCanvas(){return super.renderToOffscreenCanvas()||this.contextNodeData!=null&&(this.contextNodeData.fillData.spans.length>xg||this.contextNodeData.strokeData.spans.length>xg)}attachSeries(t,e,i){super.attachSeries(t,e,i),t.appendChild(this.backgroundGroup)}detachSeries(t,e,i){super.detachSeries(t,e,i),t?.removeChild(this.backgroundGroup)}attachPaths([t,e]){this.backgroundGroup.appendChild(t),this.contentGroup.appendChild(e),e.zIndex=-1}isStacked(){return(this.seriesGrouping?.stackCount??1)>1}setSeriesIndex(t){const e=this.isStacked();return!super.setSeriesIndex(t)&&this._isStacked===e?!1:(this._isStacked=e,e?(this.backgroundGroup.zIndex=[0,t],this.contentGroup.zIndex=[1,t,0]):(this.backgroundGroup.zIndex=[1,t,0,0],this.contentGroup.zIndex=[1,t,0,1]),!0)}async processData(t){if(this.data==null||!this.properties.isValid())return;const{data:e,visible:i,seriesGrouping:{groupIndex:s=this.id,stackCount:a=1}={}}=this,{xKey:n,yKey:o,yFilterKey:r,connectMissingData:l,normalizedTo:c}=this.properties,h=!this.ctx.animationManager.isSkipped(),u=this.axes.x?.scale,d=this.axes.y?.scale,{xScaleType:p,yScaleType:g}=this.getScaleInformation({xScale:u,yScale:d}),f={value:`area-stack-${s}-yValue`,values:`area-stack-${s}-yValues`,stack:`area-stack-${s}-yValue-stack`,marker:`area-stack-${s}-yValues-marker`},x=[];tl(c)&&x.push(Nx(Object.values(f),c,"range")),h&&x.push(Ku());const m={invalidValue:null};(tl(c)||l)&&a>1&&(m.invalidValue=0),i||(m.forceValue=0),await this.requestDataModel(t,e,{props:[Sn(n,p,{id:"xValue"}),Tt(o,g,{id:"yValueRaw",...m}),...r!=null?[Tt(r,g,{id:"yFilterRaw"})]:[],...N_(o,g,{id:"yValueStack",...m,groupId:f.stack}),Tt(o,g,{id:"yValue",...m,groupId:f.value}),...Dl(o,"window","current",{id:"yValueEnd",...m,groupId:f.values},g),...Dl(o,"normal","current",{id:"yValueCumulative",...m,groupId:f.marker},g),...x],groupByKeys:!0,groupByData:!1}),this.animationState.transition("updateData")}getSeriesDomain(t){const{processedData:e,dataModel:i,axes:s}=this;if(!e||!i||!e.rawData?.length)return[];const a=s.y,n=i.resolveProcessedDataDefById(this,"xValue"),o=i.getDomain(this,"xValue","key",e),r=i.getDomain(this,"yValueEnd","value",e);if(t==="x")return n?.def.type==="key"&&n.def.valueType==="category"?o:Fs(Xo(o));if(a instanceof kl||a instanceof ih)return Fs(r);{const l=[r[0]>0?0:r[0],r[1]<0?0:r[1]];return Fs(l)}}getSeriesRange(t,e){const{dataModel:i,processedData:s}=this;if(!i||!s)return[NaN,NaN];const a=this.axes.x.scale,n=i.resolveKeysById(this,"xValue",s),[o,r]=vx(n.length,e,h=>{const u=a.convert(n[h]);return[u,u]}),[l,c]=i.getDomainBetweenRange(this,["yValueEnd"],[o,r],s);return[Math.min(l,0),Math.max(c,0)]}createNodeData(){const{axes:t,data:e,processedData:i,dataModel:s}=this,a=t.x,n=t.y;if(!a||!n||!e||!s||!i?.rawData.length||i.type!=="grouped"||!this.properties.isValid())return;const{yKey:o,xKey:r,yFilterKey:l,marker:c,label:h,fill:u,stroke:d,connectMissingData:p,interpolation:g}=this.properties,{scale:f}=a,{scale:x}=n,{isContinuousY:m}=this.getScaleInformation({xScale:f,yScale:x}),b=(f.bandwidth??0)/2,v=s.resolveKeysById(this,"xValue",i),S=s.resolveColumnById(this,"yValueEnd",i),D=s.resolveColumnById(this,"yValueRaw",i),k=s.resolveColumnById(this,"yValueCumulative",i),L=l!=null?s.resolveColumnById(this,"yFilterRaw",i):void 0,T=s.resolveColumnById(this,"yValueStack",i),N=($,Z,Y)=>{let tt;return(tl(this.properties.normalizedTo)?m&&Lm(Y):!isNaN(Y))&&(tt=Z),{x:f.convert($)+b,y:x.convert(tt),size:c.size}},C=[],O=[],{visibleSameStackCount:R}=this.ctx.seriesStateManager.getVisiblePeerGroupIndex(this);let E=!1;const{rawData:z}=i;i.groups.forEach(({datumIndices:$})=>{$.forEach(Z=>{const Y=v[Z];if(Y==null)return;const tt=z[Z],q=D[Z],it=k[Z],at=S[Z],rt=Number.isFinite(q),ot=N(Y,+it,q),et=L!=null?L[Z]===q:void 0;if(et===!1&&(E=!0),rt&&c&&O.push({index:Z,series:this,itemId:o,datum:tt,datumIndex:Z,midPoint:{x:ot.x,y:ot.y},cumulativeValue:at,yValue:q,xValue:Y,yKey:o,xKey:r,point:ot,fill:c.fill??u,stroke:c.stroke??d,strokeWidth:c.strokeWidth??this.getStrokeWidth(this.properties.strokeWidth),selected:et}),rt&&h){const gt=this.getLabelText(h,{value:q,datum:tt,xKey:r,yKey:o,xName:this.properties.xName,yName:this.properties.yName});C.push({index:Z,series:this,itemId:o,datum:tt,x:ot.x,y:ot.y,labelText:gt})}})});const F=$=>$.flatMap(Z=>Array.isArray(Z)?Zx(Z,g):new Array(Z.skip).fill(null)),G=i.groups.flatMap($=>$.datumIndices),j=($,Z)=>({point:{x:f.convert($)+b,y:x.convert(Z)},xDatum:$,yDatum:Z}),V=$=>{const Z=[];for(let Y=0;Y<G.length;Y+=1){const tt=G[Y],q=v[tt],it=T[tt],at=it[$],rt=Number.isFinite(at);if(p&&!rt)continue;const ot=Y>0?T[G[Y-1]]:void 0,et=Y<G.length-1?T[G[Y+1]]:void 0;let gt=0,dt=0;for(let Dt=0;Dt<=$;Dt+=1){const qt=it[Dt];if(Number.isFinite(qt)){const Me=ot==null||Number.isFinite(ot[Dt]),ri=et==null||Number.isFinite(et[Dt]);Me&&(gt+=qt),ri&&(dt+=qt)}}const ft=Z[Z.length-1];if(!p&&(gt!==dt||!rt))if(!rt&&Array.isArray(ft)&&ft.length===1)Z[Z.length-1]={skip:1};else{const Dt=j(q,gt),qt=j(q,dt);Array.isArray(ft)?ft.push(Dt):ft!=null&&(ft.skip+=1),Z.push(rt?[qt]:{skip:0})}else{const Dt=Math.max(gt,dt),qt=j(q,Dt);Array.isArray(ft)?ft.push(qt):ft!=null?(ft.skip+=1,Z.push([qt])):Z.push([qt])}}return F(Z)},W=this.seriesGrouping?.stackIndex??0,B=()=>{const $=G.map(Z=>{const Y=v[Z],q=T[Z][W];if(!(p&&!Number.isFinite(q)))return j(Y,0)}).filter(Z=>Z!=null);return Zx($,g)},U=V(W),H=U.map(()=>null);for(let $=W-1;$>=-1;$-=1){let Z;for(let Y=0;Y<H.length;Y+=1)H[Y]==null&&(Z??(Z=$!==-1?V($):B()),H[Y]=Z[Y])}const K=U.map(($,Z)=>$??H[Z]),X=U.filter($=>$!=null);return{itemId:o,fillData:{itemId:o,spans:K,phantomSpans:H},strokeData:{itemId:o,spans:X},labelData:C,nodeData:O,scales:this.calculateScaling(),visible:this.visible,stackVisible:R>0,crossFiltering:E}}isPathOrSelectionDirty(){return this.properties.marker.isDirty()}markerFactory(){const{shape:t}=this.properties.marker,e=Ua(t);return new e}updatePathNodes(t){const{opacity:e,visible:i,animationEnabled:s}=t,[a,n]=t.paths,o=this.contextNodeData?.crossFiltering===!0,r=this.getStrokeWidth(this.properties.strokeWidth);n.setProperties({fill:void 0,lineCap:"round",lineJoin:"round",pointerEvents:1,stroke:this.properties.stroke,strokeWidth:r,strokeOpacity:this.properties.strokeOpacity*(o?N1:1),lineDash:this.properties.lineDash,lineDashOffset:this.properties.lineDashOffset,opacity:e,visible:i||s}),a.setProperties({stroke:void 0,lineJoin:"round",pointerEvents:1,fill:this.properties.fill,fillOpacity:this.properties.fillOpacity*(o?T1:1),fillShadow:this.properties.shadow,opacity:e,visible:i||s}),tb(this,n),tb(this,a)}updatePaths(t){this.updateAreaPaths(t.paths,t.contextData)}updateAreaPaths(t,e){for(const i of t)i.visible=e.visible;if(e.visible)this.updateFillPath(t,e),this.updateStrokePath(t,e);else for(const i of t)i.path.clear(),i.markDirty()}updateFillPath(t,e){const[i]=t;i.path.clear(),x1(i,e.fillData),i.markDirty()}updateStrokePath(t,e){const{spans:i}=e.strokeData,[,s]=t;s.path.clear(),NI(s,i),s.markDirty()}updateMarkerSelection(t){const{nodeData:e,markerSelection:i}=t,s=this.properties.marker.enabled||this.contextNodeData?.crossFiltering===!0;return this.properties.marker.isDirty()&&(i.clear(),i.cleanup()),i.update(s?e:[])}getMarkerItemBaseStyle(t){const{marker:e}=this.properties,i=t?this.properties.highlightStyle.item:void 0;return{fill:i?.fill??e.fill,fillOpacity:i?.fillOpacity??e.fillOpacity,stroke:i?.stroke??e.stroke,strokeWidth:i?.strokeWidth??e.strokeWidth,strokeOpacity:i?.strokeOpacity??e.strokeOpacity}}getMarkerItemStyleOverrides(t,e,i,s,a,n){const{marker:o}=this.properties,{itemStyler:r}=o;if(r==null)return;const{id:l,properties:c}=this,{xKey:h,yKey:u}=c,{xDomain:d,yDomain:p}=this.cachedDatumCallback("domain",()=>({xDomain:this.getSeriesDomain("x"),yDomain:this.getSeriesDomain("y")}));return this.cachedDatumCallback(Ci(t,n?"highlight":"node"),()=>r({seriesId:l,...bl(e,h,u,d,p),xValue:i,yValue:s,highlighted:n,...a}))}updateMarkerNodes(t){const{markerSelection:e,isHighlight:i}=t,{xKey:s,yKey:a,marker:n,fill:o,stroke:r,strokeWidth:l,fillOpacity:c,strokeOpacity:h,highlightStyle:u}=this.properties,d=this.getSeriesDomain("x"),p=this.getSeriesDomain("y"),g=Lt(i&&u.item,n.getStyle(),{fill:o,stroke:r,strokeWidth:l,fillOpacity:c,strokeOpacity:h});e.each((f,x)=>{this.updateMarkerStyle(f,n,{...bl(x,s,a,d,p),highlighted:i},g,{selected:x.selected})}),i||this.properties.marker.markClean()}updateLabelSelection(t){const{labelData:e,labelSelection:i}=t;return i.update(e)}updateLabelNodes(t){const{labelSelection:e}=t,{enabled:i,fontStyle:s,fontWeight:a,fontSize:n,fontFamily:o,color:r}=this.properties.label;e.each((l,c)=>{const{x:h,y:u,labelText:d}=c;d&&i&&this.visible?(l.fontStyle=s,l.fontWeight=a,l.fontSize=n,l.fontFamily=o,l.textAlign="center",l.textBaseline="bottom",l.text=d,l.x=h,l.y=u-10,l.fill=r,l.visible=!0):l.visible=!1})}getTooltipContent(t){const{id:e,dataModel:i,processedData:s,axes:a,properties:n}=this,{xKey:o,xName:r,yKey:l,yName:c,tooltip:h}=n,u=a.x,d=a.y;if(!i||!s||s.rawData.length===0||!u||!d)return;const{datumIndex:p}=t,g=s.rawData[p],f=i.resolveKeysById(this,"xValue",s)[p],x=i.resolveColumnById(this,"yValueRaw",s)[p];if(f==null)return;const m=this.getMarkerItemBaseStyle(!1);return Object.assign(m,this.getMarkerItemStyleOverrides(String(p),g,f,x,m,!1)),h.formatTooltip({heading:u.formatDatum(f),symbol:this.legendItemSymbol(),data:[{label:c,fallbackLabel:l,value:d.formatDatum(x)}]},{seriesId:e,datum:g,title:c,xKey:o,xName:r,yKey:l,yName:c,...m,...this.getModuleTooltipParams()})}legendItemSymbol(){const{fill:t,stroke:e,fillOpacity:i,strokeOpacity:s,strokeWidth:a,lineDash:n,marker:o}=this.properties,r=!o.enabled||o.fill===void 0;return{marker:{shape:o.shape,fill:r?t:o.fill,fillOpacity:r?i:o.fillOpacity,stroke:o.stroke??e,strokeOpacity:o.strokeOpacity??s,strokeWidth:o.strokeWidth??0,enabled:o.enabled||a<=0},line:{stroke:e,strokeOpacity:s,strokeWidth:a,lineDash:n}}}getLegendData(t){if(!this.properties.isValid()||t!=="category")return[];const{id:e,ctx:{legendManager:i},visible:s}=this,{yKey:a,yName:n,legendItemName:o,showInLegend:r}=this.properties;return[{legendType:t,id:e,itemId:a,seriesId:e,enabled:s&&i.getItemEnabled({seriesId:e,itemId:a}),label:{text:o??n??a},symbol:this.legendItemSymbol(),legendItemName:o,hideInLegend:!r}]}animateEmptyUpdateReady(t){const{markerSelection:e,labelSelection:i,contextData:s,paths:a}=t,{animationManager:n}=this.ctx;this.updateAreaPaths(a,s),RI(this,n,...a),We([e],sf),wI(this,n,e),Gt(this,"labels",n,i)}animateReadyResize(t){const{contextData:e,paths:i}=t;this.updateAreaPaths(i,e),super.animateReadyResize(t)}animateWaitingUpdateReady(t){const{animationManager:e}=this.ctx,{markerSelection:i,labelSelection:s,contextData:a,paths:n,previousContextData:o}=t,[r,l]=n;if(r==null&&l==null)return;this.resetMarkerAnimation(t),this.resetLabelAnimation(t);const c=()=>{this.resetPathAnimation(t),this.updateAreaPaths(n,a)},h=()=>{e.skipCurrentBatch(),c()};if(a==null||o==null){c(),tf(this,e,"added",i),Jx(this,"fill_path_properties",e,"add",r),Jx(this,"stroke_path_properties",e,"add",l),Gt(this,"labels",e,s);return}if(a.crossFiltering!==o.crossFiltering){h();return}const u=S1(a,o);if(u===void 0){h();return}else if(u.status==="no-op")return;tf(this,e,void 0,i),De(this.id,"fill_path_properties",e,[r],u.fill.pathProperties),Hx(this.id,"fill_path_update",e,[r],u.fill.path),De(this.id,"stroke_path_properties",e,[l],u.stroke.pathProperties),Hx(this.id,"stroke_path_update",e,[l],u.stroke.path),Gt(this,"labels",e,s),this.ctx.animationManager.animate({id:this.id,groupId:"reset_after_animation",phase:"trailing",from:{},to:{},onComplete:()=>this.updateAreaPaths(n,a)})}isLabelEnabled(){return this.properties.label.enabled}nodeFactory(){return new mt}getFormattedMarkerStyle(t){const{xKey:e,yKey:i}=t,s=this.getSeriesDomain("x"),a=this.getSeriesDomain("y");return this.getMarkerStyle(this.properties.marker,{...bl(t,e,i,s,a),highlighted:!0})}computeFocusBounds(t){return af(this,t)}},eb.className="AreaSeries",eb.type="area"}}),C1,u9=A({"packages/ag-charts-community/src/chart/series/cartesian/areaSeriesModule.ts"(){"use strict";yo(),de(),id(),h9(),C1={type:"series",optionsKey:"series[]",packageType:"community",chartTypes:["cartesian"],identifier:"area",moduleFactory:t=>new eb(t),stackable:!0,tooltipDefaults:{range:"nearest"},defaultAxes:[{type:"number",position:"left"},{type:"category",position:"bottom"}],themeTemplate:{series:{nodeClickRange:"nearest",tooltip:{position:{type:"node"}},fillOpacity:.8,strokeOpacity:1,strokeWidth:0,lineDash:[0],lineDashOffset:0,shadow:{enabled:!1,color:dr,xOffset:3,yOffset:3,blur:5},interpolation:{type:"linear",tension:1,position:"end"},marker:{enabled:!1,shape:"circle",size:7,strokeWidth:0},label:{enabled:!1,fontSize:12,fontFamily:xe,color:$e}}},paletteFactory:t=>{const{marker:e}=yI(t);return{fill:e.fill,stroke:e.stroke,marker:e}}}}});function BI(t,e){for(const i of e){const s=i.datum;s===void 0?st.error("undefined datum"):t.addValue(i,s)}}function zI(t,e){const{x:i,y:s}=e,{nearest:a,distanceSquared:n}=t.getQuadTree().find(i,s);if(a!==void 0)return{datum:a.value,distance:Math.sqrt(n)}}var FI=A({"packages/ag-charts-community/src/chart/series/cartesian/quadtreeUtil.ts"(){"use strict";St()}}),ib,jI,GI=A({"packages/ag-charts-community/src/chart/series/cartesian/abstractBarSeries.ts"(){"use strict";nl(),Ui(),Ue(),Ct(),xt(),Tu(),eI(),fe(),Ga(),Ws(),FI(),ib=class extends uo{constructor(){super(...arguments),this.direction="vertical"}},M([I(b0)],ib.prototype,"direction",2),jI=class extends nr{constructor(){super(...arguments),this.groupScale=new $o,this.smallestDataInterval=void 0,this.largestDataInterval=void 0}padBandExtent(t,e){const i=typeof e=="boolean"?1:.5,s=Vt(this.smallestDataInterval)?this.smallestDataInterval*i:0,a=Xo(t)??[NaN,NaN];return typeof e=="boolean"?a[e?0:1]-=(e?1:-1)*s:(a[0]-=s,a[1]+=s),Fs(a)}getBandScalePadding(){return{inner:.3,outer:.15}}shouldFlipXY(){return!this.isVertical()}isVertical(){return this.properties.direction==="vertical"}getBarDirection(){return this.shouldFlipXY()?"x":"y"}getCategoryDirection(){return this.shouldFlipXY()?"y":"x"}getValueAxis(){const t=this.getBarDirection();return this.axes[t]}getCategoryAxis(){const t=this.getCategoryDirection();return this.axes[t]}getBandwidth(t){return ie.is(t.scale)?t.scale.calcBandwidth(this.smallestDataInterval):t.scale.bandwidth}updateGroupScale(t){const e=[],{groupScale:i}=this,s=this.getBandwidth(t),{index:a,visibleGroupCount:n}=this.ctx.seriesStateManager.getVisiblePeerGroupIndex(this);for(let r=0;r<n;r++)e.push(String(r));return i.domain=e,i.range=[0,s??0],t instanceof Al?i.paddingInner=t.groupPaddingInner:t instanceof Gc?(i.paddingInner=t.groupPaddingInner,i.round=i.padding!==0):i.padding=0,{barWidth:i.bandwidth>=1?i.bandwidth:i.rawBandwidth,groupIndex:a}}resolveKeyDirection(t){return this.getBarDirection()==="x"?t==="x"?"y":"x":t}initQuadTree(t){BI(t,this.datumNodesIter())}pickNodeClosestDatum(t){return zI(this,t)}}}}),sb,be,d9=A({"packages/ag-charts-community/src/chart/series/cartesian/barSeriesProperties.ts"(){"use strict";sd(),xt(),Fa(),mr(),GI(),sb=class extends Ke{constructor(){super(...arguments),this.placement="inside-center",this.padding=0}},M([I(ne(["inside-center","inside-start","inside-end","outside-start","outside-end"],"a placement"))],sb.prototype,"placement",2),M([I(wt)],sb.prototype,"padding",2),be=class extends ib{constructor(){super(...arguments),this.fill="#c16068",this.fillOpacity=1,this.stroke="#874349",this.strokeWidth=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.cornerRadius=0,this.crisp=void 0,this.shadow=new Ha,this.label=new sb,this.tooltip=new Ei,this.sparklineMode=!1,this.fastDataProcessing=!1}},M([I(J)],be.prototype,"xKey",2),M([I(J,{optional:!0})],be.prototype,"xName",2),M([I(J)],be.prototype,"yKey",2),M([I(J,{optional:!0})],be.prototype,"yName",2),M([I(J,{optional:!0})],be.prototype,"yFilterKey",2),M([I(J,{optional:!0})],be.prototype,"stackGroup",2),M([I(wt,{optional:!0})],be.prototype,"normalizedTo",2),M([I(jt)],be.prototype,"fill",2),M([I(Ft)],be.prototype,"fillOpacity",2),M([I(jt)],be.prototype,"stroke",2),M([I(nt)],be.prototype,"strokeWidth",2),M([I(Ft)],be.prototype,"strokeOpacity",2),M([I(Qn)],be.prototype,"lineDash",2),M([I(nt)],be.prototype,"lineDashOffset",2),M([I(nt)],be.prototype,"cornerRadius",2),M([I(pt,{optional:!0})],be.prototype,"crisp",2),M([I(Yi,{optional:!0})],be.prototype,"itemStyler",2),M([I(ct,{optional:!0})],be.prototype,"shadow",2),M([I(ct)],be.prototype,"label",2),M([I(ct)],be.prototype,"tooltip",2),M([I(pt)],be.prototype,"sparklineMode",2),M([I(pt)],be.prototype,"fastDataProcessing",2)}});function O1(t,e){t.crisp=e.crisp??!0,t.fill=e.fill,t.stroke=e.stroke,t.strokeWidth=e.strokeWidth,t.fillOpacity=e.fillOpacity,t.strokeOpacity=e.strokeOpacity,t.lineDash=e.lineDash,t.lineDashOffset=e.lineDashOffset,t.fillShadow=e.fillShadow,t.topLeftCornerRadius=e.topLeftCornerRadius!==!1?e.cornerRadius??0:0,t.topRightCornerRadius=e.topRightCornerRadius!==!1?e.cornerRadius??0:0,t.bottomRightCornerRadius=e.bottomRightCornerRadius!==!1?e.cornerRadius??0:0,t.bottomLeftCornerRadius=e.bottomLeftCornerRadius!==!1?e.cornerRadius??0:0,t.visible=e.visible??!0}function E1(t,e,{datum:i,isHighlighted:s,style:a,highlightStyle:n,itemStyler:o,seriesId:r,...l}){const{fill:c,fillOpacity:h,stroke:u,strokeWidth:d,strokeOpacity:p,lineDash:g,lineDashOffset:f,cornerRadius:x=0}=Lt(s&&n,a);let m;return o&&(m=t.cachedDatumCallback(Ci(e,s?"highlight":"node"),()=>o({datum:i.datum,xKey:i.xKey,fill:c,fillOpacity:h,stroke:u,strokeWidth:d,strokeOpacity:p,lineDash:g,lineDashOffset:f,cornerRadius:x,highlighted:s,seriesId:r,...l}))),{fill:m?.fill??c,fillOpacity:m?.fillOpacity??h,stroke:m?.stroke??u,strokeWidth:m?.strokeWidth??d,strokeOpacity:m?.strokeOpacity??p,lineDash:m?.lineDash??g,lineDashOffset:m?.lineDashOffset??f,cornerRadius:m?.cornerRadius??x,topLeftCornerRadius:a.topLeftCornerRadius,topRightCornerRadius:a.topRightCornerRadius,bottomRightCornerRadius:a.bottomRightCornerRadius,bottomLeftCornerRadius:a.bottomLeftCornerRadius,fillShadow:a.fillShadow}}function w1(t,e,i,s){if(e!=null){const[a,n]=e;if(a!==0||n!==1)return!1}if(ie.is(t)){const a=t.calcBandwidth(s)-t.calcBandwidth(i);if(a>0&&a<1)return!1}return!0}function rf(t,e,i){const{startingX:s,startingY:a}=g9(t,e);return{isVertical:t,calculate:(o,r)=>{let l=t?o.x:s,c=t?a:o.y,h=t?o.width:0,u=t?0:o.height;const{opacity:d}=o;r&&(isNaN(l)||isNaN(c))&&({x:l,y:c}=r,h=t?r.width:0,u=t?0:r.height,t&&!ab(r)?c+=r.height:!t&&ab(r)&&(l+=r.width));let p;return o.clipBBox==null?p=void 0:ab(o)?p=t?new lt(l,c-u,h,u):new lt(l-h,c,h,u):p=new lt(l,c,h,u),{x:l,y:c,width:h,height:u,clipBBox:p,opacity:d}},mode:i}}function p9(t,e){return{isVertical:t,calculate:i=>({x:t?i.x:i.x+i.width/2,y:t?i.y+i.height/2:i.y,width:t?i.width:0,height:t?0:i.height,clipBBox:i.clipBBox,opacity:i.opacity}),mode:e}}function lf(t){const e=a=>a==null||isNaN(a.x)||isNaN(a.y);return{toFn:(a,n,o)=>o==="removed"&&a.datum==null&&t.mode==="fade"?{...cf(a,n),opacity:0}:o==="removed"||e(n)?t.calculate(n,a.previousDatum):{x:n.x,y:n.y,width:n.width,height:n.height,clipBBox:n.clipBBox,opacity:n.opacity},fromFn:(a,n,o)=>{o==="updated"&&e(n)?o="removed":o==="updated"&&e(a.previousDatum)&&(o="added");let r;o==="added"&&a.previousDatum==null&&t.mode==="fade"?r={...cf(a,n),opacity:0}:o==="unknown"||o==="added"?r=t.calculate(n,a.previousDatum):r={x:a.x,y:a.y,width:a.width,height:a.height,clipBBox:a.clipBBox,opacity:a.opacity};const l=Vi[o];return{...r,phase:l}}}}function g9(t,e){const i=e[t?"y":"x"];let s=1/0,a=0;return i?(t?a=i.scale.convert(ie.is(i.scale)?0:Math.max(...i.range)):s=i.scale.convert(ie.is(i.scale)?0:Math.min(...i.range)),{startingX:s,startingY:a}):{startingX:s,startingY:a}}function cf(t,{x:e,y:i,width:s,height:a,clipBBox:n,opacity:o}){return{x:e,y:i,width:s,height:a,clipBBox:n,opacity:o}}function VI(t){if(t===void 0)return;const{x:e,y:i,width:s,height:a}=t;return new lt(e,i,s,a)}var ab,UI=A({"packages/ag-charts-community/src/chart/series/cartesian/barUtil.ts"(){"use strict";Ii(),Ui(),kt(),It(),Yt(),fe(),vn(),ab=t=>Gy(t.yValue??0)}});function R1(t,e,i){if(e.enabled&&i){const{x:s,y:a,text:n,textAlign:o,textBaseline:r}=i,{color:l,fontStyle:c,fontWeight:h,fontSize:u,fontFamily:d}=e;t.setProperties({visible:!0,x:s,y:a,text:n,fill:l,fontStyle:c,fontWeight:h,fontSize:u,fontFamily:d,textAlign:o,textBaseline:r})}else t.visible=!1}function _1({isUpward:t,isVertical:e,placement:i,padding:s=0,rect:a}){let n=a.x+a.width/2,o=a.y+a.height/2,r="center",l="middle";if(i!=="inside-center"){const c=(t?1:-1)*(e?-1:1),{direction:h,textAlignment:u}=P1[i],d=(h+1)*.5;if(e){const p=t?a.y+a.height:a.y,g=a.height*c;o=p+g*d+s*u*c,l=u===c?"top":"bottom"}else{const p=t?a.x:a.x+a.width,g=a.width*c;n=p+g*d+s*u*c,r=u===c?"left":"right"}}return{x:n,y:o,textAlign:r,textBaseline:l}}var P1,B1=A({"packages/ag-charts-community/src/chart/series/cartesian/labelUtil.ts"(){"use strict";P1={"inside-start":{inside:!0,direction:-1,textAlignment:1},"inside-end":{inside:!0,direction:1,textAlignment:-1},"outside-start":{inside:!1,direction:-1,textAlignment:-1},"outside-end":{inside:!1,direction:1,textAlignment:1}}}}),WI,HI,z1,F1,YI,hf,j1=A({"packages/ag-charts-community/src/chart/series/cartesian/barSeries.ts"(){"use strict";Ii(),Ui(),kt(),ae(),Qo(),Ig(),It(),Ct(),oI(),fe(),Ga(),vn(),Vs(),Ds(),yr(),fg(),GI(),d9(),UI(),Ws(),B1(),Xx(),WI=0,HI=1,z1=2,F1=3,YI=4,hf=class extends jI{constructor(t){super({moduleCtx:t,directionKeys:vl,directionNames:Ml,pickModes:[2,1,0],pathsPerSeries:[],hasHighlightedLabels:!0,datumSelectionGarbageCollection:!1,animationAlwaysUpdateSelections:!0,animationResetFns:{datum:cf,label:fr}}),this.properties=new be,this.connectsToYAxis=!0,this.dataAggregationFilters=void 0}get pickModeAxis(){return this.properties.sparklineMode?"main":void 0}crossFilteringEnabled(){return this.properties.yFilterKey!=null&&(this.seriesGrouping==null||this.seriesGrouping.stackIndex===0)}async processData(t){if(!this.properties.isValid()||!this.data)return;const{xKey:e,yKey:i,yFilterKey:s,normalizedTo:a,fastDataProcessing:n}=this.properties,{seriesGrouping:{groupIndex:o=this.id}={},data:r}=this,l=this.seriesGrouping?.groupCount??0,c=this.seriesGrouping?.stackCount??0,h=!n||a!=null||l>1||c>1,u=!this.ctx.animationManager.isSkipped(),d=this.getCategoryAxis()?.scale,p=this.getValueAxis()?.scale,{isContinuousX:g,xScaleType:f,yScaleType:x}=this.getScaleInformation({xScale:d,yScale:p}),m=`bar-stack-${o}-yValues`,b=`${m}-trailing`,v=this.visible?{}:{forceValue:0},S=[Sn(e,f,{id:"xValue"}),Tt(i,x,{id:"yValue-raw",invalidValue:null,...v})];this.crossFilteringEnabled()&&S.push(Tt(s,x,{id:"yFilterValue",invalidValue:null,...v})),h&&S.push(...Dl(i,"normal","current",{id:"yValue-end",rangeId:"yValue-range",invalidValue:null,missingValue:0,groupId:m,separateNegative:!0,...v},x),...Dl(i,"trailing","current",{id:"yValue-start",invalidValue:null,missingValue:0,groupId:b,separateNegative:!0,...v},x)),g&&S.push(QA,qA),Vt(a)&&S.push(Nx([m,b],Math.abs(a),"range")),u&&this.processedData&&S.push(Xu(this.id,this.processedData)),(u||!h)&&S.push(Ku());const{dataModel:D,processedData:k}=await this.requestDataModel(t,r,{props:S,groupByKeys:h,groupByData:!h});this.dataAggregationFilters=this.aggregateData(D,k),this.smallestDataInterval=k.reduced?.smallestKeyInterval,this.largestDataInterval=k.reduced?.largestKeyInterval,this.animationState.transition("updateData")}getSeriesDomain(t){const{processedData:e,dataModel:i}=this;if(i==null||e==null)return[];const s=e.rawDataSources?.get(this.id)??e.rawData;if(s==null||s.length===0)return[];const a=i.resolveProcessedDataDefById(this,"xValue"),n=i.getDomain(this,"xValue","key",e);let o=e.type==="grouped"?i.getDomain(this,"yValue-end","value",e):i.getDomain(this,"yValue-raw","value",e);const r=this.crossFilteringEnabled()?i.getDomain(this,"yFilterValue","value",e):void 0;if(r!=null&&(o=[Math.min(o[0],r[0]),Math.max(o[1],r[1])]),t===this.getCategoryDirection())return a?.def.type==="key"&&a.def.valueType==="category"?n:this.padBandExtent(n);if(this.getValueAxis()instanceof kl)return Fs(o);{const l=[Math.min(0,o[0]),Math.max(0,o[1])];return Fs(l)}}getSeriesRange(t,e){const{dataModel:i,processedData:s}=this;if(!i||!s||this.getBarDirection()==="x")return[NaN,NaN];const a=this.axes.x.scale,n=i.resolveKeysById(this,"xValue",s),o=a.bandwidth??0,[r,l]=vx(n.length,e,u=>{const d=a.convert(n[u]);return[d,d+o]}),[c,h]=i.getDomainBetweenRange(this,s.type==="ungrouped"?["yValue-raw"]:["yValue-end"],[r,l],s);return[Math.min(c,0),Math.max(h,0)]}aggregateData(t,e){}visibleRange(t,e,i,s){return[0,t]}createNodeData(){const{dataModel:t,processedData:e,groupScale:i,dataAggregationFilters:s}=this,a=this.getCategoryAxis(),n=this.getValueAxis();if(!t||!e||!a||!n||!this.properties.isValid())return;const o=e.rawDataSources?.get(this.id)??e.rawData;if(o==null||o.length===0)return;const r=a.scale,l=n.scale,{xKey:c,yKey:h,xName:u,yName:d,fill:p,stroke:g,strokeWidth:f,cornerRadius:x,legendItemName:m,label:b}=this.properties,v=n.isReversed(),{barWidth:S,groupIndex:D}=this.updateGroupScale(a),k=i.convert(String(D)),L=ie.is(r)?S*-.5:0,T=t.resolveKeysById(this,"xValue",e),N=t.resolveColumnById(this,"yValue-raw",e),C=this.crossFilteringEnabled()?t.resolveColumnById(this,"yFilterValue",e):void 0,O=!this.ctx.animationManager.isSkipped(),R=Q=>r.convert(T[Q])+k+L,E=l.convert(0),z=({datum:Q,datumIndex:$,valueIndex:Z,xValue:Y,yValue:tt,cumulativeValue:q,phantom:it,currY:at,prevY:rt,x:ot,width:et,isPositive:gt,yRange:dt,labelText:ft,opacity:Dt,crossScale:qt=1})=>{const Me=gt!==v,ri=l.convert(at),rn=l.convert(rt),ea=l.convert(dt),Ai=this.getBarDirection()==="x",Wo=et*.5*(1-qt),ia={x:Ai?Math.min(ri,rn):ot+Wo,y:Ai?ot+Wo:Math.min(ri,rn),width:Ai?Math.abs(rn-ri):et*qt,height:Ai?et*qt:Math.abs(rn-ri)},SM=new lt(ia.x,ia.y,ia.width,ia.height),vM={x:Ai?Math.min(E,ea):ot+Wo,y:Ai?ot+Wo:Math.min(E,ea),width:Ai?Math.abs(E-ea):et*qt,height:Ai?et*qt:Math.abs(E-ea)},i3=this.shouldFlipXY()?ia.height:ia.width;return{series:this,itemId:it?Ci(h,it):h,datum:Q,datumIndex:$,valueIndex:Z,cumulativeValue:q,phantom:it,xValue:Y,yValue:tt,yKey:h,xKey:c,capDefaults:{lengthRatioMultiplier:i3,lengthMax:i3},x:vM.x,y:vM.y,width:vM.width,height:vM.height,midPoint:{x:ia.x+ia.width/2,y:ia.y+ia.height/2},fill:p,stroke:g,opacity:Dt,strokeWidth:f,cornerRadius:x,topLeftCornerRadius:Ai!==Me,topRightCornerRadius:Me,bottomRightCornerRadius:Ai===Me,bottomLeftCornerRadius:!Me,clipBBox:SM,label:ft!=null?{text:ft,..._1({isUpward:Me,isVertical:!Ai,placement:b.placement,padding:b.padding,rect:ia})}:void 0,missing:tt==null,focusable:!it}},F=[],G=[],j=[],V=(Q,$,Z,Y,tt,q,it,at)=>{const rt=T[Q];if(rt==null)return;const ot=N[Q],et=C!=null?Number(C[Q]):void 0,gt=ot>=0&&!Object.is(ot,-0);if(!Number.isFinite(q)||et!=null&&!Number.isFinite(et))return;const dt=ot!=null?this.getLabelText(this.properties.label,{datum:o[Q],value:et??ot,xKey:c,yKey:h,xName:u,yName:d,legendItemName:m}):void 0,ft=et!=null&&et>ot,Dt=z({datum:o[Q],datumIndex:Q,valueIndex:$,xValue:rt,yValue:et??ot,cumulativeValue:et??q,phantom:!1,currY:et!=null?tt+et:q,prevY:tt,x:Z,width:Y,isPositive:gt,yRange:Math.max(tt+(et??-1/0),it),labelText:dt,opacity:at,crossScale:ft?.6:void 0});if(G.push(Dt),j.push(Dt),et!=null){const qt=z({datum:o[Q],datumIndex:Q,valueIndex:$,xValue:rt,yValue:et,cumulativeValue:et,phantom:!0,currY:q,prevY:tt,x:Z,width:Y,isPositive:gt,yRange:it,labelText:void 0,opacity:at,crossScale:void 0});F.push(qt)}},[W,B]=Gi(a.range),[U,H]=r.range,K=H-U,X=s?.find(Q=>Q.maxRange>K);if(e.type==="grouped"){const Q=S,$=t.resolveColumnById(this,"yValue-start",e),Z=t.resolveColumnById(this,"yValue-end",e),Y=t.resolveProcessedDataIndexById(this,"yValue-range");e.groups.forEach(({datumIndices:tt,aggregation:q})=>{const it=q[Y];tt.forEach((at,rt)=>{const ot=R(at),et=N[at],gt=et>=0&&!Object.is(et,-0),dt=Number($[at]),ft=Number(Z[at]),Dt=it[gt?1:0];V(at,rt,ot,Q,dt,ft,Dt,1)})})}else if(X==null){const Q=S;let[$,Z]=this.visibleRange(o.length,W,B,R);e.rawData.length<1e3&&($=0,Z=e.rawData.length);for(let Y=$;Y<Z;Y+=1){const tt=R(Y),q=Number(N[Y]);V(Y,0,tt,Q,0,q,q,1)}}else{const{maxRange:Q,indexData:$}=X,[Z,Y]=this.visibleRange(Q,W,B,tt=>{const q=tt*YI,it=$[q+WI],at=$[q+HI],rt=(it+at)/2|0;return it!==-1?R(rt):NaN});for(let tt=Z;tt<Y;tt+=1){const q=tt*YI,it=$[q+WI],at=$[q+HI],rt=$[q+z1],ot=$[q+F1];if(it===-1)continue;const et=R((it+at)/2|0),gt=Math.abs(R(at)-R(it))+S,dt=T[ot]!=null?Number(N[ot]):NaN,ft=T[rt]!=null?Number(N[rt]):NaN;if(dt>0){const Dt=ft>=0?ft/dt:1;V(ot,0,et,gt,0,dt,dt,Dt)}if(ft<0){const Dt=dt<=0?dt/ft:1;V(rt,1,et,gt,0,ft,ft,Dt)}}}return{itemId:h,nodeData:F.length>0?[...F,...G]:G,labelData:j,scales:this.calculateScaling(),visible:this.visible||O,groupScale:this.getScaling(this.groupScale)}}nodeFactory(){return new Oi}getHighlightData(t,e){const i=t.find(s=>s.datum===e.datum&&!s.phantom);return i!=null?[i]:void 0}updateDatumSelection(t){return t.datumSelection.update(t.nodeData,void 0,e=>this.getDatumId(e))}getItemBaseStyle(t){const{properties:e}=this,{cornerRadius:i}=e,s=t?e.highlightStyle.item:void 0;return{fill:s?.fill??e.fill,fillOpacity:s?.fillOpacity??e.fillOpacity,stroke:s?.stroke??e.stroke,strokeWidth:s?.strokeWidth??e.strokeWidth,strokeOpacity:s?.strokeOpacity??e.strokeOpacity,lineDash:s?.lineDash??e.lineDash??[],lineDashOffset:s?.lineDashOffset??e.lineDashOffset,cornerRadius:i}}getItemStyleOverrides(t,e,i,s,a,n){const{id:o,properties:r}=this,{xKey:l,yKey:c,itemStyler:h}=r;if(h==null)return;const{xDomain:u,yDomain:d}=this.cachedDatumCallback("domain",()=>({xDomain:this.getSeriesDomain("x"),yDomain:this.getSeriesDomain("y")}));return this.cachedDatumCallback(Ci(t,n?"highlight":"node"),()=>h({seriesId:o,...bl(e,l,c,u,d),xValue:i,yValue:s,highlighted:n,...a}))}updateDatumNodes(t){if(!this.properties.isValid())return;const{xKey:e,yKey:i,stackGroup:s,fill:a,fillOpacity:n,stroke:o,strokeWidth:r,strokeOpacity:l,lineDash:c,lineDashOffset:h,itemStyler:u,shadow:d,highlightStyle:{item:p}}=this.properties,g=this.axes.x,f=this.properties.crisp??w1(g?.scale,g?.visibleRange,this.smallestDataInterval,this.largestDataInterval),x=this.getCategoryDirection()==="x",m={fill:a,stroke:o,lineDash:c,lineDashOffset:h,fillShadow:d,strokeWidth:this.getStrokeWidth(r),fillOpacity:0,strokeOpacity:0},b=this.getSeriesDomain("x"),v=this.getSeriesDomain("y");t.datumSelection.each((S,D)=>{const k={seriesId:this.id,isHighlighted:t.isHighlight,highlightStyle:p,style:m,itemStyler:u,stackGroup:s,...bl(D,e,i,b,v)};m.fillOpacity=n*(D.phantom?.2:1),m.strokeOpacity=l*(D.phantom?.2:1),m.cornerRadius=D.cornerRadius,m.topLeftCornerRadius=D.topLeftCornerRadius,m.topRightCornerRadius=D.topRightCornerRadius,m.bottomRightCornerRadius=D.bottomRightCornerRadius,m.bottomLeftCornerRadius=D.bottomLeftCornerRadius;const L=x?(D.clipBBox?.width??D.width)>0:(D.clipBBox?.height??D.height)>0,T=E1(this,this.getDatumId(D),k);T.crisp=f,T.visible=L,O1(S,T)})}updateLabelSelection(t){const e=this.isLabelEnabled()?t.labelData:[];return t.labelSelection.update(e,i=>{i.pointerEvents=1})}updateLabelNodes(t){t.labelSelection.each((e,i)=>{R1(e,this.properties.label,i.label)})}getTooltipContent(t){const{id:e,dataModel:i,processedData:s,properties:a}=this,{xKey:n,xName:o,yKey:r,yName:l,legendItemName:c,stackGroup:h,tooltip:u}=a,d=this.getCategoryAxis(),p=this.getValueAxis();if(!i||!s||s.rawData.length===0||!d||!p)return;const{datumIndex:g}=t,f=s.rawData[g],x=i.resolveKeysById(this,"xValue",s)[g],m=i.resolveColumnById(this,"yValue-raw",s)[g];if(x==null)return;const b=this.getItemBaseStyle(!1);return Object.assign(b,this.getItemStyleOverrides(String(g),f,x,m,b,!1)),u.formatTooltip({heading:d.formatDatum(x),symbol:this.legendItemSymbol(),data:[{label:l,fallbackLabel:r,value:p.formatDatum(m)}]},{seriesId:e,datum:f,title:l,xKey:n,xName:o,yKey:r,yName:l,legendItemName:c,stackGroup:h,...b,...this.getModuleTooltipParams()})}legendItemSymbol(){const{fill:t,stroke:e,strokeWidth:i,fillOpacity:s,strokeOpacity:a}=this.properties;return{marker:{fill:t,fillOpacity:s,stroke:e,strokeWidth:i,strokeOpacity:a}}}getLegendData(t){const{showInLegend:e}=this.properties;if(t!=="category"||!this.properties.isValid())return[];const{id:i,ctx:{legendManager:s},visible:a}=this,{yKey:n,yName:o,legendItemName:r}=this.properties;return[{legendType:"category",id:i,itemId:n,seriesId:i,enabled:a&&s.getItemEnabled({seriesId:i,itemId:n}),label:{text:r??o??n},symbol:this.legendItemSymbol(),legendItemName:r,hideInLegend:!e}]}animateEmptyUpdateReady({datumSelection:t,labelSelection:e,annotationSelections:i}){const s=lf(rf(this.isVertical(),this.axes,"normal"));De(this.id,"nodes",this.ctx.animationManager,[t],s),Gt(this,"labels",this.ctx.animationManager,e),Gt(this,"annotations",this.ctx.animationManager,...i)}animateWaitingUpdateReady(t){const{datumSelection:e,labelSelection:i,annotationSelections:s,previousContextData:a}=t;this.ctx.animationManager.stopByAnimationGroupId(this.id);let n=this.processedData?.reduced?.diff?.[this.id];n==null&&this.processedData?.reduced?.diff!=null&&(n={changed:!0,added:new Set(Array.from(e,({datum:h})=>this.getDatumId(h))),updated:new Set,removed:new Set,moved:new Set});const o=a==null?"fade":"normal",r=lf(rf(this.isVertical(),this.axes,o));De(this.id,"nodes",this.ctx.animationManager,[e],r,(h,u)=>this.getDatumId(u),n);const l=a!=null&&(!ad(t.contextData.scales.x,a.scales.x)||!ad(t.contextData.scales.y,a.scales.y)||!ad(t.contextData.groupScale,t.previousContextData.groupScale));((n?.changed??!1)||l)&&(Gt(this,"labels",this.ctx.animationManager,i),Gt(this,"annotations",this.ctx.animationManager,...s))}getDatumId(t){return Ci(t.xValue,t.valueIndex,t.phantom)}isLabelEnabled(){return this.properties.label.enabled}computeFocusBounds({datumIndex:t}){const e=this.contextNodeData?.nodeData[t].clipBBox;return VI(e)}},hf.className="BarSeries",hf.type="bar"}}),KI,G1=A({"packages/ag-charts-community/src/chart/series/cartesian/barSeriesModule.ts"(){"use strict";yo(),de(),id(),j1(),KI={type:"series",optionsKey:"series[]",packageType:"community",chartTypes:["cartesian"],identifier:"bar",moduleFactory:t=>new hf(t),stackable:!0,groupable:!0,tooltipDefaults:{range:"exact"},defaultAxes:Z_([{type:"number",position:"left"},{type:"category",position:"bottom"}],t=>t?.direction==="horizontal"),themeTemplate:{series:{direction:"vertical",fillOpacity:1,strokeWidth:0,lineDash:[0],lineDashOffset:0,label:{enabled:!1,fontWeight:"normal",fontSize:12,fontFamily:xe,color:cr,placement:"inside-center"},shadow:{enabled:!1,color:dr,xOffset:3,yOffset:3,blur:5},errorBar:{cap:{lengthRatio:.3}}}},paletteFactory:Xg}}}),nb,XI,Xt,f9=A({"packages/ag-charts-community/src/chart/series/cartesian/bubbleSeriesProperties.ts"(){"use strict";RM(),vs(),xt(),Fa(),Zg(),mr(),Ws(),nb=class extends Ns{constructor(){super(...arguments),this.maxSize=30}},M([I(nt),ht()],nb.prototype,"maxSize",2),M([I(Op,{optional:!0}),ht()],nb.prototype,"domain",2),XI=class extends Ke{constructor(){super(...arguments),this.placement="top"}},M([I(om)],XI.prototype,"placement",2),Xt=class extends uo{constructor(){super(...arguments),this.colorRange=["#ffff00","#00ff00","#0000ff"],this.label=new XI,this.tooltip=new Ei,this.marker=new nb}},M([I(J)],Xt.prototype,"xKey",2),M([I(J)],Xt.prototype,"yKey",2),M([I(J)],Xt.prototype,"sizeKey",2),M([I(J,{optional:!0})],Xt.prototype,"labelKey",2),M([I(J,{optional:!0})],Xt.prototype,"colorKey",2),M([I(J,{optional:!0})],Xt.prototype,"xFilterKey",2),M([I(J,{optional:!0})],Xt.prototype,"yFilterKey",2),M([I(J,{optional:!0})],Xt.prototype,"sizeFilterKey",2),M([I(J,{optional:!0})],Xt.prototype,"xName",2),M([I(J,{optional:!0})],Xt.prototype,"yName",2),M([I(J,{optional:!0})],Xt.prototype,"sizeName",2),M([I(J,{optional:!0})],Xt.prototype,"labelName",2),M([I(J,{optional:!0})],Xt.prototype,"colorName",2),M([I(Op,{optional:!0})],Xt.prototype,"colorDomain",2),M([I(oa)],Xt.prototype,"colorRange",2),M([I(J,{optional:!0})],Xt.prototype,"title",2),M([Ne("marker.shape")],Xt.prototype,"shape",2),M([Ne("marker.size")],Xt.prototype,"size",2),M([Ne("marker.maxSize")],Xt.prototype,"maxSize",2),M([Ne("marker.domain",{optional:!0})],Xt.prototype,"domain",2),M([Ne("marker.fill",{optional:!0})],Xt.prototype,"fill",2),M([Ne("marker.fillOpacity")],Xt.prototype,"fillOpacity",2),M([Ne("marker.stroke",{optional:!0})],Xt.prototype,"stroke",2),M([Ne("marker.strokeWidth")],Xt.prototype,"strokeWidth",2),M([Ne("marker.strokeOpacity")],Xt.prototype,"strokeOpacity",2),M([Ne("marker.itemStyler",{optional:!0})],Xt.prototype,"itemStyler",2),M([I(ct)],Xt.prototype,"label",2),M([I(ct)],Xt.prototype,"tooltip",2)}}),V1,ob,y9=A({"packages/ag-charts-community/src/chart/series/cartesian/bubbleSeries.ts"(){"use strict";Gp(),Il(),me(),ae(),Ss(),Ue(),Yt(),ca(),fe(),Ga(),vn(),co(),Vs(),Ds(),yr(),f9(),Ws(),nf(),V1=class extends Ix{constructor(t,e,i,s){super(t,e,i,s),this.sizeKey=s.properties.sizeKey}},ob=class extends nr{constructor(t){super({moduleCtx:t,directionKeys:vl,directionNames:Ml,pickModes:[2,1,0],pathsPerSeries:[],hasMarkers:!0,markerSelectionGarbageCollection:!1,animationResetFns:{label:fr,marker:ef},usesPlacedLabels:!0}),this.NodeEvent=V1,this.clipFocusBox=!1,this.properties=new Xt,this.sizeScale=new pa,this.colorScale=new cl}get pickModeAxis(){return"main-category"}async processData(t){if(!this.properties.isValid()||this.data==null||!this.visible)return;const e=this.axes.x?.scale,i=this.axes.y?.scale,{xScaleType:s,yScaleType:a}=this.getScaleInformation({xScale:e,yScale:i}),n=this.colorScale.type,o=this.sizeScale.type,{xKey:r,yKey:l,sizeKey:c,xFilterKey:h,yFilterKey:u,sizeFilterKey:d,labelKey:p,colorDomain:g,colorRange:f,colorKey:x,marker:m}=this.properties,{dataModel:b,processedData:v}=await this.requestDataModel(t,this.data,{props:[Tt(r,s,{id:"xValue"}),Tt(l,a,{id:"yValue"}),...h!=null?[Tt(h,s,{id:"xFilterValue"})]:[],...u!=null?[Tt(u,a,{id:"yFilterValue"})]:[],...d!=null?[Tt(d,o,{id:"sizeFilterValue"})]:[],Tt(c,o,{id:"sizeValue"}),...x?[Tt(x,n,{id:"colorValue"})]:[],...p?[Tt(p,"band",{id:"labelValue"})]:[]]}),S=b.resolveProcessedDataIndexById(this,"sizeValue"),D=v.domain.values[S]??[];if(this.sizeScale.domain=m.domain?m.domain:D,x){const k=b.resolveProcessedDataIndexById(this,"colorValue");this.colorScale.domain=g??v.domain.values[k]??[],this.colorScale.range=f,this.colorScale.update()}this.animationState.transition("updateData")}getSeriesDomain(t){const{dataModel:e,processedData:i}=this;if(!i||!e)return[];const s=t==="x"?"xValue":"yValue",a=e.resolveProcessedDataDefById(this,s),n=e.getDomain(this,s,"value",i);return a?.def.type==="value"&&a?.def.valueType==="category"?n:Fs(Xo(n))}getSeriesRange(t,e){return[NaN,NaN]}createNodeData(){const{axes:t,dataModel:e,processedData:i,colorScale:s,sizeScale:a,visible:n}=this,{xKey:o,yKey:r,sizeKey:l,xFilterKey:c,yFilterKey:h,sizeFilterKey:u,labelKey:d,xName:p,yName:g,sizeName:f,labelName:x,label:m,colorKey:b,marker:v}=this.properties,S=Ua(v.shape),{placement:D}=m,k=t.x,L=t.y;if(!(e&&i?.rawData.length&&n&&k&&L))return;const T=e.resolveColumnById(this,"xValue",i),N=e.resolveColumnById(this,"yValue",i),C=l!=null?e.resolveColumnById(this,"sizeValue",i):void 0,O=b!=null?e.resolveColumnById(this,"colorValue",i):void 0,R=d!=null?e.resolveColumnById(this,"labelValue",i):void 0,E=c!=null?e.resolveColumnById(this,"xFilterValue",i):void 0,z=h!=null?e.resolveColumnById(this,"yFilterValue",i):void 0,F=u!=null?e.resolveColumnById(this,"sizeFilterValue",i):void 0,G=k.scale,j=L.scale,V=(G.bandwidth??0)/2,W=(j.bandwidth??0)/2,B=[];a.range=[v.size,v.maxSize];const U=m.getFont(),H=to.getMeasurer({font:U});return i.rawData.forEach((K,X)=>{const Q=T[X],$=N[X],Z=C?.[X],Y=G.convert(Q)+V,tt=j.convert($)+W;let q;E!=null&&z!=null&&(q=E[X]===Q&&z[X]===$,F!=null&&q&&(q=F[X]===Z));const it=this.getLabelText(m,{value:R!=null?R[X]:$,datum:K,xKey:o,yKey:r,sizeKey:l,labelKey:d,xName:p,yName:g,sizeName:f,labelName:x}),at=H.measureText(String(it)),rt=Z!=null?a.convert(Z):v.size,ot=O!=null?s.convert(O[X]):void 0;B.push({series:this,itemId:r,yKey:r,xKey:o,datum:K,datumIndex:X,xValue:Q,yValue:$,sizeValue:Z,point:{x:Y,y:tt,size:rt},midPoint:{x:Y,y:tt},fill:ot,label:{text:it,...at},marker:S,placement:D,selected:q})}),{itemId:r,nodeData:B,labelData:B,scales:this.calculateScaling(),visible:this.visible}}isPathOrSelectionDirty(){return this.properties.marker.isDirty()}getLabelData(){return this.isLabelEnabled()?this.contextNodeData?.labelData??[]:[]}markerFactory(){const{shape:t}=this.properties.marker,e=Ua(t);return new e}updateMarkerSelection(t){const{nodeData:e,markerSelection:i}=t;this.properties.marker.isDirty()&&(i.clear(),i.cleanup());const s=this.properties.marker.enabled?e:[];return i.update(s,void 0,a=>Ci([a.xValue,a.yValue,a.label.text]))}getMarkerItemBaseStyle(t){const{properties:e}=this,{marker:i}=e,s=t?e.highlightStyle.item:void 0;return{fill:s?.fill??i.fill,fillOpacity:s?.fillOpacity??i.fillOpacity,stroke:s?.stroke??i.stroke,strokeWidth:s?.strokeWidth??i.strokeWidth,strokeOpacity:s?.strokeOpacity??i.strokeOpacity}}getMarkerItemStyleOverrides(t,e,i,s){const{id:a,properties:n}=this,{xKey:o,yKey:r,sizeKey:l,labelKey:c,marker:h}=n,{itemStyler:u}=h;if(u!=null)return this.cachedDatumCallback(Ci(t,s?"highlight":"node"),()=>u({seriesId:a,datum:e,xKey:o,yKey:r,sizeKey:l,labelKey:c,highlighted:s,...i}))}updateMarkerNodes(t){const{markerSelection:e,isHighlight:i}=t,{xKey:s,yKey:a,sizeKey:n,labelKey:o,marker:r}=this.properties,{size:l,shape:c,fill:h,fillOpacity:u,stroke:d,strokeWidth:p,strokeOpacity:g}=Lt(i&&this.properties.highlightStyle.item,r.getStyle()),f={size:l,shape:c,fill:h,fillOpacity:u,stroke:d,strokeWidth:p,strokeOpacity:g};this.sizeScale.range=[r.size,r.maxSize],e.each((x,m)=>{this.updateMarkerStyle(x,r,{datum:m,highlighted:i,xKey:s,yKey:a,sizeKey:n,labelKey:o},f,{selected:m.selected})}),i||this.properties.marker.markClean()}updatePlacedLabelData(t){this.labelSelection.update(t.map(e=>({...e.datum,point:{x:e.x,y:e.y,size:e.datum.point.size}})),e=>{e.pointerEvents=1}),this.updateLabelNodes({labelSelection:this.labelSelection})}updateLabelNodes(t){const{label:e}=this.properties;t.labelSelection.each((i,s)=>{i.text=s.label.text,i.fill=e.color,i.x=s.point?.x??0,i.y=s.point?.y??0,i.fontStyle=e.fontStyle,i.fontWeight=e.fontWeight,i.fontSize=e.fontSize,i.fontFamily=e.fontFamily,i.textAlign="left",i.textBaseline="top"})}getTooltipContent(t){const{id:e,dataModel:i,processedData:s,axes:a,properties:n}=this,{xKey:o,xName:r,yKey:l,yName:c,sizeKey:h,sizeName:u,labelKey:d,labelName:p,title:g,tooltip:f}=n,x=a.x,m=a.y;if(!i||!s||s.rawData.length===0||!x||!m)return;const{datumIndex:b}=t,v=s.rawData[b],S=i.resolveColumnById(this,"xValue",s)[b],D=i.resolveColumnById(this,"yValue",s)[b];if(S==null)return;const k=[{label:r,fallbackLabel:o,value:x.formatDatum(S)},{label:c,fallbackLabel:l,value:m.formatDatum(D)}];if(h!=null){const T=i.resolveColumnById(this,"sizeValue",s)[b];k.push({label:u,fallbackLabel:h,value:String(T)})}const L=this.getMarkerItemBaseStyle(!1);return Object.assign(L,this.getMarkerItemStyleOverrides(String(b),v,L,!1)),f.formatTooltip({title:g,symbol:this.legendItemSymbol(),data:k},{seriesId:e,datum:v,title:l,xKey:o,xName:r,yKey:l,yName:c,sizeKey:h,sizeName:u,labelKey:d,labelName:p,...L,...this.getModuleTooltipParams()})}legendItemSymbol(){const{marker:t}=this.properties,{shape:e,fill:i,stroke:s,fillOpacity:a,strokeOpacity:n,strokeWidth:o}=t;return{marker:{shape:e,fill:i??"rgba(0, 0, 0, 0)",stroke:s??"rgba(0, 0, 0, 0)",fillOpacity:a??1,strokeOpacity:n??1,strokeWidth:o??0}}}getLegendData(){if(!this.properties.isValid())return[];const{id:t,ctx:{legendManager:e},visible:i}=this,{yKey:s,yName:a,title:n}=this.properties;return[{legendType:"category",id:t,itemId:s,seriesId:t,enabled:i&&e.getItemEnabled({seriesId:t,itemId:s}),label:{text:n??a??s},symbol:this.legendItemSymbol()}]}animateEmptyUpdateReady({markerSelection:t,labelSelection:e}){EI(this,this.ctx.animationManager,t),Gt(this,"labels",this.ctx.animationManager,e)}isLabelEnabled(){return this.properties.label.enabled}nodeFactory(){return new mt}getFormattedMarkerStyle(t){const{xKey:e,yKey:i,sizeKey:s,labelKey:a}=this.properties;return this.getMarkerStyle(this.properties.marker,{datum:t,xKey:e,yKey:i,sizeKey:s,labelKey:a,highlighted:!1})}computeFocusBounds(t){return af(this,t)}},ob.className="BubbleSeries",ob.type="bubble"}}),U1,m9=A({"packages/ag-charts-community/src/chart/series/cartesian/bubbleSeriesModule.ts"(){"use strict";yo(),de(),id(),y9(),U1={type:"series",optionsKey:"series[]",packageType:"community",chartTypes:["cartesian"],identifier:"bubble",moduleFactory:t=>new ob(t),tooltipDefaults:{range:"nearest"},defaultAxes:[{type:"number",position:"bottom"},{type:"number",position:"left"}],themeTemplate:{series:{shape:"circle",size:7,maxSize:30,fillOpacity:.8,tooltip:{position:{type:"node"}},label:{enabled:!1,fontSize:12,fontFamily:xe,color:$e}}},paletteFactory:Xg}}}),Pe,x9=A({"packages/ag-charts-community/src/chart/series/cartesian/histogramSeriesProperties.ts"(){"use strict";sd(),xt(),Fa(),mr(),Ws(),Pe=class extends uo{constructor(){super(...arguments),this.fillOpacity=1,this.strokeWidth=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.cornerRadius=0,this.areaPlot=!1,this.aggregation="sum",this.shadow=new Ha,this.label=new Ke,this.tooltip=new Ei}},M([I(J)],Pe.prototype,"xKey",2),M([I(J,{optional:!0})],Pe.prototype,"yKey",2),M([I(J,{optional:!0})],Pe.prototype,"xName",2),M([I(J,{optional:!0})],Pe.prototype,"yName",2),M([I(jt,{optional:!0})],Pe.prototype,"fill",2),M([I(Ft)],Pe.prototype,"fillOpacity",2),M([I(jt,{optional:!0})],Pe.prototype,"stroke",2),M([I(nt)],Pe.prototype,"strokeWidth",2),M([I(Ft)],Pe.prototype,"strokeOpacity",2),M([I(Qn)],Pe.prototype,"lineDash",2),M([I(nt)],Pe.prototype,"lineDashOffset",2),M([I(nt)],Pe.prototype,"cornerRadius",2),M([I(pt)],Pe.prototype,"areaPlot",2),M([I(mu,{optional:!0})],Pe.prototype,"bins",2),M([I(ne(["count","sum","mean"],"a histogram aggregation"))],Pe.prototype,"aggregation",2),M([I(nt,{optional:!0})],Pe.prototype,"binCount",2),M([I(ct)],Pe.prototype,"shadow",2),M([I(ct)],Pe.prototype,"label",2),M([I(ct)],Pe.prototype,"tooltip",2)}}),ZI,rb,b9=A({"packages/ag-charts-community/src/chart/series/cartesian/histogramSeries.ts"(){"use strict";Ii(),ae(),Ig(),wc(),Ct(),fe(),XA(),Ga(),vn(),Vs(),Ds(),yr(),UI(),Ws(),x9(),FI(),ZI=10,rb=class extends nr{constructor(t){super({moduleCtx:t,directionKeys:vl,directionNames:Ml,pickModes:[1,0],datumSelectionGarbageCollection:!1,animationResetFns:{datum:cf,label:fr}}),this.properties=new Pe,this.calculatedBins=[]}deriveBins(t){const e=k0(t[0],t[1],ZI),i=Rp(t[0],t[1],ZI),[s]=e,a=n=>[n,n+i];return[[s-i,s],...e.map(a)]}calculateNiceBins(t,e){const i=Math.floor(t[0]),s=t[1],a=e||1,{start:n,binSize:o}=this.calculateNiceStart(i,s,a);return this.getBins(n,s,o,a)}getBins(t,e,i,s){const a=[],n=this.calculatePrecision(i);for(let o=0;o<s;o++){const r=Math.round((t+o*i)*n)/n;let l=Math.round((t+(o+1)*i)*n)/n;o===s-1&&(l=Math.max(l,e)),a[o]=[r,l]}return a}calculatePrecision(t){let e=10;if(isFinite(t)&&t>0)for(;t<1;)e*=10,t*=10;return e}calculateNiceStart(t,e,i){const s=Math.abs(e-t)/i,a=Math.floor(Math.log10(s)),n=Math.pow(10,a);return{start:Math.floor(t/n)*n,binSize:s}}async processData(t){this.visible||(this.processedData=void 0,this.animationState.transition("updateData"));const{xKey:e,yKey:i,areaPlot:s,aggregation:a}=this.properties,n=this.axes.x?.scale,o=this.axes.y?.scale,{xScaleType:r,yScaleType:l}=this.getScaleInformation({yScale:o,xScale:n}),c=[Sn(e,r),JA];if(i){let u=YA("groupAgg");a==="count"||(a==="sum"?u=M_("groupAgg"):a==="mean"&&(u=D_("groupAgg"))),s&&(u=KA("groupAgg",u)),c.push(Tt(i,l,{invalidValue:void 0}),u)}else{let u=YA("groupAgg");s&&(u=KA("groupAgg",u)),c.push(u)}const h=u=>{const d=Fs(u.domain.keys[0]);if(d.length===0)return u.domain.groups=[],()=>[];const p=cn(this.properties.binCount)?this.calculateNiceBins(d,this.properties.binCount):this.properties.bins??this.deriveBins(d),g=p.length;return this.calculatedBins=[...p],f=>{const x=f.keys[0];for(let m=0;m<g;m++){const b=p[m];if(x>=b[0]&&x<b[1]||m===g-1&&x<=b[1])return b}return[]}};!this.ctx.animationManager.isSkipped()&&this.processedData&&c.push(Xu(this.id,this.processedData,!1)),await this.requestDataModel(t,this.data,{props:c,groupByFn:h}),this.animationState.transition("updateData")}getSeriesDomain(t){const{processedData:e,dataModel:i}=this;if(!e||!i||!this.calculatedBins.length)return[];const s=i.getDomain(this,"groupAgg","aggregate",e),a=this.calculatedBins?.[0][0],n=this.calculatedBins?.[(this.calculatedBins?.length??0)-1][1];return Fs(t==="x"?[a,n]:s)}getSeriesRange(t,e){return[NaN,NaN]}createNodeData(){const{id:t,axes:e,processedData:i}=this,s=e.x,a=e.y;if(!s||!a)return;const{scale:n}=s,{scale:o}=a,{xKey:r,yKey:l,xName:c,yName:h,fill:u,stroke:d,strokeWidth:p,cornerRadius:g}=this.properties,f=this.properties.label.formatter??(v=>String(v.value)),x=[],m={itemId:this.properties.yKey??this.id,nodeData:x,labelData:x,scales:this.calculateScaling(),animationValid:!0,visible:this.visible};if(!this.visible||i==null||i.rawData.length===0||i.type!=="grouped")return m;const{rawData:b}=i;return i.groups.forEach(({keys:v,datumIndices:S,aggregation:D},k)=>{const[[L,T]=[0,0]]=D,N=S.length,C=v,[O,R]=C,E=S.map($=>b[$]),z=n.convert(O),F=n.convert(R),G=L+T,j=o.convert(0),V=o.convert(G),W=Math.abs(F-z),B=Math.abs(V-j),U=Math.min(z,F),H=Math.min(j,V);let K;G!==0&&(K={x:U+W/2,y:H+B/2,text:this.cachedDatumCallback(Ci(k,"label"),()=>f({value:G,datum:E,seriesId:t,xKey:r,yKey:l,xName:c,yName:h}))??String(G)});const X={x:U+W/2,y:H+B/2},Q=a.isReversed();x.push({series:this,datumIndex:k,datum:E,aggregatedValue:G,frequency:N,domain:C,yKey:l,xKey:r,x:U,y:H,xValue:z,yValue:V,width:W,height:B,midPoint:X,fill:u,stroke:d,cornerRadius:g,topLeftCornerRadius:!Q,topRightCornerRadius:!Q,bottomRightCornerRadius:Q,bottomLeftCornerRadius:Q,opacity:1,strokeWidth:p,label:K})}),x.sort((v,S)=>v.x-S.x),m}nodeFactory(){return new Oi}updateDatumSelection(t){const{nodeData:e,datumSelection:i}=t;return i.update(e,s=>{s.crisp=!0},s=>s.domain.join("_"))}getItemBaseStyle(t){const{properties:e}=this,i=t?e.highlightStyle.item:void 0;return{fill:i?.fill??e.fill,fillOpacity:i?.fillOpacity??e.fillOpacity,stroke:i?.stroke??e.stroke,strokeWidth:i?.strokeWidth??e.strokeWidth,strokeOpacity:i?.strokeOpacity??e.strokeOpacity}}updateDatumNodes(t){const{isHighlight:e}=t,{fillOpacity:i,strokeOpacity:s,lineDash:a,lineDashOffset:n,shadow:o,highlightStyle:{item:{fill:r,fillOpacity:l=i,stroke:c,strokeWidth:h}}}=this.properties;t.datumSelection.each((u,d,p)=>{const{cornerRadius:g,topLeftCornerRadius:f,topRightCornerRadius:x,bottomRightCornerRadius:m,bottomLeftCornerRadius:b}=d,v=e&&h!==void 0?h:d.strokeWidth,S=e?l:i;u.fill=(e?r:void 0)??d.fill,u.stroke=(e?c:void 0)??d.stroke,u.fillOpacity=S,u.strokeOpacity=s,u.strokeWidth=v,u.lineDash=a,u.lineDashOffset=n,u.topLeftCornerRadius=f?g:0,u.topRightCornerRadius=x?g:0,u.bottomRightCornerRadius=m?g:0,u.bottomLeftCornerRadius=b?g:0,u.fillShadow=o,u.zIndex=e?Jc.highlightedZIndex:p,u.visible=d.height>0})}updateLabelSelection(t){const{labelData:e,labelSelection:i}=t;return i.update(e,s=>{s.pointerEvents=1,s.textAlign="center",s.textBaseline="middle"})}updateLabelNodes(t){const{fontStyle:e,fontWeight:i,fontFamily:s,fontSize:a,color:n}=this.properties.label,o=this.isLabelEnabled();t.labelSelection.each((r,l)=>{o&&l?.label?(r.text=l.label.text,r.x=l.label.x,r.y=l.label.y,r.fontStyle=e,r.fontWeight=i,r.fontFamily=s,r.fontSize=a,r.fill=n,r.visible=!0):r.visible=!1})}initQuadTree(t){const{value:e}=this.contentGroup.children().next();e&&BI(t,e.children())}pickNodeClosestDatum(t){return zI(this,t)}getTooltipContent(t){const{id:e,dataModel:i,processedData:s,axes:a,properties:n,ctx:{localeManager:o}}=this,{xKey:r,xName:l,yKey:c,yName:h,tooltip:u}=n,d=a.x,p=a.y;if(!i||s?.type!=="grouped"||s.rawData.length===0||!d||!p)return;const g=t.datumIndex,{aggregation:f,datumIndices:x,keys:m}=s.groups[g],[[b,v]=[0,0]]=f,S=x.length,D=m,[k,L]=D,T=b+v,N={data:x.map(O=>s.rawData[O]),aggregatedValue:T,frequency:S,domain:D},C=[{label:l,fallbackLabel:r,value:`${d.formatDatum(k)} - ${d.formatDatum(L)}`},{label:o.t("seriesHistogramTooltipFrequency"),value:p.formatDatum(S)}];if(c!=null){let O;switch(n.aggregation){case"sum":O=o.t("seriesHistogramTooltipSum",{yName:h});break;case"mean":O=o.t("seriesHistogramTooltipMean",{yName:h});break;case"count":O=o.t("seriesHistogramTooltipCount",{yName:h});break}C.push({label:O,value:p.formatDatum(T)})}return u.formatTooltip({symbol:this.legendItemSymbol(),data:C},{seriesId:e,datum:N,title:h,xKey:r,xName:l,yKey:c,yName:h,xRange:[k,L],frequency:S,...this.getItemBaseStyle(!1)})}legendItemSymbol(){const{fill:t,fillOpacity:e,stroke:i,strokeWidth:s,strokeOpacity:a}=this.properties;return{marker:{fill:t??"rgba(0, 0, 0, 0)",stroke:i??"rgba(0, 0, 0, 0)",fillOpacity:e,strokeOpacity:a,strokeWidth:s}}}getLegendData(t){if(t!=="category")return[];const{id:e,ctx:{legendManager:i},visible:s}=this,{xKey:a,yName:n,showInLegend:o}=this.properties;return[{legendType:"category",id:e,itemId:a,seriesId:e,enabled:s&&i.getItemEnabled({seriesId:e,itemId:a}),label:{text:n??a??"Frequency"},symbol:this.legendItemSymbol(),hideInLegend:!o}]}animateEmptyUpdateReady({datumSelection:t,labelSelection:e}){const i=lf(rf(!0,this.axes,"normal"));De(this.id,"datums",this.ctx.animationManager,[t],i),Gt(this,"labels",this.ctx.animationManager,e)}animateWaitingUpdateReady(t){const e=this.processedData?.reduced?.diff?.[this.id],i=lf(rf(!0,this.axes,"normal"));De(this.id,"datums",this.ctx.animationManager,[t.datumSelection],i,(s,a)=>Ci(a.domain),e),Gt(this,"labels",this.ctx.animationManager,t.labelSelection)}isLabelEnabled(){return this.properties.label.enabled}computeFocusBounds({datumIndex:t}){return VI(this.contextNodeData?.nodeData[t])}},rb.className="HistogramSeries",rb.type="histogram"}}),W1,S9=A({"packages/ag-charts-community/src/chart/series/cartesian/histogramSeriesModule.ts"(){"use strict";yo(),de(),b9(),W1={type:"series",optionsKey:"series[]",packageType:"community",chartTypes:["cartesian"],identifier:"histogram",moduleFactory:t=>new rb(t),tooltipDefaults:{range:"exact"},defaultAxes:[{type:"number",position:"bottom"},{type:"number",position:"left"}],themeTemplate:{series:{strokeWidth:1,fillOpacity:1,strokeOpacity:1,lineDash:[0],lineDashOffset:0,label:{enabled:!1,fontSize:12,fontFamily:xe,color:cr},shadow:{enabled:!1,color:dr,xOffset:3,yOffset:3,blur:5}}},paletteFactory:({takeColors:t})=>{const{fills:[e],strokes:[i]}=t(1);return{fill:e,stroke:i}}}}}),Be,v9=A({"packages/ag-charts-community/src/chart/series/cartesian/lineSeriesProperties.ts"(){"use strict";xt(),Fa(),Zg(),mr(),Ws(),DI(),Be=class extends uo{constructor(){super(...arguments),this.stroke="#874349",this.strokeWidth=2,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.interpolation=new ch,this.marker=new Ns,this.label=new Ke,this.tooltip=new Ei,this.connectMissingData=!1,this.sparklineMode=!1}},M([I(J)],Be.prototype,"xKey",2),M([I(J)],Be.prototype,"yKey",2),M([I(J,{optional:!0})],Be.prototype,"xName",2),M([I(J,{optional:!0})],Be.prototype,"yName",2),M([I(J,{optional:!0})],Be.prototype,"yFilterKey",2),M([I(J,{optional:!0})],Be.prototype,"stackGroup",2),M([I(nt,{optional:!0})],Be.prototype,"normalizedTo",2),M([I(J,{optional:!0})],Be.prototype,"title",2),M([I(jt)],Be.prototype,"stroke",2),M([I(nt)],Be.prototype,"strokeWidth",2),M([I(Ft)],Be.prototype,"strokeOpacity",2),M([I(Qn)],Be.prototype,"lineDash",2),M([I(nt)],Be.prototype,"lineDashOffset",2),M([I(ct)],Be.prototype,"interpolation",2),M([I(ct)],Be.prototype,"marker",2),M([I(ct)],Be.prototype,"label",2),M([I(ct)],Be.prototype,"tooltip",2),M([I(pt)],Be.prototype,"connectMissingData",2),M([I(pt)],Be.prototype,"sparklineMode",2)}}),H1,uf,Y1=A({"packages/ag-charts-community/src/chart/series/cartesian/lineSeries.ts"(){"use strict";Ii(),mI(),rl(),me(),ae(),Ue(),Yt(),Ct(),fe(),Ga(),vn(),PA(),co(),Vs(),Ds(),yr(),fg(),Ws(),v9(),Qx(),nf(),PI(),H1=.25,uf=class extends nr{constructor(t){super({moduleCtx:t,directionKeys:vl,directionNames:Ml,hasMarkers:!0,pickModes:[2,1,0],markerSelectionGarbageCollection:!1,animationResetFns:{path:_I({getVisible:()=>this.visible,getOpacity:()=>this.getOpacity()}),label:fr,marker:(e,i)=>({...ef(e),...sf(e,i)})}}),this.clipFocusBox=!1,this.properties=new Be,this.dataAggregationFilters=void 0}get pickModeAxis(){return this.properties.sparklineMode?"main":"main-category"}async processData(t){if(this.data==null||!this.properties.isValid())return;const{data:e,visible:i,seriesGrouping:{groupIndex:s=this.id,stackCount:a=1}={}}=this,{xKey:n,yKey:o,yFilterKey:r,connectMissingData:l,normalizedTo:c}=this.properties,h=!this.ctx.animationManager.isSkipped(),u=this.axes.x?.scale,d=this.axes.y?.scale,{isContinuousX:p,xScaleType:g,yScaleType:f}=this.getScaleInformation({xScale:u,yScale:d}),x={invalidValue:null};l&&a>1&&(x.invalidValue=0,i||(x.forceValue=0));const m=[];if(p||m.push(Sn(n,g,{id:"xKey"})),m.push(Tt(n,g,{id:"xValue"}),Tt(o,f,{id:"yValueRaw",...x,invalidValue:void 0})),r!=null&&m.push(Tt(r,f,{id:"yFilterRaw"})),a>1){const S=[`line-stack-${s}-yValues`,`line-stack-${s}-yValues-trailing`,`line-stack-${s}-yValues-marker`];m.push(...Dl(o,"window","current",{id:"yValueEnd",...x,groupId:S[0]},f),...Dl(o,"window-trailing","current",{id:"yValueStart",...x,groupId:S[1]},f),...Dl(o,"normal","current",{id:"yValueCumulative",...x,groupId:S[2]},f)),tl(c)&&m.push(Nx([S[0],S[1],S[2]],c,"range"))}h&&(m.push(Ku(p?["xValue"]:void 0)),this.processedData&&m.push(Xu(this.id,this.processedData)));const{dataModel:b,processedData:v}=await this.requestDataModel(t,e,{props:m});this.dataAggregationFilters=this.aggregateData(b,v),this.animationState.transition("updateData")}getSeriesDomain(t){const{dataModel:e,processedData:i}=this;if(!e||!i?.rawData.length)return[];const s=e.resolveProcessedDataDefById(this,"xValue");if(t==="x"){const a=e.getDomain(this,"xValue","value",i);return s?.def.type==="value"&&s.def.valueType==="category"?a:Fs(Xo(a))}else{const n=(this.seriesGrouping?.stackCount??1)>1?e.getDomain(this,"yValueEnd","value",i):e.getDomain(this,"yValueRaw","value",i);return Fs(n)}}visibleRangeIndices(t,e){const{dataModel:i,processedData:s}=this;if(!i||!s)return[0,0];const a=this.axes.x.scale,n=i.resolveColumnById(this,"xValue",s);return vx(e?.length??n.length,t,o=>{const r=a.convert(n[e?.[o]??o]);return[r,r]})}getSeriesRange(t,e){const{dataModel:i,processedData:s}=this;if(!i||!s)return[NaN,NaN];const[a,n]=this.visibleRangeIndices(e);return i.getDomainBetweenRange(this,["yValueRaw"],[a,n],s)}aggregateData(t,e){}createNodeData(){const{dataModel:t,processedData:e,axes:i,dataAggregationFilters:s}=this,a=i.x,n=i.y;if(!t||!e||e.rawData.length===0||!a||!n)return;const{xKey:o,yKey:r,yFilterKey:l,xName:c,yName:h,marker:u,label:d,connectMissingData:p,interpolation:g,legendItemName:f}=this.properties,x=(this.seriesGrouping?.stackCount??1)>1,m=a.scale,b=n.scale,v=(m.bandwidth??0)/2,S=(b.bandwidth??0)/2,D=u.enabled?u.size:0,{rawData:k}=e,L=t.resolveColumnById(this,"xValue",e),T=t.resolveColumnById(this,"yValueRaw",e),N=x?t.resolveColumnById(this,"yValueEnd",e):void 0,C=x?t.resolveColumnById(this,"yValueCumulative",e):T,O=l!=null?t.resolveColumnById(this,"yFilterRaw",e):void 0,R=Y=>m.convert(L[Y])+v,E=Y=>b.convert(C[Y])+S,z={lengthRatioMultiplier:this.properties.marker.getDiameter(),lengthMax:1/0},F=[];let G;const j=Y=>{const tt=k[Y],q=L[Y],it=T[Y],at=N?.[Y],rt=O?.[Y],ot=R(Y),et=E(Y);if(!Number.isFinite(ot))return;if(it!=null){const dt=d.enabled?this.getLabelText(d,{value:it,datum:tt,xKey:o,yKey:r,xName:c,yName:h,legendItemName:f}):void 0;F.push({series:this,datum:tt,datumIndex:Y,yKey:r,xKey:o,point:{x:ot,y:et,size:D},midPoint:{x:ot,y:et},cumulativeValue:at,yValue:it,xValue:q,capDefaults:z,labelText:dt,selected:rt})}if(G==null)return;const gt=G[G.length-1];if(it!=null){const dt={point:{x:ot,y:et},xDatum:q,yDatum:it};Array.isArray(gt)?gt.push(dt):gt!=null?(gt.skip+=1,G.push([dt])):G.push([dt])}else p||(Array.isArray(gt)||gt==null?G.push({skip:0}):gt.skip+=1)},[V,W]=m.range,B=W-V,H=s?.find(Y=>Y.maxRange>B)?.indices;let[K,X]=this.visibleRangeIndices(a.range,H);K=Math.max(K-1,0),X=Math.min(X+1,H?.length??L.length),e.rawData.length<1e3&&(K=0,X=e.rawData.length),H==null&&(G=[]);for(let Y=K;Y<X;Y+=1)j(H?.[Y]??Y);const Q=G?.flatMap(Y=>Array.isArray(Y)?Zx(Y,g):[]),$=Q!=null?{itemId:r,spans:Q}:void 0,Z=O?.some((Y,tt)=>Y===T[tt])??!1;return{itemId:r,nodeData:F,labelData:F,strokeData:$,scales:this.calculateScaling(),visible:this.visible,crossFiltering:Z}}isPathOrSelectionDirty(){return this.properties.marker.isDirty()}markerFactory(){const{shape:t}=this.properties.marker,e=Ua(t);return new e}updatePathNodes(t){const{paths:[e],opacity:i,visible:s,animationEnabled:a}=t,n=this.contextNodeData?.crossFiltering===!0;e.setProperties({fill:void 0,lineJoin:"round",pointerEvents:1,opacity:i,stroke:this.properties.stroke,strokeWidth:this.getStrokeWidth(this.properties.strokeWidth),strokeOpacity:this.properties.strokeOpacity*(n?H1:1),lineDash:this.properties.lineDash,lineDashOffset:this.properties.lineDashOffset}),a||(e.visible=s),tb(this,e)}updateMarkerSelection(t){let{nodeData:e}=t;const{markerSelection:i}=t;return e=this.properties.marker.enabled||this.contextNodeData?.crossFiltering===!0?e:[],this.properties.marker.isDirty()&&(i.clear(),i.cleanup()),i.update(e,void 0,a=>Ci(a.xValue))}updateMarkerNodes(t){const{markerSelection:e,isHighlight:i}=t,{xKey:s,yKey:a,stroke:n,strokeWidth:o,strokeOpacity:r,marker:l,highlightStyle:c}=this.properties,h=this.getSeriesDomain("x"),u=this.getSeriesDomain("y"),d=Lt(i&&c.item,l.getStyle(),{stroke:n,strokeWidth:o,strokeOpacity:r}),p=this.ctx.animationManager.isSkipped();e.each((g,f)=>{this.updateMarkerStyle(g,l,{...bl(f,s,a,h,u),highlighted:i},d,{applyTranslation:p,selected:f.selected})}),i||l.markClean()}updateLabelSelection(t){return t.labelSelection.update(this.isLabelEnabled()?t.labelData:[])}updateLabelNodes(t){const{enabled:e,fontStyle:i,fontWeight:s,fontSize:a,fontFamily:n,color:o}=this.properties.label;t.labelSelection.each((r,l)=>{e&&l?.labelText?(r.fontStyle=i,r.fontWeight=s,r.fontSize=a,r.fontFamily=n,r.textAlign="center",r.textBaseline="bottom",r.text=l.labelText,r.x=l.point.x,r.y=l.point.y-10,r.fill=o,r.visible=!0):r.visible=!1})}getTooltipContent(t){const{id:e,dataModel:i,processedData:s,axes:a,properties:n}=this,{xKey:o,xName:r,yKey:l,yName:c,tooltip:h}=n,u=a.x,d=a.y;if(!i||!s||s.rawData.length===0||!u||!d)return;const{datumIndex:p}=t,g=s.rawData[p],f=i.resolveColumnById(this,"xValue",s)[p],x=i.resolveColumnById(this,"yValueRaw",s)[p];if(f!=null)return h.formatTooltip({heading:u.formatDatum(f),symbol:this.legendItemSymbol(),data:[{label:c,fallbackLabel:l,value:d.formatDatum(x)}]},{seriesId:e,datum:g,title:c,xKey:o,xName:r,yKey:l,yName:c,...this.getModuleTooltipParams()})}legendItemSymbol(){const t="rgba(0, 0, 0, 0)",{stroke:e,strokeOpacity:i,strokeWidth:s,lineDash:a,marker:n}=this.properties;return{marker:{shape:n.shape,fill:n.fill??t,stroke:n.stroke??e??t,fillOpacity:n.fillOpacity??1,strokeOpacity:n.strokeOpacity??i??1,strokeWidth:n.strokeWidth??0,enabled:n.enabled},line:{stroke:e??t,strokeOpacity:i,strokeWidth:s,lineDash:a}}}getLegendData(t){if(!(this.properties.isValid()&&t==="category"))return[];const{id:e,ctx:{legendManager:i},visible:s}=this,{yKey:a,yName:n,title:o,legendItemName:r,showInLegend:l}=this.properties;return[{legendType:"category",id:e,itemId:a,legendItemName:r,seriesId:e,enabled:s&&i.getItemEnabled({seriesId:e,itemId:a}),label:{text:r??o??n??a},symbol:this.legendItemSymbol(),hideInLegend:!l}]}updatePaths(t){this.updateLinePaths(t.paths,t.contextData)}plotNodeDataPoints(t,e){if(e.length===0)return;const i=e[0].point;t.moveTo(i.x,i.y);for(let s=1;s<e.length;s+=1){const{x:a,y:n}=e[s].point;t.lineTo(a,n)}}updateLinePaths(t,e){const i=e.strokeData?.spans,[s]=t;s.path.clear(),i!=null?NI(s,i):this.plotNodeDataPoints(s.path,e.nodeData),s.markDirty()}animateEmptyUpdateReady(t){const{markerSelection:e,labelSelection:i,annotationSelections:s,contextData:a,paths:n}=t,{animationManager:o}=this.ctx;this.updateLinePaths(n,a),RI(this,o,...n),We([e],sf),wI(this,o,e),Gt(this,"labels",o,i),Gt(this,"annotations",o,...s)}animateReadyResize(t){const{contextData:e,paths:i}=t;this.updateLinePaths(i,e),super.animateReadyResize(t)}animateWaitingUpdateReady(t){const{animationManager:e}=this.ctx,{markerSelection:i,labelSelection:s,annotationSelections:a,contextData:n,paths:o,previousContextData:r}=t,[l]=o;this.resetMarkerAnimation(t),this.resetLabelAnimation(t);const c=()=>{this.resetPathAnimation(t),this.updateLinePaths(o,n)},h=()=>{e.skipCurrentBatch(),c()};if(n==null||r==null){c(),tf(this,e,"added",i),Jx(this,"path_properties",e,"add",l),Gt(this,"labels",e,s),Gt(this,"annotations",e,...a);return}if(n.crossFiltering!==r.crossFiltering){h();return}const u=m1(n,r,this.processedData?.reduced?.diff?.[this.id]);if(u===void 0){h();return}else if(u.status==="no-op")return;De(this.id,"path_properties",e,[l],u.stroke.pathProperties),u.status==="added"?this.updateLinePaths(o,n):u.status==="removed"?this.updateLinePaths(o,r):Hx(this.id,"path_update",e,[l],u.stroke.path),u.hasMotion&&(tf(this,e,void 0,i),Gt(this,"labels",e,s),Gt(this,"annotations",e,...a))}isLabelEnabled(){return this.properties.label.enabled}getBandScalePadding(){return{inner:1,outer:.1}}nodeFactory(){return new mt}getFormattedMarkerStyle(t){const{xKey:e,yKey:i}=this.properties,s=this.getSeriesDomain("x"),a=this.getSeriesDomain("y");return this.getMarkerStyle(this.properties.marker,{...bl(t,e,i,s,a),highlighted:!0})}computeFocusBounds(t){return af(this,t)}},uf.className="LineSeries",uf.type="line"}}),$I,K1=A({"packages/ag-charts-community/src/chart/series/cartesian/lineSeriesModule.ts"(){"use strict";yo(),de(),id(),Y1(),$I={type:"series",optionsKey:"series[]",packageType:"community",chartTypes:["cartesian"],identifier:"line",moduleFactory:t=>new uf(t),stackable:!0,tooltipDefaults:{range:"nearest"},defaultAxes:[{type:"number",position:"left"},{type:"category",position:"bottom"}],themeTemplate:{series:{tooltip:{position:{type:"node"}},strokeWidth:2,strokeOpacity:1,lineDash:[0],lineDashOffset:0,interpolation:{type:"linear",tension:1,position:"end"},marker:{shape:"circle",size:7,strokeWidth:0},label:{enabled:!1,fontSize:12,fontFamily:xe,color:$e},errorBar:{cap:{lengthRatio:1}}}},paletteFactory:t=>{const{marker:e}=yI(t);return{stroke:e.fill,marker:e}}}}}),QI,pe,M9=A({"packages/ag-charts-community/src/chart/series/cartesian/scatterSeriesProperties.ts"(){"use strict";vs(),xt(),Fa(),Zg(),mr(),Ws(),QI=class extends Ke{constructor(){super(...arguments),this.placement="top"}},M([I(om)],QI.prototype,"placement",2),pe=class extends uo{constructor(){super(...arguments),this.colorRange=["#ffff00","#00ff00","#0000ff"],this.label=new QI,this.tooltip=new Ei,this.marker=new Ns}},M([I(J)],pe.prototype,"xKey",2),M([I(J)],pe.prototype,"yKey",2),M([I(J,{optional:!0})],pe.prototype,"labelKey",2),M([I(J,{optional:!0})],pe.prototype,"colorKey",2),M([I(J,{optional:!0})],pe.prototype,"xFilterKey",2),M([I(J,{optional:!0})],pe.prototype,"yFilterKey",2),M([I(J,{optional:!0})],pe.prototype,"xName",2),M([I(J,{optional:!0})],pe.prototype,"yName",2),M([I(J,{optional:!0})],pe.prototype,"labelName",2),M([I(J,{optional:!0})],pe.prototype,"colorName",2),M([I(Op,{optional:!0})],pe.prototype,"colorDomain",2),M([I(oa)],pe.prototype,"colorRange",2),M([I(J,{optional:!0})],pe.prototype,"title",2),M([Ne("marker.shape")],pe.prototype,"shape",2),M([Ne("marker.size")],pe.prototype,"size",2),M([Ne("marker.fill")],pe.prototype,"fill",2),M([Ne("marker.fillOpacity")],pe.prototype,"fillOpacity",2),M([Ne("marker.stroke")],pe.prototype,"stroke",2),M([Ne("marker.strokeWidth")],pe.prototype,"strokeWidth",2),M([Ne("marker.strokeOpacity")],pe.prototype,"strokeOpacity",2),M([Ne("marker.itemStyler",{optional:!0})],pe.prototype,"itemStyler",2),M([I(ct)],pe.prototype,"label",2),M([I(ct)],pe.prototype,"tooltip",2)}}),lb,D9=A({"packages/ag-charts-community/src/chart/series/cartesian/scatterSeries.ts"(){"use strict";Gp(),me(),ae(),Ss(),Ue(),Yt(),ca(),fe(),Ga(),vn(),co(),Vs(),Ds(),yr(),Ws(),nf(),M9(),lb=class extends nr{constructor(t){super({moduleCtx:t,directionKeys:vl,directionNames:Ml,pickModes:[2,1,0],pathsPerSeries:[],hasMarkers:!0,markerSelectionGarbageCollection:!1,animationResetFns:{marker:ef,label:fr},usesPlacedLabels:!0}),this.clipFocusBox=!1,this.properties=new pe,this.colorScale=new cl}get pickModeAxis(){return"main-category"}async processData(t){if(!this.properties.isValid()||this.data==null||!this.visible)return;const e=this.axes.x?.scale,i=this.axes.y?.scale,{xScaleType:s,yScaleType:a}=this.getScaleInformation({xScale:e,yScale:i}),n=this.colorScale.type,{xKey:o,yKey:r,xFilterKey:l,yFilterKey:c,labelKey:h,colorKey:u,colorDomain:d,colorRange:p}=this.properties,{dataModel:g,processedData:f}=await this.requestDataModel(t,this.data,{props:[Tt(o,s,{id:"xValue"}),Tt(r,a,{id:"yValue"}),...l!=null?[Tt(l,s,{id:"xFilterValue"})]:[],...c!=null?[Tt(c,a,{id:"yFilterValue"})]:[],...u?[Tt(u,n,{id:"colorValue"})]:[],...h?[Tt(h,"band",{id:"labelValue"})]:[]]});if(u){const x=g.resolveProcessedDataIndexById(this,"colorValue");this.colorScale.domain=d??f.domain.values[x]??[],this.colorScale.range=p,this.colorScale.update()}this.animationState.transition("updateData")}getSeriesDomain(t){const{dataModel:e,processedData:i}=this;if(!i||!e)return[];const s=t==="x"?"xValue":"yValue",a=e.resolveProcessedDataDefById(this,s),n=e.getDomain(this,s,"value",i);return a?.def.type==="value"&&a?.def.valueType==="category"?n:Fs(Xo(n))}getSeriesRange(t,e){return[NaN,NaN]}createNodeData(){const{axes:t,dataModel:e,processedData:i,colorScale:s,visible:a}=this,{xKey:n,yKey:o,xFilterKey:r,yFilterKey:l,labelKey:c,colorKey:h,xName:u,yName:d,labelName:p,marker:g,label:f}=this.properties,{placement:x}=f,m=Ua(g.shape),b=t.x,v=t.y;if(!(e&&i?.rawData.length&&a&&b&&v))return;const S=e.resolveColumnById(this,"xValue",i),D=e.resolveColumnById(this,"yValue",i),k=h!=null?e.resolveColumnById(this,"colorValue",i):void 0,L=c!=null?e.resolveColumnById(this,"labelValue",i):void 0,T=r!=null?e.resolveColumnById(this,"xFilterValue",i):void 0,N=l!=null?e.resolveColumnById(this,"yFilterValue",i):void 0,C=b.scale,O=v.scale,R=(C.bandwidth??0)/2,E=(O.bandwidth??0)/2,z=[],F=f.getFont(),G=to.getMeasurer({font:F});return i.rawData.forEach((j,V)=>{const W=S[V],B=D[V],U=C.convert(W)+R,H=O.convert(B)+E,K=T!=null&&N!=null?T[V]===W&&N[V]===B:void 0,X=this.getLabelText(f,{value:L!=null?L?.[V]:B,datum:j,xKey:n,yKey:o,labelKey:c,xName:u,yName:d,labelName:p}),Q=G.measureText(X),$=k!=null?s.convert(k[V]):void 0;z.push({series:this,itemId:o,yKey:o,xKey:n,datum:j,datumIndex:V,xValue:W,yValue:B,capDefaults:{lengthRatioMultiplier:g.getDiameter(),lengthMax:1/0},point:{x:U,y:H,size:g.size},midPoint:{x:U,y:H},fill:$,label:{text:X,...Q},marker:m,placement:x,selected:K})}),{itemId:o,nodeData:z,labelData:z,scales:this.calculateScaling(),visible:this.visible}}isPathOrSelectionDirty(){return this.properties.marker.isDirty()}getLabelData(){return this.isLabelEnabled()?this.contextNodeData?.labelData??[]:[]}markerFactory(){const{shape:t}=this.properties.marker,e=Ua(t);return new e}updateMarkerSelection(t){const{nodeData:e,markerSelection:i}=t;return this.properties.marker.isDirty()&&(i.clear(),i.cleanup()),i.update(this.properties.marker.enabled?e:[])}getMarkerItemBaseStyle(t){const{properties:e}=this,{marker:i}=e,s=t?e.highlightStyle.item:void 0;return{fill:s?.fill??i.fill,fillOpacity:s?.fillOpacity??i.fillOpacity,stroke:s?.stroke??i.stroke,strokeWidth:s?.strokeWidth??i.strokeWidth,strokeOpacity:s?.strokeOpacity??i.strokeOpacity}}getMarkerItemStyleOverrides(t,e,i,s){const{id:a,properties:n}=this,{xKey:o,yKey:r,labelKey:l,marker:c}=n,{itemStyler:h}=c;if(h!=null)return this.cachedDatumCallback(Ci(t,s?"highlight":"node"),()=>h({seriesId:a,datum:e,xKey:o,yKey:r,labelKey:l,highlighted:s,...i}))}updateMarkerNodes(t){const{markerSelection:e,isHighlight:i}=t,{xKey:s,yKey:a,labelKey:n,marker:o,highlightStyle:r}=this.properties,l=Lt(i&&r.item,o.getStyle());e.each((c,h)=>{this.updateMarkerStyle(c,o,{datum:h,highlighted:i,xKey:s,yKey:a,labelKey:n},l,{selected:h.selected})}),i||o.markClean()}updatePlacedLabelData(t){this.labelSelection.update(t.map(e=>({...e.datum,point:{x:e.x,y:e.y,size:e.datum.point.size}})),e=>{e.pointerEvents=1}),this.updateLabelNodes({labelSelection:this.labelSelection})}updateLabelNodes(t){const{label:e}=this.properties;t.labelSelection.each((i,s)=>{i.text=s.label.text,i.fill=e.color,i.x=s.point?.x??0,i.y=s.point?.y??0,i.fontStyle=e.fontStyle,i.fontWeight=e.fontWeight,i.fontSize=e.fontSize,i.fontFamily=e.fontFamily,i.textAlign="left",i.textBaseline="top"})}getTooltipContent(t){const{id:e,dataModel:i,processedData:s,axes:a,properties:n}=this,{xKey:o,xName:r,yKey:l,yName:c,labelKey:h,labelName:u,title:d,tooltip:p}=n,g=a.x,f=a.y;if(!i||!s||s.rawData.length===0||!g||!f)return;const{datumIndex:x}=t,m=s.rawData[x],b=i.resolveColumnById(this,"xValue",s)[x],v=i.resolveColumnById(this,"yValue",s)[x];if(b==null)return;const S=this.getMarkerItemBaseStyle(!1);return Object.assign(S,this.getMarkerItemStyleOverrides(String(x),m,S,!1)),p.formatTooltip({symbol:this.legendItemSymbol(),title:d,data:[{label:r,fallbackLabel:o,value:g.formatDatum(b)},{label:c,fallbackLabel:l,value:f.formatDatum(v)}]},{seriesId:e,datum:m,title:c,xKey:o,xName:r,yKey:l,yName:c,labelKey:h,labelName:u,...S,...this.getModuleTooltipParams()})}legendItemSymbol(){const{shape:t,fill:e,stroke:i,fillOpacity:s,strokeOpacity:a,strokeWidth:n}=this.properties.marker;return{marker:{shape:t,fill:e??"rgba(0, 0, 0, 0)",stroke:i??"rgba(0, 0, 0, 0)",fillOpacity:s??1,strokeOpacity:a??1,strokeWidth:n??0}}}getLegendData(t){if(!this.properties.isValid()||t!=="category")return[];const{yKey:e,yName:i,title:s,showInLegend:a}=this.properties,{id:n,ctx:{legendManager:o},visible:r}=this;return[{legendType:"category",id:n,itemId:e,seriesId:n,enabled:r&&o.getItemEnabled({seriesId:n,itemId:e}),label:{text:s??i??e},symbol:this.legendItemSymbol(),hideInLegend:!a}]}animateEmptyUpdateReady(t){const{markerSelection:e,labelSelection:i,annotationSelections:s}=t;EI(this,this.ctx.animationManager,e),Gt(this,"labels",this.ctx.animationManager,i),Gt(this,"annotations",this.ctx.animationManager,...s)}isLabelEnabled(){return this.properties.label.enabled}nodeFactory(){return new mt}getFormattedMarkerStyle(t){const{xKey:e,yKey:i,labelKey:s}=this.properties;return this.getMarkerStyle(this.properties.marker,{datum:t,xKey:e,yKey:i,labelKey:s,highlighted:!0})}computeFocusBounds(t){return af(this,t)}},lb.className="ScatterSeries",lb.type="scatter"}}),X1,A9=A({"packages/ag-charts-community/src/chart/series/cartesian/scatterSeriesModule.ts"(){"use strict";yo(),de(),id(),D9(),X1={type:"series",optionsKey:"series[]",packageType:"community",chartTypes:["cartesian"],identifier:"scatter",moduleFactory:t=>new lb(t),tooltipDefaults:{range:"nearest"},defaultAxes:[{type:"number",position:"bottom"},{type:"number",position:"left"}],themeTemplate:{series:{shape:"circle",size:7,fillOpacity:.8,tooltip:{position:{type:"node"}},label:{enabled:!1,fontSize:12,fontFamily:xe,color:$e},errorBar:{cap:{lengthRatio:1}}}},paletteFactory:Xg}}}),qI,Z1=A({"packages/ag-charts-community/src/scene/sectorBox.ts"(){"use strict";CM(),qI=class x2{constructor(e,i,s,a){this.startAngle=e,this.endAngle=i,this.innerRadius=s,this.outerRadius=a}clone(){const{startAngle:e,endAngle:i,innerRadius:s,outerRadius:a}=this;return new x2(e,i,s,a)}equals(e){return this.startAngle===e.startAngle&&this.endAngle===e.endAngle&&this.innerRadius===e.innerRadius&&this.outerRadius===e.outerRadius}[hp](e,i){return new x2(this.startAngle*(1-i)+e.startAngle*i,this.endAngle*(1-i)+e.endAngle*i,this.innerRadius*(1-i)+e.innerRadius*i,this.outerRadius*(1-i)+e.outerRadius*i)}}}});function JI({startAngle:t,endAngle:e,innerRadius:i,outerRadius:s}){let a=1/0,n=1/0,o=-1/0,r=-1/0;const l=(c,h)=>{a=Math.min(c,a),n=Math.min(h,n),o=Math.max(c,o),r=Math.max(h,r)};return l(i*Math.cos(t),i*Math.sin(t)),l(i*Math.cos(e),i*Math.sin(e)),l(s*Math.cos(t),s*Math.sin(t)),l(s*Math.cos(e),s*Math.sin(e)),Ba(0,t,e)&&l(s,0),Ba(Math.PI*.5,t,e)&&l(0,s),Ba(Math.PI,t,e)&&l(-s,0),Ba(Math.PI*1.5,t,e)&&l(0,-s),new lt(a,n,o-a,r-n)}function cb(t,e,i){const s=Math.sqrt(Math.pow(t,2)+Math.pow(e,2)),{innerRadius:a,outerRadius:n}=i;if(i.startAngle===i.endAngle||s<Math.min(a,n)||s>Math.max(a,n))return!1;const o=Bp(i.startAngle),r=Bp(i.endAngle),l=Math.atan2(e,t);return o<r?l<=r&&l>=o:l<=r&&l>=-Math.PI||l>=o&&l<=Math.PI}function $1(t,e){const{startAngle:i,endAngle:s,innerRadius:a,outerRadius:n}=e,o={x:n*Math.cos(i),y:n*Math.sin(i)},r={x:n*Math.cos(s),y:n*Math.sin(s)},l=a===0?{x:0,y:0}:{x:a*Math.cos(i),y:a*Math.sin(i)},c=a===0?{x:0,y:0}:{x:a*Math.cos(s),y:a*Math.sin(s)};return Fu(t.start.x,t.start.y,t.end.x,t.end.y,o.x,o.y,l.x,l.y)||Fu(t.start.x,t.start.y,t.end.x,t.end.y,r.x,r.y,c.x,c.y)||PR(0,0,n,i,s,!0,t.start.x,t.start.y,t.end.x,t.end.y)}function Q1(t,e){const i={x:t.x,y:t.y},s={x:t.x+t.width,y:t.y},a={x:t.x,y:t.y+t.height},n={x:t.x+t.width,y:t.y+t.height};return $1({start:i,end:s},e)||$1({start:a,end:n},e)}function q1(t,e,i,s){if(i===0&&s===0)return 0;if(Math.asin(Math.abs(1*i)/(t+1*i))+Math.asin(Math.abs(1*s)/(t+1*s))-e<0)return 1;let n=0,o=1;for(let r=0;r<8;r+=1){const l=(n+o)/2;Math.asin(Math.abs(l*i)/(t+l*i))+Math.asin(Math.abs(l*s)/(t+l*s))-e<0?n=l:o=l}return n}function Cl(t,e){return zp(t,e)<J1?e:Ht(t-e)+e}function hb(t,e,i=0){const a=Math.abs(e-t)>=2*Math.PI?2*Math.PI:Ht(e-t);return t=Cl(t,i),e=t+a,{startAngle:t,endAngle:e}}function ub(t,e,i,s,a,n){const o=Math.sin(n),r=Math.cos(n),l=t**2+e**2-i**2;let c,h,u,d;if(r>.5){const v=o/r,S=1+v**2,D=-2*(t+e*v),k=D**2-4*S*l;if(k<0)return;const L=(-D+Math.sqrt(k))/(2*S),T=(-D-Math.sqrt(k))/(2*S);c=L,h=L*v,u=T,d=T*v}else{const v=r/o,S=1+v**2,D=-2*(e+t*v),k=D**2-4*S*l;if(k<0)return;const L=(-D+Math.sqrt(k))/(2*S),T=(-D-Math.sqrt(k))/(2*S);c=L*v,h=L,u=T*v,d=T}const p=r,g=o,f=c*p+h*g,x=u*p+d*g,m=f>0?Cl(Math.atan2(h-e,c-t),s):NaN,b=x>0?Cl(Math.atan2(d-e,u-t),s):NaN;if(m>=s&&m<=a)return m;if(b>=s&&b<=a)return b}function db(t,e,i,s,a,n){const o=Math.hypot(t,e),r=(o**2-i**2+n**2)/(2*o),l=o-r,c=Math.atan2(e,t),h=Math.acos(-l/i),u=Cl(c+h,s),d=Cl(c-h,s);if(u>=s&&u<=a)return u;if(d>=s&&d<=a)return d}var J1,df=A({"packages/ag-charts-community/src/scene/util/sector.ts"(){"use strict";Ti(),kt(),BR(),J1=1e-6}}),pb,ui,gb=A({"packages/ag-charts-community/src/scene/shape/sector.ts"(){"use strict";Z1(),df(),Va(),pb=class{constructor(t,e,i,s,a){this.cx=t,this.cy=e,this.r=i,this.a0=s,this.a1=a,this.a0>=this.a1&&(this.a0=NaN,this.a1=NaN)}isValid(){return Number.isFinite(this.a0)&&Number.isFinite(this.a1)}pointAt(t){return{x:this.cx+this.r*Math.cos(t),y:this.cy+this.r*Math.sin(t)}}clipStart(t){t==null||!this.isValid()||t<this.a0||(this.a0=t,(Number.isNaN(t)||this.a0>=this.a1)&&(this.a0=NaN,this.a1=NaN))}clipEnd(t){t==null||!this.isValid()||t>this.a1||(this.a1=t,(Number.isNaN(t)||this.a0>=this.a1)&&(this.a0=NaN,this.a1=NaN))}},ui=class extends qi{constructor(){super(...arguments),this.centerX=0,this.centerY=0,this.innerRadius=10,this.outerRadius=20,this.startAngle=0,this.endAngle=Math.PI*2,this.clipSector=void 0,this.concentricEdgeInset=0,this.radialEdgeInset=0,this.startOuterCornerRadius=0,this.endOuterCornerRadius=0,this.startInnerCornerRadius=0,this.endInnerCornerRadius=0}set inset(t){this.concentricEdgeInset=t,this.radialEdgeInset=t}set cornerRadius(t){this.startOuterCornerRadius=t,this.endOuterCornerRadius=t,this.startInnerCornerRadius=t,this.endInnerCornerRadius=t}computeBBox(){return JI(this).translate(this.centerX,this.centerY)}normalizedRadii(){const{concentricEdgeInset:t}=this;let{innerRadius:e,outerRadius:i}=this;return e=e>0?e+t:0,i=Math.max(i-t,0),{innerRadius:e,outerRadius:i}}normalizedClipSector(){const{clipSector:t}=this;if(t==null)return;const{startAngle:e,endAngle:i}=hb(this.startAngle,this.endAngle),{innerRadius:s,outerRadius:a}=this.normalizedRadii(),n=hb(t.startAngle,t.endAngle,e);return new qI(Math.max(e,n.startAngle),Math.min(i,n.endAngle),Math.max(s,t.innerRadius),Math.min(a,t.outerRadius))}getAngleOffset(t){return t>0?this.radialEdgeInset/t:0}arc(t,e,i,s,a,n,o,r){if(t<=0)return;const{startAngle:l,endAngle:c}=hb(this.startAngle,this.endAngle),{innerRadius:h,outerRadius:u}=this.normalizedRadii(),d=this.normalizedClipSector();if(r&&h<=0)return;const p=r?this.getAngleOffset(h+t):this.getAngleOffset(u-t),g=o?l+p+e:c-p-e,f=r?h+t:u-t,x=f*Math.cos(g),m=f*Math.sin(g);if(d!=null&&(!o&&!(g>=l-1e-6&&g<=d.endAngle-1e-6)||o&&!(g>=d.startAngle+1e-6&&g<=c-1e-6)||r&&f<d.innerRadius-1e-6||!r&&f>d.outerRadius+1e-6))return;const b=new pb(x,m,t,i,s);if(d!=null){r?(b.clipStart(ub(x,m,t,i,s,d.endAngle)),b.clipEnd(ub(x,m,t,i,s,d.startAngle))):(b.clipStart(ub(x,m,t,i,s,d.startAngle)),b.clipEnd(ub(x,m,t,i,s,d.endAngle)));let L,T;if(o?(L=db(x,m,t,i,s,d.innerRadius),T=db(x,m,t,i,s,d.outerRadius)):(L=db(x,m,t,i,s,d.outerRadius),T=db(x,m,t,i,s,d.innerRadius)),b.clipStart(L),b.clipEnd(T),L!=null){const{x:N,y:C}=b.pointAt(L),O=Cl(Math.atan2(C,N),l);o?n?.clipStart(O):a.clipEnd(O)}if(T!=null){const{x:N,y:C}=b.pointAt(T),O=Cl(Math.atan2(C,N),l);o?a.clipStart(O):n?.clipEnd(O)}}if(d!=null){const{x:L,y:T}=b.pointAt((b.a0+b.a1)/2);if(!cb(L,T,d))return}const{x:v,y:S}=b.pointAt(o===r?b.a0:b.a1),D=Cl(Math.atan2(S,v),l),k=r?n:a;return o?k?.clipStart(D):k?.clipEnd(D),b}updatePath(){const{path:e,centerX:i,centerY:s,concentricEdgeInset:a,radialEdgeInset:n}=this;let{startOuterCornerRadius:o,endOuterCornerRadius:r,startInnerCornerRadius:l,endInnerCornerRadius:c}=this;const{startAngle:h,endAngle:u}=hb(this.startAngle,this.endAngle),{innerRadius:d,outerRadius:p}=this.normalizedRadii(),g=this.normalizedClipSector(),f=u-h,x=f>=2*Math.PI-1e-6;if(e.clear(),d===0&&p===0||d>p)return;if((g?.startAngle??h)===(g?.endAngle??u))return;if(x&&this.clipSector==null&&o===0&&r===0&&l===0&&c===0){e.moveTo(i+p*Math.cos(h),s+p*Math.sin(h)),e.arc(i,s,p,h,u),d>a&&(e.moveTo(i+d*Math.cos(u),s+d*Math.sin(u)),e.arc(i,s,d,u,h,!0)),e.closePath();return}else if(this.clipSector==null&&Math.abs(d-p)<1e-6){e.arc(i,s,p,h,u,!1),e.arc(i,s,p,u,h,!0),e.closePath();return}const m=this.getAngleOffset(d),b=this.getAngleOffset(p);if(f<2*b)return;const S=(g?.innerRadius??d)>a,D=d<a||f<2*m,k=p-d,L=Math.max(o,l,r,c),T=L>0?Math.min(k/L,1):1;o*=T,r*=T,l*=T,c*=T;const N=q1(p,f-2*b,-o,-r);if(o*=N,r*=N,!D&&S){const Y=q1(d,f-2*m,l,c);l*=Y,c*=Y}else l=0,c=0;const C=Math.max(o+l,r+c),O=C>0?Math.min(k/C,1):1;o*=O,r*=O,l*=O,c*=O;let R=0,E=0;const z=o/(p-o),F=r/(p-r);if(z>=0&&z<1-1e-6)R=Math.asin(z);else{R=f/2;const Y=p/(1/Math.sin(R)+1);o=Math.min(Y,o)}if(F>=0&&F<1-1e-6)E=Math.asin(F);else{E=f/2;const Y=p/(1/Math.sin(E)+1);r=Math.min(Y,r)}const G=Math.asin(l/(d+l)),j=Math.asin(c/(d+c)),V=g?.outerRadius??p,W=this.getAngleOffset(V),B=new pb(0,0,V,h+W,u-W),U=g?.innerRadius??d,H=this.getAngleOffset(U),K=S?new pb(0,0,U,h+H,u-H):void 0;g!=null&&(B.clipStart(g.startAngle),B.clipEnd(g.endAngle),K?.clipStart(g.startAngle),K?.clipEnd(g.endAngle));const X=this.arc(o,R,h-Math.PI*.5,h+R,B,K,!0,!1),Q=this.arc(r,E,u-E,u+Math.PI*.5,B,K,!1,!1),$=this.arc(c,j,u+Math.PI*.5,u+Math.PI-j,B,K,!1,!0),Z=this.arc(l,G,h+Math.PI+G,h+Math.PI*1.5,B,K,!0,!0);if(D){const Y=f<Math.PI*.5?n*(1+Math.cos(f))/Math.sin(f):NaN;let tt;Y>0&&Y<p?tt=Math.max(Math.hypot(n,Y),d):tt=n,tt=Math.max(tt,d);const q=h+f*.5;e.moveTo(i+tt*Math.cos(q),s+tt*Math.sin(q))}else if(!(Z?.isValid()===!0||K?.isValid()===!0)){const Y=h+f/2,tt=d*Math.cos(Y),q=d*Math.sin(Y);e.moveTo(i+tt,s+q)}if(X?.isValid()===!0){const{cx:Y,cy:tt,r:q,a0:it,a1:at}=X;e.arc(i+Y,s+tt,q,it,at)}if(B.isValid()){const{r:Y,a0:tt,a1:q}=B;e.arc(i,s,Y,tt,q)}if(Q?.isValid()===!0){const{cx:Y,cy:tt,r:q,a0:it,a1:at}=Q;e.arc(i+Y,s+tt,q,it,at)}if(!D){if($?.isValid()===!0){const{cx:Y,cy:tt,r:q,a0:it,a1:at}=$;e.arc(i+Y,s+tt,q,it,at)}if(K?.isValid()===!0){const{r:Y,a0:tt,a1:q}=K;e.arc(i,s,Y,q,tt,!0)}if(Z?.isValid()===!0){const{cx:Y,cy:tt,r:q,a0:it,a1:at}=Z;e.arc(i+Y,s+tt,q,it,at)}}e.closePath()}isPointInPath(t,e){const{startAngle:i,endAngle:s,innerRadius:a,outerRadius:n}=this.clipSector??this;return cb(t-this.centerX,e-this.centerY,{startAngle:i,endAngle:s,innerRadius:Math.min(a,n),outerRadius:Math.max(a,n)})}},ui.className="Sector",M([vt()],ui.prototype,"centerX",2),M([vt()],ui.prototype,"centerY",2),M([vt()],ui.prototype,"innerRadius",2),M([vt()],ui.prototype,"outerRadius",2),M([vt()],ui.prototype,"startAngle",2),M([vt()],ui.prototype,"endAngle",2),M([vt()],ui.prototype,"clipSector",2),M([vt()],ui.prototype,"concentricEdgeInset",2),M([vt()],ui.prototype,"radialEdgeInset",2),M([vt()],ui.prototype,"startOuterCornerRadius",2),M([vt()],ui.prototype,"endOuterCornerRadius",2),M([vt()],ui.prototype,"startInnerCornerRadius",2),M([vt()],ui.prototype,"endInnerCornerRadius",2)}}),qe,An,pf=A({"packages/ag-charts-community/src/chart/themes/defaultColors.ts"(){"use strict";qe={BLUE:"#5090dc",ORANGE:"#ffa03a",GREEN:"#459d55",CYAN:"#34bfe1",YELLOW:"#e1cc00",VIOLET:"#9669cb",GRAY:"#b5b5b5",MAGENTA:"#bd5aa7",BROWN:"#8a6224",RED:"#ef5452"},An={BLUE:"#2b5c95",ORANGE:"#cc6f10",GREEN:"#1e652e",CYAN:"#18859e",YELLOW:"#a69400",VIOLET:"#603c88",GRAY:"#575757",MAGENTA:"#7d2f6d",BROWN:"#4f3508",RED:"#a82529"}}}),tk,fb,yb,hh,mb,gf,Ot,I9=A({"packages/ag-charts-community/src/chart/series/polar/donutSeriesProperties.ts"(){"use strict";sd(),St(),Jt(),xt(),dl(),Fa(),pf(),mg(),mr(),tk=class extends ee{constructor(){super(...arguments),this.showInLegend=!1}},M([I(pt)],tk.prototype,"showInLegend",2),fb=class extends Ke{constructor(){super(...arguments),this.spacing=2}set(t,e){return super.set(t)}},M([I(J)],fb.prototype,"text",2),M([I(wt)],fb.prototype,"spacing",2),yb=class extends Mt{constructor(){super(...arguments),this.fill="transparent",this.fillOpacity=1}},M([I(jt)],yb.prototype,"fill",2),M([I(Ft)],yb.prototype,"fillOpacity",2),hh=class extends Ke{constructor(){super(...arguments),this.offset=3,this.minAngle=0,this.minSpacing=4,this.maxCollisionOffset=50,this.avoidCollisions=!0}},M([I(nt)],hh.prototype,"offset",2),M([I(wt.restrict({min:0,max:360}))],hh.prototype,"minAngle",2),M([I(nt)],hh.prototype,"minSpacing",2),M([I(nt)],hh.prototype,"maxCollisionOffset",2),M([I(pt)],hh.prototype,"avoidCollisions",2),mb=class extends Ke{constructor(){super(...arguments),this.positionOffset=0,this.positionRatio=.5}},M([I(wt)],mb.prototype,"positionOffset",2),M([I(Ft)],mb.prototype,"positionRatio",2),gf=class extends Mt{constructor(){super(...arguments),this.length=10,this.strokeWidth=1}},M([I(oa,{optional:!0})],gf.prototype,"colors",2),M([I(nt)],gf.prototype,"length",2),M([I(nt)],gf.prototype,"strokeWidth",2),Ot=class extends Us{constructor(){super(...arguments),this.fills=Object.values(qe),this.strokes=Object.values(An),this.fillOpacity=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.cornerRadius=0,this.rotation=0,this.outerRadiusOffset=0,this.outerRadiusRatio=1,this.strokeWidth=1,this.sectorSpacing=0,this.hideZeroValueSectorsInLegend=!1,this.innerLabels=new yu(fb),this.title=new tk,this.innerCircle=new yb,this.shadow=new Ha,this.calloutLabel=new hh,this.sectorLabel=new mb,this.calloutLine=new gf,this.tooltip=new Ei}isValid(){const t=super.isValid();return this.innerRadiusRatio==null&&this.innerRadiusOffset==null?(st.warnOnce("Either an [innerRadiusRatio] or an [innerRadiusOffset] must be set to render a donut series."),!1):t}},M([I(J)],Ot.prototype,"angleKey",2),M([I(J,{optional:!0})],Ot.prototype,"angleName",2),M([I(J,{optional:!0})],Ot.prototype,"angleFilterKey",2),M([I(J,{optional:!0})],Ot.prototype,"radiusKey",2),M([I(J,{optional:!0})],Ot.prototype,"radiusName",2),M([I(nt,{optional:!0})],Ot.prototype,"radiusMin",2),M([I(nt,{optional:!0})],Ot.prototype,"radiusMax",2),M([I(J,{optional:!0})],Ot.prototype,"calloutLabelKey",2),M([I(J,{optional:!0})],Ot.prototype,"calloutLabelName",2),M([I(J,{optional:!0})],Ot.prototype,"sectorLabelKey",2),M([I(J,{optional:!0})],Ot.prototype,"sectorLabelName",2),M([I(J,{optional:!0})],Ot.prototype,"legendItemKey",2),M([I(oa)],Ot.prototype,"fills",2),M([I(oa)],Ot.prototype,"strokes",2),M([I(Ft)],Ot.prototype,"fillOpacity",2),M([I(Ft)],Ot.prototype,"strokeOpacity",2),M([I(Qn)],Ot.prototype,"lineDash",2),M([I(nt)],Ot.prototype,"lineDashOffset",2),M([I(nt)],Ot.prototype,"cornerRadius",2),M([I(Yi,{optional:!0})],Ot.prototype,"itemStyler",2),M([I(wt)],Ot.prototype,"rotation",2),M([I(wt)],Ot.prototype,"outerRadiusOffset",2),M([I(Ft)],Ot.prototype,"outerRadiusRatio",2),M([I(wt,{optional:!0})],Ot.prototype,"innerRadiusOffset",2),M([I(Ft,{optional:!0})],Ot.prototype,"innerRadiusRatio",2),M([I(nt)],Ot.prototype,"strokeWidth",2),M([I(wt)],Ot.prototype,"sectorSpacing",2),M([I(pt)],Ot.prototype,"hideZeroValueSectorsInLegend",2),M([I(am)],Ot.prototype,"innerLabels",2),M([I(ct)],Ot.prototype,"title",2),M([I(ct)],Ot.prototype,"innerCircle",2),M([I(ct)],Ot.prototype,"shadow",2),M([I(ct)],Ot.prototype,"calloutLabel",2),M([I(ct)],Ot.prototype,"sectorLabel",2),M([I(ct)],Ot.prototype,"calloutLine",2),M([I(ct)],Ot.prototype,"tooltip",2)}});function uh(t,e,i,s){const a=[i.convert(0),i.convert(1)],n=[s.convert(0),s.convert(1)],o=Math.PI/-2+Zi(e),r=t?"initial":"update",l=({radius:g})=>({innerRadius:a[0],outerRadius:a[0]+(a[1]-a[0])*g}),c=({radius:g})=>({innerRadius:n[0],outerRadius:n[0]+(n[1]-n[0])*g});return{nodes:{toFn:(g,f,x,{prevLive:m})=>{let{startAngle:b,endAngle:v,innerRadius:S,outerRadius:D}=f;const{stroke:k,fill:L}=f.sectorFormat;if(x==="removed"&&m?(b=m.datum?.endAngle,v=m.datum?.endAngle):x==="removed"&&!m&&(b=o,v=o),x==="removed"){const T=l(f);S=T.innerRadius,D=T.outerRadius}return{startAngle:b,endAngle:v,outerRadius:D,innerRadius:S,stroke:k,fill:L}},fromFn:(g,f,x,{prevFromProps:m})=>{let{startAngle:b,endAngle:v,innerRadius:S,outerRadius:D}=g,{fill:k,stroke:L}=f.sectorFormat;if(x==="unknown"||x==="added"&&!m?(b=o,v=o,S=f.innerRadius,D=f.outerRadius):x==="added"&&m&&(b=m.endAngle??o,v=m.endAngle??o,S=m.innerRadius??f.innerRadius,D=m.outerRadius??f.outerRadius),x==="added"&&!t){const T=c(f);S=T.innerRadius,D=T.outerRadius}return x==="updated"&&(k=g.fill??k,L=(typeof g.stroke=="string"?g.stroke:void 0)??L),{startAngle:b,endAngle:v,innerRadius:S,outerRadius:D,fill:k,stroke:L,phase:r}}},innerCircle:{fromFn:(g,f)=>({size:g.previousDatum?.radius??g.size??0,phase:r}),toFn:(g,f)=>({size:f.radius??0})}}}function ek(t,e){return{startAngle:e.startAngle,endAngle:e.endAngle,innerRadius:e.innerRadius,outerRadius:e.outerRadius,fill:e.sectorFormat.fill,stroke:e.sectorFormat.stroke}}function ik(t,e){const i=e.y-t.centerY,s=e.x-t.centerX,a=Math.atan2(i,s),n=t.getItemNodes();for(const o of n)if(o.datum.missing!==!0&&Ba(a,o.startAngle,o.endAngle)){const r=Math.sqrt(s*s+i*i);let l=0;return r<o.innerRadius?l=o.innerRadius-r:r>o.outerRadius&&(l=r-o.outerRadius),{datum:o.datum,distance:l}}}var sk=A({"packages/ag-charts-community/src/chart/series/polar/pieUtil.ts"(){"use strict";Ti()}}),ak,xb=A({"packages/ag-charts-community/src/chart/series/polar/polarZIndexMap.ts"(){"use strict";ak=(t=>(t[t.BACKGROUND=0]="BACKGROUND",t[t.FOREGROUND=1]="FOREGROUND",t[t.HIGHLIGHT=2]="HIGHLIGHT",t[t.LABEL=3]="LABEL",t))(ak||{})}}),ff,bb=A({"packages/ag-charts-community/src/chart/series/polar/polarSeries.ts"(){"use strict";rl(),me(),ae(),Qo(),Va(),Ss(),Yp(),fe(),VA(),Ds(),xb(),ff=class extends Dx{constructor({useLabelLayer:t=!1,pickModes:e=[1,0],canHaveAxes:i=!1,animationResetFns:s,...a}){super({...a,useLabelLayer:t,pickModes:e,directionKeys:{x:["angleKey"],y:["radiusKey"]},directionNames:{x:["angleName"],y:["radiusName"]},canHaveAxes:i}),this.itemGroup=this.contentGroup.appendChild(new mt),this.nodeData=[],this.itemSelection=Te.select(this.itemGroup,()=>this.nodeFactory(),!1),this.labelSelection=Te.select(this.labelGroup,()=>this.labelFactory(),!1),this.highlightSelection=Te.select(this.highlightGroup,()=>this.nodeFactory()),this.highlightLabelSelection=Te.select(this.highlightLabel,()=>this.labelFactory()),this.centerX=0,this.centerY=0,this.radius=0,this.animationResetFns=s,this.animationState=new ku("empty",{empty:{update:{target:"ready",action:n=>this.animateEmptyUpdateReady(n)},reset:"empty",skip:"ready"},ready:{updateData:"waiting",clear:"clearing",highlight:n=>this.animateReadyHighlight(n),highlightMarkers:n=>this.animateReadyHighlightMarkers(n),resize:n=>this.animateReadyResize(n),reset:"empty",skip:"ready"},waiting:{update:{target:"ready",action:n=>this.animateWaitingUpdateReady(n)},reset:"empty",skip:"ready"},clearing:{update:{target:"empty",action:n=>this.animateClearingUpdateEmpty(n)},reset:"empty",skip:"ready"}},()=>this.checkProcessedDataAnimatable())}getItemNodes(){return[...this.itemGroup.children()]}getNodeData(){return this.nodeData}setSeriesIndex(t){return super.setSeriesIndex(t)?(this.contentGroup.zIndex=[t,1],this.highlightGroup.zIndex=[t,2],this.labelGroup.zIndex=[t,3],!0):!1}resetAnimation(t){t==="initial"?this.animationState.transition("reset"):t==="ready"&&this.animationState.transition("skip")}labelFactory(){const t=new Ye;return t.pointerEvents=1,t}addChartEventListeners(){this.destroyFns.push(this.ctx.chartEventManager?.addListener("legend-item-click",t=>this.onLegendItemClick(t)))}getInnerRadius(){return 0}computeLabelsBBox(t,e){return null}resetAllAnimation(){const{item:t,label:e}=this.animationResetFns??{};this.ctx.animationManager.stopByAnimationGroupId(this.id),t&&We([this.itemSelection,this.highlightSelection],t),e&&We([this.labelSelection,this.highlightLabelSelection],e),this.itemSelection.cleanup(),this.labelSelection.cleanup(),this.highlightSelection.cleanup(),this.highlightLabelSelection.cleanup()}animateEmptyUpdateReady(t){this.ctx.animationManager.skipCurrentBatch(),this.resetAllAnimation()}animateWaitingUpdateReady(t){this.ctx.animationManager.skipCurrentBatch(),this.resetAllAnimation()}animateReadyHighlight(t){const{item:e,label:i}=this.animationResetFns??{};e&&We([this.highlightSelection],e),i&&We([this.highlightLabelSelection],i)}animateReadyHighlightMarkers(t){}animateReadyResize(t){this.resetAllAnimation()}animateClearingUpdateEmpty(t){this.ctx.animationManager.skipCurrentBatch(),this.resetAllAnimation()}computeFocusBounds(t){const e=this.getNodeData()?.[t.datumIndex];if(e!==void 0)return this.itemSelection.select(i=>i instanceof qi&&i.datum===e)[0]}getSeriesRange(t,e){return[NaN,NaN]}}}}),tP,Sb,k9=A({"packages/ag-charts-community/src/chart/series/polar/donutSeries.ts"(){"use strict";Ii(),Il(),kt(),me(),ae(),ae(),Qo(),Pc(),gb(),Ss(),df(),Ti(),ha(),St(),It(),Yt(),fe(),ro(),Ga(),vn(),pg(),Vs(),Ds(),yr(),I9(),sk(),bb(),xb(),tP=class extends zu{constructor(t,e,i,s){super(t,e,i,s),this.angleKey=s.properties.angleKey,this.radiusKey=s.properties.radiusKey,this.calloutLabelKey=s.properties.calloutLabelKey,this.sectorLabelKey=s.properties.sectorLabelKey}},Sb=class extends ff{constructor(t){super({moduleCtx:t,pickModes:[1,0],useLabelLayer:!0,animationResetFns:{item:ek,label:fr}}),this.properties=new Ot,this.phantomNodeData=void 0,this.backgroundGroup=new Xi({name:`${this.id}-background`,zIndex:0}),this.noVisibleData=!1,this.previousRadiusScale=new pa,this.radiusScale=new pa,this.phantomGroup=this.backgroundGroup.appendChild(new mt({name:"phantom"})),this.phantomSelection=Te.select(this.phantomGroup,()=>this.nodeFactory(),!1),this.calloutLabelGroup=this.contentGroup.appendChild(new mt({name:"pieCalloutLabels"})),this.calloutLabelSelection=new Te(this.calloutLabelGroup,mt),this.zerosumRingsGroup=this.backgroundGroup.appendChild(new mt({name:`${this.id}-zerosumRings`})),this.zerosumOuterRing=this.zerosumRingsGroup.appendChild(new sr),this.zerosumInnerRing=this.zerosumRingsGroup.appendChild(new sr),this.innerLabelsGroup=this.contentGroup.appendChild(new mt({name:"innerLabels"})),this.innerCircleGroup=this.backgroundGroup.appendChild(new mt({name:`${this.id}-innerCircle`})),this.innerLabelsSelection=Te.select(this.innerLabelsGroup,Ye),this.innerCircleSelection=Te.select(this.innerCircleGroup,sr),this.surroundingRadius=void 0,this.NodeEvent=tP,this.angleScale=new pa,this.angleScale.domain=[0,1],this.angleScale.range=[-Math.PI,Math.PI].map(e=>e+Math.PI/2),this.phantomGroup.opacity=.2}get calloutNodeData(){return this.phantomNodeData??this.nodeData}attachSeries(t,e,i){super.attachSeries(t,e,i),t?.appendChild(this.backgroundGroup)}detachSeries(t,e,i){super.detachSeries(t,e,i),t?.removeChild(this.backgroundGroup)}setSeriesIndex(t){return super.setSeriesIndex(t)?(this.backgroundGroup.zIndex=[0,t],!0):!1}nodeFactory(){return new ui}getSeriesDomain(t){return t==="x"?this.angleScale.domain:this.radiusScale.domain}async processData(t){if(this.data==null||!this.properties.isValid())return;const{visible:e,id:i}=this,{angleKey:s,angleFilterKey:a,radiusKey:n,calloutLabelKey:o,sectorLabelKey:r,legendItemKey:l}=this.properties,c=(f,x,m)=>e&&this.ctx.legendManager.getItemEnabled({seriesId:i,itemId:m}),h=!this.ctx.animationManager.isSkipped(),u=[],d=[];l?u.push(Sn(l,"band",{id:"legendItemKey"})):o?u.push(Sn(o,"band",{id:"calloutLabelKey"})):r&&u.push(Sn(r,"band",{id:"sectorLabelKey"}));const p=this.radiusScale.type,g=this.angleScale.type;n&&d.push(ZA(n,{id:"radiusValue",min:this.properties.radiusMin??0,max:this.properties.radiusMax}),Tt(n,p,{id:"radiusRaw"}),eh("radiusValue",[0,1],1,this.properties.radiusMin??0,this.properties.radiusMax)),o&&d.push(Tt(o,"band",{id:"calloutLabelValue"})),r&&d.push(Tt(r,"band",{id:"sectorLabelValue"})),l&&d.push(Tt(l,"band",{id:"legendItemValue"})),a&&d.push(Sg(a,g,{id:"angleFilterValue",onlyPositive:!0,validation:c,invalidValue:0}),Tt(a,g,{id:"angleFilterRaw"}),eh("angleFilterValue",[0,1],0,0)),h&&this.processedData&&u.length>0&&d.push(Xu(this.id,this.processedData)),d.push(Ku()),await this.requestDataModel(t,this.data,{props:[...u,Sg(s,g,{id:"angleValue",onlyPositive:!0,validation:c,invalidValue:0}),Tt(s,g,{id:"angleRaw"}),eh("angleValue",[0,1],0,0),...d]});for(const f of this.processedData?.defs?.values??[]){const{id:x,missing:m,property:b}=f,v=uA(this,m);x!=="angleRaw"&&v>0&&st.warnOnce(`no value was found for the key '${String(b)}' on ${v} data element${v>1?"s":""}`)}this.animationState.transition("updateData")}maybeRefreshNodeData(){if(!this.nodeDataRefresh)return;const{nodeData:t=[],phantomNodeData:e}=this.createNodeData()??{};this.nodeData=t,this.phantomNodeData=e,this.nodeDataRefresh=!1}getProcessedDataValues(t,e){const i=t.resolveColumnById(this,"angleValue",e),s=t.resolveColumnById(this,"angleRaw",e),a=this.properties.angleFilterKey!=null?t.resolveColumnById(this,"angleFilterValue",e):void 0,n=this.properties.angleFilterKey!=null?t.resolveColumnById(this,"angleFilterRaw",e):void 0,o=this.properties.radiusKey?t.resolveColumnById(this,"radiusValue",e):void 0,r=this.properties.radiusKey?t.resolveColumnById(this,"radiusRaw",e):void 0,l=this.properties.calloutLabelKey?t.resolveColumnById(this,"calloutLabelValue",e):void 0,c=this.properties.sectorLabelKey?t.resolveColumnById(this,"sectorLabelValue",e):void 0,h=this.properties.legendItemKey?t.resolveColumnById(this,"legendItemValue",e):void 0;return{angleValues:i,angleRawValues:s,angleFilterValues:a,angleFilterRawValues:n,radiusValues:o,radiusRawValues:r,calloutLabelValues:l,sectorLabelValues:c,legendItemValues:h}}createNodeData(){const{id:t,processedData:e,dataModel:i,angleScale:s,ctx:{legendManager:a},visible:n}=this,{rotation:o,innerRadiusRatio:r}=this.properties;if(!this.properties.isValid())return this.zerosumOuterRing.visible=!0,this.zerosumInnerRing.visible=!0,{itemId:t,nodeData:[],labelData:[]};if(!e?.rawData.length||!i||e.type!=="ungrouped")return;const{angleValues:l,angleRawValues:c,angleFilterValues:h,angleFilterRawValues:u,radiusValues:d,radiusRawValues:p,calloutLabelValues:g,sectorLabelValues:f,legendItemValues:x}=this.getProcessedDataValues(i,e),m=u?.some((k,L)=>k>c[L])??!1;let b=0,v=0;const S=[],D=u!=null?[]:void 0;return e.rawData.forEach((k,L)=>{const T=m?h[L]:l[L],N=u!=null&&!m?Math.sqrt(u[L]/c[L]):1,C=s.convert(b)+Zi(o);b=T,v+=T;const O=s.convert(b)+Zi(o),R=Math.abs(O-C),E=C+R/2,z=c[L],G=(d?.[L]??1)*N,j=p?.[L],V=x?.[L],W=this.getLabels(k,E,R,!0,g?.[L],f?.[L],V),B=this.getSectorFormat(k,L,!1),U={itemId:L,series:this,datum:k,datumIndex:L,angleValue:z,midAngle:E,midCos:Math.cos(E),midSin:Math.sin(E),startAngle:C,endAngle:O,radius:G,innerRadius:Math.max(this.radiusScale.convert(0),0),outerRadius:Math.max(this.radiusScale.convert(G),0),sectorFormat:B,radiusValue:j,legendItemValue:V,enabled:n&&a.getItemEnabled({seriesId:t,itemId:L}),focusable:!0,...W};S.push(U),D?.push({...U,radius:1,innerRadius:Math.max(this.radiusScale.convert(0),0),outerRadius:Math.max(this.radiusScale.convert(1),0),focusable:!1})}),this.zerosumOuterRing.visible=v===0,this.zerosumInnerRing.visible=v===0&&r!=null&&r!==1&&r>0,{itemId:t,nodeData:S,labelData:S,phantomNodeData:D}}getLabels(t,e,i,s,a,n,o){const{calloutLabel:r,sectorLabel:l,legendItemKey:c}=this.properties,h=!s||r.enabled?this.properties.calloutLabelKey:void 0,u=!s||l.enabled?this.properties.sectorLabelKey:void 0;if(!h&&!u&&!c)return{};const d={datum:t,angleKey:this.properties.angleKey,angleName:this.properties.angleName,radiusKey:this.properties.radiusKey,radiusName:this.properties.radiusName,calloutLabelKey:this.properties.calloutLabelKey,calloutLabelName:this.properties.calloutLabelName,sectorLabelKey:this.properties.sectorLabelKey,sectorLabelName:this.properties.sectorLabelName,legendItemKey:this.properties.legendItemKey},p={};return h&&i>Zi(r.minAngle)&&(p.calloutLabel={...this.getTextAlignment(e),text:this.getLabelText(r,{...d,value:a}),hidden:!1,collisionTextAlign:void 0,collisionOffsetY:0,box:void 0}),u&&(p.sectorLabel={text:this.getLabelText(l,{...d,value:n})}),c!=null&&o!=null&&(p.legendItem={key:c,text:o}),p}getTextAlignment(t){const e=[{textAlign:"center",textBaseline:"bottom"},{textAlign:"left",textBaseline:"middle"},{textAlign:"center",textBaseline:"hanging"},{textAlign:"right",textBaseline:"middle"}],i=Bp(t),s=-.75*Math.PI,a=i-s,n=Math.floor(a/(Math.PI/2)),o=wM(n,e.length);return e[o]}getSectorFormat(t,e,i){const{angleKey:s,radiusKey:a,calloutLabelKey:n,sectorLabelKey:o,legendItemKey:r,fills:l,strokes:c,itemStyler:h}=this.properties,u=c[e%c.length],{fill:d,fillOpacity:p,stroke:g,strokeWidth:f,strokeOpacity:x,lineDash:m,lineDashOffset:b,cornerRadius:v}=Lt(i&&this.properties.highlightStyle.item,{fill:l.length>0?l[e%l.length]:void 0,stroke:u,strokeWidth:this.getStrokeWidth(this.properties.strokeWidth),strokeOpacity:this.getOpacity()},this.properties);let S;return h&&(S=this.cachedDatumCallback(Ci(this.getDatumIdFromData(t),i?"highlight":"hide"),()=>h({datum:t,angleKey:s,radiusKey:a,calloutLabelKey:n,sectorLabelKey:o,legendItemKey:r,fill:d,fillOpacity:p,stroke:g,strokeWidth:f,strokeOpacity:x,lineDash:m,lineDashOffset:b,cornerRadius:v,highlighted:i,seriesId:this.id}))),{fill:S?.fill??d,fillOpacity:S?.fillOpacity??p,stroke:S?.stroke??g,strokeWidth:S?.strokeWidth??f,strokeOpacity:S?.strokeOpacity??x,lineDash:S?.lineDash??m,lineDashOffset:S?.lineDashOffset??b,cornerRadius:S?.cornerRadius??v}}getInnerRadius(){const{radius:t}=this,{innerRadiusRatio:e=1,innerRadiusOffset:i=0}=this.properties,s=t*e+i;return s===t||s<0?0:s}getOuterRadius(){const{outerRadiusRatio:t,outerRadiusOffset:e}=this.properties;return Math.max(this.radius*t+e,0)}updateRadiusScale(t){const e=[this.getInnerRadius(),this.getOuterRadius()];this.radiusScale.range=e,t&&(this.previousRadiusScale.range=e);const i=s=>({...s,innerRadius:Math.max(this.radiusScale.convert(0),0),outerRadius:Math.max(this.radiusScale.convert(s.radius),0)});this.nodeData=this.nodeData.map(i),this.phantomNodeData=this.phantomNodeData?.map(i)}getTitleTranslationY(){const t=Math.max(0,this.radiusScale.range[1]);if(t===0)return NaN;const i=2+(this.properties.title?.spacing??0),s=Math.max(0,-t);return-t-i-s}update({seriesRect:t}){const{title:e}=this.properties,i={seriesRectWidth:t?.width,seriesRectHeight:t?.height},s=eo(this.nodeDataDependencies,i)!=null;if(s&&(this._nodeDataDependencies=i),this.maybeRefreshNodeData(),this.updateTitleNodes(),this.updateRadiusScale(s),this.contentGroup.translationX=this.centerX,this.contentGroup.translationY=this.centerY,this.highlightGroup.translationX=this.centerX,this.highlightGroup.translationY=this.centerY,this.backgroundGroup.translationX=this.centerX,this.backgroundGroup.translationY=this.centerY,this.labelGroup&&(this.labelGroup.translationX=this.centerX,this.labelGroup.translationY=this.centerY),e){const a=this.getTitleTranslationY();e.node.y=isFinite(a)?a:0;const n=e.node.getBBox();e.node.visible=e.enabled&&isFinite(a)&&!this.bboxIntersectsSurroundingSeries(n)}for(const a of[this.zerosumInnerRing,this.zerosumOuterRing])a.fillOpacity=0,a.stroke=this.properties.calloutLabel.color,a.strokeWidth=1,a.strokeOpacity=1;this.updateNodeMidPoint(),this.updateSelections(),this.updateNodes(t)}updateTitleNodes(){const{oldTitle:t}=this,{title:e}=this.properties;t!==e&&(t&&this.labelGroup?.removeChild(t.node),e&&(e.node.textBaseline="bottom",this.labelGroup?.appendChild(e.node)),this.oldTitle=e)}updateNodeMidPoint(){const t=e=>{const i=e.innerRadius+(e.outerRadius-e.innerRadius)/2;e.midPoint={x:e.midCos*Math.max(0,i),y:e.midSin*Math.max(0,i)}};this.nodeData.forEach(t),this.phantomNodeData?.forEach(t)}updateSelections(){this.updateGroupSelection(),this.updateInnerCircleSelection()}updateGroupSelection(){const{itemSelection:t,highlightSelection:e,phantomSelection:i,highlightLabelSelection:s,calloutLabelSelection:a,labelSelection:n,innerLabelsSelection:o}=this,r=this.nodeData.map(c=>({...c,sectorFormat:{...c.sectorFormat}})),l=(c,h)=>{c.update(h,void 0,u=>this.getDatumId(u)),this.ctx.animationManager.isSkipped()&&c.cleanup()};l(t,this.nodeData),l(e,r),l(i,this.phantomNodeData??[]),a.update(this.calloutNodeData,c=>{const h=new Bs;h.tag=0,h.pointerEvents=1,c.appendChild(h);const u=new Ye;u.tag=1,u.pointerEvents=1,c.appendChild(u)}),n.update(this.nodeData),s.update(r),o.update(this.properties.innerLabels,c=>{c.pointerEvents=1})}updateInnerCircleSelection(){const{innerCircle:t}=this.properties;let e=0;const i=this.getInnerRadius();if(i>0){const a=Math.min(i,this.getOuterRadius()),n=1;e=Math.ceil(a*2+n)}const s=t?[{radius:e}]:[];this.innerCircleSelection.update(s)}updateNodes(t){const e=this.ctx.highlightManager.getActiveHighlight(),{visible:i}=this;this.backgroundGroup.visible=i,this.contentGroup.visible=i,this.highlightGroup.visible=i&&e?.series===this,this.highlightLabel.visible=i&&e?.series===this,this.labelGroup.visible=i,this.contentGroup.opacity=this.getOpacity(),this.innerCircleSelection.each((n,{radius:o})=>{n.setProperties({fill:this.properties.innerCircle?.fill,opacity:this.properties.innerCircle?.fillOpacity,size:o})});const s=this.ctx.animationManager.isSkipped(),a=(n,o,r,l)=>{const c=this.getSectorFormat(o.datum,o.itemId,l);o.sectorFormat.fill=c.fill,o.sectorFormat.stroke=c.stroke,s&&(n.startAngle=o.startAngle,n.endAngle=o.endAngle,n.innerRadius=o.innerRadius,n.outerRadius=o.outerRadius),(l||s)&&(n.fill=c.fill,n.stroke=c.stroke),n.strokeWidth=c.strokeWidth,n.fillOpacity=c.fillOpacity,n.strokeOpacity=c.strokeOpacity,n.lineDash=c.lineDash,n.lineDashOffset=c.lineDashOffset,n.cornerRadius=c.cornerRadius,n.fillShadow=this.properties.shadow;const h=Math.max((this.properties.sectorSpacing+(c.stroke!=null?c.strokeWidth:0))/2,0);n.inset=h,n.lineJoin=this.properties.sectorSpacing>=0||h>0?"miter":"round"};this.itemSelection.each((n,o,r)=>a(n,o,r,!1)),this.highlightSelection.each((n,o,r)=>{a(n,o,r,!0),n.visible=o.itemId===e?.itemId}),this.phantomSelection.each((n,o,r)=>a(n,o,r,!1)),this.updateCalloutLineNodes(),this.updateCalloutLabelNodes(t),this.updateSectorLabelNodes(),this.updateInnerLabelNodes(),this.updateZerosumRings(),this.animationState.transition("update")}updateCalloutLineNodes(){const{calloutLine:t}=this.properties,e=t.length,i=t.strokeWidth,s=t.colors??this.properties.strokes,{offset:a}=this.properties.calloutLabel;this.calloutLabelSelection.selectByTag(0).forEach((n,o)=>{const r=n.datum,{calloutLabel:l,outerRadius:c}=r;if(l?.text&&!l.hidden&&c!==0){n.visible=!0,n.strokeWidth=i,n.stroke=s[o%s.length],n.fill=void 0;const h=r.midCos*c,u=r.midSin*c;let d=r.midCos*(c+e),p=r.midSin*(c+e);if((l.collisionTextAlign??l.collisionOffsetY!==0)&&l.box!=null){const f=l.box;let x=d,m=p;d<f.x?x=f.x:d>f.x+f.width&&(x=f.x+f.width),p<f.y?m=f.y:p>f.y+f.height&&(m=f.y+f.height);const b=x-d,v=m-p,S=Math.sqrt(Math.pow(b,2)+Math.pow(v,2)),D=S-a;D>0&&(d=d+b*D/S,p=p+v*D/S)}n.x1=h,n.y1=u,n.x2=d,n.y2=p}else n.visible=!1})}getLabelOverflow(t,e,i){const s=-this.centerX,a=s+i.width,n=-this.centerY,o=n+i.height,r=1;let l=1;e.x+r<s?l=(e.x+e.width-s)/e.width:e.x+e.width-r>a&&(l=(a-e.x)/e.width);const c=e.y+r<n||e.y+e.height-r>o,h=l===1?t.length:Math.floor(t.length*l)-1,u=this.bboxIntersectsSurroundingSeries(e);return{textLength:h,hasVerticalOverflow:c,hasSurroundingSeriesOverflow:u}}bboxIntersectsSurroundingSeries(t){const{surroundingRadius:e}=this;if(e==null)return!1;const i=[{x:t.x,y:t.y},{x:t.x+t.width,y:t.y},{x:t.x+t.width,y:t.y+t.height},{x:t.x,y:t.y+t.height}],s=e**2;return i.some(a=>a.x**2+a.y**2>s)}computeCalloutLabelCollisionOffsets(){const{radiusScale:t}=this,{calloutLabel:e,calloutLine:i}=this.properties,{offset:s,minSpacing:a}=e,n=t.convert(0),o=m=>!m.calloutLabel||m.outerRadius===0,r=this.calloutNodeData,l=r.filter(m=>!o(m));if(l.forEach(m=>{const b=m.calloutLabel;b!=null&&(b.hidden=!1,b.collisionTextAlign=void 0,b.collisionOffsetY=0)}),l.length<=1)return;const c=l.filter(m=>m.midCos<0).sort((m,b)=>m.midSin-b.midSin),h=l.filter(m=>m.midCos>=0).sort((m,b)=>m.midSin-b.midSin),u=l.filter(m=>m.midSin<0&&m.calloutLabel?.textAlign==="center").sort((m,b)=>m.midCos-b.midCos),d=l.filter(m=>m.midSin>=0&&m.calloutLabel?.textAlign==="center").sort((m,b)=>m.midCos-b.midCos),p=m=>{const b=m.calloutLabel;if(b==null)return lt.zero.clone();const v=m.outerRadius+i.length+s,S=m.midCos*v,D=m.midSin*v+b.collisionOffsetY,k=b.collisionTextAlign??b.textAlign,L=b.textBaseline;return Ye.computeBBox(b.text,S,D,{font:this.properties.calloutLabel,textAlign:k,textBaseline:L})},g=(m,b,v)=>{const S=p(m).grow(a/2),D=p(b).grow(a/2);if(S.x<D.x+D.width&&S.x+S.width>D.x&&(v==="to-top"?S.y<D.y+D.height:S.y+S.height>D.y)){const L=v==="to-top"?S.y-D.y-D.height:S.y+S.height-D.y;b.calloutLabel.collisionOffsetY=L}},f=m=>{const b=m.slice().sort((S,D)=>Math.abs(S.midSin)-Math.abs(D.midSin))[0],v=m.indexOf(b);for(let S=v-1;S>=0;S--){const D=m[S+1],k=m[S];g(D,k,"to-top")}for(let S=v+1;S<m.length;S++){const D=m[S-1],k=m[S];g(D,k,"to-bottom")}},x=m=>{const b=l.some(T=>T.calloutLabel.collisionOffsetY!==0),v=m.map(T=>p(T)),S=v.map(T=>T.clone().grow(a/2));let D=!1;for(let T=0;T<S.length&&!D;T++){const N=S[T];for(let C=T+1;C<m.length;C++){const O=S[C];if(N.collidesBBox(O)){D=!0;break}}}const k=r.map(T=>{const{startAngle:N,endAngle:C,outerRadius:O}=T;return{startAngle:N,endAngle:C,innerRadius:n,outerRadius:O}}),L=v.some(T=>k.some(N=>Q1(T,N)));!D&&!b&&!L||m.filter(T=>T.calloutLabel.textAlign==="center").forEach(T=>{const N=T.calloutLabel;T.midCos<0?N.collisionTextAlign="right":T.midCos>0?N.collisionTextAlign="left":N.collisionTextAlign="center"})};f(c),f(h),x(u),x(d)}updateCalloutLabelNodes(t){const{radiusScale:e}=this,{calloutLabel:i,calloutLine:s}=this.properties,a=s.length,{offset:n,color:o}=i,r=new Ye;this.calloutLabelSelection.selectByTag(1).forEach(l=>{const{datum:c}=l,h=c.calloutLabel,u=e.convert(c.radius),d=Math.max(0,u);if(!h?.text||d===0||h.hidden){l.visible=!1;return}const p=d+a+n,g=c.midCos*p,f=c.midSin*p+h.collisionOffsetY,x={textAlign:h.collisionTextAlign??h.textAlign,textBaseline:h.textBaseline};r.text=h.text,r.x=g,r.y=f,r.setFont(this.properties.calloutLabel),r.setAlign(x);const m=r.getBBox();let b=h.text,v=!0;if(i.avoidCollisions){const{textLength:S,hasVerticalOverflow:D}=this.getLabelOverflow(h.text,m,t);b=h.text.length===S?h.text:`${h.text.substring(0,S)}\u2026`,v=!D}l.text=b,l.x=g,l.y=f,l.setFont(this.properties.calloutLabel),l.setAlign(x),l.fill=o,l.visible=v})}computeLabelsBBox(t,e){const{calloutLabel:i,calloutLine:s}=this.properties,a=s.length,{offset:n,maxCollisionOffset:o,minSpacing:r}=i;if(!i.avoidCollisions)return null;this.maybeRefreshNodeData(),this.updateRadiusScale(!1),this.computeCalloutLabelCollisionOffsets();const l=[],c=new Ye;let h;const{title:u}=this.properties;if(u?.text&&u.enabled){const d=this.getTitleTranslationY();isFinite(d)&&(c.text=u.text,c.x=0,c.y=d,c.setFont(u),c.setAlign({textBaseline:"bottom",textAlign:"center"}),h=c.getBBox(),l.push(h))}return this.calloutNodeData.forEach(d=>{const p=d.calloutLabel;if(!p||d.outerRadius===0)return null;const g=d.outerRadius+a+n,f=d.midCos*g,x=d.midSin*g+p.collisionOffsetY;c.text=p.text,c.x=f,c.y=x,c.setFont(this.properties.calloutLabel),c.setAlign({textAlign:p.collisionTextAlign??p.textAlign,textBaseline:p.textBaseline});const m=c.getBBox();if(p.box=m,Math.abs(p.collisionOffsetY)>o){p.hidden=!0;return}if(h){const b=-this.centerY,v=new lt(h.x-r,b,h.width+2*r,h.y+h.height+r-b);if(m.collidesBBox(v)){p.hidden=!0;return}}if(t.hideWhenNecessary){const{textLength:b,hasVerticalOverflow:v,hasSurroundingSeriesOverflow:S}=this.getLabelOverflow(p.text,m,e),D=p.text.length>2&&b<2;if(v||D||S){p.hidden=!0;return}}p.hidden=!1,l.push(m)}),l.length===0?null:lt.merge(l)}updateSectorLabelNodes(){const{radiusScale:t}=this,e=t.convert(0),{fontSize:i,fontStyle:s,fontWeight:a,fontFamily:n,positionOffset:o,positionRatio:r,color:l}=this.properties.sectorLabel,c=(h,u)=>{const{sectorLabel:d,outerRadius:p}=u;let g=!1;if(d&&p!==0){const f=e*(1-r)+p*r+o;h.fill=l,h.fontStyle=s,h.fontWeight=a,h.fontSize=i,h.fontFamily=n,h.text=d.text,h.x=u.midCos*f,h.y=u.midSin*f,h.textAlign="center",h.textBaseline="middle";const x=h.getBBox(),m=[[x.x,x.y],[x.x+x.width,x.y],[x.x+x.width,x.y+x.height],[x.x,x.y+x.height]],{startAngle:b,endAngle:v}=u,S={startAngle:b,endAngle:v,innerRadius:e,outerRadius:p};m.every(([D,k])=>cb(D,k,S))&&(g=!0)}h.visible=g};this.labelSelection.each(c),this.highlightLabelSelection.each(c)}updateInnerLabelNodes(){const t=[],e=[];this.innerLabelsSelection.each((h,u)=>{const{fontStyle:d,fontWeight:p,fontSize:g,fontFamily:f,color:x}=u;h.fontStyle=d,h.fontWeight=p,h.fontSize=g,h.fontFamily=f,h.text=u.text,h.x=0,h.y=0,h.fill=x,h.textAlign="center",h.textBaseline="alphabetic",t.push(h.getBBox()),e.push(u.spacing)});const i=h=>h===0?0:e[h],s=h=>h===e.length-1?0:e[h],a=t.reduce((h,u,d)=>h+u.height+i(d)+s(d),0),n=Math.max(...t.map(h=>h.width)),o=this.getInnerRadius(),l=Math.sqrt(Math.pow(n/2,2)+Math.pow(a/2,2))<=(o>0?o:this.getOuterRadius()),c=[];for(let h=0,u=-a/2;h<t.length;h++){const p=t[h].height+u+i(h);c.push(p),u=p+s(h)}this.innerLabelsSelection.each((h,u,d)=>{h.y=c[d],h.visible=l})}updateZerosumRings(){this.zerosumOuterRing.size=this.getOuterRadius()*2,this.zerosumInnerRing.size=this.getInnerRadius()*2}pickNodeClosestDatum(t){return ik(this,t)}getTooltipContent(t){const{id:e,dataModel:i,processedData:s,properties:a}=this,{legendItemKey:n,calloutLabelKey:o,calloutLabelName:r,sectorLabelKey:l,sectorLabelName:c,angleKey:h,angleName:u,radiusKey:d,radiusName:p,tooltip:g}=a,f=this.properties.title.text;if(!i||!s||s.rawData.length===0)return;const{datumIndex:x}=t,m=s.rawData[x],{angleRawValues:b,legendItemValues:v,calloutLabelValues:S,sectorLabelValues:D}=this.getProcessedDataValues(i,s),k=b[x],L=v?.[x]??(o===h?void 0:S?.[x])??(l===h?void 0:D?.[x])??u;return g.formatTooltip({title:f,symbol:this.legendItemSymbol(x),data:[{label:L,fallbackLabel:h,value:String(k)}]},{seriesId:e,datum:m,title:u,legendItemKey:n,calloutLabelKey:o,calloutLabelName:r,sectorLabelKey:l,sectorLabelName:c,angleKey:h,angleName:u,radiusKey:d,radiusName:p,...this.getSectorFormat(m,x,!1)})}legendItemSymbol(t){const e=this.processedData?.rawData[t],i=this.getSectorFormat(e,t,!1);return{marker:{fill:i.fill,stroke:i.stroke,fillOpacity:this.properties.fillOpacity,strokeOpacity:this.properties.strokeOpacity,strokeWidth:this.properties.strokeWidth}}}getLegendData(t){const{visible:e,processedData:i,dataModel:s,id:a,ctx:{legendManager:n}}=this;if(!s||!i||!this.properties.isValid()||t!=="category")return[];const{angleKey:o,calloutLabelKey:r,sectorLabelKey:l,legendItemKey:c,showInLegend:h}=this.properties;if(!c&&(!r||r===o)&&(!l||l===o))return[];const{angleRawValues:u,calloutLabelValues:d,sectorLabelValues:p,legendItemValues:g}=this.getProcessedDataValues(s,i),f=this.properties.title?.showInLegend&&this.properties.title.text,x=[],m=this.properties.hideZeroValueSectorsInLegend;for(let b=0;b<i.rawData.length;b++){const v=i.rawData[b],S=u[b];if(m&&S===0)continue;const D=[];f&&D.push(f);const k=this.getLabels(v,2*Math.PI,2*Math.PI,!1,d?.[b],p?.[b],g?.[b]);c&&k.legendItem!==void 0?D.push(k.legendItem.text):r&&r!==o&&k.calloutLabel?.text!==void 0?D.push(k.calloutLabel?.text):l&&l!==o&&k.sectorLabel?.text!==void 0&&D.push(k.sectorLabel?.text),D.length!==0&&x.push({legendType:"category",id:a,datum:v,itemId:b,seriesId:a,enabled:e&&n.getItemEnabled({seriesId:a,itemId:b}),label:{text:D.join(" - ")},symbol:this.legendItemSymbol(b),legendItemName:c!=null?v[c]:void 0,hideInLegend:!h})}return x}setLegendState(t){const{id:e,ctx:{legendManager:i,updateService:s}}=this;t.forEach((a,n)=>i.toggleItem({enabled:a,seriesId:e,itemId:n})),i.update(),s.update(4)}animateEmptyUpdateReady(t){const{animationManager:e}=this.ctx,i=uh(!0,this.properties.rotation,this.radiusScale,this.previousRadiusScale);De(this.id,"nodes",e,[this.itemSelection,this.highlightSelection,this.phantomSelection],i.nodes,(s,a)=>this.getDatumId(a)),De(this.id,"innerCircle",e,[this.innerCircleSelection],i.innerCircle),Gt(this,"callout",e,this.calloutLabelSelection),Gt(this,"sector",e,this.labelSelection),Gt(this,"highlight",e,this.highlightLabelSelection),Gt(this,"inner",e,this.innerLabelsSelection),this.previousRadiusScale.range=this.radiusScale.range}animateWaitingUpdateReady(){const{itemSelection:t,highlightSelection:e,phantomSelection:i,processedData:s,radiusScale:a,previousRadiusScale:n}=this,{animationManager:o}=this.ctx,r=s?.reduced?.diff?.[this.id];this.ctx.animationManager.stopByAnimationGroupId(this.id);const l=(r?.moved.size??0)===0,c=(s?.defs.keys.length??0)>0,h=s?.reduced?.animationValidation?.uniqueKeys??!0;(!l||!c||!h)&&this.ctx.animationManager.skipCurrentBatch();const u=!this.nodeData.some(p=>p.enabled),d=uh(!1,this.properties.rotation,a,n);De(this.id,"nodes",o,[t,e,i],d.nodes,(p,g)=>this.getDatumId(g),r),De(this.id,"innerCircle",o,[this.innerCircleSelection],d.innerCircle),Gt(this,"callout",this.ctx.animationManager,this.calloutLabelSelection),Gt(this,"sector",this.ctx.animationManager,this.labelSelection),Gt(this,"highlight",this.ctx.animationManager,this.highlightLabelSelection),this.noVisibleData!==u&&(this.noVisibleData=u,Gt(this,"inner",this.ctx.animationManager,this.innerLabelsSelection)),this.previousRadiusScale.range=this.radiusScale.range}animateClearingUpdateEmpty(){const{itemSelection:t,highlightSelection:e,phantomSelection:i,radiusScale:s,previousRadiusScale:a}=this,{animationManager:n}=this.ctx,o=uh(!1,this.properties.rotation,s,a);De(this.id,"nodes",n,[t,e,i],o.nodes,(r,l)=>this.getDatumId(l)),De(this.id,"innerCircle",n,[this.innerCircleSelection],o.innerCircle),Nl(this,"callout",this.ctx.animationManager,this.calloutLabelSelection),Nl(this,"sector",this.ctx.animationManager,this.labelSelection),Nl(this,"highlight",this.ctx.animationManager,this.highlightLabelSelection),Nl(this,"inner",this.ctx.animationManager,this.innerLabelsSelection),this.previousRadiusScale.range=this.radiusScale.range}getDatumIdFromData(t){const{calloutLabelKey:e,sectorLabelKey:i,legendItemKey:s}=this.properties;if(this.processedData?.reduced?.animationValidation?.uniqueKeys){if(s)return t[s];if(e)return t[e];if(i)return t[i]}}getDatumId(t){const{datumIndex:e}=t,i=this.getDatumIdFromData(t.datum);return String(i??e)}},Sb.className="DonutSeries",Sb.type="donut"}}),eP,L9=A({"packages/ag-charts-community/src/chart/series/polar/donutTheme.ts"(){"use strict";yo(),de(),eP={series:{title:{enabled:!0,fontWeight:"normal",fontSize:14,fontFamily:xe,color:hr,spacing:5},calloutLabel:{enabled:!0,fontSize:12,fontFamily:xe,color:$e,offset:3,minAngle:0},sectorLabel:{enabled:!0,fontWeight:"normal",fontSize:12,fontFamily:xe,color:cr,positionOffset:0,positionRatio:.5},calloutLine:{length:10,strokeWidth:2},fillOpacity:1,strokeOpacity:1,strokeWidth:0,lineDash:[0],lineDashOffset:0,rotation:0,sectorSpacing:1,shadow:{enabled:!1,color:dr,xOffset:3,yOffset:3,blur:5},innerLabels:{fontSize:12,fontFamily:xe,color:$e,spacing:2}}}}}),iP,nk,sP=A({"packages/ag-charts-community/src/chart/series/polar/pieTheme.ts"(){"use strict";yo(),de(),iP={series:{title:{enabled:!0,fontWeight:"normal",fontSize:14,fontFamily:xe,color:hr,spacing:5},calloutLabel:{enabled:!0,fontSize:12,fontFamily:xe,color:$e,offset:3,minAngle:0},sectorLabel:{enabled:!0,fontWeight:"normal",fontSize:12,fontFamily:xe,color:cr,positionOffset:0,positionRatio:.5},calloutLine:{length:10,strokeWidth:2},fillOpacity:1,strokeOpacity:1,strokeWidth:0,lineDash:[0],lineDashOffset:0,rotation:0,sectorSpacing:1,shadow:{enabled:!1,color:dr,xOffset:3,yOffset:3,blur:5}}},nk=({takeColors:t,colorsCount:e})=>{const{fills:i,strokes:s}=t(e);return{fills:i,strokes:s,calloutLine:{colors:s}}}}}),aP,T9=A({"packages/ag-charts-community/src/chart/series/polar/donutSeriesModule.ts"(){"use strict";k9(),L9(),sP(),aP={type:"series",optionsKey:"series[]",packageType:"community",chartTypes:["polar"],identifier:"donut",moduleFactory:t=>new Sb(t),tooltipDefaults:{range:"exact"},themeTemplate:eP,paletteFactory:nk}}}),ok,dh,vb,yf,Bt,N9=A({"packages/ag-charts-community/src/chart/series/polar/pieSeriesProperties.ts"(){"use strict";sd(),Jt(),xt(),dl(),Fa(),pf(),mg(),mr(),ok=class extends ee{constructor(){super(...arguments),this.showInLegend=!1}},M([I(pt)],ok.prototype,"showInLegend",2),dh=class extends Ke{constructor(){super(...arguments),this.offset=3,this.minAngle=0,this.minSpacing=4,this.maxCollisionOffset=50,this.avoidCollisions=!0}},M([I(nt)],dh.prototype,"offset",2),M([I(wt.restrict({min:0,max:360}))],dh.prototype,"minAngle",2),M([I(nt)],dh.prototype,"minSpacing",2),M([I(nt)],dh.prototype,"maxCollisionOffset",2),M([I(pt)],dh.prototype,"avoidCollisions",2),vb=class extends Ke{constructor(){super(...arguments),this.positionOffset=0,this.positionRatio=.5}},M([I(wt)],vb.prototype,"positionOffset",2),M([I(Ft)],vb.prototype,"positionRatio",2),yf=class extends Mt{constructor(){super(...arguments),this.length=10,this.strokeWidth=1}},M([I(oa,{optional:!0})],yf.prototype,"colors",2),M([I(nt)],yf.prototype,"length",2),M([I(nt)],yf.prototype,"strokeWidth",2),Bt=class extends Us{constructor(){super(...arguments),this.fills=Object.values(qe),this.strokes=Object.values(An),this.fillOpacity=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.cornerRadius=0,this.rotation=0,this.outerRadiusOffset=0,this.outerRadiusRatio=1,this.strokeWidth=1,this.sectorSpacing=0,this.hideZeroValueSectorsInLegend=!1,this.title=new ok,this.shadow=new Ha,this.calloutLabel=new dh,this.sectorLabel=new vb,this.calloutLine=new yf,this.tooltip=new Ei}},M([I(J)],Bt.prototype,"angleKey",2),M([I(J,{optional:!0})],Bt.prototype,"angleName",2),M([I(J,{optional:!0})],Bt.prototype,"angleFilterKey",2),M([I(J,{optional:!0})],Bt.prototype,"radiusKey",2),M([I(J,{optional:!0})],Bt.prototype,"radiusName",2),M([I(nt,{optional:!0})],Bt.prototype,"radiusMin",2),M([I(nt,{optional:!0})],Bt.prototype,"radiusMax",2),M([I(J,{optional:!0})],Bt.prototype,"calloutLabelKey",2),M([I(J,{optional:!0})],Bt.prototype,"calloutLabelName",2),M([I(J,{optional:!0})],Bt.prototype,"sectorLabelKey",2),M([I(J,{optional:!0})],Bt.prototype,"sectorLabelName",2),M([I(J,{optional:!0})],Bt.prototype,"legendItemKey",2),M([I(oa)],Bt.prototype,"fills",2),M([I(oa)],Bt.prototype,"strokes",2),M([I(Ft)],Bt.prototype,"fillOpacity",2),M([I(Ft)],Bt.prototype,"strokeOpacity",2),M([I(Qn)],Bt.prototype,"lineDash",2),M([I(nt)],Bt.prototype,"lineDashOffset",2),M([I(nt)],Bt.prototype,"cornerRadius",2),M([I(Yi,{optional:!0})],Bt.prototype,"itemStyler",2),M([I(wt)],Bt.prototype,"rotation",2),M([I(wt)],Bt.prototype,"outerRadiusOffset",2),M([I(Ft)],Bt.prototype,"outerRadiusRatio",2),M([I(nt)],Bt.prototype,"strokeWidth",2),M([I(wt)],Bt.prototype,"sectorSpacing",2),M([I(pt)],Bt.prototype,"hideZeroValueSectorsInLegend",2),M([I(ct)],Bt.prototype,"title",2),M([I(ct)],Bt.prototype,"shadow",2),M([I(ct)],Bt.prototype,"calloutLabel",2),M([I(ct)],Bt.prototype,"sectorLabel",2),M([I(ct)],Bt.prototype,"calloutLine",2),M([I(ct)],Bt.prototype,"tooltip",2)}}),nP,Mb,C9=A({"packages/ag-charts-community/src/chart/series/polar/pieSeries.ts"(){"use strict";Ii(),Il(),kt(),me(),ae(),Qo(),Pc(),gb(),Ss(),df(),Ti(),ha(),St(),It(),Yt(),fe(),ro(),Ga(),vn(),pg(),Vs(),Ds(),yr(),N9(),sk(),bb(),xb(),nP=class extends zu{constructor(t,e,i,s){super(t,e,i,s),this.angleKey=s.properties.angleKey,this.radiusKey=s.properties.radiusKey,this.calloutLabelKey=s.properties.calloutLabelKey,this.sectorLabelKey=s.properties.sectorLabelKey}},Mb=class extends ff{constructor(t){super({moduleCtx:t,pickModes:[1,0],useLabelLayer:!0,animationResetFns:{item:ek,label:fr}}),this.properties=new Bt,this.phantomNodeData=void 0,this.backgroundGroup=new Xi({name:`${this.id}-background`,zIndex:0}),this.previousRadiusScale=new pa,this.radiusScale=new pa,this.phantomGroup=this.backgroundGroup.appendChild(new mt({name:"phantom"})),this.phantomSelection=Te.select(this.phantomGroup,()=>this.nodeFactory(),!1),this.calloutLabelGroup=this.contentGroup.appendChild(new mt({name:"pieCalloutLabels"})),this.calloutLabelSelection=new Te(this.calloutLabelGroup,mt),this.zerosumRingsGroup=this.backgroundGroup.appendChild(new mt({name:`${this.id}-zerosumRings`})),this.zerosumOuterRing=this.zerosumRingsGroup.appendChild(new sr),this.surroundingRadius=void 0,this.NodeEvent=nP,this.angleScale=new pa,this.angleScale.domain=[0,1],this.angleScale.range=[-Math.PI,Math.PI].map(e=>e+Math.PI/2),this.phantomGroup.opacity=.2}get calloutNodeData(){return this.phantomNodeData??this.nodeData}attachSeries(t,e,i){super.attachSeries(t,e,i),t.appendChild(this.backgroundGroup)}detachSeries(t,e,i){super.detachSeries(t,e,i),t?.removeChild(this.backgroundGroup)}setSeriesIndex(t){return super.setSeriesIndex(t)?(this.backgroundGroup.zIndex=[0,t],!0):!1}nodeFactory(){const t=new ui;return t.miterLimit=1e9,t}getSeriesDomain(t){return t==="x"?this.angleScale.domain:this.radiusScale.domain}async processData(t){if(this.data==null||!this.properties.isValid())return;const{visible:e,id:i,ctx:{legendManager:s}}=this,{angleKey:a,angleFilterKey:n,radiusKey:o,calloutLabelKey:r,sectorLabelKey:l,legendItemKey:c}=this.properties,h=(x,m,b)=>e&&s.getItemEnabled({seriesId:i,itemId:b}),u=!this.ctx.animationManager.isSkipped(),d=[],p=[];c?d.push(Sn(c,"band",{id:"legendItemKey"})):r?d.push(Sn(r,"band",{id:"calloutLabelKey"})):l&&d.push(Sn(l,"band",{id:"sectorLabelKey"}));const g=this.radiusScale.type,f=this.angleScale.type;o&&p.push(ZA(o,{id:"radiusValue",min:this.properties.radiusMin??0,max:this.properties.radiusMax}),Tt(o,g,{id:"radiusRaw"}),eh("radiusValue",[0,1],1,this.properties.radiusMin??0,this.properties.radiusMax)),r&&p.push(Tt(r,"band",{id:"calloutLabelValue"})),l&&p.push(Tt(l,"band",{id:"sectorLabelValue"})),c&&p.push(Tt(c,"band",{id:"legendItemValue"})),n&&p.push(Sg(n,f,{id:"angleFilterValue",onlyPositive:!0,validation:h,invalidValue:0}),Tt(n,f,{id:"angleFilterRaw"}),eh("angleFilterValue",[0,1],0,0)),u&&this.processedData?.reduced?.animationValidation?.uniqueKeys&&d.length>0&&p.push(Xu(this.id,this.processedData)),p.push(Ku()),await this.requestDataModel(t,this.data,{props:[...d,Sg(a,f,{id:"angleValue",onlyPositive:!0,validation:h,invalidValue:0}),Tt(a,f,{id:"angleRaw"}),eh("angleValue",[0,1],0,0),...p]});for(const x of this.processedData?.defs?.values??[]){const{id:m,missing:b,property:v}=x,S=uA(this,b);m!=="angleRaw"&&S>0&&st.warnOnce(`no value was found for the key '${String(v)}' on ${S} data element${S>1?"s":""}`)}this.animationState.transition("updateData")}maybeRefreshNodeData(){if(!this.nodeDataRefresh)return;const{nodeData:t=[],phantomNodeData:e}=this.createNodeData()??{};this.nodeData=t,this.phantomNodeData=e,this.nodeDataRefresh=!1}getProcessedDataValues(t,e){const i=t.resolveColumnById(this,"angleValue",e),s=t.resolveColumnById(this,"angleRaw",e),a=this.properties.angleFilterKey!=null?t.resolveColumnById(this,"angleFilterValue",e):void 0,n=this.properties.angleFilterKey!=null?t.resolveColumnById(this,"angleFilterRaw",e):void 0,o=this.properties.radiusKey?t.resolveColumnById(this,"radiusValue",e):void 0,r=this.properties.radiusKey?t.resolveColumnById(this,"radiusRaw",e):void 0,l=this.properties.calloutLabelKey?t.resolveColumnById(this,"calloutLabelValue",e):void 0,c=this.properties.sectorLabelKey?t.resolveColumnById(this,"sectorLabelValue",e):void 0,h=this.properties.legendItemKey?t.resolveColumnById(this,"legendItemValue",e):void 0;return{angleValues:i,angleRawValues:s,angleFilterValues:a,angleFilterRawValues:n,radiusValues:o,radiusRawValues:r,calloutLabelValues:l,sectorLabelValues:c,legendItemValues:h}}createNodeData(){const{id:t,processedData:e,dataModel:i,angleScale:s,ctx:{legendManager:a},visible:n}=this,{rotation:o}=this.properties;if(!e?.rawData.length||!i||e.type!=="ungrouped")return;const{angleValues:r,angleRawValues:l,angleFilterValues:c,angleFilterRawValues:h,radiusValues:u,radiusRawValues:d,calloutLabelValues:p,sectorLabelValues:g,legendItemValues:f}=this.getProcessedDataValues(i,e),x=h?.some((D,k)=>D>l[k])??!1;let m=0,b=0;const v=[],S=h!=null?[]:void 0;return e.rawData.forEach((D,k)=>{const L=x?c[k]:r[k],T=h!=null&&!x?Math.sqrt(h[k]/l[k]):1,N=s.convert(m)+Zi(o);m=L,b+=L;const C=s.convert(m)+Zi(o),O=Math.abs(C-N),R=N+O/2,E=l[k],F=(u?.[k]??1)*T,G=d?.[k],j=f?.[k],V=this.getLabels(D,R,O,!0,p?.[k],g?.[k],j),W=this.getSectorFormat(D,k,!1),B={itemId:k,series:this,datum:D,datumIndex:k,angleValue:E,midAngle:R,midCos:Math.cos(R),midSin:Math.sin(R),startAngle:N,endAngle:C,radius:F,innerRadius:Math.max(this.radiusScale.convert(0),0),outerRadius:Math.max(this.radiusScale.convert(F),0),sectorFormat:W,radiusValue:G,legendItemValue:j,enabled:n&&a.getItemEnabled({seriesId:t,itemId:k}),...V};v.push(B),S?.push({...B,radius:1,innerRadius:Math.max(this.radiusScale.convert(0),0),outerRadius:Math.max(this.radiusScale.convert(1),0)})}),this.zerosumOuterRing.visible=b===0,{itemId:t,nodeData:v,labelData:v,phantomNodeData:S}}getLabels(t,e,i,s,a,n,o){const{calloutLabel:r,sectorLabel:l,legendItemKey:c}=this.properties,h=!s||r.enabled?this.properties.calloutLabelKey:void 0,u=!s||l.enabled?this.properties.sectorLabelKey:void 0;if(!h&&!u&&!c)return{};const d={datum:t,angleKey:this.properties.angleKey,angleName:this.properties.angleName,radiusKey:this.properties.radiusKey,radiusName:this.properties.radiusName,calloutLabelKey:this.properties.calloutLabelKey,calloutLabelName:this.properties.calloutLabelName,sectorLabelKey:this.properties.sectorLabelKey,sectorLabelName:this.properties.sectorLabelName,legendItemKey:this.properties.legendItemKey},p={};return h&&i>Zi(r.minAngle)&&(p.calloutLabel={...this.getTextAlignment(e),text:this.getLabelText(r,{...d,value:a}),hidden:!1,collisionTextAlign:void 0,collisionOffsetY:0,box:void 0}),u&&(p.sectorLabel={text:this.getLabelText(l,{...d,value:n})}),c!=null&&o!=null&&(p.legendItem={key:c,text:o}),p}getTextAlignment(t){const e=[{textAlign:"center",textBaseline:"bottom"},{textAlign:"left",textBaseline:"middle"},{textAlign:"center",textBaseline:"hanging"},{textAlign:"right",textBaseline:"middle"}],i=Bp(t),s=-.75*Math.PI,a=i-s,n=Math.floor(a/(Math.PI/2)),o=wM(n,e.length);return e[o]}getSectorFormat(t,e,i){const{angleKey:s,radiusKey:a,calloutLabelKey:n,sectorLabelKey:o,legendItemKey:r,fills:l,strokes:c,itemStyler:h}=this.properties,u=c[e%c.length],{fill:d,fillOpacity:p,stroke:g,strokeWidth:f,strokeOpacity:x,lineDash:m,lineDashOffset:b,cornerRadius:v}=Lt(i&&this.properties.highlightStyle.item,{fill:l.length>0?l[e%l.length]:void 0,stroke:u,strokeWidth:this.getStrokeWidth(this.properties.strokeWidth),strokeOpacity:this.getOpacity()},this.properties);let S;return h&&(S=this.cachedDatumCallback(Ci(this.getDatumIdFromData(t),i?"highlight":"hide"),()=>h({datum:t,angleKey:s,radiusKey:a,calloutLabelKey:n,sectorLabelKey:o,legendItemKey:r,fill:d,strokeOpacity:x,stroke:g,strokeWidth:f,fillOpacity:p,lineDash:m,lineDashOffset:b,cornerRadius:v,highlighted:i,seriesId:this.id}))),{fill:S?.fill??d,fillOpacity:S?.fillOpacity??p,stroke:S?.stroke??g,strokeWidth:S?.strokeWidth??f,strokeOpacity:S?.strokeOpacity??x,lineDash:S?.lineDash??m,lineDashOffset:S?.lineDashOffset??b,cornerRadius:S?.cornerRadius??v}}getOuterRadius(){return Math.max(this.radius*this.properties.outerRadiusRatio+this.properties.outerRadiusOffset,0)}updateRadiusScale(t){const e=[0,this.getOuterRadius()];this.radiusScale.range=e,t&&(this.previousRadiusScale.range=e);const i=s=>({...s,innerRadius:Math.max(this.radiusScale.convert(0),0),outerRadius:Math.max(this.radiusScale.convert(s.radius),0)});this.nodeData=this.nodeData.map(i),this.phantomNodeData=this.phantomNodeData?.map(i)}getTitleTranslationY(){const t=Math.max(0,this.radiusScale.range[1]);if(t===0)return NaN;const i=2+(this.properties.title?.spacing??0),s=Math.max(0,-t);return-t-i-s}update({seriesRect:t}){const{title:e}=this.properties,i={seriesRectWidth:t?.width,seriesRectHeight:t?.height},s=eo(this.nodeDataDependencies,i)!=null;if(s&&(this._nodeDataDependencies=i),this.maybeRefreshNodeData(),this.updateTitleNodes(),this.updateRadiusScale(s),this.contentGroup.translationX=this.centerX,this.contentGroup.translationY=this.centerY,this.highlightGroup.translationX=this.centerX,this.highlightGroup.translationY=this.centerY,this.backgroundGroup.translationX=this.centerX,this.backgroundGroup.translationY=this.centerY,this.labelGroup&&(this.labelGroup.translationX=this.centerX,this.labelGroup.translationY=this.centerY),e){const a=this.getTitleTranslationY();e.node.y=isFinite(a)?a:0;const n=e.node.getBBox();e.node.visible=e.enabled&&isFinite(a)&&!this.bboxIntersectsSurroundingSeries(n)}this.zerosumOuterRing.fillOpacity=0,this.zerosumOuterRing.stroke=this.properties.calloutLabel.color,this.zerosumOuterRing.strokeWidth=1,this.zerosumOuterRing.strokeOpacity=1,this.updateNodeMidPoint(),this.updateSelections(),this.updateNodes(t)}updateTitleNodes(){const{oldTitle:t}=this,{title:e}=this.properties;t!==e&&(t&&this.labelGroup?.removeChild(t.node),e&&(e.node.textBaseline="bottom",this.labelGroup?.appendChild(e.node)),this.oldTitle=e)}updateNodeMidPoint(){const t=e=>{const i=e.innerRadius+(e.outerRadius-e.innerRadius)/2;e.midPoint={x:e.midCos*Math.max(0,i),y:e.midSin*Math.max(0,i)}};this.nodeData.forEach(t),this.phantomNodeData?.forEach(t)}updateSelections(){this.updateGroupSelection()}updateGroupSelection(){const{itemSelection:t,highlightSelection:e,phantomSelection:i,highlightLabelSelection:s,calloutLabelSelection:a,labelSelection:n}=this,o=this.nodeData.map(l=>({...l,sectorFormat:{...l.sectorFormat}})),r=(l,c)=>{l.update(c,void 0,h=>this.getDatumId(h)),this.ctx.animationManager.isSkipped()&&l.cleanup()};r(t,this.nodeData),r(e,o),r(i,this.phantomNodeData??[]),a.update(this.calloutNodeData,l=>{const c=new Bs;c.tag=0,c.pointerEvents=1,l.appendChild(c);const h=new Ye;h.tag=1,h.pointerEvents=1,l.appendChild(h)}),n.update(this.nodeData),s.update(o)}updateNodes(t){const e=this.ctx.highlightManager.getActiveHighlight(),{visible:i}=this;this.backgroundGroup.visible=i,this.contentGroup.visible=i,this.highlightGroup.visible=i&&e?.series===this,this.highlightLabel.visible=i&&e?.series===this,this.labelGroup&&(this.labelGroup.visible=i),this.contentGroup.opacity=this.getOpacity();const s=this.ctx.animationManager.isSkipped(),a=(n,o,r,l)=>{const c=this.getSectorFormat(o.datum,o.itemId,l);o.sectorFormat.fill=c.fill,o.sectorFormat.stroke=c.stroke,s&&(n.startAngle=o.startAngle,n.endAngle=o.endAngle,n.innerRadius=o.innerRadius,n.outerRadius=o.outerRadius),(l||s)&&(n.fill=c.fill,n.stroke=c.stroke),n.strokeWidth=c.strokeWidth,n.fillOpacity=c.fillOpacity,n.strokeOpacity=c.strokeOpacity,n.lineDash=c.lineDash,n.lineDashOffset=c.lineDashOffset,n.cornerRadius=c.cornerRadius,n.fillShadow=this.properties.shadow;const h=Math.max((this.properties.sectorSpacing+(c.stroke!=null?c.strokeWidth:0))/2,0);n.inset=h,n.lineJoin=this.properties.sectorSpacing>=0||h>0?"miter":"round"};this.itemSelection.each((n,o,r)=>a(n,o,r,!1)),this.highlightSelection.each((n,o,r)=>{a(n,o,r,!0),n.visible=o.itemId===e?.itemId}),this.phantomSelection.each((n,o,r)=>a(n,o,r,!1)),this.updateCalloutLineNodes(),this.updateCalloutLabelNodes(t),this.updateSectorLabelNodes(),this.updateZerosumRings(),this.animationState.transition("update")}updateCalloutLineNodes(){const{calloutLine:t}=this.properties,e=t.length,i=t.strokeWidth,s=t.colors??this.properties.strokes,{offset:a}=this.properties.calloutLabel;this.calloutLabelSelection.selectByTag(0).forEach((n,o)=>{const r=n.datum,{calloutLabel:l,outerRadius:c}=r;if(l?.text&&!l.hidden&&c!==0){n.visible=!0,n.strokeWidth=i,n.stroke=s[o%s.length],n.fill=void 0;const h=r.midCos*c,u=r.midSin*c;let d=r.midCos*(c+e),p=r.midSin*(c+e);if((l.collisionTextAlign??l.collisionOffsetY!==0)&&l.box!=null){const f=l.box;let x=d,m=p;d<f.x?x=f.x:d>f.x+f.width&&(x=f.x+f.width),p<f.y?m=f.y:p>f.y+f.height&&(m=f.y+f.height);const b=x-d,v=m-p,S=Math.sqrt(Math.pow(b,2)+Math.pow(v,2)),D=S-a;D>0&&(d=d+b*D/S,p=p+v*D/S)}n.x1=h,n.y1=u,n.x2=d,n.y2=p}else n.visible=!1})}getLabelOverflow(t,e,i){const s=-this.centerX,a=s+i.width,n=-this.centerY,o=n+i.height,r=1;let l=1;e.x+r<s?l=(e.x+e.width-s)/e.width:e.x+e.width-r>a&&(l=(a-e.x)/e.width);const c=e.y+r<n||e.y+e.height-r>o,h=l===1?t.length:Math.floor(t.length*l)-1,u=this.bboxIntersectsSurroundingSeries(e);return{textLength:h,hasVerticalOverflow:c,hasSurroundingSeriesOverflow:u}}bboxIntersectsSurroundingSeries(t){const{surroundingRadius:e}=this;if(e==null)return!1;const i=[{x:t.x,y:t.y},{x:t.x+t.width,y:t.y},{x:t.x+t.width,y:t.y+t.height},{x:t.x,y:t.y+t.height}],s=e**2;return i.some(a=>a.x**2+a.y**2>s)}computeCalloutLabelCollisionOffsets(){const{radiusScale:t}=this,{calloutLabel:e,calloutLine:i}=this.properties,{offset:s,minSpacing:a}=e,n=t.convert(0),o=m=>!m.calloutLabel||m.outerRadius===0,r=this.calloutNodeData,l=r.filter(m=>!o(m));if(l.forEach(m=>{const b=m.calloutLabel;b!=null&&(b.hidden=!1,b.collisionTextAlign=void 0,b.collisionOffsetY=0)}),l.length<=1)return;const c=l.filter(m=>m.midCos<0).sort((m,b)=>m.midSin-b.midSin),h=l.filter(m=>m.midCos>=0).sort((m,b)=>m.midSin-b.midSin),u=l.filter(m=>m.midSin<0&&m.calloutLabel?.textAlign==="center").sort((m,b)=>m.midCos-b.midCos),d=l.filter(m=>m.midSin>=0&&m.calloutLabel?.textAlign==="center").sort((m,b)=>m.midCos-b.midCos),p=m=>{const b=m.calloutLabel;if(b==null)return lt.zero.clone();const v=m.outerRadius+i.length+s,S=m.midCos*v,D=m.midSin*v+b.collisionOffsetY,k=b.collisionTextAlign??b.textAlign,L=b.textBaseline;return Ye.computeBBox(b.text,S,D,{font:this.properties.calloutLabel,textAlign:k,textBaseline:L})},g=(m,b,v)=>{const S=p(m).grow(a/2),D=p(b).grow(a/2);if(S.x<D.x+D.width&&S.x+S.width>D.x&&(v==="to-top"?S.y<D.y+D.height:S.y+S.height>D.y)){const L=v==="to-top"?S.y-D.y-D.height:S.y+S.height-D.y;b.calloutLabel.collisionOffsetY=L}},f=m=>{const b=m.slice().sort((S,D)=>Math.abs(S.midSin)-Math.abs(D.midSin))[0],v=m.indexOf(b);for(let S=v-1;S>=0;S--){const D=m[S+1],k=m[S];g(D,k,"to-top")}for(let S=v+1;S<m.length;S++){const D=m[S-1],k=m[S];g(D,k,"to-bottom")}},x=m=>{const b=l.some(T=>T.calloutLabel.collisionOffsetY!==0),v=m.map(T=>p(T)),S=v.map(T=>T.clone().grow(a/2));let D=!1;for(let T=0;T<S.length&&!D;T++){const N=S[T];for(let C=T+1;C<m.length;C++){const O=S[C];if(N.collidesBBox(O)){D=!0;break}}}const k=r.map(T=>{const{startAngle:N,endAngle:C,outerRadius:O}=T;return{startAngle:N,endAngle:C,innerRadius:n,outerRadius:O}}),L=v.some(T=>k.some(N=>Q1(T,N)));!D&&!b&&!L||m.filter(T=>T.calloutLabel.textAlign==="center").forEach(T=>{const N=T.calloutLabel;T.midCos<0?N.collisionTextAlign="right":T.midCos>0?N.collisionTextAlign="left":N.collisionTextAlign="center"})};f(c),f(h),x(u),x(d)}updateCalloutLabelNodes(t){const{radiusScale:e}=this,{calloutLabel:i,calloutLine:s}=this.properties,a=s.length,{offset:n,color:o}=i,r=new Ye;this.calloutLabelSelection.selectByTag(1).forEach(l=>{const{datum:c}=l,h=c.calloutLabel,u=e.convert(c.radius),d=Math.max(0,u);if(!h?.text||d===0||h.hidden){l.visible=!1;return}const p=d+a+n,g=c.midCos*p,f=c.midSin*p+h.collisionOffsetY,x={textAlign:h.collisionTextAlign??h.textAlign,textBaseline:h.textBaseline};r.text=h.text,r.x=g,r.y=f,r.setFont(this.properties.calloutLabel),r.setAlign(x);const m=r.getBBox();let b=h.text,v=!0;if(i.avoidCollisions){const{textLength:S,hasVerticalOverflow:D}=this.getLabelOverflow(h.text,m,t);b=h.text.length===S?h.text:`${h.text.substring(0,S)}\u2026`,v=!D}l.text=b,l.x=g,l.y=f,l.setFont(this.properties.calloutLabel),l.setAlign(x),l.fill=o,l.visible=v})}computeLabelsBBox(t,e){const{calloutLabel:i,calloutLine:s}=this.properties,a=s.length,{offset:n,maxCollisionOffset:o,minSpacing:r}=i;if(!i.avoidCollisions)return null;this.maybeRefreshNodeData(),this.updateRadiusScale(!1),this.computeCalloutLabelCollisionOffsets();const l=[],c=new Ye;let h;const{title:u}=this.properties;if(u?.text&&u.enabled){const d=this.getTitleTranslationY();isFinite(d)&&(c.text=u.text,c.x=0,c.y=d,c.setFont(u),c.setAlign({textBaseline:"bottom",textAlign:"center"}),h=c.getBBox(),l.push(h))}return this.calloutNodeData.forEach(d=>{const p=d.calloutLabel;if(!p||d.outerRadius===0)return null;const g=d.outerRadius+a+n,f=d.midCos*g,x=d.midSin*g+p.collisionOffsetY;c.text=p.text,c.x=f,c.y=x,c.setFont(this.properties.calloutLabel),c.setAlign({textAlign:p.collisionTextAlign??p.textAlign,textBaseline:p.textBaseline});const m=c.getBBox();if(p.box=m,Math.abs(p.collisionOffsetY)>o){p.hidden=!0;return}if(h){const b=-this.centerY,v=new lt(h.x-r,b,h.width+2*r,h.y+h.height+r-b);if(m.collidesBBox(v)){p.hidden=!0;return}}if(t.hideWhenNecessary){const{textLength:b,hasVerticalOverflow:v,hasSurroundingSeriesOverflow:S}=this.getLabelOverflow(p.text,m,e),D=p.text.length>2&&b<2;if(v||D||S){p.hidden=!0;return}}p.hidden=!1,l.push(m)}),l.length===0?null:lt.merge(l)}updateSectorLabelNodes(){const{radiusScale:t}=this,e=t.convert(0),{fontSize:i,fontStyle:s,fontWeight:a,fontFamily:n,positionOffset:o,positionRatio:r,color:l}=this.properties.sectorLabel,c=e>0,h=this.ctx.legendManager.getData(this.id)?.filter(d=>d.enabled).length===1,u=(d,p)=>{const{sectorLabel:g,outerRadius:f,startAngle:x,endAngle:m}=p;let b=!1;if(g&&f!==0){const v=e*(1-r)+f*r+o;d.fill=l,d.fontStyle=s,d.fontWeight=a,d.fontSize=i,d.fontFamily=n,d.text=g.text,!c&&h?(d.x=0,d.y=0):(d.x=p.midCos*v,d.y=p.midSin*v),d.textAlign="center",d.textBaseline="middle";const D=d.getBBox(),k=[[D.x,D.y],[D.x+D.width,D.y],[D.x+D.width,D.y+D.height],[D.x,D.y+D.height]],L={startAngle:x,endAngle:m,innerRadius:e,outerRadius:f};k.every(([T,N])=>cb(T,N,L))&&(b=!0)}d.visible=b};this.labelSelection.each(u),this.highlightLabelSelection.each(u)}updateZerosumRings(){this.zerosumOuterRing.size=this.getOuterRadius()*2}pickNodeClosestDatum(t){return ik(this,t)}getTooltipContent(t){const{id:e,dataModel:i,processedData:s,properties:a}=this,{legendItemKey:n,calloutLabelKey:o,calloutLabelName:r,sectorLabelKey:l,sectorLabelName:c,angleKey:h,angleName:u,radiusKey:d,radiusName:p,tooltip:g}=a,f=this.properties.title.text;if(!i||!s||s.rawData.length===0)return;const{datumIndex:x}=t,m=s.rawData[x],{angleRawValues:b,legendItemValues:v,calloutLabelValues:S,sectorLabelValues:D}=this.getProcessedDataValues(i,s),k=b[x],L=v?.[x]??(o===h?void 0:S?.[x])??(l===h?void 0:D?.[x])??u;return g.formatTooltip({title:f,symbol:this.legendItemSymbol(x),data:[{label:L,fallbackLabel:h,value:String(k)}]},{seriesId:e,datum:m,title:u,legendItemKey:n,calloutLabelKey:o,calloutLabelName:r,sectorLabelKey:l,sectorLabelName:c,angleKey:h,angleName:u,radiusKey:d,radiusName:p,...this.getSectorFormat(m,x,!1)})}legendItemSymbol(t){const e=this.processedData?.rawData[t],i=this.getSectorFormat(e,t,!1);return{marker:{fill:i.fill,stroke:i.stroke,fillOpacity:this.properties.fillOpacity,strokeOpacity:this.properties.strokeOpacity,strokeWidth:this.properties.strokeWidth}}}getLegendData(t){const{id:e,visible:i,processedData:s,dataModel:a,ctx:{legendManager:n}}=this;if(!a||!s||t!=="category")return[];const{angleKey:o,calloutLabelKey:r,sectorLabelKey:l,legendItemKey:c,showInLegend:h}=this.properties;if(!c&&(!r||r===o)&&(!l||l===o))return[];const{calloutLabelValues:u,sectorLabelValues:d,legendItemValues:p,angleRawValues:g}=this.getProcessedDataValues(a,s),f=this.properties.title?.showInLegend&&this.properties.title.text,x=[],m=this.properties.hideZeroValueSectorsInLegend;for(let b=0;b<s.rawData.length;b++){const v=s.rawData[b],S=g[b];if(m&&S===0)continue;const D=[];f&&D.push(f);const k=this.getLabels(v,2*Math.PI,2*Math.PI,!1,u?.[b],d?.[b],p?.[b]);c&&k.legendItem!==void 0?D.push(k.legendItem.text):r&&r!==o&&k.calloutLabel?.text!==void 0?D.push(k.calloutLabel?.text):l&&l!==o&&k.sectorLabel?.text!==void 0&&D.push(k.sectorLabel?.text),D.length!==0&&x.push({legendType:"category",id:e,datum:v,itemId:b,seriesId:e,enabled:i&&n.getItemEnabled({seriesId:e,itemId:b}),label:{text:D.join(" - ")},symbol:this.legendItemSymbol(b),legendItemName:c!=null?v[c]:void 0,hideInLegend:!h})}return x}setLegendState(t){const{id:e,ctx:{legendManager:i,updateService:s}}=this;t.forEach((a,n)=>i.toggleItem({enabled:a,seriesId:e,itemId:n})),i.update(),s.update(4)}animateEmptyUpdateReady(t){const{animationManager:e}=this.ctx,i=uh(!0,this.properties.rotation,this.radiusScale,this.previousRadiusScale);De(this.id,"nodes",e,[this.itemSelection,this.highlightSelection,this.phantomSelection],i.nodes,(s,a)=>this.getDatumId(a)),Gt(this,"callout",e,this.calloutLabelSelection),Gt(this,"sector",e,this.labelSelection),Gt(this,"highlight",e,this.highlightLabelSelection),this.previousRadiusScale.range=this.radiusScale.range}animateWaitingUpdateReady(){const{itemSelection:t,highlightSelection:e,phantomSelection:i,processedData:s,radiusScale:a,previousRadiusScale:n}=this,{animationManager:o}=this.ctx,r=s?.reduced?.diff?.[this.id];this.ctx.animationManager.stopByAnimationGroupId(this.id);const l=(r?.moved.size??0)===0,c=(s?.defs.keys.length??0)>0,h=s?.reduced?.animationValidation?.uniqueKeys??!0;(!l||!c||!h)&&this.ctx.animationManager.skipCurrentBatch();const u=uh(!1,this.properties.rotation,a,n);De(this.id,"nodes",o,[t,e,i],u.nodes,(d,p)=>this.getDatumId(p),r),Gt(this,"callout",this.ctx.animationManager,this.calloutLabelSelection),Gt(this,"sector",this.ctx.animationManager,this.labelSelection),Gt(this,"highlight",this.ctx.animationManager,this.highlightLabelSelection),this.previousRadiusScale.range=this.radiusScale.range}animateClearingUpdateEmpty(){const{itemSelection:t,highlightSelection:e,phantomSelection:i,radiusScale:s,previousRadiusScale:a}=this,{animationManager:n}=this.ctx,o=uh(!1,this.properties.rotation,s,a);De(this.id,"nodes",n,[t,e,i],o.nodes,(r,l)=>this.getDatumId(l)),Nl(this,"callout",this.ctx.animationManager,this.calloutLabelSelection),Nl(this,"sector",this.ctx.animationManager,this.labelSelection),Nl(this,"highlight",this.ctx.animationManager,this.highlightLabelSelection),this.previousRadiusScale.range=this.radiusScale.range}getDatumIdFromData(t){const{calloutLabelKey:e,sectorLabelKey:i,legendItemKey:s}=this.properties;if(this.processedData?.reduced?.animationValidation?.uniqueKeys){if(s)return t[s];if(e)return t[e];if(i)return t[i]}}getDatumId(t){const{datumIndex:e}=t,i=this.getDatumIdFromData(t.datum);return i!=null?String(i):`${e}`}},Mb.className="PieSeries",Mb.type="pie"}}),oP,O9=A({"packages/ag-charts-community/src/chart/series/polar/pieSeriesModule.ts"(){"use strict";C9(),sP(),oP={type:"series",optionsKey:"series[]",packageType:"community",chartTypes:["polar"],identifier:"pie",moduleFactory:t=>new Mb(t),tooltipDefaults:{range:"exact"},themeTemplate:iP,paletteFactory:nk}}});function rk(){pn.register(lI,K_,S_,C1,KI,U1,$I,X1,aP,oP,W1);for(const t of[or,Gc,ih,Al,kl])lo.register(t.type,{moduleFactory:e=>new t(e),hidden:t===Al})}var lk=A({"packages/ag-charts-community/src/chart/factory/registerInbuiltModules.ts"(){"use strict";i6(),so(),Tu(),eI(),oI(),aI(),F_(),V_(),z6(),u9(),G1(),m9(),S9(),K1(),A9(),T9(),O9(),Pu()}});function E9(){for(const t of pn.modules){if(t.packageType==="enterprise"&&!hZ(t)&&st.errorOnce("Unexpected enterprise module registered: "+t.identifier),t.type==="root"&&t.themeTemplate)for(const e of t.chartTypes)ex.set(e,t.themeTemplate);if(t.type==="series"){if(t.chartTypes.length>1)throw new Error(`AG Charts - Module definition error: ${t.identifier}`);js.register(t.identifier,t)}if(t.type==="series-option"&&t.themeTemplate)for(const e of t.seriesTypes)js.setThemeTemplate(e,t.themeTemplate);if(t.type==="axis-option"&&t.themeTemplate)for(const e of t.axisTypes){const i=lo.getThemeTemplate(e),s=Lt(t.themeTemplate,i);lo.setThemeTemplate(e,s)}t.type==="axis"&&lo.register(t.identifier,t),t.type==="legend"&&tx.register(t.identifier,t)}if(pn.hasEnterpriseModules()){const t=uZ();t.length>0&&st.errorOnce("Enterprise modules expected but not registered: ",t)}}var w9=A({"packages/ag-charts-community/src/chart/factory/setupModules.ts"(){"use strict";so(),St(),Yt(),Pu(),Bu(),cg(),yA(),ix()}});function R9(t){return t.type==="sankey"||t.type==="chord"}var Db,_9=A({"packages/ag-charts-community/src/chart/flowProportionChart.ts"(){"use strict";Sl(),Db=class extends ar{getChartType(){return"flow-proportion"}async updateData(){await super.updateData();const{nodes:t}=this.getOptions();this.series.forEach(e=>{R9(e)&&e.setChartNodes(t)})}performLayout(t){const{seriesRoot:e,annotationRoot:i}=this,{layoutBox:s}=t;s.shrink(this.seriesArea.padding.toJson());const a=s.clone();this.seriesRect=a,this.animationRect=a,e.visible=this.series.some(n=>n.visible);for(const n of[e,i])n.translationX=Math.floor(a.x),n.translationY=Math.floor(a.y);this.ctx.layoutManager.emitLayoutComplete(t,{series:{visible:e.visible,rect:a,paddedRect:a}})}},Db.className="FlowProportionChart",Db.type="flow-proportion"}}),Ol,ck=A({"packages/ag-charts-community/src/chart/axis/polarAxis.ts"(){"use strict";xt(),fD(),Ol=class extends Em{constructor(){super(...arguments),this.shape="polygon",this.innerRadiusRatio=0,this.defaultTickMinSpacing=20}computeLabelsBBox(t,e){return null}computeRange(){}getAxisLinePoints(){}},M([I(ne(["polygon","circle"],"a polar axis shape"))],Ol.prototype,"shape",2),M([I(Ft)],Ol.prototype,"innerRadiusRatio",2)}});function P9(t){return t.type==="radial-gauge"}function B9(t){return t.type==="linear-gauge"}var Ab,z9=A({"packages/ag-charts-community/src/chart/gaugeChart.ts"(){"use strict";Il(),df(),Ti(),St(),Lu(),ck(),Sl(),fe(),Ab=class extends ar{getChartType(){return"gauge"}updateRadialGauge(t,e){const i=this.axes.find(N=>N.direction==="x");if(!(i instanceof Ol))return;i.computeRange();const s=t.x,a=s+t.width,n=t.y,o=n+t.height,[r,l]=i.range,h=eE(l-r)>Math.PI,u=h||Ba(1.5*Math.PI,r,l),d=h||Ba(0*Math.PI,r,l),p=h||Ba(.5*Math.PI,r,l),g=h||Ba(1*Math.PI,r,l);let f;g&&!d?f="right":!g&&d?f="left":f="center";let x;u&&!p?x="bottom":!u&&p?x="top":x="middle";const m=JI({startAngle:r,endAngle:l,innerRadius:0,outerRadius:.5}),b=-(m.x+m.width/2)*2,v=-(m.y+m.height/2)*2,{minimumRadius:S=0,maximumRadius:D}=e,k=Math.max(.5*Math.min(t.width/m.width,t.height/m.height),0);let L=Math.min(D??1/0,Math.max(k,S??0));const T=8;for(let N=0;N<T;N+=1){const C=L<=S||N===T-1,O=t.x+t.width/2+b*L,R=t.y+t.height/2+v*L;i.translation.x=O,i.translation.y=R,i.gridLength=L,i.calculateLayout();const E=i.computeLabelsBBox({hideWhenNecessary:C},t);if(C)break;let z=0;if(E!=null){const F=E.x+O,G=F+E.width,j=E.y+R,V=j+E.height;z=Math.max(n-j,s-F,V-o,G-a,0)}if(z>0)L=Math.max(L-z,S);else break}i.translation.x=t.x+t.width/2+b*L,i.translation.y=t.y+t.height/2+v*L,e.centerX=t.width/2+b*L,e.centerY=t.height/2+v*L,e.radius=L,e.textAlign=f,e.verticalAlign=x,(L===0||L>k)&&st.warnOnce("There was insufficient space to display the Radial Gauge.")}updateLinearGauge(t,e){const i=this.axes.find(x=>x.direction==="x"),s=this.axes.find(x=>x.direction==="y");if(!(i instanceof yl)||!(s instanceof yl))return t;const{horizontal:a,thickness:n}=e;let o=0,r=0;const l=new pa;l.domain=[0,100],l.range=a?i.range:s.range;const c=l.ticks();a?o=e.computeInset("x",c):r=e.computeInset("y",c);const h=t.width-Math.abs(o),u=t.height-Math.abs(r),d=Math.max(a?h:n,0),p=Math.max(a?n:u,0),g=t.x+(h-d)/2+Math.max(o,0),f=t.y+(u-p)/2-Math.min(r,0);i.range=[0,d],i.gridLength=d,i.calculateLayout(),i.translation.x=g,i.translation.y=f+(i.position==="bottom"?n:0),s.range=[0,p],s.gridLength=p,s.calculateLayout(),s.translation.x=g+(s.position==="right"?n:0),s.translation.y=f,e.originX=g-t.x,e.originY=f-t.y,(d===0||p===0)&&st.warnOnce("There was insufficient space to display the Linear Gauge.")}performLayout(t){const{seriesRoot:e,annotationRoot:i,series:s,seriesArea:a}=this,{layoutBox:n}=t,o=n.clone();n.shrink(a.padding.toJson());const r=this.series[0];P9(r)?this.updateRadialGauge(n,r):B9(r)&&this.updateLinearGauge(n,r),this.axes.forEach(l=>l.update()),this.seriesRect=o.clone().translate(o.x-n.x,o.y-n.y),this.animationRect=n,e.visible=s.some(l=>l.visible);for(const l of[e,i])l.translationX=Math.floor(n.x),l.translationY=Math.floor(n.y);this.ctx.layoutManager.emitLayoutComplete(t,{series:{visible:e.visible,rect:o,paddedRect:n}})}getAriaLabel(){const t=[],e=this.getCaptionText();e.length!==0&&t.push(e);for(const s of this.series)t.push(s.getCaptionText());const i=t.join(". ");return this.ctx.localeManager.t("ariaAnnounceGaugeChart",{caption:i})}},Ab.className="GaugeChart",Ab.type="gauge"}}),Ib,F9=A({"packages/ag-charts-community/src/chart/hierarchyChart.ts"(){"use strict";Sl(),Ib=class extends ar{constructor(t,e){super(t,e)}getChartType(){return"hierarchy"}performLayout(t){const{seriesRoot:e,annotationRoot:i}=this,{layoutBox:s}=t;s.shrink(this.seriesArea.padding.toJson());const a=s.clone();this.seriesRect=a,this.animationRect=a;for(const n of[e,i])n.translationX=Math.floor(a.x),n.translationY=Math.floor(a.y);e.visible=this.series[0].visible,e.setClipRect(a.clone()),this.ctx.layoutManager.emitLayoutComplete(t,{series:{visible:!0,rect:a,paddedRect:a}})}getAriaLabel(){const t=this.getCaptionText();return this.ctx.localeManager.t("ariaAnnounceHierarchyChart",{caption:t})}},Ib.className="HierarchyChart",Ib.type="hierarchy"}});function j9(t){return t instanceof ff}function G9(t){return t instanceof Ol}var kb,V9=A({"packages/ag-charts-community/src/chart/polarChart.ts"(){"use strict";kt(),lp(),bD(),ck(),Sl(),fe(),bb(),pl(),kb=class extends ar{constructor(t,e){super(t,e),this.padding=new qo(40),this.ctx.axisManager.axisGroup.zIndex=5}getChartType(){return"polar"}async performLayout(t){const{layoutBox:e}=t;e.shrink(this.seriesArea.padding.toJson());const i=e.clone();this.seriesRect=i,this.animationRect=i,this.seriesRoot.translationX=i.x,this.seriesRoot.translationY=i.y,await this.computeCircle(i),this.axes.forEach(s=>s.update()),this.ctx.layoutManager.emitLayoutComplete(t,{series:{visible:!0,rect:i,paddedRect:i}})}updateAxes(t,e,i,s){const a=this.axes.find(l=>l.direction==="x"),n=this.axes.find(l=>l.direction==="y");if(!(a instanceof Ol)||!(n instanceof Ol))return;const o=a.scale,r=n.innerRadiusRatio;a.innerRadiusRatio=r,a.computeRange(),a.gridLength=s,n.gridAngles=o.ticks?.().map(l=>o.convert(l)),n.gridRange=a.range,n.range=[s,s*r],[a,n].forEach(l=>{l.translation.x=t.x+e,l.translation.y=t.y+i,l.calculateLayout()})}async computeCircle(t){const e=this.series.filter(j9),i=this.axes.filter(G9),s=(c,h,u)=>{this.updateAxes(t,c,h,u),e.forEach(p=>{p.centerX=c,p.centerY=h,p.radius=u});const d=e.filter(p=>p.type==="donut"||p.type==="pie");if(d.length>1){const p=d.map(g=>{const f=g.getInnerRadius();return{series:g,innerRadius:f}}).sort((g,f)=>g.innerRadius-f.innerRadius);p.at(-1).series.surroundingRadius=void 0;for(let g=0;g<p.length-1;g++)p[g].series.surroundingRadius=p[g+1].innerRadius}},a=t.width/2,n=t.height/2,o=Math.max(0,Math.min(t.width,t.height)/2);let r=o;s(a,n,r);const l=async({hideWhenNecessary:c=!1}={})=>{const h=[];for(const p of bc(i,e)){const g=await p.computeLabelsBBox({hideWhenNecessary:c},t);g&&h.push(g)}if(h.length===0){s(a,n,o);return}const u=lt.merge(h),d=this.refineCircle(u,r,t);s(d.centerX,d.centerY,d.radius),r=d.radius};await l(),await l(),await l(),await l({hideWhenNecessary:!0}),await l({hideWhenNecessary:!0});for(const c of bc(i,e))await c.computeLabelsBBox({hideWhenNecessary:!0},t);return{radius:r,centerX:a,centerY:n}}refineCircle(t,e,i){const a=-e,n=-e,o=e,r=e;let l=Math.max(0,a-t.x),c=Math.max(0,n-t.y),h=Math.max(0,t.x+t.width-o),u=Math.max(0,t.y+t.height-r);l=h=Math.max(l,h),c=u=Math.max(c,u);const d=i.width-l-h,p=i.height-c-u;let g=Math.min(d,p)/2;const f=.5*i.width/2,x=.5*i.height/2,m=Math.min(f,x);if(g<m){g=m;const S=l+h,D=c+u;if(2*g+D>i.height){const k=i.height-2*g;Math.min(c,u)*2>k?(c=k/2,u=k/2):c>u?c=k-u:u=k-c}if(2*g+S>i.width){const k=i.width-2*g;Math.min(l,h)*2>k?(l=k/2,h=k/2):l>h?l=k-h:h=k-l}}const b=l+2*g+h,v=c+2*g+u;return{centerX:(i.width-b)/2+l+g,centerY:(i.height-v)/2+c+g,radius:g}}},kb.className="PolarChart",kb.type="polar"}}),Lb,U9=A({"packages/ag-charts-community/src/chart/standaloneChart.ts"(){"use strict";Sl(),Lb=class extends ar{constructor(t,e){super(t,e)}getChartType(){return"standalone"}performLayout(t){const{seriesRoot:e,annotationRoot:i}=this,{layoutBox:s}=t,a=s.clone();s.shrink(this.seriesArea.padding.toJson()),this.seriesRect=s,this.animationRect=s;for(const n of[e,i])n.translationX=Math.floor(s.x),n.translationY=Math.floor(s.y);e.visible=this.series[0].visible,this.ctx.layoutManager.emitLayoutComplete(t,{series:{visible:!0,rect:a,paddedRect:s}})}getAriaLabel(){const t=this.getCaptionText();return this.ctx.localeManager.t("ariaAnnounceHierarchyChart",{caption:t})}},Lb.className="StandaloneChart",Lb.type="standalone"}}),mf,Tb,Nb,Cb,Ob,Eb,rP=A({"packages/ag-charts-community/src/chart/series/topology/mercatorScale.ts"(){"use strict";kt(),mf=Math.PI/180,Tb=t=>t*mf,Nb=t=>-Math.log(Math.tan(Math.PI*.25+t*mf*.5)),Cb=t=>t/mf,Ob=t=>(Math.atan(Math.exp(-t))-Math.PI*.25)/(mf*.5),Eb=class b2{constructor(e,i){this.domain=e,this.range=i,this.type="mercator",this.bounds=b2.bounds(e)}static bounds(e){const[[i,s],[a,n]]=e,o=Tb(i),r=Nb(s),l=Tb(a),c=Nb(n);return new lt(Math.min(o,l),Math.min(r,c),Math.abs(l-o),Math.abs(c-r))}static fixedScale(){return new b2([[Cb(0),Ob(0)],[Cb(1),Ob(1)]],[[0,0],[1,1]])}convert([e,i]){const[[s,a],[n,o]]=this.range,r=(n-s)/this.bounds.width,l=(o-a)/this.bounds.height;return[(Tb(e)-this.bounds.x)*r+s,(Nb(i)-this.bounds.y)*l+a]}invert([e,i]){const[[s,a],[n,o]]=this.range,r=(n-s)/this.bounds.width,l=(o-a)/this.bounds.height;return[Cb((e-s)/r+this.bounds.x),Ob((i-a)/l+this.bounds.y)]}}}});function lP(t){return t.type==="map-shape"||t.type==="map-line"||t.type==="map-marker"||t.type==="map-shape-background"||t.type==="map-line-background"}var wb,W9=A({"packages/ag-charts-community/src/chart/topologyChart.ts"(){"use strict";aI(),Sl(),rP(),wb=class extends ar{constructor(t,e){super(t,e),this.xAxis=new or(this.getModuleContext()),this.xAxis.position="bottom",this.yAxis=new or(this.getModuleContext()),this.yAxis.position="left",this.ctx.zoomManager.updateAxes([this.xAxis,this.yAxis])}getChartType(){return"topology"}async updateData(){await super.updateData();const{topology:t}=this.getOptions();this.series.forEach(e=>{lP(e)&&e.setChartTopology(t)})}performLayout(t){const{seriesRoot:e,annotationRoot:i}=this,{layoutBox:s}=t;s.shrink(this.seriesArea.padding.toJson());const a=s.clone();this.seriesRect=a,this.animationRect=a;const n=this.series.filter(lP),o=n.reduce((c,h)=>{if(!h.visible)return c;const u=h.topologyBounds;return u==null?c:c==null?u:(c.merge(u),c)},void 0);let r;if(o!=null){const{lon0:c,lat0:h,lon1:u,lat1:d}=o,p=[[c,h],[u,d]],g=Eb.bounds(p),{width:f,height:x}=a,m=Math.min(f/g.width,x/g.height),b=g.width*m,v=g.height*m,S=(f-b)/2,D=(x-v)/2,k=S,L=D,T=S+b,N=D+v,C=this.ctx.zoomManager.getAxisZoom(this.xAxis.id),O=this.ctx.zoomManager.getAxisZoom(this.yAxis.id),R=(T-k)/(C.max-C.min),E=k-R*C.min,z=(N-L)/(1-O.min-(1-O.max)),F=L-z*(1-O.max);r=new Eb(p,[[E,F],[E+R,F+z]])}n.forEach(c=>{c.scale=r});const l=this.series.some(c=>c.visible);e.visible=l;for(const c of[e,i])c.translationX=Math.floor(a.x),c.translationY=Math.floor(a.y),c.setClipRect(a.clone());this.ctx.layoutManager.emitLayoutComplete(t,{series:{visible:l,rect:a,paddedRect:a}})}},wb.className="TopologyChart",wb.type="topology"}}),bo,Rb=A({"packages/ag-charts-community/src/module/enterpriseModule.ts"(){"use strict";bo={isEnterprise:!1}}});function fa(t,e){const i={};for(const[s,a]of Object.entries(e))a!==ya&&Object.hasOwn(t,s)&&(i[s]=a);return i}var ya,cP=A({"packages/ag-charts-community/src/api/preset/presetUtils.ts"(){"use strict";ya=Symbol("IGNORED_PROP")}});function H9(t){return t.type==="radial-gauge"}function Y9(t){return t.type==="linear-gauge"}function K9(t){const{animation:e,background:i,container:s,contextMenu:a,footnote:n,height:o,listeners:r,locale:l,minHeight:c,minWidth:h,padding:u,subtitle:d,theme:p,title:g,width:f,type:x,cursor:m,nodeClickRange:b,tooltip:v,value:S,scale:D={},startAngle:k,endAngle:L,highlightStyle:T,segmentation:N,bar:C,needle:O,targets:R,outerRadius:E,innerRadius:z,outerRadiusRatio:F,innerRadiusRatio:G,cornerRadius:j,cornerMode:V,label:W,secondaryLabel:B,spacing:U,...H}=t,{fills:K,fillMode:X,fill:Q,fillOpacity:$,stroke:Z,strokeWidth:Y,strokeOpacity:tt,lineDash:q,lineDashOffset:it,min:at=0,max:rt=1,interval:ot={},label:et={}}=D,gt=fa(t,{animation:e,background:i,container:s,contextMenu:a,footnote:n,height:o,listeners:r,locale:l,minHeight:c,minWidth:h,padding:u,subtitle:d,theme:p,title:g,width:f}),dt=fa(D,{fills:K,fillMode:X,fill:Q,fillOpacity:$,stroke:Z,strokeWidth:Y,strokeOpacity:tt,lineDash:q,lineDashOffset:it}),ft=fa(t,{startAngle:ya,endAngle:ya,needle:O!=null?{enabled:!0,...O}:ya,scale:dt,type:x,cursor:m,nodeClickRange:b,listeners:r,tooltip:v,value:S,highlightStyle:T,segmentation:N,bar:C,targets:R,outerRadius:E,innerRadius:z,outerRadiusRatio:F,innerRadiusRatio:G,cornerRadius:j,cornerMode:V,label:W,secondaryLabel:B,spacing:U,...H});return{...gt,series:[ft],axes:[{type:"angle-number",min:at,max:rt,startAngle:k,endAngle:L,interval:ot??{},label:et??{}},{type:"radius-number"}]}}function X9(t){const{animation:e,background:i,container:s,contextMenu:a,footnote:n,height:o,listeners:r,locale:l,minHeight:c,minWidth:h,padding:u,subtitle:d,theme:p,title:g,width:f,type:x,cursor:m,nodeClickRange:b,tooltip:v,value:S,scale:D={},direction:k="vertical",thickness:L,highlightStyle:T,segmentation:N,bar:C,targets:O,cornerRadius:R,cornerMode:E,label:z,...F}=t,{fills:G,fillMode:j,fill:V,fillOpacity:W,stroke:B,strokeWidth:U,strokeOpacity:H,lineDash:K,lineDashOffset:X,min:Q=0,max:$=1,interval:Z={},label:Y={}}=D,tt=fa(t,{animation:e,background:i,container:s,contextMenu:a,footnote:n,height:o,listeners:r,locale:l,minHeight:c,minWidth:h,padding:u,subtitle:d,theme:p,title:g,width:f}),q=fa(D,{fills:G,fillMode:j,fill:V,fillOpacity:W,stroke:B,strokeWidth:U,strokeOpacity:H,lineDash:K,lineDashOffset:X}),it=fa(t,{scale:q,type:x,cursor:m,nodeClickRange:b,listeners:r,tooltip:v,value:S,direction:k,thickness:L,highlightStyle:T,segmentation:N,bar:C,targets:O,cornerRadius:R,cornerMode:E,label:z,...F}),{placement:at,...rt}=Y;let ot,et;const gt=k==="horizontal";gt?(ot=at==="before"?"top":"bottom",et="left"):(ot=at==="after"?"right":"left",et="bottom");const dt={type:"number",position:ot,min:Q,max:$,reverse:!gt,interval:Z,label:rt,nice:!1},ft={type:"number",position:et,min:0,max:1,label:{enabled:!1}};return{...tt,series:[it],axes:gt?[dt,ft]:[ft,dt]}}function hP(t,e){if(e==null)return t;const{targets:i,...s}=e;return t=Lt(t,s),t.targets!=null&&i!=null&&(t.targets=Ky(t.targets,i)),t}function Z9(t,e){if(H9(t)){const m=hP(t,e);return K9(m)}else if(Y9(t)){const m=hP(t,e);return X9(m)}const{animation:i,background:s,container:a,contextMenu:n,footnote:o,height:r,listeners:l,locale:c,minHeight:h,minWidth:u,padding:d,subtitle:p,theme:g,title:f,width:x}=t;return fa(t,{animation:i,background:s,container:a,contextMenu:n,footnote:o,height:r,listeners:l,locale:c,minHeight:h,minWidth:u,padding:d,subtitle:p,theme:g,title:f,width:x})}var $9=A({"packages/ag-charts-community/src/api/preset/gauge.ts"(){"use strict";Py(),Yt(),cP()}});function di(t,e){if(ws(t))return e(t)}function Q9(t,e,i){const{dateKey:s="date",highKey:a="high",openKey:n="open",lowKey:o="low",closeKey:r="close",volumeKey:l="volume",chartType:c="candlestick",navigator:h=!1,volume:u=!0,rangeButtons:d=!0,statusBar:p=!0,toolbar:g=!0,zoom:f=!0,theme:x,data:m,...b}=t,v=J9(x,c,s,a,o,n,r),S=q9(x,i,n,r,u,l),k={navigator:{enabled:h,...u?{miniChart:{enabled:h,series:[{type:"line",xKey:s,yKey:l,marker:{enabled:!1}}]},height:40,minHandle:{height:46},maxHandle:{height:46}}:null}},L={annotations:{enabled:g,toolbar:{enabled:g},optionsToolbar:{enabled:g},data:m,xKey:s,volumeKey:u?l:void 0}},T=p?{statusBar:{enabled:!0,data:m,highKey:a,openKey:n,lowKey:o,closeKey:r,volumeKey:u?l:void 0}}:null,N={zoom:{enabled:f,enableIndependentAxes:!0}},C={ranges:{enabled:d}},O=u?[{type:"number",position:"left",keys:[l],label:{enabled:!1},crosshair:{enabled:!1},gridLine:{enabled:!1},nice:!1,layoutConstraints:{stacked:!1,width:20,unit:"percentage",align:"end"}}]:[];return{theme:{baseTheme:typeof x=="string"?x:"ag-financial",...Lt(typeof x=="object"?x:null,{overrides:{common:{title:{padding:4},padding:{top:6,right:8,bottom:5},chartToolbar:{enabled:g}}}})},animation:{enabled:!1},legend:{enabled:!1},series:[...S,...v],seriesArea:{clip:!0},axes:[{type:"number",position:"right",keys:[n,r,a,o],interval:{maxSpacing:di(x,R=>R.overrides?.common?.axes?.number?.interval?.maxSpacing)??45},label:{format:di(x,R=>R.overrides?.common?.axes?.number?.label?.format)??".2f"},crosshair:{enabled:!0,snap:!1},layoutConstraints:{stacked:!1,width:100,unit:"percentage",align:"start"}},...O,{type:"ordinal-time",position:"bottom",line:{enabled:!1},label:{enabled:!0},crosshair:{enabled:!0}}],tooltip:{enabled:!1},data:m,...L,...k,...T,...N,...C,...b}}function q9(t,e,i,s,a,n){if(!a)return[];const o=di(t,l=>l.overrides?.bar?.series?.fill),r=o?{fill:o}:{itemStyler({datum:l}){const{up:c,down:h}=e().palette;return{fill:l[i]<l[s]?c?.fill:h?.fill}}};return[{type:"bar",xKey:"date",yKey:n,tooltip:{enabled:!1},highlight:{enabled:!1},fillOpacity:di(t,l=>l.overrides?.bar?.series?.fillOpacity)??.5,...r,focusPriority:1,fastDataProcessing:!0}]}function J9(t,e,i,s,a,n,o){const r={xKey:i,openKey:n,closeKey:o,highKey:s,lowKey:a},l={xKey:i,yKey:o},c={pickOutsideVisibleMinorAxis:!0};switch(e??"candlestick"){case"ohlc":return t8(c,r);case"line":return e8(c,t,l);case"step-line":return i8(c,t,l);case"hlc":return s8(c,t,l,r);case"high-low":return a8(c,t,r);case"candlestick":return uP(c,r);case"hollow-candlestick":return n8(c,t,r);default:return st.warnOnce(`unknown chart type: ${e}; expected one of: ${pP.join(", ")}`),uP(c,r)}}function t8(t,e){return[{type:"ohlc",focusPriority:0,...t,...e}]}function e8(t,e,i){return[{type:"line",focusPriority:0,...t,...i,stroke:di(e,s=>s.overrides?.line?.series?.stroke)??lh,marker:di(e,s=>s.overrides?.line?.series?.marker)??{enabled:!1}}]}function i8(t,e,i){return[{type:"line",focusPriority:0,...t,...i,stroke:di(e,s=>s.overrides?.line?.series?.stroke)??lh,interpolation:di(e,s=>s.overrides?.line?.series?.interpolation)??{type:"step"},marker:di(e,s=>s.overrides?.line?.series?.marker)??{enabled:!1}}]}function s8(t,e,i,{xKey:s,highKey:a,closeKey:n,lowKey:o}){const r=dP(_b,e);return[{type:_b,focusPriority:0,...t,xKey:s,yHighKey:a,yLowKey:n,fill:r.fill??Og,stroke:r.stroke??Ng,fillOpacity:di(e,l=>l.overrides?.["range-area"]?.series?.fillOpacity)??.3,strokeWidth:di(e,l=>l.overrides?.["range-area"]?.series?.strokeWidth)??2},{type:_b,focusPriority:0,...t,xKey:s,yHighKey:n,yLowKey:o,fill:r.fill??Eg,stroke:r.stroke??Cg,fillOpacity:di(e,l=>l.overrides?.["range-area"]?.series?.fillOpacity)??.3,strokeWidth:di(e,l=>l.overrides?.["range-area"]?.series?.strokeWidth)??2},{type:"line",...t,...i,stroke:di(e,l=>l.overrides?.line?.series?.stroke)??Rg,strokeWidth:di(e,l=>l.overrides?.line?.series?.strokeWidth)??2,marker:di(e,l=>l.overrides?.line?.series?.marker)??{enabled:!1}}]}function a8(t,e,{xKey:i,highKey:s,lowKey:a}){const n=dP("range-bar",e);return[{type:"range-bar",...t,xKey:i,yHighKey:s,yLowKey:a,fill:n.fill??wg,stroke:n.stroke??lh,tooltip:{range:"nearest"},focusPriority:0,fastDataProcessing:!0}]}function uP(t,e){return[{type:"candlestick",focusPriority:0,...t,...e}]}function n8(t,e,i){const s=di(e,a=>a.overrides?.candlestick?.series?.item);return[{type:"candlestick",focusPriority:0,...t,...i,item:{up:{fill:s?.up?.fill??"transparent"}}}]}function dP(t,e){const i=di(e,a=>a.overrides?.[t]?.series?.fill),s=di(e,a=>a.overrides?.[t]?.series?.stroke);return{fill:i,stroke:s}}var pP,_b,o8=A({"packages/ag-charts-community/src/api/preset/priceVolumePreset.ts"(){"use strict";de(),St(),Yt(),Ct(),pP=["ohlc","line","step-line","hlc","high-low","candlestick","hollow-candlestick"],_b="range-area"}});function r8(t,e){return typeof t=="string"?{...e,baseTheme:t}:t!=null?{...t,baseTheme:uk(t.baseTheme,e)}:e}function gP(t){if(Array.isArray(t)&&t.length!==0){const e=t[0];if(typeof e=="number")return{data:t.map((s,a)=>({x:a,y:s})),series:[{xKey:"x",yKey:"y"}],datumKey:"y"};if(Array.isArray(e))return{data:t.map(s=>({x:s[0],y:s[1],datum:s})),series:[{xKey:"x",yKey:"y"}],datumKey:"datum"}}return{data:t}}function l8(t,e){switch(t?.type){case"number":{const{type:i,visible:s,stroke:a,strokeWidth:n,min:o,max:r,reverse:l}=t;return fa(t,{type:i,reverse:l,min:o,max:r})}case"time":{const{type:i,visible:s,stroke:a,strokeWidth:n,min:o,max:r,reverse:l}=t;return fa(t,{type:i,reverse:l,min:o,max:r})}case"category":{const{type:i,visible:s,stroke:a,strokeWidth:n,paddingInner:o,paddingOuter:r,reverse:l}=t;return fa(t,{type:i,reverse:l,paddingInner:o,paddingOuter:r})}}return{type:e}}function c8(t,e,i){const s={};return t?.stroke!=null&&(s.style=[{stroke:t?.stroke}],s.enabled??(s.enabled=!0)),t?.strokeWidth!=null&&(s.width=t?.strokeWidth,s.enabled??(s.enabled=!0)),i.type==="bar"&&i.direction!=="horizontal"&&(s.enabled??(s.enabled=!0)),t?.visible!=null&&(s.enabled=t.visible),s.enabled??(s.enabled=e),s}function h8(t){const{background:e,container:i,height:s,listeners:a,locale:n,minHeight:o,minWidth:r,padding:l,width:c,theme:h,data:u,crosshair:d,axis:p,min:g,max:f,tooltip:x,context:m,...b}=t,v=fa(t,{background:e,container:i,height:s,listeners:a,locale:n,minHeight:o,minWidth:r,padding:l,width:c,tooltip:ya,context:ya,data:ya,crosshair:ya,axis:ya,min:ya,max:ya,theme:ya}),{data:S,series:[D]=[],datumKey:k}=gP(u),L=b;D!=null&&Object.assign(L,D),L.tooltip={...x,renderer:mP(m,x,k)},v.theme=uk(h,yP),v.data=S,v.series=[L];const T=L.type!=="bar"||L.direction!=="horizontal",[N,C]=T?["bottom","left"]:["left","bottom"],O={...l8(p,"category"),position:N,...fa(t,{crosshair:d})},R={type:"number",gridLine:c8(p,!1,t),position:C,...fa(t,{min:g,max:f})};return v.axes=T?[R,O]:[O,R],v}var hk,Pb,Bb,zb,fP,yP,uk,mP,u8=A({"packages/ag-charts-community/src/api/preset/sparkline.ts"(){"use strict";Py(),de(),HA(),cP(),hk={title:{enabled:!1},label:{enabled:!1},line:{enabled:!1},gridLine:{enabled:!1},crosshair:{enabled:!1,stroke:Pg,lineDash:[0],label:{enabled:!1}}},Pb={...hk,nice:!1},Bb={position:{type:"sparkline"}},zb={style:[{stroke:ur}],width:2},fP={number:{gridLine:zb},time:{gridLine:zb},category:{gridLine:zb}},yP={overrides:{common:{animation:{enabled:!1},contextMenu:{enabled:!1},keyboard:{enabled:!1},background:{visible:!1},padding:{top:0,right:0,bottom:0,left:0},axes:{number:{...Pb,interval:{values:[0]}},log:{...Pb},time:{...Pb},category:{...hk}}},bar:{series:{crisp:!1,label:{placement:"inside-end",padding:4},sparklineMode:!0},tooltip:{...Bb,range:"nearest"},axes:fP},line:{seriesArea:{padding:{top:2,right:2,bottom:2,left:2}},series:{sparklineMode:!0,strokeWidth:1,marker:{enabled:!1,size:3},tooltip:Bb}},area:{seriesArea:{padding:{top:1,right:0,bottom:1,left:0}},series:{strokeWidth:1,fillOpacity:.4,tooltip:Bb}}}},uk=As(r8),mP=As((t,e,i)=>s=>{const a=s.datum[s.xKey],n=s.datum[s.yKey],o=i!=null?s.datum[i]:s.datum,r=e?.renderer?.({context:t,datum:o,xValue:a,yValue:n});if(typeof r=="string")return r;const l=r?.title,c=r?.content;return l!=null&&c!=null?{heading:l,title:void 0,data:[{label:void 0,value:c}]}:{heading:l??c??n.toFixed(2),title:void 0,data:[]}})}}),xP,bP,d8=A({"packages/ag-charts-community/src/api/preset/presets.ts"(){"use strict";$9(),o8(),u8(),xP={"price-volume":Q9,gauge:Z9,sparkline:h8},bP={sparkline:gP}}});function SP(t,e){let i=[];const s=rx(t),a=ir(t),n=a?le.get(a):"unknown";for(const o of Qc)if(!(n!=="unknown"&&!o.chartTypes.includes(n))){if(o.type==="root"||o.type==="legend"){const r=t[o.optionsKey];if(r==null)continue;o.optionsInnerKey?r[o.optionsInnerKey]&&(i.push(`${o.optionsKey}.${o.optionsInnerKey}`),delete r[o.optionsInnerKey]):(i.push(o.optionsKey),delete t[o.optionsKey])}else if(o.type==="axis"){if(!("axes"in t)||!t.axes?.some(r=>r.type===o.identifier))continue;i.push(`axis[type=${o.identifier}]`),t.axes=t.axes.filter(r=>r.type!==o.identifier)}else if(o.type==="axis-option"){if(!("axes"in t)||!t.axes?.some(r=>r[o.optionsKey]))continue;i.push(`axis.${o.optionsKey}`),t.axes.forEach(r=>{r[o.optionsKey]&&delete r[o.optionsKey]})}else if(o.type==="series"){if(o.community||!t.series?.some(r=>r.type===o.identifier))continue;i.push(`series[type=${o.identifier}]`),t.series=t.series.filter(r=>r.type!==o.identifier)}else if(o.type==="series-option"){if(!t.series?.some(r=>r[o.optionsKey]))continue;i.push(`series.${o.optionsKey}`),t.series.forEach(r=>{r[o.optionsKey]&&delete r[o.optionsKey]})}}if(i.length&&!e){s&&(i=["AgCharts.createGauge"]);let o="ag-charts-enterprise",r="https://ag-grid.com/charts/javascript/installation/";t.mode==="integrated"&&(o="ag-grid-charts-enterprise' or 'ag-grid-enterprise/charts-enterprise",r="https://www.ag-grid.com/javascript-data-grid/integrated-charts-installation/"),st.warnOnce([`unable to use these enterprise features as '${o}' has not been loaded:`,"",...i,"",`See: ${r}`].join(`
`))}}function p8(t){const e="mode"in t&&t.mode==="integrated";for(const i of pn.byType("root","legend")){const s=t[i.optionsKey],a=s!=null&&s.enabled===!1,n=!("removable"in i)||i.removable===!0||i.removable==="standalone-only"&&!e;a&&n&&delete t[i.optionsKey]}}var g8=A({"packages/ag-charts-community/src/chart/factory/processEnterpriseOptions.ts"(){"use strict";so(),St(),lx(),Bu(),cg()}});function f8(t,e,i){const{errors:s}=MP(t,e,i);for(const{message:a}of s)st.warn(a);return s.length===0}function vP(t,e,i){const s=Rs(i)?i:i[xf],a=s?`; expecting ${s}`:"";return`${t?`Option \`${t}\``:"Value"} cannot be set to \`${s6(e)}\`${a}, ignoring.`}function MP(t,e,i=""){if(!ws(t))return{valid:null,errors:[{path:i,value:t,message:vP(i,t,"an object")}]};const s=new Set(Object.keys(t)),a=[],n={};function o(r){return ce(e)?`${i}[${r}]`:i?`${i}.${r}`:r}for(const[r,l]of Object.entries(e)){s.delete(r);const c=t[r];if(!(!l[DP]&&typeof c>"u"))if(el(l))l(c)?n[r]=c:a.push({key:r,path:i,value:c,message:vP(o(r),c,l)});else{const h=MP(c,l,o(r));n[r]=h.valid,a.push(...h.errors)}}for(const r of s)a.push({key:r,path:i,unknown:!0,message:`Unknown option \`${o(r)}\`, ignoring.`});return{valid:n,errors:a}}function So(t,e){return Object.assign(i=>t(i),{[xf]:e})}var xf,DP,AP,y8,m8,x8,b8,dk,vo,IP,kP,S8,v8,pk,M8=A({"packages/ag-charts-community/src/util/validate.ts"(){"use strict";St(),v_(),Ct(),xf=Symbol("description"),DP=Symbol("required"),AP=(...t)=>So(e=>t.some(i=>i(e)),t.map(e=>e[xf]).filter(Boolean).join(" or ")),y8=So(ce,"an array"),m8=So(BM,"a boolean"),x8=So(el,"a function"),b8=So(Vt,"a number"),dk=So(ws,"an object"),vo=So(Rs,"a string"),IP=(t,e=!0)=>So(i=>Vt(i)&&(i>t||e&&i===t),`a number greater than ${e?"or equal to ":""}${t}`),kP=(t,e)=>So(i=>Vt(i)&&i>=t&&i<=e,`a number between ${t} and ${e} inclusive`),S8=IP(0),v8=kP(0,1),pk=(t,e)=>So(i=>ce(i)&&i.every(t),e??`${t[xf]} array`)}});function gk(t){return t?.up||t?.down||t?.neutral?"user-full":t?.fills||t?.strokes?"user-indexed":"inbuilt"}var LP=A({"packages/ag-charts-community/src/module/coreModulesTypes.ts"(){"use strict"}});function TP(t){return NP[t]===!0}var bf,Fb,NP,CP,ma,Mo,xr=A({"packages/ag-charts-community/src/chart/themes/chartTheme.ts"(){"use strict";LP(),Rb(),ha(),Yt(),Ct(),Pu(),Bu(),yA(),ix(),yo(),pf(),de(),bf="white",Fb={get cartesian(){return{seriesTypes:le.cartesianTypes,commonOptions:["zoom","navigator"]}},get polar(){return{seriesTypes:le.polarTypes,commonOptions:[]}},get hierarchy(){return{seriesTypes:le.hierarchyTypes,commonOptions:[]}},get topology(){return{seriesTypes:le.topologyTypes,commonOptions:[]}},get"flow-proportion"(){return{seriesTypes:le.flowProportionTypes,commonOptions:[]}},get standalone(){return{seriesTypes:le.standaloneTypes,commonOptions:[]}},get gauge(){return{seriesTypes:le.gaugeTypes,commonOptions:[]}}},NP={"radial-gauge":!0,"linear-gauge":!0},CP=Object.values(Fb).reduce((t,{commonOptions:e})=>t.concat(e),[]),ma=class S2{static getAxisDefaults(e){return Lt(e,{title:{enabled:!1,text:"Axis Title",spacing:25,fontWeight:"normal",fontSize:13,fontFamily:xe,color:$e},label:{fontSize:12,fontFamily:xe,spacing:11,color:$e,avoidCollisions:!0},line:{enabled:!0,width:1,stroke:qu},tick:{enabled:!1,width:1,stroke:qu},gridLine:{enabled:!0,style:[{stroke:ur,lineDash:[]}]},crossLines:{enabled:!1,fill:rh,stroke:rh,fillOpacity:.1,strokeWidth:1,label:{enabled:!1,fontSize:12,fontFamily:xe,padding:5,color:$e}},crosshair:{enabled:!0}})}getChartDefaults(){return{minHeight:300,minWidth:300,background:{visible:!0,fill:td},padding:{top:mo,right:mo,bottom:mo,left:mo},keyboard:{enabled:!0},title:{enabled:!1,text:"Title",fontWeight:"normal",fontSize:17,fontFamily:xe,color:$e,wrapping:"hyphenate",layoutStyle:pr,textAlign:gr},subtitle:{enabled:!1,text:"Subtitle",spacing:20,fontSize:13,fontFamily:xe,color:hr,wrapping:"hyphenate",layoutStyle:pr,textAlign:gr},footnote:{enabled:!1,text:"Footnote",spacing:20,fontSize:13,fontFamily:xe,color:"rgb(140, 140, 140)",wrapping:"hyphenate",layoutStyle:pr,textAlign:gr},legend:{position:"bottom",spacing:30,listeners:{},toggleSeries:!0,item:{paddingX:16,paddingY:8,marker:{size:15,padding:8},showSeriesStroke:!0,label:{color:$e,fontSize:12,fontFamily:xe}},reverseOrder:!1,pagination:{marker:{size:12},activeStyle:{fill:$e},inactiveStyle:{fill:hr},highlightStyle:{fill:$e},label:{color:$e}}},tooltip:{enabled:!0,darkTheme:oh,delay:0},overlays:{darkTheme:oh},listeners:{}}}constructor(e={}){const{overrides:i,palette:s}=$i(e),a=this.createChartConfigPerChartType(this.getDefaults()),n={};i&&this.mergeOverrides(a,n,i);const{fills:o,strokes:r,...l}=this.getDefaultColors();this.palette=bp(Lt(s,{fills:Object.values(o),strokes:Object.values(r),...l})),this.paletteType=gk(s),this.config=bp(this.templateTheme(a)),this.presets=bp(n)}mergeOverrides(e,i,s){for(const{seriesTypes:a,commonOptions:n}of Object.values(Fb)){const o={...s.common};for(const r of CP)n.includes(r)||delete o[r];if(o)for(const r of a){const l=r;TP(l)||(e[l]=Lt(o,e[l]))}}le.seriesTypes.forEach(a=>{const n=a,o=s[n];TP(n)?i[n]=o:e[n]=Lt(o,e[n])})}createChartConfigPerChartType(e){for(const[i,{seriesTypes:s}]of Object.entries(Fb)){const a=ex.get(i);for(const n of s)e[n]??(e[n]=$i(a))}return e}getDefaults(){const e=(i,s)=>{const a={},n={axes:{},...tx.getThemeTemplates(),...this.getChartDefaults(),...ex.get(i)};for(const o of s){a[o]=Lt(js.getThemeTemplate(o),a[o]??$i(n));const{axes:r}=a[o];for(const l of lo.keys())r[l]=Lt(r[l],lo.getThemeTemplate(l),S2.cartesianAxisDefault[l])}return a};return Lt(e("cartesian",le.cartesianTypes),e("polar",le.polarTypes),e("hierarchy",le.hierarchyTypes),e("topology",le.topologyTypes),e("flow-proportion",le.flowProportionTypes),e("standalone",le.standaloneTypes),e("gauge",le.gaugeTypes))}static applyTemplateTheme(e,i,s){if(ce(e))for(let a=0;a<e.length;a++){const n=e[a];typeof n=="symbol"&&s?.has(n)&&(e[a]=s.get(n))}else for(const[a,n]of Object.entries(e))typeof n=="symbol"&&s?.has(n)&&(e[a]=s.get(n))}templateTheme(e,i=!0){const s=i?$i(e):e,a=this.getTemplateParameters();return ul(s,S2.applyTemplateTheme,void 0,void 0,a),s}getDefaultColors(){return{fills:qe,strokes:An,up:{fill:qe.GREEN,stroke:An.GREEN},down:{fill:qe.RED,stroke:An.RED},neutral:{fill:qe.GRAY,stroke:An.GRAY},altUp:{fill:qe.BLUE,stroke:An.BLUE},altDown:{fill:qe.ORANGE,stroke:An.ORANGE},altNeutral:{fill:qe.GRAY,stroke:An.GRAY}}}getTemplateParameters(){const{isEnterprise:e}=bo,i=new Map;i.set(oh,!1),i.set(_x,e),i.set(Rx,!e),i.set(xe,"Verdana, sans-serif"),i.set($e,"#464646"),i.set(Px,"#fff"),i.set(hr,"#8c8c8c"),i.set(ur,"#e0eaf1"),i.set(qu,"#c3c3c3"),i.set(rh,"#464646"),i.set(Ju,"#d9d9d9"),i.set(Tg,"#ddd"),i.set(cr,bf),i.set(td,bf),i.set(Lg,"black"),i.set(dr,"#00000080"),i.set(ks,[qe.ORANGE,qe.YELLOW,qe.GREEN]),i.set(Pg,"#aaa"),i.set(ga,[qe.GREEN,qe.YELLOW,qe.RED]),i.set(Mn,["#5090dc","#629be0","#73a6e3","#85b1e7","#96bcea","#a8c8ee","#b9d3f1","#cbdef5"]),i.set(mo,20),i.set(pr,"block"),i.set(gr,"center"),i.set(Bg,["#fff","#e0e5ea","#c1ccd5","#a3b4c1","#859cad"]),i.set(zg,["#fff","#c5cbd1","#a4b1bd","#8498a9","#648096"]),i.set(Vx,["#797b86","#e24c4a","#f49d2d","#65ab58","#409682","#4db9d2","#5090dc","#3068f9","#e24c4a","#913aac","#d93e64"]),i.set(_g,bf),i.set(Ls,qe.BLUE),i.set(Fg,qe.BLUE),i.set(Ts,qe.BLUE),i.set(jg,bf),i.set(Gg,"#fafafa"),i.set(Vg,"#ddd"),i.set(Ug,"#000"),i.set(Wg,"#181d1f"),i.set(Ux,"#e35c5c"),i.set(Wx,"#e35c5c"),i.set(Hg,"#fafafa"),i.set(Yg,"#ddd"),i.set(Kg,"#000"),i.set(ed,"top"),i.set(Dn,!1);const s=this.getDefaultColors();return i.set(Ng,this.palette.up?.stroke??s.up.stroke),i.set(Og,this.palette.up?.fill??s.up.fill),i.set(Cg,this.palette.down?.stroke??s.down.stroke),i.set(Eg,this.palette.down?.fill??s.down.fill),i.set(lh,this.palette.neutral?.stroke??s.neutral.stroke),i.set(wg,this.palette.neutral?.fill??s.neutral.fill),i.set(Bx,this.palette.altUp?.stroke??s.up.stroke),i.set(Fx,this.palette.altUp?.fill??s.up.fill),i.set(zx,this.palette.altDown?.stroke??s.down.stroke),i.set(jx,this.palette.altDown?.fill??s.down.fill),i.set(Gx,this.palette.altNeutral?.fill??s.altNeutral.fill),i.set(Rg,this.palette.altNeutral?.stroke??s.altNeutral.stroke),i}},ma.cartesianAxisDefault={number:ma.getAxisDefaults({line:{enabled:!1}}),log:ma.getAxisDefaults({base:10,line:{enabled:!1},interval:{minSpacing:NaN}}),category:ma.getAxisDefaults({groupPaddingInner:.1,label:{autoRotate:!0},gridLine:{enabled:Dn},crosshair:{enabled:!1}}),"grouped-category":ma.getAxisDefaults({tick:{enabled:!0,stroke:Ju},label:{spacing:10,rotation:270},paddingInner:.4,groupPaddingInner:.2,crosshair:{enabled:!1}}),time:ma.getAxisDefaults({gridLine:{enabled:Dn}}),"ordinal-time":ma.getAxisDefaults({groupPaddingInner:0,label:{autoRotate:!1},gridLine:{enabled:Dn}}),"angle-category":ma.getAxisDefaults({label:{spacing:5},gridLine:{enabled:Dn}}),"angle-number":ma.getAxisDefaults({label:{spacing:5},gridLine:{enabled:Dn}}),"radius-category":ma.getAxisDefaults({line:{enabled:!1}}),"radius-number":ma.getAxisDefaults({line:{enabled:!1}})},Mo=ma}}),Sf,es,El,ph,nd=A({"packages/ag-charts-community/src/chart/themes/darkTheme.ts"(){"use strict";xr(),de(),Sf="#192232",es={BLUE:"#5090dc",ORANGE:"#ffa03a",GREEN:"#459d55",CYAN:"#34bfe1",YELLOW:"#e1cc00",VIOLET:"#9669cb",GRAY:"#b5b5b5",MAGENTA:"#bd5aa7",BROWN:"#8a6224",RED:"#ef5452"},El={BLUE:"#74a8e6",ORANGE:"#ffbe70",GREEN:"#6cb176",CYAN:"#75d4ef",YELLOW:"#f6e559",VIOLET:"#aa86d8",GRAY:"#a1a1a1",MAGENTA:"#ce7ab9",BROWN:"#997b52",RED:"#ff7872"},ph=class extends Mo{getDefaultColors(){return{fills:es,strokes:El,up:{fill:es.GREEN,stroke:El.GREEN},down:{fill:es.RED,stroke:El.RED},neutral:{fill:es.GRAY,stroke:El.GRAY},altUp:{fill:es.BLUE,stroke:El.BLUE},altDown:{fill:es.ORANGE,stroke:El.ORANGE},altNeutral:{fill:es.GRAY,stroke:El.GRAY}}}getTemplateParameters(){const t=super.getTemplateParameters();return t.set(oh,!0),t.set(_g,Sf),t.set(Tg,"#4b525d"),t.set($e,"#fff"),t.set(hr,"#7d91a0"),t.set(ur,"#545a6e"),t.set(rh,"#fff"),t.set(Ju,"#7f8389"),t.set(ks,[es.ORANGE,es.YELLOW,es.GREEN]),t.set(ga,[es.GREEN,es.YELLOW,es.RED]),t.set(Mn,["#5090dc","#4882c6","#4073b0","#38659a","#305684","#28486e","#203a58","#182b42"]),t.set(Bg,["#192834","#253746","#324859","#3f596c","#4d6a80"]),t.set(zg,["#192834","#3b5164","#496275","#577287","#668399"]),t.set(td,Sf),t.set(Lg,"white"),t.set(cr,Sf),t.set(Ls,es.BLUE),t.set(Fg,"#fff"),t.set(Ts,es.BLUE),t.set(jg,Sf),t.set(Gg,"#28313e"),t.set(Vg,"#4b525d"),t.set(Ug,"#fff"),t.set(Wg,"#fff"),t.set(Hg,"#28313e"),t.set(Yg,"#4b525d"),t.set(Kg,"#fff"),t}constructor(t){super(t)}}}}),xa,wl,OP,D8=A({"packages/ag-charts-community/src/chart/themes/financialDark.ts"(){"use strict";nd(),de(),xa={GREEN:"#089981",RED:"#F23645",BLUE:"#5090dc",GRAY:"#A9A9A9"},wl={GREEN:"#089981",RED:"#F23645",BLUE:"#5090dc",GRAY:"#909090"},OP=class extends ph{getDefaultColors(){return{fills:{...xa},strokes:{...wl},up:{fill:xa.GREEN,stroke:wl.GREEN},down:{fill:xa.RED,stroke:wl.RED},neutral:{fill:xa.BLUE,stroke:wl.BLUE},altUp:{fill:xa.GREEN,stroke:wl.GREEN},altDown:{fill:xa.RED,stroke:wl.RED},altNeutral:{fill:xa.GRAY,stroke:wl.GRAY}}}getTemplateParameters(){const t=super.getTemplateParameters();return t.set(ks,[xa.GREEN,xa.BLUE,xa.RED]),t.set(Ls,xa.BLUE),t.set(Ts,xa.BLUE),t.set(ur,"#343A4E"),t.set(mo,0),t.set(pr,"overlay"),t.set(gr,"left"),t.set(ed,"bottom"),t.set(Dn,!0),t}}}}),ba,Rl,EP,A8=A({"packages/ag-charts-community/src/chart/themes/financialLight.ts"(){"use strict";xr(),de(),ba={GREEN:"#089981",RED:"#F23645",BLUE:"#5090dc",GRAY:"#A9A9A9"},Rl={GREEN:"#089981",RED:"#F23645",BLUE:"#5090dc",GRAY:"#909090"},EP=class extends Mo{getDefaultColors(){return{fills:{...ba},strokes:{...Rl},up:{fill:ba.GREEN,stroke:Rl.GREEN},down:{fill:ba.RED,stroke:Rl.RED},neutral:{fill:ba.BLUE,stroke:Rl.BLUE},altUp:{fill:ba.GREEN,stroke:Rl.GREEN},altDown:{fill:ba.RED,stroke:Rl.RED},altNeutral:{fill:ba.GRAY,stroke:Rl.GRAY}}}getTemplateParameters(){const t=super.getTemplateParameters();return t.set(ks,[ba.GREEN,ba.BLUE,ba.RED]),t.set(Ls,ba.BLUE),t.set(Ts,ba.BLUE),t.set(ur,"#F2F3F3"),t.set(mo,0),t.set(pr,"overlay"),t.set(gr,"left"),t.set(ed,"bottom"),t.set(Dn,!0),t}}}}),is,_l,wP,I8=A({"packages/ag-charts-community/src/chart/themes/materialDark.ts"(){"use strict";nd(),de(),is={BLUE:"#2196F3",ORANGE:"#FF9800",GREEN:"#4CAF50",CYAN:"#00BCD4",YELLOW:"#FFEB3B",VIOLET:"#7E57C2",GRAY:"#9E9E9E",MAGENTA:"#F06292",BROWN:"#795548",RED:"#F44336"},_l={BLUE:"#90CAF9",ORANGE:"#FFCC80",GREEN:"#A5D6A7",CYAN:"#80DEEA",YELLOW:"#FFF9C4",VIOLET:"#B39DDB",GRAY:"#E0E0E0",MAGENTA:"#F48FB1",BROWN:"#A1887F",RED:"#EF9A9A"},wP=class extends ph{getDefaultColors(){return{fills:is,strokes:_l,up:{fill:is.GREEN,stroke:_l.GREEN},down:{fill:is.RED,stroke:_l.RED},neutral:{fill:is.GRAY,stroke:_l.GRAY},altUp:{fill:is.BLUE,stroke:_l.BLUE},altDown:{fill:is.RED,stroke:_l.RED},altNeutral:{fill:is.GRAY,stroke:_l.GRAY}}}getTemplateParameters(){const t=super.getTemplateParameters();return t.set(ks,[is.ORANGE,is.YELLOW,is.GREEN]),t.set(Mn,["#2196f3","#208FEC","#1E88E5","#1C7FDC","#1976d2","#176EC9","#1565c0"]),t.set(ga,[is.GREEN,is.YELLOW,is.RED]),t.set(Ls,is.BLUE),t.set(Ts,is.BLUE),t}}}}),ss,Pl,RP,k8=A({"packages/ag-charts-community/src/chart/themes/materialLight.ts"(){"use strict";xr(),de(),ss={BLUE:"#2196F3",ORANGE:"#FF9800",GREEN:"#4CAF50",CYAN:"#00BCD4",YELLOW:"#FFEB3B",VIOLET:"#7E57C2",GRAY:"#9E9E9E",MAGENTA:"#F06292",BROWN:"#795548",RED:"#F44336"},Pl={BLUE:"#1565C0",ORANGE:"#E65100",GREEN:"#2E7D32",CYAN:"#00838F",YELLOW:"#F9A825",VIOLET:"#4527A0",GRAY:"#616161",MAGENTA:"#C2185B",BROWN:"#4E342E",RED:"#B71C1C"},RP=class extends Mo{getDefaultColors(){return{fills:ss,strokes:Pl,up:{fill:ss.GREEN,stroke:Pl.GREEN},down:{fill:ss.RED,stroke:Pl.RED},neutral:{fill:ss.GRAY,stroke:Pl.GRAY},altUp:{fill:ss.BLUE,stroke:Pl.BLUE},altDown:{fill:ss.RED,stroke:Pl.RED},altNeutral:{fill:ss.GRAY,stroke:Pl.GRAY}}}getTemplateParameters(){const t=super.getTemplateParameters();return t.set(ks,[ss.ORANGE,ss.YELLOW,ss.GREEN]),t.set(Mn,["#2196f3","#329EF4","#42a5f5","#53ADF6","#64b5f6","#7AC0F8","#90caf9"]),t.set(ga,[ss.GREEN,ss.YELLOW,ss.RED]),t.set(Ls,ss.BLUE),t.set(Ts,ss.BLUE),t}}}}),Ce,Bl,_P,L8=A({"packages/ag-charts-community/src/chart/themes/polychromaDark.ts"(){"use strict";nd(),de(),Ce={BLUE:"#436ff4",PURPLE:"#9a7bff",MAGENTA:"#d165d2",PINK:"#f0598b",RED:"#f47348",ORANGE:"#f2a602",YELLOW:"#e9e201",GREEN:"#21b448",CYAN:"#00b9a2",MODERATE_BLUE:"#00aee4",GRAY:"#bbbbbb"},Bl={BLUE:"#6698ff",PURPLE:"#c0a3ff",MAGENTA:"#fc8dfc",PINK:"#ff82b1",RED:"#ff9b70",ORANGE:"#ffcf4e",YELLOW:"#ffff58",GREEN:"#58dd70",CYAN:"#51e2c9",MODERATE_BLUE:"#4fd7ff",GRAY:"#eeeeee"},_P=class extends ph{getDefaultColors(){return{fills:Ce,strokes:Bl,up:{fill:Ce.GREEN,stroke:Bl.GREEN},down:{fill:Ce.RED,stroke:Bl.RED},neutral:{fill:Ce.GRAY,stroke:Bl.GRAY},altUp:{fill:Ce.BLUE,stroke:Bl.BLUE},altDown:{fill:Ce.RED,stroke:Bl.RED},altNeutral:{fill:Ce.GRAY,stroke:Bl.GRAY}}}getTemplateParameters(){const t=super.getTemplateParameters();return t.set(ks,[Ce.BLUE,Ce.RED]),t.set(Mn,[Ce.BLUE,Ce.PURPLE,Ce.MAGENTA,Ce.PINK,Ce.RED,Ce.ORANGE,Ce.YELLOW,Ce.GREEN]),t.set(ga,[Ce.BLUE,Ce.RED]),t.set(Ls,Ce.BLUE),t.set(Ts,Ce.BLUE),t}}}}),Oe,zl,PP,T8=A({"packages/ag-charts-community/src/chart/themes/polychromaLight.ts"(){"use strict";xr(),de(),Oe={BLUE:"#436ff4",PURPLE:"#9a7bff",MAGENTA:"#d165d2",PINK:"#f0598b",RED:"#f47348",ORANGE:"#f2a602",YELLOW:"#e9e201",GREEN:"#21b448",CYAN:"#00b9a2",MODERATE_BLUE:"#00aee4",GRAY:"#bbbbbb"},zl={BLUE:"#2346c9",PURPLE:"#7653d4",MAGENTA:"#a73da9",PINK:"#c32d66",RED:"#c84b1c",ORANGE:"#c87f00",YELLOW:"#c1b900",GREEN:"#008c1c",CYAN:"#00927c",MODERATE_BLUE:"#0087bb",GRAY:"#888888"},PP=class extends Mo{getDefaultColors(){return{fills:Oe,strokes:zl,up:{fill:Oe.GREEN,stroke:zl.GREEN},down:{fill:Oe.RED,stroke:zl.RED},neutral:{fill:Oe.GRAY,stroke:zl.GRAY},altUp:{fill:Oe.BLUE,stroke:zl.BLUE},altDown:{fill:Oe.RED,stroke:zl.RED},altNeutral:{fill:Oe.GRAY,stroke:zl.GRAY}}}getTemplateParameters(){const t=super.getTemplateParameters();return t.set(ks,[Oe.BLUE,Oe.RED]),t.set(Mn,[Oe.BLUE,Oe.PURPLE,Oe.MAGENTA,Oe.PINK,Oe.RED,Oe.ORANGE,Oe.YELLOW,Oe.GREEN]),t.set(ga,[Oe.BLUE,Oe.RED]),t.set(Ls,Oe.BLUE),t.set(Ts,Oe.BLUE),t}}}}),wi,br,BP,N8=A({"packages/ag-charts-community/src/chart/themes/sheetsDark.ts"(){"use strict";nd(),de(),wi={BLUE:"#4472C4",ORANGE:"#ED7D31",GRAY:"#A5A5A5",YELLOW:"#FFC000",MODERATE_BLUE:"#5B9BD5",GREEN:"#70AD47",DARK_GRAY:"#7B7B7B",DARK_BLUE:"#264478",VERY_DARK_GRAY:"#636363",DARK_YELLOW:"#997300"},br={BLUE:"#6899ee",ORANGE:"#ffa55d",GRAY:"#cdcdcd",YELLOW:"#ffea53",MODERATE_BLUE:"#82c3ff",GREEN:"#96d56f",DARK_GRAY:"#a1a1a1",DARK_BLUE:"#47689f",VERY_DARK_GRAY:"#878787",DARK_YELLOW:"#c0993d"},BP=class extends ph{getDefaultColors(){return{fills:{...wi,RED:wi.ORANGE},strokes:{...br,RED:br.ORANGE},up:{fill:wi.GREEN,stroke:br.GREEN},down:{fill:wi.ORANGE,stroke:br.ORANGE},neutral:{fill:wi.GRAY,stroke:br.GRAY},altUp:{fill:wi.BLUE,stroke:br.BLUE},altDown:{fill:wi.ORANGE,stroke:br.ORANGE},altNeutral:{fill:wi.GRAY,stroke:br.GRAY}}}getTemplateParameters(){const t=super.getTemplateParameters();return t.set(ks,[wi.ORANGE,wi.YELLOW,wi.GREEN]),t.set(ga,[wi.GREEN,wi.YELLOW,wi.ORANGE]),t.set(Ls,wi.BLUE),t.set(Ts,wi.BLUE),t}}}}),as,Do,zP,C8=A({"packages/ag-charts-community/src/chart/themes/sheetsLight.ts"(){"use strict";xr(),de(),as={BLUE:"#5281d5",ORANGE:"#ff8d44",GRAY:"#b5b5b5",YELLOW:"#ffd02f",MODERATE_BLUE:"#6aabe6",GREEN:"#7fbd57",DARK_GRAY:"#8a8a8a",DARK_BLUE:"#335287",VERY_DARK_GRAY:"#717171",DARK_YELLOW:"#a98220"},Do={BLUE:"#214d9b",ORANGE:"#c25600",GRAY:"#7f7f7f",YELLOW:"#d59800",MODERATE_BLUE:"#3575ac",GREEN:"#4b861a",DARK_GRAY:"#575757",DARK_BLUE:"#062253",VERY_DARK_GRAY:"#414141",DARK_YELLOW:"#734f00"},zP=class extends Mo{getDefaultColors(){return{fills:{...as,RED:as.ORANGE},strokes:{...Do,RED:Do.ORANGE},up:{fill:as.GREEN,stroke:Do.GREEN},down:{fill:as.ORANGE,stroke:Do.ORANGE},neutral:{fill:Do.GRAY,stroke:Do.GRAY},altUp:{fill:as.BLUE,stroke:Do.BLUE},altDown:{fill:as.ORANGE,stroke:Do.ORANGE},altNeutral:{fill:as.GRAY,stroke:Do.GRAY}}}getTemplateParameters(){const t=super.getTemplateParameters();return t.set(ks,[as.ORANGE,as.YELLOW,as.GREEN]),t.set(ga,[as.GREEN,as.YELLOW,as.ORANGE]),t.set(Ls,as.BLUE),t.set(Ts,as.BLUE),t}}}}),ns,Fl,FP,O8=A({"packages/ag-charts-community/src/chart/themes/vividDark.ts"(){"use strict";nd(),de(),ns={BLUE:"#0083ff",ORANGE:"#ff6600",GREEN:"#00af00",CYAN:"#00ccff",YELLOW:"#f7c700",VIOLET:"#ac26ff",GRAY:"#a7a7b7",MAGENTA:"#e800c5",BROWN:"#b54300",RED:"#ff0000"},Fl={BLUE:"#67b7ff",ORANGE:"#ffc24d",GREEN:"#5cc86f",CYAN:"#54ebff",VIOLET:"#fff653",YELLOW:"#c18aff",GRAY:"#aeaeae",MAGENTA:"#f078d4",BROWN:"#ba8438",RED:"#ff726e"},FP=class extends ph{getDefaultColors(){return{fills:ns,strokes:Fl,up:{fill:ns.GREEN,stroke:Fl.GREEN},down:{fill:ns.RED,stroke:Fl.RED},neutral:{fill:ns.GRAY,stroke:Fl.GRAY},altUp:{fill:ns.BLUE,stroke:Fl.BLUE},altDown:{fill:ns.ORANGE,stroke:Fl.ORANGE},altNeutral:{fill:ns.GRAY,stroke:Fl.GRAY}}}getTemplateParameters(){const t=super.getTemplateParameters();return t.set(ks,[ns.ORANGE,ns.YELLOW,ns.GREEN]),t.set(Mn,["#0083ff","#0076e6","#0069cc","#005cb3","#004f99","#004280","#003466","#00274c"]),t.set(ga,[ns.GREEN,ns.YELLOW,ns.RED]),t.set(Ls,ns.BLUE),t.set(Ts,ns.BLUE),t}}}}),os,jl,jP,E8=A({"packages/ag-charts-community/src/chart/themes/vividLight.ts"(){"use strict";xr(),de(),os={BLUE:"#0083ff",ORANGE:"#ff6600",GREEN:"#00af00",CYAN:"#00ccff",YELLOW:"#f7c700",VIOLET:"#ac26ff",GRAY:"#a7a7b7",MAGENTA:"#e800c5",BROWN:"#b54300",RED:"#ff0000"},jl={BLUE:"#0f68c0",ORANGE:"#d47100",GREEN:"#007922",CYAN:"#009ac2",VIOLET:"#bca400",YELLOW:"#753cac",GRAY:"#646464",MAGENTA:"#9b2685",BROWN:"#6c3b00",RED:"#cb0021"},jP=class extends Mo{getDefaultColors(){return{fills:os,strokes:jl,up:{fill:os.GREEN,stroke:jl.GREEN},down:{fill:os.RED,stroke:jl.RED},neutral:{fill:os.GRAY,stroke:jl.GRAY},altUp:{fill:os.BLUE,stroke:jl.BLUE},altDown:{fill:os.ORANGE,stroke:jl.ORANGE},altNeutral:{fill:os.GRAY,stroke:jl.GRAY}}}getTemplateParameters(){const t=super.getTemplateParameters();return t.set(ks,[os.ORANGE,os.YELLOW,os.GREEN]),t.set(Mn,["#0083ff","#1a8fff","#339cff","#4da8ff","#66b5ff","#80c1ff","#99cdff","#b3daff"]),t.set(ga,[os.GREEN,os.YELLOW,os.RED]),t.set(Ls,os.BLUE),t.set(Ts,os.BLUE),t}}}});function w8(t){if(t instanceof Mo)return t;if(t==null||typeof t=="string"){const e=jb[t];return e?e():(st.warnOnce(`the theme [${t}] is invalid, using [ag-default] instead.`),gh())}if(f8(t,VP,"theme")){const e=R8(t),i=e.baseTheme?vf(e.baseTheme):gh();return new i.constructor(e)}return gh()}function R8(t){let e=t,i;const s=[];for(;typeof e=="object";)i??(i=e.palette),e.overrides&&s.push(e.overrides),e=e.baseTheme;return{baseTheme:e,overrides:Lt(...s),palette:i}}var gh,GP,jb,vf,VP,Gb=A({"packages/ag-charts-community/src/chart/mapping/themes.ts"(){"use strict";St(),HA(),Yt(),M8(),xr(),nd(),D8(),A8(),I8(),k8(),L8(),T8(),N8(),C8(),O8(),E8(),gh=As(()=>new Mo),GP=As(()=>new ph),jb={"ag-default-dark":GP,"ag-sheets-dark":As(()=>new BP),"ag-polychroma-dark":As(()=>new _P),"ag-vivid-dark":As(()=>new FP),"ag-material-dark":As(()=>new wP),"ag-financial-dark":As(()=>new OP),null:gh,undefined:gh,"ag-default":gh,"ag-sheets":As(()=>new zP),"ag-polychroma":As(()=>new PP),"ag-vivid":As(()=>new jP),"ag-material":As(()=>new RP),"ag-financial":As(()=>new EP)},vf=As(w8),VP={baseTheme:AP(vo,dk),overrides:dk,palette:{fills:pk(vo),strokes:pk(vo),up:{fill:vo,stroke:vo},down:{fill:vo,stroke:vo},neutral:{fill:vo,stroke:vo}}}}}),UP,Vb,fk,WP=A({"packages/ag-charts-community/src/module/optionsModule.ts"(){"use strict";Py(),d8(),Pu(),Bu(),cg(),g8(),ix(),Gb(),lx(),xr(),Ue(),He(),Nt(),ha(),St(),Yt(),Ct(),LP(),Rb(),UP=new Set(["map-shape-background","map-line-background"]),Vb=class Qr{constructor(e,i,s,a,n){this.debug=te.create(!0,"opts"),this.optionMetadata=a??{},this.processedOverrides=i??{};let o=null;if(e instanceof Qr){if(o=e,this.specialOverrides=o.specialOverrides,!n)throw new Error("AG Charts - internal error: deltaOptions must be supplied.");this.userOptions=Lt(n,$i(o.userOptions,Qr.OPTIONS_CLONE_OPTS))}else this.userOptions=e,this.specialOverrides=this.specialOverridesDefaults({...s});let r,l,c,h;n!=null&&Qr.isFastPathDelta(n)&&o!=null?{activeTheme:r,processedOptions:l,defaultAxes:c,fastDelta:h}=this.fastSetup(n,o):{activeTheme:r,processedOptions:l,defaultAxes:c}=this.slowSetup(i,n),this.activeTheme=r,this.processedOptions=l,this.defaultAxes=c,this.fastDelta=h}static isFastPathDelta(e){for(const i of Object.keys(e))if(!this.FAST_PATH_OPTIONS.has(i))return!1;return!0}fastSetup(e,i){const{activeTheme:s,defaultAxes:a,processedOptions:n}=i,{presetType:o}=this.optionMetadata,r=o?bP[o]:void 0;o!=null&&e.data!=null&&r!=null&&(e=Lt(r(e.data),e)),this.fastSeriesSetup(e,n);const l=Lt(e,n);return{activeTheme:s,defaultAxes:a,processedOptions:l,fastDelta:e}}fastSeriesSetup(e,i){e.series&&(e.series?.every((s,a)=>yE(s,i.series?.[a]??{}))?delete e.series:e.series=e.series.map((s,a)=>Lt(s,i.series?.[a]??{})))}slowSetup(e,i){let s=$i(this.userOptions,Qr.OPTIONS_CLONE_OPTS);i&&(s=Lt(i,s));const{presetType:a}=this.optionMetadata;if(a!=null){const f=xP[a],x=this.userOptions,m=this.userOptions.type,b=m!=null?vf(this.userOptions.theme).presets[m]:void 0;this.debug(">>> AgCharts.createOrUpdate() - applying preset",x),s=f?.(x,b,()=>this.activeTheme)??s}bo.isEnterprise||SP(s);const n=vf(s.theme);this.sanityCheck(s),this.removeDisabledOptions(s);const o=this.getDefaultAxes(s),r=this.optionsType(s),{axes:l={},annotations:c={},series:h,...u}=this.getSeriesThemeConfig(r,n),[d,p]=this.splitAnnotationsOptions(c);let g=Lt(e,s,d,u,o);return this.processAxesOptions(g,l),this.processSeriesOptions(g,n),this.processMiniChartSeriesOptions(g,n),this.annotationThemes=p,g=$i(g,Qr.OPTIONS_CLONE_OPTS),(hg(g)||ox(g)||bZ(g))&&g.legend?.enabled==null&&(g.legend??(g.legend={}),g.legend.enabled=g.series.length>1),this.enableConfiguredOptions(g,this.userOptions),n.templateTheme(g,!1),this.removeDisabledOptions(s),p8(g),bo.isEnterprise||SP(g,!0),this.debug("AgCharts.createOrUpdate() - processed options",g),{activeTheme:n,processedOptions:g,defaultAxes:o}}diffOptions(e){return this===e?{}:e==null?this.processedOptions:this.fastDelta??eo(e.processedOptions,this.processedOptions)}getSeriesThemeConfig(e,i){return i?.config[e]??{}}getDefaultAxes(e){const i=this.optionsType(e),s=e.series?.find(a=>(a.type??"line")===i)??{};return js.cloneDefaultAxes(i,s)}optionsType(e){return e.series?.[0]?.type??"line"}sanityCheck(e){this.axesTypeIntegrity(e),this.seriesTypeIntegrity(e),this.soloSeriesIntegrity(e)}splitAnnotationsOptions(e){const{axesButtons:i=null,enabled:s=null,optionsToolbar:a=null,toolbar:n=null,...o}=e;return i==null&&s==null&&a==null&&n==null?[{},o]:[{annotations:{axesButtons:i,enabled:s,optionsToolbar:a,toolbar:n}},o]}processAxesOptions(e,i){"axes"in e&&(e.axes=e.axes?.map(s=>{const{crossLines:a,...n}=Lt(i[s.type]?.[s.position],i[s.type]);s.crossLines&&(s.crossLines=Ky(s.crossLines,a));const o=n.gridLine?.style;s.gridLine?.style&&o?.length&&(s.gridLine.style=s.gridLine.style.map((d,p)=>d.stroke!=null||d.lineDash!=null?Lt(d,o.at(p%o.length)):d));const{top:r,right:l,bottom:c,left:h,...u}=Lt(s,n);return u}))}processSeriesOptions(e,i){const s=this.getTooltipPositionDefaults(e),a=ws(e.theme)?gk(e.theme?.palette):"inbuilt",n={colourIndex:0,userPalette:a},o=e.series?.map(r=>{r.type??(r.type=this.getDefaultSeriesType(e));const{innerLabels:l,...c}=this.getSeriesThemeConfig(r.type,i).series??{},h=UP.has(r.type)?{colourIndex:0,userPalette:a}:n,u=this.getSeriesPalette(r.type,h,i),d=this.getTooltipRangeDefaults(e,r.type),p=Lt(this.getSeriesGroupingOptions(r),r,s,d,c,u,{visible:!0});return p.innerLabels&&(p.innerLabels=Ky(p.innerLabels,l)),p});e.series=this.setSeriesGroupingOptions(o??[])}processMiniChartSeriesOptions(e,i){let s=e.navigator?.miniChart?.series;if(s==null)return;const a={colourIndex:0,userPalette:ws(e.theme)?gk(e.theme.palette):"inbuilt"};s=s.map(n=>{n.type??(n.type="line");const{innerLabels:o,...r}=this.getSeriesThemeConfig(n.type,i).series??{};return Lt(this.getSeriesGroupingOptions(n),n,r,this.getSeriesPalette(n.type,a,i))}),e.navigator.miniChart.series=this.setSeriesGroupingOptions(s)}getSeriesPalette(e,i,s){const a=js.getPaletteFactory(e),{colourIndex:n,userPalette:o}=i,{fills:r=[],strokes:l=[]}=s.palette;return a?.({userPalette:o,colorsCount:Math.max(r.length,l.length),themeTemplateParameters:s.getTemplateParameters(),palette:s.palette,takeColors(c){return i.colourIndex+=c,{fills:qM(r,c,n),strokes:qM(l,c,n)}}})}getSeriesGroupingOptions(e){const i=js.isGroupable(e.type),s=js.isStackable(e.type),a=js.isStackedByDefault(e.type);e.grouped&&!i&&st.warnOnce(`unsupported grouping of series type "${e.type}".`),(e.stacked||e.stackGroup)&&!s&&st.warnOnce(`unsupported stacking of series type "${e.type}".`);let{grouped:n,stacked:o}=e;return o??(o=(a||e.stackGroup!=null)&&!(i&&n)),n??(n=!0),{stacked:s&&o,grouped:i&&n&&!(s&&o)}}setSeriesGroupingOptions(e){const i=this.getSeriesGrouping(e);this.debug("setSeriesGroupingOptions() - series grouping: ",i);const s={},a=i.reduce((n,o)=>{var r;return o.groupType==="default"||(n[r=o.seriesType]??(n[r]=0),n[o.seriesType]+=o.groupType==="stack"?1:o.series.length),n},{});return i.flatMap(n=>{var o;switch(s[o=n.seriesType]??(s[o]=0),n.groupType){case"stack":{const r=s[n.seriesType]++;return n.series.map((l,c)=>Object.assign(l,{seriesGrouping:{groupId:n.groupId,groupIndex:r,groupCount:a[n.seriesType],stackIndex:c,stackCount:n.series.length}}))}case"group":return n.series.map(r=>Object.assign(r,{seriesGrouping:{groupId:n.groupId,groupIndex:s[n.seriesType]++,groupCount:a[n.seriesType],stackIndex:0,stackCount:0}}))}return n.series}).map(({stacked:n,grouped:o,...r})=>r)}getSeriesGroupId(e){return[e.type,e.xKey,e.stacked?e.stackGroup??"stacked":"grouped"].filter(Boolean).join("-")}getSeriesGrouping(e){const i=new Map;return e.reduce((s,a)=>{const n=a.type;if(!a.stacked&&!a.grouped)s.push({groupType:"default",seriesType:n,series:[a],groupId:"__default__"});else{const o=this.getSeriesGroupId(a);if(!i.has(o)){const l={groupType:a.stacked?"stack":"group",seriesType:n,series:[],groupId:o};i.set(o,l),s.push(l)}i.get(o).series.push(a)}return s},[])}getDefaultSeriesType(e){if(hg(e))return"line";if(nx(e))return"pie";if(SA(e))return"treemap";if(vA(e))return"map-shape";if(MA(e))return"sankey";if(ox(e))return"pyramid";if(rx(e))return"radial-gauge";throw new Error("Invalid chart options type detected.")}getTooltipPositionDefaults(e){const i=e.tooltip?.position;if(!xs(i))return;const{type:s,xOffset:a,yOffset:n}=i,o={};return Rs(s)&&H2(_y,s)&&(o.type=s),Vt(a)&&(o.xOffset=a),Vt(n)&&(o.yOffset=n),{tooltip:{position:o}}}getTooltipRangeDefaults(e,i){return{tooltip:{range:e.tooltip?.range??js.getTooltipDefauls(i)?.range}}}axesTypeIntegrity(e){if("axes"in e&&e.axes){const i=e.axes;for(const{type:s}of i)if(!vZ(s)){delete e.axes;const a=lo.publicKeys().join(", ");st.warnOnce(`unknown axis type: ${s}; expected one of: ${a}`)}}}seriesTypeIntegrity(e){e.series=e.series?.filter(({type:i})=>{if(i==null||SZ(i)||eZ(i))return!0;st.warnOnce(`unknown series type: ${JSON.stringify(i)}; expected one of: ${xA.seriesTypes.join(", ")}`)})}soloSeriesIntegrity(e){const i=e.series;if(i&&i.length>1&&i.some(s=>js.isSolo(s.type))){const s=this.optionsType(e);if(js.isSolo(s))st.warn(`series[0] of type '${s}' is incompatible with other series types. Only processing series[0]`),e.series=i.slice(0,1);else{const{solo:a,nonSolo:n}=Jy(i,r=>js.isSolo(r.type)?"solo":"nonSolo"),o=QM(a.map(r=>r.type)).join(", ");st.warn(`Unable to mix these series types with the lead series type: ${o}`),e.series=n}}}static enableConfiguredJsonOptions(e,i){i&&"enabled"in i&&!i._enabledFromTheme&&e.enabled==null&&(i.enabled=!0)}static cleanupEnabledFromThemeJsonOptions(e){e._enabledFromTheme!=null&&delete e._enabledFromTheme}enableConfiguredOptions(e,i){ul(i,Qr.enableConfiguredJsonOptions,new Set(["data","theme"]),e),ul(e,Qr.cleanupEnabledFromThemeJsonOptions,new Set(["data","theme"]))}static removeDisabledOptionJson(e){"enabled"in e&&e.enabled===!1&&Object.keys(e).forEach(i=>{i!=="enabled"&&delete e[i]})}removeDisabledOptions(e){ul(e,Qr.removeDisabledOptionJson,new Set(["data","theme"]))}specialOverridesDefaults(e){if(e.window!=null?ZO(e.window):typeof window<"u"?e.window=window:typeof global<"u"&&(e.window=global.window),e.document!=null?XO(e.document):typeof document<"u"?e.document=document:typeof global<"u"&&(e.document=global.document),e.window==null)throw new Error("AG Charts - unable to resolve global window");if(e.document==null)throw new Error("AG Charts - unable to resolve global document");return e}},Vb.OPTIONS_CLONE_OPTS=new Set(["data","container"]),Vb.FAST_PATH_OPTIONS=new Set(["data","width","height"]),fk=Vb}}),HP,Ub,YP,_8=A({"packages/ag-charts-community/src/util/pool.ts"(){"use strict";He(),HP=100,Ub=class ru{constructor(e,i,s,a,n,o=HP){this.name=e,this.buildItem=i,this.releaseItem=s,this.destroyItem=a,this.maxPoolSize=n,this.cleanupTimeMs=o,this.freePool=[],this.busyPool=new Set}static getPool(e,i,s,a,n){return this.pools.has(e)||this.pools.set(e,new ru(e,i,s,a,n)),this.pools.get(e)}isFull(){return this.freePool.length+this.busyPool.size>=this.maxPoolSize}obtain(e){if(this.freePool.length===0&&this.isFull())throw new Error("AG Charts - pool exhausted");let i=this.freePool.pop();return i==null?(i=this.buildItem(e),ru.debug(`Pool[name=${this.name}]: Created instance (${this.freePool.length} / ${this.busyPool.size+1} / ${this.maxPoolSize})`,i)):ru.debug(`Pool[name=${this.name}]: Re-used instance (${this.freePool.length} / ${this.busyPool.size+1} / ${this.maxPoolSize})`,i),this.busyPool.add(i),{item:i,release:()=>this.release(i)}}release(e){if(!this.busyPool.has(e))throw new Error("AG Charts - cannot free item from pool which is not tracked as busy.");ru.debug(`Pool[name=${this.name}]: Releasing instance (${this.freePool.length} / ${this.busyPool.size} / ${this.maxPoolSize})`,e),this.releaseItem(e),this.busyPool.delete(e),this.freePool.push(e),ru.debug(`Pool[name=${this.name}]: Returned instance to free pool (${this.freePool.length} / ${this.busyPool.size} / ${this.maxPoolSize})`,e),this.cleanPoolTimer&&clearTimeout(this.cleanPoolTimer),this.cleanPoolTimer=setTimeout(()=>{this.cleanPool()},this.cleanupTimeMs)}cleanPool(){const e=this.freePool.splice(0);for(const i of e)this.destroyItem(i);ru.debug(`Pool[name=${this.name}]: Cleaned pool of ${e.length} items (${this.freePool.length} / ${this.busyPool.size} / ${this.maxPoolSize})`)}destroy(){this.cleanPool();for(const e of this.busyPool.values())this.destroyItem(e);this.busyPool.clear()}},Ub.pools=new Map,Ub.debug=te.create(!0,"pool"),YP=Ub}});function KP(t){if(hg(t))return"cartesian";if(nx(t))return"polar";if(SA(t))return"hierarchy";if(vA(t))return"topology";if(MA(t))return"flow-proportion";if(ox(t))return"standalone";if(rx(t))return"gauge";throw new Error(`AG Chart - unknown type of chart for options with type: ${t.type}`)}var Mf,Sr,In,yk,XP=A({"packages/ag-charts-community/src/api/agCharts.ts"(){"use strict";JZ(),Sl(),t6(),lk(),w9(),_9(),z9(),F9(),lx(),V9(),U9(),W9(),Rb(),WP(),He(),ha(),_8(),eg(),LD(),Mf=te.create(!0,"opts"),Sr=class{static licenseCheck(t){this.licenseChecked||(this.licenseManager=bo.licenseManager?.(t),this.licenseManager?.validateLicense(),this.licenseChecked=!0)}static getLicenseDetails(t){return bo.licenseManager?.({}).getLicenseDetails(t)}static getInstance(t){return yk.getInstance(t)}static create(t,e){this.licenseCheck(t);const i=yk.createOrUpdate({userOptions:t,licenseManager:this.licenseManager,optionsMetadata:e});return this.licenseManager?.isDisplayWatermark()&&this.licenseManager&&bo.injectWatermark?.(i.chart.ctx.domManager,this.licenseManager.getWatermarkMessage()),i}static createFinancialChart(t){return this.create(t,{presetType:"price-volume"})}static createGauge(t){return this.create(t,{presetType:"gauge"})}static __createSparkline(t){const{pool:e,...i}=t;return this.create(i,{presetType:"sparkline",pool:e??!0})}},Sr.licenseChecked=!1,In=class qr{static getInstance(e){const i=ar.getInstance(e);return i?WA.chartInstances.get(i):void 0}static initialiseModules(){qr.initialised||(rk(),E9(),qr.initialised=!0)}static createOrUpdate(e){let{proxy:i}=e;const{userOptions:s,licenseManager:a,processedOverrides:n=i?.chart.chartOptions.processedOverrides??{},specialOverrides:o=i?.chart.chartOptions.specialOverrides??{},optionsMetadata:r=i?.chart.chartOptions.optionMetadata??{},deltaOptions:l}=e,c=bo.styles!=null?[["ag-charts-enterprise",bo.styles]]:[],{presetType:h}=r;qr.initialiseModules(),Mf(">>> AgCharts.createOrUpdate() user options",s);let u=s;Sr.optionsMutationFn&&u&&(u=Sr.optionsMutationFn($i(u),h),Mf(">>> AgCharts.createOrUpdate() MUTATED user options",u));const{overrideDevicePixelRatio:d,document:p,window:g,styleContainer:f,...x}=u??{},m=(l?i?.chart.getChartOptions():x)??x,b=new fk(m,n,{...o,document:p,window:g,overrideDevicePixelRatio:d,styleContainer:f},r,l);let v=!1,S=i?.chart,D;return(S==null||KP(b.processedOptions)!==KP(S?.chartOptions.processedOptions))&&(D=this.getPool(b)?.obtain(b),D?S=D.item:(v=!0,S=qr.createChartInstance(b,S)),c?.forEach(([k,L])=>{S?.ctx.domManager.addStyles(k,L)})),i==null?(i=new WA(S,qr.callbackApi,a),i.releaseChart=D?.release):(D||v)&&(i.releaseChart?.(),i.chart=S,i.releaseChart=D?.release),Mf.check()&&typeof window<"u"&&(window.agChartInstances??(window.agChartInstances={}),window.agChartInstances[S.id]=S),S.queuedUserOptions.push(b.userOptions),S.queuedChartOptions.push(b),S.requestFactoryUpdate(k=>{k.applyOptions(b);const L=k.queuedUserOptions.indexOf(b.userOptions)+1;k.queuedUserOptions.splice(0,L),k.queuedChartOptions.splice(0,L)}),i}static markRemovedProperties(e){if(typeof e=="object")for(const[i,s]of Object.entries(e))typeof s>"u"&&Object.assign(e,{[i]:Symbol("UNSET")})}static updateUserDelta(e,i){i=$i(i,new Set(["data"])),ul(i,qr.markRemovedProperties,new Set(["data"])),Mf(">>> AgCharts.updateUserDelta() user delta",i),qr.createOrUpdate({proxy:e,deltaOptions:i})}static createChartInstance(e,i){const s=i?.destroy({keepTransferableResources:!0}),a=qr.getChartByOptions(e.processedOptions);return new a(e,s)}static getChartByOptions(e){if(hg(e))return b_;if(SA(e))return Ib;if(nx(e))return kb;if(vA(e))return wb;if(MA(e))return Db;if(ox(e))return Lb;if(rx(e))return Ab;throw new Error("AG Charts - couldn't apply configuration, check options are correctly structured and series types are specified")}static getPool(e){if(e.optionMetadata.pool===!0)return YP.getPool(e.optionMetadata.presetType??"default",this.createChartInstance,this.detachAndClear,this.destroy,1/0)}},In.caretaker=new kD(Vc),In.initialised=!1,In.callbackApi={caretaker:In.caretaker,create(t,e,i,s){return In.createOrUpdate({userOptions:t,processedOverrides:e,specialOverrides:i,optionsMetadata:s})},update(t,e){return In.createOrUpdate({userOptions:t,proxy:e})},updateUserDelta(t,e){return In.updateUserDelta(t,e)}},In.detachAndClear=t=>t.detachAndClear(),In.destroy=t=>t.destroy(),yk=In}}),Ka,ZP=A({"packages/ag-charts-community/src/scene/shape/arc.ts"(){"use strict";Ti(),It(),kt(),Va(),hl(),Ka=class extends qi{constructor(){super(),this.centerX=0,this.centerY=0,this.radius=10,this.startAngle=0,this.endAngle=Math.PI*2,this.counterClockwise=!1,this.type=0,this.restoreOwnStyles()}get fullPie(){return pp(Ht(this.startAngle),Ht(this.endAngle))}updatePath(){const t=this.path;t.clear(),t.arc(this.centerX,this.centerY,this.radius,this.startAngle,this.endAngle,this.counterClockwise),this.type===1?t.closePath():this.type===2&&!this.fullPie&&(t.lineTo(this.centerX,this.centerY),t.closePath())}computeBBox(){return new lt(this.centerX-this.radius,this.centerY-this.radius,this.radius*2,this.radius*2)}isPointInPath(t,e){const i=this.getBBox();return this.type!==0&&i.containsPoint(t,e)&&this.path.isPointInPath(t,e)}},Ka.className="Arc",Ka.defaultStyles={...la.defaultStyles,lineWidth:1,fillStyle:null},M([vt()],Ka.prototype,"centerX",2),M([vt()],Ka.prototype,"centerY",2),M([vt()],Ka.prototype,"radius",2),M([vt()],Ka.prototype,"startAngle",2),M([vt()],Ka.prototype,"endAngle",2),M([vt()],Ka.prototype,"counterClockwise",2),M([vt()],Ka.prototype,"type",2)}});function mk(t,e,i){const s=Math.sqrt(t**2+e**2),n=Math.atan2(e,t)+i;return{x:Math.cos(n)*s,y:Math.sin(n)*s}}function $P(t,e,i,s,a){const n=zp(t,e),o=n*(1-s)/2;if(t+=o,e-=o,n<.001)return 2*i*a;if(n>=2*Math.PI){const p=t+n/2;t=p-Math.PI,e=p+Math.PI}const r=i*Math.cos(t),l=i*Math.sin(t),c=i*Math.cos(e),h=i*Math.sin(e),u=Math.floor(Math.sqrt((r-c)**2+(l-h)**2)),d=2*i*a;return Math.max(1,Math.min(d,u))}var Sa,QP=A({"packages/ag-charts-community/src/scene/shape/radialColumnShape.ts"(){"use strict";Ti(),It(),kt(),Va(),Sa=class extends qi{constructor(){super(...arguments),this.isBeveled=!0,this.columnWidth=0,this.startAngle=0,this.endAngle=0,this.outerRadius=0,this.innerRadius=0,this.axisInnerRadius=0,this.axisOuterRadius=0,this.isRadiusAxisReversed=!1}set cornerRadius(t){}computeBBox(){const{innerRadius:t,outerRadius:e,columnWidth:i}=this,s=this.getRotation(),a=-i/2,n=i/2,o=-e,r=-t;let l=1/0,c=1/0,h=-1/0,u=-1/0;for(let d=0;d<4;d+=1){const{x:p,y:g}=mk(d%2===0?a:n,d<2?o:r,s);l=Math.min(p,l),c=Math.min(g,c),h=Math.max(p,h),u=Math.max(g,u)}return new lt(l,c,h-l,u-c)}getRotation(){const{startAngle:t,endAngle:e}=this,i=zp(t,e);return Ht(t+i/2+Math.PI/2)}updatePath(){const{isBeveled:t}=this;t?this.updateBeveledPath():this.updateRectangularPath(),this.checkPathDirty()}updateRectangularPath(){const{columnWidth:t,innerRadius:e,outerRadius:i,path:s}=this,a=-t/2,n=t/2,o=-i,r=-e,l=this.getRotation(),c=[[a,r],[a,o],[n,o],[n,r]].map(([h,u])=>mk(h,u,l));s.clear(!0),s.moveTo(c[0].x,c[0].y),s.lineTo(c[1].x,c[1].y),s.lineTo(c[2].x,c[2].y),s.lineTo(c[3].x,c[3].y),s.closePath()}updateBeveledPath(){const{columnWidth:t,path:e,outerRadius:i,innerRadius:s,axisInnerRadius:a,axisOuterRadius:n,isRadiusAxisReversed:o}=this,r=pp(s,a),l=Math.asin(t/2/s),c=this.getRotation(),h=(T,N)=>mk(T,N,c),u=(T,N)=>Math.sqrt(T**2+N**2),d=(T,N)=>N>T?0:Math.sqrt(T**2-N**2),p=(T,N,C)=>C?T<N:T>N,g=r&&!isNaN(l)&&l<Math.PI/6;let f=-t/2,x=t/2;const m=-i,b=-s*(g?Math.cos(l):1),v=p(n,u(s,t/2),!o);if(v){const T=d(n,s);f=-T,x=T}e.clear(!0);const S=h(f,b);e.moveTo(S.x,S.y);const D=pp(s,i),k=p(n,u(i,t/2),!o);if(D&&g)e.arc(0,0,s,Ht(-l-Math.PI/2)+c,Ht(l-Math.PI/2)+c,!1);else if(k){const T=-d(n,t/2),N=d(n,i);if(!v){const C=h(f,T);e.lineTo(C.x,C.y)}if(e.arc(0,0,n,Math.atan2(T,f)+c,Math.atan2(m,-N)+c,!1),!pp(N,0)){const C=h(N,m);e.lineTo(C.x,C.y)}e.arc(0,0,n,Math.atan2(m,N)+c,Math.atan2(T,x)+c,!1)}else{const T=h(f,m),N=h(x,m);e.lineTo(T.x,T.y),e.lineTo(N.x,N.y)}const L=h(x,b);if(e.lineTo(L.x,L.y),g)e.arc(0,0,s,Ht(l-Math.PI/2)+c,Ht(-l-Math.PI/2)+c,!0);else{const T=h(f,b);e.lineTo(T.x,T.y)}e.closePath()}},Sa.className="RadialColumnShape",M([vt()],Sa.prototype,"isBeveled",2),M([vt()],Sa.prototype,"columnWidth",2),M([vt()],Sa.prototype,"startAngle",2),M([vt()],Sa.prototype,"endAngle",2),M([vt()],Sa.prototype,"outerRadius",2),M([vt()],Sa.prototype,"innerRadius",2),M([vt()],Sa.prototype,"axisInnerRadius",2),M([vt()],Sa.prototype,"axisOuterRadius",2),M([vt()],Sa.prototype,"isRadiusAxisReversed",2)}}),xk={};Oa(xk,{Arc:()=>Ka,BBox:()=>lt,BandScale:()=>$o,Caption:()=>ee,Circle:()=>sr,Group:()=>mt,Line:()=>Bs,LinearScale:()=>pa,Path:()=>qi,RadialColumnShape:()=>Sa,Rect:()=>Oi,Scene:()=>sg,Sector:()=>ui,Shape:()=>la,TranslatableGroup:()=>Xi,getRadialColumnWidth:()=>$P,toRadians:()=>Zi});var qP=A({"packages/ag-charts-community/src/integrated-charts-scene.ts"(){"use strict";dl(),pg(),nl(),Il(),kt(),me(),UD(),ZP(),Pc(),Va(),QP(),Ig(),gb(),hl(),Ti()}}),bk={};Oa(bk,{ChartTheme:()=>Mo,DEFAULT_ANNOTATION_BACKGROUND_FILL:()=>Ts,DEFAULT_ANNOTATION_COLOR:()=>Ls,DEFAULT_ANNOTATION_HANDLE_FILL:()=>jg,DEFAULT_ANNOTATION_STATISTICS_COLOR:()=>Ug,DEFAULT_ANNOTATION_STATISTICS_DIVIDER_STROKE:()=>Wg,DEFAULT_ANNOTATION_STATISTICS_DOWN_FILL:()=>Ux,DEFAULT_ANNOTATION_STATISTICS_DOWN_STROKE:()=>Wx,DEFAULT_ANNOTATION_STATISTICS_FILL:()=>Gg,DEFAULT_ANNOTATION_STATISTICS_STROKE:()=>Vg,DEFAULT_AXIS_GRID_COLOUR:()=>ur,DEFAULT_AXIS_LINE_COLOUR:()=>qu,DEFAULT_BACKGROUND_COLOUR:()=>td,DEFAULT_CAPTION_ALIGNMENT:()=>gr,DEFAULT_CAPTION_LAYOUT_STYLE:()=>pr,DEFAULT_COLOURS:()=>fI,DEFAULT_CROSS_LINES_COLOUR:()=>rh,DEFAULT_DIVERGING_SERIES_COLOR_RANGE:()=>ks,DEFAULT_FIBONACCI_STROKES:()=>Vx,DEFAULT_FONT_FAMILY:()=>xe,DEFAULT_FUNNEL_SERIES_COLOR_RANGE:()=>Mn,DEFAULT_GAUGE_SERIES_COLOR_RANGE:()=>ga,DEFAULT_GRIDLINE_ENABLED:()=>Dn,DEFAULT_HIERARCHY_FILLS:()=>Bg,DEFAULT_HIERARCHY_STROKES:()=>zg,DEFAULT_INSIDE_SERIES_LABEL_COLOUR:()=>cr,DEFAULT_INVERTED_BACKGROUND_COLOUR:()=>Lg,DEFAULT_INVERTED_LABEL_COLOUR:()=>Px,DEFAULT_LABEL_COLOUR:()=>$e,DEFAULT_MUTED_LABEL_COLOUR:()=>hr,DEFAULT_NAVIGATOR_STROKE:()=>Tg,DEFAULT_PADDING:()=>mo,DEFAULT_POLAR_SERIES_STROKE:()=>_g,DEFAULT_SEPARATION_LINES_COLOUR:()=>Ju,DEFAULT_SHADOW_COLOUR:()=>dr,DEFAULT_SPARKLINE_CROSSHAIR_STROKE:()=>Pg,DEFAULT_TEXTBOX_COLOR:()=>Kg,DEFAULT_TEXTBOX_FILL:()=>Hg,DEFAULT_TEXTBOX_STROKE:()=>Yg,DEFAULT_TEXT_ANNOTATION_COLOR:()=>Fg,DEFAULT_TOOLBAR_POSITION:()=>ed,IS_COMMUNITY:()=>Rx,IS_DARK_THEME:()=>oh,IS_ENTERPRISE:()=>_x,PALETTE_ALT_DOWN_FILL:()=>jx,PALETTE_ALT_DOWN_STROKE:()=>zx,PALETTE_ALT_NEUTRAL_FILL:()=>Gx,PALETTE_ALT_NEUTRAL_STROKE:()=>Rg,PALETTE_ALT_UP_FILL:()=>Fx,PALETTE_ALT_UP_STROKE:()=>Bx,PALETTE_DOWN_FILL:()=>Eg,PALETTE_DOWN_STROKE:()=>Cg,PALETTE_NEUTRAL_FILL:()=>wg,PALETTE_NEUTRAL_STROKE:()=>lh,PALETTE_UP_FILL:()=>Og,PALETTE_UP_STROKE:()=>Ng,getChartTheme:()=>vf,themeNames:()=>JP,themeSymbols:()=>gI,themes:()=>jb});var JP,tB=A({"packages/ag-charts-community/src/integrated-charts-theme.ts"(){"use strict";Gb(),Gb(),de(),xr(),Gb(),de(),JP=Object.keys(jb)}}),Sk={};Oa(Sk,{Color:()=>Ra,interpolateColor:()=>z2});var eB=A({"packages/ag-charts-community/src/integrated-charts-util.ts"(){"use strict";yp(),F2()}}),iB,P8=A({"packages/ag-charts-community/src/main-modules.ts"(){"use strict";XP(),lk(),qP(),tB(),eB(),eg(),XP(),eg(),lk(),iB={VERSION:Vc,_Scene:xk,_Theme:bk,_Util:Sk,create:Sr.create.bind(Sr),createSparkline:Sr.__createSparkline.bind(Sr),setup:rk,isEnterprise:!1}}});function vk(){return(t,e)=>{const i=[`Property [${t}] is deprecated.`,e].filter(Boolean).join(" ");st.warnOnce(i)}}function B8(t,e){const i=vk(),s=e?.default;return Ko((a,n,o)=>(o!==s&&i(n.toString(),t),o))}function z8(t,e){const i=vk();return Ko((s,a,n)=>(n!==s[t]&&(i(a.toString(),`Use [${t}] instead.`),GM(s,t,e?e(n):n)),mp),(s,a)=>(i(a.toString(),`Use [${t}] instead.`),jM(s,t)))}var F8=A({"packages/ag-charts-community/src/util/deprecation.ts"(){"use strict";Jr(),St(),Yt()}}),j8=A({"packages/ag-charts-community/src/util/types.ts"(){"use strict"}});function G8(t,e){return typeof e=="number"?{x:t.x+e,y:t.y+e}:{x:t.x+e.x,y:t.y+e.y}}function Mk(t,e){return typeof e=="number"?{x:t.x-e,y:t.y-e}:{x:t.x-e.x,y:t.y-e.y}}function V8(t,e){return typeof e=="number"?{x:t.x*e,y:t.y*e}:{x:t.x*e.x,y:t.y*e.y}}function Dk(t){return Math.sqrt(t.x*t.x+t.y*t.y)}function U8(t){return t.x*t.x+t.y*t.y}function W8(t,e){const i=Mk(t,e);return Math.sqrt(i.x*i.x+i.y*i.y)}function H8(t,e){const i=Mk(t,e);return i.x*i.x+i.y*i.y}function Y8(t){const e=Dk(t);return{x:t.x/e,y:t.y/e}}function K8(t,e=Ak()){return Math.atan2(t.y,t.x)-Math.atan2(e.y,e.x)}function X8(t,e,i=Ak()){const s=Dk(t);return{x:i.x+s*Math.cos(e),y:i.y+s*Math.sin(e)}}function Z8(t,e,i){const s=e.x-t.x;return(i==null?e.y-t.y:i-e.y-(i-t.y))/s}function $8(t,e,i){return(i==null?t.y:i-t.y)-e*t.x}function Q8(t,e,i=0,s){return{x:t===1/0?1/0:(i-e)/t,y:s==null?i:s-i}}function q8(t,e,i=0,s){const a=t===1/0?1/0:t*i+e;return{x:i,y:s==null?a:s-a}}function J8(t){return{x:Math.round(t.x),y:Math.round(t.y)}}function t$(t,e){return t.x===e.x&&t.y===e.y}function e$(t,e){if(typeof t=="number")return{x:t,y:e};if("regionX"in t)return{x:t.regionX,y:t.regionY};if("offsetWidth"in t)return{x:t.offsetWidth,y:t.offsetHeight};if("width"in t)return[{x:t.x,y:t.y},{x:t.x+t.width,y:t.y+t.height}];if("x1"in t)return[{x:t.x1,y:t.y1},{x:t.x2,y:t.y2}];throw new Error(`Values can not be converted into a vector: [${JSON.stringify(t)}] [${e}]`)}function i$(t,e){return t.x=e.x,t.y=e.y,t}function s$(t){return{x:t?.x??0,y:t?.y??0}}function Ak(){return{x:0,y:0}}var fh,sB=A({"packages/ag-charts-community/src/util/vector.ts"(){"use strict";fh={add:G8,angle:K8,apply:i$,equal:t$,distance:W8,distanceSquared:H8,from:e$,gradient:Z8,intercept:$8,intersectAtX:q8,intersectAtY:Q8,length:Dk,lengthSquared:U8,multiply:V8,normalized:Y8,origin:Ak,required:s$,rotate:X8,round:J8,sub:Mk}}}),a$=A({"packages/ag-charts-community/src/module/axisModule.ts"(){"use strict"}}),n$=A({"packages/ag-charts-community/src/module/axisOptionModule.ts"(){"use strict"}}),o$=A({"packages/ag-charts-community/src/module/baseModule.ts"(){"use strict"}}),r$=A({"packages/ag-charts-community/src/module/coreModules.ts"(){"use strict"}}),l$=A({"packages/ag-charts-community/src/module/optionsModuleTypes.ts"(){"use strict"}}),c$=A({"packages/ag-charts-community/src/module/axisContext.ts"(){"use strict"}}),h$=A({"packages/ag-charts-community/src/module/moduleContext.ts"(){"use strict"}}),u$=A({"packages/ag-charts-community/src/chart/chartAnimationPhase.ts"(){"use strict"}}),d$=A({"packages/ag-charts-community/src/chart/series/seriesEvents.ts"(){"use strict"}}),Ik,od,aB,p$=A({"packages/ag-charts-community/src/chart/series/hierarchy/hierarchySeries.ts"(){"use strict";rl(),Gp(),St(),It(),Yp(),Ds(),Ik=class TM{constructor(e,i,s,a,n,o,r,l,c,h){this.series=e,this.index=i,this.rootIndex=s,this.datum=a,this.sizeValue=n,this.colorValue=o,this.sumSize=r,this.depth=l,this.parent=c,this.children=h,this.midPoint={x:0,y:0}}contains(e){let i=e;for(;i!=null&&i.index>=this.index;){if(i===this)return!0;i=i.parent}return!1}walk(e,i=TM.Walk.PreOrder){i===TM.Walk.PreOrder&&e(this),this.children.forEach(s=>{s.walk(e,i)}),i===TM.Walk.PostOrder&&e(this)}*[Symbol.iterator](){yield this;for(const e of this.children)yield*e}},Ik.Walk={PreOrder:0,PostOrder:1},od=Ik,aB=class extends Jc{constructor(t){super({moduleCtx:t,pickModes:[1,0]}),this.rootNode=new od(this,0,0,void 0,0,void 0,0,void 0,void 0,[]),this.colorDomain=[0,0],this.maxDepth=0,this.colorScale=new cl,this.focusPath=[],this.animationState=new ku("empty",{empty:{update:{target:"ready",action:e=>this.animateEmptyUpdateReady(e)},reset:"empty",skip:"ready"},ready:{updateData:"waiting",clear:"clearing",highlight:e=>this.animateReadyHighlight(e),resize:e=>this.animateReadyResize(e),reset:"empty",skip:"ready"},waiting:{update:{target:"ready",action:e=>this.animateWaitingUpdateReady(e)},reset:"empty",skip:"ready"},clearing:{update:{target:"empty",action:e=>this.animateClearingUpdateEmpty(e)},reset:"empty",skip:"ready"}},()=>this.checkProcessedDataAnimatable())}resetAnimation(t){t==="initial"?this.animationState.transition("reset"):t==="ready"&&this.animationState.transition("skip")}processData(){const{childrenKey:t,sizeKey:e,colorKey:i,colorRange:s}=this.properties;let a=0;const n=()=>(a+=1,a);let o=0,r=1/0,l=-1/0;const c=(p,g,f)=>{const x=n(),m=f.depth!=null?f.depth+1:0,b=t!=null?p[t]:void 0,v=b==null||b.length===0;let S=e!=null?p[e]:void 0;Number.isFinite(S)?S=Math.max(S,0):S=v?1:0;const D=S;o=Math.max(o,m);const k=i!=null?p[i]:void 0;return typeof k=="number"&&(r=Math.min(r,k),l=Math.max(l,k)),h(new od(this,x,g??0,p,S,k,D,m,f,[]),g,b)},h=(p,g,f)=>(f?.forEach((x,m)=>{const b=c(x,g??m,p);p.children.push(b),p.sumSize+=b.sumSize}),p),u=h(new od(this,0,0,void 0,0,void 0,0,void 0,void 0,[]),void 0,this.data),d=[r,l];this.colorScale.domain=r<l?[r,l]:[0,1],this.colorScale.range=s??["black"],this.colorScale.update(),this.rootNode=u,this.maxDepth=o,this.colorDomain=d,this.focusPath=[{nodeDatum:this.rootNode,childIndex:0}]}update({seriesRect:t}){this.updateSelections(),this.updateNodes();const e=this.getAnimationData();this.checkResize(t)&&this.animationState.transition("resize",e),this.animationState.transition("update",e)}resetAllAnimation(t){const e=this.animationResetFns?.datum;this.ctx.animationManager.stopByAnimationGroupId(this.id),e!=null&&We(t.datumSelections,e)}animateEmptyUpdateReady(t){this.ctx.animationManager.skipCurrentBatch(),this.resetAllAnimation(t)}animateWaitingUpdateReady(t){this.ctx.animationManager.skipCurrentBatch(),this.resetAllAnimation(t)}animateReadyHighlight(t){const e=this.animationResetFns?.datum;e!=null&&We([t],e)}animateReadyResize(t){this.resetAllAnimation(t)}animateClearingUpdateEmpty(t){this.ctx.animationManager.skipCurrentBatch(),this.resetAllAnimation(t)}isProcessedDataAnimatable(){return!0}checkProcessedDataAnimatable(){this.isProcessedDataAnimatable()||this.ctx.animationManager.skipCurrentBatch()}getSeriesDomain(){return[NaN,NaN]}getSeriesRange(t,e){return[NaN,NaN]}getLegendData(t){const{colorKey:e,colorName:i,colorRange:s}=this.properties,{id:a,ctx:{legendManager:n},visible:o}=this;return t==="gradient"&&e!=null&&s!=null?[{legendType:"gradient",enabled:o&&n.getItemEnabled({seriesId:a}),seriesId:a,colorName:i,colorRange:s,colorDomain:this.colorDomain}]:[]}getDatumIdFromData(t){return`${t.index}`}getDatumId(t){return this.getDatumIdFromData(t)}pickFocus(t){if(this.rootNode.children.length===0)return;this.focusPath.length===0&&st.error("this.focusPath should not be empty");const{datumIndexDelta:e,otherIndexDelta:i}=t,{focusPath:s}=this,a=s.length-2;if(i!==0||s.length===1){const n=Math.max(0,a+i);if(s[n+1]==null){let o=s[s.length-1];for(;o.nodeDatum.children.length>0&&(o.nodeDatum.depth??-1)<n;){const r={nodeDatum:o.nodeDatum.children[0],childIndex:0};s.push(r),o=r}return this.computeFocusOutputs(o)}else return s.length=n+2,this.computeFocusOutputs(s[n+1])}else{if(e===0)return this.computeFocusOutputs(s[s.length-1]);{const n=s[a+1].childIndex+e,o=s[a].nodeDatum,r=o?.children?.length;if(r!=null){const l=At(0,n,r-1),c={nodeDatum:o.children[l],childIndex:l};return s[a+1]=c,s.length=a+2,this.computeFocusOutputs(c)}}}}getDatumAriaText(t,e){if(!(t instanceof od)){st.error(`datum is not HierarchyNode: ${JSON.stringify(t)}`);return}return this.ctx.localeManager.t("ariaAnnounceHierarchyDatum",{level:(t.depth??-1)+1,count:t.children.length,description:e})}computeFocusOutputs({nodeDatum:t,childIndex:e}){const i=this.computeFocusBounds(t);if(i)return{datum:t,datumIndex:e,otherIndex:t.depth,bounds:i,showFocusBox:!0,clipFocusBox:!0}}}}}),vr,g$=A({"packages/ag-charts-community/src/chart/series/hierarchy/hierarchySeriesProperties.ts"(){"use strict";xt(),pf(),mg(),vr=class extends Us{constructor(){super(...arguments),this.childrenKey="children",this.fills=Object.values(qe),this.strokes=Object.values(An)}},M([I(J)],vr.prototype,"childrenKey",2),M([I(J,{optional:!0})],vr.prototype,"sizeKey",2),M([I(J,{optional:!0})],vr.prototype,"colorKey",2),M([I(J,{optional:!0})],vr.prototype,"colorName",2),M([I(oa)],vr.prototype,"fills",2),M([I(oa)],vr.prototype,"strokes",2),M([I(oa,{optional:!0})],vr.prototype,"colorRange",2)}}),f$=A({"packages/ag-charts-community/src/chart/series/topologySeries.ts"(){"use strict"}}),y$=A({"packages/ag-charts-community/src/chart/series/flowProportionSeries.ts"(){"use strict"}}),m$=A({"packages/ag-charts-community/src/chart/series/topology/geojson.ts"(){"use strict"}}),nB,x$=A({"packages/ag-charts-community/src/chart/series/topology/lonLatBbox.ts"(){"use strict";nB=class{constructor(t,e,i,s){this.lon0=t,this.lat0=e,this.lon1=i,this.lat1=s}merge(t){this.lon0=Math.min(this.lon0,t.lon0),this.lat0=Math.min(this.lat0,t.lat0),this.lon1=Math.max(this.lon1,t.lon1),this.lat1=Math.max(this.lat1,t.lat1)}}}}),b$=A({"packages/ag-charts-community/src/chart/series/gaugeSeries.ts"(){"use strict"}}),Wb,oB,S$=A({"packages/ag-charts-community/src/chart/axis/axisTicks.ts"(){"use strict";Il(),kt(),me(),Qo(),Ss(),Wp(),wa(),It(),$0(),ca(),wc(),pl(),pD(),Nm(),Wb=class v2{constructor(){this.id=Ea(this),this.axisGroup=new Xi({name:`${this.id}-AxisTicks`,zIndex:2}),this.labelSelection=Te.select(this.axisGroup,Ye),this.interval=new fl,this.label=new Xe,this.scale=new pa,this.position="bottom",this.translationX=0,this.translationY=0,this.padding=0}attachAxis(e){e.appendChild(this.axisGroup)}calculateLayout(){this.scale.interval=this.interval.step;const e=[],i=this.generateTicks(),{translationX:s,translationY:a}=this;return this.labelSelection.update(i.ticks.map(n=>this.createLabelDatum(n)),void 0,n=>n.tickId),this.labelSelection.each((n,o)=>{n.setProperties(o),o.visible&&e.push(n.getBBox())}),this.axisGroup.setProperties({translationX:s,translationY:a}),lt.merge(e)}getLabelParams(e){const{padding:i}=this,{translate:s}=e;switch(this.position){case"top":case"bottom":return{x:s,y:i,textAlign:"center",textBaseline:"top"};case"left":case"right":return{x:i,y:s,textAlign:"start",textBaseline:"middle"}}}inRange(e,i=.001){const[s,a]=Gi(this.scale.range);return e>=s-i&&e<=a+i}createLabelDatum(e){const{x:i,y:s,textBaseline:a,textAlign:n}=this.getLabelParams(e);return{visible:!!e.tickLabel,tickId:e.tickId,fill:this.label.color,fontFamily:this.label.fontFamily,fontSize:this.label.fontSize,fontStyle:this.label.fontStyle,fontWeight:this.label.fontWeight,rotation:0,rotationCenterX:0,text:e.tickLabel,textAlign:n,textBaseline:a,x:i,y:s}}generateTicks(){const{minSpacing:e,maxSpacing:i}=this.interval,s=EM(dp(this.scale.range),2),{maxTickCount:a,minTickCount:n,tickCount:o}=RO(s,e,i,v2.DefaultTickCount,v2.DefaultMinSpacing);o&&(this.scale.tickCount=o,this.scale.minTickCount=n,this.scale.maxTickCount=a);const r=this.getTicksData();if(this.position==="bottom"||this.position==="top"){const l=to.getMeasurer({font:this.label}),c=this.scale.getDomain(),u=c[0]>c[1]?-1:1;let d=-1/0*u;r.ticks=r.ticks.filter(p=>Math.sign(p.translate-d)!==u?!1:(d=p.translate+l.textWidth(p.tickLabel,!0)*u,!0))}return r}getTicksData(){const e=[],i=this.scale.ticks(),s=i.reduce((o,r)=>Math.max(o,Vy(r)),0),a=Z0(),n=this.label.format?this.scale.tickFormat({ticks:i,specifier:this.label.format}):o=>Up(o,s);for(let o=0;o<i.length;o++){const r=i[o],l=this.scale.convert(r);if(!this.inRange(l))continue;const c=this.label.formatter?.({value:r,index:o,fractionDigits:s})??n(r),h=a(c);e.push({tick:r,tickId:h,tickLabel:c,translate:l})}return{rawTicks:i,fractionDigits:s,ticks:e}}},Wb.DefaultTickCount=5,Wb.DefaultMinSpacing=50,oB=Wb}}),v$=A({"packages/ag-charts-community/src/chart/chartAxis.ts"(){"use strict"}}),rB,M$=A({"packages/ag-charts-community/src/chart/legend/legendDatum.ts"(){"use strict";rB=0}});function D$(t,e){const i=Wt("button",Hb("ag-charts-input ag-charts-button",e));return t.label!==void 0?i.append(t.label):(i.append(lB(t.icon)),i.ariaLabel=t.altText),i.addEventListener("click",t.onPress),Wc(i,e),i}function A$(t,e){const i=Wt("input",Hb("ag-charts-input ag-charts-checkbox",e));return i.type="checkbox",i.checked=t.checked,i.addEventListener("change",s=>t.onChange(i.checked,s)),i.addEventListener("keydown",s=>{CD(s)&&(s.preventDefault(),i.click())}),Wc(i,e),i}function I$(t,e){const i=Wt("select",Hb("ag-charts-input ag-charts-select",e));return i.append(...t.options.map(s=>{const a=Wt("option");return a.value=s.value,a.textContent=s.label,a})),se(i,"data-preventdefault",!1),i.value=t.value,i.addEventListener("change",s=>t.onChange(i.value,s)),Wc(i,e),i}function k$(t,e){const i=Wt("textarea",Hb("ag-charts-input ag-charts-textarea",e));return i.value=t.value,i.addEventListener("input",s=>t.onChange(i.value,s)),Wc(i,e),i}function lB(t){const e=Wt("span",`ag-charts-icon ag-charts-icon-${t}`);return se(e,"aria-hidden",!0),e}function Hb(t,e){return e==null?t:`${t} ${e.class}`}var L$=A({"packages/ag-charts-community/src/dom/elements.ts"(){"use strict";Qi(),Nt(),Nu()}}),T$=A({"packages/ag-charts-community/src/scale/scale.ts"(){"use strict"}}),cB,N$=A({"packages/ag-charts-community/src/scene/gradient/conicGradient.ts"(){"use strict";Ti(),xm(),cB=class extends Vp{constructor(t,e,i=0,s){super(t,e,s),this.angle=i}createCanvasGradient(t,e){const{angle:s}=this,a=Ht(Zi(s+90)),n=e.x+e.width*.5,o=e.y+e.height*.5;return t.createConicGradient(a,n,o)}}}}),Yb,C$=A({"packages/ag-charts-community/src/scene/shape/svgPath.ts"(){"use strict";Va(),Yb=class extends qi{constructor(t=""){super(),this.x=0,this.y=0,this.commands=[],this._d="",this.d=t}get d(){return this._d}set d(t){if(t!==this._d){this._d=t,this.commands.length=0;for(const[e,i,s]of t.matchAll(/([A-Z])([0-9. ]*)/g)){const a=s.split(/\s+/g).map(Number);this.commands.push([i,a])}this.checkPathDirty()}}updatePath(){const{path:t,x:e,y:i}=this;t.clear();let s=e,a=i;for(const[n,o]of this.commands)switch(n){case"M":t.moveTo(e+o[0],i+o[1]),s=e+o[0];break;case"C":t.cubicCurveTo(e+o[0],i+o[1],e+o[2],i+o[3],e+o[4],i+o[5]),s=e+o[4],a=i+o[5];break;case"H":t.lineTo(e+o[0],a),s=i+o[0];break;case"L":t.lineTo(e+o[0],i+o[1]),s=e+o[0],a=i+o[1];break;case"V":t.lineTo(s,i+o[0]),a=i+o[0];break;case"Z":t.closePath();break;default:throw new Error(`Could not translate command '${n}' with '${o.join(" ")}'`)}t.closePath()}},M([vt()],Yb.prototype,"x",2),M([vt()],Yb.prototype,"y",2)}}),Kb,kk,hB=A({"packages/ag-charts-community/src/chart/marker/arrowUp.ts"(){"use strict";Gs(),Kb=class D3 extends Ji{updatePath(){const e=this.size/2;super.applyPath(e,D3.moves)}},Kb.className="ArrowUp",Kb.moves=[{x:0,y:0,t:"move"},{x:1,y:1.2},{x:-.5,y:0},{x:0,y:.8},{x:-1,y:0},{x:0,y:-.8},{x:-.5,y:0}],kk=Kb}}),Lk,O$=A({"packages/ag-charts-community/src/chart/marker/arrowDown.ts"(){"use strict";hB(),Gs(),Lk=class extends Ji{updatePath(){const t=this.size/2;super.applyPath(t,kk.moves.map(e=>({x:e.x*-1,y:e.y*-1})))}},Lk.className="ArrowDown"}}),uB={};Oa(uB,{ButtonWidget:()=>Eu,NativeWidget:()=>tr,SliderWidget:()=>Um,ToolbarWidget:()=>ig,WIDGET_HTML_EVENTS:()=>Fm,Widget:()=>oo,WidgetEventUtil:()=>Ou});var dB=A({"packages/ag-charts-community/src/widget/exports.ts"(){"use strict";ml(),RD(),Gm(),BD(),jm(),Dw()}}),Tk,Xb,Nk=A({"packages/ag-charts-community/src/components/popover/popover.ts"(){"use strict";so(),Nt(),Nu(),Tk="canvas-overlay",Xb=class extends qp{constructor(t,e,i){super(),this.ctx=t,this.hideFns=[],this.moduleId=`popover-${e}`,i?.detached?this.element=Wt("div"):this.element=t.domManager.addChild(Tk,this.moduleId),this.element.setAttribute("role","presentation"),this.destroyFns.push(()=>t.domManager.removeChild(Tk,this.moduleId))}attachTo(t){this.element.parentElement||t.element.append(this.element)}hide(t){const{lastFocus:e=this.lastFocus}=t??{};this.element.children.length!==0&&(this.hideFns.forEach(i=>i()),e?.focus(),this.lastFocus=void 0)}removeChildren(){this.element.replaceChildren()}showWithChildren(t,e){if(!this.element.parentElement)throw new Error("Can not show popover that has not been attached to a parent.");const i=Wt("div","ag-charts-popover");if(e.ariaLabel!=null&&i.setAttribute("aria-label",e.ariaLabel),e.class!=null&&i.classList.add(e.class),i.replaceChildren(...t),this.element.replaceChildren(i),this.hideFns.push(()=>this.removeChildren()),e.onHide&&this.hideFns.push(e.onHide),e.initialFocus&&e.sourceEvent){const s=OD(e.sourceEvent);s!==void 0&&(this.lastFocus=s,this.initialFocus=e.initialFocus)}return i}getPopoverElement(){return this.element.firstElementChild}updatePosition(t){const e=this.getPopoverElement();e&&(e.style.setProperty("right","unset"),e.style.setProperty("bottom","unset"),t.x!=null&&e.style.setProperty("left",`${Math.floor(t.x)}px`),t.y!=null&&e.style.setProperty("top",`${Math.floor(t.y)}px`),this.initialFocus?.focus(),this.initialFocus=void 0)}}}}),Ck,pB=A({"packages/ag-charts-community/src/components/popover/anchoredPopover.ts"(){"use strict";Nt(),It(),Nk(),Ck=class extends Xb{setAnchor(t,e){this.anchor=t,this.fallbackAnchor=e,this.updatePosition(t),this.repositionWithinBounds()}showWithChildren(t,e){const i=e.anchor??this.anchor,s=e.fallbackAnchor??this.fallbackAnchor,a=super.showWithChildren(t,e);return i&&this.setAnchor(i,s),he().requestAnimationFrame(()=>{this.repositionWithinBounds()}),a}repositionWithinBounds(){const{anchor:t,ctx:e,fallbackAnchor:i}=this,s=this.getPopoverElement();if(!t||!s)return;const a=e.domManager.getBoundingClientRect(),{offsetWidth:n,offsetHeight:o}=s;let r=At(0,t.x,a.width-n),l=At(0,t.y,a.height-o);r!==t.x&&i?.x!=null&&(r=At(0,i.x-n,a.width-n)),l!==t.y&&i?.y!=null&&(l=At(0,i.y-o,a.height-o)),this.updatePosition({x:r,y:l})}}}}),gB,E$=A({"packages/ag-charts-community/src/components/menu/menu.ts"(){"use strict";Nt(),Nu(),pB(),gB=class extends Ck{show(t){const e=t.items.map(s=>this.createRow(t,s)),i=this.showWithChildren(e,t);i.classList.add("ag-charts-menu"),i.setAttribute("role","menu"),this.menuCloser=ow({orientation:"vertical",menu:i,buttons:e,sourceEvent:t.sourceEvent,closeCallback:()=>this.hide()}),this.hideFns.push(()=>{this.menuCloser?.finishClosing(),this.menuCloser=void 0})}createRow(t,e){const{menuItemRole:i="menuitem"}=t,s=e.value===t.value,a=Wt("div","ag-charts-menu__row");if(a.setAttribute("role",i),i==="menuitemradio"&&a.setAttribute("aria-checked",(t.value===e.value).toString()),typeof e.value=="string"&&(a.dataset.popoverId=e.value),a.classList.toggle("ag-charts-menu__row--active",s),e.icon!=null){const l=Wt("span",`ag-charts-menu__icon ${ym(e.icon)}`);a.appendChild(l)}const n=e.strokeWidth!=null;if(n&&(a.classList.toggle("ag-charts-menu__row--stroke-width-visible",n),a.style.setProperty("--strokeWidth",n?`${e.strokeWidth}px`:null)),e.label!=null){const l=Wt("span","ag-charts-menu__label");l.textContent=this.ctx.localeManager.t(e.label),a.appendChild(l)}"altText"in e&&(a.ariaLabel=this.ctx.localeManager.t(e.altText));const o=()=>{t.onPress?.(e)},r=l=>{CD(l)&&(o(),l.preventDefault(),l.stopPropagation())};return a.addEventListener("keydown",r),a.addEventListener("click",r),a.addEventListener("mousemove",()=>{a.focus({preventScroll:!0})}),a}}}}),Ok,fB=A({"packages/ag-charts-community/src/components/popover/draggablePopover.ts"(){"use strict";sB(),Nk(),Ok=class extends Xb{constructor(){super(...arguments),this.dragged=!1}setDragHandle(t){t.addListener("drag-start",e=>{t.addClass(this.dragHandleDraggingClass),this.onDragStart(e)}),t.addListener("drag-move",this.onDragMove.bind(this)),t.addListener("drag-end",()=>{t.removeClass(this.dragHandleDraggingClass),this.onDragEnd.bind(this)})}onDragStart(t){const e=this.getPopoverElement();e&&(t.sourceEvent.preventDefault(),this.dragged=!0,this.dragStartState={client:fh.from(t.clientX,t.clientY),position:fh.from(Number(e.style.getPropertyValue("left").replace("px","")),Number(e.style.getPropertyValue("top").replace("px","")))})}onDragMove(t){const{dragStartState:e}=this,i=this.getPopoverElement();if(!e||!i)return;const s=fh.sub(fh.from(t.clientX,t.clientY),e.client),a=fh.add(e.position,s),n=this.ctx.domManager.getBoundingClientRect(),o={};a.x>=n.x&&a.x+i.offsetWidth<=n.width&&(o.x=a.x),a.y>=n.y&&a.y+i.offsetHeight<=n.height&&(o.y=a.y),this.updatePosition(o)}onDragEnd(){this.dragStartState=void 0}}}}),rd,w$=A({"packages/ag-charts-community/src/components/toolbar/toolbarButtonProperties.ts"(){"use strict";Jt(),xt(),rd=class extends Mt{},M([I(J,{optional:!0})],rd.prototype,"icon",2),M([I(J,{optional:!0})],rd.prototype,"label",2),M([I(J,{optional:!0})],rd.prototype,"ariaLabel",2),M([I(J,{optional:!0})],rd.prototype,"tooltip",2)}}),Ek,yB=A({"packages/ag-charts-community/src/components/toolbar/toolbarButtonWidget.ts"(){"use strict";Qi(),Nt(),jm(),Ek=class extends Eu{constructor(t){super(),this.localeManager=t}update(t){const{localeManager:e}=this;t.tooltip&&(this.elem.title=e.t(t.tooltip));let i="";if(t.icon!=null&&(i=`<span class="${ym(t.icon)} ag-charts-toolbar__icon"></span>`),t.label!=null){const s=e.t(t.label);i=`${i}<span class="ag-charts-toolbar__label">${s}</span>`}this.elem.innerHTML=i}setChecked(t){se(this.elem,"aria-checked",t)}}}}),wk,Zb,mB,xB=A({"packages/ag-charts-community/src/components/toolbar/toolbar.ts"(){"use strict";kt(),ao(),Jt(),BD(),yB(),wk="ag-charts-toolbar__button--active",Zb=class extends ig{constructor(t,e="horizontal"){super(e),this.localeManager=t,this.horizontalSpacing=10,this.verticalSpacing=10,this.events=new gn,this.hasPrefix=!1,this.buttonWidgets=[],this.addClass("ag-charts-toolbar"),this.toggleClass("ag-charts-toolbar--horizontal",e==="horizontal"),this.toggleClass("ag-charts-toolbar--vertical",e==="vertical")}addToolbarListener(t,e){return this.events.addListener(t,e)}clearButtons(){for(const t of this.buttonWidgets)t.destroy();this.buttonWidgets.splice(0)}updateButtons(t){const{buttonWidgets:e}=this;for(const[i,s]of t.entries())(this.buttonWidgets.at(i)??this.createButton(i,s)).update(s);for(let i=t.length;i<e.length;i++)this.buttonWidgets.at(i)?.destroy();this.buttonWidgets.splice(t.length),this.refreshButtonClasses()}updateButtonByIndex(t,e){this.buttonWidgets.at(t)?.update(e)}clearActiveButton(){for(const t of this.buttonWidgets)t.toggleClass(wk,!1)}toggleActiveButtonByIndex(t){if(t!==-1)for(const[e,i]of this.buttonWidgets.entries())i.toggleClass(wk,t!=null&&t===e)}toggleButtonEnabledByIndex(t,e){t!==-1&&this.buttonWidgets.at(t)?.setEnabled(e)}toggleSwitchCheckedByIndex(t,e){t!==-1&&this.buttonWidgets.at(t)?.setChecked(e)}getButtonBounds(){return this.buttonWidgets.map(t=>this.getButtonWidgetBounds(t))}setButtonHiddenByIndex(t,e){this.buttonWidgets.at(t)?.setHidden(e)}getButtonWidgetBounds(t){const e=this.getBounds(),i=t.getBounds();return new lt(i.x+e.x,i.y+e.y,i.width,i.height)}refreshButtonClasses(){const{buttonWidgets:t,hasPrefix:e}=this;let i,s,a;for(const[n,o]of t.entries())i=!e&&n===0||a!=o.section,s=n===t.length-1||o.section!=t.at(n+1)?.section,o.toggleClass("ag-charts-toolbar__button--first",i),o.toggleClass("ag-charts-toolbar__button--last",s),o.toggleClass("ag-charts-toolbar__button--gap",n>0&&i),a=o.section}createButton(t,e){const i=this.createButtonWidget();return i.addClass("ag-charts-toolbar__button"),i.addListener("click",s=>{const a={index:t,...e instanceof Mt?e.toJson():e},n=this.getButtonWidgetBounds(i);this.events.dispatch("button-pressed",{event:s,button:a,buttonBounds:n})}),i.addListener("focus",()=>{this.events.dispatch("button-focused",{button:{index:t}})}),e.section&&(i.section=e.section),this.buttonWidgets.push(i),this.addChild(i),i}},mB=class extends Zb{createButtonWidget(){return new Ek(this.localeManager)}}}}),bB,SB,vB,R$=A({"packages/ag-charts-community/src/components/toolbar/floatingToolbar.ts"(){"use strict";kt(),Nt(),It(),Gm(),fB(),xB(),bB=class extends Ok{constructor(t,e,i){super(t,e),this.onPopoverMoved=i,this.dragHandleDraggingClass="ag-charts-floating-toolbar__drag-handle--dragging"}show(t,e){this.showWithChildren(t,{...e,class:"ag-charts-floating-toolbar"})}hide(){this.dragged=!1,super.hide()}getBounds(){const t=this.getPopoverElement();return new lt(t?.offsetLeft??0,t?.offsetTop??0,t?.offsetWidth??0,t?.offsetHeight??0)}hasBeenDragged(){return this.dragged}setAnchor(t,e,i){const s=this.getPopoverElement();if(!s)return;const a=t.position??"above",{offsetWidth:n,offsetHeight:o}=s;let r=t.y-o-i,l=t.x-n/2;a==="below"?r=t.y+i:a==="right"?(r=t.y-o/2,l=t.x+e):a==="above-left"&&(l=t.x),this.updatePosition({x:l,y:r})}ignorePointerEvents(){const t=this.getPopoverElement();t&&(t.style.pointerEvents="none")}capturePointerEvents(){const t=this.getPopoverElement();t&&(t.style.pointerEvents="unset")}updatePosition(t){const e=this.getBounds(),i=this.ctx.domManager.getBoundingClientRect();t.x=Math.floor(At(0,t.x,i.width-e.width)),t.y=Math.floor(At(0,t.y,i.height-e.height)),super.updatePosition(t),this.onPopoverMoved()}},SB=class extends Zb{constructor(t,e){super(t.localeManager),this.hasPrefix=!0,this.popover=new bB(t,e,this.onPopoverMoved.bind(this)),this.dragHandle=new vB(t.localeManager.t("toolbarAnnotationsDragHandle")),this.popover.setDragHandle(this.dragHandle)}show(t){this.popover.show([this.dragHandle.getElement(),this.getElement()],t)}hide(){this.popover.hide()}setAnchor(t){this.popover.setAnchor(t,this.horizontalSpacing,this.verticalSpacing)}hasBeenDragged(){return this.popover.hasBeenDragged()}ignorePointerEvents(){this.popover.ignorePointerEvents()}capturePointerEvents(){this.popover.capturePointerEvents()}onPopoverMoved(){const t=this.popover.getBounds();if(this.popoverBounds?.equals(t))return;this.popoverBounds=t.clone();const e=this.getButtonBounds();this.events.dispatch("toolbar-moved",{popoverBounds:t,buttonBounds:e})}getButtonWidgetBounds(t){const e=this.popover.getBounds(),i=super.getButtonWidgetBounds(t),s=this.dragHandle.getBounds();return new lt(i.x+e.x-s.width,i.y+e.y,i.width,i.height)}},vB=class extends tr{constructor(t){super(Wt("div","ag-charts-floating-toolbar__drag-handle"));const e=new tr(Wt("span",`${ym("drag-handle")} ag-charts-toolbar__icon`));e.setAriaHidden(!0),this.addChild(e),this.elem.title=t}}}}),MB={};Oa(MB,{AND:()=>un,ARRAY:()=>mu,ARRAY_OF:()=>$n,AbstractBarSeries:()=>jI,AbstractBarSeriesProperties:()=>ib,ActionOnSet:()=>ua,AnchoredPopover:()=>Ck,Animation:()=>KM,AnimationManager:()=>ZD,Arc:()=>Ka,ArrowDown:()=>Lk,ArrowUp:()=>kk,Axis:()=>Em,AxisInterval:()=>fl,AxisLabel:()=>Xe,AxisTick:()=>Fc,AxisTicks:()=>oB,BBox:()=>lt,BBoxValues:()=>cp,BOOLEAN:()=>pt,BOOLEAN_ARRAY:()=>pO,Background:()=>sh,BackgroundModule:()=>lI,BandScale:()=>$o,BarSeries:()=>hf,BarSeriesModule:()=>KI,BaseModuleInstance:()=>qp,BaseProperties:()=>Mt,BaseToolbar:()=>Zb,ButtonWidget:()=>Eu,COLOR_STRING:()=>jt,COLOR_STRING_ARRAY:()=>oa,CachedTextMeasurer:()=>U0,CachedTextMeasurerPool:()=>to,Caption:()=>ee,CartesianAxis:()=>yl,CartesianSeries:()=>nr,CartesianSeriesNodeEvent:()=>Ix,CartesianSeriesProperties:()=>uo,CategoryAxis:()=>Gc,ChangeDetectableProperties:()=>Yx,ChartAxisDirection:()=>rm,ChartEventManager:()=>$D,ChartOptions:()=>fk,ChartUpdateType:()=>Ru,Circle:()=>sr,CollapseMode:()=>LI,Color:()=>Ra,ColorScale:()=>cl,ConicGradient:()=>cB,ContextMenuRegistry:()=>QD,ContinuousScale:()=>ie,Cursor:()=>qD,CursorManager:()=>JD,DATE:()=>im,DATE_ARRAY:()=>gO,DATE_OR_DATETIME_MS:()=>sm,DEFAULT_CARTESIAN_DIRECTION_KEYS:()=>vl,DEFAULT_CARTESIAN_DIRECTION_NAMES:()=>Ml,DEFAULT_TOOLTIP_CLASS:()=>Ni,DEFAULT_TOOLTIP_DARK_CLASS:()=>jA,DIRECTION:()=>b0,DOMManager:()=>wD,DataController:()=>fA,DataModel:()=>pA,DataModelSeries:()=>Dx,DataService:()=>ag,Debug:()=>te,Default:()=>gl,Deprecated:()=>B8,DeprecatedAndRenamedTo:()=>z8,Diamond:()=>OA,DraggablePopover:()=>Ok,DropShadow:()=>Ha,ExtendedPath2D:()=>ju,FONT_STYLE:()=>qn,FONT_WEIGHT:()=>Jn,FUNCTION:()=>Yi,FloatingToolbar:()=>SB,GREATER_THAN:()=>bu,GestureDetector:()=>tA,Gradient:()=>Vp,Group:()=>mt,GroupedCategoryAxis:()=>Al,HdpiCanvas:()=>Hm,HierarchyNode:()=>od,HierarchySeries:()=>aB,HierarchySeriesProperties:()=>vr,HighlightManager:()=>eA,HighlightProperties:()=>Ax,HighlightStyle:()=>Wu,INTERACTION_RANGE:()=>wp,INTERPOLATION_STEP_POSITION:()=>MI,INTERPOLATION_TYPE:()=>vI,Image:()=>Tl,InteractionManager:()=>Xm,InteractionState:()=>Pm,InterpolationProperties:()=>ch,Invalidating:()=>ci,KeyNavManager:()=>iA,LABEL_PLACEMENT:()=>om,LARGEST_KEY_INTERVAL:()=>qA,LESS_THAN:()=>xu,LINE_CAP:()=>fO,LINE_DASH:()=>Qn,LINE_JOIN:()=>yO,LINE_STYLE:()=>mO,Label:()=>Ke,LayoutElement:()=>_m,LayoutManager:()=>vD,LegendMarkerLabel:()=>fo,Line:()=>Bs,LineSeries:()=>uf,LineSeriesModule:()=>$I,LinearGradient:()=>V0,LinearScale:()=>pa,Listeners:()=>gn,Logger:()=>st,LonLatBBox:()=>nB,MARKER_SHAPE:()=>bI,MATCHING_CROSSLINE_TYPE:()=>Tm,MAX_SPACING:()=>v0,MIN_SPACING:()=>S0,Marker:()=>Ji,Menu:()=>gB,MercatorScale:()=>Eb,ModuleRegistry:()=>yD,Motion:()=>VM,NAN:()=>Np,NODE_UPDATE_STATE_TO_PHASE_MAPPING:()=>Vi,NUMBER:()=>wt,NUMBER_ARRAY:()=>Op,NUMBER_OR_NAN:()=>Oc,NativeWidget:()=>tr,Node:()=>Yo,OBJECT:()=>ct,OBJECT_ARRAY:()=>am,OR:()=>ol,OVERFLOW_STRATEGY:()=>bO,ObserveChanges:()=>zc,OrdinalTimeScale:()=>_a,PHASE_METADATA:()=>du,PHASE_ORDER:()=>Dc,PLACEMENT:()=>SO,PLAIN_OBJECT:()=>g0,POINTER_INTERACTION_TYPES:()=>HD,POSITION:()=>nm,POSITION_TOP_COORDINATES:()=>Xp,POSITIVE_NUMBER:()=>nt,PREV_NEXT_KEYS:()=>Hc,Padding:()=>qo,ParallelStateMachine:()=>mE,Path:()=>qi,PointerEvents:()=>_M,PolarAxis:()=>Ol,PolarSeries:()=>ff,PolarZIndexMap:()=>ak,Popover:()=>Xb,PropertiesArray:()=>yu,ProxyInteractionService:()=>zD,ProxyOnWrite:()=>aK,ProxyProperty:()=>Ne,ProxyPropertyOnWrite:()=>bi,QUICK_TRANSITION:()=>Sp,RATIO:()=>Ft,REAL_NUMBER:()=>f0,RENDER_TO_OFFSCREEN_CANVAS_THRESHOLD:()=>xg,RadialColumnShape:()=>Sa,Range:()=>za,Rect:()=>Oi,RegionManager:()=>sA,RepeatType:()=>YM,Rotatable:()=>Rc,RotatableGroup:()=>YO,RotatableText:()=>W0,SKIP_JS_BUILTINS:()=>Xy,SMALLEST_KEY_INTERVAL:()=>QA,SORT_DOMAIN_GROUPS:()=>JA,STRING:()=>J,STRING_ARRAY:()=>m0,Scalable:()=>_0,ScalableGroup:()=>HO,Scene:()=>sg,SceneChangeDetection:()=>ht,ScenePathChangeDetection:()=>vt,Sector:()=>ui,SectorBox:()=>qI,Selection:()=>Te,Series:()=>Jc,SeriesContentZIndexMap:()=>kA,SeriesGroupingChangedEvent:()=>ux,SeriesItemHighlightStyle:()=>ho,SeriesMarker:()=>Ns,SeriesNodeEvent:()=>zu,SeriesNodePickMode:()=>LA,SeriesProperties:()=>Us,SeriesTooltip:()=>Ei,SeriesZIndexMap:()=>IA,Shape:()=>la,SimpleTextMeasurer:()=>Sm,SliderWidget:()=>Um,Square:()=>gg,StateMachine:()=>ku,StateMachineProperty:()=>nK,SvgPath:()=>Yb,TEXT_ALIGN:()=>x0,TEXT_WRAP:()=>Ep,TICK_INTERVAL:()=>dD,Text:()=>Ye,TextUtils:()=>ue,TextWrapper:()=>Im,ThemeConstants:()=>X_,ThemeSymbols:()=>gI,TimeScale:()=>dm,Toolbar:()=>mB,ToolbarButtonProperties:()=>rd,ToolbarButtonWidget:()=>Ek,ToolbarWidget:()=>ig,Tooltip:()=>bn,TooltipManager:()=>rg,TooltipPosition:()=>th,Transformable:()=>Ae,TransformableText:()=>Bc,Translatable:()=>_c,TranslatableGroup:()=>Xi,Triangle:()=>Vu,UNION:()=>ne,UpdateService:()=>lA,VERTICAL_ALIGN:()=>xO,Validate:()=>I,Vec2:()=>fh,Vec4:()=>Qm,WIDGET_HTML_EVENTS:()=>Fm,Widget:()=>oo,WidgetEventUtil:()=>Ou,ZIndexMap:()=>hD,ZoomManager:()=>rA,__FORCE_MODULE_DETECTION:()=>rB,accumulateGroup:()=>C_,accumulateStack:()=>O_,accumulatedValue:()=>A_,accumulativeValueProperty:()=>Sg,addHitTestersToQuadtree:()=>BI,adjustLabelPlacement:()=>_1,angleBetween:()=>zp,angleDiff:()=>W5,animationValidation:()=>Ku,areScalingEqual:()=>ad,area:()=>KA,arraysEqual:()=>sl,backfillPathPointData:()=>r9,buildFormatter:()=>Ap,buildResetPathFn:()=>_I,calculateDefaultTimeTickFormat:()=>uO,calculateDerivativeExtrema:()=>TA,calculateDerivativeExtremaXY:()=>zR,calculateLabelChartPadding:()=>vE,calculateLabelTranslation:()=>eD,calculatePlacement:()=>CA,checkCrisp:()=>w1,circularSliceArray:()=>qM,clamp:()=>At,clampArray:()=>OM,clippedRoundRect:()=>Ag,clockwiseAngle:()=>iE,clockwiseAngles:()=>Y5,collapsedStartingBarPosition:()=>rf,compareDates:()=>zO,computeBarFocusBounds:()=>VI,computeMarkerFocusBounds:()=>af,countFractionDigits:()=>Vy,createButton:()=>D$,createCheckbox:()=>A$,createDatumId:()=>Ci,createDeprecationWarning:()=>vk,createElement:()=>Wt,createElementId:()=>V5,createElementNS:()=>B0,createIcon:()=>lB,createId:()=>Ea,createSelect:()=>I$,createTextArea:()=>k$,dateToNumber:()=>Ps,datesSortOrder:()=>O0,datumKeys:()=>lg,datumStylerProperties:()=>bl,debounce:()=>o5,deconstructSelectionsOrNodes:()=>Zy,deepClone:()=>$i,deepFreeze:()=>bp,deepMerge:()=>i5,defaultTimeTickFormat:()=>p0,diff:()=>Xu,displacePointFromVector:()=>H5,doOnce:()=>$y,downloadUrl:()=>KO,drawCorner:()=>$u,easing:()=>VM,enterpriseModule:()=>bo,evaluateBezier:()=>dx,excludesType:()=>Y2,extent:()=>Xo,extractDecoratedProperties:()=>V2,findMaxIndex:()=>_O,findMaxValue:()=>B5,findMinIndex:()=>PO,findMinMax:()=>Gi,findMinValue:()=>BO,findQuadtreeMatch:()=>zI,findRangeExtent:()=>dp,fixNumericExtent:()=>Fs,focusCursorAtEnd:()=>G5,formatNumber:()=>pE,formatPercent:()=>dE,formatValue:()=>Up,fromToMotion:()=>De,generateUUID:()=>zY,getAngleRatioRadians:()=>sE,getDatumRefPoint:()=>aA,getDocument:()=>hi,getElementBBox:()=>$O,getIconClassNames:()=>ym,getLastFocus:()=>OD,getMarker:()=>Ua,getMissCount:()=>uA,getPath:()=>jM,getPathComponents:()=>AR,getRadialColumnWidth:()=>$P,getRectConfig:()=>E1,getWindow:()=>he,groupAccumulativeValueProperty:()=>Dl,groupAverage:()=>D_,groupBy:()=>Jy,groupCount:()=>YA,groupStackValueProperty:()=>N_,groupSum:()=>M_,hasNoModifiers:()=>zm,identity:()=>XM,inRange:()=>P2,includes:()=>JM,initMenuKeyNav:()=>ow,initRovingTabIndex:()=>ND,initToolbarKeyNav:()=>XK,interpolatePoints:()=>Zx,isArray:()=>ce,isBetweenAngles:()=>Ba,isBoolean:()=>BM,isButtonClickEvent:()=>CD,isContinuous:()=>Lm,isDate:()=>xp,isDecoratedObject:()=>Hy,isDefined:()=>tl,isDenseInterval:()=>_p,isEnumKey:()=>t5,isEnumValue:()=>H2,isFiniteNumber:()=>Vt,isFunction:()=>el,isHtmlElement:()=>W2,isInputPending:()=>QO,isInteger:()=>B2,isNegative:()=>Gy,isNumber:()=>cn,isNumberEqual:()=>pp,isObject:()=>ws,isObjectLike:()=>JY,isPlainObject:()=>xs,isProperties:()=>Zn,isRegExp:()=>U2,isScaleValid:()=>Jg,isString:()=>Rs,isSymbol:()=>e5,isValidDate:()=>Yy,jsonApply:()=>Hp,jsonDiff:()=>eo,jsonPropertyCompare:()=>yE,jsonWalk:()=>ul,keyProperty:()=>Sn,labelDirectionHandling:()=>cD,legendSymbolSvg:()=>qR,lineDistanceSquared:()=>jp,listDecoratedProperties:()=>Sc,makeAccessibleClickListener:()=>ZK,mapValues:()=>s5,markerFadeInAnimation:()=>tf,markerPaletteFactory:()=>yI,markerScaleInAnimation:()=>EI,markerSwipeScaleInAnimation:()=>wI,mergeArrayDefaults:()=>Ky,mergeDefaults:()=>Lt,midpointStartingBarPosition:()=>p9,minMax:()=>o9,mod:()=>wM,moduleRegistry:()=>pn,motion:()=>DB,nearestSquared:()=>Fy,nearestSquaredInContainer:()=>UY,normaliseGroupTo:()=>Nx,normalisePropertyTo:()=>eh,normalisedExtentWithMetadata:()=>$M,normalizeAngle180:()=>Bp,normalizeAngle360:()=>Ht,normalizeAngle360Inclusive:()=>eE,objectsEqual:()=>Mc,objectsEqualWith:()=>zM,pairUpSpans:()=>qg,partialAssign:()=>il,pathFadeInAnimation:()=>Jx,pathFadeOutAnimation:()=>c9,pathMotion:()=>Hx,pathSwipeInAnimation:()=>RI,pickByMatchingAngle:()=>ik,pickNode:()=>Uu,plotAreaPathFill:()=>x1,plotInterpolatedAreaSeriesFillSpans:()=>qx,plotInterpolatedLinePathStroke:()=>$x,plotLinePathStroke:()=>NI,plotPath:()=>I1,predicateWithMessage:()=>Kt,prepareAreaFillAnimationFns:()=>b1,prepareAreaPathAnimation:()=>S1,prepareAxisAnimationContext:()=>gD,prepareAxisAnimationFunctions:()=>PE,prepareBarAnimationFunctions:()=>lf,prepareLinePathAnimation:()=>m1,prepareLinePathPropertyAnimation:()=>OI,prepareLinePathStrokeAnimationFns:()=>CI,prepareMarkerAnimation:()=>e9,preparePieSeriesAnimationFunctions:()=>uh,range:()=>hm,rangedValueProperty:()=>ZA,renderPartialPath:()=>l9,resetAxisGroupFn:()=>BE,resetAxisLabelSelectionFn:()=>FE,resetAxisLineSelectionFn:()=>jE,resetAxisSelectionFn:()=>zE,resetBarSelectionsFn:()=>cf,resetIds:()=>BY,resetLabelFn:()=>fr,resetMarkerFn:()=>ef,resetMarkerPositionFn:()=>sf,resetMotion:()=>We,resetPieSelectionsFn:()=>ek,round:()=>EM,sanitizeHtml:()=>Gu,scale:()=>ts,sectorBox:()=>JI,seriesLabelFadeInAnimation:()=>Gt,seriesLabelFadeOutAnimation:()=>Nl,setAttribute:()=>se,setAttributes:()=>Wc,setDocument:()=>XO,setElementBBox:()=>Pp,setElementStyle:()=>mn,setPath:()=>GM,setWindow:()=>ZO,shallowClone:()=>H0,singleSeriesPaletteFactory:()=>Xg,solveBezier:()=>px,sortAndUniqueDates:()=>FO,sortBasedOnArray:()=>J2,splitBezier:()=>gx,splitPairData:()=>k1,staticFromToMotion:()=>Yn,stopPageScrolling:()=>rw,stringify:()=>Tp,sum:()=>n6,sumValues:()=>Tx,swapAxisCondition:()=>Z_,throttle:()=>ZM,toArray:()=>vp,toDegrees:()=>U5,toRadians:()=>Zi,tooltipContentAriaLabel:()=>e_,trailingAccumulatedValue:()=>I_,trailingAccumulatedValueProperty:()=>l6,unique:()=>QM,updateClipPath:()=>tb,updateLabelNode:()=>R1,updateRect:()=>O1,validateCrossLineValues:()=>tD,valueProperty:()=>Tt,visibleRangeIndices:()=>vx,without:()=>FM});var DB,_$=A({"packages/ag-charts-community/src/module-support.ts"(){"use strict";Ii(),rl(),Ti(),Ue(),jO(),$p(),Jr(),Nt(),F8(),Wp(),qy(),ha(),Nu(),ao(),jy(),It(),Yt(),GR(),Jt(),vs(),C0(),Yp(),em(),ca(),Q0(),tm(),j8(),Ct(),xt(),sB(),rR(),a$(),n$(),o$(),r$(),WP(),l$(),so(),c$(),h$(),Rb(),G_(),V_(),u$(),fe(),VE(),Ga(),IR(),Ww(),vn(),XA(),xR(),Jp(),Xw(),Zw(),$w(),Qw(),tR(),eR(),Yc(),iR(),oR(),oA(),gR(),pl(),Ds(),d$(),yr(),mg(),Zg(),mr(),nA(),hx(),fg(),j1(),G1(),Xx(),GI(),Ws(),Y1(),K1(),Qx(),TI(),UI(),v1(),nf(),B1(),PI(),FI(),DI(),VA(),bb(),sk(),xb(),p$(),g$(),f$(),y$(),m$(),x$(),rP(),b$(),fD(),pD(),Nm(),_E(),ck(),Tu(),eI(),Lu(),S$(),v$(),SE(),IE(),M$(),PA(),Vs(),Ac(),uu(),rl(),Ii(),mI(),gw(),L$(),kw(),wa(),pf(),ro(),LD(),wc(),yp(),Qi(),He(),St(),VR(),Kp(),zy(),bD(),F0(),E0(),nl(),Ui(),Mu(),Gp(),Il(),T$(),pu(),sd(),xI(),me(),ae(),Ki(),Qo(),xm(),oE(),N$(),Va(),df(),j_(),C$(),Ss(),Ui(),Mu(),Fa(),Gs(),co(),Y_(),YR(),ZR(),RA(),hB(),O$(),Vs(),Z1(),FD(),H_(),NA(),fx(),uu(),dl(),pg(),kt(),me(),UD(),ZP(),Pc(),xE(),Va(),QP(),Ig(),gb(),hl(),id(),de(),yo(),dB(),E$(),pB(),fB(),Nk(),w$(),yB(),xB(),R$(),DB={...q2,...vO}}}),w={};Oa(w,{AG_CHARTS_LOCALE_EN_US:()=>NM,AgCharts:()=>Sr,AgChartsCommunityModule:()=>iB,AgErrorBarSupportedSeriesTypes:()=>k2,AgTooltipPositionType:()=>_y,Marker:()=>Ji,VERSION:()=>Vc,_ModuleSupport:()=>MB,_Scene:()=>xk,_Theme:()=>bk,_Util:()=>Sk,_Widget:()=>uB,setupCommunityModules:()=>rk,time:()=>RE});var P=A({"packages/ag-charts-community/src/main.ts"(){"use strict";I2(),Py(),P8(),uD(),Gs(),qP(),tB(),eB(),_$(),dB()}}),$b=Object.defineProperty,AB=Object.getOwnPropertyDescriptor,P$=Object.getOwnPropertyNames,B$=Object.prototype.hasOwnProperty,z$=(t,e)=>{for(var i in e)$b(t,i,{get:e[i],enumerable:!0})},Rk=(t,e,i,s)=>{if(e&&typeof e=="object"||typeof e=="function")for(let a of P$(e))!B$.call(t,a)&&a!==i&&$b(t,a,{get:()=>e[a],enumerable:!(s=AB(e,a))||s.enumerable});return t},F$=(t,e,i)=>(Rk(t,e,"default"),i&&Rk(i,e,"default")),j$=t=>Rk($b({},"__esModule",{value:!0}),t),y=(t,e,i,s)=>{for(var a=s>1?void 0:s?AB(e,i):e,n=t.length-1,o;n>=0;n--)(o=t[n])&&(a=(s?o(e,i,a):o(a))||a);return s&&a&&$b(e,i,a),a},_k={};z$(_k,{AgCharts:()=>Hn.AgCharts,AgChartsEnterpriseModule:()=>rbt,LicenseManager:()=>obt,VERSION:()=>Hn.VERSION,setupEnterpriseModules:()=>e3}),ln.exports=j$(_k);var Df=(P(),_(w)),G$=(P(),_(w));function Pk(t,e,i){const s=(n,o,r,l)=>{let c=t[0];for(let h=n;r>0?h<=o:h>o;h+=r){const u=t[h];if(l(c,u))return!0;c=u}return!1},a=Math.floor(t.length/2);return s(e,a,e,i)?!0:s(t.length-e,a,-e,i)}var V$=(P(),_(w)),{OR:U$,POSITIVE_NUMBER:W$,NAN:H$,AxisInterval:Y$,Validate:K$}=V$._ModuleSupport,Bk=class extends Y${constructor(){super(...arguments),this.minSpacing=NaN}};y([K$(U$(W$,H$))],Bk.prototype,"minSpacing",2);var zk=(P(),_(w)),Fk=(P(),_(w)),X$=(P(),_(w)),{BaseProperties:IB,ChartAxisDirection:Z$,ARRAY:$$,BOOLEAN:jk,COLOR_STRING:Gk,FONT_STYLE:Q$,FONT_WEIGHT:q$,LINE_DASH:J$,NUMBER:kB,OBJECT:tQ,POSITIVE_NUMBER:eQ,RATIO:LB,STRING:TB,UNION:NB,AND:iQ,Validate:ze,MATCHING_CROSSLINE_TYPE:CB,createId:sQ,Group:Vk}=X$._ModuleSupport,kn=class extends IB{constructor(){super(...arguments),this.fontSize=14,this.fontFamily="Verdana, sans-serif",this.padding=5,this.color="rgba(87, 87, 87, 1)"}};y([ze(jk,{optional:!0})],kn.prototype,"enabled",2),y([ze(TB,{optional:!0})],kn.prototype,"text",2),y([ze(Q$,{optional:!0})],kn.prototype,"fontStyle",2),y([ze(q$,{optional:!0})],kn.prototype,"fontWeight",2),y([ze(eQ)],kn.prototype,"fontSize",2),y([ze(TB)],kn.prototype,"fontFamily",2),y([ze(kB)],kn.prototype,"padding",2),y([ze(Gk,{optional:!0})],kn.prototype,"color",2),y([ze(jk,{optional:!0})],kn.prototype,"parallel",2);var Hs=class extends IB{constructor(){super(...arguments),this.id=sQ(this),this.shape="polygon",this.label=new kn,this.scale=void 0,this.clippedRange=[-1/0,1/0],this.gridLength=0,this.sideFlag=-1,this.parallelFlipRotation=0,this.regularFlipRotation=0,this.direction=Z$.X,this.axisInnerRadius=0,this.axisOuterRadius=0,this.lineGroup=new Vk({name:this.id}),this.rangeGroup=new Vk({name:this.id}),this.labelGroup=new Vk({name:this.id}),this._isRange=void 0}assignCrossLineGroup(t,e){t!==this._isRange&&(t?this.rangeGroup.appendChild(e):this.lineGroup.appendChild(e)),this._isRange=t}setSectorNodeProps(t){t.fill=this.fill,t.fillOpacity=this.fillOpacity??1,t.stroke=this.stroke,t.strokeOpacity=this.strokeOpacity??1,t.strokeWidth=this.strokeWidth??1,t.lineDash=this.lineDash}setLabelNodeProps(t,e,i,s,a){const{label:n}=this;t.x=e,t.y=i,t.text=n.text,t.textAlign="center",t.textBaseline=s,t.rotation=a,t.rotationCenterX=e,t.rotationCenterY=i,t.fill=n.color,t.fontFamily=n.fontFamily,t.fontSize=n.fontSize,t.fontStyle=n.fontStyle,t.visible=!0}};y([ze(jk,{optional:!0})],Hs.prototype,"enabled",2),y([ze(NB(["range","line"],"a crossLine type"),{optional:!0})],Hs.prototype,"type",2),y([ze(iQ(CB("range"),$$.restrict({length:2})),{optional:!0})],Hs.prototype,"range",2),y([ze(CB("value"),{optional:!0})],Hs.prototype,"value",2),y([ze(Gk,{optional:!0})],Hs.prototype,"fill",2),y([ze(LB,{optional:!0})],Hs.prototype,"fillOpacity",2),y([ze(Gk,{optional:!0})],Hs.prototype,"stroke",2),y([ze(kB,{optional:!0})],Hs.prototype,"strokeWidth",2),y([ze(LB,{optional:!0})],Hs.prototype,"strokeOpacity",2),y([ze(J$,{optional:!0})],Hs.prototype,"lineDash",2),y([ze(NB(["polygon","circle"],"a shape"))],Hs.prototype,"shape",2),y([ze(tQ)],Hs.prototype,"label",2);var{ChartAxisDirection:aQ,validateCrossLineValues:nQ,normalizeAngle360:Uk,isNumberEqual:OB,Group:oQ,Path:EB,Sector:rQ,RotatableText:lQ,ContinuousScale:cQ}=Fk._ModuleSupport,Wk=class extends Hs{constructor(){super(),this.direction=aQ.X,this.polygonNode=new EB,this.sectorNode=new rQ,this.lineNode=new EB,this.crossLineRange=new oQ,this.labelNode=new lQ,this.crossLineRange.append(this.polygonNode),this.crossLineRange.append(this.sectorNode),this.crossLineRange.append(this.lineNode),this.labelGroup.append(this.labelNode)}update(t){const{scale:e,shape:i,type:s,value:a,range:n}=this;if(!e||!s||!nQ(s,a,n,e,()=>{if(!cQ.is(e))return!0;const[r,l]=n??[a,void 0],c=e.getDomain?.()??e.domain;return r>=c[0]&&r<=c[1]&&(s==="line"||l>=r&&l<=c[1])})){this.rangeGroup.visible=!1,this.lineGroup.visible=!1,this.labelGroup.visible=!1;return}this.rangeGroup.visible=t,this.lineGroup.visible=t,this.labelGroup.visible=t,s==="line"&&i==="circle"&&e instanceof Fk._ModuleSupport.BandScale&&(this.type="range",this.range=[a,a]),this.updateLineNode(t),this.updatePolygonNode(t),this.updateSectorNode(t),this.updateLabelNode(t)}updateLineNode(t){const{scale:e,type:i,value:s,lineNode:a}=this;if(!t||i!=="line"||!e){a.visible=!1;return}const n=e.convert(s);if(isNaN(n)){a.visible=!1;return}const{axisInnerRadius:o,axisOuterRadius:r}=this;a.visible=!0,a.stroke=this.stroke,a.strokeOpacity=this.strokeOpacity??1,a.strokeWidth=this.strokeWidth??1,a.fill=void 0,a.lineDash=this.lineDash;const l=r*Math.cos(n),c=r*Math.sin(n),h=o*Math.cos(n),u=o*Math.sin(n);a.path.clear(!0),a.path.moveTo(h,u),a.path.lineTo(l,c),this.assignCrossLineGroup(!1,this.crossLineRange)}updatePolygonNode(t){const{polygonNode:e,range:i,scale:s,shape:a,type:n}=this;if(!t||n!=="range"||a!=="polygon"||!s||!i){e.visible=!1;return}const o=s.ticks?.();if(!o){e.visible=!1;return}const{axisInnerRadius:r,axisOuterRadius:l}=this,c=o.indexOf(i[0]),h=o.indexOf(i[1]),d=(c<=h?o.slice(c,h+1):o.slice(c).concat(o.slice(0,h+1))).map(g=>s.convert(g));e.visible=!0,this.setSectorNodeProps(e);const{path:p}=e;p.clear(!0),d.forEach((g,f)=>{const x=l*Math.cos(g),m=l*Math.sin(g);f===0?p.moveTo(x,m):p.lineTo(x,m)}),r===0?p.lineTo(0,0):d.slice().reverse().forEach(g=>{const f=r*Math.cos(g),x=r*Math.sin(g);p.lineTo(f,x)}),e.path.closePath(),this.assignCrossLineGroup(!0,this.crossLineRange)}updateSectorNode(t){const{sectorNode:e,range:i,scale:s,shape:a,type:n}=this;if(!t||n!=="range"||a!=="circle"||!s||!i){e.visible=!1;return}const{axisInnerRadius:o,axisOuterRadius:r}=this,l=i.map(u=>s.convert(u)),c=s.step??0,h=s instanceof Fk._ModuleSupport.BandScale?c/2:0;e.visible=!0,this.setSectorNodeProps(e),e.centerX=0,e.centerY=0,e.innerRadius=o,e.outerRadius=r,e.startAngle=l[0]-h,e.endAngle=l[1]+h,this.assignCrossLineGroup(!0,this.crossLineRange)}updateLabelNode(t){const{label:e,labelNode:i,range:s,scale:a,type:n}=this;if(!t||e.enabled===!1||!e.text||!a||n==="range"&&!s){i.visible=!0;return}const{axisInnerRadius:o,axisOuterRadius:r}=this;let l,c,h,u;if(n==="line"){const d=Uk(a.convert(this.value)),p=1.5*Math.PI,g=OB(d,p)||d>p||d<Math.PI/2,f=(o+r)/2*Math.cos(d),x=(o+r)/2*Math.sin(d);l=f+e.padding*Math.cos(d+Math.PI/2),c=x+e.padding*Math.sin(d+Math.PI/2),u=g?"top":"bottom",h=g?d:d-Math.PI}else{const[d,p]=s.map(b=>Uk(a.convert(b)));let g=(d+p)/2;d>p&&(g-=Math.PI),g=Uk(g);const f=(OB(g,0)||g>0)&&g<Math.PI;let x;const m=a.ticks?.()??[];this.shape==="circle"||m.length<3?x=r-e.padding:x=r*Math.cos(Math.PI/m.length)-e.padding,l=x*Math.cos(g),c=x*Math.sin(g),u=f?"bottom":"top",h=f?g-Math.PI/2:g+Math.PI/2}this.setLabelNodeProps(i,l,c,u,h)}};Wk.className="AngleCrossLine";var{ChartAxisDirection:hQ,NUMBER:wB,UNION:uQ,ProxyOnWrite:dQ,TextWrapper:pQ,TextUtils:gQ,Validate:Hk,angleBetween:fQ,isNumberEqual:ld,toRadians:Qb,normalizeAngle360:cd,normalizeAngle360Inclusive:yQ,Path:mQ,RotatableText:xQ,Transformable:bQ,BBox:SQ}=zk._ModuleSupport,Yk=class extends zk._ModuleSupport.AxisLabel{constructor(){super(...arguments),this.orientation="fixed"}};y([Hk(uQ(["fixed","parallel","perpendicular"],"a label orientation"))],Yk.prototype,"orientation",2);var Af=class extends zk._ModuleSupport.PolarAxis{constructor(t,e){super(t,e),this.startAngle=0,this.endAngle=void 0,this.labelData=[],this.tickData=[],this.radiusLine=this.axisGroup.appendChild(new mQ),this.includeInvisibleDomains=!0}get direction(){return hQ.X}createLabel(){return new Yk}update(){this.updateScale(),this.updatePosition(),this.updateGridLines(),this.updateTickLines(),this.updateLabels(),this.updateRadiusLine(),this.updateCrossLines()}normalizedAngles(){const t=cd(-Math.PI/2+Qb(this.startAngle)),e=this.endAngle!=null?yQ(Qb(this.endAngle)-Qb(this.startAngle)):2*Math.PI,i=t+e;return[t,i]}computeRange(){this.range=this.normalizedAngles()}calculateAvailableRange(){const{range:t,gridLength:e}=this;return fQ(t[0],t[1])*e}updatePosition(){const{translation:t,axisGroup:e,gridGroup:i,crossLineRangeGroup:s,crossLineLineGroup:a,crossLineLabelGroup:n}=this,o=Math.floor(t.x),r=Math.floor(t.y);e.translationX=o,e.translationY=r,i.translationX=o,i.translationY=r,s.translationX=o,s.translationY=r,a.translationX=o,a.translationY=r,n.translationX=o,n.translationY=r}updateRadiusLine(){const t=this.radiusLine,{path:e}=t;e.clear(!0);const{points:i,closePath:s}=this.getAxisLinePoints();i.forEach(({x:a,y:n,moveTo:o,arc:r,radius:l=0,startAngle:c=0,endAngle:h=0})=>{r?e.arc(a,n,l,c,h):o?e.moveTo(a,n):e.lineTo(a,n)}),s&&e.closePath(),t.visible=this.line.enabled,t.stroke=this.line.stroke,t.strokeWidth=this.line.width,t.fill=void 0}getAxisLinePoints(){const{scale:t,shape:e,gridLength:i}=this,[s,a]=this.range,n=ld(a-s,2*Math.PI),o=[];if(e==="circle")n?o.push({x:i,y:0,moveTo:!0},{x:0,y:0,radius:i,startAngle:0,endAngle:2*Math.PI,arc:!0,moveTo:!1}):o.push({x:i*Math.cos(s),y:i*Math.sin(s),moveTo:!0},{x:0,y:0,radius:i,startAngle:cd(s),endAngle:cd(a),arc:!0,moveTo:!1});else if(e==="polygon"){const r=t.ticks?.().map(l=>t.convert(l));r&&r.length>2&&r.forEach((l,c)=>{const h=i*Math.cos(l),u=i*Math.sin(l),d=c===0;o.push({x:h,y:u,moveTo:d})})}return{points:o,closePath:n}}updateGridLines(){const{scale:t,gridLength:e,gridLine:{enabled:i,style:s,width:a},innerRadiusRatio:n}=this;if(!(s&&e>0))return;const o=this.tickData,r=e*n,l=s.length,c=h=>h.value;this.gridLineGroupSelection.update(i?o:[],void 0,c).each((h,u,d)=>{const{value:p}=u,{stroke:g,lineDash:f}=s[d%l],x=t.convert(p);h.x1=r*Math.cos(x),h.y1=r*Math.sin(x),h.x2=e*Math.cos(x),h.y2=e*Math.sin(x),h.stroke=g,h.strokeWidth=a,h.lineDash=f,h.fill=void 0}),this.gridLineGroupSelection.cleanup()}updateLabels(){const{label:t,tickLabelGroupSelection:e}=this,i=this.tickData;e.update(t.enabled?i:[]).each((s,a,n)=>{const o=this.labelData[n];if(!o||o.hidden){s.visible=!1;return}s.text=o.text,s.setFont(t),s.fill=t.color,s.x=o.x,s.y=o.y,s.textAlign=o.textAlign,s.textBaseline=o.textBaseline,s.visible=!0,o.rotation?(s.rotation=o.rotation,s.rotationCenterX=o.x,s.rotationCenterY=o.y):s.rotation=0})}updateTickLines(){const{scale:t,gridLength:e,tick:i,tickLineGroupSelection:s}=this,a=this.tickData;s.update(i.enabled?a:[]).each((n,o)=>{const{value:r}=o,l=t.convert(r),c=Math.cos(l),h=Math.sin(l);n.x1=e*c,n.y1=e*h,n.x2=(e+i.size)*c,n.y2=(e+i.size)*h,n.stroke=i.stroke,n.strokeWidth=i.width})}createLabelNodeData(t,e,i){const{label:s,gridLength:a,scale:n,tick:o}=this;if(!s.enabled)return[];const r=new xQ,l=i.x-this.translation.x,c=i.x+i.width-this.translation.x,h=t.map((u,d)=>{const{value:p}=u,g=a+s.spacing+o.size,f=n.convert(p),x=Math.cos(f),m=Math.sin(f),b=g*x,v=g*m,{textAlign:S,textBaseline:D}=this.getLabelAlign(f),k=d===t.length-1&&p!==t[0]&&ld(cd(f),cd(n.convert(t[0]))),L=this.getLabelRotation(f);let T=String(p);if(s.formatter){const{callbackCache:C}=this.moduleCtx;T=C.call(s.formatter,{value:p,index:d})??""}r.text=T,r.x=b,r.y=v,r.setFont(s),r.textAlign=S,r.textBaseline=D,r.rotation=L,L&&(r.rotationCenterX=b,r.rotationCenterY=v);let N=L?bQ.toCanvas(r):r.getBBox();if(N&&e.hideWhenNecessary&&!L){const C=l-N.x,O=N.x+N.width-c,R=1;if(C>R||O>R){const E=N.width-Math.max(C,O);T=pQ.wrapText(T,{maxWidth:E,font:s,textWrap:"never"}),T===gQ.EllipsisChar&&(T=""),r.text=T,N=r.getBBox()}}return{text:T,x:b,y:v,textAlign:S,textBaseline:D,hidden:T===""||u.hidden||k,rotation:L,box:N}});return s.avoidCollisions&&this.avoidLabelCollisions(h),h}computeLabelsBBox(t,e){this.tickData=this.generateAngleTicks(),this.labelData=this.createLabelNodeData(this.tickData,t,e);const i=this.labelData.map(({box:s})=>s).filter(s=>s!=null);return!this.label.enabled||i.length===0?null:SQ.merge(i)}getLabelOrientation(){const{label:t}=this;return t instanceof Yk?t.orientation:"fixed"}getLabelRotation(t){let e=Qb(this.label.rotation??0);t=cd(t);const i=this.getLabelOrientation();return i==="parallel"?(e+=t,t>=0&&t<Math.PI?e-=Math.PI/2:e+=Math.PI/2):i==="perpendicular"&&(e+=t,t>=Math.PI/2&&t<1.5*Math.PI&&(e+=Math.PI)),e}getLabelAlign(t){const e=Math.cos(t),i=Math.sin(t);let s,a;const n=this.getLabelOrientation(),o=ld(e,0),r=ld(i,0),l=ld(e,1),c=ld(i,-1),h=e>0&&!o,u=i>0&&!r;return n==="parallel"?(s="center",a=l&&r||u?"top":"bottom"):n==="perpendicular"?(s=c||h?"left":"right",a="middle"):(s="right",o?s="center":h&&(s="left"),a="bottom",r?a="middle":u&&(a="top")),{textAlign:s,textBaseline:a}}updateCrossLines(){this.crossLines.forEach(t=>{if(t instanceof Wk){const{shape:e,gridLength:i,innerRadiusRatio:s}=this;t.shape=e,t.axisOuterRadius=i,t.axisInnerRadius=i*s}}),super.updateCrossLines()}};Af.CrossLineConstructor=Wk,y([dQ("rotation"),Hk(wB)],Af.prototype,"startAngle",2),y([Hk(wB,{optional:!0})],Af.prototype,"endAngle",2);var{RATIO:RB,OBJECT:vQ,Validate:Kk,isNumberEqual:_B,BandScale:MQ}=G$._ModuleSupport,yh=class extends Af{constructor(t){super(t,new MQ),this.groupPaddingInner=0,this.paddingInner=0,this.interval=new Bk}generateAngleTicks(){const{scale:t,gridLength:e}=this,{values:i,minSpacing:s}=this.interval,a=i??t.ticks()??[];if(a.length<2||isNaN(s))return a.map(c=>({value:c,visible:!0}));const n=a[0],o=t.convert(n),r=e*Math.cos(o),l=e*Math.sin(o);for(let c=1;c<a.length-1;c++){const h=a[c],u=t.convert(h);if(u-o>Math.PI)break;const d=e*Math.cos(u),p=e*Math.sin(u);if(Math.sqrt((d-r)**2+(p-l)**2)>s){const f=new Set([n]);return Pk(a,c,(x,m)=>{f.add(m)}),a.map(x=>{const m=f.has(x);return{value:x,visible:m}})}}return[{value:n,visible:!0}]}avoidLabelCollisions(t){let{minSpacing:e}=this.label;if(Number.isFinite(e)||(e=0),t.length<3)return;const i=(l,c)=>{if(l.hidden||c.hidden)return!1;const h=l.box.clone().grow(e/2),u=c.box.clone().grow(e/2);return h.collidesBBox(u)},s=t[0],a=t.at(-1),n=new Set([s]),o=_B(s.x,a.x)&&_B(s.y,a.y),r=Math.floor(t.length/2);for(let l=1;l<=r;l++){const c=o?t.slice(0,-1):t;if(!Pk(c,l,i)){Pk(c,l,(u,d)=>{n.add(d)});break}}t.forEach(l=>{n.has(l)||(l.hidden=!0,l.box=void 0)})}};yh.className="AngleCategoryAxis",yh.type="angle-category",y([Kk(RB)],yh.prototype,"groupPaddingInner",2),y([Kk(RB)],yh.prototype,"paddingInner",2),y([Kk(vQ)],yh.prototype,"interval",2);var DQ={type:"axis",optionsKey:"axes[]",packageType:"enterprise",chartTypes:["polar"],identifier:"angle-category",moduleFactory:t=>new yh(t)},AQ=(P(),_(w)),IQ=(P(),_(w)),{range:PB,isDenseInterval:kQ,isNumberEqual:LQ,LinearScale:TQ,Invalidating:NQ}=IQ._ModuleSupport,BB=class extends TQ{constructor(){super(...arguments),this.arcLength=0,this.niceTickStep=0}ticks(){if(!this.domain||this.domain.length<2||this.domain.some(a=>!isFinite(a))||this.arcLength<=0)return[];this.refresh();const{interval:t}=this,[e,i]=this.getDomain();if(t){const a=Math.abs(t),n=this.getPixelRange();if(!kQ((i-e)/a,n))return PB(e,i,a)}const s=this.nice&&this.niceTickStep?this.niceTickStep:this.getTickStep(e,i);return PB(e,i,s)}hasNiceRange(){const t=this.range.slice().sort((i,s)=>i-s);return[Math.PI,2*Math.PI].some(i=>LQ(i,t[1]-t[0]))}getNiceStepAndTickCount(){const[t,e]=this.niceDomain;let i=this.getTickStep(t,e);const s=isNaN(this.maxTickCount)?1/0:this.maxTickCount,a=Math.abs(e-t)/i;let n=Math.pow(2,Math.ceil(Math.log(a)/Math.log(2)));return n>s&&(n/=2,i*=2),{count:n,step:i}}updateNiceDomain(){if(super.updateNiceDomain(),!this.hasNiceRange())return;const t=this.niceDomain[0]>this.niceDomain[1],e=t?this.niceDomain[1]:this.niceDomain[0],{step:i,count:s}=this.getNiceStepAndTickCount(),a=1/i,n=i>=1?Math.ceil(e/i+s)*i:Math.ceil((e+s*i)*a)/a;this.niceDomain=t?[n,e]:[e,n],this.niceTickStep=i}getPixelRange(){return this.arcLength}};y([NQ],BB.prototype,"arcLength",2);var{AND:zB,Default:FB,GREATER_THAN:CQ,LESS_THAN:OQ,NUMBER_OR_NAN:jB,OBJECT:EQ,Validate:Xk,angleBetween:wQ,isNumberEqual:GB,normalisedExtentWithMetadata:RQ,findMinMax:_Q}=AQ._ModuleSupport,hd=class extends Af{constructor(t){super(t,new BB),this.shape="circle",this.min=NaN,this.max=NaN,this.interval=new Bk}normaliseDataDomain(t){const{min:e,max:i}=this,{extent:s,clipped:a}=RQ(t,e,i);return{domain:s,clipped:a}}getRangeArcLength(){const{range:t}=this,e=Math.min(...t),i=Math.max(...t),s=wQ(e,i)||2*Math.PI,a=this.gridLength;return s*a}generateAngleTicks(){const t=this.getRangeArcLength(),{scale:e,range:i}=this,{values:s,minSpacing:a,maxSpacing:n}=this.interval,o=n?Math.floor(t/n):1,r=a?Math.floor(t/a):1/0,l=Math.floor(4/Math.PI*Math.abs(i[0]-i[1]));e.tickCount=Math.max(o,Math.min(r,l)),e.minTickCount=o,e.maxTickCount=r,e.arcLength=t;let c;if(s!=null){const[h,u]=_Q(e.getDomain().map(Number));c=s.filter(d=>d>=h&&d<=u).sort((d,p)=>d-p)}else c=e.ticks();return c.map(h=>({value:h,visible:!0}))}avoidLabelCollisions(t){let{minSpacing:e}=this.label;Number.isFinite(e)||(e=0);const i=(n,o)=>{if(n.hidden||o.hidden)return!1;const r=n.box.clone().grow(e/2),l=o.box.clone().grow(e/2);return r.collidesBBox(l)},s=t[0],a=t.at(-1);s!==a&&GB(s.x,a.x)&&GB(s.y,a.y)&&(a.hidden=!0);for(let n=1;n<t.length;n*=2){let o=!1;for(let r=n;r<t.length;r+=n){const l=t[r],c=t[r-n];if(i(c,l)){o=!0;break}}if(!o){t.forEach((r,l)=>{l%n>0&&(r.hidden=!0,r.box=void 0)});return}}t.forEach((n,o)=>{o>0&&(n.hidden=!0,n.box=void 0)})}};hd.className="AngleNumberAxis",hd.type="angle-number",y([Xk(zB(jB,OQ("max"))),FB(NaN)],hd.prototype,"min",2),y([Xk(zB(jB,CQ("min"))),FB(NaN)],hd.prototype,"max",2),y([Xk(EQ)],hd.prototype,"interval",2);var PQ={type:"axis",optionsKey:"axes[]",packageType:"enterprise",chartTypes:["polar"],identifier:"angle-number",moduleFactory:t=>new hd(t)},VB=(P(),_(w)),{OrdinalTimeScale:BQ,sortAndUniqueDates:zQ}=VB._ModuleSupport,Zk=class extends VB._ModuleSupport.CategoryAxis{constructor(t){super(t,new BQ),this._lastSetDomain=void 0}normaliseDataDomain(t){return{domain:t,clipped:!1}}setDomain(t){if(this._lastSetDomain===t)return;this._lastSetDomain=t;const e=zQ(t);super.setDomain(e)}onFormatChange(t,e,i,s){s?super.onFormatChange(t,e,i,s):this.labelFormatter=this.scale.tickFormat({ticks:t,domain:i})}};Zk.className="OrdinalTimeAxis",Zk.type="ordinal-time";var FQ={type:"axis",optionsKey:"axes[]",packageType:"enterprise",chartTypes:["cartesian"],identifier:"ordinal-time",moduleFactory:t=>new Zk(t)},jQ=(P(),_(w)),$k=(P(),_(w)),Qk=(P(),_(w)),{ChartAxisDirection:GQ,Validate:VQ,NUMBER:UQ,validateCrossLineValues:WQ,clamp:UB,normalizeAngle360:HQ,toRadians:YQ,isNumberEqual:KQ,Group:XQ,Path:ZQ,Sector:$Q,RotatableText:QQ}=Qk._ModuleSupport,WB=class extends kn{constructor(){super(...arguments),this.positionAngle=void 0}};y([VQ(UQ,{optional:!0})],WB.prototype,"positionAngle",2);var qk=class extends Hs{constructor(){super(),this.direction=GQ.Y,this.label=new WB,this.polygonNode=new ZQ,this.sectorNode=new $Q,this.crossLineRange=new XQ,this.labelNode=new QQ,this.outerRadius=0,this.innerRadius=0,this.crossLineRange.append(this.polygonNode),this.crossLineRange.append(this.sectorNode),this.labelGroup.append(this.labelNode)}update(t){const{scale:e,type:i,value:s,range:a}=this;if(!e||!i||!WQ(i,s,a,e)){this.rangeGroup.visible=!1,this.lineGroup.visible=!1,this.labelGroup.visible=!1;return}i==="line"&&e instanceof Qk._ModuleSupport.BandScale&&(this.type="range",this.range=[s,s]),this.updateRadii();const{innerRadius:n,outerRadius:o}=this;t&&(t=n>=this.axisInnerRadius&&o<=this.axisOuterRadius),this.rangeGroup.visible=t,this.lineGroup.visible=t,this.labelGroup.visible=t,this.updatePolygonNode(t),this.updateSectorNode(t),this.updateLabelNode(t),this.assignCrossLineGroup(this.type==="range",this.crossLineRange)}updateRadii(){const{range:t,scale:e,type:i,axisInnerRadius:s,axisOuterRadius:a}=this;if(!e)return{innerRadius:0,outerRadius:0};const n=l=>a+s-l;let o=0,r=0;if(i==="line")o=n(e.convert(this.value)),r=o;else{const l=Math.abs(e?.bandwidth??0),c=t.map(h=>e.convert(h));o=n(Math.max(...c)),r=n(Math.min(...c))+l}this.outerRadius=o,this.innerRadius=r}drawPolygon(t,e,i){e.forEach((s,a)=>{const n=t*Math.cos(s),o=t*Math.sin(s);a===0?i.path.moveTo(n,o):i.path.lineTo(n,o)}),i.path.closePath()}updatePolygonNode(t){const{gridAngles:e,polygonNode:i,scale:s,shape:a,type:n,innerRadius:o,outerRadius:r}=this;if(!t||a!=="polygon"||!s||!e){i.visible=!1;return}i.visible=!0;const l=this.getPadding();i.path.clear(!0),this.drawPolygon(r-l,e,i);const c=e.slice().reverse(),h=n==="line"?r-l:o+l;this.drawPolygon(h,c,i),this.setSectorNodeProps(i)}updateSectorNode(t){const{axisInnerRadius:e,axisOuterRadius:i,scale:s,sectorNode:a,shape:n,innerRadius:o,outerRadius:r}=this;if(!t||n!=="circle"||!s){a.visible=!1;return}a.visible=!0,a.startAngle=0,a.endAngle=2*Math.PI;const l=this.getPadding(),c=UB(e,o+l,i),h=UB(e,r-l,i);a.innerRadius=Math.min(c,h),a.outerRadius=Math.max(c,h),this.setSectorNodeProps(a)}updateLabelNode(t){const{innerRadius:e,label:i,labelNode:s,scale:a,shape:n,type:o}=this;if(!t||i.enabled===!1||!i.text||!a){s.visible=!1;return}const r=HQ(YQ((i.positionAngle??0)-90)),l=(KQ(r,0)||r>0)&&r<Math.PI,c=l?r-Math.PI/2:r+Math.PI/2;let h=0;const u=this.gridAngles??[];o==="line"?h=e+i.padding:n==="circle"||u.length<3?h=e-i.padding:h=e*Math.cos(Math.PI/u.length)-i.padding;const d=h*Math.cos(r),p=h*Math.sin(r);let g;o==="line"?g=l?"top":"bottom":g=l?"bottom":"top",this.setLabelNodeProps(s,d,p,g,c)}getPadding(){const{scale:t}=this;if(!t)return 0;const e=Math.abs(t.bandwidth??0),i=Math.abs(t.step??0);return t instanceof Qk._ModuleSupport.BandScale?(i-e)/2:0}};qk.className="RadiusCrossLine";var{ChartAxisDirection:qQ,Default:JQ,ZIndexMap:t7,NUMBER:HB,BOOLEAN:e7,Validate:Jk,isNumberEqual:i7,normalizeAngle360:YB,toRadians:s7,Caption:a7,Group:n7,Path:o7,Selection:r7}=$k._ModuleSupport,tL=class extends $k._ModuleSupport.AxisLabel{constructor(){super(...arguments),this.autoRotateAngle=335}};y([Jk(e7,{optional:!0})],tL.prototype,"autoRotate",2),y([Jk(HB)],tL.prototype,"autoRotateAngle",2);var qb=class extends $k._ModuleSupport.PolarAxis{constructor(){super(...arguments),this.positionAngle=0,this.gridPathGroup=this.gridGroup.appendChild(new n7({name:`${this.id}-gridPaths`,zIndex:t7.AXIS_GRID})),this.gridPathSelection=r7.select(this.gridPathGroup,o7)}get direction(){return qQ.Y}getAxisTransform(){const t=this.scale.range[0],{translation:e,positionAngle:i,innerRadiusRatio:s}=this,a=t*s,n=s7(i);return{translationX:e.x,translationY:e.y-t-a,rotation:n,rotationCenterX:0,rotationCenterY:t+a}}updateSelections(t,e,i){super.updateSelections(t,e,i);const{gridLine:{enabled:s,style:a,width:n},shape:o}=this;if(!a)return;const r=this.prepareTickData(e),l=a.length,c=(f,x)=>{const{stroke:m,lineDash:b}=a[x%l];f.stroke=m,f.strokeWidth=n,f.lineDash=b,f.fill=void 0},[h,u]=this.gridRange??[0,2*Math.PI],d=i7(u-h,2*Math.PI),p=(f,x)=>{const{path:m}=f;m.clear(!0);const b=this.getTickRadius(x);d?(m.moveTo(b,0),m.arc(0,0,b,0,2*Math.PI)):(m.moveTo(b*Math.cos(h),b*Math.sin(h)),m.arc(0,0,b,YB(h),YB(u))),d&&m.closePath()},g=(f,x)=>{const{path:m}=f,b=this.gridAngles;if(m.clear(!0),!b||b.length<3)return;const v=this.getTickRadius(x);b.forEach((S,D)=>{const k=v*Math.cos(S),L=v*Math.sin(S);D===0?m.moveTo(k,L):m.lineTo(k,L),b.forEach((T,N)=>{const C=v*Math.cos(T),O=v*Math.sin(T);N===0?m.moveTo(C,O):m.lineTo(C,O)}),m.closePath()}),m.closePath()};this.gridPathSelection.update(s?r:[]).each((f,x,m)=>{c(f,m),o==="circle"?p(f,x):g(f,x)})}updateTitle(){const t=r=>r.defaultValue,{title:e,range:i,moduleCtx:{callbackCache:s}}=this,{formatter:a=t}=this.title;e.caption.enabled=e.enabled,e.caption.fontFamily=e.fontFamily,e.caption.fontSize=e.fontSize,e.caption.fontStyle=e.fontStyle,e.caption.fontWeight=e.fontWeight,e.caption.color=e.color,e.caption.wrapping=e.wrapping;let n=!1;const o=e.caption.node;e.enabled&&(n=!0,o.rotation=Math.PI/2,o.x=Math.floor((i[0]+i[1])/2),o.y=-a7.SMALL_PADDING,o.textAlign="center",o.textBaseline="bottom",o.text=s.call(a,this.getTitleFormatterParams())),o.visible=n}updateCrossLines(){this.crossLines.forEach(t=>{if(t instanceof qk){const{shape:e,gridAngles:i,range:s,innerRadiusRatio:a}=this,n=s[0];t.shape=e,t.gridAngles=i,t.axisOuterRadius=n,t.axisInnerRadius=n*a}}),super.updateCrossLines()}createLabel(){return new tL}};qb.CrossLineConstructor=qk,y([Jk(HB),JQ(0)],qb.prototype,"positionAngle",2);var{RATIO:eL,ProxyPropertyOnWrite:KB,Validate:iL,BandScale:XB}=jQ._ModuleSupport,mh=class extends qb{constructor(t){super(t,new XB),this.shape="circle",this.groupPaddingInner=0,this.paddingInner=0,this.paddingOuter=0}prepareTickData(t){return t.slice().reverse()}getTickRadius(t){const{scale:e,innerRadiusRatio:i}=this,s=e.range[0],a=s*i;if(e instanceof XB){const n=e.ticks(),o=n.length-1-n.indexOf(t.tickId);return o===0?a:e.inset+e.step*(o-.5)+e.bandwidth/2}else{const n=(s-a)/e.domain.length;return s-t.translationY+a-n/2}}};mh.className="RadiusCategoryAxis",mh.type="radius-category",y([iL(eL)],mh.prototype,"groupPaddingInner",2),y([KB("scale","paddingInner"),iL(eL)],mh.prototype,"paddingInner",2),y([KB("scale","paddingOuter"),iL(eL)],mh.prototype,"paddingOuter",2);var l7={type:"axis",optionsKey:"axes[]",packageType:"enterprise",chartTypes:["polar"],identifier:"radius-category",moduleFactory:t=>new mh(t)},c7=(P(),_(w)),{AND:ZB,Default:$B,GREATER_THAN:h7,LESS_THAN:u7,NUMBER_OR_NAN:QB,Validate:qB,normalisedExtentWithMetadata:d7,LinearScale:p7}=c7._ModuleSupport,If=class extends qb{constructor(t){super(t,new p7),this.shape="polygon",this.min=NaN,this.max=NaN}prepareTickData(t){const{scale:e}=this,i=e.getDomain?.()[1];return t.filter(({tick:s})=>s!==i).sort((s,a)=>a.tick-s.tick)}getTickRadius(t){const{scale:e}=this,i=e.range[0],s=i*this.innerRadiusRatio;return i-t.translationY+s}normaliseDataDomain(t){const{min:e,max:i}=this,{extent:s,clipped:a}=d7(t,e,i);return{domain:s,clipped:a}}};If.className="RadiusNumberAxis",If.type="radius-number",y([qB(ZB(QB,u7("max"))),$B(NaN)],If.prototype,"min",2),y([qB(ZB(QB,h7("min"))),$B(NaN)],If.prototype,"max",2);var g7={type:"axis",optionsKey:"axes[]",packageType:"enterprise",chartTypes:["polar"],identifier:"radius-number",moduleFactory:t=>new If(t)},JB=(P(),_(w)),{BOOLEAN:f7,POSITIVE_NUMBER:y7,ObserveChanges:tz,Validate:ez}=JB._ModuleSupport,sL=class extends JB._ModuleSupport.BaseModuleInstance{constructor(t){super(),this.ctx=t,this.enabled=!0,t.animationManager.skip(!1)}};y([tz((t,e)=>{t.ctx.animationManager.skip(!e)}),ez(f7)],sL.prototype,"enabled",2),y([tz((t,e)=>{t.ctx.animationManager.defaultDuration=e}),ez(y7,{optional:!0})],sL.prototype,"duration",2);var m7={type:"root",optionsKey:"animation",packageType:"enterprise",chartTypes:["cartesian","polar","hierarchy","topology","flow-proportion","standalone","gauge"],moduleFactory:t=>new sL(t),themeTemplate:{animation:{enabled:!0}}},Jb=(P(),_(w)),aL=(P(),_(w)),x7='<div contenteditable="plaintext-only" class="ag-charts-text-input__textarea" tabindex="0"></div>',{focusCursorAtEnd:b7}=aL._ModuleSupport,iz="text-input",sz="canvas-overlay",S7=class extends aL._ModuleSupport.BaseModuleInstance{constructor(t){super(),this.ctx=t,this.layout={getTextInputCoords:()=>({x:0,y:0}),getTextPosition:()=>"center",alignment:"center",textAlign:"center"},this.visible=!1,this.element=t.domManager.addChild(sz,iz),this.element.classList.add("ag-charts-text-input"),this.destroyFns.push(()=>t.domManager.removeChild(sz,iz))}setKeyDownHandler(t){this.element.addEventListener("keydown",t),this.destroyFns.push(()=>this.element.removeEventListener("keydown",t))}show(t){this.element.innerHTML=x7;const e=this.element.firstElementChild;e.isContentEditable||(e.contentEditable="true"),e.setAttribute("placeholder",this.ctx.localeManager.t(t.placeholderText??"inputTextareaPlaceholder")),t.styles?.placeholderColor&&e.style.setProperty("--ag-charts-input-placeholder-color",t.styles?.placeholderColor),e.innerText=t.text??"",e.style.color=t.styles?.color??"inherit",e.style.fontFamily=t.styles?.fontFamily??"inherit",e.style.fontSize=t.styles?.fontSize?`${t.styles.fontSize}px`:"inherit",e.style.fontStyle=t.styles?.fontStyle??"inherit",e.style.fontWeight=typeof t.styles?.fontWeight=="number"?`${t.styles.fontWeight}`:t.styles?.fontWeight??"inherit",b7(e),e.addEventListener("input",()=>{this.updatePosition(),t.onChange?.(this.getValue(),this.getBBox())}),e.addEventListener("click",i=>{i.stopPropagation()}),t.layout&&(this.layout=t.layout,this.updatePosition()),t.onChange?.(this.getValue(),this.getBBox()),this.visible=!0}hide(){this.element.innerHTML="",this.layout={getTextInputCoords:()=>({x:0,y:0}),getTextPosition:()=>"center",alignment:"center",textAlign:"center"},this.visible=!1}isVisible(){return this.visible}updateColor(t){this.element.firstElementChild&&(this.element.firstElementChild.style.color=t)}updateFontSize(t){if(this.element.firstElementChild)return this.element.firstElementChild.style.fontSize=`${t}px`,this.updatePosition(),this.getBBox()}getValue(){if(this.element.firstElementChild)return this.element.firstElementChild.innerText.trim()}updatePosition(){const{element:t}=this,e=t.firstElementChild;if(!e)return;const i=this.ctx.domManager.getBoundingClientRect(),{width:s,getTextInputCoords:a,getTextPosition:n,alignment:o,textAlign:r}=this.layout;t.style.setProperty("width",s?`${s}px`:"unset");const l=e.getBoundingClientRect(),c=a(l.height);let h=c.x;o==="center"?h-=(s??l.width)/2:o==="right"&&(h-=s??l.width);const u=n();let d=c.y;u==="center"?d-=l.height/2:u==="bottom"&&(d-=l.height),t.style.setProperty("top",`${d}px`),t.style.setProperty("left",`${h}px`),t.style.setProperty("max-width",`${i.width-h}px`),t.style.setProperty("text-align",o),e.style.setProperty("text-align",r)}getBBox(){const{left:t,top:e,width:i,height:s}=this.element.getBoundingClientRect();return new aL._ModuleSupport.BBox(t,e,i,s)}},v7=(P(),_(w)),{BOOLEAN:M7,BaseProperties:D7,Validate:az,UNION:A7}=v7._ModuleSupport,I7=A7(["x","y","xy"],"an axis type"),nL=class extends D7{constructor(){super(...arguments),this.enabled=!0,this.axes="y"}};y([az(M7)],nL.prototype,"enabled",2),y([az(I7,{optional:!0})],nL.prototype,"axes",2);var k7=(P(),_(w)),oL=(t=>(t.Line="line",t.HorizontalLine="horizontal-line",t.VerticalLine="vertical-line",t.DisjointChannel="disjoint-channel",t.ParallelChannel="parallel-channel",t.FibonacciRetracement="fibonacci-retracement",t.Callout="callout",t.Comment="comment",t.Note="note",t.Text="text",t.Arrow="arrow",t.ArrowUp="arrow-up",t.ArrowDown="arrow-down",t.DateRange="date-range",t.PriceRange="price-range",t.DatePriceRange="date-price-range",t.QuickDatePriceRange="quick-date-price-range",t))(oL||{}),L7=Object.values(oL);function T7(t){for(const e of L7)if(e===t)return e}var N7=(P(),_(w)),C7=(P(),_(w)),O7=(P(),_(w)),{BOOLEAN:kf,COLOR_STRING:rL,DATE:lL,FONT_STYLE:E7,FONT_WEIGHT:w7,FUNCTION:R7,LINE_DASH:_7,LINE_STYLE:P7,NUMBER:xh,OBJECT:Lf,OR:cL,POSITIVE_NUMBER:hL,RATIO:nz,STRING:ud,TEXT_ALIGN:B7,UNION:tS,BaseProperties:Gl,Validate:Et,generateUUID:z7}=O7._ModuleSupport,eS=class extends Gl{};y([Et(cL(ud,xh,lL))],eS.prototype,"x",2),y([Et(xh)],eS.prototype,"y",2);var F7=class extends rs(Mr(cz(Gl))){},uL=class extends rs(Mr(Ao(gL(vh(Gl))))){constructor(){super(...arguments),this.cornerRadius=2}};y([Et(kf)],uL.prototype,"enabled",2),y([Et(hL)],uL.prototype,"cornerRadius",2);var j7=class extends Ao(Gl){},G7=class extends rs(Mr(Ao(Gl))){},bh=class extends vh(Gl){constructor(){super(...arguments),this.label="",this.position="top",this.alignment="left"}};y([Et(ud)],bh.prototype,"label",2),y([Et(tS(["top","center","bottom"]),{optional:!0})],bh.prototype,"position",2),y([Et(tS(["left","center","right"]),{optional:!0})],bh.prototype,"alignment",2);var V7=class extends vh(Gl){},Tf=class extends vh(Gl){constructor(){super(...arguments),this.label=""}};y([Et(ud)],Tf.prototype,"label",2),y([Et(tS(["top","inside","bottom"]),{optional:!0})],Tf.prototype,"position",2),y([Et(tS(["left","center","right"]),{optional:!0})],Tf.prototype,"alignment",2);function Sh(t){class e extends W7(cz(t)){constructor(){super(...arguments),this.id=z7()}isValidWithContext(s,a){return super.isValid(a)}}return e}function dL(t){class e extends t{constructor(){super(...arguments),this.start=new eS,this.end=new eS}}return y([Et(Lf)],e.prototype,"start",2),y([Et(Lf)],e.prototype,"end",2),e}function oz(t){class e extends t{}return y([Et(cL(ud,xh,lL))],e.prototype,"x",2),y([Et(xh)],e.prototype,"y",2),e}function rz(t){class e extends t{}return y([Et(cL(ud,xh,lL))],e.prototype,"value",2),e}function pL(t){class e extends t{constructor(){super(...arguments),this.background=new j7}}return y([Et(Lf,{optional:!0})],e.prototype,"background",2),e}function Vl(t){class e extends t{constructor(){super(...arguments),this.handle=new G7}}return y([Et(Lf,{optional:!0})],e.prototype,"handle",2),e}function lz(t){class e extends t{constructor(){super(...arguments),this.axisLabel=new uL}}return y([Et(Lf,{optional:!0})],e.prototype,"axisLabel",2),e}function gL(t){class e extends t{constructor(){super(...arguments),this.textAlign="center"}}return y([Et(hL,{optional:!0})],e.prototype,"padding",2),y([Et(B7,{optional:!0})],e.prototype,"textAlign",2),y([Et(R7,{optional:!0})],e.prototype,"formatter",2),e}function U7(t){class e extends t{}return e}function fL(t){class e extends t{}return y([Et(kf,{optional:!0})],e.prototype,"extendStart",2),y([Et(kf,{optional:!0})],e.prototype,"extendEnd",2),e}function W7(t){class e extends t{}return y([Et(kf,{optional:!0})],e.prototype,"locked",2),e}function yL(t){class e extends t{setLocaleManager(s){this.localeManager??(this.localeManager=s)}}return e}function cz(t){class e extends t{}return y([Et(kf,{optional:!0})],e.prototype,"visible",2),e}function Ao(t){class e extends t{}return y([Et(rL,{optional:!0})],e.prototype,"fill",2),y([Et(nz,{optional:!0})],e.prototype,"fillOpacity",2),e}function rs(t){class e extends t{}return y([Et(rL,{optional:!0})],e.prototype,"stroke",2),y([Et(nz,{optional:!0})],e.prototype,"strokeOpacity",2),y([Et(xh,{optional:!0})],e.prototype,"strokeWidth",2),e}function Mr(t){class e extends t{constructor(){super(...arguments),this.lineCap=void 0,this.computedLineDash=void 0}}return y([Et(_7,{optional:!0})],e.prototype,"lineDash",2),y([Et(xh,{optional:!0})],e.prototype,"lineDashOffset",2),y([Et(P7,{optional:!0})],e.prototype,"lineStyle",2),e}function vh(t){class e extends t{constructor(){super(...arguments),this.fontSize=12,this.fontFamily="Verdana, sans-serif"}}return y([Et(E7,{optional:!0})],e.prototype,"fontStyle",2),y([Et(w7,{optional:!0})],e.prototype,"fontWeight",2),y([Et(hL)],e.prototype,"fontSize",2),y([Et(ud)],e.prototype,"fontFamily",2),y([Et(rL,{optional:!0})],e.prototype,"color",2),e}var H7=(P(),_(w));function Dr(t,e){if(t.start==null||t.end==null)return;const i=pi(t.start,e),s=pi(t.end,e);if(!(i==null||s==null))return{x1:i.x,y1:i.y,x2:s.x,y2:s.y}}function pi(t,e){const i=Mh(t.x,e.xAxis),s=Mh(t.y,e.yAxis);return{x:i,y:s}}function Mh(t,e){if(t==null)return 0;const i=(e.scale.bandwidth??0)/2;return e.scale.convert(t)+i}function Ie(t,e){const i=Nf(t.x,e.xAxis),s=Nf(t.y,e.yAxis);return{x:i,y:s}}function Nf(t,e){const i=(e.scale.bandwidth??0)/2;return e.continuous?e.scaleInvert(t-i):e.scaleInvertNearest(t-i)}var Y7=(P(),_(w)),{BaseProperties:K7}=Y7._ModuleSupport,mL=class extends Sh(dL(Vl(K7))){constructor(){super(...arguments),this.snapToAngle=45}isValidWithContext(t,e){return super.isValid(e)}getDefaultColor(t){}getDefaultOpacity(t){}},{STRING:X7,Validate:Z7}=H7._ModuleSupport,hz=class extends yL(gL(vh(mL))){constructor(){super(...arguments),this.text="",this.position="top",this.alignment="left",this.placement="inside",this.placeholderText="inputTextareaPlaceholder"}isValidWithContext(t,e){return super.isValid(e)}getDefaultColor(t){return this.color}getDefaultOpacity(t){}getPlaceholderColor(){}getPadding(){const{padding:t=0}=this;return{top:t,right:t,bottom:t,left:t}}getText(){const t=this.text.length==0;let e=this.text;return t&&(e=this.placeholderText??"",this.localeManager&&(e=this.localeManager.t(e))),{text:e,isPlaceholder:t}}getTextInputCoords(t,e){return pi(this.end,t)}getTextPosition(){return this.position}};y([Z7(X7)],hz.prototype,"text",2);var{STRING:$7,Validate:Q7,isObject:q7,Color:uz}=C7._ModuleSupport,J7={top:6,right:12,bottom:9,left:12},Ln=class extends Ao(rs(hz)){constructor(){super(...arguments),this.type="callout",this.position="bottom",this.alignment="left"}static is(t){return q7(t)&&t.type==="callout"}getDefaultColor(t){switch(t){case"fill-color":return this.fill;case"line-color":return this.stroke;case"text-color":default:return this.color}}getDefaultOpacity(t){switch(t){case"fill-color":return this.fillOpacity;case"line-color":return this.strokeOpacity;case"text-color":default:return}}getPlaceholderColor(){const{r:t,g:e,b:i}=uz.fromString(this.color??"#888888");return new uz(t,e,i,.66).toString()}getPadding(){const{padding:t}=this;return t==null?{...J7}:{top:t,right:t,bottom:t,left:t}}getTextInputCoords(t,e){const i=super.getTextInputCoords(t,e),s=this.getPadding(),a=typeof s=="number"?s:s?.left??0,n=typeof s=="number"?s:s?.bottom??0;return{x:i.x+a,y:i.y-n}}};y([Q7($7)],Ln.prototype,"type",2);var tq=(P(),_(w)),eq=(P(),_(w)),{STRING:iq,BaseProperties:sq,Validate:aq}=eq._ModuleSupport,iS=class extends Sh(oz(Vl(gL(vh(sq))))){constructor(){super(...arguments),this.text="",this.position="top",this.alignment="left",this.placement="inside",this.placeholderText="inputTextareaPlaceholder"}isValidWithContext(t,e){return super.isValid(e)}getDefaultColor(t){return this.color}getDefaultOpacity(t){}getPlaceholderColor(){}getPadding(){const{padding:t=0}=this;return{top:t,right:t,bottom:t,left:t}}getText(){const t=this.text.length==0;return{text:t?this.placeholderText??"":this.text,isPlaceholder:t}}getTextInputCoords(t,e){return pi(this,t)}getTextPosition(){return this.position}};y([aq(iq)],iS.prototype,"text",2);var{STRING:nq,Validate:oq,isObject:rq,Color:dz}=tq._ModuleSupport,sS={top:8,right:14,bottom:8,left:14},Io=class extends Ao(rs(iS)){constructor(){super(...arguments),this.type="comment",this.position="bottom",this.alignment="left"}static is(t){return rq(t)&&t.type==="comment"}getDefaultColor(t){switch(t){case"fill-color":return this.fill;case"line-color":return this.stroke;case"text-color":default:return this.color}}getDefaultOpacity(t){switch(t){case"fill-color":return this.fillOpacity;case"line-color":return this.strokeOpacity;case"text-color":default:return}}getPlaceholderColor(){const{r:t,g:e,b:i}=dz.fromString(this.color??"#888888");return new dz(t,e,i,.66).toString()}getPadding(){const{padding:t,fontSize:e}=this;return t==null?{top:Math.max(e*.4,sS.top),bottom:Math.max(e*.4,sS.bottom),left:Math.max(e*.8,sS.left),right:Math.max(e*.8,sS.right)}:{top:t,right:t,bottom:t,left:t}}getTextInputCoords(t,e){const i=super.getTextInputCoords(t,e),s=this.getPadding();return{x:i.x+s.left,y:i.y-s.bottom}}};y([oq(nq)],Io.prototype,"type",2);var lq=(P(),_(w)),cq=(P(),_(w)),{Vec2:Dh}=cq._ModuleSupport;function Cf(t,e){return t?"dashed":e??"solid"}function pz(t,e){switch(e){case"solid":return[];case"dashed":return[t*4,t*2];case"dotted":return[0,t*2]}}function dd(t,e,i,s){const a=Cf(t,i);return e??t??pz(s??1,a)}function pd(t,e,i){const s=Cf(e,i);return t??s==="dotted"?"round":void 0}function hq(t,e){const[i,s]=Dh.from(t),a=e.height,n=Dh.gradient(s,i,a),o=Dh.intercept(s,n,a),r=[{x:i.x,y:a??0},{x:i.x,y:a==null?e.height:a-e.height}];if(n===1/0)return r;let l=[Dh.intersectAtY(n,o,0,a),Dh.intersectAtY(n,o,e.height,a),Dh.intersectAtX(n,o,0,a),Dh.intersectAtX(n,o,e.width,a)];return l=l.filter(c=>c.x>=e.x&&c.x<=e.width&&c.y>=e.y&&c.y<=e.height).sort((c,h)=>c.x===h.x?0:c.x<h.x?-1:1),l.length!==2?r:l}var{BOOLEAN:aS,OBJECT:gd,STRING:nS,BaseProperties:xL,Validate:Ys,isObject:oS}=lq._ModuleSupport,uq=class extends rs(xL){},bL=class extends vh(Ao(rs(xL))){constructor(){super(...arguments),this.divider=new uq}};y([Ys(gd,{optional:!0})],bL.prototype,"divider",2);var SL=class extends Ao(rs(Vl(xL))){constructor(){super(...arguments),this.statistics=new bL}};y([Ys(gd,{optional:!0})],SL.prototype,"statistics",2);var fd=class extends yL(pL(rs(Mr(mL)))){constructor(){super(...arguments),this.direction="both",this.hasDateRange=!1,this.hasPriceRange=!1,this.statistics=new bL,this.getVolume=()=>{},this.text=new bh}getDefaultColor(t){switch(t){case"fill-color":return this.background.fill;case"line-color":return this.stroke;case"text-color":return this.text.color}}getDefaultOpacity(t){switch(t){case"fill-color":return this.background.fillOpacity;case"line-color":return this.strokeOpacity}}getLineDash(){return dd(this.lineDash,this.computedLineDash,this.lineStyle,this.strokeWidth)}getLineCap(){return pd(this.lineCap,this.lineDash,this.lineStyle)}};y([Ys(gd,{optional:!0})],fd.prototype,"statistics",2),y([Ys(gd,{optional:!0})],fd.prototype,"text",2);function vL(t){class e extends t{constructor(){super(...arguments),this.hasDateRange=!0}}return e}function ML(t){class e extends t{constructor(){super(...arguments),this.hasPriceRange=!0}}return e}var Xa=class extends vL(fd){constructor(){super(...arguments),this.type="date-range",this.direction="horizontal"}static is(t){return oS(t)&&t.type==="date-range"}};y([Ys(nS)],Xa.prototype,"type",2),y([Ys(aS,{optional:!0})],Xa.prototype,"extendAbove",2),y([Ys(aS,{optional:!0})],Xa.prototype,"extendBelow",2);var Za=class extends ML(fd){constructor(){super(...arguments),this.type="price-range",this.direction="vertical"}static is(t){return oS(t)&&t.type==="price-range"}};y([Ys(nS)],Za.prototype,"type",2),y([Ys(aS,{optional:!0})],Za.prototype,"extendLeft",2),y([Ys(aS,{optional:!0})],Za.prototype,"extendRight",2);var Ar=class extends vL(ML(fd)){constructor(){super(...arguments),this.type="date-price-range",this.direction="both"}static is(t){return oS(t)&&t.type==="date-price-range"}};y([Ys(nS)],Ar.prototype,"type",2);var va=class extends vL(ML(fd)){constructor(){super(...arguments),this.type="quick-date-price-range",this.up=new SL,this.down=new SL,this.direction="both"}static is(t){return oS(t)&&t.type==="quick-date-price-range"}};y([Ys(nS)],va.prototype,"type",2),y([Ys(gd,{optional:!0})],va.prototype,"up",2),y([Ys(gd,{optional:!0})],va.prototype,"down",2);var dq=(P(),_(w)),pq=(P(),_(w)),{TextWrapper:gq,CachedTextMeasurerPool:fq,BBox:yq}=pq._ModuleSupport,rS=1.38;function gz(t){return{font:{fontFamily:t.fontFamily,fontSize:t.fontSize,fontStyle:t.fontStyle,fontWeight:t.fontWeight},textAlign:t.textAlign,textBaseline:t.position=="center"?"middle":t.position,lineHeight:rS,avoidOrphans:!1,textWrap:"always"}}function lS(t,e,i){return i?gq.wrapText(e,{...gz(t),maxWidth:i}):e}function mq(t,e){const i=gz(t),{lineMetrics:s,width:a}=fq.measureLines(e,i),n=s.length*(t.fontSize??14)*rS;return{width:a,height:n}}function DL(t,e,i,s){let a=s?.width??0,n=s?.height??0;if(!s){const o=t.width!=null?lS(t,e,t.width):e;({width:a,height:n}=mq(t,o))}return new yq(i.x,i.y,a,n)}function fz(t,e,i,s,{x:a,y:n}){const{visible:o=!0,fontFamily:r,fontSize:l=14,fontStyle:c,fontWeight:h,textAlign:u}=s,d=l*rS,p=s.position=="center"?"middle":s.position,g=i?s.getPlaceholderColor():s.color;t.setProperties({x:a,y:n,visible:o,text:e,fill:g,fontFamily:r,fontSize:l,fontStyle:c,fontWeight:h,textAlign:u,lineHeight:d,textBaseline:p})}var{OBJECT:xq,STRING:bq,BaseProperties:Sq,Validate:yz,isObject:vq,clamp:Mq}=dq._ModuleSupport,Dq=10,Aq=11,mz=20,Iq=22,kq=10,xz=mz+kq,bz=34,Lq=class extends Ao(rs(Sq)){},Ks=class extends Ao(rs(iS)){constructor(){super(...arguments),this.type="note",this.background=new Lq,this.position="bottom",this.alignment="center",this.width=200}static is(t){return vq(t)&&t.type==="note"}getDefaultColor(t){switch(t){case"line-color":return this.fill;case"text-color":return this.color}}getDefaultOpacity(t){switch(t){case"line-color":return this.fillOpacity;case"text-color":return}}getPadding(){const t=this.padding??Dq;return{top:t,right:t,bottom:t,left:t}}getTextInputCoords(t,e){const{width:i,text:s}=this,a=super.getTextInputCoords(t,e),n=this.getPadding().top,o=DL(this,s,a);o.x=Mq(i/2,o.x,t.seriesRect.width-i/2);const r=o.y-xz-n*2,l=o.y+Aq+n*2,c=Math.max(o.height,e);return r-c-bz<0?(o.y=l,this.position="top"):(o.y=r+n,this.position="bottom"),{x:o.x,y:o.y}}};y([yz(bq)],Ks.prototype,"type",2),y([yz(xq,{optional:!0})],Ks.prototype,"background",2);var Tq=(P(),_(w)),{BaseProperties:Nq}=Tq._ModuleSupport,Cq=class extends Sh(oz(Vl(Nq))){isValidWithContext(t,e){return super.isValid(e)}getDefaultColor(t){}getDefaultOpacity(t){}},AL=class A3 extends Ao(Cq){constructor(){super(...arguments),this.size=32}static is(e){return e instanceof A3}getDefaultColor(e){return e==="fill-color"?this.fill:void 0}getDefaultOpacity(e){return e==="fill-color"?this.fillOpacity:void 0}},Oq=(P(),_(w)),Eq=(P(),_(w)),{Logger:IL}=Eq._ModuleSupport;function Of(t,e,i,s){let a=!0;return a&&(a=Tn(t,e.start,i,s&&`${s}[start] `)),a&&(a=Tn(t,e.end,i,s&&`${s}[end] `)),a}function Sz(t,e,i){const s=e.direction==="horizontal"?t.yAxis:t.xAxis,a=kL(e.value,s);return!a&&i&&IL.warnOnce(`${i}is outside the axis domain, ignoring. - value: [${e.value}]]`),a}function Tn(t,e,i,s){if(e.x==null||e.y==null)return s&&IL.warnOnce(`${s}requires both an [x] and [y] property, ignoring.`),!1;const a=i?.x===!1?!0:kL(e.x,t.xAxis),n=i?.y===!1?!0:kL(e.y,t.yAxis);if(!a||!n){let o="x & y domains";return a&&(o="y domain"),n&&(o="x domain"),s&&IL.warnOnce(`${s}is outside the ${o}, ignoring. - x: [${e.x}], y: ${e.y}]`),!1}return!0}function kL(t,e){const i=e.scale.getDomain?.();return i&&e.continuous?t>=i[0]&&t<=i.at(-1):!0}function wq(t){return t?.x!=null&&t?.y!=null}var{OBJECT:vz,STRING:Mz,BaseProperties:Dz,Validate:cS,isObject:Az}=Oq._ModuleSupport,ls=class extends Sh(rz(Vl(lz(rs(Mr(Dz)))))){constructor(){super(...arguments),this.direction="horizontal",this.type="horizontal-line",this.text=new bh}static is(t){return Az(t)&&t.type==="horizontal-line"}isValidWithContext(t,e){return super.isValid(e)&&Sz(t,this,e)}getDefaultColor(){return this.stroke}getDefaultOpacity(){return this.strokeOpacity}getLineDash(){return dd(this.lineDash,this.computedLineDash,this.lineStyle,this.strokeWidth)}getLineCap(){return pd(this.lineCap,this.lineDash,this.lineStyle)}};y([cS(Mz)],ls.prototype,"type",2),y([cS(vz,{optional:!0})],ls.prototype,"text",2);var ko=class extends Sh(rz(Vl(lz(rs(Mr(Dz)))))){constructor(){super(...arguments),this.direction="vertical",this.type="vertical-line",this.text=new bh}static is(t){return Az(t)&&t.type==="vertical-line"}isValidWithContext(t,e){return super.isValid(e)&&Sz(t,this,e)}getDefaultColor(){return this.stroke}getDefaultOpacity(){return this.strokeOpacity}getLineDash(){return dd(this.lineDash,this.computedLineDash,this.lineStyle,this.strokeWidth)}getLineCap(){return pd(this.lineCap,this.lineDash,this.lineStyle)}};y([cS(Mz)],ko.prototype,"type",2),y([cS(vz,{optional:!0})],ko.prototype,"text",2);var Rq=(P(),_(w)),{NUMBER:Iz,OBJECT:_q,STRING:Pq,BaseProperties:Bq,Validate:hS,isObject:zq,Logger:Fq}=Rq._ModuleSupport,$a=class extends Sh(pL(dL(Vl(fL(rs(Mr(Bq))))))){constructor(){super(...arguments),this.type="disjoint-channel",this.text=new Tf,this.snapToAngle=45}static is(t){return zq(t)&&t.type==="disjoint-channel"}get bottom(){const t={start:{x:this.start.x,y:this.start.y},end:{x:this.end.x,y:this.end.y}};return typeof t.start.y=="number"&&typeof t.end.y=="number"?(t.start.y-=this.startHeight,t.end.y-=this.endHeight):Fq.warnOnce(`Annotation [${this.type}] can only be used with a numeric y-axis.`),t}isValidWithContext(t,e){return super.isValid(e)&&Of(t,this,{y:!1},e)&&Of(t,this.bottom,{y:!1},e)}getDefaultColor(t){switch(t){case"fill-color":return this.background.fill;case"line-color":return this.stroke;case"text-color":return this.text.color}}getDefaultOpacity(t){switch(t){case"fill-color":return this.background.fillOpacity;case"line-color":return this.strokeOpacity}}getLineDash(){return dd(this.lineDash,this.computedLineDash,this.lineStyle,this.strokeWidth)}getLineCap(){return pd(this.lineCap,this.lineDash,this.lineStyle)}};y([hS(Pq)],$a.prototype,"type",2),y([hS(Iz)],$a.prototype,"startHeight",2),y([hS(Iz)],$a.prototype,"endHeight",2),y([hS(_q,{optional:!0})],$a.prototype,"text",2);var jq=(P(),_(w)),Gq=(P(),_(w)),Vq=(P(),_(w)),{OBJECT:Uq,STRING:kz,Validate:LL,isObject:Lz}=Vq._ModuleSupport,uS=class extends yL(U7(fL(rs(Mr(mL))))){constructor(){super(...arguments),this.text=new bh}isValidWithContext(t,e){return super.isValid(e)&&Of(t,this,void 0,e)}getDefaultColor(t){switch(t){case"line-color":return this.stroke;case"text-color":return this.text.color}}getDefaultOpacity(){return this.strokeOpacity}getLineDash(){return dd(this.lineDash,this.computedLineDash,this.lineStyle,this.strokeWidth)}getLineCap(){return pd(this.lineCap,this.lineDash,this.lineStyle)}};y([LL(Uq,{optional:!0})],uS.prototype,"text",2);var Ir=class extends uS{constructor(){super(...arguments),this.type="arrow",this.endCap="arrow"}static is(t){return Lz(t)&&t.type==="arrow"}};y([LL(kz)],Ir.prototype,"type",2);var kr=class extends uS{constructor(){super(...arguments),this.type="line"}static is(t){return Lz(t)&&t.type==="line"}};y([LL(kz)],kr.prototype,"type",2);var{OBJECT:Wq,BOOLEAN:TL,COLOR_STRING:Hq,COLOR_STRING_ARRAY:Yq,Validate:Ah,predicateWithMessage:Kq,isFiniteNumber:Xq}=Gq._ModuleSupport,Zq=[10,6,4],$q=Kq(t=>Xq(t)&&Zq.includes(t),"Number of fibonacci ranges, 10, 6 or 4"),Ul=class extends uS{constructor(){super(...arguments),this.label=new V7,this.reverse=!1,this.showFill=!0,this.isMultiColor=!0,this.strokes=[],this.bands=10}getDefaultColor(t){switch(t){case"line-color":return this.rangeStroke??this.stroke;case"text-color":return this.text.color}}};y([Ah(Wq,{optional:!0})],Ul.prototype,"label",2),y([Ah(TL,{optional:!0})],Ul.prototype,"reverse",2),y([Ah(TL,{optional:!0})],Ul.prototype,"showFill",2),y([Ah(TL,{optional:!0})],Ul.prototype,"isMultiColor",2),y([Ah(Yq,{optional:!0})],Ul.prototype,"strokes",2),y([Ah(Hq,{optional:!0})],Ul.prototype,"rangeStroke",2),y([Ah($q,{optional:!0})],Ul.prototype,"bands",2);var{STRING:Qq,Validate:qq,isObject:Jq}=jq._ModuleSupport,Lr=class extends Ul{constructor(){super(...arguments),this.type="fibonacci-retracement"}static is(t){return Jq(t)&&t.type==="fibonacci-retracement"}};y([qq(Qq)],Lr.prototype,"type",2);var tJ=(P(),_(w)),{NUMBER:eJ,STRING:iJ,OBJECT:Tz,BaseProperties:sJ,Validate:dS,isObject:aJ,Logger:nJ}=tJ._ModuleSupport,Qa=class extends Sh(pL(dL(Vl(fL(rs(Mr(sJ))))))){constructor(){super(...arguments),this.type="parallel-channel",this.middle=new F7,this.text=new Tf,this.snapToAngle=45}static is(t){return aJ(t)&&t.type==="parallel-channel"}get bottom(){const t={start:{x:this.start.x,y:this.start.y},end:{x:this.end.x,y:this.end.y}};return typeof t.start.y=="number"&&typeof t.end.y=="number"?(t.start.y-=this.height,t.end.y-=this.height):nJ.warnOnce(`Annotation [${this.type}] can only be used with a numeric y-axis.`),t}isValidWithContext(t,e){return super.isValid(e)&&Of(t,this,{y:!1},e)&&Of(t,this.bottom,{y:!1},e)}getDefaultColor(t){switch(t){case"fill-color":return this.background.fill;case"line-color":return this.stroke;case"text-color":return this.text.color}}getDefaultOpacity(t){switch(t){case"fill-color":return this.background.fillOpacity;case"line-color":return this.strokeOpacity}}getLineDash(){return dd(this.lineDash,this.computedLineDash,this.lineStyle,this.strokeWidth)}getLineCap(){return pd(this.lineCap,this.lineDash,this.lineStyle)}};y([dS(iJ)],Qa.prototype,"type",2),y([dS(eJ)],Qa.prototype,"height",2),y([dS(Tz,{optional:!0})],Qa.prototype,"middle",2),y([dS(Tz,{optional:!0})],Qa.prototype,"text",2);var oJ=(P(),_(w)),{STRING:rJ,Validate:lJ,isObject:cJ}=oJ._ModuleSupport,Tr=class extends iS{constructor(){super(...arguments),this.type="text",this.position="bottom"}static is(t){return cJ(t)&&t.type==="text"}};y([lJ(rJ)],Tr.prototype,"type",2);function Wl(t){return va.is(t)}function pS(t){return kr.is(t)||ls.is(t)||ko.is(t)||Ir.is(t)||Nz(t)}function Nr(t){return $a.is(t)||Qa.is(t)}function Nz(t){return Lr.is(t)}function Lo(t){return Ln.is(t)||Io.is(t)||Ks.is(t)||Tr.is(t)}function Ef(t){return Xa.is(t)||Za.is(t)||Ar.is(t)||va.is(t)}var{isObject:hJ}=N7._ModuleSupport;function NL(t){return Lo(t)&&!Ks.is(t)}function Hl(t){return pS(t)||Nr(t)||Ef(t)&&!va.is(t)}function uJ(t){return pS(t)||Nr(t)||Ef(t)||Ln.is(t)||Ks.is(t)}function dJ(t){return Ks.is(t)}function pJ(t){return Nr(t)||Ef(t)||Ln.is(t)||Io.is(t)||AL.is(t)}function gJ(t){return Lo(t)&&!Ks.is(t)}function yd(t){return(pS(t)||Nr(t)||Ef(t))&&!Wl(t)&&hJ(t.text)}function fJ(t,e){"fontSize"in t&&(t.fontSize=e),yd(t)&&(t.text.fontSize=e)}function Cz(t,e){const i=e?.strokeWidth??t.strokeWidth??1,s=e?.type??t.lineStyle,a=s??Cf(t.lineDash,s),n=pz(i,a);t.strokeWidth=i,t.computedLineDash=n,t.lineStyle=a,t.lineCap=a==="dotted"?"round":void 0}function gS(t,e,i,s,a,n){switch(e){case"fill-color":{"fill"in t&&(t.fill=s),"fillOpacity"in t&&(t.fillOpacity=a),"background"in t&&(t.background.fill=s,t.background.fillOpacity=a);break}case"line-color":{"axisLabel"in t&&(t.axisLabel.fill=s,t.axisLabel.fillOpacity=a,t.axisLabel.stroke=s,t.axisLabel.strokeOpacity=a),"fill"in t&&"fillOpacity"in t&&dJ(t)?(t.fill=s,t.fillOpacity=a):("strokeOpacity"in t&&(t.strokeOpacity=a),"isMultiColor"in t&&"rangeStroke"in t?(t.isMultiColor=n,t.rangeStroke=s):"stroke"in t&&(t.stroke=s));break}case"text-color":{"color"in t&&(t.color=i),yd(t)&&(t.text.color=s);break}}}var{deepClone:qa}=k7._ModuleSupport,yJ=class{constructor(){this.mementoOriginatorKey="annotation-defaults",this.colors=new Map(Object.values(oL).map(t=>[t,new Map([["line-color",void 0],["fill-color",void 0],["text-color",void 0]])])),this.fontSizes=new Map([["callout",void 0],["comment",void 0],["text",void 0],["arrow",void 0],["line",void 0],["disjoint-channel",void 0],["parallel-channel",void 0],["date-range",void 0],["price-range",void 0],["date-price-range",void 0]]),this.lineStyles=new Map([["line",void 0],["horizontal-line",void 0],["vertical-line",void 0],["disjoint-channel",void 0],["parallel-channel",void 0],["arrow",void 0],["date-range",void 0],["price-range",void 0],["date-price-range",void 0]]),this.lineTextAlignments=new Map([["line",void 0],["horizontal-line",void 0],["vertical-line",void 0],["disjoint-channel",void 0],["parallel-channel",void 0],["arrow",void 0],["date-range",void 0],["price-range",void 0],["date-price-range",void 0]]),this.lineTextPositions=new Map([["line",void 0],["horizontal-line",void 0],["vertical-line",void 0],["disjoint-channel",void 0],["parallel-channel",void 0],["arrow",void 0],["date-range",void 0],["price-range",void 0],["date-price-range",void 0]]),this.fibonacciBands=new Map([["fibonacci-retracement",void 0]])}createMemento(){return{colors:qa(this.colors),fontSizes:qa(this.fontSizes),lineStyles:qa(this.lineStyles),lineTextAlignments:qa(this.lineTextAlignments),lineTextPositions:qa(this.lineTextPositions),fibonacciBands:qa(this.fibonacciBands)}}guardMemento(t){return!0}restoreMemento(t,e,i){this.colors=qa(i.colors),this.fontSizes=qa(i.fontSizes),this.lineStyles=qa(i.lineStyles),this.lineTextAlignments=qa(i.lineTextAlignments),this.lineTextPositions=qa(i.lineTextPositions),this.fibonacciBands=qa(i.fibonacciBands)}setDefaultColor(t,e,i,s,a,n){this.colors.get(t)?.set(e,[i,s,a,n])}setDefaultFontSize(t,e){this.fontSizes.set(t,e)}setDefaultLineStyleType(t,e){const i=this.lineStyles.get(t);i?i.type=e:this.lineStyles.set(t,{type:e})}setDefaultLineStyleWidth(t,e){const i=this.lineStyles.get(t);i?i.strokeWidth=e:this.lineStyles.set(t,{strokeWidth:e})}setDefaultLineTextAlignment(t,e){this.lineTextAlignments.set(t,e)}setDefaultLineTextPosition(t,e){this.lineTextPositions.set(t,e)}setDefaultFibonacciBands(t,e){t=="fibonacci-retracement"&&this.fibonacciBands.set(t,e)}applyDefaults(t){for(const[e,i]of this.colors)if(t.type===e)for(const[s,[a,n,o,r]=[]]of i)a&&n&&o!=null&&r!=null&&gS(t,s,a,n,o,r);for(const[e,i]of this.fontSizes)t.type!==e||i==null||fJ(t,i);for(const[e,i]of this.lineStyles)t.type!==e||i==null||Cz(t,i);for(const[e,i]of this.lineTextPositions)t.type!==e||i==null||(t.text.position=i);for(const[e,i]of this.lineTextAlignments)t.type!==e||i==null||(t.text.alignment=i);for(const[e,i]of this.fibonacciBands)t.type!==e||i==null||(t.bands=i)}},Oz=(P(),_(w)),Ez=(P(),_(w)),mJ='<div class="ag-charts-color-picker__palette" tabindex="0"></div><div class="ag-charts-color-picker__color-row"><button class="ag-charts-color-picker__multi-color-button" tabindex="0" type="button"></button> <input class="ag-charts-color-picker__hue-input" tabindex="0" type="range" min="0" max="360" value="0"></div><input class="ag-charts-color-picker__alpha-input" tabindex="0" type="range" min="0" max="1" value="1" step="0.01"> <label class="ag-charts-color-picker__color-field"><span class="ag-charts-color-picker__color-label">Color</span> <input class="ag-charts-color-picker__color-input" tabindex="0" value="#000"></label>',{createElement:xJ,Color:CL,clamp:fS}=Ez._ModuleSupport,wz=t=>{try{const e=CL.fromString(t),[i,s,a]=e.toHSB();return[i,s,a,e.a]}catch{return}},Rz=class extends Ez._ModuleSupport.AnchoredPopover{constructor(t,e){super(t,"color-picker",e),this.hasChanged=!1,this.hideFns.push(()=>{this.hasChanged&&this.onChangeHide?.()})}show(t){this.hasChanged=!1,this.onChangeHide=t.onChangeHide;const{element:e,initialFocus:i}=this.createColorPicker(t),s=this.showWithChildren([e],{initialFocus:i,...t});s.classList.add("ag-charts-color-picker"),s.setAttribute("role","dialog")}createColorPicker(t){let e=t.isMultiColor??!1,[i,s,a,n]=wz(t.color??"#f00")??[0,1,.5,1];n=t.opacity??n;const o=xJ("div","ag-charts-color-picker__content");o.innerHTML=mJ,o.ariaLabel=this.ctx.localeManager.t("ariaLabelColorPicker");const r=o.querySelector(".ag-charts-color-picker__palette"),l=o.querySelector(".ag-charts-color-picker__hue-input"),c=o.querySelector(".ag-charts-color-picker__multi-color-button"),h=o.querySelector(".ag-charts-color-picker__alpha-input"),u=o.querySelector(".ag-charts-color-picker__color-input"),d=o.querySelector(".ag-charts-color-picker__color-label");c.classList.toggle("ag-charts-color-picker__multi-color-button--hidden",!t.hasMultiColorOption);const p=(f=!0)=>{const m=CL.fromHSB(i,s,a,n).toHexString();if(o.style.setProperty("--h",`${i}`),o.style.setProperty("--s",`${s}`),o.style.setProperty("--v",`${a}`),o.style.setProperty("--a",`${n}`),o.style.setProperty("--color",m.slice(0,7)),o.style.setProperty("--color-a",m),l.value=`${i}`,h.value=`${n}`,h.classList.toggle("ag-charts-color-picker__alpha-input--opaque",n===1),c.classList.toggle("ag-charts-color-picker__multi-color-button--active",e),d.classList.toggle("ag-charts-color-picker__color-label--multi-color",e),document.activeElement!==u&&(u.value=e?"Multi Colour":m.toUpperCase()),f||t.color==null){const b=CL.fromHSB(i,s,a,1).toHexString();t.onChange?.(m,b,n,e)}f&&(this.hasChanged=!0)};p(!1);const g=f=>{f.preventDefault();const x=f.currentTarget;x.focus();const m=x.getBoundingClientRect(),b=({pageX:v,pageY:S})=>{e=!1,s=Math.min(Math.max((v-m.left)/m.width,0),1),a=1-Math.min(Math.max((S-m.top)/m.height,0),1),p()};b(f),window.addEventListener("mousemove",b),window.addEventListener("mouseup",()=>window.removeEventListener("mousemove",b),{once:!0})};return o.addEventListener("mousedown",f=>{f.stopPropagation()}),o.addEventListener("keydown",f=>{switch(f.stopPropagation(),f.key){case"Enter":case"Escape":this.hide();break;default:return}f.preventDefault()}),r.addEventListener("mousedown",g),r.addEventListener("keydown",f=>{if(f.key==="ArrowLeft")s=fS(0,s-.01,1);else if(f.key==="ArrowRight")s=fS(0,s+.01,1);else if(f.key==="ArrowUp")a=fS(0,a+.01,1);else if(f.key==="ArrowDown")a=fS(0,a-.01,1);else return;f.preventDefault(),p()}),c.addEventListener("click",()=>{e=!e,p()}),l.addEventListener("input",f=>{e=!1,i=f.currentTarget.valueAsNumber??0,p()}),h.addEventListener("input",f=>{e=!1,n=f.currentTarget.valueAsNumber??0,p()}),u.addEventListener("input",f=>{e=!1;const x=wz(f.currentTarget.value);x!=null&&([i,s,a,n]=x,p())}),u.addEventListener("blur",()=>p()),u.addEventListener("keydown",f=>{f.key==="Enter"&&(f.currentTarget.blur(),p())}),{element:o,initialFocus:r}}},bJ=[{label:"toolbarAnnotationsTrendLine",icon:"trend-line-drawing",value:"line"},{label:"toolbarAnnotationsHorizontalLine",icon:"horizontal-line-drawing",value:"horizontal-line"},{label:"toolbarAnnotationsVerticalLine",icon:"vertical-line-drawing",value:"vertical-line"},{label:"toolbarAnnotationsParallelChannel",icon:"parallel-channel-drawing",value:"parallel-channel"},{label:"toolbarAnnotationsDisjointChannel",icon:"disjoint-channel-drawing",value:"disjoint-channel"}],SJ=[{label:"toolbarAnnotationsFibonacciRetracement",icon:"fibonacci-retracement-drawing",value:"fibonacci-retracement"}],vJ=[{label:"Fibonacci - Extended",value:10},{label:"Fibonacci - 6 Band",value:6},{label:"Fibonacci - 4 Band",value:4}],MJ=[{label:"toolbarAnnotationsText",icon:"text-annotation",value:"text"},{label:"toolbarAnnotationsComment",icon:"comment-annotation",value:"comment"},{label:"toolbarAnnotationsCallout",icon:"callout-annotation",value:"callout"},{label:"toolbarAnnotationsNote",icon:"note-annotation",value:"note"}],DJ=[{label:"toolbarAnnotationsArrow",icon:"arrow-drawing",value:"arrow"},{label:"toolbarAnnotationsArrowUp",icon:"arrow-up-drawing",value:"arrow-up"},{label:"toolbarAnnotationsArrowDown",icon:"arrow-down-drawing",value:"arrow-down"}],AJ=[{label:"toolbarAnnotationsQuickDatePriceRange",icon:"measurer-drawing",value:"quick-date-price-range"},{label:"toolbarAnnotationsDateRange",icon:"date-range-drawing",value:"date-range"},{label:"toolbarAnnotationsPriceRange",icon:"price-range-drawing",value:"price-range"},{label:"toolbarAnnotationsDatePriceRange",icon:"date-price-range-drawing",value:"date-price-range"}],_z=[{strokeWidth:1,label:"1",value:1},{strokeWidth:2,label:"2",value:2},{strokeWidth:3,label:"3",value:3},{strokeWidth:4,label:"4",value:4},{strokeWidth:8,label:"8",value:8}],wf=[{icon:"line-style-solid",altText:"iconAltTextLineStyleSolid",value:"solid"},{icon:"line-style-dashed",altText:"iconAltTextLineStyleDashed",value:"dashed"},{icon:"line-style-dotted",altText:"iconAltTextLineStyleDotted",value:"dotted"}],Pz=[{label:"10",value:10},{label:"12",value:12},{label:"14",value:14},{label:"16",value:16},{label:"18",value:18},{label:"22",value:22},{label:"28",value:28},{label:"36",value:36},{label:"46",value:46}],{ARRAY:IJ,BOOLEAN:kJ,NUMBER:LJ,OBJECT:TJ,STRING:NJ,UNION:CJ,Color:Bz,FloatingToolbar:OJ,InteractionState:zz,Listeners:EJ,Menu:OL,PropertiesArray:wJ,ToolbarButtonProperties:Fz,ToolbarButtonWidget:RJ,Validate:Ih}=Oz._ModuleSupport,md=class extends Fz{constructor(){super(...arguments),this.checkedOverrides=new Fz}};y([Ih(CJ(["line-stroke-width","line-style-type","line-color","fill-color","text-color","text-size","delete","settings","lock"]))],md.prototype,"value",2),y([Ih(TJ,{optional:!0})],md.prototype,"checkedOverrides",2),y([Ih(NJ,{optional:!0})],md.prototype,"color",2),y([Ih(LJ,{optional:!0})],md.prototype,"strokeWidth",2),y([Ih(Boolean,{optional:!0})],md.prototype,"isMultiColor",2);var _J=class extends RJ{update(t){super.update(t),t.value==="line-stroke-width"&&this.updateLineStrokeWidth(t),(t.value==="fill-color"||t.value==="line-color"||t.value==="text-color")&&this.updateFillColor(t)}updateFillColor(t){const e=this.getElement();e.classList.add("ag-charts-annotations__color-picker-button"),e.classList.toggle("ag-charts-annotations__color-picker-button--multi-color",t.isMultiColor),e.style.setProperty("--color",t.color??null)}updateLineStrokeWidth(t){const e=this.getElement();e.classList.add("ag-charts-annotations__stroke-width-button"),e.style.setProperty("--stroke-width",`${t.strokeWidth}px`)}},PJ=class extends OJ{createButtonWidget(){return new _J(this.localeManager)}},EL=class extends Oz._ModuleSupport.BaseProperties{constructor(t,e){super(),this.ctx=t,this.getActiveDatum=e,this.enabled=!0,this.buttons=new wJ(md),this.destroyFns=[],this.events=new EJ,this.visibleButtons=[],this.toolbar=new PJ(this.ctx,"annotation-options"),this.colorPicker=new Rz(this.ctx),this.textSizeMenu=new OL(this.ctx,"text-size"),this.lineStyleTypeMenu=new OL(this.ctx,"annotations-line-style-type"),this.lineStrokeWidthMenu=new OL(this.ctx,"annotations-line-stroke-width");const i=t.regionManager.getRegion("series");this.destroyFns.push(this.toolbar.addToolbarListener("button-pressed",this.onButtonPress.bind(this)),this.toolbar.addToolbarListener("toolbar-moved",this.onToolbarMoved.bind(this)),i.addListener("drag-start",this.onDragStart.bind(this),zz.All),i.addListener("drag-end",this.onDragEnd.bind(this),zz.All),()=>this.colorPicker.destroy())}onDragStart(){this.toolbar.ignorePointerEvents()}onDragEnd(){this.toolbar.capturePointerEvents()}destroy(){for(const t of this.destroyFns)t()}addListener(t,e){return this.events.addListener(t,e)}show(){this.toolbar.show({})}hide(){this.toolbar.hide()}updateButtons(t){const e={"line-style-type":Hl(t),"line-stroke-width":Hl(t),"line-color":uJ(t),"text-color":gJ(t),"fill-color":pJ(t),"text-size":NL(t),settings:yd(t),lock:!0,delete:!0};this.visibleButtons=this.buttons.filter(i=>e[i.value]),this.toolbar.clearButtons(),this.toolbar.updateButtons(this.visibleButtons),this.refreshButtons(t)}setAnchorScene(t){this.toolbar.hasBeenDragged()||this.toolbar.setAnchor(t.getAnchor())}hideOverlays(){this.toolbar.clearActiveButton(),this.colorPicker.hide({lastFocus:null}),this.textSizeMenu.hide(),this.lineStyleTypeMenu.hide(),this.lineStrokeWidthMenu.hide(),this.dispatch("hid-overlays")}clearActiveButton(){this.toolbar.clearActiveButton()}updateColors(t){this.updateColorPickerColor("line-color",t.getDefaultColor("line-color"),t.getDefaultOpacity("line-color"),"isMultiColor"in t&&t?.isMultiColor),this.updateColorPickerColor("fill-color",t.getDefaultColor("fill-color"),t.getDefaultOpacity("fill-color"),"isMultiColor"in t&&t?.isMultiColor),this.updateColorPickerColor("text-color",t.getDefaultColor("text-color"),t.getDefaultOpacity("text-color"),"isMultiColor"in t&&t?.isMultiColor)}updateColorPickerColor(t,e,i,s){if(e!=null&&i!=null){const{r:a,g:n,b:o}=Bz.fromString(e);e=Bz.fromArray([a,n,o,i]).toHexString()}this.updateButtonByValue(t,{color:e,isMultiColor:s})}updateFontSize(t){this.updateButtonByValue("text-size",{label:t!=null?String(t):void 0})}updateLineStyleType(t){this.updateButtonByValue("line-style-type",{icon:t.icon})}updateStrokeWidth(t){this.updateButtonByValue("line-stroke-width",{label:t.label,strokeWidth:t.value})}dispatch(t,e){this.events.dispatch(t,e)}onButtonPress({event:t,button:e}){const i=this.getActiveDatum();if(i)switch(this.hideOverlays(),e.value){case"line-style-type":{const s=Hl(i)?Cf(i.lineDash,i.lineStyle):void 0;this.lineStyleTypeMenu.show({items:wf,ariaLabel:this.ctx.localeManager.t("toolbarAnnotationsLineStyle"),value:s,sourceEvent:t.sourceEvent,onPress:a=>this.onLineStyleTypeMenuPress(a,i),class:"ag-charts-annotations__line-style-type-menu"});break}case"line-stroke-width":{const s=Hl(i)?i.strokeWidth:void 0;this.lineStrokeWidthMenu.show({items:_z,ariaLabel:this.ctx.localeManager.t("toolbarAnnotationsLineStrokeWidth"),value:s,sourceEvent:t.sourceEvent,onPress:a=>this.onLineStrokeWidthMenuPress(a,i),class:"ag-charts-annotations__line-stroke-width-menu"});break}case"line-color":case"fill-color":case"text-color":{this.toolbar.toggleActiveButtonByIndex(e.index),this.colorPicker.show({color:i?.getDefaultColor(e.value),opacity:i?.getDefaultOpacity(e.value),sourceEvent:t.sourceEvent,hasMultiColorOption:"isMultiColor"in i,isMultiColor:"isMultiColor"in i&&i?.isMultiColor,onChange:i!=null?this.onColorPickerChange.bind(this,e.value,i):void 0,onChangeHide:(s=>{this.dispatch("saved-color",{type:i.type,colorPickerType:e.value,color:i.getDefaultColor(s)})}).bind(this,e.value)});break}case"text-size":{const s=Lo(i)?i.fontSize:void 0;this.textSizeMenu.show({items:Pz,ariaLabel:this.ctx.localeManager.t("toolbarAnnotationsTextSize"),value:s,sourceEvent:t.sourceEvent,onPress:a=>this.onTextSizeMenuPress(a,i),class:"ag-charts-annotations__text-size-menu"});break}case"delete":{this.dispatch("pressed-delete");break}case"lock":{i.locked=!i.locked,this.refreshButtons(i),this.dispatch("pressed-lock");break}case"settings":{this.toolbar.toggleActiveButtonByIndex(e.index),this.dispatch("pressed-settings",t);break}}}onToolbarMoved(t){const{buttonBounds:e,popoverBounds:i}=t,s={x:i.x,y:i.y+i.height+4},a={y:i.y-4};this.colorPicker.setAnchor(s,a);for(const[n,o]of e.entries()){const r=this.visibleButtons.at(n);if(!r)continue;const l={x:o.x,y:o.y+o.height-1},c={y:o.y};switch(r.value){case"line-stroke-width":this.lineStrokeWidthMenu.setAnchor(l,c);break;case"line-style-type":this.lineStyleTypeMenu.setAnchor(l,c);break;case"text-size":this.textSizeMenu.setAnchor(l,c);break}}}onColorPickerChange(t,e,i,s,a,n){this.dispatch("updated-color",{type:e.type,colorPickerType:t,colorOpacity:i,color:s,opacity:a,isMultiColor:n}),this.updateColorPickerColor(t,i,a,n)}onTextSizeMenuPress(t,e){if(!NL(e))return;const i=t.value;this.dispatch("updated-font-size",{type:e.type,fontSize:i}),this.textSizeMenu.hide(),this.updateFontSize(i)}onLineStyleTypeMenuPress(t,e){if(!Hl(e))return;const i=t.value;this.dispatch("updated-line-style",{type:e.type,lineStyleType:i}),this.lineStyleTypeMenu.hide(),this.updateLineStyleType(t)}onLineStrokeWidthMenuPress(t,e){if(!Hl(e))return;const i=t.value;this.dispatch("updated-line-width",{type:e.type,strokeWidth:i}),this.lineStrokeWidthMenu.hide(),this.updateStrokeWidth(t)}refreshButtons(t){const e=t.locked??!1;for(const[i,s]of this.visibleButtons.entries())s&&(s.value==="lock"?(this.toolbar.toggleSwitchCheckedByIndex(i,e),this.updateButtonByIndex(i,e?s.checkedOverrides.toJson():s.toJson())):this.toolbar.toggleButtonEnabledByIndex(i,!e));NL(t)&&this.updateFontSize(t.fontSize),this.updateColors(t),this.updateLineStyles(t)}updateLineStyles(t){if(!Hl(t))return;const e=t.strokeWidth??1,i=Cf(t.lineDash,t.lineStyle);this.updateStrokeWidth({strokeWidth:e,value:e,label:String(e)}),this.updateLineStyleType(wf.find(s=>s.value===i)??wf[0])}updateButtonByValue(t,e){const i=this.visibleButtons.findIndex(s=>s.value===t);i!==-1&&this.updateButtonByIndex(i,e)}updateButtonByIndex(t,e){const i=this.visibleButtons.at(t);i&&this.toolbar.updateButtonByIndex(t,{...i.toJson(),...e,value:e.value??i.value})}};y([Ih(kJ)],EL.prototype,"enabled",2),y([Ih(IJ)],EL.prototype,"buttons",2);var BJ=(P(),_(w)),{StateMachine:jz,StateMachineProperty:wL,Vec2:Gz,Debug:zJ}=BJ._ModuleSupport,Je=class extends jz{constructor(t){const e=({context:i})=>{this.node?.drag(this.datum,this.offset,i,this.snapping),t.update()};super("idle",{idle:{dragStart:{target:"dragging",action:({offset:i,context:s})=>{this.hasMoved=!1,this.dragStart=i,this.offset=i,this.node?.dragStart(this.datum,i,s)}}},dragging:{keyDown:e,keyUp:e,drag:({offset:i,context:s})=>{this.hasMoved=Gz.lengthSquared(Gz.sub(i,this.dragStart))>0,this.offset=i,this.node?.drag(this.datum,i,s,this.snapping),t.update()},dragEnd:{target:jz.parent,action:()=>{this.node?.stopDragging(),t.stopInteracting(),this.hasMoved&&t.recordAction("Move annotation"),t.update()}}}}),this.debug=zJ.create(!0,"annotations"),this.hasMoved=!1,this.snapping=!1}};y([wL()],Je.prototype,"snapping",2),y([wL()],Je.prototype,"datum",2),y([wL()],Je.prototype,"node",2);var FJ=(P(),_(w)),{STRING:jJ,Validate:GJ,isObject:VJ}=FJ._ModuleSupport,Yl=class extends AL{constructor(){super(...arguments),this.type="arrow-down"}static is(t){return VJ(t)&&t.type==="arrow-down"}};y([GJ(jJ)],Yl.prototype,"type",2);var UJ=(P(),_(w)),yS=(P(),_(w)),kh=(P(),_(w)),Vz=class I3 extends kh._ModuleSupport.Group{constructor(){super(...arguments),this.active=!1,this.locked=!1,this.visible=!1,this.zIndex=1}drag(e){const{handle:i,locked:s}=this;return s?{point:{x:i.x,y:i.y},offset:{x:0,y:0}}:{point:e,offset:{x:e.x-i.x,y:e.y-i.y}}}toggleActive(e){this.active=e,e||(this.handle.strokeWidth=I3.INACTIVE_STROKE_WIDTH)}toggleHovered(e){this.glow.visible=!this.locked&&e,this.glow.dirtyPath=!0}toggleDragging(e){this.locked||(this.handle.visible=!e,this.glow.visible=this.glow.visible&&!e,this.handle.dirtyPath=!0,this.glow.dirtyPath=!0)}toggleLocked(e){this.locked=e}getCursor(){}containsPoint(e,i){return this.handle.containsPoint(e,i)}};Vz.INACTIVE_STROKE_WIDTH=2;var Kl=Vz,RL=class k3 extends Kl{constructor(){super(),this.handle=new kh._ModuleSupport.Circle,this.glow=new kh._ModuleSupport.Circle,this.append([this.handle]),this.handle.size=k3.HANDLE_SIZE,this.handle.strokeWidth=Kl.INACTIVE_STROKE_WIDTH,this.handle.zIndex=2}update(e){this.handle.setProperties({...e,strokeWidth:Kl.INACTIVE_STROKE_WIDTH})}drag(e){return{point:e,offset:{x:0,y:0}}}};RL.HANDLE_SIZE=7,RL.GLOW_SIZE=9;var Xl=RL,mS=class aa extends Kl{constructor(){super(),this.handle=new kh._ModuleSupport.Rect,this.glow=new kh._ModuleSupport.Rect,this.gradient="horizontal",this.append([this.glow,this.handle]),this.handle.cornerRadius=aa.CORNER_RADIUS,this.handle.width=aa.HANDLE_SIZE,this.handle.height=aa.HANDLE_SIZE,this.handle.strokeWidth=Kl.INACTIVE_STROKE_WIDTH,this.handle.zIndex=2,this.glow.cornerRadius=aa.CORNER_RADIUS,this.glow.width=aa.GLOW_SIZE,this.glow.height=aa.GLOW_SIZE,this.glow.strokeWidth=0,this.glow.fillOpacity=.2,this.glow.zIndex=1,this.glow.visible=!1}toggleLocked(e){if(super.toggleLocked(e),e){const i=(aa.HANDLE_SIZE-Xl.HANDLE_SIZE)/2;this.handle.cornerRadius=1,this.handle.fill=this.handle.stroke,this.handle.strokeWidth=0,this.handle.x+=i,this.handle.y+=i,this.handle.width=Xl.HANDLE_SIZE,this.handle.height=Xl.HANDLE_SIZE,this.glow.width=Xl.GLOW_SIZE,this.glow.height=Xl.GLOW_SIZE}else this.handle.cornerRadius=aa.CORNER_RADIUS,this.handle.width=aa.HANDLE_SIZE,this.handle.height=aa.HANDLE_SIZE,this.glow.width=aa.GLOW_SIZE,this.glow.height=aa.GLOW_SIZE,this.cachedStyles&&this.handle.setProperties(this.cachedStyles)}update(e){if(this.cachedStyles={...e},this.active||delete e.strokeWidth,this.locked){delete e.fill,delete e.strokeWidth;const i=(aa.HANDLE_SIZE-Xl.HANDLE_SIZE)/2;e.x-=i,e.y-=i,this.cachedStyles.x-=i,this.cachedStyles.y-=i}this.handle.setProperties(e),this.glow.setProperties({...e,x:(e.x??this.glow.x)-2,y:(e.y??this.glow.y)-2,strokeWidth:0,fill:e.stroke})}drag(e){return this.locked?{point:e,offset:{x:0,y:0}}:this.gradient==="vertical"?{point:{x:e.x,y:this.handle.y},offset:{x:e.x-this.handle.x,y:0}}:{point:{x:this.handle.x,y:e.y},offset:{x:0,y:e.y-this.handle.y}}}getCursor(){if(!this.locked)return this.gradient==="vertical"?"col-resize":"row-resize"}};mS.HANDLE_SIZE=12,mS.GLOW_SIZE=16,mS.CORNER_RADIUS=4;var xd=mS,_L=class Oy extends Kl{constructor(){super(),this.handle=new kh._ModuleSupport.Circle,this.glow=new kh._ModuleSupport.Circle,this.append([this.glow,this.handle]),this.handle.size=Oy.HANDLE_SIZE,this.handle.strokeWidth=Kl.INACTIVE_STROKE_WIDTH,this.handle.zIndex=2,this.glow.size=Oy.GLOW_SIZE,this.glow.strokeWidth=0,this.glow.fillOpacity=.2,this.glow.zIndex=1,this.glow.visible=!1}toggleLocked(e){super.toggleLocked(e),e?(this.handle.fill=this.handle.stroke,this.handle.strokeWidth=0,this.handle.size=Xl.HANDLE_SIZE,this.glow.size=Xl.GLOW_SIZE):(this.handle.size=Oy.HANDLE_SIZE,this.glow.size=Oy.GLOW_SIZE,this.cachedStyles&&this.handle.setProperties(this.cachedStyles))}update(e){this.cachedStyles={...e},this.active||delete e.strokeWidth,this.locked&&(delete e.fill,delete e.strokeWidth),this.handle.setProperties(e),this.glow.setProperties({...e,strokeWidth:0,fill:e.stroke})}getCursor(){return"pointer"}};_L.HANDLE_SIZE=11,_L.GLOW_SIZE=17;var ti=_L,{ZIndexMap:WJ,isObject:HJ}=yS._ModuleSupport,Ri=class extends yS._ModuleSupport.Group{constructor(){super(...arguments),this.name="AnnotationScene",this.zIndex=WJ.CHART_ANNOTATION}static isCheck(t,e){return HJ(t)&&Object.hasOwn(t,"type")&&t.type===e}toggleHovered(t){this.toggleHandles(t)}*nonHandleChildren(){for(const t of this.children())t instanceof Kl||(yield t)}computeBBoxWithoutHandles(){return yS._ModuleSupport.Transformable.toCanvas(this,yS._ModuleSupport.Group.computeChildrenBBox(this.nonHandleChildren()))}updateNode(t,e,i){if(!i&&e){this.removeChild(e);return}return i&&e==null&&(e=new t,this.appendChild(e)),e}},YJ=(P(),_(w)),KJ=(P(),_(w)),{Vec2:Uz,toRadians:XJ}=KJ._ModuleSupport;function PL(t,e,i=!1,s,a=1){if(!i)return Ie(t,e);const n=s?pi(s,e):Uz.origin();return Ie(xS(t,n,a),e)}function xS({x:t,y:e},i,s,a=1){const{x:n,y:o}=i,r=Math.sqrt(Math.pow(t-n,2)+Math.pow(e-o,2)),l=Math.atan2(e-o,t-n),c=XJ(s),h=Math.round(l/c)*c;return{x:n+r*Math.cos(h),y:o+r*Math.sin(h)*a}}function BL(t,e){const i={};return Object.entries(t).forEach(([s,a])=>{i[s]=pi(a,e)}),i}function Wz(t,e,i){const s=[],a={};Object.entries(t).forEach(([h,u])=>{const d=Uz.add(u,e);s.push(d);const p=Ie(d,i);a[h]=p});const{xAxis:n,yAxis:o}=i,r=(h,u,d)=>u>=h&&u<=d,l=s.every(h=>r(n.bounds.x,h.x,n.bounds.x+n.bounds.width)),c=s.every(h=>r(o.bounds.y,h.y,o.bounds.y+o.bounds.height));return{vectors:a,translateX:l,translateY:c}}var{Vec2:zL}=YJ._ModuleSupport,Hz=class extends Ri{constructor(){super(...arguments),this.handle=new ti,this.anchor={x:0,y:0,position:"above"}}update(t,e){const i=pi(t,e);this.updateHandle(t,i),this.anchor=this.updateAnchor(t,i,e)}dragStart(t,e,i){this.dragState={offset:e,...BL({handle:t},i)}}drag(t,e,i){const{dragState:s}=this;if(t.locked||!s)return;const a=zL.add(s.handle,zL.sub(e,s.offset)),n=Ie(a,i);Tn(i,n)&&(t.x=n.x,t.y=n.y)}translate(t,e,i){const s=zL.add(pi(t,i),e),a=Ie(s,i);Tn(i,a)&&(t.x=a.x,t.y=a.y)}toggleHandles(t){this.handle.visible=!!t,this.handle.toggleHovered(this.activeHandle==="handle")}toggleActive(t){this.toggleHandles(t),this.handle.toggleActive(t)}stopDragging(){this.handle.toggleDragging(!1)}copy(t,e,i){const s=pi(t,i),a=Ie({x:s.x-30,y:s.y-30},i);return e.x=a.x,e.y=a.y,e}getAnchor(){return this.anchor}getCursor(){return"pointer"}containsPoint(t,e){const{handle:i}=this;return this.activeHandle=void 0,i.containsPoint(t,e)?(this.activeHandle="handle",!0):!1}getNodeAtCoords(t,e){if(this.handle.containsPoint(t,e))return"handle"}updateHandle(t,e,i){const{x:s,y:a}=this.getHandleCoords(t,e,i),n=this.getHandleStyles(t);this.handle.update({...n,x:s,y:a}),this.handle.toggleLocked(t.locked??!1)}updateAnchor(t,e,i){const s=this.getHandleCoords(t,e);return{x:s.x+i.seriesRect.x,y:s.y+i.seriesRect.y,position:this.anchor.position}}getHandleCoords(t,e,i){return{x:e.x,y:e.y}}getHandleStyles(t){return{fill:t.handle.fill,stroke:t.handle.stroke,strokeOpacity:t.handle.strokeOpacity,strokeWidth:t.handle.strokeWidth}}},Yz=class extends Hz{constructor(){super(),this.append([this.handle])}update(t,e){super.update(t,e);const i=pi(t,e);this.updateShape(t,i)}updateShape(t,e){this.updateShapeStyles(t),this.updateShapePath(t,e)}updateShapeStyles(t){const{shape:e}=this;e.fill=t.fill,e.fillOpacity=t.fillOpacity??1}updateShapePath(t,e){const{shape:i}=this;i.x=e.x,i.y=e.y,i.size=t.size}containsPoint(t,e){return super.containsPoint(t,e)||this.shape.containsPoint(t,e)}getNodeAtCoords(t,e){return this.shape.containsPoint(t,e)?"shape":super.getNodeAtCoords(t,e)}},bS=class extends Yz{constructor(){super(),this.type="arrow-down",this.shape=new UJ._ModuleSupport.ArrowDown,this.append([this.shape])}static is(t){return Ri.isCheck(t,"arrow-down")}updateAnchor(t,e,i){const s=super.updateAnchor(t,e,i);return s.y-=t.size,s}getHandleCoords(t,e){const i=ti.HANDLE_SIZE/2,s=super.getHandleCoords(t,e);return s.y+=i,s}},ZJ=(P(),_(w)),{StateMachine:SS,StateMachineProperty:$J,Debug:QJ}=ZJ._ModuleSupport,FL=class extends SS{constructor(t){const e=({point:s})=>{const a=this.createDatum();a.set({x:s.x,y:s.y}),t.create(a)},i=()=>{this.node?.toggleActive(!0),t.showAnnotationOptions(),t.update()};super("start",{start:{click:{target:"waiting-first-render",action:e},drag:{target:"waiting-first-render",action:e},cancel:SS.parent,reset:SS.parent},"waiting-first-render":{render:{target:SS.parent,action:i}}}),this.debug=QJ.create(!0,"annotations")}};y([$J()],FL.prototype,"node",2);var qJ=class extends FL{createDatum(){return new Yl}},Kz={type:"arrow-down",datum:Yl,scene:bS,isDatum:Yl.is,translate:(t,e,i,s)=>{Yl.is(e)&&bS.is(t)&&t.translate(e,i,s)},copy:(t,e,i,s)=>{if(Yl.is(e)&&Yl.is(i)&&bS.is(t))return t.copy(e,i,s)},update:(t,e,i)=>{Yl.is(e)&&bS.is(t)&&t.update(e,i)},createState:(t,{createDatum:e})=>new qJ({...t,create:e("arrow-down")}),dragState:t=>new Je(t)},JJ=(P(),_(w)),{STRING:ttt,Validate:ett,isObject:itt}=JJ._ModuleSupport,Zl=class extends AL{constructor(){super(...arguments),this.type="arrow-up"}static is(t){return itt(t)&&t.type==="arrow-up"}};y([ett(ttt)],Zl.prototype,"type",2);var stt=(P(),_(w)),vS=class extends Yz{constructor(){super(),this.type="arrow-up",this.shape=new stt._ModuleSupport.ArrowUp,this.append([this.shape])}static is(t){return Ri.isCheck(t,"arrow-up")}getHandleCoords(t,e){const i=ti.HANDLE_SIZE/2,s=super.getHandleCoords(t,e);return s.y-=i,s}},att=class extends FL{createDatum(){return new Zl}},Xz={type:"arrow-up",datum:Zl,scene:vS,isDatum:Zl.is,translate:(t,e,i,s)=>{Zl.is(e)&&vS.is(t)&&t.translate(e,i,s)},copy:(t,e,i,s)=>{if(Zl.is(e)&&Zl.is(i)&&vS.is(t))return t.copy(e,i,s)},update:(t,e,i)=>{Zl.is(e)&&vS.is(t)&&t.update(e,i)},createState:(t,{createDatum:e})=>new att({...t,create:e("arrow-up")}),dragState:t=>new Je(t)},ntt=(P(),_(w)),Zz=(P(),_(w)),ott=(P(),_(w)),rtt=(P(),_(w)),{Vec2:ltt,Vec4:$z}=rtt._ModuleSupport,Qz=class extends Ri{extendLine({x1:t,y1:e,x2:i,y2:s},a,n){const o={x1:t,y1:e,x2:i,y2:s};if(!a.extendStart&&!a.extendEnd)return o;const[r,l]=hq(o,n.yAxis.bounds),c=o.x2<o.x1,h=o.y1>=o.y2,u=o.x2===o.x1;return a.extendEnd&&(u?o.y2=h?l.y:r.y:(o.x2=c?r.x:l.x,o.y2=c?r.y:l.y)),a.extendStart&&(u?o.y1=h?r.y:l.y:(o.x1=c?l.x:r.x,o.y1=c?l.y:r.y)),o}dragStart(t,e,i){this.dragState={offset:e,...BL({start:t.start,end:t.end},i)}}drag(t,e,i,s){t.locked||(this.activeHandle?this.dragHandle(t,e,i,s):this.dragAll(t,e,i))}dragAll(t,e,i){const{dragState:s}=this;s&&this.translatePoints(t,s.start,s.end,ltt.sub(e,s.offset),i)}translatePoints(t,e,i,s,a){const{vectors:n,translateX:o,translateY:r}=Wz({start:e,end:i},s,a);o&&(t.start.x=n.start?.x,t.end.x=n.end?.x),(this.ignoreYBounds||r)&&(t.start.y=n.start?.y,t.end.y=n.end?.y)}translate(t,e,i){this.translatePoints(t,pi(t.start,i),pi(t.end,i),e,i)}copy(t,e,i){const s=Dr(t,i);if(!s)return;const a=this.computeBBoxWithoutHandles(),n={x:-a.width/2,y:-a.height/2};return this.translatePoints(e,$z.start(s),$z.end(s),n,i),e}},{Vec4:qz}=ott._ModuleSupport,jL=class extends Qz{constructor(){super(...arguments),this.start=new ti,this.end=new ti,this.anchor={x:0,y:0,position:"above"}}update(t,e){const i=Dr(t,e);i!=null&&(this.updateHandles(t,i),this.updateAnchor(t,i,e))}toggleHandles(t){if(typeof t=="boolean")this.start.visible=t,this.end.visible=t;else for(const[e,i]of Object.entries(t))this[e].visible=i;this.start.toggleHovered(this.activeHandle==="start"),this.end.toggleHovered(this.activeHandle==="end")}toggleActive(t){this.toggleHandles(t),this.start.toggleActive(t),this.end.toggleActive(t)}dragHandle(t,e,i,s){const{activeHandle:a,dragState:n}=this;if(!a||!n)return;this[a].toggleDragging(!0);const o=s?this.snapToAngle(t,e,i):Ie(this[a].drag(e).point,i);!o||!Tn(i,o)||(t[a].x=o.x,t[a].y=o.y)}snapToAngle(t,e,i){const{activeHandle:s}=this,n=["start","end"].find(r=>r!==s);if(!s||!n)return;this[s].toggleDragging(!0);const o=pi(t[n],i);return Ie(xS(e,o,t.snapToAngle),i)}stopDragging(){this.start.toggleDragging(!1),this.end.toggleDragging(!1)}getAnchor(){return this.anchor}getCursor(){return"pointer"}containsPoint(t,e){const{start:i,end:s}=this;return this.activeHandle=void 0,i.containsPoint(t,e)?(this.activeHandle="start",!0):s.containsPoint(t,e)?(this.activeHandle="end",!0):!1}getNodeAtCoords(t,e){if(this.start.containsPoint(t,e)||this.end.containsPoint(t,e))return"handle"}updateHandles(t,e,i){this.start.update({...this.getHandleStyles(t,"start"),...this.getHandleCoords(t,e,"start")}),this.end.update({...this.getHandleStyles(t,"end"),...this.getHandleCoords(t,e,"end",i)}),this.start.toggleLocked(t.locked??!1),this.end.toggleLocked(t.locked??!1)}updateAnchor(t,e,i,s){this.anchor={x:e.x1+i.seriesRect.x,y:e.y1+i.seriesRect.y,position:this.anchor.position}}getHandleCoords(t,e,i,s){return i==="start"?qz.start(e):qz.end(e)}getHandleStyles(t,e){return{fill:t.handle.fill,stroke:t.handle.stroke,strokeOpacity:t.handle.strokeOpacity,strokeWidth:t.handle.strokeWidth}}},{Vec2:Jz,Vec4:tF}=Zz._ModuleSupport,ctt=class extends jL{constructor(){super(...arguments),this.label=new Zz._ModuleSupport.Text({zIndex:1}),this.anchor={x:0,y:0,position:"above-left"}}setTextInputBBox(t){this.textInputBBox=t,this.markDirty()}update(t,e){const i=Dr(t,e);if(i==null)return;const s=this.getTextBBox(t,i);this.updateLabel(t,s,i),this.updateHandles(t,i,s),this.updateShape(t,s,i),this.updateAnchor(t,i,e,s)}dragHandle(t,e,i,s){const{activeHandle:a,dragState:n}=this;if(!a||!n)return;this[a].toggleDragging(!0);const o=Jz.add(n.end,Jz.sub(e,n.offset)),r=s?this.snapToAngle(t,o,i):Ie(o,i);!r||!Tn(i,r)||(t[a].x=r.x,t[a].y=r.y)}containsPoint(t,e){const{label:i}=this;return super.containsPoint(t,e)||i.containsPoint(t,e)}getNodeAtCoords(t,e){return this.label.containsPoint(t,e)?"text":super.getNodeAtCoords(t,e)}getTextBBox(t,e){const{text:i}=t.getText();return DL(t,i,tF.end(e),this.textInputBBox)}updateLabel(t,e,i){const{text:s,isPlaceholder:a}=t.getText();fz(this.label,s,a,t,this.getLabelCoords(t,e,i))}updateShape(t,e,i){}getLabelCoords(t,e,i){return tF.end(i)}getHandleStyles(t,e){return{...super.getHandleStyles(t,e),stroke:t.handle.stroke??t.color}}},{drawCorner:htt,Path:utt}=ntt._ModuleSupport,MS=class extends ctt{constructor(){super(),this.type="callout",this.shape=new utt,this.append([this.shape,this.label,this.start,this.end])}static is(t){return Ri.isCheck(t,"callout")}drag(t,e,i,s){t.locked||(this.activeHandle==="end"?this.dragHandle(t,e,i,s):this.dragAll(t,e,i))}getLabelCoords(t,e,i){const s=t.getPadding(),{bodyBounds:a={x:0,y:0,width:0,height:0}}=this.getDimensions(t,e,i)??{};return{x:a.x+s.left,y:a.y-s.bottom}}getHandleStyles(t,e){return e==="start"?{fill:t.handle.fill,stroke:t.handle.stroke??t.stroke,strokeOpacity:t.handle.strokeOpacity,strokeWidth:t.handle.strokeWidth}:{fill:void 0,strokeWidth:0}}updateAnchor(t,e,i,s){const{bodyBounds:a}=this.getDimensions(t,s,e)??{},n=a??s;this.anchor={x:n.x+i.seriesRect.x,y:n.y+i.seriesRect.y-n.height,position:this.anchor.position}}updateShape(t,e,i){const{shape:s}=this;s.fill=t.fill,s.fillOpacity=t.fillOpacity??1,s.stroke=t.stroke,s.strokeWidth=t.strokeWidth??1,s.strokeOpacity=t.strokeOpacity??1;const{tailPoint:a,bodyBounds:n}=this.getDimensions(t,e,i)??{};!a||!n||this.updatePath(a,n)}updatePath(t,e){const{x:i,y:s}=t,{x:a,y:n,width:o,height:r}=e,l=n-r,c=a+o,h=this.calculateCalloutPlacement({x:i,y:s},e),u=8,d=[{coordinates:{x0:a,x1:a+u,y0:l+u,y1:l,cx:h==="topLeft"?i:a+u,cy:h==="topLeft"?s:l+u},type:h==="topLeft"?"calloutCorner":"corner"},{coordinates:{x0:a+u,x1:c-u,y0:l,y1:l,cx:i,cy:s},type:h==="top"?"calloutSide":"side"},{coordinates:{x0:c-u,x1:c,y0:l,y1:l+u,cx:h==="topRight"?i:c-u,cy:h==="topRight"?s:l+u},type:h==="topRight"?"calloutCorner":"corner"},{coordinates:{x0:c,x1:c,y0:l+u,y1:n-u,cx:i,cy:s},type:h==="right"?"calloutSide":"side"},{coordinates:{x0:c,x1:c-u,y0:n-u,y1:n,cx:h==="bottomRight"?i:c-u,cy:h==="bottomRight"?s:n-u},type:h==="bottomRight"?"calloutCorner":"corner"},{coordinates:{x0:c-u,x1:a+u,y0:n,y1:n,cx:i,cy:s},type:h==="bottom"?"calloutSide":"side"},{coordinates:{x0:a+u,x1:a,y0:n,y1:n-u,cx:h==="bottomLeft"?i:a+u,cy:h==="bottomLeft"?s:n-u},type:h==="bottomLeft"?"calloutCorner":"corner"},{coordinates:{x0:a,x1:a,y0:n-u,y1:l+u,cx:i,cy:s},type:h==="left"?"calloutSide":"side"}],{path:p}=this.shape;p.clear(),p.moveTo(a,l+u),d.forEach(({coordinates:g,type:f})=>{this.drawPath(p,g,u,f)}),p.closePath()}drawPath(t,{x0:e,y0:i,x1:s,y1:a,cx:n,cy:o},r,l){switch(l){case"calloutCorner":{t.lineTo(n,o),t.lineTo(s,a);break}case"corner":{htt(t,{x0:e,x1:s,y0:i,y1:a,cx:n,cy:o},r,!1);break}case"calloutSide":{if(e!==s){const h=e>s?-1:1,u=Math.min(e,s)+Math.abs(s-e)/2;t.lineTo(u-6*h,i),t.lineTo(n,o),t.lineTo(u+6*h,i),t.lineTo(s,a)}else{const h=i>a?-1:1,u=Math.min(i,a)+Math.abs(i-a)/2;t.lineTo(e,u-6*h),t.lineTo(n,o),t.lineTo(e,u+6*h),t.lineTo(s,a)}break}case"side":default:{t.lineTo(s,a);break}}}calculateCalloutPlacement(t,e){const i=e.x+e.width,s=e.y-e.height;let a,n;return t.x>i?a="right":t.x<e.x&&(a="left"),t.y>e.y?n="bottom":t.y<s&&(n="top"),a&&n?`${n}${a[0].toUpperCase()}${a.substring(1)}`:n??a}getDimensions(t,e,i){const{fontSize:s}=t,a=t.getPadding(),n=a.left+a.right,o=a.top+a.bottom,r=e.width+n,l=Math.max(e.height+o,s+o);return{tailPoint:{x:i.x1,y:i.y1},bodyBounds:{x:e.x,y:e.y,width:r,height:l}}}containsPoint(t,e){const{start:i,end:s,shape:a}=this;if(this.activeHandle=void 0,i.containsPoint(t,e))return this.activeHandle="start",!0;const n=s.containsPoint(t,e)||a.containsPoint(t,e);return n&&(this.activeHandle="end"),n}},dtt=(P(),_(w));function GL({key:t}){return t==="Escape"}function VL({key:t,shiftKey:e}){return!e&&t==="Enter"}var{StateMachine:Nn,StateMachineProperty:eF,Debug:ptt}=dtt._ModuleSupport,UL=class extends Nn{constructor(t){const e=({point:d})=>{const p=this.createDatum();p.set({start:d,end:d,visible:!0}),t.create(p)},i=()=>{const{node:d}=this;d?.toggleActive(!0),d?.toggleHandles({start:!0})},s=()=>{t.showTextInput(),this.datum&&(this.datum.visible=!1)},a=()=>{t.hideTextInput(),this.datum&&(this.datum.visible=!0),t.deselect()},n=d=>{this.node?.setTextInputBBox(d),t.update()},o=({point:d})=>{const{datum:p,node:g}=this;p?.set({end:d}),g?.toggleActive(!0),g?.toggleHandles({end:!1}),t.update()},r=()=>{t.showAnnotationOptions(),this.node?.toggleHandles({end:!0})},l=({colorPickerType:d,colorOpacity:p,color:g,opacity:f,isMultiColor:x})=>{const{datum:m}=this;m&&(d==="text-color"&&t.updateTextInputColor(g),gS(m,d,p,g,f,x),t.update())},c=d=>{const{datum:p,node:g}=this;!p||!g||!Lo(p)||(p.fontSize=d,t.updateTextInputFontSize(d),t.update())},h=()=>{t.delete()},u=({textInputValue:d,bbox:p})=>{const{datum:g}=this;if(p!=null&&d!=null&&d.length>0){if(!Lo(g))return;const f=lS(g,d,p.width);g?.set({text:f}),t.update(),t.recordAction(`Create ${g?.type} annotation`)}else t.delete()};super("start",{start:{click:{target:"waiting-first-render",action:e},dragStart:{target:"waiting-first-render",action:e},cancel:Nn.parent,reset:Nn.parent},"waiting-first-render":{render:{target:"end",action:i}},end:{hover:o,drag:o,click:{target:"edit",action:r},dragEnd:{target:"edit",action:r},reset:{target:Nn.parent,action:h},cancel:{target:Nn.parent,action:h}},edit:{onEnter:s,updateTextInputBBox:n,color:l,fontSize:c,textInput:[{guard:GL,target:Nn.parent,action:h},{guard:VL,target:Nn.parent,action:u}],click:{target:Nn.parent,action:u},dragStart:{target:Nn.parent,action:u},resize:{target:Nn.parent,action:u},onExit:a,cancel:{target:Nn.parent,action:h}}}),this.debug=ptt.create(!0,"annotations")}};y([eF()],UL.prototype,"datum",2),y([eF()],UL.prototype,"node",2);var gtt=class extends UL{createDatum(){return new Ln}},iF={type:"callout",datum:Ln,scene:MS,isDatum:Ln.is,translate:(t,e,i,s)=>{if(Ln.is(e)&&MS.is(t))return t.translate(e,i,s)},copy:(t,e,i,s)=>{if(Ln.is(e)&&Ln.is(i)&&MS.is(t))return t.copy(e,i,s)},update:(t,e,i)=>{Ln.is(e)&&MS.is(t)&&t.update(e,i)},createState:(t,{createDatum:e})=>new gtt({...t,create:e("callout")}),dragState:t=>new Je(t)},sF=(P(),_(w)),ftt=(P(),_(w)),WL=class extends Hz{constructor(){super(...arguments),this.label=new ftt._ModuleSupport.Text({zIndex:1}),this.anchor={x:0,y:0,position:"above-left"}}setTextInputBBox(t){this.textInputBBox=t,this.markDirty()}update(t,e){const i=pi(t,e),s=this.getTextBBox(t,i,e);this.updateLabel(t,s),this.updateHandle(t,i,s),this.updateShape(t,s),this.anchor=this.updateAnchor(t,s,e)}copy(t,e,i){const s=pi(t,i),a=this.getTextBBox(t,s,i),n=t.getPadding(),o=n.left+n.right,r=n.top+n.bottom,l=(a.width+o)/2,c=a.height+r,h=Ie({x:s.x-l,y:s.y-c},i);return e.x=h.x,e.y=h.y,e}containsPoint(t,e){const{label:i}=this;return super.containsPoint(t,e)||i.visible&&i.containsPoint(t,e)}getNodeAtCoords(t,e){return this.label.visible&&this.label.containsPoint(t,e)?"text":super.getNodeAtCoords(t,e)}getTextBBox(t,e,i){const{text:s}=t.getText();return DL(t,s,{x:e.x,y:e.y},this.textInputBBox)}updateLabel(t,e){const{text:i,isPlaceholder:s}=t.getText();fz(this.label,i,s,t,this.getLabelCoords(t,e))}updateShape(t,e){}updateAnchor(t,e,i){return{x:e.x+i.seriesRect.x,y:e.y+i.seriesRect.y-e.height,position:this.anchor.position}}getLabelCoords(t,e){return e}getHandleCoords(t,e,i){return i}getHandleStyles(t){const e=super.getHandleStyles(t);return e.stroke=t.handle.stroke??t.color,e}},{drawCorner:HL}=sF._ModuleSupport,DS=class extends WL{constructor(){super(),this.type="comment",this.shape=new sF._ModuleSupport.Path,this.append([this.shape,this.label,this.handle])}static is(t){return Ri.isCheck(t,"comment")}updateShape(t,e){const{shape:i}=this;i.fill=t.fill,i.fillOpacity=t.fillOpacity??1,i.stroke=t.stroke??"transparent",i.strokeWidth=t.strokeWidth??1,i.strokeOpacity=t.strokeOpacity??1,this.updatePath(t,e)}getLabelCoords(t,e){const i=t.getPadding();return{x:e.x+i.left,y:e.y-i.bottom}}getHandleStyles(t){return{fill:t.handle.fill,stroke:t.handle.stroke??t.stroke??t.fill,strokeOpacity:t.handle.strokeOpacity,strokeWidth:t.handle.strokeWidth}}updateAnchor(t,e,i){const s=super.updateAnchor(t,e,i),a=t.getPadding();return s.y-=a.bottom+a.top,s}updatePath(t,e){const i=t.getPadding(),{x:s,y:a}=e;let{width:n,height:o}=e;const{fontSize:r}=t,l=i.left+i.right,c=i.top+i.bottom;n=n+l,o=Math.max(o+c,r+c);const h=a-o,u=s+n,d=(r*rS+c)/2,{path:p}=this.shape;p.clear(),p.moveTo(s,a),p.lineTo(s,h+d),HL(p,{x0:s,x1:s+d,y0:h+d,y1:h,cx:s+d,cy:h+d},d,!1),p.lineTo(u-d,h),HL(p,{x0:u-d,x1:u,y0:h,y1:h+d,cx:u-d,cy:h+d},d,!1),p.lineTo(u,a-d),HL(p,{x0:u,x1:u-d,y0:a-d,y1:a,cx:u-d,cy:a-d},d,!1),p.closePath()}containsPoint(t,e){return super.containsPoint(t,e)||this.shape.containsPoint(t,e)}},ytt=(P(),_(w)),{StateMachine:Cr,StateMachineProperty:aF,Debug:mtt}=ytt._ModuleSupport,Rf=class extends Cr{constructor(t){const e=({point:h})=>{const u=this.createDatum();u.set({x:h.x,y:h.y}),t.create(u)},i=()=>{this.node?.toggleActive(!0),t.showAnnotationOptions(),t.update()},s=()=>{t.showTextInput(),this.datum&&(this.datum.visible=!1)},a=()=>{t.hideTextInput(),this.datum&&(this.datum.visible=!0),t.deselect()},n=h=>{this.node?.setTextInputBBox(h),t.update()},o=({colorPickerType:h,colorOpacity:u,color:d,opacity:p,isMultiColor:g})=>{this.datum&&(h==="text-color"&&t.updateTextInputColor(d),gS(this.datum,h,u,d,p,g),t.update())},r=h=>{const{datum:u,node:d}=this;!u||!d||!Lo(u)||(u.fontSize=h,t.updateTextInputFontSize(h),t.update())},l=()=>{t.delete()},c=({textInputValue:h,bbox:u})=>{if(u!=null&&h!=null&&h.length>0){const{datum:d}=this;if(!Lo(d))return;const p=lS(d,h,u.width);d?.set({text:p}),t.update(),t.recordAction(`Create ${d?.type} annotation`)}else t.delete()};super("start",{start:{click:{target:"waiting-first-render",action:e},dragStart:{target:"waiting-first-render",action:e},cancel:Cr.parent,reset:Cr.parent},"waiting-first-render":{render:{target:"edit",action:i}},edit:{onEnter:s,updateTextInputBBox:n,color:o,fontSize:r,textInput:[{guard:GL,target:Cr.parent,action:l},{guard:VL,target:Cr.parent,action:c}],click:{target:Cr.parent,action:c},dragStart:{target:Cr.parent,action:c},resize:{target:Cr.parent,action:c},onExit:a,cancel:{target:Cr.parent,action:l}}}),this.debug=mtt.create(!0,"annotations")}};y([aF()],Rf.prototype,"datum",2),y([aF()],Rf.prototype,"node",2);var xtt=class extends Rf{createDatum(){return new Io}},nF={type:"comment",datum:Io,scene:DS,isDatum:Io.is,translate:(t,e,i,s)=>{Io.is(e)&&DS.is(t)&&t.translate(e,i,s)},copy:(t,e,i,s)=>{if(Io.is(e)&&Io.is(i)&&DS.is(t))return t.copy(e,i,s)},update:(t,e,i)=>{Io.is(e)&&DS.is(t)&&t.update(e,i)},createState:(t,{createDatum:e})=>new xtt({...t,create:e("comment")}),dragState:t=>new Je(t)},btt=(P(),_(w)),AS=(P(),_(w)),{calculateLabelTranslation:Stt,ChartAxisDirection:vtt}=AS._ModuleSupport,oF=class extends AS._ModuleSupport.Group{constructor(){super({name:"AnnotationAxisLabelGroup"}),this.label=new AS._ModuleSupport.Text({zIndex:1}),this.rect=new AS._ModuleSupport.Rect;const{label:t}=this;t.fontSize=12,t.fontFamily="Verdana, sans-serif",t.fill="black",t.textBaseline="middle",t.textAlign="center",this.append([this.rect,this.label])}update(t){this.updateLabel(t),this.updateRect(t),this.updatePosition(t)}updateLabel({value:t,styles:e,context:i}){const{fontWeight:s,fontSize:a,fontStyle:n,fontFamily:o,textAlign:r,color:l="white",formatter:c=i.scaleValueFormatter()}=e;this.label.setProperties({fontWeight:s,fontSize:a,fontStyle:n,fontFamily:o,textAlign:r,fill:l,text:c(t)})}updateRect({styles:t}){const{rect:e}=this,{cornerRadius:i,fill:s,fillOpacity:a,stroke:n,strokeOpacity:o}=t;e.setProperties({cornerRadius:i,fill:s,fillOpacity:a,stroke:n,strokeOpacity:o})}updatePosition({x:t,y:e,context:i,styles:{padding:s}}){const{label:a,rect:n}=this,o=a.getBBox()?.clone(),r=s??8,l=s??5;o.grow(r,"horizontal"),o.grow(l,"vertical");const c=i.direction===vtt.X?l/2:r,{xTranslation:h,yTranslation:u}=Stt({yDirection:!0,padding:i.labelPadding-c,position:i.position??"left",bbox:o}),d=t+h,p=e+u;a.x=d,a.y=p,n.x=d-o.width/2,n.y=p-o.height/2,n.height=o.height,n.width=o.width}};oF.className="AxisLabel";var IS=(P(),_(w)),{Vec2:To}=IS._ModuleSupport,Ma=class extends IS._ModuleSupport.Line{constructor(){super(...arguments),this.growCollisionBox=9,this.clipMask=new Map}setProperties(t,e){return super.setProperties(t,e),this.updateCollisionBBox(),this}updateCollisionBBox(){const{growCollisionBox:t,strokeWidth:e,x1:i,y1:s,x2:a,y2:n}=this;let o=e+t;o%2===0&&(o+=1);const r=To.from(i,s-Math.floor(o/2)),l=To.from(a,n),c=To.distance(r,l);this.collisionBBox=new IS._ModuleSupport.BBox(r.x,r.y,c,o)}isPointInPath(t,e){const{collisionBBox:i,x1:s,y1:a,x2:n,y2:o}=this;if(!i)return!1;const r=To.from(s,a),l=To.from(n,o),c=To.sub(To.from(t,e),r),h=To.sub(l,r),u=To.rotate(c,To.angle(c,h),r);return i.containsPoint(u.x,u.y)??!1}render(t){this.applyClipMask(t.ctx),super.render(t),this.closeClipMask(t.ctx)}setClipMask(t,e){const i=this.clipMask.get(t);IS._ModuleSupport.jsonDiff(i,e)!=null&&this.markDirty(),e?this.clipMask.set(t,e):this.clipMask.delete(t)}applyClipMask(t){const{clipMask:e}=this;e.size!==0&&this.clipMask.forEach(i=>{const{x:s,y:a,radius:n}=i;t.save(),t.beginPath(),t.rect(0,0,t.canvas.width,t.canvas.height),t.ellipse(s,a,n,n,0,Math.PI*2,0,!0),t.clip()})}closeClipMask(t){this.clipMask.size!==0&&t.restore()}},Mtt=(P(),_(w)),Lh=class extends Mtt._ModuleSupport.TransformableText{constructor(){super(...arguments),this.growCollisionBox={top:4,right:4,bottom:4,left:4}}isPointInPath(t,e){const i=this.fromParentPoint(t,e),s=this.computeBBoxWithoutTransforms();return s?s.grow(this.growCollisionBox).containsPoint(i.x,i.y):!1}},Dtt=(P(),_(w)),{Vec2:cs}=Dtt._ModuleSupport;function bd(t,e,i,s,a,n,o){const{alignment:r,position:l}=i;if(!n||!a){e.setClipMask(t);return}const c=lF(s,i.fontSize,o),{point:h,textBaseline:u}=cF(c,l,r);hF(a,n,i,h,c.angle,u);const{x:d,y:p,width:g,height:f}=a.getBBox(),x=cs.length(cs.from(g,f)),m={x:d+g/2,y:p+f/2,radius:x/2+cs.length(c.offset)};return l==="center"?e.setClipMask(t,m):e.setClipMask(t),{clipMask:m,numbers:c}}function rF(t,e,i,s,a,n,o){if(!o||!n)return;const{alignment:r,position:l}=s,[c,h]=e.y1<=i.y1?[e,i]:[i,e];let u=c;l==="bottom"?u=h:l==="inside"&&(u={x1:(c.x1+h.x1)/2,y1:(c.y1+h.y1)/2,x2:(c.x2+h.x2)/2,y2:(c.y2+h.y2)/2});const d=lF(u,s.fontSize,a),{point:p,textBaseline:g}=cF(d,l==="inside"?"center":l,r,t);hF(n,o,s,p,d.angle,g)}function lF(t,e,i){let[s,a]=cs.from(t);s.x>a.x&&([s,a]=[a,s]);const n=cs.normalized(cs.sub(a,s)),o=cs.angle(n),r=cs.multiply(n,ti.HANDLE_SIZE/2+(e??14)/2),l=cs.multiply(n,(i??2)/2+(e??14)/3);return{left:s,right:a,normal:n,angle:o,inset:r,offset:l}}function cF({left:t,right:e,normal:i,angle:s,inset:a,offset:n},o,r,l){let c;r==="right"?c=cs.sub(e,a):r==="center"?c=cs.add(t,cs.multiply(i,cs.distance(t,e)/2)):c=cs.add(t,a);let h="bottom";return o==="bottom"?(c=cs.rotate(n,s+Math.PI/2,c),h="top"):o==="center"&&!l?h="middle":c=cs.rotate(n,s-Math.PI/2,c),{point:c,textBaseline:h}}function hF(t,e,i,s,a,n){t.setProperties({text:e,x:s.x,y:s.y,rotation:a,rotationCenterX:s.x,rotationCenterY:s.y,fill:i.color,fontFamily:i.fontFamily,fontSize:i.fontSize,fontStyle:i.fontStyle,fontWeight:i.fontWeight,textAlign:i.alignment,textBaseline:n})}var{ChartAxisDirection:Att,Vec2:Sd,Vec4:YL}=btt._ModuleSupport,$l=class extends Ri{constructor(){super(),this.type="cross-line",this.line=new Ma,this.middle=new xd,this.isHorizontal=!1,this.append([this.line,this.middle])}static is(t){return Ri.isCheck(t,"cross-line")}update(t,e){const{seriesRect:i}=e;this.seriesRect=i,this.isHorizontal=ls.is(t);const s=this.isHorizontal?e.yAxis:e.xAxis,a=this.convertCrossLine(t,s);if(a==null){this.visible=!1;return}this.visible=t.visible??!0,this.visible&&(this.updateLine(t,a),this.updateHandle(t,a),this.updateText(t,a),this.updateAxisLabel(t,s,a))}updateLine(t,e){const{line:i}=this,{lineDashOffset:s,stroke:a,strokeWidth:n,strokeOpacity:o}=t,{x1:r,y1:l,x2:c,y2:h}=e;i.setProperties({x1:r,y1:l,x2:c,y2:h,lineCap:t.getLineCap(),lineDash:t.getLineDash(),lineDashOffset:s,stroke:a,strokeWidth:n,strokeOpacity:o,fillOpacity:0})}updateHandle(t,e){const{middle:i}=this,{locked:s,stroke:a,strokeWidth:n,strokeOpacity:o}=t,r={fill:t.handle.fill,stroke:t.handle.stroke??a,strokeOpacity:t.handle.strokeOpacity??o,strokeWidth:t.handle.strokeWidth??n},l=Sd.sub(YL.center(e),Sd.from(i.handle.width/2,i.handle.height/2));i.gradient=this.isHorizontal?"horizontal":"vertical",i.update({...r,...l}),i.toggleLocked(s??!1)}updateText(t,e){this.text=this.updateNode(Lh,this.text,!!t.text.label),bd(this.line.id,this.line,t.text,e,this.text,t.text.label,t.strokeWidth)}createAxisLabel(t){const e=new oF;return t.attachLabel(e),e}updateAxisLabel(t,e,i){this.axisLabel||(this.axisLabel=this.createAxisLabel(e));const{axisLabel:s,seriesRect:a}=this,{direction:n,position:o}=e;if(t.axisLabel.enabled){s.visible=this.visible;const r=o==="left"||o==="top"?YL.start(i):YL.end(i),l=n===Att.X?r.x:r.y;if(!e.inRange(l)){s.visible=!1;return}s.update({...Sd.add(r,Sd.required(a)),value:t.value,styles:t.axisLabel,context:e})}else s.visible=!1}toggleHandles(t){this.middle.visible=t,this.middle.toggleHovered(this.activeHandle==="middle")}destroy(){super.destroy(),this.axisLabel?.destroy()}toggleActive(t){this.toggleHandles(t),this.middle.toggleActive(t)}dragStart(t,e,i){const s=ls.is(t)?{x:e.x,y:Mh(t.value,i.yAxis)}:{x:Mh(t.value,i.xAxis),y:e.y};this.dragState={offset:e,middle:s}}drag(t,e,i){const{activeHandle:s,dragState:a}=this;if(t.locked)return;let n;if(s)this[s].toggleDragging(!0),n=this[s].drag(e).point;else if(a)n=Sd.add(a.middle,Sd.sub(e,a.offset));else return;const o=Ie(n,i),r=ls.is(t);t.set({value:r?o.y:o.x})}translate(t,{x:e,y:i},s){if(t.locked)return;const{axisContext:a,translation:n}=ls.is(t)?{axisContext:s.yAxis,translation:i}:{axisContext:s.xAxis,translation:e},o=Mh(t.value,a)+n,r=Nf(o,a);isNaN(r)||t.set({value:r})}stopDragging(){this.middle.toggleDragging(!1)}copy(t,e,i){const s=ls.is(t),a=this.isHorizontal?i.yAxis:i.xAxis,n=this.convertCrossLine(t,a);if(!n)return;const o=s?-30:0,r=s?0:-30,l=Ie({x:n.x1+r,y:n.y1+o},i);return e.set({value:s?l.y:l.x}),e}getCursor(){return this.activeHandle==null?"pointer":this[this.activeHandle].getCursor()}containsPoint(t,e){const{middle:i,line:s,text:a}=this;return this.activeHandle=void 0,i.containsPoint(t,e)?(this.activeHandle="middle",!0):s.isPointInPath(t,e)||!!a?.containsPoint(t,e)}getNodeAtCoords(t,e){if(this.text?.containsPoint(t,e))return"text";if(this.line.isPointInPath(t,e))return"line";if(this.middle.containsPoint(t,e))return"handle"}getAnchor(){const t=this.computeBBoxWithoutHandles();return this.isHorizontal?{x:t.x+t.width/2,y:t.y}:{x:t.x+t.width,y:t.y+t.height/2,position:"right"}}convertCrossLine(t,e){if(t.value==null)return;let i=0,s=0,a=0,n=0;const{bounds:o,scale:r}=e,l=(r.bandwidth??0)/2,c=r.convert(t.value)+l;return ls.is(t)?(s=o.width,a=c,n=c):(i=c,s=c,n=o.height),{x1:i,y1:a,x2:s,y2:n}}},Itt=(P(),_(w)),{StateMachine:kS,StateMachineProperty:ktt,Debug:Ltt}=Itt._ModuleSupport,KL=class extends kS{constructor(t,e){const i=({point:a})=>{const n=t==="horizontal",o=n?new ls:new ko;o.set({value:n?a.y:a.x}),e.create(o),e.recordAction(`Create ${n?"horizontal-line":"vertical-line"} annotation`)},s=()=>{this.node?.toggleActive(!0),e.showAnnotationOptions(),e.update()};super("start",{start:{click:{target:"waiting-first-render",action:i},drag:{target:"waiting-first-render",action:i},reset:kS.parent,cancel:kS.parent},"waiting-first-render":{render:{target:kS.parent,action:s}}}),this.debug=Ltt.create(!0,"annotations")}};y([ktt()],KL.prototype,"node",2);var uF={type:"horizontal-line",datum:ls,scene:$l,isDatum:ls.is,translate:(t,e,i,s)=>{ls.is(e)&&$l.is(t)&&t.translate(e,i,s)},copy:(t,e,i,s)=>{if(ls.is(e)&&ls.is(i)&&$l.is(t))return t.copy(e,i,s)},update:(t,e,i)=>{ls.is(e)&&$l.is(t)&&t.update(e,i)},createState:(t,{createDatum:e})=>new KL("horizontal",{...t,create:e("horizontal-line")}),dragState:t=>new Je(t)},dF={type:"vertical-line",datum:ko,scene:$l,isDatum:ko.is,translate:(t,e,i,s)=>{ko.is(e)&&$l.is(t)&&t.translate(e,i,s)},copy:(t,e,i,s)=>{if(ko.is(e)&&ko.is(i)&&$l.is(t))return t.copy(e,i,s)},update:(t,e,i)=>{ko.is(e)&&$l.is(t)&&t.update(e,i)},createState:(t,{createDatum:e})=>new KL("vertical",{...t,create:e("vertical-line")}),dragState:t=>new Je(t)},Ttt=(P(),_(w)),pF=(P(),_(w)),Ntt=(P(),_(w)),{Vec4:Ctt}=Ntt._ModuleSupport,gF=class{static updateBackground(t,e,i,s){const{background:a}=this,{seriesRect:n}=s;a.path.clear(!0);const o=Ctt.from(0,0,n.width,n.height),r=this.getBackgroundPoints(t,e,i,o);for(let c=0;c<r.length;c++){const h=r[c];c===0?a.path.moveTo(h.x,h.y):a.path.lineTo(h.x,h.y)}a.path.closePath(),a.checkPathDirty();const l=this.getBackgroundStyles?.(t)??t.background;a.setProperties({fill:l.fill,fillOpacity:l.fillOpacity})}},fF=class extends Qz{constructor(){super(...arguments),this.handles={},this.topLine=new Ma,this.bottomLine=new Ma,this.background=new pF._ModuleSupport.Path({zIndex:-1}),this.anchor={x:0,y:0},this.updateBackground=gF.updateBackground.bind(this)}update(t,e){const{locked:i,visible:s}=t,a=Dr(t,e),n=Dr(t.bottom,e);if(a==null||n==null){this.visible=!1;return}else this.visible=s??!0;const o=this.extendLine(a,t,e),r=this.extendLine(n,t,e);this.updateLines(t,o,r,e,a,n),this.updateHandles(t,a,n),this.updateText(t,a,n),this.updateBackground(t,o,r,e),this.updateAnchor(a,n);for(const l of Object.values(this.handles))l.toggleLocked(i??!1)}snapToAngle(t,e,i,s,a,n){const{handles:o}=this,r=o[s].handle,l=o[i].drag(t).point;return Ie(xS(l,r,a,n),e)}toggleHandles(t){const{handles:e}=this;if(typeof t=="boolean"){for(const[i,s]of Object.entries(e))s.visible=t,s.toggleHovered(this.activeHandle===i);return}for(const[i,s]of Object.entries(t)){const a=e[i];a.visible=s??!0,a.toggleHovered(this.activeHandle===i)}}toggleActive(t){this.toggleHandles(t);for(const e of Object.values(this.handles))e.toggleActive(t)}stopDragging(){const{activeHandle:t,handles:e}=this;t!=null&&e[t].toggleDragging(!1)}getAnchor(){return this.anchor}getCursor(){return this.activeHandle==null?"pointer":this.handles[this.activeHandle].getCursor()}containsPoint(t,e){const{handles:i,topLine:s,bottomLine:a,text:n}=this;this.activeHandle=void 0;for(const[o,r]of Object.entries(i))if(r.containsPoint(t,e))return this.activeHandle=o,!0;return s.containsPoint(t,e)||a.containsPoint(t,e)||!!n?.containsPoint(t,e)}getNodeAtCoords(t,e){if(this.text?.containsPoint(t,e))return"text";if(this.topLine.containsPoint(t,e)||this.bottomLine.containsPoint(t,e))return"line";for(const[i,s]of Object.entries(this.handles))if(s.containsPoint(t,e))return"handle"}updateAnchor(t,e){const{x:i,y:s}=pF._ModuleSupport.Transformable.toCanvasPoint(this.topLine,(t.x1+t.x2)/2,Math.min(t.y1,t.y2,e.y1,e.y2));this.anchor.x=i,this.anchor.y=s}},{Vec2:Ql,Vec4:LS}=Ttt._ModuleSupport,TS=class extends fF{constructor(){super(),this.type="disjoint-channel",this.ignoreYBounds=!0,this.handles={topLeft:new ti,topRight:new ti,bottomLeft:new ti,bottomRight:new xd},this.append([this.background,this.topLine,this.bottomLine,...Object.values(this.handles)])}static is(t){return Ri.isCheck(t,"disjoint-channel")}dragHandle(t,e,i,s){const{activeHandle:a,handles:n}=this;if(a==null)return;const{offset:o}=n[a].drag(e);n[a].toggleDragging(!0);const r=h=>Ie(h,i),l=t.toJson(),c=t.snapToAngle;switch(a){case"topLeft":case"bottomLeft":{const h=a==="topLeft"?1:-1,u=s?this.snapToAngle(e,i,"topLeft","topRight",c,h):r({x:n.topLeft.handle.x+o.x,y:n.topLeft.handle.y+o.y*h}),d=s?this.snapToAngle(e,i,"bottomLeft","bottomRight",c,-h):r({x:n.bottomLeft.handle.x+o.x,y:n.bottomLeft.handle.y+o.y*-h});if(u?.y==null||d?.y==null||t.start.y==null)return;const p=t.startHeight+(u.y-t.start.y)*2;t.start.x=u.x,t.start.y=u.y,t.startHeight=p;break}case"topRight":{const h=s?this.snapToAngle(e,i,"topRight","topLeft",c):r({x:n.topRight.handle.x+o.x,y:n.topRight.handle.y+o.y});if(h?.y==null||t.end.y==null)return;const u=t.endHeight+(h.y-t.end.y)*2;t.end.x=h.x,t.end.y=h.y,t.endHeight=u;break}case"bottomRight":{const h=r({x:n.bottomLeft.handle.x+o.x,y:n.bottomLeft.handle.y+o.y}),u=r({x:n.bottomRight.handle.x+o.x,y:n.bottomRight.handle.y+o.y});if(!h||!u||t.start.y==null||t.end.y==null)return;const d=t.end.y-u.y,p=t.startHeight-(t.endHeight-d);t.startHeight=p,t.endHeight=d}}t.isValidWithContext(i)||t.set(l)}updateLines(t,e,i){const{topLine:s,bottomLine:a}=this,{lineDashOffset:n,stroke:o,strokeOpacity:r,strokeWidth:l}=t,c={lineCap:t.getLineCap(),lineDash:t.getLineDash(),lineDashOffset:n,stroke:o,strokeOpacity:r,strokeWidth:l};s.setProperties({...e,...c}),a.setProperties({...i,...c})}updateHandles(t,e,i){const{handles:{topLeft:s,topRight:a,bottomLeft:n,bottomRight:o}}=this,r={fill:t.handle.fill,stroke:t.handle.stroke??t.stroke,strokeOpacity:t.handle.strokeOpacity??t.strokeOpacity,strokeWidth:t.handle.strokeWidth??t.strokeWidth};s.update({...r,...LS.start(e)}),a.update({...r,...LS.end(e)}),n.update({...r,...LS.start(i)}),o.update({...r,...Ql.sub(LS.end(i),Ql.from(o.handle.width/2,o.handle.height/2))})}updateText(t,e,i){this.text=this.updateNode(Lh,this.text,!!t.text.label),rF(!1,e,i,t.text,t.strokeWidth,this.text,t.text.label)}getBackgroundPoints(t,e,i,s){const a=e.x1>e.x2,n=e.y1>e.y2,o=n?s.y2:s.y1,r=n?s.y1:s.y2,l=Ql.from(e);return t.extendEnd&&e.y2===r&&l.push(Ql.from(a?s.x1:s.x2,n?s.y1:s.y2)),t.extendEnd&&i.y2===o&&l.push(Ql.from(a?s.x1:s.x2,n?s.y2:s.y1)),l.push(...Ql.from(i).reverse()),t.extendStart&&i.y1===r&&l.push(Ql.from(a?s.x2:s.x1,n?s.y1:s.y2)),t.extendStart&&e.y1===o&&l.push(Ql.from(a?s.x2:s.x1,n?s.y2:s.y1)),l}},Ott=(P(),_(w)),{StateMachine:ql,StateMachineProperty:XL,Debug:Ett}=Ott._ModuleSupport,NS=class extends ql{constructor(t){const e=({point:l})=>{const c=new $a;c.set({start:l,end:l,startHeight:0,endHeight:0}),t.create(c)},i=()=>{const{node:l}=this;l?.toggleActive(!0),l?.toggleHandles({topLeft:!0,topRight:!1,bottomLeft:!1,bottomRight:!1})},s=({offset:l,context:c})=>{const{datum:h,snapping:u}=this;h&&(h.set({end:PL(l,c,u,h.start,h.snapToAngle)}),t.update())},a=()=>{this.node?.toggleHandles({topRight:!0}),t.update()},n=({point:l})=>{const{datum:c,node:h}=this;if(c?.start.y==null||c?.end.y==null)return;const u=c.end.y-(l.y??0),d=(c.start.y-c.end.y)*2+u,p={x:c.start.x,y:c.start.y-d},g={x:c.end.x,y:l.y};h?.toggleHandles({bottomLeft:!0,bottomRight:!0}),!(!t.validatePoint(p)||!t.validatePoint(g))&&(c.set({startHeight:d,endHeight:u}),t.update())},o=({point:l})=>{const{datum:c,node:h}=this;if(c?.start.y==null||c?.end.y==null)return;const u=c.end.y-(l.y??0),d=(c.start.y-c.end.y)*2+u,p={x:c.start.x,y:c.start.y-u},g={x:c.end.x,y:l.y};h?.toggleHandles(!0),!(!t.validatePoint(p)||!t.validatePoint(g))&&(c.set({startHeight:d,endHeight:u}),t.recordAction("Create disjoint-channel annotation"),t.showAnnotationOptions(),t.update())},r=()=>t.delete();super("start",{start:{click:{target:"waiting-first-render",action:e},drag:{target:"waiting-first-render",action:e},reset:ql.parent},"waiting-first-render":{render:{target:"end",action:i}},end:{hover:s,drag:s,click:{target:"height",action:a},dragEnd:{target:"height",action:a},reset:{target:ql.parent,action:r},cancel:{target:ql.parent,action:r}},height:{hover:n,click:{target:ql.parent,action:o},drag:{target:ql.parent,action:o},reset:{target:ql.parent,action:r},cancel:{target:ql.parent,action:r}}}),this.debug=Ett.create(!0,"annotations"),this.snapping=!1}};y([XL()],NS.prototype,"datum",2),y([XL()],NS.prototype,"node",2),y([XL()],NS.prototype,"snapping",2);var yF={type:"disjoint-channel",datum:$a,scene:TS,isDatum:$a.is,translate:(t,e,i,s)=>{$a.is(e)&&TS.is(t)&&t.translate(e,i,s)},copy:(t,e,i,s)=>{if($a.is(e)&&$a.is(i)&&TS.is(t))return t.copy(e,i,s)},update:(t,e,i)=>{$a.is(e)&&TS.is(t)&&t.update(e,i)},createState:(t,{createDatum:e})=>new NS({...t,create:e("disjoint-channel")}),dragState:t=>new Je(t)},wtt=(P(),_(w)),Or=(P(),_(w)),ZL=[0,23.6,38.2,50,61.8,78.6,100],Rtt=[161.8,261.8,361.8,423.6],_tt=[...ZL,...Rtt],Ptt={10:_tt,6:ZL,4:ZL.filter(t=>t!==78.6&&t!==23.6)},Btt=10;function ztt({x1:t,y1:e,x2:i,y2:s},a,n,o=10){const r=s-e,l=n?1:-1,c=n?e:s;let h=c;const u=[];return Ptt[o].forEach((d,p)=>{const g=c+r*(d/100)*l,f=a.yAxis.scaleInvert(g);u.push({id:p,x1:t,x2:i,y1:h,y2:g,tag:d==100?0:1,label:{x1:Math.min(t,i)-Btt,x2:i,y1:g,y2:g,text:`${(d/100).toFixed(3)} (${f.toFixed(2)})`}}),h=g}),u}var{Vec2:Ftt,Vec4:mF}=Or._ModuleSupport,jtt=class extends Ri{constructor(){super(),this.trendLine=new Ma,this.rangeFillsGroup=new Or._ModuleSupport.Group({name:`${this.id}-range-fills`}),this.rangeFillsGroupSelection=Or._ModuleSupport.Selection.select(this.rangeFillsGroup,Or._ModuleSupport.Range),this.rangeStrokesGroup=new Or._ModuleSupport.Group({name:`${this.id}-range-strokes`}),this.rangeStrokesGroupSelection=Or._ModuleSupport.Selection.select(this.rangeStrokesGroup,Ma),this.labelsGroup=new Or._ModuleSupport.Group({name:`${this.id}-ranges-labels`}),this.labelsGroupSelection=Or._ModuleSupport.Selection.select(this.labelsGroup,Lh),this.anchor={x:0,y:0,position:"above"},this.append([this.trendLine,this.rangeFillsGroup,this.rangeStrokesGroup,this.labelsGroup])}update(t,e){let i=Dr(t,e);if(i==null){this.visible=!1;return}if(i=mF.round(i),this.visible=t.visible??!0,!this.visible)return;this.updateTrendLine(t,i),this.updateHandles(t,i),this.updateAnchor(t,i,e);const{reverse:s}=t,a=this.extendLine(i,t,e);this.updateRanges(t,a,e);const n=s?i.y2:i.y1,o={...a,y1:n,y2:n};this.updateText(t,o)}extendLine({x1:t,y1:e,x2:i,y2:s},a,n){const o={x1:t,y1:e,x2:i,y2:s};if(!a.extendStart&&!a.extendEnd)return o;const{x:r,width:l}=n.xAxis.bounds;return a.extendEnd&&(o[t>i?"x1":"x2"]=r+l),a.extendStart&&(o[t>i?"x2":"x1"]=r),o}updateTrendLine(t,e){const{trendLine:i}=this,{lineDashOffset:s,strokeWidth:a,strokeOpacity:n,stroke:o}=t;i.setProperties({...e,lineCap:t.getLineCap(),lineDash:[3,4],lineDashOffset:s,strokeWidth:a,strokeOpacity:n,fillOpacity:0,stroke:o})}updateRangeStrokes(t){const{lineDashOffset:e,strokeWidth:i,strokeOpacity:s,strokes:a,rangeStroke:n,isMultiColor:o}=t;this.rangeStrokesGroupSelection.each((r,{x1:l,x2:c,y2:h,tag:u},d)=>{const p=h,g=o?a[d%a.length]:n;r.setProperties({x1:l,x2:c,y1:p,y2:p,stroke:g,strokeOpacity:s,strokeWidth:i,lineCap:t.getLineCap(),lineDash:t.getLineDash(),lineDashOffset:e,tag:u})})}updateRanges(t,e,i){const s=ztt(e,i,t.reverse,t.bands),a=n=>n.id;this.rangeFillsGroupSelection.update(s,void 0,a),this.rangeStrokesGroupSelection.update(s,void 0,a),this.labelsGroupSelection.update(s,void 0,a),this.updateRangeFills(t),this.updateRangeStrokes(t),this.updateRangeLabels(t,i)}updateRangeFills(t){const{lineDashOffset:e,strokeWidth:i,strokeOpacity:s,strokes:a,rangeStroke:n,showFill:o,isMultiColor:r}=t;this.rangeFillsGroupSelection.each((l,{x1:c,x2:h,y1:u,y2:d},p)=>{const g=r?a[p%a.length]:n;if(!o){l.visible=!1;return}l.setProperties({x1:c,x2:h,y1:u,y2:d,startLine:!1,endLine:!1,isRange:!0,stroke:g,strokeOpacity:s,fill:g,fillOpacity:(s??1)*.15,strokeWidth:i,lineCap:t.getLineCap(),lineDash:t.getLineDash(),lineDashOffset:e,visible:!0})})}updateRangeLabels(t,{xAxis:e}){const{rangeStrokesGroupSelection:i}=this,{strokes:s,strokeWidth:a,rangeStroke:n,isMultiColor:o,label:{color:r,fontFamily:l,fontSize:c,fontStyle:h,fontWeight:u}}=t;this.labelsGroupSelection.each((d,p,g)=>{const f=r??(o?s[g%s.length]:n),x=i.at(g);if(!x)return;const{text:m,...b}=p.label,v={label:m,position:"center",alignment:"left",color:f,fontFamily:l,fontSize:c,fontStyle:h,fontWeight:u};bd(d.id,x,v,b,d),d.setProperties({text:m,x:b.x1,y:b.y1,textBaseline:"middle",textAlign:"end",fill:f,fontFamily:l,fontSize:c,fontStyle:h,fontWeight:u});const{x:S}=d.getBBox();S>=e.bounds.x&&S<=e.bounds.x+e.bounds.width||bd(d.id,x,v,b,d,m,a)})}updateText(t,e){const i=this.rangeStrokesGroupSelection.selectByTag(0)[0],{text:s,strokeWidth:a}=t;this.text=this.updateNode(Lh,this.text,!!s.label),bd(i.id,i,s,e,this.text,s.label,a)}updateAnchor(t,e,i,s){const a=mF.topCenter(e);Ftt.apply(this.anchor,Or._ModuleSupport.Transformable.toCanvasPoint(this.trendLine,a.x,a.y))}containsPoint(t,e){const{trendLine:i,rangeStrokesGroupSelection:s,text:a}=this;let n=!1;return s.each(o=>n||(n=o.isPointInPath(t,e))),n||i.isPointInPath(t,e)||!!a?.containsPoint(t,e)}getNodeAtCoords(t,e){if(this.text?.containsPoint(t,e))return"text";if(this.trendLine.isPointInPath(t,e))return"line"}getHandleStyles(t){return{fill:t.handle.fill,stroke:t.handle.stroke??t.stroke,strokeOpacity:t.handle.strokeOpacity??t.strokeOpacity,strokeWidth:t.handle.strokeWidth??t.strokeWidth}}drag(t,e,i,s){t.locked||(this.activeHandle?this.dragHandle(t,e,i,s):this.dragAll(t,e,i))}getAnchor(){return this.anchor}getCursor(){return"pointer"}},{Vec2:Gtt,Vec4:xF}=wtt._ModuleSupport,CS=class extends jtt{constructor(){super(),this.type="fibonacci-retracement",this.start=new ti,this.end=new ti,this.append([this.start,this.end])}static is(t){return Ri.isCheck(t,"fibonacci-retracement")}containsPoint(t,e){const{start:i,end:s}=this;return this.activeHandle=void 0,i.containsPoint(t,e)?(this.activeHandle="start",!0):s.containsPoint(t,e)?(this.activeHandle="end",!0):super.containsPoint(t,e)}getNodeAtCoords(t,e){return this.start.containsPoint(t,e)||this.end.containsPoint(t,e)?"handle":super.getNodeAtCoords(t,e)}dragStart(t,e,i){this.dragState={offset:e,...BL({start:t.start,end:t.end},i)}}stopDragging(){this.start.toggleDragging(!1),this.end.toggleDragging(!1)}dragAll(t,e,i){const{dragState:s}=this;s&&this.translatePoints({datum:t,start:s.start,end:s.end,translation:Gtt.sub(e,s.offset),context:i})}dragHandle(t,e,i,s){const{activeHandle:a,dragState:n}=this;if(!a||!n)return;this[a].toggleDragging(!0);const o=s?this.snapToAngle(t,e,i):Ie(this[a].drag(e).point,i);!o||!Tn(i,o)||(t[a].x=o.x,t[a].y=o.y)}snapToAngle(t,e,i){const{activeHandle:s}=this,n=["start","end"].find(r=>r!==s);if(!s||!n)return;this[s].toggleDragging(!0);const o=pi(t[n],i);return Ie(xS(e,o,t.snapToAngle),i)}translatePoints({datum:t,start:e,end:i,translation:s,context:a}){const{vectors:n,translateX:o,translateY:r}=Wz({start:e,end:i},s,a);o&&(t.start.x=n.start?.x,t.end.x=n.end?.x),(this.ignoreYBounds||r)&&(t.start.y=n.start?.y,t.end.y=n.end?.y)}translate(t,e,i){this.translatePoints({datum:t,start:pi(t.start,i),end:pi(t.end,i),translation:e,context:i})}copy(t,e,i){const s=Dr(t,i);if(!s)return;const a=this.computeBBoxWithoutHandles();return this.translatePoints({datum:e,start:{x:s.x1,y:s.y1},end:{x:s.x2,y:s.y2},translation:{x:-a.width/2,y:-a.height/2},context:i}),e}toggleHandles(t){if(typeof t=="boolean")this.start.visible=t,this.end.visible=t;else for(const[e,i]of Object.entries(t))this[e].visible=i;this.start.toggleHovered(this.activeHandle==="start"),this.end.toggleHovered(this.activeHandle==="end")}toggleActive(t){this.toggleHandles(t),this.start.toggleActive(t),this.end.toggleActive(t)}updateHandles(t,e,i){this.start.update({...this.getHandleStyles(t),...this.getHandleCoords(t,e,"start")}),this.end.update({...this.getHandleStyles(t),...this.getHandleCoords(t,e,"end",i)}),this.start.toggleLocked(t.locked??!1),this.end.toggleLocked(t.locked??!1)}getHandleCoords(t,e,i,s){return i==="start"?xF.start(e):xF.end(e)}},Vtt=(P(),_(w)),{StateMachine:vd,StateMachineProperty:$L,Debug:Utt}=Vtt._ModuleSupport,Md=class extends vd{constructor(t){const e=({point:r})=>{const l=this.createDatum();l.set({start:r,end:r}),t.create(l)},i=()=>{const{node:r}=this;r?.toggleActive(!0),r?.toggleHandles({start:!0,end:!1})},s=({offset:r,context:l})=>{const{datum:c,snapping:h}=this;c&&(c.set({end:PL(r,l,h,c.start,c.snapToAngle)}),t.update())},a=()=>{this.node?.toggleHandles({end:!0}),t.update()},n=()=>t.delete(),o=()=>{t.showAnnotationOptions(),t.recordAction(`Create ${this.datum?.type} annotation`)};super("start",{start:{click:{target:"waiting-first-render",action:e},drag:{target:"waiting-first-render",action:e},reset:vd.parent},"waiting-first-render":{render:{target:"end",action:i}},end:{hover:s,click:{target:vd.parent,action:a},drag:s,dragEnd:{target:vd.parent,action:a},reset:{target:vd.parent,action:n},cancel:{target:vd.parent,action:n},onExit:o}}),this.debug=Utt.create(!0,"annotations"),this.snapping=!1}};y([$L()],Md.prototype,"datum",2),y([$L()],Md.prototype,"node",2),y([$L()],Md.prototype,"snapping",2);var Wtt=class extends Md{createDatum(){return new Ir}},Htt=class extends Md{createDatum(){return new kr}},Ytt=class extends Md{createDatum(){return new Lr}},bF={type:"fibonacci-retracement",datum:Lr,scene:CS,isDatum:Lr.is,translate:(t,e,i,s)=>{Lr.is(e)&&CS.is(t)&&t.translate(e,i,s)},copy:(t,e,i,s)=>{if(Lr.is(e)&&Lr.is(i)&&CS.is(t))return t.copy(e,i,s)},update:(t,e,i)=>{Lr.is(e)&&CS.is(t)&&t.update(e,i)},createState:(t,{createDatum:e})=>new Ytt({...t,create:e("fibonacci-retracement")}),dragState:t=>new Je(t)},SF=(P(),_(w)),QL=(P(),_(w)),{Vec2:_f}=QL._ModuleSupport,Ktt=class extends QL._ModuleSupport.Group{},OS=class extends Ktt{constructor(){super(),this.type="arrow",this.path=new QL._ModuleSupport.Path,this.armLength=6,this.append([this.path])}update(t){const{path:e}=this,{x:i,y:s,angle:a,...n}=t,o=_f.from(i,s),r=3*Math.PI/4,l=this.armLength+(t.strokeWidth??0)*2,c=_f.rotate(_f.from(0,l),a+r,o),h=_f.rotate(_f.from(l,0),a-r,o);e.setProperties(n),e.fillOpacity=0,e.path.clear(),e.path.moveTo(c.x,c.y),e.path.lineTo(o.x,o.y),e.path.lineTo(h.x,h.y)}},{Vec2:Cn,Vec4:vF}=SF._ModuleSupport,Jl=class extends jL{constructor(){super(),this.type="line",this.line=new Ma,this.append([this.line,this.start,this.end])}static is(t){return Ri.isCheck(t,"line")}update(t,e){let i=Dr(t,e);if(i==null){this.visible=!1;return}i=vF.round(i),this.visible=t.visible??!0,this.visible&&(this.updateLine(t,i,e),this.updateHandles(t,i),this.updateText(t,i),this.updateCaps(t,i),this.updateAnchor(t,i,e))}updateLine(t,e,i){const{line:s}=this,{lineDashOffset:a,stroke:n,strokeWidth:o,strokeOpacity:r}=t,l=this.extendLine(e,t,i);s.setProperties({...l,lineCap:t.getLineCap(),lineDash:t.getLineDash(),lineDashOffset:a,stroke:n,strokeWidth:o,strokeOpacity:r,fillOpacity:0})}updateText(t,e){this.text=this.updateNode(Lh,this.text,!!t.text.label),bd(this.line.id,this.line,t.text,e,this.text,t.text.label,t.strokeWidth)}updateCaps(t,e){if(!t.startCap&&this.startCap&&(this.removeChild(this.startCap),this.startCap=void 0),!t.endCap&&this.endCap&&(this.removeChild(this.endCap),this.endCap=void 0),!t.startCap&&!t.endCap)return;const{stroke:i,strokeWidth:s,strokeOpacity:a}=t,[n,o]=Cn.from(e),r=Cn.angle(Cn.sub(o,n));t.startCap&&(this.startCap&&this.startCap.type!==t.startCap&&(this.removeChild(this.startCap),this.startCap=void 0),this.startCap==null&&(this.startCap=new OS,this.append([this.startCap])),this.startCap.update({x:n.x,y:n.y,angle:r-Math.PI,stroke:i,strokeWidth:s,strokeOpacity:a})),t.endCap&&(this.endCap&&this.endCap.type!==t.endCap&&(this.removeChild(this.endCap),this.endCap=void 0),this.endCap==null&&(this.endCap=new OS,this.append([this.endCap])),this.endCap.update({x:o.x,y:o.y,angle:r,stroke:i,strokeWidth:s,strokeOpacity:a}))}updateAnchor(t,e,i,s){const a=vF.topCenter(e);Cn.apply(this.anchor,SF._ModuleSupport.Transformable.toCanvasPoint(this.line,a.x,a.y))}containsPoint(t,e){const{line:i,text:s}=this;return super.containsPoint(t,e)||i.isPointInPath(t,e)||!!s?.containsPoint(t,e)}getNodeAtCoords(t,e){return this.text?.containsPoint(t,e)?"text":this.line.isPointInPath(t,e)?"line":super.getNodeAtCoords(t,e)}getHandleCoords(t,e,i,s){const{startCap:a,endCap:n}=this;let[o,r]=Cn.from(e);const l=Cn.angle(Cn.sub(r,o));return a&&(o=Cn.rotate(Cn.from(0,-ti.HANDLE_SIZE/2),l,o)),n&&(r=Cn.rotate(Cn.from(0,ti.HANDLE_SIZE/2),l,r)),i==="start"?o:r}getHandleStyles(t){return{fill:t.handle.fill,stroke:t.handle.stroke??t.stroke,strokeOpacity:t.handle.strokeOpacity??t.strokeOpacity,strokeWidth:t.handle.strokeWidth??t.strokeWidth}}},MF={type:"line",datum:kr,scene:Jl,isDatum:kr.is,translate:(t,e,i,s)=>{kr.is(e)&&Jl.is(t)&&t.translate(e,i,s)},copy:(t,e,i,s)=>{if(kr.is(e)&&kr.is(i)&&Jl.is(t))return t.copy(e,i,s)},update:(t,e,i)=>{kr.is(e)&&Jl.is(t)&&t.update(e,i)},createState:(t,{createDatum:e})=>new Htt({...t,create:e("line")}),dragState:t=>new Je(t)},DF={type:"arrow",datum:Ir,scene:Jl,isDatum:Ir.is,translate:(t,e,i,s)=>{Ir.is(e)&&Jl.is(t)&&t.translate(e,i,s)},copy:(t,e,i,s)=>{if(Ir.is(e)&&Ir.is(i)&&Jl.is(t))return t.copy(e,i,s)},update:(t,e,i)=>{Ir.is(e)&&Jl.is(t)&&t.update(e,i)},createState:(t,{createDatum:e})=>new Wtt({...t,create:e("arrow")}),dragState:t=>new Je(t)},qL=(P(),_(w)),Ja=(P(),_(w)),AF=(P(),_(w));function IF(t,e=0,i=0){let s=e;for(const a of t)if(Array.isArray(a)){for(const n of a)kF(n,s);s+=AF._ModuleSupport.Group.computeChildrenBBox(a).width+i}else kF(a,s),s+=a.getBBox().width+i}function Xtt(t,e=0,i=0){let s=e;for(const a of t)if(Array.isArray(a)){for(const n of a)LF(n,s);s+=AF._ModuleSupport.Group.computeChildrenBBox(a).height+i}else LF(a,s),s+=a.getBBox().height+i}function kF(t,e){"x1"in t?(t.x2=e+(t.x2-t.x1),t.x1=e):t.x=e}function LF(t,e){"y1"in t?(t.y2=e+(t.y2-t.y1),t.y1=e):t.y=e}function TF(t,e){"x1"in t?(t.x1+=e,t.x2+=e):t.x+=e}function NF(t,e){"y1"in t?(t.y1+=e,t.y2+=e):t.y+=e}var{Vec4:Ztt}=Ja._ModuleSupport,CF=class extends Ja._ModuleSupport.Group{constructor(){super(),this.name="MeasurerStatisticsScene",this.background=new Ja._ModuleSupport.Rect,this.dateRangeBarsText=new Ja._ModuleSupport.Text,this.dateRangeDivider=new Ja._ModuleSupport.Line,this.dateRangeValueText=new Ja._ModuleSupport.Text,this.priceRangeValueText=new Ja._ModuleSupport.Text,this.priceRangeDivider=new Ja._ModuleSupport.Line,this.priceRangePercentageText=new Ja._ModuleSupport.Text,this.volumeText=new Ja._ModuleSupport.Text,this.volumeFormatter=new Intl.NumberFormat("en-US",{notation:"compact",minimumFractionDigits:2,maximumFractionDigits:2}),this.append([this.background,this.dateRangeBarsText,this.dateRangeDivider,this.dateRangeValueText,this.priceRangeValueText,this.priceRangeDivider,this.priceRangePercentageText,this.volumeText])}update(t,e,i,s,a,n){this.verticalDirection=a;const o=this.updateStatistics(t,e,i,n),r=Ja._ModuleSupport.Group.computeChildrenBBox(o.flat()),l=10;r.grow(l),this.updateBackground(t,r,l),this.reposition(o,l,s)}updateStatistics(t,e,i,s){const{dateRangeBarsText:a,dateRangeDivider:n,dateRangeValueText:o,priceRangeValueText:r,priceRangeDivider:l,priceRangePercentageText:c,volumeText:h}=this,u=8,d=6,p=t.statistics.fontSize+3,g=-2,f=this.getTextStyles(t),x={...this.getDividerStyles(t),x1:0,y1:0,x2:0,y2:p},m=[a,n,o],b=[r,l,c],v=[];return e.priceRange&&(r.setProperties({...f,text:this.formatPriceRangeValue(e.priceRange.value,s)}),l.setProperties(x),c.setProperties({...f,text:this.formatPriceRangePercentage(e.priceRange.percentage,s)}),IF(b,i.x,u),v.push(b)),e.dateRange&&(a.setProperties({...f,text:this.formatDateRangeBars(e.dateRange.bars,s)}),n.setProperties(x),o.setProperties({...f,text:this.formatDateRangeValue(e.dateRange.value)}),IF(m,i.x,u),v.push(m)),e.volume!=null?(h.setProperties({...f,x:i.x,text:this.formatVolume(e.volume,s),visible:!0}),v.push(h)):h.visible=!1,Xtt(v,i.y,d),l.y1+=g,l.y2+=g,n.y1+=g,n.y2+=g,v}updateBackground(t,e,i){const s=this.getBackgroundStyles(t);this.background.setProperties({...s,...e,x:e.x-e.width/2+i,y:e.y})}reposition(t,e,i){const{width:s,height:a}=i.seriesRect,n=Ztt.from(this.background.getBBox());let o=0;n.x1<0&&(o=-n.x1),n.x2>s&&(o=s-n.x2);const r=Math.min(e,a-n.y2);for(const l of t)if(Array.isArray(l)){const c=Ja._ModuleSupport.Group.computeChildrenBBox(l).width;for(const h of l)TF(h,o-c/2),NF(h,r)}else TF(l,o-l.getBBox().width/2),NF(l,r);this.background.x+=o,this.background.y+=r}getTextStyles(t){return{fill:t.statistics.color,fontFamily:t.statistics.fontFamily,fontSize:t.statistics.fontSize,fontStyle:t.statistics.fontStyle,fontWeight:t.statistics.fontWeight,textBaseline:"top"}}getDividerStyles(t){return{stroke:t.statistics.divider.stroke,strokeOpacity:t.statistics.divider.strokeOpacity,strokeWidth:t.statistics.divider.strokeWidth}}getBackgroundStyles(t){return{fill:t.statistics.fill,stroke:t.statistics.stroke,strokeOpacity:t.statistics.strokeOpacity,strokeWidth:t.statistics.strokeWidth,cornerRadius:4}}formatDateRangeBars(t,e){return e?.t("measurerDateRangeBars",{value:t})??`${t}`}formatDateRangeValue(t){const e=[],i=t>=0?"":"-";t=Math.abs(t);const s=1e3*60,a=s*60,n=a*24,o=Math.floor(t/s),r=Math.floor(t/a),l=Math.floor(t/n),c=r%(n/a),h=o%(a/s);return l>=1&&e.push(`${l}d`),r>=1&&(t<n||c!==0)&&e.push(`${c}h`),(t<a||h!==0)&&e.push(`${h}m`),e[0]=`${i}${e[0]}`,e.join(" ")}formatPriceRangeValue(t,e){return e?.t("measurerPriceRangeValue",{value:Number(t.toFixed(2))})??`${t}`}formatPriceRangePercentage(t,e){return e?.t("measurerPriceRangePercent",{value:t})??`${t}`}formatVolume(t,e){const i=isNaN(t)?"":this.volumeFormatter.format(t);return e?.t("measurerVolume",{value:i})??i}},$tt=class extends CF{getDirectionStyles(t){return this.verticalDirection==="down"?t.down.statistics:t.up.statistics}getTextStyles(t){const e=this.getDirectionStyles(t);return{...super.getTextStyles(t),fill:e.color,fontFamily:e.fontFamily,fontSize:e.fontSize,fontStyle:e.fontStyle,fontWeight:e.fontWeight}}getDividerStyles(t){const e=this.getDirectionStyles(t);return{stroke:e.divider.stroke,strokeOpacity:e.divider.strokeOpacity,strokeWidth:e.divider.strokeWidth}}getBackgroundStyles(t){const e=this.getDirectionStyles(t);return{...super.getBackgroundStyles(t),fill:e.fill,stroke:e.stroke,strokeOpacity:e.strokeOpacity,strokeWidth:e.strokeWidth}}},{Vec2:No,Vec4:Th}=qL._ModuleSupport,Da=class extends jL{constructor(){super(),this.type="measurer",this.horizontalLine=new Ma,this.verticalLine=new Ma,this.horizontalStartLine=new Ma,this.horizontalEndLine=new Ma,this.verticalStartLine=new Ma,this.verticalEndLine=new Ma,this.horizontalEndCap=new OS,this.verticalEndCap=new OS,this.background=new qL._ModuleSupport.Path({zIndex:-1}),this.updateBackground=gF.updateBackground.bind(this),this.statistics=this.createStatisticsScene(),this.statistics.zIndex=1,this.append([this.background,this.verticalStartLine,this.verticalEndLine,this.horizontalStartLine,this.horizontalEndLine,this.horizontalLine,this.verticalLine,this.horizontalEndCap,this.verticalEndCap,this.start,this.end,this.statistics])}static is(t){return Ri.isCheck(t,"measurer")}createStatisticsScene(){return new CF}update(t,e){const i=Dr(t,e);if(i==null){this.visible=!1;return}if(this.visible=t.visible??!0,!this.visible)return;const s=this.extendPerpendicular(i,t,e),a={...s,y2:s.y1},n={...s,y1:s.y2};this.verticalDirection=i.y1<i.y2?"down":"up",this.updateVisibilities(t),this.updateLines(t,i),this.updateHandles(t,i),this.updateText(t,i),this.updateCaps(t,i),this.updateBoundingLines(t,s),this.updateBackground(t,a,n,e),this.updateStatistics(t,i,e),this.updateAnchor(t,i,e)}extendPerpendicular(t,e,i){const s={x1:Math.min(t.x1,t.x2),x2:Math.max(t.x1,t.x2),y1:Math.min(t.y1,t.y2),y2:Math.max(t.y1,t.y2)},[a,n]=No.from(i.yAxis.bounds);return Xa.is(e)?(e.extendAbove&&(s.y1=a.y),e.extendBelow&&(s.y2=n.y)):Za.is(e)&&(e.extendLeft&&(s.x1=a.x),e.extendRight&&(s.x2=n.x)),s}updateVisibilities(t){const{horizontalStartLine:e,horizontalEndLine:i,horizontalEndCap:s,verticalStartLine:a,verticalEndLine:n,verticalEndCap:o}=this,{direction:r}=t;a.visible=r!=="vertical",n.visible=r!=="vertical",s.visible=r!=="vertical",e.visible=r!=="horizontal",i.visible=r!=="horizontal",o.visible=r!=="horizontal"}updateLines(t,e){const{horizontalLine:i,verticalLine:s}=this,{direction:a}=t,{x1:n,y1:o,x2:r,y2:l}=e,c=No.round(Th.center(e)),h=this.getLineStyles(t);a!=="vertical"&&i.setProperties({...h,x1:n,x2:r,y1:c.y,y2:c.y}),a!=="horizontal"&&s.setProperties({...h,x1:c.x,x2:c.x,y1:o,y2:l})}updateText(t,e){const{direction:i}=t,s=No.round(Th.center(e));let a;const n={...e};i==="vertical"?(a=this.verticalLine,n.x1=s.x,n.x2=s.x):(a=this.horizontalLine,n.y1=s.y,n.y2=s.y),this.text=this.updateNode(Lh,this.text,!!t.text.label);const{id:o}=a,r=bd(o,a,t.text,n,this.text,t.text.label,t.strokeWidth);let l;if(i==="both"&&r&&this.text){const c=Th.from(this.text.getBBox()),{offset:h}=r.numbers;c.x1<=s.x+h.x&&c.x2>=s.x-h.x&&(l={x:s.x,y:r.clipMask.y,radius:this.text.getBBox().height/2+No.length(h)})}this.verticalLine.setClipMask(o,l)}updateCaps(t,e){const{horizontalEndCap:i,verticalEndCap:s}=this,{direction:a}=t,{x1:n,y1:o,x2:r,y2:l}=e,c=No.round(Th.center(e)),{stroke:h,strokeWidth:u,strokeOpacity:d}=this.getLineStyles(t),p={stroke:h,strokeWidth:u,strokeOpacity:d};if(a!=="vertical"){const g=n<=r?0:Math.PI;let f=r;a==="horizontal"&&(f+=n<=r?-2:2),i.update({...p,x:f,y:c.y,angle:g})}if(a!=="horizontal"){const g=o<=l?Math.PI/2:Math.PI/-2;let f=l;a==="vertical"&&(f+=o<=l?-2:2),s.update({...p,x:c.x,y:f,angle:g})}}updateBoundingLines(t,e){const{verticalStartLine:i,verticalEndLine:s,horizontalStartLine:a,horizontalEndLine:n}=this,{direction:o}=t,{x1:r,y1:l,x2:c,y2:h}=e,u=this.getLineStyles(t);o==="horizontal"&&(i.setProperties({...u,x1:r,y1:l,x2:r,y2:h}),s.setProperties({...u,x1:c,y1:l,x2:c,y2:h})),o==="vertical"&&(a.setProperties({...u,x1:r,y1:l,x2:c,y2:l}),n.setProperties({...u,x1:r,y1:h,x2:c,y2:h}))}updateStatistics(t,e,i){const s=No.add(Th.bottomCenter(e),No.from(0,10)),a={volume:this.getVolume(t)};t.hasPriceRange&&(a.priceRange={percentage:this.getPriceRangePercentage(t),value:this.getPriceRangeValue(t)}),t.hasDateRange&&(a.dateRange={bars:this.getDateRangeBars(e,i),value:this.getDateRangeValue(t)}),this.statistics.update(t,a,s,i,this.verticalDirection,t.localeManager)}updateAnchor(t,e,i,s){const a=Th.topCenter(e);No.apply(this.anchor,qL._ModuleSupport.Transformable.toCanvasPoint(this.horizontalLine,a.x,a.y))}getBackgroundPoints(t,e,i,s){const[a,n]=No.from(e),[o,r]=No.from(i);return[a,n,r,o]}getLineStyles(t){const{lineDashOffset:e,stroke:i,strokeWidth:s,strokeOpacity:a}=t;return{lineCap:t.getLineCap(),lineDash:t.getLineDash(),lineDashOffset:e,stroke:i,strokeWidth:s,strokeOpacity:a,fillOpacity:0}}getBackgroundStyles(t){const{background:e}=t;return{fill:e.fill,fillOpacity:e.fillOpacity}}getHandleStyles(t){return{fill:t.handle.fill,stroke:t.handle.stroke??t.stroke,strokeOpacity:t.handle.strokeOpacity??t.strokeOpacity,strokeWidth:t.handle.strokeWidth??t.strokeWidth}}containsPoint(t,e){const{horizontalLine:i,text:s,verticalLine:a,horizontalStartLine:n,horizontalEndLine:o,verticalStartLine:r,verticalEndLine:l}=this;return super.containsPoint(t,e)||i.isPointInPath(t,e)||a.isPointInPath(t,e)||n.visible&&n.isPointInPath(t,e)||o.visible&&o.isPointInPath(t,e)||r.visible&&r.isPointInPath(t,e)||l.visible&&l.isPointInPath(t,e)||!!s?.containsPoint(t,e)}getNodeAtCoords(t,e){return this.text?.containsPoint(t,e)?"text":this.start.containsPoint(t,e)||this.end.containsPoint(t,e)?"handle":"line"}getDateRangeBars(t,e){const{step:i}=e.xAxis.scale,s=t.x1<=t.x2?1:-1;return i?Math.round(Th.width(t)/i)*s:0}getDateRangeValue(t){if(t.start.x==null||t.end.x==null||!(t.start.x instanceof Date)||!(t.end.x instanceof Date))throw new Error("Can not create a date range measurement of non-date x-axis.");return t.end.x.getTime()-t.start.x.getTime()}getPriceRangePercentage(t){if(t.start.y==null||t.end.y==null)throw new Error("Can not create a price range measurement of a non-numeric y-axis");return(t.end.y-t.start.y)/t.start.y}getPriceRangeValue(t){if(t.start.y==null||t.end.y==null)throw new Error("Can not create a price range measurement of a non-numeric y-axis");return t.end.y-t.start.y}getVolume(t){return t.getVolume(t.start.x,t.end.x)}},ES=class extends Da{constructor(){super(...arguments),this.type="quick-measurer"}static is(t){return Ri.isCheck(t,"quick-measurer")}createStatisticsScene(){return new $tt}getDirectionStyles(t){return this.verticalDirection==="down"?t.down:t.up}getLineStyles(t){const e=this.getDirectionStyles(t);return{...super.getLineStyles(t),stroke:e.stroke,strokeWidth:e.strokeWidth,strokeOpacity:e.strokeOpacity}}getBackgroundStyles(t){const e=this.getDirectionStyles(t);return{fill:e.fill,fillOpacity:e.fillOpacity}}getHandleStyles(t){const e=this.getDirectionStyles(t);return{fill:e.handle.fill,stroke:e.handle.stroke??e.stroke,strokeOpacity:e.handle.strokeOpacity??e.strokeOpacity,strokeWidth:e.handle.strokeWidth??e.strokeWidth}}},Qtt=(P(),_(w)),{StateMachine:Dd,StateMachineProperty:OF,Debug:qtt}=Qtt._ModuleSupport,Ad=class extends Dd{constructor(t){const e=({point:o})=>{const r=this.createDatum();r.set({start:o,end:o}),t.create(r)},i=({point:o})=>{const{datum:r,node:l}=this;r?.set({end:o}),l?.toggleActive(!0),l?.toggleHandles({end:!1}),t.update()},s=()=>{this.node?.toggleHandles({end:!0})},a=()=>t.delete(),n=()=>{t.showAnnotationOptions(),!Wl(this.datum)&&t.recordAction(`Create ${this.node?.type} annotation`)};super("start",{start:{reset:Dd.parent,click:{target:"end",action:e},drag:{target:"end",action:e}},end:{hover:i,drag:i,click:{target:Dd.parent,action:s},dragEnd:{target:Dd.parent,action:s},reset:{target:Dd.parent,action:a},cancel:{target:Dd.parent,action:a},onExit:n}}),this.debug=qtt.create(!0,"annotations")}};y([OF()],Ad.prototype,"datum",2),y([OF()],Ad.prototype,"node",2);var Jtt=class extends Ad{createDatum(){return new Xa}},tet=class extends Ad{createDatum(){return new Za}},eet=class extends Ad{createDatum(){return new Ar}},iet=class extends Ad{createDatum(){return new va}},EF={type:"date-range",datum:Xa,scene:Da,isDatum:Xa.is,translate:(t,e,i,s)=>{Xa.is(e)&&Da.is(t)&&t.translate(e,i,s)},copy:(t,e,i,s)=>{if(Xa.is(e)&&Xa.is(i)&&Da.is(t))return t.copy(e,i,s)},update:(t,e,i)=>{Xa.is(e)&&Da.is(t)&&t.update(e,i)},createState:(t,{createDatum:e})=>new Jtt({...t,create:e("date-range")}),dragState:t=>new Je(t)},wF={type:"price-range",datum:Za,scene:Da,isDatum:Za.is,translate:(t,e,i,s)=>{Za.is(e)&&Da.is(t)&&t.translate(e,i,s)},copy:(t,e,i,s)=>{if(Za.is(e)&&Za.is(i)&&Da.is(t))return t.copy(e,i,s)},update:(t,e,i)=>{Za.is(e)&&Da.is(t)&&t.update(e,i)},createState:(t,{createDatum:e})=>new tet({...t,create:e("date-range")}),dragState:t=>new Je(t)},RF={type:"date-price-range",datum:Ar,scene:Da,isDatum:Ar.is,translate:(t,e,i,s)=>{Ar.is(e)&&Da.is(t)&&t.translate(e,i,s)},copy:(t,e,i,s)=>{if(Ar.is(e)&&Ar.is(i)&&Da.is(t))return t.copy(e,i,s)},update:(t,e,i)=>{Ar.is(e)&&Da.is(t)&&t.update(e,i)},createState:(t,{createDatum:e})=>new eet({...t,create:e("date-range")}),dragState:t=>new Je(t)},_F={type:"quick-date-price-range",datum:va,scene:ES,isDatum:va.is,translate:(t,e,i,s)=>{va.is(e)&&ES.is(t)&&t.translate(e,i,s)},copy:(t,e,i,s)=>{if(va.is(e)&&va.is(i)&&ES.is(t))return t.copy(e,i,s)},update:(t,e,i)=>{va.is(e)&&ES.is(t)&&t.update(e,i)},createState:(t,{createDatum:e})=>new iet({...t,create:e("quick-date-price-range")}),dragState:t=>new Je(t)},Pf=(P(),_(w)),{ZIndexMap:PF,TextWrapper:set,clamp:aet}=Pf._ModuleSupport,wS=class extends WL{constructor(){super(),this.type="note",this.shape=new Pf._ModuleSupport.Rect,this.iconBackground=new Pf._ModuleSupport.SvgPath("M22 1.83333C22 0.820811 21.1792 0 20.1667 0H1.83333C0.820811 0 0 0.82081 0 1.83333V13.9868C0 14.9994 0.820811 15.8202 1.83333 15.8202L5.88971 15.8202C6.44575 15.8202 6.97175 16.0725 7.31971 16.5062L9.57006 19.3112C10.304 20.2259 11.6962 20.2259 12.4301 19.3112L14.6804 16.5062C15.0284 16.0725 15.5544 15.8202 16.1104 15.8202L20.1667 15.8202C21.1792 15.8202 22 14.9994 22 13.9868V1.83333Z"),this.iconLines=new Pf._ModuleSupport.SvgPath("M17.1114 5.75C17.1114 6.16421 16.7756 6.5 16.3614 6.5H5.63916C5.22495 6.5 4.88916 6.16421 4.88916 5.75V5.75C4.88916 5.33579 5.22495 5 5.63916 5H16.3614C16.7756 5 17.1114 5.33579 17.1114 5.75V5.75ZM17.1114 9.25C17.1114 9.66421 16.7756 10 16.3614 10H5.63916C5.22495 10 4.88916 9.66421 4.88916 9.25V9.25C4.88916 8.83579 5.22495 8.5 5.63916 8.5H16.3614C16.7756 8.5 17.1114 8.83579 17.1114 9.25V9.25Z"),this.active=!1,this.shape.visible=!1,this.label.visible=!1,this.iconBackground.fillShadow=new Pf._ModuleSupport.DropShadow,this.append([this.shape,this.label,this.iconBackground,this.iconLines,this.handle])}static is(t){return Ri.isCheck(t,"note")}update(t,e){this.updateIcon(t,e),super.update(t,e)}getTextBBox(t,e,i){const s=super.getTextBBox(t,e,i);s.x-=t.width/2,s.x=aet(0,s.x,i.seriesRect.width-t.width);const a=t.getPadding().top,n=s.y-xz-a*2,o=s.y+ti.HANDLE_SIZE+a*2;return n-s.height-bz<0?(s.y=o,t.position="top"):(s.y=n+a,t.position="bottom"),s}updateLabel(t,e){const i=t.visible===!1?!1:this.label.visible;super.updateLabel(t,e),this.label.visible=i,this.label.text=set.wrapText(t.text,{font:{fontFamily:t.fontFamily,fontSize:t.fontSize,fontStyle:t.fontStyle,fontWeight:t.fontWeight},avoidOrphans:!1,textAlign:t.textAlign,textBaseline:"hanging",textWrap:"always",maxWidth:200})}updateShape(t,e){const{shape:i}=this;i.fill=t.background.fill,i.fillOpacity=t.background.fillOpacity??1,i.stroke=t.background.stroke,i.strokeOpacity=t.background.strokeOpacity??1,i.strokeWidth=t.background.strokeWidth??1,i.cornerRadius=4;const s=t.getPadding().top,a=t.position==="top";i.x=e.x-s,i.width=t.width+s*2,i.height=e.height+s*2,i.y=e.y+(a?0:-e.height)-s}updateIcon(t,e){const{active:i,iconBackground:s,iconLines:a}=this,{x:n,y:o}=pi(t,e);s.x=n-Iq/2,s.y=o-mz,a.x=s.x,a.y=s.y,s.fill=t.fill,s.fillOpacity=t.fillOpacity??1,s.stroke=t.stroke,s.strokeOpacity=t.strokeOpacity??1,s.strokeWidth=t.strokeWidth??1,a.fill=t.stroke,i?s.fillShadow.color=t.fill??"rgba(0, 0, 0, 0.22)":s.fillShadow.color="rgba(0, 0, 0, 0.22)"}updateAnchor(t,e,i){const s=t.getPadding().top,a=t.position==="top",n=a?1:-1;return{x:e.x+i.seriesRect.x+t.width/2,y:e.y+i.seriesRect.y+n*(e.height+s),position:a?"below":"above"}}getLabelCoords(t,e){const i=t.position==="top",s=t.getPadding().top;return{x:e.x,y:e.y+(i?s/2:0)}}getHandleCoords(t,e,i){return{x:e.x,y:e.y+ti.HANDLE_SIZE/2+4}}getHandleStyles(t){return{fill:t.handle.fill,stroke:t.handle.stroke??t.fill,strokeOpacity:t.handle.strokeOpacity,strokeWidth:t.handle.strokeWidth}}toggleHovered(t){super.toggleHovered(t),this.label.visible=t,this.shape.visible=t,this.zIndex=t?PF.CHART_ANNOTATION_FOCUSED:PF.CHART_ANNOTATION}toggleActive(t){super.toggleActive(t),this.label.visible=t,this.shape.visible=t,this.active=t}containsPoint(t,e){return this.shape.visible&&this.shape.containsPoint(t,e)||this.iconBackground.containsPoint(t,e)?!0:super.containsPoint(t,e)}},net=class extends Rf{createDatum(){return new Ks}},BF={type:"note",datum:Ks,scene:wS,isDatum:Ks.is,translate:(t,e,i,s)=>{Ks.is(e)&&wS.is(t)&&t.translate(e,i,s)},copy:(t,e,i,s)=>{if(Ks.is(e)&&Ks.is(i)&&wS.is(t))return t.copy(e,i,s)},update:(t,e,i)=>{Ks.is(e)&&wS.is(t)&&t.update(e,i)},createState:(t,{createDatum:e})=>new net({...t,create:e("note")}),dragState:t=>new Je(t)},oet=(P(),_(w)),{Vec2:Co,Vec4:Id}=oet._ModuleSupport,RS=class extends fF{constructor(){super(),this.type="parallel-channel",this.ignoreYBounds=!0,this.handles={topLeft:new ti,topMiddle:new xd,topRight:new ti,bottomLeft:new ti,bottomMiddle:new xd,bottomRight:new ti},this.middleLine=new Ma,this.append([this.background,this.topLine,this.middleLine,this.bottomLine,...Object.values(this.handles)])}static is(t){return Ri.isCheck(t,"parallel-channel")}dragHandle(t,e,i,s){const{activeHandle:a,handles:n}=this;if(a==null)return;const{offset:o}=n[a].drag(e);n[a].toggleDragging(!0);const r=t.toJson();let l=[],c=[];switch(a){case"topLeft":case"bottomLeft":l=["topLeft","bottomLeft"],c=["topRight","bottomRight"];break;case"topMiddle":l=["topLeft","topRight"],o.y-=xd.HANDLE_SIZE/2;break;case"topRight":case"bottomRight":l=["topRight","bottomRight"],c=["topLeft","bottomLeft"];break;case"bottomMiddle":l=["bottomLeft","bottomRight"],o.y-=xd.HANDLE_SIZE/2;break}const h=t.snapToAngle,u=l.map((d,p)=>s&&c[p]?this.snapToAngle(e,i,d,c[p],h):Ie(Co.add(n[d].handle,o),i)).filter(wq);if(!u.some(d=>!Tn(i,d,{y:!1}))){if((a==="topMiddle"||a==="bottomMiddle")&&t.start.y!=null){const d=Ie(Co.add(n.topLeft.handle,o),i);Tn(i,d)&&(a==="topMiddle"?t.height+=d.y-t.start.y:t.height-=d.y-t.start.y)}for(const[d,p]of u.entries())switch(l[d]){case"topLeft":t.start.x=p.x,t.start.y=p.y;break;case"topRight":t.end.x=p.x,t.end.y=p.y;break}t.isValidWithContext(i)||t.set(r)}}containsPoint(t,e){return super.containsPoint(t,e)||this.middleLine.visible&&this.middleLine.strokeWidth>0&&this.middleLine.containsPoint(t,e)}getNodeAtCoords(t,e){return this.middleLine.visible&&this.middleLine.strokeWidth>0&&this.middleLine.containsPoint(t,e)?"line":super.getNodeAtCoords(t,e)}updateLines(t,e,i,s,a,n){const{topLine:o,middleLine:r,bottomLine:l}=this,{lineDashOffset:c,stroke:h,strokeOpacity:u,strokeWidth:d}=t,p=t.getLineDash(),g={lineCap:t.getLineCap(),lineDash:p,lineDashOffset:c,stroke:h,strokeOpacity:u,strokeWidth:d};o.setProperties({...e,...g}),l.setProperties({...i,...g});const f=this.extendLine({x1:a.x1,y1:n.y1+(a.y1-n.y1)/2,x2:a.x2,y2:n.y2+(a.y2-n.y2)/2},t,s);r.setProperties({...f,lineDash:t.middle.lineDash??p,lineDashOffset:t.middle.lineDashOffset??c,stroke:t.middle.stroke??h,strokeOpacity:t.middle.strokeOpacity??u,strokeWidth:t.middle.strokeWidth??d,visible:t.middle.visible??!0})}updateHandles(t,e,i){const{handles:{topLeft:s,topMiddle:a,topRight:n,bottomLeft:o,bottomMiddle:r,bottomRight:l}}=this,c={fill:t.handle.fill,stroke:t.handle.stroke??t.stroke,strokeOpacity:t.handle.strokeOpacity??t.strokeOpacity,strokeWidth:t.handle.strokeWidth??t.strokeWidth};s.update({...c,...Id.start(e)}),n.update({...c,...Id.end(e)}),o.update({...c,...Id.start(i)}),l.update({...c,...Id.end(i)}),a.update({...c,...Co.sub(Id.center(e),Co.from(a.handle.width/2,a.handle.height/2))}),r.update({...c,...Co.sub(Id.center(i),Co.from(r.handle.width/2,r.handle.height/2))})}updateText(t,e,i){this.text=this.updateNode(Lh,this.text,!!t.text.label),rF(!0,e,i,t.text,t.strokeWidth,this.text,t.text.label)}getBackgroundPoints(t,e,i,s){const a=e.x1>e.x2,n=e.y1>e.y2,o=e.x1!==i.x1&&e.y1!==i.y1,r=e.x2!==i.x2&&e.y2!==i.y2,l=Co.from(e);return t.extendEnd&&r&&l.push(Co.from(a?s.x1:s.x2,n?s.y1:s.y2)),l.push(...Co.from(i).reverse()),t.extendStart&&o&&l.push(Co.from(a?s.x2:s.x1,n?s.y2:s.y1)),l}},ret=(P(),_(w)),{StateMachine:tc,StateMachineProperty:JL,Debug:cet}=ret._ModuleSupport,_S=class extends tc{constructor(t){const e=({point:l})=>{const c=new Qa;c.set({start:l,end:l,height:0}),t.create(c)},i=()=>{const{node:l}=this;l?.toggleActive(!0),l?.toggleHandles({topLeft:!0,topMiddle:!1,topRight:!1,bottomLeft:!1,bottomMiddle:!1,bottomRight:!1})},s=({offset:l,context:c})=>{const{datum:h,snapping:u}=this;h&&(h.set({end:PL(l,c,u,h.start,h.snapToAngle)}),t.update())},a=()=>{this.node?.toggleHandles({topRight:!0}),t.update()},n=({point:l})=>{const{datum:c,node:h}=this;if(c?.start.y==null||c?.end.y==null)return;const u=c.end.y-(l.y??0),d=c.start.y-u;h?.toggleHandles({bottomLeft:!0,bottomRight:!0}),!(!t.validatePoint({x:c.start.x,y:d})||!t.validatePoint({x:c.end.x,y:l.y}))&&(c.set({height:u}),t.update())},o=({point:l})=>{const{datum:c,node:h}=this;if(c?.start.y==null||c?.end.y==null)return;const u=c.end.y-(l.y??0),d=c.start.y-u;h?.toggleHandles(!0),!(!t.validatePoint({x:c.start.x,y:d})||!t.validatePoint({x:c.end.x,y:l.y}))&&(c.set({height:u}),t.recordAction("Create parallel-channel annotation"),t.showAnnotationOptions(),t.update())},r=()=>t.delete();super("start",{start:{click:{target:"waiting-first-render",action:e},drag:{target:"waiting-first-render",action:e},reset:tc.parent},"waiting-first-render":{render:{target:"end",action:i}},end:{hover:s,drag:s,click:{target:"height",action:a},dragEnd:{target:"height",action:a},reset:{target:tc.parent,action:r},cancel:{target:tc.parent,action:r}},height:{hover:n,click:{target:tc.parent,action:o},drag:{target:tc.parent,action:o},reset:{target:tc.parent,action:r},cancel:{target:tc.parent,action:r}}}),this.debug=cet.create(!0,"annotations"),this.snapping=!1}};y([JL()],_S.prototype,"datum",2),y([JL()],_S.prototype,"node",2),y([JL()],_S.prototype,"snapping",2);var zF={type:"parallel-channel",datum:Qa,scene:RS,isDatum:Qa.is,translate:(t,e,i,s)=>{Qa.is(e)&&RS.is(t)&&t.translate(e,i,s)},copy:(t,e,i,s)=>{if(Qa.is(e)&&Qa.is(i)&&RS.is(t))return t.copy(e,i,s)},update:(t,e,i)=>{Qa.is(e)&&RS.is(t)&&t.update(e,i)},createState:(t,{createDatum:e})=>new _S({...t,create:e("parallel-channel")}),dragState:t=>new Je(t)},PS=class extends WL{constructor(){super(),this.type="text",this.append([this.label,this.handle])}static is(t){return Ri.isCheck(t,"text")}getHandleCoords(t,e){const i=ti.HANDLE_SIZE/2;return{x:e.x+i,y:e.y+2+i}}},het=class extends Rf{createDatum(){return new Tr}},FF={type:"text",datum:Tr,scene:PS,isDatum:Tr.is,translate:(t,e,i,s)=>{Tr.is(e)&&PS.is(t)&&t.translate(e,i,s)},copy:(t,e,i,s)=>{if(Tr.is(e)&&Tr.is(i)&&PS.is(t))return t.copy(e,i,s)},update:(t,e,i)=>{Tr.is(e)&&PS.is(t)&&t.update(e,i)},createState:(t,{createDatum:e})=>new het({...t,create:e("text")}),dragState:t=>new Je(t)},Aa={[MF.type]:MF,[uF.type]:uF,[dF.type]:dF,[zF.type]:zF,[yF.type]:yF,[bF.type]:bF,[iF.type]:iF,[nF.type]:nF,[BF.type]:BF,[FF.type]:FF,[DF.type]:DF,[Xz.type]:Xz,[Kz.type]:Kz,[EF.type]:EF,[wF.type]:wF,[RF.type]:RF,[_F.type]:_F};function Nh(t){for(const{isDatum:e}of Object.values(Aa))if(e(t))return t}var uet=(P(),_(w)),{ActionOnSet:det,ParallelStateMachine:pet,StateMachine:tT,StateMachineProperty:Oo,Debug:get}=uet._ModuleSupport,BS=class extends pet{constructor(t){super(new fet(e=>{this.snapping=e}),new yet(()=>{this.node=this.active==null?void 0:t.node(this.active)}),new ec(t,e=>{this.active=e,this.datum=this.active==null?void 0:t.datum(this.active),this.node=this.active==null?void 0:t.node(this.active)})),this.snapping=!1}getActive(){return this.active}isActive(t){return t===this.active}};y([Oo()],BS.prototype,"snapping",2),y([Oo()],BS.prototype,"datum",2),y([Oo()],BS.prototype,"node",2);var fet=class extends tT{constructor(t){super("idle",{idle:{hover:({shiftKey:e})=>t(e),keyDown:({shiftKey:e})=>t(e),keyUp:({shiftKey:e})=>t(e),click:({shiftKey:e})=>t(e),drag:({shiftKey:e})=>t(e)},dragging:{},"text-input":{}})}},yet=class extends tT{constructor(t){super("idle",{idle:{onEnter:t,render:t},dragging:{onEnter:t,render:t},"text-input":{render:t}})}},ec=class extends tT{constructor(t,e){const i=v=>S=>{t.create(v,S),this.active=t.selectLast()},s=()=>{this.active!=null&&t.delete(this.active),this.active=void 0,t.select()},a={createDatum:i},n={...t,delete:s,showTextInput:()=>{this.active!=null&&t.showTextInput(this.active)},deselect:()=>{const v=this.active;this.active=void 0,this.hovered=void 0,t.select(this.active,v)},showAnnotationOptions:()=>{this.active!=null&&t.showAnnotationOptions(this.active)}},o=Object.fromEntries(Object.entries(Aa).map(([v,S])=>[v,S.createState(n,a)])),r=Object.fromEntries(Object.entries(Aa).map(([v,S])=>[v,S.dragState(t,a)])),l=({colorPickerType:v,colorOpacity:S,color:D,opacity:k,isMultiColor:L})=>{this.datum&&(v==="text-color"&&t.updateTextInputColor(D),gS(this.datum,v,S,D,k,L),t.update())},c=v=>{const{datum:S,node:D}=this;!S||!D||(Lo(S)?(S.fontSize=v,t.updateTextInputFontSize(v)):yd(S)&&(S.text.fontSize=v),t.update())},h=v=>{const{datum:S,node:D}=this;!S||!D||!Hl(S)||(Cz(S,v),t.update())},u=v=>{const{node:S}=this;!S||!("setTextInputBBox"in S)||(S.setTextInputBBox(v),t.update())},d=({textInputValue:v,bbox:S})=>{const{datum:D}=this;if(S!=null&&v!=null&&v.length>0){if(!Lo(D))return;const k=lS(D,v,S.width);D.set({text:k}),t.update(),t.recordAction(`Change ${D.type} annotation text`)}else t.delete(this.active),t.recordAction(`Delete ${D?.type} annotation`)},p=()=>{t.updateTextInputBBox(void 0)},g=()=>this.active!=null,f=()=>this.copied!=null,x=()=>{const{active:v,datum:S}=this;return v==null||!S?!1:yd(S)&&!S.locked},m=()=>this.active!=null&&!Wl(this.datum),b=()=>this.hovered!=null;super("idle",{idle:{onEnter:()=>{t.select(this.active,this.active),this.hoverCoords&&(this.hovered=t.hoverAtCoords(this.hoverCoords,this.active))},hover:({offset:v})=>{this.hovered=t.hoverAtCoords(v,this.active),this.hoverCoords=v},translate:{guard:g,action:({translation:v})=>{t.startInteracting(),t.translate(this.active,v),t.update()}},translateEnd:{guard:g,action:()=>{t.stopInteracting()}},copy:{guard:m,action:()=>{this.copied=t.copy(this.active)}},cut:{guard:m,action:()=>{this.copied=t.copy(this.active),s()}},paste:{guard:f,action:()=>{t.paste(this.copied)}},selectLast:()=>{const v=this.active;this.active=t.selectLast(),t.select(this.active,v)},click:[{guard:()=>{const{active:v,hovered:S,datum:D}=this;return v==null||S!==v||!D?!1:Lo(D)&&!D.locked},target:"text-input"},{action:()=>{const v=this.active;this.active=this.hovered,t.select(this.active,v)}}],dblclick:{guard:x,action:({offset:v})=>{const S=t.getNodeAtCoords(v,this.active)==="text"?"text":"line";t.showAnnotationSettings(this.active,void 0,S)}},dragStart:[{guard:b,target:"dragging",action:()=>{const v=this.active;this.active=this.hovered,t.select(this.active,v),t.startInteracting()}},{action:()=>{const v=this.active;this.active=this.hovered,t.select(this.active,v)}}],color:{guard:g,action:l},fontSize:{guard:g,action:c},lineProps:{guard:g,action:v=>{const S=Nh(this.datum);S?.set(v),t.update(),t.recordAction(`Change ${S?.type} ${Object.entries(v).map(([D,k])=>`${D} to ${k}`).join(", ")}`)}},lineStyle:{guard:g,action:h},lineText:{guard:g,action:v=>{const S=Nh(this.datum);yd(S)&&(Nr(S)&&v.position==="center"&&(v.position="inside"),S.text.set(v),t.update())}},updateTextInputBBox:{guard:g,action:u},toolbarPressSettings:{guard:x,action:v=>{t.showAnnotationSettings(this.active,v)}},reset:()=>{this.active!=null&&this.node?.toggleActive(!1),this.hovered=void 0,this.active=void 0,t.select(this.active,this.active),t.resetToIdle()},delete:()=>{this.active!=null&&(t.delete(this.active),!Wl(this.datum)&&t.recordAction(`Delete ${this.datum?.type} annotation`))},deleteAll:()=>{t.deleteAll()},...o},dragging:{onEnter:(v,S)=>{if(this.active==null)return;const D=t.getAnnotationType(this.active);D&&(this.transitionRoot(D),this.transitionRoot("dragStart",S))},...r},"text-input":{onEnter:()=>{if(this.active==null)return;const v=Nh(this.datum);!v||!("getTextInputCoords"in v)||(t.startInteracting(),t.showTextInput(this.active),v.visible=!1,t.update())},updateTextInputBBox:{guard:g,action:u},resize:{target:"idle",action:d},click:{target:"idle",action:d},drag:{target:"idle",action:d},textInput:[{guard:GL,target:"idle",action:p},{guard:VL,target:"idle",action:d}],color:{guard:g,action:l},fontSize:{guard:g,action:c},cancel:{target:"idle",action:p},onExit:()=>{t.stopInteracting(),t.hideTextInput();const v=this.active;if(this.active=this.hovered=void 0,t.select(this.active,v),v==null)return;const S=t.datum(v),D=t.node(v);!S||!D||(S.visible=!0)}}}),this.setActive=e,this.debug=get.create(!0,"annotations"),this.snapping=!1}};y([det({changeValue(t){this.setActive(t)}}),Oo()],ec.prototype,"active",2),y([Oo()],ec.prototype,"hovered",2),y([Oo()],ec.prototype,"hoverCoords",2),y([Oo()],ec.prototype,"copied",2),y([Oo()],ec.prototype,"snapping",2),y([Oo()],ec.prototype,"datum",2),y([Oo()],ec.prototype,"node",2);var eT=(P(),_(w)),{ARRAY:met,BOOLEAN:xet,UNION:bet,ActionOnSet:vet,LayoutElement:Met,Menu:Det,PropertiesArray:Aet,ToolbarButtonProperties:Iet,Validate:iT}=eT._ModuleSupport,jF=class extends Iet{};y([iT(bet(["line-menu","fibonacci-menu","text-menu","shape-menu","measurer-menu","clear"]))],jF.prototype,"value",2);var sT=class extends eT._ModuleSupport.BaseProperties{constructor(t){super(),this.ctx=t,this.enabled=!0,this.buttons=new Aet(jF),this.events=new eT._ModuleSupport.Listeners,this.annotationMenu=new Det(this.ctx,"annotations"),this.destroyFns=[],this.toolbar=t.sharedToolbar.getSharedToolbar("annotations");const e=this.onKeyDown.bind(this);this.toolbar.addListener("keydown",e),this.destroyFns.push(this.toolbar.addToolbarListener("button-pressed",this.onToolbarButtonPress.bind(this)),t.layoutManager.registerElement(Met.ToolbarLeft,this.onLayoutStart.bind(this)),()=>{this.toolbar.removeListener("keydown",e),this.toolbar.destroy()})}destroy(){for(const t of this.destroyFns)t()}addListener(t,e){return this.events.addListener(t,e)}toggleVisibility(t){this.toolbar.setHidden(!t)}toggleClearButtonEnabled(t){const e=this.buttons.findIndex(i=>i.value==="clear");this.toolbar.toggleButtonEnabledByIndex(e,t)}resetButtonIcons(){for(const[t,e]of this.buttons.entries())switch(e.value){case"line-menu":this.updateButtonByIndex(t,{icon:"trend-line-drawing",value:"line-menu"});break;case"fibonacci-menu":this.updateButtonByIndex(t,{icon:"fibonacci-retracement-drawing",value:"fibonacci-menu"});break;case"text-menu":this.updateButtonByIndex(t,{icon:"text-annotation",value:"text-menu"});break;case"shape-menu":this.updateButtonByIndex(t,{icon:"arrow-drawing",value:"shape-menu"});break}}hideOverlays(){this.annotationMenu.hide()}clearActiveButton(){this.toolbar.clearActiveButton()}dispatch(t,e){this.events.dispatch(t,e)}onLayoutStart(t){this.enabled&&(this.toolbar.updateButtons(this.buttons),this.toolbar.layout(t.layoutBox))}onToolbarButtonPress({event:t,button:e,buttonBounds:i}){switch(e.value){case"clear":this.dispatch("pressed-clear");break;case"line-menu":this.onToolbarButtonPressShowMenu(t,i,e.value,"toolbarAnnotationsLineAnnotations",bJ);break;case"fibonacci-menu":this.onToolbarButtonPressShowMenu(t,i,e.value,"toolbarAnnotationsFibonacciAnnotations",SJ);break;case"text-menu":this.onToolbarButtonPressShowMenu(t,i,e.value,"toolbarAnnotationsTextAnnotations",MJ);break;case"shape-menu":this.onToolbarButtonPressShowMenu(t,i,e.value,"toolbarAnnotationsShapeAnnotations",DJ);break;case"measurer-menu":this.onToolbarButtonPressShowMenu(t,i,e.value,"toolbarAnnotationsMeasurerAnnotations",AJ);break}}onToolbarButtonPressShowMenu(t,e,i,s,a){this.dispatch("pressed-show-menu");const n=this.buttons.findIndex(o=>o.value===i);this.toolbar.toggleActiveButtonByIndex(n),this.annotationMenu.setAnchor({x:e.x+e.width+6,y:e.y}),this.annotationMenu.show({items:a,ariaLabel:this.ctx.localeManager.t(s),class:"ag-charts-annotations__toolbar-menu",sourceEvent:t.sourceEvent,onPress:this.onButtonPressMenuCreateAnnotation.bind(this,i)})}onButtonPressMenuCreateAnnotation(t,e){const i=this.buttons.findIndex(s=>s.value===t);this.updateButtonByIndex(i,{icon:e.icon}),this.dispatch("pressed-create-annotation",{annotation:e.value}),this.annotationMenu.hide()}onKeyDown({sourceEvent:t}){t.key==="Escape"&&this.dispatch("cancel-create-annotation")}updateButtonByIndex(t,e){const i=this.buttons.at(t);i&&(i.set({...i.toJson(),...e,value:e.value??i.value}),this.toolbar.updateButtonByIndex(t,{...i.toJson()}))}};y([iT(xet),vet({changeValue(t){this.toolbar?.setHidden(!t)}})],sT.prototype,"enabled",2),y([iT(met)],sT.prototype,"buttons",2);var GF=(P(),_(w)),{BaseModuleInstance:ket,InteractionState:Bf,Validate:Let,BOOLEAN:Tet,ChartAxisDirection:Net,getIconClassNames:Cet}=GF._ModuleSupport,Ch="ag-charts-annotations__axis-button",VF=class extends ket{constructor(t,e,i,s){super(),this.ctx=t,this.axisCtx=e,this.onButtonClick=i,this.seriesRect=s,this.enabled=!0,this.snap=!1,this.padding=0;const{button:a,wrapper:n}=this.setup();this.wrapper=n,this.button=a,this.toggleVisibility(!1),this.updateButtonElement(),this.snap=!!e.scale.bandwidth;const o=this.ctx.regionManager.getRegion("series"),r=Bf.Default|Bf.Annotations|Bf.AnnotationsSelected;t.domManager.addEventListener("focusin",({target:l})=>{const c=l instanceof HTMLElement?l:void 0;!(c&&t.domManager.contains(c,"series-area"))&&c!==this.button.getElement()&&this.hide()}),this.destroyFns.push(o.addListener("hover",l=>this.show(l),r),o.addListener("drag",l=>this.show(l),Bf.Annotations|Bf.AnnotationsSelected),o.addListener("leave",()=>this.hide(),r),t.highlightManager.addListener("highlight-change",l=>this.onHighlightChange(l)),t.keyNavManager.addListener("nav-hori",()=>this.onKeyPress()),t.keyNavManager.addListener("nav-vert",()=>this.onKeyPress()),t.zoomManager.addListener("zoom-pan-start",()=>this.hide()),t.zoomManager.addListener("zoom-change",()=>this.hide()),()=>this.destroyElements(),()=>this.wrapper.remove(),()=>this.button.destroy())}update(t,e){this.seriesRect=t,this.padding=e}setup(){const t=this.ctx.domManager.addChild("canvas-overlay",`${Ch}-${this.axisCtx.axisId}`);t.classList.add(`${Ch}-wrapper`);const e=new GF._Widget.ButtonWidget;return e.addClass(Ch),e.setTabIndex(-1),e.setAriaLabel(this.ctx.localeManager.t("ariaLabelAddHorizontalLine")),t.appendChild(e.getElement()),{wrapper:t,button:e}}destroyElements(){this.ctx.domManager.removeChild("canvas-overlay",Ch)}show(t){const{canvasX:e,canvasY:i}=t;if(!(this.enabled&&this.seriesRect.containsPoint(e,i))){this.hide();return}this.toggleVisibility(!0);const s=this.getButtonCoordinates({x:e,y:i});this.coords=this.getAxisCoordinates(s),this.updatePosition(s)}hide(){this.toggleVisibility(!1)}onHighlightChange(t){t.currentHighlight||this.hide()}onKeyPress(){this.snap||this.hide()}getButtonCoordinates({x:t,y:e}){const{axisCtx:{direction:i,position:s},seriesRect:a,snap:n,axisCtx:o,padding:r}=this,{clientWidth:l,clientHeight:c}=this.button,[h,u]=[a.y,a.y+a.height],[d,p]=[a.x,a.x+a.width];if(n&&(t=Mh(Nf(t-a.x,o),o)+a.x,e=Mh(Nf(e-a.y,o),o)+a.y),i===Net.X){const f=c-Math.max(0,r-5);t=t-l/2,e=s==="top"?h-c+f:u-f}else{const f=l-Math.max(0,r-9);t=s==="left"?d-l+f:p-f,e=e-c/2}return{x:t,y:e}}getAxisCoordinates(t){const{seriesRect:e}=this,{clientWidth:i,clientHeight:s}=this.button,a=t.x-e.x+i/2,n=t.y-e.y+s/2;return{x:a,y:n}}toggleVisibility(t){const{button:e}=this;if(e==null)return;const i=this.enabled&&t;this.toggleClass("-hidden",!i)}toggleClass(t,e){this.wrapper.classList.toggle(`${Ch}-wrapper-${t}`,e)}updatePosition({x:t,y:e}){this.wrapper.style.transform=`translate(${Math.round(t)}px, ${Math.round(e)}px)`}updateButtonElement(){const{button:t}=this;t.addListener("click",()=>this.onButtonClick(this.coords)),t.addListener("drag-start",()=>{}),t.setInnerHTML(`<span class="${Cet("zoom-in")} ${Ch}-icon"></span>`)}};y([Let(Tet)],VF.prototype,"enabled",2);var Oet=(P(),_(w)),Eet=(P(),_(w)),{Color:UF,DraggablePopover:wet,NativeWidget:aT,Vec2:ei,createButton:zS,createCheckbox:Ret,createElement:Er,createElementId:WF,createSelect:_et,createTextArea:Pet,initRovingTabIndex:HF,getIconClassNames:Bet,getWindow:zet,mapValues:nT,setAttribute:Fet,setAttributes:oT}=Eet._ModuleSupport,YF=class M2 extends wet{constructor(e,i){super(e,i),this.dragHandleDraggingClass="ag-charts-dialog__drag-handle--dragging",this.colorPicker=new Rz(this.ctx,{detached:!0}),this.destroyFns.push(e.layoutManager.addListener("layout:complete",this.onLayoutComplete.bind(this)))}showWithChildren(e,i){const s=super.showWithChildren(e,i);return s.classList.add("ag-charts-dialog"),s.setAttribute("role","dialog"),s.addEventListener("mousedown",a=>{a.target.classList?.contains("ag-charts-dialog__color-picker-button")||this.colorPicker.hide()}),s.addEventListener("keydown",this.onKeyDown.bind(this)),zet().requestAnimationFrame(()=>this.reposition()),this.colorPicker.attachTo(this),s}updatePosition(e){super.updatePosition(e);const{anchor:i,fallbackAnchor:s}=this.getColorPickerAnchors()??{};i&&this.colorPicker.setAnchor(i,s)}createTabs(e,i,s){const a=Er("div","ag-charts-dialog__tabs"),n=nT(s,()=>WF("ag-charts-dialog__tab")),o=nT(s,()=>WF("ag-charts-dialog__tab-panel"));for(const[p,g]of Object.entries(s))oT(g.panel,{id:o[p],role:"tabpanel","aria-labelledby":n[p]});const r=p=>{for(const[g,f]of Object.entries(s))f.panel.classList.toggle("ag-charts-dialog__tab-panel--active",g===p),h[g].classList.toggle("ag-charts-dialog__tab-button--active",g===p),Fet(h[g],"aria-selected",g===p),g===p&&f.onShow?.()},l=new aT(Er("div","ag-charts-dialog__header"));l.addListener("drag-start",p=>{const{sourceEvent:g}=p;g.target instanceof Element&&g.target.classList.contains("ag-charts-dialog__header")&&this.onDragStart(p)}),l.addListener("drag-move",p=>this.onDragMove(p)),l.addListener("drag-end",()=>this.onDragEnd());const c=new Get;this.setDragHandle(c);const h=nT(s,(p,g)=>zS({label:this.ctx.localeManager.t(p.label),onPress:()=>r(g)},{id:n[g],class:"ag-charts-dialog__tab-button",role:"tab","aria-controls":o[g]})),u=Er("div","ag-charts-dialog__tab-list");oT(u,{role:"tablist","aria-label":this.ctx.localeManager.t(e)}),u.append(...Object.values(h));const d=this.createHeaderCloseButton();return l.getElement().append(c.getElement(),u,d),a.append(l.getElement(),...Object.values(s).map(p=>p.panel)),r(i),HF({orientation:"horizontal",buttons:Object.values(h)}),{tabs:a,initialFocus:h[i]}}createTabPanel(){return Er("div","ag-charts-dialog__tab-panel")}createInputGroupLine(){return Er("div","ag-charts-dialog__input-group-line")}createRadioGroup({label:e,options:i,value:s,onChange:a}){const n=this.createInputGroup(e);oT(n,{role:"radiogroup",tabindex:-1,"aria-label":this.ctx.localeManager.t(e)});const o="ag-charts-dialog__button--active",r=[];for(const l of i){const{icon:c,altText:h}=l,u=this.ctx.localeManager.t(h),d=zS({icon:c,altText:u,onPress:()=>{for(const p of Array.from(n.children))p.classList.remove(o),p.ariaChecked="false";d.classList.add(o),d.ariaChecked="true",a(l.value)}},{"aria-checked":l.value===s,class:"ag-charts-dialog__button",role:"radio",title:u});l.value===s&&d.classList.add(o),n.appendChild(d),r.push(d)}return HF({orientation:"horizontal",buttons:r}),n}createSelect({altText:e,label:i,options:s,value:a,onChange:n}){const o=this.createInputGroup(i),r=this.ctx.localeManager.t(e),l=_et({value:a,options:s,onChange:n},{class:"ag-charts-dialog__select","aria-label":r,title:r});return o.append(l),o}createTextArea({placeholder:e,value:i,onChange:s}){const a=e?this.ctx.localeManager.t(e):void 0;return Pet({value:i,onChange:s},{placeholder:a})}createCheckbox({label:e,checked:i,onChange:s}){const a=`ag-charts__${e}`,n=this.createInputGroup(e,{for:a}),o=Ret({checked:i,onChange:s},{class:"ag-charts-dialog__checkbox",role:"switch",id:a});return n.append(o),n}createColorPicker({color:e,opacity:i,label:s,altText:a,onChange:n,onChangeHide:o,isMultiColor:r,hasMultiColorOption:l}){const c=this.createInputGroup(s),h=this.ctx.localeManager.t(a),u=zS({label:h,onPress:d=>{const{anchor:p,fallbackAnchor:g}=this.getColorPickerAnchors(u)??{};this.colorPicker.show({anchor:p,fallbackAnchor:g,color:e,opacity:i,isMultiColor:r,hasMultiColorOption:l,sourceEvent:d,onChange:(f,x,m,b)=>{u.style.setProperty("--color",f),u.classList.toggle("ag-charts-dialog__color-picker-button--multi-color",b),n(f,x,m,b)},onChangeHide:o})}},{"aria-label":h,tabindex:0,class:"ag-charts-dialog__color-picker-button",title:h});if(r)u.classList.toggle("ag-charts-dialog__color-picker-button--multi-color");else if(e){const d=UF.fromHexString(e),p=new UF(d.r,d.g,d.b,i);u.style.setProperty("--color",p.toHexString())}return c.append(u),this.hideFns.push(()=>{this.colorPicker.hide()}),c}createHeaderCloseButton(){return zS({icon:"close",altText:this.ctx.localeManager.t("iconAltTextClose"),onPress:()=>this.hide()},{class:"ag-charts-dialog__close-button"})}createInputGroup(e,i){const s=Er("div","ag-charts-dialog__input-group"),a=Er("label","ag-charts-dialog__input-group-label");return a.innerText=this.ctx.localeManager.t(e),i?.for&&a.setAttribute("for",i.for),s.appendChild(a),s}onLayoutComplete(e){this.seriesRect=e.series.paddedRect,this.reposition()}onKeyDown(e){e.altKey||e.ctrlKey||e.metaKey||e.isComposing||e.key!=="Escape"||this.hide()}reposition(){const{seriesRect:e,ctx:i}=this,s=i.domManager.getBoundingClientRect(),a=this.getPopoverElement();if(!e||!a)return;const n=ei.from(0,e.y),o=ei.from(s.width,e.height),r=ei.from(a),l=ei.from(.5,1);let c;if(e.width>1e3){const h=ei.sub(ei.add(n,ei.multiply(o,l)),ei.multiply(r,l));c=ei.sub(h,ei.from(0,M2.offset))}else{const h=ei.sub(ei.add(n,o),r);c=ei.sub(h,M2.offset)}this.updatePosition(c)}getColorPickerAnchors(e){if(e&&(this.colorPickerAnchorElement=e),!this.colorPickerAnchorElement)return;const i=this.colorPickerAnchorElement.getBoundingClientRect(),s=this.ctx.domManager.getBoundingClientRect(),a=ei.sub(ei.from(i.x,i.y),ei.from(s.left,s.top)),n=ei.add(a,ei.from(0,i.height+5)),o=ei.sub(a,ei.from(0,5));return{anchor:n,fallbackAnchor:o}}};YF.offset=60;var jet=YF,Get=class extends aT{constructor(){super(Er("div","ag-charts-dialog__drag-handle"));const t=new aT(Er("span",Bet("drag-handle")));t.setAriaHidden(!0),this.addChild(t)}},{Listeners:Vet,focusCursorAtEnd:Uet}=Oet._ModuleSupport,Wet=class extends jet{constructor(t){super(t,"settings"),this.events=new Vet,this.hideFns.push(()=>this.events.dispatch("hidden"))}addListener(t,e){return this.events.addListener(t,e)}show(t,e){const i=this.createLinearLineTab(t,e),s=this.createLinearTextTab(t,e);let a="dialogHeaderLine";Nr(t)?a="dialogHeaderChannel":Nz(t)?a="dialogHeaderFibonacciRange":t.type==="date-range"?a="dialogHeaderDateRange":t.type==="price-range"?a="dialogHeaderPriceRange":t.type==="date-price-range"&&(a="dialogHeaderDatePriceRange");const{tabs:n,initialFocus:o}=this.createTabs("ariaLabelSettingsTabBar",e.initialSelectedTab,{line:{label:a,panel:i},text:{label:"dialogHeaderText",panel:s.panel,onShow:s.onShow}});e.initialFocus=o,this.showWithChildren([n],e).classList.add("ag-charts-dialog--annotation-settings")}createLinearLineTab(t,e){const i=this.createTabPanel(),s=this.createInputGroupLine(),a=this.createInputGroupLine(),n="isMultiColor"in t,o=this.createColorPickerInput("line-color",t.getDefaultColor("line-color"),t.getDefaultOpacity("line-color"),n?t.isMultiColor:!1,n,e.onChangeLineColor,e.onChangeHideLineColor),r=this.createStrokeWidthSelect(t.strokeWidth??2,e.onChangeLineStyleWidth),l=this.createLineStyleRadioGroup(t.lineStyle??"solid",e.onChangeLineStyleType);if(s.append(o),"background"in t){const c=this.createColorPickerInput("fill-color",t.getDefaultColor("fill-color"),t.getDefaultOpacity("fill-color"),!1,!1,e.onChangeFillColor,e.onChangeHideFillColor);s.append(c),a.append(r)}else"showFill"in t?(s.append(this.createCheckbox({label:"dialogInputShowFill",checked:t.showFill??!0,onChange:c=>e.onChangeLine({showFill:c})})),a.append(r)):s.append(r);return a.append(l),i.append(s,a),"bands"in t&&i.append(this.createFibonacciRatioSelect(t.bands??10,c=>e.onChangeLine({bands:c}))),"extendStart"in t&&"extendEnd"in t&&i.append(this.createCheckbox({label:Nr(t)?"dialogInputExtendChannelStart":"dialogInputExtendLineStart",checked:t.extendStart??!1,onChange:c=>e.onChangeLine({extendStart:c})}),this.createCheckbox({label:Nr(t)?"dialogInputExtendChannelEnd":"dialogInputExtendLineEnd",checked:t.extendEnd??!1,onChange:c=>e.onChangeLine({extendEnd:c})})),"extendAbove"in t&&"extendBelow"in t&&i.append(this.createCheckbox({label:"dialogInputExtendAbove",checked:t.extendAbove??!1,onChange:c=>e.onChangeLine({extendAbove:c})}),this.createCheckbox({label:"dialogInputExtendBelow",checked:t.extendBelow??!1,onChange:c=>e.onChangeLine({extendBelow:c})})),"extendLeft"in t&&"extendRight"in t&&i.append(this.createCheckbox({label:"dialogInputExtendLeft",checked:t.extendLeft??!1,onChange:c=>e.onChangeLine({extendLeft:c})}),this.createCheckbox({label:"dialogInputExtendRight",checked:t.extendRight??!1,onChange:c=>e.onChangeLine({extendRight:c})})),"reverse"in t&&"showFill"in t&&i.append(this.createCheckbox({label:"dialogInputReverse",checked:t.reverse??!1,onChange:c=>e.onChangeLine({reverse:c})})),i}createLinearTextTab(t,e){const i=this.createTabPanel(),s=this.createTextArea({placeholder:"inputTextareaPlaceholder",value:t.text.label,onChange:u=>e.onChangeText({label:u})}),a=this.createInputGroupLine(),n=this.createFontSizeSelect(t.text.fontSize,e.onChangeTextFontSize),o=this.createColorPickerInput("text-color",t.text.color,1,!1,!1,e.onChangeTextColor,e.onChangeHideTextColor);a.append(n,o);const r=this.createInputGroupLine(),l=t.text.position==="inside"?"center":t.text.position,c=this.createPositionRadioGroup(l??"top",u=>e.onChangeText({position:u})),h=this.createAlignmentRadioGroup(t.text.alignment??"center",u=>e.onChangeText({alignment:u}));return r.append(c,h),i.append(s,a,r),{panel:i,onShow:()=>Uet(s)}}createColorPickerInput(t,e,i,s,a,n,o){const r=t==="fill-color"?"dialogInputFillColorPicker":"dialogInputColorPicker",l=t==="fill-color"?"dialogInputFillColorPickerAltText":"dialogInputColorPickerAltText";return this.createColorPicker({label:r,altText:l,color:e,opacity:i,isMultiColor:s,hasMultiColorOption:a,onChange:n,onChangeHide:o})}createStrokeWidthSelect(t,e){return this.createSelect({label:"dialogInputStrokeWidth",altText:"dialogInputStrokeWidthAltText",options:_z.map(({label:i,value:s})=>({label:i,value:`${s}`})),value:String(t),onChange:i=>e(Number(i))})}createFibonacciRatioSelect(t,e){return this.createSelect({label:"dialogInputFibonacciBands",altText:"dialogInputFibonacciBandsAltText",options:vJ.map(({label:i,value:s})=>({label:i,value:`${s}`})),value:String(t),onChange:i=>e(Number(i))})}createLineStyleRadioGroup(t,e){return this.createRadioGroup({label:"dialogInputLineStyle",options:[{icon:"line-style-solid",altText:"iconAltTextLineStyleSolid",value:"solid"},{icon:"line-style-dashed",altText:"iconAltTextLineStyleDashed",value:"dashed"},{icon:"line-style-dotted",altText:"iconAltTextLineStyleDotted",value:"dotted"}],value:t,onChange:e})}createFontSizeSelect(t,e){return this.createSelect({label:"dialogInputFontSize",altText:"dialogInputFontSizeAltText",options:Pz.map(({label:i,value:s})=>({label:i,value:String(s)})),value:String(t),onChange:i=>e(Number(i))})}createPositionRadioGroup(t,e){return this.createRadioGroup({label:"dialogInputPosition",options:[{icon:"position-top",altText:"iconAltTextPositionTop",value:"top"},{icon:"position-center",altText:"iconAltTextPositionCenter",value:"center"},{icon:"position-bottom",altText:"iconAltTextPositionBottom",value:"bottom"}],value:t,onChange:e})}createAlignmentRadioGroup(t,e){return this.createRadioGroup({label:"dialogInputAlign",options:[{icon:"align-left",altText:"iconAltTextAlignLeft",value:"left"},{icon:"align-center",altText:"iconAltTextAlignCenter",value:"center"},{icon:"align-right",altText:"iconAltTextAlignRight",value:"right"}],value:t,onChange:e})}};function rT(t){return t.gridPadding+t.seriesAreaPadding+t.tickSize+t.label.spacing}function Het(t,e,i){for(const{update:s}of Object.values(Aa))s(t,e,i)}var{BOOLEAN:Yet,OBJECT:lT,ChartUpdateType:Ket,InteractionState:Eo,ObserveChanges:Xet,PropertiesArray:Zet,Validate:FS,ChartAxisDirection:$et,Vec2:Oh,isValidDate:cT,keyProperty:Qet,valueProperty:qet,Selection:Jet,BBox:tit}=Jb._ModuleSupport,zf=class L3 extends Jb._ModuleSupport.BaseModuleInstance{constructor(e){super(),this.ctx=e,this.enabled=!0,this.toolbar=new sT(this.ctx),this.optionsToolbar=new EL(this.ctx,()=>{const i=this.state.getActive();if(i!=null)return Nh(this.annotationData.at(i))}),this.axesButtons=new nL,this.data=void 0,this.xKey=void 0,this.volumeKey=void 0,this.annotationData=new Zet(L3.createAnnotationDatum),this.defaults=new yJ,this.container=new Jb._ModuleSupport.Group({name:"static-annotations"}),this.annotations=new Jet(this.container,this.createAnnotationScene.bind(this)),this.settingsDialog=new Wet(this.ctx),this.textInput=new S7(this.ctx),this.postUpdateFns=[],this.state=this.setupStateMachine(),this.setupListeners(),this.setupDOM(),this.ctx.historyManager.addMementoOriginator(e.annotationManager),this.ctx.historyManager.addMementoOriginator(this.defaults),this.textInput.setKeyDownHandler(this.onTextInput.bind(this))}setupStateMachine(){const{ctx:e}=this;return new BS({resetToIdle:()=>{e.cursorManager.updateCursor("annotations"),e.interactionManager.popState(Eo.Annotations),e.tooltipManager.unsuppressTooltip("annotations"),this.hideOverlays(),this.optionsToolbar.hide(),this.deleteEphemeralAnnotations(),this.update()},hoverAtCoords:(i,s)=>{let a;return this.annotations.each((n,o,r)=>{const l=n.containsPoint(i.x,i.y);l&&(a??(a=r)),n.toggleHovered(l||s===r)}),this.ctx.cursorManager.updateCursor("annotations",a==null?void 0:this.annotations.at(a)?.getCursor()),a},getNodeAtCoords:(i,s)=>{const a=this.annotations.at(s);if(a)return a.getNodeAtCoords(i.x,i.y)},translate:(i,s)=>{const a=this.annotations.at(i),n=Nh(this.annotationData.at(i));if(!(!a||!n))return this.translateNode(a,n,s)},copy:i=>{const s=this.annotations.at(i),a=Nh(this.annotationData.at(i));if(!(!s||!a))return this.createAnnotationDatumCopy(s,a)},paste:i=>{this.createAnnotation(i.type,i,!1),this.postUpdateFns.push(()=>{this.state.transitionAsync("selectLast"),this.state.transitionAsync("copy")})},select:(i,s)=>{const{annotations:a,optionsToolbar:n,toolbar:o,ctx:{interactionManager:r,tooltipManager:l}}=this;this.hideOverlays(),o.clearActiveButton(),o.resetButtonIcons();const c=i!=null?a.at(i):null,h=s!=null?a.at(s):null;h===c&&c!=null||(h?.toggleActive(!1),n.hide(),c?(r.pushState(Eo.AnnotationsSelected),c.toggleActive(!0),l.suppressTooltip("annotations"),n.updateButtons(this.annotationData.at(i)),this.postUpdateFns.push(()=>{n.show(),n.setAnchorScene(c)})):(r.popState(Eo.AnnotationsSelected),r.popState(Eo.Annotations),l.unsuppressTooltip("annotations")),this.deleteEphemeralAnnotations(),this.update())},selectLast:()=>(this.ctx.interactionManager.pushState(Eo.AnnotationsSelected),this.annotationData.length-1),startInteracting:()=>{this.ctx.interactionManager.pushState(Eo.Annotations)},stopInteracting:()=>{this.ctx.interactionManager.popState(Eo.Annotations)},create:(i,s)=>{this.createAnnotation(i,s)},delete:i=>{this.annotationData.splice(i,1)},deleteAll:()=>{this.annotationData.splice(0,this.annotationData.length)},validatePoint:i=>{const s=this.getAnnotationContext();return s?Tn(s,i):!0},getAnnotationType:i=>T7(this.annotationData[i].type),datum:i=>this.annotationData.at(i),node:i=>this.annotations.at(i),recordAction:i=>{this.recordActionAfterNextUpdate(i)},update:()=>{this.postUpdateFns.push(()=>{const i=this.state.getActive(),s=i!=null?this.annotations.at(i):null;s!=null&&this.optionsToolbar.setAnchorScene(s)}),this.update()},showTextInput:i=>{const s=Nh(this.annotationData.at(i));if(!this.annotations.at(i)||!s||!("getTextInputCoords"in s)||!("getTextPosition"in s))return;const n={color:s.color,fontFamily:s.fontFamily,fontSize:s.fontSize,fontStyle:s.fontStyle,fontWeight:s.fontWeight,placeholderColor:s.getPlaceholderColor()},o=this.getAnnotationContext(),r=c=>Oh.add(s.getTextInputCoords(o,c),Oh.required(this.seriesRect)),l=()=>s.getTextPosition();this.textInput.show({styles:n,layout:{getTextInputCoords:r,getTextPosition:l,alignment:s.alignment,textAlign:s.textAlign,width:s.width},text:s.text,placeholderText:s.placeholderText,onChange:(c,h)=>{this.state.transition("updateTextInputBBox",h)}}),this.ctx.cursorManager.updateCursor("annotations")},hideTextInput:()=>{this.textInput.hide()},updateTextInputColor:i=>{this.textInput.updateColor(i)},updateTextInputFontSize:i=>{const s=this.textInput.updateFontSize(i);this.state.transition("updateTextInputBBox",s)},updateTextInputBBox:i=>{this.state.transition("updateTextInputBBox",i)},showAnnotationOptions:i=>{const s=this.annotations.at(i);!s||Wl(this.annotationData.at(i))||(this.optionsToolbar.updateButtons(this.annotationData.at(i)),this.optionsToolbar.show(),this.optionsToolbar.setAnchorScene(s))},showAnnotationSettings:(i,s,a="line")=>{const n=this.annotationData.at(i);if(!pS(n)&&!Nr(n)&&!Ef(n)||Wl(n))return;const o=c=>(h,u,d,p)=>{this.setColorAndDefault(n.type,c,h,u,d,p),this.optionsToolbar.updateColorPickerColor(c,u,d,p)},r=c=>()=>{this.recordActionAfterNextUpdate(`Change ${n.type} ${c} to ${n.getDefaultColor(c)}`,["annotations","defaults"]),this.update()},l={initialSelectedTab:a,ariaLabel:this.ctx.localeManager.t("ariaLabelAnnotationSettingsDialog"),sourceEvent:s,onChangeLine:c=>{this.state.transition("lineProps",c),c.bands&&this.defaults.setDefaultFibonacciBands(n.type,c.bands)},onChangeText:c=>{this.state.transition("lineText",c),c.alignment&&this.defaults.setDefaultLineTextAlignment(n.type,c.alignment),c.position&&this.defaults.setDefaultLineTextPosition(n.type,c.position),this.recordActionAfterNextUpdate(`Change ${n.type} text ${Object.entries(c).map(([h,u])=>`${h} to ${u}`).join(", ")}`)},onChangeFillColor:o("fill-color"),onChangeHideFillColor:r("fill-color"),onChangeLineColor:o("line-color"),onChangeHideLineColor:r("line-color"),onChangeLineStyleType:c=>{this.setLineStyleTypeAndDefault(n.type,c),this.optionsToolbar.updateLineStyleType(wf.find(h=>h.value===c)??wf[0])},onChangeLineStyleWidth:c=>{this.setLineStyleWidthAndDefault(n.type,c),this.optionsToolbar.updateStrokeWidth({strokeWidth:c,value:c,label:String(c)})},onChangeTextColor:o("text-color"),onChangeHideTextColor:r("text-color"),onChangeTextFontSize:c=>{this.setFontSizeAndDefault(n.type,c)}};this.settingsDialog.show(n,l)}})}setupListeners(){const{ctx:e,optionsToolbar:i,settingsDialog:s,toolbar:a}=this,{All:n,Default:o,Annotations:r,AnnotationsSelected:l,ZoomDrag:c}=Eo,h=e.regionManager.getRegion("series"),u=e.regionManager.getRegion("root"),d=o|c|r|l;this.destroyFns.push(h.addListener("hover",this.onHover.bind(this),n),h.addListener("click",this.onClick.bind(this),n),h.addListener("dblclick",this.onDoubleClick.bind(this),n),h.addListener("drag-start",this.onDragStart.bind(this),d),h.addListener("drag",this.onDrag.bind(this),d),h.addListener("drag-end",this.onDragEnd.bind(this),n),e.interactionManager.addListener("keydown",this.onKeyDown.bind(this),n),e.interactionManager.addListener("keyup",this.onKeyUp.bind(this),n),u.addListener("click",this.onCancel.bind(this),n),e.annotationManager.addListener("restore-annotations",this.onRestoreAnnotations.bind(this)),e.layoutManager.addListener("layout:complete",this.onLayoutComplete.bind(this)),e.updateService.addListener("pre-scene-render",this.onPreRender.bind(this)),e.zoomManager.addListener("zoom-change",()=>this.onResize()),e.domManager.addListener("resize",()=>this.onResize()),a.addListener("cancel-create-annotation",()=>{this.cancel(),this.reset(),this.update()}),a.addListener("pressed-create-annotation",({annotation:p})=>{this.cancel(),this.ctx.interactionManager.pushState(Eo.Annotations),this.state.transition(p),this.update()}),a.addListener("pressed-clear",()=>{this.clear()}),a.addListener("pressed-show-menu",()=>{this.cancel(),this.reset()}),a.addListener("pressed-unrelated",()=>{this.reset()}),i.addListener("pressed-delete",()=>{this.cancel(),this.delete(),this.reset()}),i.addListener("pressed-settings",({sourceEvent:p})=>{this.state.transition("toolbarPressSettings",p)}),i.addListener("pressed-lock",()=>{this.update()}),i.addListener("hid-overlays",()=>{this.settingsDialog.hide()}),i.addListener("saved-color",({type:p,colorPickerType:g,color:f})=>{this.recordActionAfterNextUpdate(`Change ${p} ${g} to ${f}`,["annotations","defaults"])}),i.addListener("updated-color",({type:p,colorPickerType:g,colorOpacity:f,color:x,opacity:m,isMultiColor:b})=>{this.setColorAndDefault(p,g,f,x,m,b)}),i.addListener("updated-font-size",({type:p,fontSize:g})=>{this.setFontSizeAndDefault(p,g)}),i.addListener("updated-line-style",({type:p,lineStyleType:g})=>{this.setLineStyleTypeAndDefault(p,g)}),i.addListener("updated-line-width",({type:p,strokeWidth:g})=>{this.setLineStyleWidthAndDefault(p,g)}),s.addListener("hidden",()=>{this.optionsToolbar.clearActiveButton()}))}setupDOM(){const{ctx:e,toolbar:i}=this;this.destroyFns.push(e.annotationManager.attachNode(this.container),()=>e.domManager.removeStyles(Ch),()=>i.destroy())}async processData(e){if(!this.enabled||this.data==null||this.xKey==null||this.volumeKey==null)return;const i=[Qet(this.xKey,void 0,{id:"date"}),qet(this.volumeKey,"number",{id:"volume"})],{dataModel:s,processedData:a}=await e.request("annotations",this.data,{props:i});this.dataModel=s,this.processedData=a}createAnnotationScene(e){if(e.type in Aa)return new Aa[e.type].scene;throw new Error(`AG Charts - Cannot create annotation scene of type [${e.type}], expected one of [${Object.keys(Aa)}], ignoring.`)}static createAnnotationDatum(e){if(e.type in Aa)return new Aa[e.type].datum().set(e);throw new Error(`AG Charts - Cannot create annotation datum of unknown type [${e.type}], expected one of [${Object.keys(Aa)}], ignoring.`)}createAnnotation(e,i,s=!0){if(this.annotationData.push(i),s){const a=this.ctx.annotationManager.getAnnotationTypeStyles(e);a&&i.set(a),this.defaults.applyDefaults(i)}this.injectDatumDependencies(i),this.update()}injectDatumDependencies(e){"setLocaleManager"in e&&e.setLocaleManager(this.ctx.localeManager),"getVolume"in e&&(e.getVolume=this.getDatumRangeVolume.bind(this))}getDatumRangeVolume(e,i){const{dataModel:s,processedData:a}=this;if(!cT(e)||!cT(i)||!s||!a||this.volumeKey==null)return;e>i&&([e,i]=[i,e]);const n=s.resolveKeysById({id:"annotations"},"date",a),o=s.resolveColumnById({id:"annotations"},"volume",a);return a.rawData.reduce((r,l,c)=>{const h=n[c];return cT(h)&&h>=e&&h<=i?r+o[c]:r},0)}translateNode(e,i,s){const a=this.getAnnotationConfig(i),n=this.getAnnotationContext();n&&a.translate(e,i,s,n)}createAnnotationDatumCopy(e,i){const s=this.getAnnotationConfig(i),a=new s.datum;a.set(i.toJson());const n=this.getAnnotationContext();if(n)return s.copy(e,i,a,n)}getAnnotationConfig(e){if(e.type in Aa)return Aa[e.type];throw new Error(`AG Charts - Cannot get annotation config of unknown type [${e.type}], expected one of [${Object.keys(Aa)}], ignoring.`)}onRestoreAnnotations(e){this.enabled&&(this.clear(),this.annotationData.set(e.annotations),this.update())}onLayoutComplete(e){const i=e.series.paddedRect;this.seriesRect=i;for(const s of e.axes??[])s.direction===Jb._ModuleSupport.ChartAxisDirection.X?this.xAxis=this.getAxis(s,i,this.xAxis?.button):this.yAxis=this.getAxis(s,i,this.yAxis?.button)}onPreRender(){this.updateAnnotations(),this.state.transition("render")}getAxis(e,i,s){const a=this.ctx.axisManager.getAxisContext(e.direction)[0],{position:n="bottom",direction:o}=a,r=e.gridPadding+e.seriesAreaPadding,l=new tit(0,0,i.width,i.height).grow(r,n),c=a.direction===$et.X?"vertical":"horizontal",{axesButtons:h}=this;if(this.enabled&&h.enabled&&(h.axes==="xy"||h.axes===o)){s??(s=new VF(this.ctx,a,p=>this.onAxisButtonClick(p,c),i));const d=rT(e);s.update(i,d)}else s?.destroy(),s=void 0;return{layout:e,context:a,bounds:l,button:s}}recordActionAfterNextUpdate(e,i=["annotations"]){const{defaults:s,ctx:{annotationManager:a,historyManager:n}}=this,o=i.map(r=>r==="defaults"?s:a);this.postUpdateFns.push(()=>{n.record(e,...o)})}setColorAndDefault(e,i,s,a,n,o){this.state.transition("color",{colorPickerType:i,colorOpacity:s,color:a,opacity:n,isMultiColor:o}),this.defaults.setDefaultColor(e,i,s,a,n,o)}setFontSizeAndDefault(e,i){this.state.transition("fontSize",i),this.defaults.setDefaultFontSize(e,i),this.recordActionAfterNextUpdate(`Change ${e} font size to ${i}`,["annotations","defaults"])}setLineStyleTypeAndDefault(e,i){this.state.transition("lineStyle",{type:i}),this.defaults.setDefaultLineStyleType(e,i),this.recordActionAfterNextUpdate(`Change ${e} line style to ${i}`,["annotations","defaults"])}setLineStyleWidthAndDefault(e,i){this.state.transition("lineStyle",{strokeWidth:i}),this.defaults.setDefaultLineStyleWidth(e,i),this.recordActionAfterNextUpdate(`Change ${e} stroke width to ${i}`,["annotations","defaults"])}updateAnnotations(){const{annotationData:e,annotations:i,seriesRect:s,ctx:{annotationManager:a}}=this,n=this.getAnnotationContext();!s||!n||(a.updateData(e.toJson().filter(o=>!Wl(o))),this.toolbar.toggleClearButtonEnabled(e.length>0),i.update(e??[],void 0,o=>o.id).each((o,r)=>{if(!this.validateDatum(r)){o.visible=!1;return}this.injectDatumDependencies(r),Het(o,r,n)}),this.postUpdateFns.forEach(o=>o()),this.postUpdateFns=[])}validateDatum(e){const i=this.getAnnotationContext();return i?e.isValidWithContext(i,`Annotation [${e.type}] `):!0}getAnnotationContext(){const{seriesRect:e,xAxis:i,yAxis:s}=this;if(e&&i&&s)return{seriesRect:e,xAxis:{...i.context,bounds:i.bounds,labelPadding:rT(i.layout)},yAxis:{...s.context,bounds:s.bounds,labelPadding:rT(i.layout)}}}onHover(e){const{state:i}=this,s=this.getAnnotationContext();if(!s)return;const a=e.sourceEvent.shiftKey,n=Oh.from(e),o=Ie(n,s);i.transition("hover",{offset:n,point:o,shiftKey:a,context:s})}onClick(e){const{state:i}=this,s=this.getAnnotationContext();if(!s)return;const a=e.sourceEvent.shiftKey,n=Ie(Oh.from(e),s),o=this.textInput.getValue(),r=this.textInput.getBBox();i.transition("click",{point:n,shiftKey:a,textInputValue:o,bbox:r})}onDoubleClick(e){const{state:i}=this;if(!this.getAnnotationContext())return;const a=Oh.from(e);i.transition("dblclick",{offset:a})}onAxisButtonClick(e,i){this.cancel(),this.reset();const s=this.getAnnotationContext();if(!this.annotationData||!s)return;const{state:a,ctx:{interactionManager:n}}=this;n.pushState(Eo.Annotations);const o=i==="horizontal";if(a.transition(o?"horizontal-line":"vertical-line"),this.optionsToolbar.hide(),!e)return;const r=Ie(e,s);Tn(s,r)&&(a.transition("click",{point:r,shiftKey:!1}),this.update())}onResize(){const e=this.textInput.getValue(),i=this.textInput.getBBox();this.state.transition("resize",{textInputValue:e,bbox:i})}onDragStart(e){const{state:i}=this,s=this.getAnnotationContext();if(!s)return;const a=Oh.from(e),n=Ie(a,s),o=this.textInput.getValue(),r=this.textInput.getBBox();i.transition("dragStart",{context:s,offset:a,point:n,textInputValue:o,bbox:r})}onDrag(e){const{state:i}=this,s=this.getAnnotationContext();if(!s)return;const a=Oh.from(e),n=Ie(a,s),o=e.sourceEvent.shiftKey,r=this.textInput.getValue(),l=this.textInput.getBBox();i.transition("drag",{context:s,offset:a,point:n,shiftKey:o,textInputValue:r,bbox:l})}onDragEnd(){this.state.transition("dragEnd")}onCancel(){this.cancel(),this.reset()}onDelete(){this.textInput.isVisible()||(this.cancel(),this.delete(),this.reset(),this.update())}onTextInput(e){const{state:i}=this,s=this.getAnnotationContext();if(!s)return;const{key:a,shiftKey:n}=e,o=this.textInput.getValue(),r=this.textInput.getBBox();i.transition("textInput",{key:a,shiftKey:n,textInputValue:o,bbox:r,context:s})}onKeyDown(e){const{state:i}=this,s=this.getAnnotationContext();if(!s)return;const{sourceEvent:a}=e,{shiftKey:n,ctrlKey:o,metaKey:r}=a,l=o||r,c=o||n;this.state.transition("keyDown",{shiftKey:n,context:s});const h={x:0,y:0},u=Math.max(s?.xAxis.scale.bandwidth??0,c?10:1),d=Math.max(s?.yAxis.scale.bandwidth??0,c?10:1);switch(a.key){case"ArrowDown":h.y=d;break;case"ArrowUp":h.y=-d;break;case"ArrowLeft":h.x=-u;break;case"ArrowRight":h.x=u;break;case"Escape":this.onCancel();return;case"Backspace":case"Delete":this.onDelete();return}if((h.x||h.y)&&(i.transition("translate",{translation:h}),a.stopPropagation(),a.preventDefault()),!!l)switch(a.key){case"c":i.transition("copy");return;case"x":i.transition("cut"),this.recordActionAfterNextUpdate("Cut annotation");return;case"v":i.transition("paste"),this.recordActionAfterNextUpdate("Paste annotation");return}}onKeyUp(e){const{shiftKey:i}=e.sourceEvent,s=this.getAnnotationContext();s&&(this.state.transition("keyUp",{shiftKey:i,context:s}),this.state.transition("translateEnd"))}clear(){this.cancel(),this.deleteAll(),this.reset()}reset(){this.state.transition("reset")}cancel(){this.state.transition("cancel")}delete(){this.state.transition("delete")}deleteAll(){this.state.transition("deleteAll")}deleteEphemeralAnnotations(){for(const[e,i]of this.annotationData.entries())Wl(i)&&this.annotationData.splice(e,1)}hideOverlays(){this.settingsDialog.hide(),this.toolbar.hideOverlays(),this.optionsToolbar.hideOverlays()}update(e=Ket.PRE_SCENE_RENDER){this.ctx.updateService.update(e,{skipAnimations:!0})}};y([Xet((t,e,i)=>{const{ctx:{annotationManager:s,stateManager:a}}=t;e!==i&&(t.toolbar?.toggleVisibility(!!e),i===!1&&e===!0?a.restoreState(s):e===!1&&t.clear())}),FS(Yet)],zf.prototype,"enabled",2),y([FS(lT)],zf.prototype,"toolbar",2),y([FS(lT)],zf.prototype,"optionsToolbar",2),y([FS(lT)],zf.prototype,"axesButtons",2);var eit=zf,iit=(P(),_(w)),{ThemeSymbols:zt}=iit._ModuleSupport,On={stroke:zt.DEFAULT_ANNOTATION_COLOR,strokeOpacity:1,strokeWidth:2},hs={fill:zt.DEFAULT_ANNOTATION_HANDLE_FILL,strokeOpacity:1,strokeWidth:2},Ff={color:zt.DEFAULT_TEXT_ANNOTATION_COLOR,fontSize:14,fontFamily:zt.DEFAULT_FONT_FAMILY},KF={...Ff,enabled:!0,color:"white",fill:zt.DEFAULT_ANNOTATION_COLOR,fontSize:12},jS={...Ff,color:zt.DEFAULT_TEXT_ANNOTATION_COLOR,textAlign:"left"},ic={...Ff,position:"top",alignment:"center",color:zt.DEFAULT_ANNOTATION_COLOR},hT={...Ff,fontSize:12,color:zt.DEFAULT_ANNOTATION_STATISTICS_COLOR,fill:zt.DEFAULT_ANNOTATION_STATISTICS_FILL,stroke:zt.DEFAULT_ANNOTATION_STATISTICS_STROKE,strokeWidth:1,divider:{stroke:zt.DEFAULT_ANNOTATION_STATISTICS_DIVIDER_STROKE,strokeWidth:1,strokeOpacity:.5}},uT={...On,background:{fill:zt.DEFAULT_ANNOTATION_BACKGROUND_FILL,fillOpacity:.2},handle:{...hs},text:{...ic},statistics:{...hT}},sit={buttons:[{icon:"trend-line-drawing",tooltip:"toolbarAnnotationsLineAnnotations",value:"line-menu"},{icon:"fibonacci-retracement-drawing",tooltip:"toolbarAnnotationsFibonacciAnnotations",value:"fibonacci-menu"},{icon:"text-annotation",tooltip:"toolbarAnnotationsTextAnnotations",value:"text-menu"},{icon:"arrow-drawing",tooltip:"toolbarAnnotationsShapeAnnotations",value:"shape-menu"},{icon:"measurer-drawing",tooltip:"toolbarAnnotationsMeasurerAnnotations",value:"measurer-menu"},{icon:"delete",tooltip:"toolbarAnnotationsClearAll",value:"clear"}]},ait={buttons:[{icon:"text-annotation",tooltip:"toolbarAnnotationsTextColor",value:"text-color"},{icon:"line-color",tooltip:"toolbarAnnotationsLineColor",value:"line-color"},{icon:"fill-color",tooltip:"toolbarAnnotationsFillColor",value:"fill-color"},{tooltip:"toolbarAnnotationsTextSize",value:"text-size"},{tooltip:"toolbarAnnotationsLineStrokeWidth",value:"line-stroke-width"},{icon:"line-style-solid",tooltip:"toolbarAnnotationsLineStyle",value:"line-style-type"},{icon:"settings",tooltip:"toolbarAnnotationsSettings",value:"settings"},{icon:"unlocked",tooltip:"toolbarAnnotationsLock",ariaLabel:"toolbarAnnotationsLock",checkedOverrides:{icon:"locked",tooltip:"toolbarAnnotationsUnlock"},value:"lock"},{icon:"delete",tooltip:"toolbarAnnotationsDelete",value:"delete"}]},nit={enabled:!1,line:{...On,handle:{...hs},text:{...ic}},"horizontal-line":{...On,handle:{...hs},axisLabel:{...KF},text:{...ic}},"vertical-line":{...On,handle:{...hs},axisLabel:{...KF},text:{...ic}},"disjoint-channel":{...On,background:{fill:zt.DEFAULT_ANNOTATION_BACKGROUND_FILL,fillOpacity:.2},handle:{...hs},text:{...ic}},"parallel-channel":{...On,middle:{lineDash:[6,5],strokeWidth:1},background:{fill:zt.DEFAULT_ANNOTATION_BACKGROUND_FILL,fillOpacity:.2},handle:{...hs},text:{...ic}},"fibonacci-retracement":{...On,strokes:zt.DEFAULT_FIBONACCI_STROKES,rangeStroke:zt.DEFAULT_ANNOTATION_COLOR,handle:{...hs},text:{...ic,position:"center"},label:{...Ff,color:void 0,fontSize:10}},callout:{...On,...jS,color:zt.DEFAULT_LABEL_COLOUR,handle:{...hs},fill:zt.DEFAULT_ANNOTATION_BACKGROUND_FILL,fillOpacity:.2},comment:{...jS,color:"white",fontWeight:700,handle:{...hs},fill:zt.DEFAULT_ANNOTATION_COLOR},note:{...jS,color:zt.DEFAULT_TEXTBOX_COLOR,fill:zt.DEFAULT_ANNOTATION_COLOR,stroke:zt.DEFAULT_ANNOTATION_HANDLE_FILL,strokeWidth:1,strokeOpacity:1,handle:{...hs},background:{fill:zt.DEFAULT_TEXTBOX_FILL,stroke:zt.DEFAULT_TEXTBOX_STROKE,strokeWidth:1}},text:{...jS,handle:{...hs}},arrow:{...On,handle:{...hs},text:{...ic}},"arrow-up":{fill:zt.PALETTE_UP_FILL,handle:{...hs,stroke:zt.DEFAULT_ANNOTATION_COLOR}},"arrow-down":{fill:zt.PALETTE_DOWN_FILL,handle:{...hs,stroke:zt.DEFAULT_ANNOTATION_COLOR}},"date-range":{...uT},"price-range":{...uT},"date-price-range":{...uT},"quick-date-price-range":{up:{...On,fill:zt.DEFAULT_ANNOTATION_BACKGROUND_FILL,fillOpacity:.2,handle:{...hs},statistics:{...hT,color:"#fff",fill:zt.DEFAULT_ANNOTATION_BACKGROUND_FILL,strokeWidth:0,divider:{stroke:"#fff",strokeWidth:1,strokeOpacity:.5}}},down:{...On,stroke:zt.DEFAULT_ANNOTATION_STATISTICS_DOWN_STROKE,fill:zt.DEFAULT_ANNOTATION_STATISTICS_DOWN_FILL,fillOpacity:.2,handle:{...hs,stroke:zt.DEFAULT_ANNOTATION_STATISTICS_DOWN_STROKE},statistics:{...hT,color:"#fff",fill:zt.DEFAULT_ANNOTATION_STATISTICS_DOWN_FILL,strokeWidth:0,divider:{stroke:"#fff",strokeWidth:1,strokeOpacity:.5}}}},axesButtons:{enabled:!0},toolbar:sit,optionsToolbar:ait},oit={type:"root",optionsKey:"annotations",packageType:"enterprise",chartTypes:["cartesian"],moduleFactory:t=>new eit(t),themeTemplate:{annotations:nit}},dT=(P(),_(w)),XF=(P(),_(w)),{BaseProperties:rit,ObserveChanges:lit,ProxyProperty:cit,Validate:Eh,NUMBER:GS,POSITIVE_NUMBER:ZF,RATIO:hit,createElement:uit,calculatePlacement:dit}=XF._ModuleSupport,wo=class extends rit{constructor(){super(),this.opacity=1,this.loadedSynchronously=!0,this.containerWidth=0,this.containerHeight=0,this.onLoad=void 0,this.onImageLoad=()=>{this.loadedSynchronously||(this.node.visible=!1,this.performLayout(this.containerWidth,this.containerHeight),this.onLoad?.())},this.imageElement=uit("img"),this.imageElement.onload=this.onImageLoad,this.node=new XF._ModuleSupport.Image(this.imageElement)}get complete(){return this.imageElement.width>0&&this.imageElement.height>0}performLayout(t,e){this.containerWidth=t,this.containerHeight=e;const i={x:0,y:0,width:t,height:e},s=dit(this.imageElement.width,this.imageElement.height,i,this);return this.node.setProperties(this.complete?{visible:!0,opacity:this.opacity,...s}:{visible:!1}),s}};y([Eh(GS,{optional:!0})],wo.prototype,"top",2),y([Eh(GS,{optional:!0})],wo.prototype,"right",2),y([Eh(GS,{optional:!0})],wo.prototype,"bottom",2),y([Eh(GS,{optional:!0})],wo.prototype,"left",2),y([Eh(ZF,{optional:!0})],wo.prototype,"width",2),y([Eh(ZF,{optional:!0})],wo.prototype,"height",2),y([Eh(hit)],wo.prototype,"opacity",2),y([cit("imageElement.src"),lit(t=>t.loadedSynchronously=t.complete)],wo.prototype,"url",2);var{ActionOnSet:pit,OBJECT:git,Validate:fit}=dT._ModuleSupport,$F=class extends dT._ModuleSupport.Background{constructor(){super(...arguments),this.image=new wo}onLayoutComplete(t){if(super.onLayoutComplete(t),this.image){const{width:e,height:i}=t.chart;this.image.performLayout(e,i)}}onImageLoad(){this.ctx.updateService.update(dT._ModuleSupport.ChartUpdateType.SCENE_RENDER)}};y([fit(git,{optional:!0}),pit({newValue(t){this.node.appendChild(t.node),t.onLoad=()=>this.onImageLoad()},oldValue(t){this.node.removeChild(t.node),t.onLoad=void 0}})],$F.prototype,"image",2);var yit={type:"root",optionsKey:"background",packageType:"enterprise",chartTypes:["cartesian","polar","hierarchy","topology","flow-proportion","standalone","gauge"],moduleFactory:t=>new $F(t)},hbt=(P(),_(w)),QF=(P(),_(w)),{BOOLEAN:mit,ActionOnSet:xit,LayoutElement:bit,Logger:Sit,Menu:vit,Validate:Mit}=QF._ModuleSupport,pT=[{label:"toolbarSeriesTypeOHLC",icon:"ohlc-series",value:"ohlc"},{label:"toolbarSeriesTypeCandles",icon:"candlestick-series",value:"candlestick"},{label:"toolbarSeriesTypeHollowCandles",icon:"hollow-candlestick-series",value:"hollow-candlestick"},{label:"toolbarSeriesTypeLine",icon:"line-series",value:"line"},{label:"toolbarSeriesTypeStepLine",icon:"step-line-series",value:"step-line"},{label:"toolbarSeriesTypeHLC",icon:"hlc-series",value:"hlc"},{label:"toolbarSeriesTypeHighLow",icon:"high-low-series",value:"high-low"}],qF=class extends QF._ModuleSupport.BaseModuleInstance{constructor(t){super(),this.ctx=t,this.enabled=!1,this.menu=new vit(this.ctx,"chart-toolbar"),this.toolbar=t.sharedToolbar.getSharedToolbar("chartToolbar"),this.destroyFns.push(this.toolbar.addToolbarListener("button-pressed",this.onButtonPressed.bind(this)),t.layoutManager.registerElement(bit.ToolbarLeft,this.onLayoutStart.bind(this)),()=>this.toolbar.destroy())}onLayoutStart(t){this.enabled&&(this.updateButton(),this.toolbar.layout(t.layoutBox))}onButtonPressed({event:t,buttonBounds:e}){this.menu.setAnchor({x:e.x+e.width+6,y:e.y}),this.menu.show({items:pT,menuItemRole:"menuitemradio",ariaLabel:this.ctx.localeManager.t("toolbarSeriesTypeDropdown"),class:"ag-charts-chart-toolbar__menu",value:this.getChartType(),sourceEvent:t.sourceEvent,onPress:i=>{this.setChartType(i.value),this.hidePopover()},onHide:()=>{this.toolbar.clearActiveButton()}}),this.toolbar.toggleActiveButtonByIndex(0)}updateButton(){const t=this.getChartType(),e=pT.find(i=>i.value===t)?.icon;e!=null&&this.toolbar.updateButtons([{icon:e,tooltip:"toolbarSeriesTypeDropdown"}])}hidePopover(){this.toolbar.clearActiveButton(),this.menu.hide()}setChartType(t){const e={chartType:t};this.ctx.chartService.publicApi?.updateDelta(e).catch(i=>Sit.error(i))}getChartType(){const t=this.ctx.chartService.publicApi?.getOptions()?.chartType;return t==null||!pT.some(e=>e.value===t)?"candlestick":t}};y([Mit(mit),xit({changeValue(t){this.toolbar?.setHidden(!t)}})],qF.prototype,"enabled",2);var Dit={type:"root",optionsKey:"chartToolbar",packageType:"enterprise",chartTypes:["cartesian"],moduleFactory:t=>new qF(t)},Ait=(P(),_(w)),kd=(P(),_(w)),VS="ag-charts-context-menu",US="ag-charts-dark-context-menu",{BOOLEAN:JF,Validate:t4,createElement:gT,initMenuKeyNav:Iit,makeAccessibleClickListener:kit,ContextMenuRegistry:jf,Logger:e4}=kd._ModuleSupport,fT="context-menu";function Lit(t,e){const{children:i}=t??{};if(!i)return[];const s=[];for(const a of Array.from(i))a instanceof e&&s.push(a);return s}var yT=class extends kd._ModuleSupport.BaseModuleInstance{constructor(t){if(super(),this.ctx=t,this.enabled=!0,this.darkTheme=!1,this.extraActions=[],this.extraNodeActions=[],this.extraSeriesAreaActions=[],this.extraLegendItemActions=[],this.pickedNode=void 0,this.showEvent=void 0,this.x=0,this.y=0,this.interactionManager=t.interactionManager,this.registry=t.contextMenuRegistry,this.groups={default:[],extra:[],extraSeriesArea:[],extraNode:[],extraLegendItem:[]},this.element=t.domManager.addChild("canvas-overlay",fT),this.element.classList.add(VS),this.element.addEventListener("contextmenu",e=>e.preventDefault()),this.destroyFns.push(()=>this.element.parentNode?.removeChild(this.element)),this.doClose(),this.destroyFns.push(t.domManager.addListener("hidden",()=>this.hide())),typeof MutationObserver<"u"){const e=new MutationObserver(()=>{this.menuElement&&this.element.contains(this.menuElement)&&this.reposition()});e.observe(this.element,{childList:!0}),this.mutationObserver=e,this.destroyFns.push(()=>e.disconnect())}this.destroyFns.push(this.registry.registerDefaultAction({id:"download",type:"all",label:"contextMenuDownload",action:()=>{const e=t.chartService.title;let i="image";e?.enabled&&e?.text!==void 0&&(i=e.text.replace(/\.+/,"")),this.ctx.chartService.publicApi?.download({fileName:i}).catch(s=>{e4.error("Unable to download chart",s)})}})),this.destroyFns.push(this.registry.addListener(e=>this.onContext(e)))}onContext(t){if(!this.enabled)return;t.preventDefault(),this.showEvent=t.sourceEvent,this.x=t.x,this.y=t.y,this.groups.default=this.registry.filterActions(t.type),this.pickedNode=void 0,this.pickedLegendItem=void 0,this.groups.extra=this.extraActions.map(({label:r,action:l})=>({type:"all",label:r,action:l})),this.groups.extraSeriesArea=[],this.groups.extraNode=[],jf.check("series-area",t)&&(this.pickedNode=t.context.pickedNode,this.groups.extraSeriesArea=this.extraSeriesAreaActions.map(({label:r,action:l})=>({type:"series-area",label:r,action:l})),this.pickedNode&&(this.groups.extraNode=this.extraNodeActions.map(({label:r,action:l})=>({type:"node",label:r,action:l})))),this.groups.extraLegendItem=[],jf.check("legend",t)&&(this.pickedLegendItem=t.context.legendItem,this.pickedLegendItem&&(this.groups.extraLegendItem=this.extraLegendItemActions.map(({label:r,action:l})=>({type:"legend",label:r,action:l}))));const{default:e,extra:i,extraSeriesArea:s,extraNode:a,extraLegendItem:n}=this.groups;[e,i,s,a,n].reduce((r,l)=>l.length+r,0)!==0&&this.show(t.sourceEvent)}show(t){this.interactionManager.pushState(kd._ModuleSupport.InteractionState.ContextMenu),this.element.classList.toggle(US,this.darkTheme);const e=this.renderMenu();this.menuCloser?.close(),this.menuElement?this.element.replaceChild(e,this.menuElement):this.element.appendChild(e),this.menuElement=e,this.element.style.display="block";const i=Lit(e,HTMLButtonElement);this.menuCloser=Iit({menu:e,buttons:i,orientation:"vertical",sourceEvent:t,autoCloseOnBlur:!0,closeCallback:()=>this.doClose()})}hide(){this.menuCloser?.close()}doClose(){this.interactionManager.popState(kd._ModuleSupport.InteractionState.ContextMenu),this.menuElement&&(this.element.removeChild(this.menuElement),this.menuElement=void 0,this.menuCloser=void 0),this.element.style.display="none"}renderMenu(){const t=gT("div");return t.classList.add(`${VS}__menu`),t.classList.toggle(US,this.darkTheme),t.role="menu",this.appendMenuGroup(t,this.groups.default,!1),this.appendMenuGroup(t,this.groups.extra),this.appendMenuGroup(t,this.groups.extraSeriesArea),this.pickedNode&&this.appendMenuGroup(t,this.groups.extraNode),this.pickedLegendItem&&this.appendMenuGroup(t,this.groups.extraLegendItem),t}appendMenuGroup(t,e,i=!0){e.length!==0&&(i&&t.appendChild(this.createDividerElement()),e.forEach(s=>{const a=this.renderItem(s);a&&t.appendChild(a)}))}renderItem(t){if(t&&typeof t=="object"&&t.constructor===Object)return this.createActionElement(t)}createDividerElement(){const t=gT("div");return t.classList.add(`${VS}__divider`),t.classList.toggle(US,this.darkTheme),t.role="separator",t}createActionElement({id:t,label:e,type:i,action:s}){const a=!!(t&&this.registry.isDisabled(t));return this.createButtonElement(i,e,s,a)}createButtonOnClick(t,e){return jf.checkCallback("legend",t,e)?i=>{if(this.pickedLegendItem){const{seriesId:s,itemId:a}=this.pickedLegendItem;e({type:"contextmenu",seriesId:s,itemId:a,event:i}),this.hide()}}:jf.checkCallback("series-area",t,e)?()=>{e({type:"seriesContextMenuAction",event:this.showEvent}),this.hide()}:jf.checkCallback("node",t,e)?()=>{const{pickedNode:i,showEvent:s}=this,a=i?.series.createNodeContextMenuActionEvent(s,i);a?e(a):e4.error("series node not found"),this.hide()}:()=>{e({type:"contextMenuEvent",event:this.showEvent}),this.hide()}}createButtonElement(t,e,i,s){const a=gT("button");return a.classList.add(`${VS}__item`),a.classList.toggle(US,this.darkTheme),a.ariaDisabled=s.toString(),a.textContent=this.ctx.localeManager.t(e),a.role="menuitem",a.onclick=kit(a,this.createButtonOnClick(t,i)),a.addEventListener("mouseover",()=>a.focus({preventScroll:!0})),a}reposition(){let{x:t,y:e}=this;this.element.style.top="unset",this.element.style.bottom="unset";const i=this.ctx.domManager.getBoundingClientRect(),{offsetWidth:s,offsetHeight:a}=this.element;t=kd._ModuleSupport.clamp(0,t,i.width-s),e=kd._ModuleSupport.clamp(0,e,i.height-a),this.element.style.left=`${t}px`,this.element.style.top=`calc(${e}px - 0.5em)`}destroy(){super.destroy(),this.mutationObserver?.disconnect(),this.ctx.domManager.removeStyles(fT),this.ctx.domManager.removeChild("canvas-overlay",fT)}};y([t4(JF)],yT.prototype,"enabled",2),y([t4(JF)],yT.prototype,"darkTheme",2);var Tit={type:"root",packageType:"enterprise",chartTypes:["cartesian","polar","hierarchy","topology","flow-proportion","standalone","gauge"],optionsKey:"contextMenu",moduleFactory:t=>new yT(t),themeTemplate:{contextMenu:{enabled:!0,darkTheme:Ait._ModuleSupport.ThemeSymbols.IS_DARK_THEME}}},Nit=(P(),_(w)),Ld=(P(),_(w)),mT=(P(),_(w)),{BaseProperties:Cit,BOOLEAN:i4,FUNCTION:s4,NUMBER:WS,STRING:a4,Validate:Ro,createId:Oit,setAttribute:Eit}=mT._ModuleSupport,wit="ag-charts-crosshair-label",Td=class extends mT._ModuleSupport.ChangeDetectableProperties{constructor(){super(...arguments),this.enabled=!0,this.xOffset=0,this.yOffset=0,this.format=void 0,this.renderer=void 0}};y([Ro(i4)],Td.prototype,"enabled",2),y([Ro(WS)],Td.prototype,"xOffset",2),y([Ro(WS)],Td.prototype,"yOffset",2),y([Ro(a4,{optional:!0})],Td.prototype,"format",2),y([Ro(s4,{optional:!0})],Td.prototype,"renderer",2);var Nd=class extends Cit{constructor(t,e,i){super(),this.domManager=t,this.id=Oit(this),this.enabled=!0,this.xOffset=0,this.yOffset=0,this.renderer=void 0,this.element=t.addChild("canvas-overlay",`crosshair-label-${this.id}`),this.element.classList.add(wit),Eit(this.element,"aria-hidden",!0),this.element.setAttribute("data-key",e),this.element.setAttribute("data-axis-id",i)}show(t){const{element:e}=this,i=t.x+this.xOffset,s=t.y+this.yOffset;e.style.top=`${Math.round(s)}px`,e.style.left=`${Math.round(i)}px`,this.toggle(!0)}setLabelHtml(t){t!==void 0&&(this.element.innerHTML=t)}getBBox(){const{element:t}=this;return new mT._ModuleSupport.BBox(t.clientLeft,t.clientTop,t.clientWidth,t.clientHeight)}toggle(t){this.element.classList.toggle("ag-charts-crosshair-label--hidden",!t)}destroy(){this.domManager.removeChild("canvas-overlay",`crosshair-label-${this.id}`)}toLabelHtml(t,e){if(typeof t=="string")return t;e=e??{};const{text:i=e.text??"",color:s=e.color,backgroundColor:a=e.backgroundColor,opacity:n=e.opacity??1}=t;return`<div class="ag-charts-crosshair-label-content" style="${`opacity: ${n}; background-color: ${a?.toLowerCase()}; color: ${s}`}">
                    <span>${i}</span>
                </div>`}};y([Ro(i4)],Nd.prototype,"enabled",2),y([Ro(WS)],Nd.prototype,"xOffset",2),y([Ro(WS)],Nd.prototype,"yOffset",2),y([Ro(a4,{optional:!0})],Nd.prototype,"format",2),y([Ro(s4,{optional:!0})],Nd.prototype,"renderer",2);var{Group:Rit,TranslatableGroup:_it,Line:n4,BBox:xT,createId:Pit,POSITIVE_NUMBER:o4,RATIO:Bit,BOOLEAN:r4,COLOR_STRING:zit,LINE_DASH:Fit,OBJECT:jit,InteractionState:Gf,Validate:sc,ZIndexMap:l4,formatNumber:Git,isInteger:Vit,ChartAxisDirection:c4}=Ld._ModuleSupport,wr=class extends Ld._ModuleSupport.BaseModuleInstance{constructor(t){super(),this.ctx=t,this.id=Pit(this),this.enabled=!1,this.stroke="rgb(195, 195, 195)",this.lineDash=[6,3],this.lineDashOffset=0,this.strokeWidth=1,this.strokeOpacity=1,this.snap=!0,this.label=new Td,this.seriesRect=new xT(0,0,0,0),this.hoverRect=new xT(0,0,0,0),this.bounds=new xT(0,0,0,0),this.crosshairGroup=new _it({name:"crosshairs",zIndex:l4.SERIES_CROSSHAIR}),this.lineGroup=this.crosshairGroup.appendChild(new Rit({name:`${this.id}-crosshair-lines`,zIndex:l4.SERIES_CROSSHAIR})),this.lineGroupSelection=Ld._ModuleSupport.Selection.select(this.lineGroup,n4,!1),this.activeHighlight=void 0,this.axisCtx=t.parent,this.labels={};const e=t.regionManager.getRegion("series"),i=Gf.Default|Gf.Annotations|Gf.AnnotationsSelected;this.hideCrosshairs(),t.domManager.addEventListener("focusin",({target:s})=>{const a=s instanceof HTMLElement&&t.domManager.contains(s,"series-area");this.crosshairGroup.visible&&!a&&(this.hideCrosshairs(),this.ctx.updateService.update(Ld._ModuleSupport.ChartUpdateType.PERFORM_LAYOUT))}),this.destroyFns.push(t.scene.attachNode(this.crosshairGroup),e.addListener("hover",s=>this.onMouseMove(s),i),e.addListener("drag",s=>this.onMouseMove(s),Gf.Annotations|Gf.AnnotationsSelected),e.addListener("leave",()=>this.onMouseOut(),i),t.keyNavManager.addListener("nav-hori",()=>this.onKeyPress()),t.keyNavManager.addListener("nav-vert",()=>this.onKeyPress()),t.zoomManager.addListener("zoom-pan-start",()=>this.onMouseOut()),t.zoomManager.addListener("zoom-change",()=>this.onMouseOut()),t.highlightManager.addListener("highlight-change",s=>this.onHighlightChange(s)),t.layoutManager.addListener("layout:complete",s=>this.layout(s)),()=>Object.entries(this.labels).forEach(([s,a])=>a.destroy()))}layout({series:{rect:t,paddedRect:e,visible:i},axes:s}){if(!i||!s||!this.enabled)return;this.seriesRect=t,this.hoverRect=e;const{position:a="left",axisId:n}=this.axisCtx,o=s.find(h=>h.id===n);if(!o)return;this.axisLayout=o,this.bounds=t.clone().grow(o.gridPadding+o.seriesAreaPadding,a);const{crosshairGroup:r,bounds:l}=this;r.translationX=Math.round(l.x),r.translationY=Math.round(l.y);const c=["pointer",...this.axisCtx.seriesKeyProperties()];this.updateSelections(c),this.updateLines(),this.updateLabels(c)}updateSelections(t){this.lineGroupSelection.update(t,e=>e.append(new n4),e=>e)}updateLabels(t){const{labels:e,ctx:i}=this;for(const s of t)this.label.enabled&&(e[s]??(e[s]=new Nd(i.domManager,s,this.axisCtx.axisId))),e[s]&&this.updateLabel(e[s]);this.labelFormatter=this.axisCtx.scaleValueFormatter(this.label.format)}updateLabel(t){const{enabled:e,xOffset:i,yOffset:s,format:a,renderer:n}=this.label;t.enabled=e,t.xOffset=i,t.yOffset=s,t.format=a,t.renderer=n}updateLines(){const{lineGroupSelection:t,bounds:e,stroke:i,strokeWidth:s,strokeOpacity:a,lineDash:n,lineDashOffset:o,axisLayout:r}=this;if(!r)return;const l=this.isVertical();t.each(c=>{c.stroke=i,c.strokeWidth=s,c.strokeOpacity=a,c.lineDash=n,c.lineDashOffset=o,c.y1=0,c.y2=l?e.height:0,c.x1=0,c.x2=l?0:e.width})}isVertical(){return this.axisCtx.direction===c4.X}formatValue(t){const{labelFormatter:e,axisLayout:i,ctx:{callbackCache:s}}=this;if(e){const a=s.call(e,t);if(a!=null)return a}if(typeof t=="number"){const a=(i?.label.fractionDigits??0)+(Vit(t)?0:1);return Git(t,a)}return String(t??"")}onMouseMove(t){if(!this.enabled||this.snap)return;const{crosshairGroup:e,hoverRect:i}=this,{canvasX:s,canvasY:a}=t;if(i.containsPoint(s,a)){const n=this.getData(t);this.updatePositions(n),e.visible=!0}else this.hideCrosshairs();this.ctx.updateService.update(Ld._ModuleSupport.ChartUpdateType.SCENE_RENDER)}onMouseOut(){this.hideCrosshairs(),this.ctx.updateService.update(Ld._ModuleSupport.ChartUpdateType.SCENE_RENDER)}onKeyPress(){this.enabled&&!this.snap&&this.hideCrosshairs()}onHighlightChange(t){if(!this.enabled)return;const{crosshairGroup:e,axisCtx:i}=this,{datum:s,series:a}=t.currentHighlight??{},n=s&&(a?.axes.x?.id===i.axisId||a?.axes.y?.id===i.axisId);if(this.activeHighlight=n?t.currentHighlight:void 0,!this.activeHighlight)this.hideCrosshairs();else if(this.snap){const o=this.getActiveHighlightData(this.activeHighlight);this.updatePositions(o),e.visible=!0}}isInRange(t){return this.axisCtx.inRange(t)}updatePositions(t){const{seriesRect:e,lineGroupSelection:i}=this;i.each((s,a)=>{const n=t[a];if(!n){s.visible=!1,this.hideLabel(a);return}s.visible=!0;const{value:o,position:r}=n;let l=0,c=0;this.isVertical()?(l=r,s.x=Math.round(l)):(c=r,s.y=Math.round(c)),this.label.enabled?this.showLabel(l+e.x,c+e.y,o,a):this.hideLabel(a)})}getData(t){const{axisCtx:e}=this,i="pointer",{datum:s,xKey:a="",yKey:n=""}=this.activeHighlight??{},{regionX:o,regionY:r}=t,l=this.isVertical(),c=l?o:r;let h=s?.[l?a:n]??"";return e.continuous&&(h=e.scaleInvert(c)),{[i]:{position:c,value:h}}}getActiveHighlightData(t){const{axisCtx:e}=this,{datum:i,series:s,xKey:a="",aggregatedValue:n,cumulativeValue:o,midPoint:r}=t,l=s.getKeyProperties(e.direction),c=(e.scale.bandwidth??0)/2,h=s.axes[e.direction]?.id===e.axisId,u=l.indexOf("yKey")>-1&&h,d=l.indexOf("xKey")>-1&&h,p=n??o;if(u&&p!==void 0){const f=e.scale.convert(p)+c;return this.isInRange(f)?{yKey:{value:p,position:f}}:{}}if(d){const f=(this.isVertical()?r?.x:r?.y)??0,x=e.continuous?e.scaleInvert(f):i[a];return this.isInRange(f)?{xKey:{value:x,position:f}}:{}}const g={};return l.forEach(f=>{const x=s.properties[f],m=i[x],b=e.scale.convert(m)+c;this.isInRange(b)&&(g[f]={value:m,position:b})}),g}getLabelHtml(t,e){const i=this.axisLayout?.label?.fractionDigits??0,s={text:this.formatValue(t)};return this.label.renderer?e.toLabelHtml(this.label.renderer({value:t,fractionDigits:i}),s):e.toLabelHtml(s)}showLabel(t,e,i,s){if(!this.axisLayout)return;const{bounds:a}=this,n=this.labels[s],o=this.getLabelHtml(i,n);n.setLabelHtml(o);const{width:r,height:l}=n.getBBox(),c=this.axisCtx.position;let h=this.axisLayout.label.spacing+this.axisLayout.tickSize;this.axisCtx.direction===c4.X?(h-=4,n.show({x:t-r/2,y:c==="bottom"?a.y+a.height+h:a.y-l-h})):(h-=8,n.show({x:c==="right"?a.x+a.width+h:a.x-r-h,y:e-l/2}))}hideCrosshairs(){this.crosshairGroup.visible=!1;for(const t of Object.keys(this.labels))this.hideLabel(t)}hideLabel(t){this.labels[t]?.toggle(!1)}};y([sc(r4)],wr.prototype,"enabled",2),y([sc(zit,{optional:!0})],wr.prototype,"stroke",2),y([sc(Fit,{optional:!0})],wr.prototype,"lineDash",2),y([sc(o4)],wr.prototype,"lineDashOffset",2),y([sc(o4)],wr.prototype,"strokeWidth",2),y([sc(Bit)],wr.prototype,"strokeOpacity",2),y([sc(r4)],wr.prototype,"snap",2),y([sc(jit)],wr.prototype,"label",2);var Uit={type:"axis-option",optionsKey:"crosshair",packageType:"enterprise",chartTypes:["cartesian"],axisTypes:["category","ordinal-time","number","log","time"],moduleFactory:t=>new wr(t),themeTemplate:{crosshair:{snap:!0,stroke:Nit._ModuleSupport.ThemeSymbols.DEFAULT_MUTED_LABEL_COLOUR,strokeWidth:1,strokeOpacity:1,lineDash:[5,6],lineDashOffset:0,label:{enabled:!0}}}},h4=(P(),_(w)),{BOOLEAN:Wit,FUNCTION:Hit,ActionOnSet:Vf,Validate:u4}=h4._ModuleSupport,Cd=class extends h4._ModuleSupport.BaseModuleInstance{constructor(t){super(),this.enabled=!1,this.getData=()=>Promise.resolve(),this.dataService=t.dataService}updateCallback(t,e){this.dataService&&(t&&e!=null?this.dataService.updateCallback(e):this.dataService.clearCallback())}};y([Vf({newValue(t){this.updateCallback(t,this.getData)}}),u4(Wit)],Cd.prototype,"enabled",2),y([Vf({newValue(t){this.updateCallback(this.enabled,t)}}),u4(Hit)],Cd.prototype,"getData",2),y([Vf({newValue(t){this.dataService.requestThrottle=t}})],Cd.prototype,"requestThrottle",2),y([Vf({newValue(t){this.dataService.dispatchThrottle=t}})],Cd.prototype,"updateThrottle",2),y([Vf({newValue(t){this.dataService.dispatchOnlyLatest=!t}})],Cd.prototype,"updateDuringInteraction",2);var Yit={type:"root",optionsKey:"dataSource",packageType:"enterprise",chartTypes:["cartesian","hierarchy","polar","topology","flow-proportion","standalone","gauge"],moduleFactory:t=>new Cd(t),themeTemplate:{dataSource:{enabled:!1}}},Kit=(P(),_(w)),Uf=(P(),_(w)),Wf=(P(),_(w)),{nearestSquaredInContainer:Xit,partialAssign:Zit,mergeDefaults:d4,BBox:Rr}=Wf._ModuleSupport,$it=class{constructor(t){this.components=t,this.union=Rr.merge(t)}containsPoint(t,e){if(!this.union.containsPoint(t,e))return!1;for(const i of this.components)if(i.containsPoint(t,e))return!0;return!1}},Qit=class extends Wf._ModuleSupport.Group{constructor(){super(),this.capLength=NaN,this._datum=void 0,this.whiskerPath=new Wf._ModuleSupport.Path,this.capsPath=new Wf._ModuleSupport.Path,this.bboxes=new $it([]),this.append([this.whiskerPath,this.capsPath])}get datum(){return this._datum}set datum(t){this._datum=t}calculateCapLength(t,e){const{lengthRatio:i=1,length:s}=t,{lengthRatioMultiplier:a,lengthMax:n}=e,o=s??i*a;return Math.min(o,n)}getItemStylerParams(t,e,i){const{datum:s}=this;if(s==null||t.itemStyler==null)return;const{xLowerKey:a,xUpperKey:n,yLowerKey:o,yUpperKey:r}=t;return{...e,datum:s.datum,seriesId:s.datum.seriesId,xKey:s.xKey,yKey:s.yKey,xLowerKey:a,xUpperKey:n,yLowerKey:o,yUpperKey:r,highlighted:i}}formatStyles(t,e,i){let{cap:s,...a}=t;const n=this.getItemStylerParams(e,t,i);if(n!=null&&e.itemStyler!=null){const o=e.itemStyler(n);a=d4(o,a),s=d4(o?.cap,o,s)}return{whiskerStyle:a,capsStyle:s}}applyStyling(t,e){Zit(["visible","stroke","strokeWidth","strokeOpacity","lineDash","lineDashOffset"],t,e)}update(t,e,i){if(this.datum===void 0)return;const{whiskerStyle:s,capsStyle:a}=this.formatStyles(t,e,i),{xBar:n,yBar:o,capDefaults:r}=this.datum,l=this.whiskerPath;this.applyStyling(l,s),l.path.clear(!0),o!==void 0&&(l.path.moveTo(o.lowerPoint.x,o.lowerPoint.y),l.path.lineTo(o.upperPoint.x,o.upperPoint.y)),n!==void 0&&(l.path.moveTo(n.lowerPoint.x,n.lowerPoint.y),l.path.lineTo(n.upperPoint.x,n.upperPoint.y)),l.path.closePath(),this.capLength=this.calculateCapLength(a??{},r);const c=this.capLength/2,h=this.capsPath;this.applyStyling(h,a),h.path.clear(!0),o!==void 0&&(h.path.moveTo(o.lowerPoint.x-c,o.lowerPoint.y),h.path.lineTo(o.lowerPoint.x+c,o.lowerPoint.y),h.path.moveTo(o.upperPoint.x-c,o.upperPoint.y),h.path.lineTo(o.upperPoint.x+c,o.upperPoint.y)),n!==void 0&&(h.path.moveTo(n.lowerPoint.x,n.lowerPoint.y-c),h.path.lineTo(n.lowerPoint.x,n.lowerPoint.y+c),h.path.moveTo(n.upperPoint.x,n.upperPoint.y-c),h.path.lineTo(n.upperPoint.x,n.upperPoint.y+c)),h.path.closePath()}updateBBoxes(){const{capLength:t,whiskerPath:e,capsPath:i}=this,{yBar:s,xBar:a}=this.datum??{},n=t/2,o=[];if(s!==void 0){const r=s.lowerPoint.y-s.upperPoint.y;o.push(new Rr(s.lowerPoint.x,s.upperPoint.y,e.strokeWidth,r),new Rr(s.lowerPoint.x-n,s.lowerPoint.y,t,i.strokeWidth),new Rr(s.upperPoint.x-n,s.upperPoint.y,t,i.strokeWidth))}if(a!==void 0){const r=a.upperPoint.x-a.lowerPoint.x;o.push(new Rr(a.lowerPoint.x,a.upperPoint.y,r,e.strokeWidth),new Rr(a.lowerPoint.x,a.lowerPoint.y-n,i.strokeWidth,t),new Rr(a.upperPoint.x,a.upperPoint.y-n,i.strokeWidth,t))}this.bboxes.components=o,this.bboxes.union=Rr.merge(o)}containsPoint(t,e){return this.bboxes.containsPoint(t,e)}pickNode(t,e){return this.containsPoint(t,e)?this:void 0}nearestSquared(t,e,i){const{bboxes:s}=this;if(s.union.distanceSquared(t,e)>i)return{nearest:void 0,distanceSquared:1/0};const{distanceSquared:a}=Rr.nearestBox(t,e,s.components);return{nearest:this,distanceSquared:a}}},qit=class extends Wf._ModuleSupport.Group{nearestSquared(t,e){const{nearest:i,distanceSquared:s}=Xit(t,e,{children:this.children()});if(i!==void 0&&!isNaN(s))return{datum:i.datum,distanceSquared:s}}},Jit=(P(),_(w)),{BaseProperties:p4,Validate:Se,BOOLEAN:g4,COLOR_STRING:f4,FUNCTION:tst,LINE_DASH:y4,NUMBER:est,OBJECT:ist,POSITIVE_NUMBER:HS,RATIO:bT,STRING:ac}=Jit._ModuleSupport,_r=class extends p4{};y([Se(g4,{optional:!0})],_r.prototype,"visible",2),y([Se(f4,{optional:!0})],_r.prototype,"stroke",2),y([Se(HS,{optional:!0})],_r.prototype,"strokeWidth",2),y([Se(bT,{optional:!0})],_r.prototype,"strokeOpacity",2),y([Se(y4,{optional:!0})],_r.prototype,"lineDash",2),y([Se(HS,{optional:!0})],_r.prototype,"lineDashOffset",2),y([Se(est,{optional:!0})],_r.prototype,"length",2),y([Se(bT,{optional:!0})],_r.prototype,"lengthRatio",2);var _i=class extends p4{constructor(){super(...arguments),this.visible=!0,this.stroke="black",this.strokeWidth=1,this.strokeOpacity=1,this.cap=new _r}};y([Se(ac,{optional:!0})],_i.prototype,"yLowerKey",2),y([Se(ac,{optional:!0})],_i.prototype,"yLowerName",2),y([Se(ac,{optional:!0})],_i.prototype,"yUpperKey",2),y([Se(ac,{optional:!0})],_i.prototype,"yUpperName",2),y([Se(ac,{optional:!0})],_i.prototype,"xLowerKey",2),y([Se(ac,{optional:!0})],_i.prototype,"xLowerName",2),y([Se(ac,{optional:!0})],_i.prototype,"xUpperKey",2),y([Se(ac,{optional:!0})],_i.prototype,"xUpperName",2),y([Se(g4,{optional:!0})],_i.prototype,"visible",2),y([Se(f4,{optional:!0})],_i.prototype,"stroke",2),y([Se(HS,{optional:!0})],_i.prototype,"strokeWidth",2),y([Se(bT,{optional:!0})],_i.prototype,"strokeOpacity",2),y([Se(y4,{optional:!0})],_i.prototype,"lineDash",2),y([Se(HS,{optional:!0})],_i.prototype,"lineDashOffset",2),y([Se(tst,{optional:!0})],_i.prototype,"itemStyler",2),y([Se(ist)],_i.prototype,"cap",2);var{fixNumericExtent:sst,groupAccumulativeValueProperty:ast,isDefined:Xs,mergeDefaults:nst,valueProperty:YS,ChartAxisDirection:ST,Logger:ost}=Uf._ModuleSupport;function rst(t){for(const e of Uf.AgErrorBarSupportedSeriesTypes)if(e===t.series.type)return t.series;throw new Error(`AG Charts - unsupported series type '${t.series.type}', error bars supported series types: ${Uf.AgErrorBarSupportedSeriesTypes.join(", ")}`)}var lst=class Ey extends Uf._ModuleSupport.BaseModuleInstance{constructor(e){super(),this.properties=new _i;const i=rst(e),{annotationGroup:s,annotationSelections:a}=i;this.cartesianSeries=i,this.groupNode=new qit({name:`${s.id}-errorBars`}),s.appendChild(this.groupNode),this.selection=Uf._ModuleSupport.Selection.select(this.groupNode,()=>this.errorBarFactory()),a.add(this.selection),i.addEventListener("seriesVisibilityChange",n=>this.onToggleSeriesItem(n)),this.destroyFns.push(i.addListener("data-processed",n=>this.onDataProcessed(n)),i.addListener("data-update",n=>this.onDataUpdate(n)),e.highlightManager.addListener("highlight-change",n=>this.onHighlightChange(n)),()=>s.removeChild(this.groupNode),()=>a.delete(this.selection))}hasErrorBars(){const{xLowerKey:e,xUpperKey:i,yLowerKey:s,yUpperKey:a}=this.properties;return Xs(e)&&Xs(i)||Xs(s)&&Xs(a)}isStacked(){const e=this.cartesianSeries.seriesGrouping?.stackCount;return e==null?!1:e>0}getUnstackPropertyDefinition(e){const i=[],{xLowerKey:s,xUpperKey:a,yLowerKey:n,yUpperKey:o,xErrorsID:r,yErrorsID:l}=this.getMaybeFlippedKeys(),{xScaleType:c,yScaleType:h}=e;return n!=null&&o!=null&&i.push(YS(n,h,{id:`${l}-lower`}),YS(o,h,{id:`${l}-upper`})),s!=null&&a!=null&&i.push(YS(s,c,{id:`${r}-lower`}),YS(a,c,{id:`${r}-upper`})),i}getStackPropertyDefinition(e){const i=[],{cartesianSeries:s}=this,{xLowerKey:a,xUpperKey:n,yLowerKey:o,yUpperKey:r,xErrorsID:l,yErrorsID:c}=this.getMaybeFlippedKeys(),{xScaleType:h,yScaleType:u}=e,d=s.seriesGrouping?.groupIndex??s.id,p={invalidValue:null,missingValue:0,separateNegative:!0,...s.visible?{}:{forceValue:0}},g=(x,m,b,v)=>ast(x,"normal","current",{id:`${m}-${b}`,groupId:`errorGroup-${d}-${b}`,...p},v),f=(x,m,b,v)=>{i.push(...g(x,b,"lower",v),...g(m,b,"upper",v))};return o!=null&&r!=null&&f(o,r,c,u),a!=null&&n!=null&&f(a,n,l,h),i}getPropertyDefinitions(e){return this.isStacked()?this.getStackPropertyDefinition(e):this.getUnstackPropertyDefinition(e)}onDataProcessed(e){this.dataModel=e.dataModel,this.processedData=e.processedData}getDomain(e){const{xLowerKey:i,xUpperKey:s,xErrorsID:a,yLowerKey:n,yUpperKey:o,yErrorsID:r}=this.getMaybeFlippedKeys();if(e===ST.X?Xs(i)&&Xs(s):Xs(n)&&Xs(o)){const{dataModel:c,processedData:h,cartesianSeries:u}=this;if(c!=null&&h!=null){const d={x:a,y:r}[e],p=c.getDomain(u,`${d}-lower`,"value",h),g=c.getDomain(u,`${d}-upper`,"value",h),f=[Math.min(...p,...g),Math.max(...p,...g)];return sst(f)}}return[]}onDataUpdate(e){this.dataModel=e.dataModel,this.processedData=e.processedData,Xs(e.dataModel)&&Xs(e.processedData)&&(this.createNodeData(),this.update())}getNodeData(){return this.hasErrorBars()?this.cartesianSeries.contextNodeData?.nodeData:void 0}createNodeData(){const e=this.getNodeData(),i=this.cartesianSeries.axes[ST.X]?.scale,s=this.cartesianSeries.axes[ST.Y]?.scale;if(!(!i||!s||!e))for(let a=0;a<e.length;a++){const{midPoint:n,xLower:o,xUpper:r,yLower:l,yUpper:c}=this.getDatum(e,a);if(n!=null){let h,u;Xs(o)&&Xs(r)&&(h={lowerPoint:{x:this.convert(i,o),y:n.y},upperPoint:{x:this.convert(i,r),y:n.y}}),Xs(l)&&Xs(c)&&(u={lowerPoint:{x:n.x,y:this.convert(s,l)},upperPoint:{x:n.x,y:this.convert(s,c)}}),e[a].xBar=h,e[a].yBar=u}}}getMaybeFlippedKeys(){let{xLowerKey:e,xUpperKey:i,yLowerKey:s,yUpperKey:a}=this.properties,[n,o]=["xValue-errors","yValue-errors"];return this.cartesianSeries.shouldFlipXY()&&([e,s]=[s,e],[i,a]=[a,i],[n,o]=[o,n]),{xLowerKey:e,xUpperKey:i,xErrorsID:n,yLowerKey:s,yUpperKey:a,yErrorsID:o}}static getDatumKey(e,i,s){if(i==null)return;const a=e.datum[i];if(a!=null){if(typeof a!="number"){ost.warnOnce(`Found [${i}] error value of type ${typeof a}. Expected number type`);return}return a+s}}getDatum(e,i){const{xLowerKey:s,xUpperKey:a,yLowerKey:n,yUpperKey:o}=this.getMaybeFlippedKeys(),r=e[i],l=r.cumulativeValue==null||!this.isStacked()?0:r.cumulativeValue-r.yValue,[c,h]=this.cartesianSeries.shouldFlipXY()?[l,0]:[0,l];return{midPoint:r.midPoint,xLower:Ey.getDatumKey(r,s,c),xUpper:Ey.getDatumKey(r,a,c),yLower:Ey.getDatumKey(r,n,h),yUpper:Ey.getDatumKey(r,o,h)}}convert(e,i){const s=(e.bandwidth??0)/2;return e.convert(i)+s}update(){const e=this.getNodeData();e!=null&&(this.selection.update(e),this.selection.each((i,s,a)=>this.updateNode(i,s,a)))}updateNode(e,i,s){e.datum=i,e.update(this.getDefaultStyle(),this.properties,!1),e.updateBBoxes()}pickNodeExact(e){const{x:i,y:s}=e,a=this.groupNode.pickNode(i,s);if(a!=null)return{datum:a.datum,distanceSquared:0}}pickNodeNearest(e){return this.groupNode.nearestSquared(e.x,e.y)}pickNodeMainAxisFirst(e){return this.groupNode.nearestSquared(e.x,e.y)}getTooltipParams(){const{xLowerKey:e,xUpperKey:i,yLowerKey:s,yUpperKey:a,xLowerName:n=e,xUpperName:o=i,yLowerName:r=s,yUpperName:l=a}=this.properties;return{xLowerKey:e,xLowerName:n,xUpperKey:i,xUpperName:o,yLowerKey:s,yLowerName:r,yUpperKey:a,yUpperName:l}}onToggleSeriesItem(e){this.groupNode.visible=e.visible}makeStyle(e){return{visible:e.visible,lineDash:e.lineDash,lineDashOffset:e.lineDashOffset,stroke:e.stroke,strokeWidth:e.strokeWidth,strokeOpacity:e.strokeOpacity,cap:nst(this.properties.cap,e)}}getDefaultStyle(){return this.makeStyle(this.getWhiskerProperties())}getHighlightStyle(){return this.makeStyle(this.getWhiskerProperties())}restyleHighlightChange(e,i,s){const a=this.getNodeData();if(a!=null){for(let n=0;n<a.length;n++)if(e===a[n]){this.selection.at(n)?.update(i,this.properties,s);break}}}onHighlightChange(e){const{previousHighlight:i,currentHighlight:s}=e;s?.series===this.cartesianSeries&&this.restyleHighlightChange(s,this.getHighlightStyle(),!0),i?.series===this.cartesianSeries&&this.restyleHighlightChange(i,this.getDefaultStyle(),!1),this.groupNode.opacity=this.cartesianSeries.getOpacity()}errorBarFactory(){return new Qit}getWhiskerProperties(){const{stroke:e,strokeWidth:i,visible:s,strokeOpacity:a,lineDash:n,lineDashOffset:o}=this.properties;return{stroke:e,strokeWidth:i,visible:s,strokeOpacity:a,lineDash:n,lineDashOffset:o}}},cst=(P(),_(w)),hst={series:{errorBar:{visible:!0,stroke:cst._ModuleSupport.ThemeSymbols.DEFAULT_LABEL_COLOUR,strokeWidth:1,strokeOpacity:1,cap:{length:void 0,lengthRatio:void 0}}}},ust={type:"series-option",identifier:"error-bars",optionsKey:"errorBar",packageType:"enterprise",chartTypes:["cartesian"],seriesTypes:Kit.AgErrorBarSupportedSeriesTypes,moduleFactory:t=>new lst(t),themeTemplate:hst},KS=(P(),_(w)),{ZIndexMap:dst,ActionOnSet:pst,Validate:vT,ProxyPropertyOnWrite:m4,OBJECT:gst,RATIO:fst,COLOR_STRING:yst}=KS._ModuleSupport,XS=class extends KS._ModuleSupport.Background{constructor(){super(...arguments),this.image=new wo,this.fill="transparent",this.fillOpacity=void 0}createNode(){return new KS._ModuleSupport.Group({name:"foreground",zIndex:dst.FOREGROUND})}onLayoutComplete(t){super.onLayoutComplete(t);const{width:e,height:i}=t.chart;let s={x:0,y:0,width:e,height:i};this.image&&(s=this.image.performLayout(e,i)),this.text&&this.updateTextNode(s)}onImageLoad(){this.ctx.updateService.update(KS._ModuleSupport.ChartUpdateType.SCENE_RENDER)}updateTextNode(t){const{textNode:e}=this;e.fontWeight="bold",e.fontFamily="Impact, sans-serif",e.fontSize=19,e.opacity=.7,e.fill="#9b9b9b",e.textBaseline="top";const i=this.textNode.getBBox(),s=10;e.x=t.x+t.width/2-i.width/2,e.y=t.y+t.height+s}};y([vT(gst,{optional:!0}),pst({newValue(t){this.node.appendChild(t.node),t.onLoad=()=>this.onImageLoad()},oldValue(t){this.node.removeChild(t.node),t.onLoad=void 0}})],XS.prototype,"image",2),y([vT(yst,{optional:!0}),m4("rectNode","fill")],XS.prototype,"fill",2),y([vT(fst,{optional:!0}),m4("rectNode","fillOpacity")],XS.prototype,"fillOpacity",2);var mst={type:"root",optionsKey:"foreground",packageType:"enterprise",chartTypes:["cartesian","polar","hierarchy","topology","flow-proportion","standalone","gauge"],moduleFactory:t=>new XS(t)},xst=(P(),_(w)),Hf=(P(),_(w)),x4=(P(),_(w)),bst=(P(),_(w)),{TranslatableGroup:Sst,ScenePathChangeDetection:b4}=bst._ModuleSupport,MT=class extends Sst{constructor(){super(...arguments),this.inset=0,this.cornerRadius=0}applyClip(t,e){const{cornerRadius:i,inset:s}=this,{x:a,y:n,width:o,height:r}=e;t.beginPath(),t.roundRect(a+s,n+s,o-2*s,r-2*s,i),t.clip()}};y([b4()],MT.prototype,"inset",2),y([b4()],MT.prototype,"cornerRadius",2);var{Validate:DT,BOOLEAN:vst,POSITIVE_NUMBER:S4,ZIndexMap:wh,ActionOnSet:v4,CategoryAxis:Mst,TextUtils:Dst,Padding:Ast,Logger:M4,Group:Rh,BBox:D4,ProxyProperty:A4}=x4._ModuleSupport,AT=class{constructor(){this.top=0,this.bottom=0}};y([DT(S4)],AT.prototype,"top",2),y([DT(S4)],AT.prototype,"bottom",2);var Od=class extends x4._ModuleSupport.BaseModuleInstance{constructor(t){super(),this.ctx=t,this.enabled=!1,this.padding=new AT,this.root=new Rh({name:"root"}),this.seriesRoot=this.root.appendChild(new MT({name:"Series-root",zIndex:wh.SERIES_LAYER,renderToOffscreenCanvas:!0})),this.axisGridGroup=this.root.appendChild(new Rh({name:"Axes-Grids",zIndex:wh.AXIS_GRID})),this.axisGroup=this.root.appendChild(new Rh({name:"Axes-Grids",zIndex:wh.AXIS_GRID})),this.axisLabelGroup=this.root.appendChild(new Rh({name:"Axes-Labels",zIndex:wh.SERIES_LABEL})),this.axisCrosslineRangeGroup=this.root.appendChild(new Rh({name:"Axes-Crosslines-Range",zIndex:wh.SERIES_CROSSLINE_RANGE})),this.axisCrosslineLineGroup=this.root.appendChild(new Rh({name:"Axes-Crosslines-Line",zIndex:wh.SERIES_CROSSLINE_LINE})),this.axisCrosslineLabelGroup=this.root.appendChild(new Rh({name:"Axes-Crosslines-Label",zIndex:wh.SERIES_LABEL})),this.data=[],this._destroyed=!1,this.miniChartAnimationPhase="initial",this.axes=[],this.series=[]}destroy(){this._destroyed||(this.destroySeries(this.series),this.axes.forEach(t=>t.destroy()),this.axes=[],this._destroyed=!0)}onSeriesChange(t,e){const i=e?.filter(s=>!t.includes(s))??[];this.destroySeries(i);for(const s of t){if(e?.includes(s))continue;s.attachSeries(this.seriesRoot,this.seriesRoot,void 0);const a=this;s.chart={get mode(){return"standalone"},get isMiniChart(){return!0},get seriesRect(){return a.seriesRect}},s.resetAnimation(this.miniChartAnimationPhase==="initial"?"initial":"disabled")}}destroySeries(t){t?.forEach(e=>{e.destroy(),e.detachSeries(this.seriesRoot,this.seriesRoot,void 0),e.chart=void 0})}assignSeriesToAxes(){this.axes.forEach(t=>{t.boundSeries=this.series.filter(e=>e.axes[t.direction]===t)})}assignAxesToSeries(){const t={};this.axes.forEach(e=>{const i=e.direction;(t[i]??(t[i]=[])).push(e)}),this.series.forEach(e=>{e.directions.forEach(i=>{const s=t[i];if(!s){M4.warnOnce(`no available axis for direction [${i}]; check series and axes configuration.`);return}const a=e.getKeys(i),n=this.findMatchingAxis(s,a);if(!n){M4.warnOnce(`no matching axis for direction [${i}] and keys [${a}]; check series and axes configuration.`);return}e.axes[i]=n})})}findMatchingAxis(t,e){for(const i of t){if(!i.keys.length)return i;if(e){for(const s of e)if(i.keys.includes(s))return i}}}updateData(t){this.series.forEach(e=>e.setChartData(t)),this.miniChartAnimationPhase==="initial"&&this.ctx.animationManager.onBatchStop(()=>{this.miniChartAnimationPhase="ready",this.series.forEach(e=>e.resetAnimation("disabled"))})}async processData(t){this.series.some(e=>e.canHaveAxes)&&(this.assignAxesToSeries(),this.assignSeriesToAxes());for(const e of this.axes)e.processData();await Promise.all(this.series.map(e=>(e.resetDatumCallbackCache(),e.processData(t))))}computeAxisPadding(){const t=new Ast;return this.enabled&&this.axes.forEach(({position:e,thickness:i,line:s,label:a})=>{if(e==null)return;let n;i?n=i:n=(s.enabled?s.width:0)+(a.enabled?Dst.getLineHeight(a.fontSize??0)+a.spacing:0),t[e]=Math.ceil(n)}),t}async layout(t,e){const{padding:i}=this,s=this.seriesRect!=null,a=new D4(0,0,t,e-(i.top+i.bottom));this.seriesRect=a,this.seriesRoot.translationY=i.top,this.seriesRoot.setClipRectCanvasSpace(new D4(0,-i.top,t,e)),this.axes.forEach(n=>{const{position:o="left"}=n;switch(o){case"top":case"bottom":n.range=[0,a.width],n.gridLength=a.height;break;case"right":case"left":{const r=n instanceof Mst;n.range=r?[0,a.height]:[a.height,0],n.gridLength=a.width;break}}n.gridPadding=0,n.translation.x=0,n.translation.y=0,o==="right"?n.translation.x=t:o==="bottom"&&(n.translation.y=e),n.calculateLayout(),n.update(s)}),await Promise.all(this.series.map(n=>n.update({seriesRect:a})))}};y([DT(vst)],Od.prototype,"enabled",2),y([A4(["seriesRoot","inset"])],Od.prototype,"inset",2),y([A4(["seriesRoot","cornerRadius"])],Od.prototype,"cornerRadius",2),y([v4({changeValue(t,e=[]){const i={axisNode:this.axisGroup,gridNode:this.axisGridGroup,labelNode:this.axisLabelGroup,crossLineLineNode:this.axisCrosslineLineGroup,crossLineRangeNode:this.axisCrosslineRangeGroup,crossLineLabelNode:this.axisCrosslineLabelGroup};for(const s of e)t.includes(s)||(s.detachAxis(i),s.destroy());for(const s of t)e?.includes(s)||s.attachAxis(i)}})],Od.prototype,"axes",2),y([v4({changeValue(t,e){this.onSeriesChange(t,e)}})],Od.prototype,"series",2);var Ist=(P(),_(w)),{clamp:kst,SliderWidget:I4}=Ist._ModuleSupport,Lst=class{constructor(t,e){this.ctx=t,this.sliderHandlers=e,this._min=0,this._max=1,this.minRange=.001,this.dragStartX=0,this.ctx=t,this.toolbar=t.proxyInteractionService.createProxyContainer({type:"toolbar",domManagerId:"navigator-toolbar",classList:["ag-charts-proxy-navigator-toolbar"],orientation:"vertical",ariaLabel:{id:"ariaLabelNavigator"}}),this.sliders=[t.proxyInteractionService.createProxyElement({type:"slider",domIndex:1,ariaLabel:{id:"ariaLabelNavigatorMinimum"},parent:this.toolbar,cursor:"ew-resize"}),t.proxyInteractionService.createProxyElement({type:"slider",domIndex:0,ariaLabel:{id:"ariaLabelNavigatorRange"},parent:this.toolbar,cursor:"grab"}),t.proxyInteractionService.createProxyElement({type:"slider",ariaLabel:{id:"ariaLabelNavigatorMaximum"},parent:this.toolbar,cursor:"ew-resize"})];for(const[i,s]of["min","pan","max"].entries()){const a=this.sliders[i];a.step=I4.STEP_HUNDRETH,a.keyboardStep=I4.STEP_ONE,a.orientation="horizontal",a.setPreventsDefault(!1),a.addListener("drag-start",n=>this.onDragStart(a,n,s)),a.addListener("drag-move",n=>this.onDrag(a,n,s)),a.addListener("drag-end",()=>this.updateSliderRatios()),a.addListener("contextmenu",n=>this.onContextMenu(a,n))}this.sliders[0].addListener("change",()=>this.onMinSliderChange()),this.sliders[1].addListener("change",()=>this.onPanSliderChange()),this.sliders[2].addListener("change",()=>this.onMaxSliderChange()),this.updateSliderRatios(),this.updateVisibility(!1)}destroy(){this.toolbar.destroy()}updateVisibility(t){this.toolbar.setHidden(!t)}updateZoom(){const{_min:t,_max:e}=this;if(!(t==null||e==null))return this.ctx.zoomManager.updateZoom("navigator",{x:{min:t,max:e}})}updateBounds(t){this.toolbar.setBounds(t)}updateSliderBounds(t,e){this.sliders[t].setBounds(e)}updateMinMax(t,e){this._min=t,this._max=e,this.updateSliderRatios()}updateSliderRatios(){const{_min:t,_max:e}=this,i=this.ctx.localeManager.t("ariaValuePanRange",{min:t,max:e});this.sliders[0].setValueRatio(t),this.sliders[1].setValueRatio(t,{ariaValueText:i}),this.sliders[2].setValueRatio(e)}toCanvasOffsets(t){return{offsetX:this.dragStartX+t.originDeltaX}}onDragStart(t,e,i){const s=this.toolbar.cssLeft(),a=t.cssLeft();this.dragStartX=s+a+e.offsetX,this.sliderHandlers.onDragStart(i,this.toCanvasOffsets(e))}onDrag(t,e,i){this.sliderHandlers.onDrag(i,this.toCanvasOffsets(e))}onContextMenu(t,{sourceEvent:e,offsetX:i,offsetY:s}){const{x:a,y:n}=this.toolbar.getBounds(),{x:o,y:r}=t.getBounds(),l=i+a+o,c=s+n+r;this.ctx.contextMenuRegistry.dispatchContext("all",{sourceEvent:e,canvasX:l,canvasY:c},{})}onPanSliderChange(){const t=this.sliders[1].getValueRatio(),e=this._max-this._min;this._min=kst(0,t,1-e),this._max=this._min+e,this.updateZoom()}onMinSliderChange(){this._min=this.sliders[0].clampValueRatio(0,this._max-this.minRange),this.updateZoom()}onMaxSliderChange(){this._max=this.sliders[2].clampValueRatio(this._min+this.minRange,1),this.updateZoom()}},k4=(P(),_(w)),{Validate:ZS,ScenePathChangeDetection:$S,POSITIVE_NUMBER:IT,BOOLEAN:Tst,BBox:Nst,ExtendedPath2D:Cst}=k4._ModuleSupport,nc=class extends k4._ModuleSupport.Path{constructor(){super(...arguments),this.zIndex=3,this.centerX=0,this.centerY=0,this.width=8,this.height=16,this.cornerRadius=4,this.grip=!0,this.gripPath=new Cst}setCenter(t,e){this.dirtyPath=!0,(this.centerX!==t||this.centerY!==e)&&(this.centerX=t,this.centerY=e,this.markDirty())}static align(t,e,i,s,a,n,o,r,l){const c=t.align(i+a*o)+l,h=c+t.align(i+a*o,a*(r-o))-2*l,u=t.align(s+n/2);t.setCenter(c,u),e.setCenter(h,u)}computeBBox(){const{centerX:t,centerY:e,width:i,height:s}=this,a=t-i/2,n=e-s/2;return new Nst(a,n,i,s)}isPointInPath(t,e){return this.getBBox().containsPoint(t,e)}updatePath(){const{centerX:t,centerY:e,path:i,gripPath:s,strokeWidth:a,cornerRadius:n,grip:o}=this,r=a/2,l=this.layerManager?.canvas?.pixelRatio??1;i.clear(),s.clear();const c=Math.floor(this.width/2*l)/l,h=Math.floor(this.height/2*l)/l;i.roundRect(t-c+r,e-h+r,2*(c-r),2*(h-r),n);const u=3;if(o)for(let d=-.5;d<=.5;d+=1)for(let p=-1;p<=1;p+=1)s.arc(t+d*u,e+p*u,1,0,2*Math.PI),s.closePath()}renderFill(t,e){const{stroke:i}=this;super.renderFill(t,e),t.fillStyle=typeof i=="string"?i:"black",t.fill(this.gripPath.getPath2D())}};nc.className="RangeHandle",y([ZS(IT),$S()],nc.prototype,"width",2),y([ZS(IT),$S()],nc.prototype,"height",2),y([ZS(IT),$S()],nc.prototype,"cornerRadius",2),y([ZS(Tst),$S()],nc.prototype,"grip",2);var Ost=(P(),_(w)),{Path:Est,BBox:Yf,ExtendedPath2D:wst,clippedRoundRect:kT,POSITIVE_NUMBER:Rst,Validate:_st,ScenePathChangeDetection:Pst}=Ost._ModuleSupport,LT=class extends Est{constructor(){super(...arguments),this.cornerRadius=4,this.zIndex=2,this.x=0,this.y=0,this.width=200,this.height=30,this.min=0,this.max=1,this.visiblePath=new wst}layout(t,e,i,s,a,n){a=isNaN(a)?this.min:a,n=isNaN(n)?this.max:n,(t!==this.x||e!==this.y||i!==this.width||this.height!==s||a!==this.min||n!==this.max)&&(this.x=t,this.y=e,this.width=i,this.height=s,this.min=a,this.max=n,this.dirtyPath=!0,this.markDirty())}computeBBox(){const{x:t,y:e,width:i,height:s}=this;return new Yf(t,e,i,s)}computeVisibleRangeBBox(){const{x:t,y:e,width:i,height:s,min:a,max:n}=this,o=t+i*a,r=t+i*n;return new Yf(o,e,r-o,s)}updatePath(){const{path:t,visiblePath:e,x:i,y:s,width:a,height:n,min:o,max:r,strokeWidth:l,cornerRadius:c}=this,h=l/2;t.clear(),e.clear();const u=this.align(i)+h,d=this.align(s)+h,p=this.align(i,a)-2*h,g=this.align(s,n)-2*h,f=this.align(i+a*o)+h,x=f+this.align(i+a*o,a*(r-o))-2*h,m={topLeft:c,topRight:c,bottomRight:c,bottomLeft:c};kT(t,u,d,p,g,m,new Yf(u,d,f-u,g)),kT(t,u,d,p,g,m,new Yf(x,d,p+u-x,g)),kT(e,u,d,p,g,m,new Yf(f,d,x-f,g))}renderStroke(t,e){super.renderStroke(t,e),super.renderStroke(t,this.visiblePath.getPath2D())}};LT.className="RangeMask",y([_st(Rst),Pst()],LT.prototype,"cornerRadius",2);var QS=(P(),_(w)),Bst=class extends QS._ModuleSupport.Group{constructor(t){super({name:"rangeSelectorGroup",zIndex:QS._ModuleSupport.ZIndexMap.NAVIGATOR}),this.x=0,this.y=0,this.width=200,this.height=30,this.lOffset=0,this.rOffset=0,this.background=this.appendChild(new QS._ModuleSupport.TranslatableGroup({name:"navigator-background",zIndex:1})),this.append(t)}layout(t,e,i,s,a,n){this.x=t,this.y=e,this.width=i,this.height=s,this.lOffset=a,this.rOffset=n,this.background.translationX=t,this.background.translationY=e,this.markDirty()}updateBackground(t,e){t!=null&&this.background.removeChild(t),e!=null&&this.background.appendChild(e),this.markDirty()}computeBBox(){const{x:t,y:e,width:i,height:s,lOffset:a,rOffset:n}=this;return new QS._ModuleSupport.BBox(t-a,e,i+(a+n),s)}},{clamp:TT,BaseModuleInstance:zst,ObserveChanges:NT,Validate:qS,BOOLEAN:Fst,POSITIVE_NUMBER:CT}=Hf._ModuleSupport,Ed=class extends zst{constructor(t){super(),this.ctx=t,this.enabled=!1,this.mask=new LT,this.minHandle=new nc,this.maxHandle=new nc,this.maskVisibleRange={id:"navigator-mask-visible-range",getBBox:()=>this.mask.computeVisibleRangeBBox(),toCanvasBBox:()=>this.mask.computeVisibleRangeBBox(),fromCanvasPoint:(e,i)=>({x:e,y:i})},this.height=30,this.cornerRadius=0,this.spacing=10,this.x=0,this.y=0,this.width=0,this.rangeSelector=new Bst([this.mask,this.minHandle,this.maxHandle]),this.destroyFns.push(t.scene.attachNode(this.rangeSelector),this.ctx.localeManager.addListener("locale-changed",()=>this.updateZoom()),this.ctx.layoutManager.registerElement(Hf._ModuleSupport.LayoutElement.Navigator,e=>this.onLayoutStart(e)),this.ctx.layoutManager.addListener("layout:complete",e=>this.onLayoutComplete(e)),t.zoomManager.addListener("zoom-change",e=>this.onZoomChange(e))),this.domProxy=new Lst(t,this),this.updateGroupVisibility(),this.miniChart=new Od(t)}updateBackground(t,e){this.rangeSelector?.updateBackground(t,e)}updateGroupVisibility(){const{enabled:t}=this;this.rangeSelector==null||t===this.rangeSelector.visible||(this.rangeSelector.visible=t,this.domProxy.updateVisibility(t),t?this.updateZoom():this.ctx.zoomManager.updateZoom("navigator"))}onLayoutStart(t){if(this.enabled){const{layoutBox:e}=t,i=this.height+this.spacing;e.shrink(i,"bottom"),this.y=e.y+e.height+this.spacing}else this.y=0;if(this.enabled&&this.miniChart){const{top:e,bottom:i}=this.miniChart.computeAxisPadding();t.layoutBox.shrink(e+i,"bottom"),this.y-=i,this.miniChart.inset=this.mask.strokeWidth/2,this.miniChart.cornerRadius=this.mask.cornerRadius}}async onLayoutComplete(t){const{x:e,width:i}=t.series.rect,{y:s,height:a}=this;if(this.domProxy.updateVisibility(this.enabled),this.enabled){const{_min:n,_max:o}=this.domProxy;this.layoutNodes(e,s,i,a,n,o),this.domProxy.updateBounds({x:e,y:s,width:i,height:a})}this.x=e,this.width=i,await this.miniChart?.layout(i,a)}canDrag(){const t=Hf._ModuleSupport.InteractionState.Default|Hf._ModuleSupport.InteractionState.Animation|Hf._ModuleSupport.InteractionState.ZoomDrag;return this.enabled&&this.ctx.interactionManager.getState()&t}onDragStart(t,{offsetX:e}){this.canDrag()&&(t==="pan"&&(this.panStart=(e-this.x)/this.width-this.domProxy._min),this.ctx.zoomManager.fireZoomPanStartEvent("navigator"))}onDrag(t,{offsetX:e}){if(!this.canDrag())return;const{panStart:i,x:s,width:a}=this,{minRange:n}=this.domProxy;let{_min:o,_max:r}=this.domProxy;const l=(e-s)/a;if(t==="min")o=TT(0,l,r-n);else if(t==="max")r=TT(o+n,l,1);else if(t==="pan"&&i!=null){const c=r-o;o=TT(0,l-i,1-c),r=o+c}this.domProxy._min=o,this.domProxy._max=r,this.updateZoom()}onZoomChange(t){const{x:e}=t;if(!e)return;const{x:i,y:s,width:a,height:n}=this,{min:o,max:r}=e;this.domProxy.updateMinMax(o,r),this.layoutNodes(i,s,a,n,o,r)}layoutNodes(t,e,i,s,a,n){const{rangeSelector:o,mask:r,minHandle:l,maxHandle:c}=this;r.layout(t,e,i,s,a,n),o.layout(t,e,i,s,l.width/2,c.width/2),nc.align(l,c,t,e,i,s,a,n,r.strokeWidth/2),a+(n-a)/2<.5?(l.zIndex=3,c.zIndex=4):(l.zIndex=4,c.zIndex=3),[l,this.maskVisibleRange,c].forEach((h,u)=>{const d=h.getBBox(),p={x:d.x-t,y:d.y-e,height:d.height,width:d.width};this.domProxy.updateSliderBounds(u,p)})}updateZoom(){this.enabled&&this.domProxy.updateZoom()}updateData(t){return this.miniChart?.updateData(t)}async processData(t){if(this.miniChart)return this.miniChart?.processData(t)}};y([NT((t,e,i)=>{t.updateBackground(i?.root,e?.root)})],Ed.prototype,"miniChart",2),y([qS(Fst),NT((t,e)=>{t.ctx.zoomManager.setNavigatorEnabled(!!e),t.updateGroupVisibility()})],Ed.prototype,"enabled",2),y([qS(CT)],Ed.prototype,"height",2),y([qS(CT),NT((t,e)=>{t.mask.cornerRadius=e})],Ed.prototype,"cornerRadius",2),y([qS(CT)],Ed.prototype,"spacing",2);var{DEFAULT_FONT_FAMILY:jst,DEFAULT_LABEL_COLOUR:Gst,DEFAULT_INVERTED_BACKGROUND_COLOUR:Vst,DEFAULT_BACKGROUND_COLOUR:L4,DEFAULT_NAVIGATOR_STROKE:OT}=xst._ModuleSupport.ThemeSymbols,Ust={type:"root",optionsKey:"navigator",packageType:"enterprise",chartTypes:["cartesian"],moduleFactory:t=>new Ed(t),removable:!1,themeTemplate:{navigator:{enabled:!1,height:18,cornerRadius:4,mask:{fill:Vst,fillOpacity:.1,stroke:OT,strokeWidth:1},minHandle:{fill:L4,stroke:OT,strokeWidth:1,width:12,height:24,cornerRadius:4},maxHandle:{fill:L4,stroke:OT,strokeWidth:1,width:12,height:24,cornerRadius:4},miniChart:{enabled:!1,label:{color:Gst,fontSize:10,fontFamily:jst,spacing:5},padding:{top:0,bottom:0}}}}},T4=(P(),_(w)),Wst=(P(),_(w)),{AND:Hst,ARRAY:N4,FUNCTION:Yst,NUMBER:Kst,OR:Xst,ToolbarButtonProperties:Zst,Validate:$st}=Wst._ModuleSupport,C4=class extends Zst{};y([$st(Xst(Kst,Hst(N4,N4.restrict({length:2})),Yst))],C4.prototype,"value",2);var{BOOLEAN:Qst,OBJECT:qst,ChartAxisDirection:ET,LayoutElement:Jst,PropertiesArray:tat,Toolbar:eat,Validate:O4}=T4._ModuleSupport,wT=class extends T4._ModuleSupport.BaseModuleInstance{constructor(t){super(),this.ctx=t,this.enabled=!1,this.buttons=new tat(C4),this.verticalSpacing=10,this.toolbar=new eat(this.ctx.localeManager),this.toolbar.addClass("ag-charts-range-buttons"),t.domManager.addChild("canvas-overlay","range-buttons",this.toolbar.getElement()),this.destroyFns.push(this.toolbar.addToolbarListener("button-pressed",this.onButtonPress.bind(this)),t.layoutManager.registerElement(Jst.ToolbarBottom,this.onLayoutStart.bind(this)),t.zoomManager.addListener("zoom-change",this.onZoomChanged.bind(this)),this.teardown.bind(this))}teardown(){this.ctx.domManager.removeChild("canvas-overlay","range-buttons"),this.toolbar.destroy()}onLayoutStart(t){const{buttons:e,ctx:i,enabled:s,toolbar:a,verticalSpacing:n}=this,{layoutBox:o}=t;if(!s||!i.zoomManager.isZoomEnabled()){a.setHidden(!0);return}a.setHidden(!1),a.updateButtons(e);const r=a.getBounds().height;a.setBounds({x:o.x,y:o.y+o.height-r,width:o.width,height:r}),o.shrink({bottom:r+n})}onZoomChanged(){this.toolbar.clearActiveButton()}onButtonPress({button:{index:t}}){const{zoomManager:e}=this.ctx,i=this.buttons.at(t);if(!i)return;const{value:s}=i;typeof s=="number"?e.extendToEnd("zoom-buttons",ET.X,s):Array.isArray(s)?e.updateWith("zoom-buttons",ET.X,()=>s):typeof s=="function"&&e.updateWith("zoom-buttons",ET.X,s),this.toolbar.toggleActiveButtonByIndex(t)}};y([O4(Qst)],wT.prototype,"enabled",2),y([O4(qst)],wT.prototype,"buttons",2);var E4=1e3*60*60*24,RT=E4*30,iat=E4*365,sat={type:"root",optionsKey:"ranges",packageType:"enterprise",chartTypes:["cartesian"],moduleFactory:t=>new wT(t),themeTemplate:{ranges:{enabled:!1,buttons:[{label:"toolbarRange1Month",ariaLabel:"toolbarRange1MonthAria",value:RT},{label:"toolbarRange3Months",ariaLabel:"toolbarRange3MonthsAria",value:3*RT},{label:"toolbarRange6Months",ariaLabel:"toolbarRange6MonthsAria",value:6*RT},{label:"toolbarRangeYearToDate",ariaLabel:"toolbarRangeYearToDateAria",value:(t,e)=>[new Date(`${new Date(e).getFullYear()}-01-01`).getTime(),e]},{label:"toolbarRange1Year",ariaLabel:"toolbarRange1YearAria",value:iat},{label:"toolbarRangeAll",ariaLabel:"toolbarRangeAllAria",value:(t,e)=>[t,e]}]}}},ubt=(P(),_(w)),w4=(P(),_(w)),R4=class wy extends w4._ModuleSupport.BaseModuleInstance{constructor(e){super(),this.ctx=e,this.activeSections=new Set,this.sectionButtons={annotations:[],chartToolbar:[]}}getSharedToolbar(e){return this.sharedToolbar||this.createSharedToolbar(),this.toolbarWithSection(e)}createSharedToolbar(){this.sharedToolbar=new w4._ModuleSupport.Toolbar(this.ctx.localeManager,"vertical"),this.sharedToolbar.addClass("ag-charts-shared-toolbar"),this.ctx.domManager.addChild("canvas-overlay","shared-toolbar",this.sharedToolbar.getElement()),this.destroyFns.push(()=>{this.sharedToolbar?.destroy(),this.sharedToolbar=void 0,this.ctx.domManager.removeChild("canvas-overlay","shared-toolbar")})}toolbarWithSection(e){const i=this.sharedToolbar,s={layout:a=>{if(this.firstLayoutSection!=null&&this.firstLayoutSection!==e&&this.activeSections.has(this.firstLayoutSection))return;this.firstLayoutSection=e;const n=i.getBounds().width;i.setBounds({x:a.x,y:a.y,width:n}),a.shrink({left:n+i.horizontalSpacing})},addToolbarListener:(a,n)=>i.addToolbarListener(a,o=>{const r=this.getSectionIndex(e,o.button.index);if(r<0)return;const l={...o,button:this.sectionButtons[e][r]};n(l)}),updateButtons:a=>{this.sectionButtons[e]=a;const n=wy.SECTION_ORDER.flatMap(o=>this.sectionButtons[o]);i.updateButtons(n)},updateButtonByIndex:(a,n)=>{i.updateButtonByIndex(this.getIndex(e,a),n)},toggleActiveButtonByIndex:a=>{i.toggleActiveButtonByIndex(this.getIndex(e,a))},toggleButtonEnabledByIndex:(a,n)=>{i.toggleButtonEnabledByIndex(this.getIndex(e,a),n)},setHidden:a=>{a?this.activeSections.delete(e):this.activeSections.add(e);let n=0;for(const o of wy.SECTION_ORDER){if(o!==e){n+=this.sectionButtons[o].length;continue}for(const r of this.sectionButtons[e].keys())i.setButtonHiddenByIndex(n+r,a)}},destroy:()=>{s.setHidden(!0),this.activeSections.size===0&&this.destroy()},clearActiveButton:i.clearActiveButton.bind(i),addListener:i.addListener.bind(i),removeListener:i.removeListener.bind(i)};return s.setHidden(!1),s}getIndex(e,i){let s=0;for(const a of wy.SECTION_ORDER){if(a===e)return s+i;s+=this.sectionButtons[a].length}return-1}getSectionIndex(e,i){let s=0;for(const a of wy.SECTION_ORDER){if(a===e)return i>=s+this.sectionButtons[e].length?-1:i-s;s+=this.sectionButtons[a].length}return-1}};R4.SECTION_ORDER=["chartToolbar","annotations"];var aat=R4,nat={type:"context",contextKey:"sharedToolbar",packageType:"enterprise",chartTypes:["cartesian"],moduleFactory:t=>new aat(t)},wd=(P(),_(w)),_T=(P(),_(w)),{CachedTextMeasurerPool:Kf,ZIndexMap:oat,LayoutElement:rat,Validate:Cs,BaseProperties:lat,OBJECT:Rd,BOOLEAN:cat,STRING:_d,COLOR_STRING:hat,RATIO:uat,valueProperty:dat,TextUtils:pat,Group:gat,Label:Xf,Rect:fat,Text:Si}=_T._ModuleSupport,_4={ohlc:62,candlestick:62,"hollow-candlestick":62,line:96,"step-line":96,hlc:184,"high-low":800},yat={up:"positive",down:"negative"},mat={hlc:"altNeutral"},PT=class extends lat{constructor(){super(...arguments),this.fill="black",this.fillOpacity=1}};y([Cs(hat)],PT.prototype,"fill",2),y([Cs(uat)],PT.prototype,"fillOpacity",2);var Zs=class extends _T._ModuleSupport.BaseModuleInstance{constructor(t){super(),this.ctx=t,this.enabled=!1,this.openKey=void 0,this.highKey=void 0,this.lowKey=void 0,this.closeKey=void 0,this.volumeKey=void 0,this.title=new Xf,this.positive=new Xf,this.negative=new Xf,this.neutral=new Xf,this.altNeutral=new Xf,this.background=new PT,this.layoutStyle="block",this.id="status-bar",this.data=void 0,this.layer=new gat({name:"StatusBar",zIndex:oat.STATUS_BAR}),this.labelGroup=this.layer.appendChild(new _T._ModuleSupport.TranslatableGroup),this.backgroundNode=this.labelGroup.appendChild(new fat),this.labels=[{label:"O",configuration:2,title:this.labelGroup.appendChild(new Si),value:this.labelGroup.appendChild(new Si),id:"openValue",key:"openKey",domain:void 0,formatter:new Intl.NumberFormat("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})},{label:"H",configuration:16,title:this.labelGroup.appendChild(new Si),value:this.labelGroup.appendChild(new Si),id:"highValue",key:"highKey",domain:void 0,formatter:new Intl.NumberFormat("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})},{label:"H",configuration:256,title:this.labelGroup.appendChild(new Si),value:this.labelGroup.appendChild(new Si),style:"neutral",id:"highValue",key:"highKey",domain:void 0,formatter:new Intl.NumberFormat("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})},{label:"L",configuration:8,title:this.labelGroup.appendChild(new Si),value:this.labelGroup.appendChild(new Si),id:"lowValue",key:"lowKey",domain:void 0,formatter:new Intl.NumberFormat("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})},{label:"L",configuration:512,title:this.labelGroup.appendChild(new Si),value:this.labelGroup.appendChild(new Si),style:"neutral",id:"lowValue",key:"lowKey",domain:void 0,formatter:new Intl.NumberFormat("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})},{label:"C",configuration:4,title:this.labelGroup.appendChild(new Si),value:this.labelGroup.appendChild(new Si),id:"closeValue",key:"closeKey",domain:void 0,formatter:new Intl.NumberFormat("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})},{label:"C",configuration:128,title:this.labelGroup.appendChild(new Si),value:this.labelGroup.appendChild(new Si),id:"closeValue",key:"closeKey",style:"neutral",domain:void 0,formatter:new Intl.NumberFormat("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})},{label:"",configuration:64,title:this.labelGroup.appendChild(new Si),value:this.labelGroup.appendChild(new Si),style:"neutral",id:"closeValue",key:"closeKey",domain:void 0,formatter:new Intl.NumberFormat("en-US",{notation:"compact",minimumFractionDigits:2,maximumFractionDigits:2})},{label:"Vol",configuration:32,title:this.labelGroup.appendChild(new Si),value:this.labelGroup.appendChild(new Si),id:"volumeValue",key:"volumeKey",domain:void 0,formatter:new Intl.NumberFormat("en-US",{notation:"compact",minimumFractionDigits:2,maximumFractionDigits:2})}],this.highlightManager=t.highlightManager,this.labelGroup.visible=!1,this.destroyFns.push(t.scene.attachNode(this.layer),t.layoutManager.registerElement(rat.Overlay,e=>this.startPerformLayout(e)),t.layoutManager.addListener("layout:complete",e=>this.onLayoutComplete(e)),t.highlightManager.addListener("highlight-change",()=>this.updateHighlight()))}async processData(t){if(!this.enabled||this.data==null)return;const e=[];for(const a of this.labels){const{id:n,key:o}=a,r=this[o];r==null?a.domain=void 0:e.push(dat(r,"number",{id:n}))}if(e.length===0)return;const{processedData:i,dataModel:s}=await t.request(this.id,this.data,{props:e});for(const a of this.labels){const{id:n,key:o}=a;this[o]!=null&&(a.domain=s.getDomain(this,n,"value",i))}}startPerformLayout(t){if(this.labelGroup.translationX=0,this.labelGroup.translationY=0,!this.enabled)return;const{layoutBox:e}=t,i=4,s=12,a=0,n=8;this.labelGroup.translationY=e.y+a;const o=Math.max(this.title.fontSize,this.positive.fontSize,this.negative.fontSize),r=pat.getLineHeight(o),l=_4[this.getChartType()]??0;let c=0,h,u="alphabetic";if(this.layoutStyle==="block")e.shrink(a+r+n,"top"),h=o+(r-o)/2;else{const{title:d}=this.ctx.chartService;if(u="top",h=a+d.padding,d.enabled){const p=d.node.getBBox();c=p.x+p.width+s}else c=d.padding}for(const{label:d,configuration:p,title:g,value:f,domain:x,formatter:m}of this.labels){if(x==null||!(l&p)){g.visible=!1,f.visible=!1;continue}const b=Math.max(Kf.measureText(m.format(x[0]),{font:this.positive.getFont(),textBaseline:u,textAlign:"left"}).width,Kf.measureText(m.format(x[1]),{font:this.positive.getFont(),textBaseline:u,textAlign:"left"}).width,Kf.measureText(m.format(x[0]),{font:this.negative.getFont(),textBaseline:u,textAlign:"left"}).width,Kf.measureText(m.format(x[1]),{font:this.negative.getFont(),textBaseline:u,textAlign:"left"}).width);g.visible=!0,f.visible=!0;const v=Kf.measureText(d,{font:this.title.getFont(),textBaseline:u,textAlign:"left"});g.setFont(this.title),g.fill=this.title.color,g.text=d,g.textBaseline=u,g.y=h,g.x=c,c+=v.width+i,f.textBaseline=u,f.y=h,f.x=c,c+=b+s}this.backgroundNode.x=0,this.backgroundNode.y=0,this.backgroundNode.width=c-s,this.backgroundNode.height=r+a+n,this.backgroundNode.fill=this.background.fill,this.backgroundNode.fillOpacity=this.background.fillOpacity}onLayoutComplete(t){this.labelGroup.translationX=t.series.rect.x,this.updateHighlight()}updateHighlight(){if(!this.enabled)return;const t=this.highlightManager.getActiveHighlight(),e=t?.datum??this.data?.at(-1);if(e==null){this.labelGroup.visible=!1;return}this.labelGroup.visible=!0;const i=t?.itemId;let s=i!=null?yat[i]:void 0;s==null&&this.openKey!=null&&this.closeKey!=null&&(e[this.openKey]<e[this.closeKey]?s="positive":s="negative");for(const{domain:a,value:n,key:o,formatter:r,style:l}of this.labels){if(a==null)continue;let c=l??s??"neutral";c==="neutral"&&(c=mat[this.getChartType()]??c);const h=this[o],u=h!=null?e?.[h]:void 0;n.setFont(this[c]),n.fill=this[c].color,n.text=typeof u=="number"?r.format(u):""}}getChartType(){let t=this.ctx.chartService.publicApi?.getOptions()?.chartType;return(t==null||_4[t]==null)&&(t="candlestick"),t}};y([Cs(cat)],Zs.prototype,"enabled",2),y([Cs(_d,{optional:!0})],Zs.prototype,"openKey",2),y([Cs(_d,{optional:!0})],Zs.prototype,"highKey",2),y([Cs(_d,{optional:!0})],Zs.prototype,"lowKey",2),y([Cs(_d,{optional:!0})],Zs.prototype,"closeKey",2),y([Cs(_d,{optional:!0})],Zs.prototype,"volumeKey",2),y([Cs(Rd)],Zs.prototype,"title",2),y([Cs(Rd)],Zs.prototype,"positive",2),y([Cs(Rd)],Zs.prototype,"negative",2),y([Cs(Rd)],Zs.prototype,"neutral",2),y([Cs(Rd)],Zs.prototype,"altNeutral",2),y([Cs(Rd)],Zs.prototype,"background",2),y([Cs(_d)],Zs.prototype,"layoutStyle",2);var xat={type:"root",identifier:"status-bar",optionsKey:"statusBar",packageType:"enterprise",chartTypes:["cartesian"],moduleFactory:t=>new Zs(t),themeTemplate:{statusBar:{enabled:!1,layoutStyle:wd._ModuleSupport.ThemeSymbols.DEFAULT_CAPTION_LAYOUT_STYLE,title:{color:wd._ModuleSupport.ThemeSymbols.DEFAULT_LABEL_COLOUR},positive:{color:wd._ModuleSupport.ThemeSymbols.PALETTE_UP_STROKE},negative:{color:wd._ModuleSupport.ThemeSymbols.PALETTE_DOWN_STROKE},neutral:{color:wd._ModuleSupport.ThemeSymbols.PALETTE_NEUTRAL_STROKE},background:{fill:wd._ModuleSupport.ThemeSymbols.DEFAULT_BACKGROUND_COLOUR,fillOpacity:.5},altNeutral:{color:"gray"}}}},bat=(P(),_(w)),{BOOLEAN:BT,STRING:Sat,UNION:vat,BaseProperties:Mat,CartesianAxis:P4,ChartUpdateType:B4,isDate:Dat,isDefined:Aat,isFiniteNumber:JS,unique:Iat,ObserveChanges:Zf,TooltipManager:kat,Validate:$f,Logger:Lat}=bat._ModuleSupport,_h=class extends Mat{constructor(t){super(),this.moduleContext=t,this.enabled=!1,this.axes="x",this.nodeInteraction=!0,this.zoom=!0}updateSiblings(t){const{syncManager:e}=this.moduleContext;for(const i of e.getGroupSiblings(t??this.groupId))this.updateChart(i)}updateChart(t,e=B4.UPDATE_DATA){t.ctx.updateService.update(e,{skipSync:!0})}enabledZoomSync(){const{syncManager:t,zoomManager:e}=this.moduleContext;this.disableZoomSync=e.addListener("zoom-change",()=>{for(const i of t.getGroupSiblings(this.groupId))i.modulesManager.getModule("sync")?.zoom&&i.ctx.zoomManager.updateZoom("sync",this.mergeZoom(i))})}enabledNodeInteractionSync(){const{highlightManager:t,syncManager:e}=this.moduleContext;this.disableNodeInteractionSync=t.addListener("highlight-change",i=>{for(const s of e.getGroupSiblings(this.groupId))if(s.modulesManager.getModule("sync")?.nodeInteraction){if(!i.currentHighlight?.datum){s.ctx.highlightManager.updateHighlight(s.id),s.ctx.tooltipManager.removeTooltip(s.id);continue}for(const a of s.axes){const n=this.axes==="xy"?"x":this.axes;if(!P4.is(a)||a.direction!==n)continue;const o=s.series.map(r=>{const l=r.getKeys(a.direction);if(a.keys.length&&!a.keys.some(g=>l.includes(g)))return;const{nodeData:c}=r.contextNodeData;if(!c?.length)return;const h=c[0][`${a.direction}Key`];let u=i.currentHighlight.datum[h];const d=Dat(u);d&&(u=u.getTime());const p=c.find(g=>{const f=g.datum[h];return d?f.getTime()===u:f===u});return p?{series:r,nodeDatum:p}:null}).filter(Aat);if(o.length<2&&o[0]?.nodeDatum!==s.ctx.highlightManager.getActiveHighlight()){const{series:r,nodeDatum:l}=o[0]??{};if(s.ctx.highlightManager.updateHighlight(s.id,l),l){const c=l.midPoint?.x??l.point?.x??0,h=l.midPoint?.y??l.point?.y??0,u=kat.makeTooltipMeta({type:"hover",canvasX:c,canvasY:h},l);delete u.lastPointerEvent,s.ctx.tooltipManager.updateTooltip(s.id,u,r.getTooltipContent(l))}else s.ctx.tooltipManager.removeTooltip(s.id);this.updateChart(s,B4.SERIES_UPDATE)}}}})}getSyncedDomain(t){if(!P4.is(t)||this.axes!=="xy"&&this.axes!==t.direction)return;const{syncManager:e}=this.moduleContext,i=e.getGroup(this.groupId),[{axes:s}]=i,{direction:a,min:n,max:o,nice:r,reverse:l}=t;for(const c of s)if(a===c.direction&&(r!==c.nice||l!==c.reverse||n!==c.min&&(JS(n)||JS(c.min))||o!==c.max&&(JS(o)||JS(c.max)))){Lat.warnOnce("To allow synchronization, ensure that all charts have matching min, max, nice, and reverse properties on the synchronized axes."),this.enabled=!1;return}return Iat(i.flatMap(c=>c.series).filter(c=>{if(c.visible){const h=c.getKeys(t.direction);return t.keys.length?t.keys.some(u=>h.includes(u)):!0}}).flatMap(c=>c.getDomain(t.direction)))}mergeZoom(t){const{zoomManager:e}=this.moduleContext;if(this.axes==="xy")return e.getZoom();const i=t.ctx.zoomManager.getZoom()??{};return i[this.axes]=e.getZoom()?.[this.axes],i}onEnabledChange(){const{syncManager:t}=this.moduleContext;this.enabled?t.subscribe(this.groupId):t.unsubscribe(this.groupId),this.updateSiblings(),this.onNodeInteractionChange(),this.onZoomChange()}onGroupIdChange(t,e){if(!this.enabled||t===e)return;const{syncManager:i}=this.moduleContext;i.unsubscribe(e),i.subscribe(t),this.updateSiblings(e),this.updateSiblings(t)}onAxesChange(){if(!this.enabled)return;const{syncManager:t}=this.moduleContext;this.updateChart(t.getChart())}onNodeInteractionChange(){this.enabled&&this.nodeInteraction?this.enabledNodeInteractionSync():this.disableNodeInteractionSync?.()}onZoomChange(){this.enabled&&this.zoom?this.enabledZoomSync():this.disableZoomSync?.()}destroy(){const{syncManager:t}=this.moduleContext;t.unsubscribe(this.groupId),this.updateSiblings(),this.disableZoomSync?.()}};_h.className="Sync",y([$f(BT),Zf(t=>t.onEnabledChange())],_h.prototype,"enabled",2),y([$f(Sat,{optional:!0}),Zf((t,e,i)=>t.onGroupIdChange(e,i))],_h.prototype,"groupId",2),y([$f(vat(["x","y","xy"],"an axis")),Zf(t=>t.onAxesChange())],_h.prototype,"axes",2),y([$f(BT),Zf(t=>t.onNodeInteractionChange())],_h.prototype,"nodeInteraction",2),y([$f(BT),Zf(t=>t.onZoomChange())],_h.prototype,"zoom",2);var Tat={type:"root",optionsKey:"sync",packageType:"enterprise",chartTypes:["cartesian"],moduleFactory:t=>new _h(t),themeTemplate:{sync:{enabled:!1}}},Pr=(P(),_(w)),z4=(P(),_(w)),{COLOR_STRING:Nat,RATIO:Cat,Validate:F4}=z4._ModuleSupport,tv=class extends z4._ModuleSupport.Rect{constructor(){super(...arguments),this.fill="rgb(33, 150, 243)",this.fillOpacity=.2}};tv.className="ZoomRect",y([F4(Nat)],tv.prototype,"fill",2),y([F4(Cat)],tv.prototype,"fillOpacity",2);var zT=(P(),_(w)),Oat=(P(),_(w)),{clamp:Eat,isNumberEqual:j4,round:G4}=Oat._ModuleSupport,Zt={min:0,max:1},FT="end",jT="middle",ev=(t,e=Zt.min,i=Zt.max)=>Eat(e,t,i);function GT(){return{x:{...Zt},y:{...Zt}}}function ii(t){return t.x.max-t.x.min}function $s(t){return t.y.max-t.y.min}function V4(t,e,i=1e-10){return j4(t.min,e.min,i)&&j4(t.max,e.max,i)}function VT(t,e,i){return V4(t.x,e.x,i)&&V4(t.y,e.y,i)}function UT(t,e,i){const s=G4(ii(t),10)<=e,a=G4($s(t),10)<=i;return s||a}function Pi(t){return{x:{min:t?.x?.min??Zt.min,max:t?.x?.max??Zt.max},y:{min:t?.y?.min??Zt.min,max:t?.y?.max??Zt.max}}}function Br(t,e,i){if(!t)return{x:0,y:0};const s=ev(e-t.x,0,t.x+t.width),a=ev(i-t.y,0,t.y+t.height),n=1/t.width*s,o=1-1/t.height*a;return{x:ev(n),y:ev(o)}}function Ph(t,e,i){return{x:{min:t.x.min+e,max:t.x.max+e},y:{min:t.y.min+i,max:t.y.max+i}}}function U4(t,e,i){return{x:{min:t.x.min,max:t.x.min+ii(t)*e},y:{min:t.y.min,max:t.y.min+$s(t)*i}}}function W4(t,e,i){const s=ii(t),a=$s(t),n=t.x.min+s/2,o=t.y.min+a/2;return{x:{min:n-s*e/2,max:n+s*e/2},y:{min:o-a*i/2,max:o+a*i/2}}}function En(t,e,i,s){const{min:a,max:n}=e,o=a+(n-a)/2,r=t.max-t.min;switch(i){case"start":return{min:a,max:e.min+r};case"end":return{min:e.max-r,max:n};case"middle":return{min:o-r/2,max:o+r/2};case"pointer":return WT(t,e,s??o);default:return{min:a,max:n}}}function WT(t,e,i){const s=t.max-t.min,a=e.max-e.min,n=i*(1-(a-s)),o=i-n,r=t.min+o,l=t.max+o;return{min:r,max:l}}function wat(t,e,i){return{x:{min:t.x.min*e,max:t.x.max*e},y:{min:t.y.min*i,max:t.y.max*i}}}function tn(t){const e=GT();return e.x=iv(t.x),e.y=iv(t.y),e}function iv(t){const e=t.max-t.min;let i=t.max>Zt.max?Zt.max-e:t.min,s=t.min<Zt.min?e:t.max;return i=Math.max(Zt.min,i),s=Math.min(Zt.max,s),{min:i,max:s}}function H4({min:t,max:e},i,s){if(e===i.max)t=e-s;else if(t===i.min)e=t+s;else{const a=t+(e-t)/2;t=a-s/2,e=a+s/2}return{min:t,max:e}}var Rat=class{update(t,e,i,s,a,n){return this.oldZoom??(this.oldZoom=Pi(e===zT._ModuleSupport.ChartAxisDirection.X?{...a,x:n}:{...a,y:n})),this.updateCoords(t.regionX,t.regionY),this.updateZoom(e,i,s)}stop(){this.coords=void 0,this.oldZoom=void 0}updateCoords(t,e){this.coords?(this.coords.x2=t,this.coords.y2=e):this.coords={x1:t,y1:e,x2:t,y2:e}}updateZoom(t,e,i){const{coords:s,oldZoom:a}=this;let n=Pi(a);if(!s||!a)return t===zT._ModuleSupport.ChartAxisDirection.X?n.x:n.y;const o=Br(i,s.x1,s.y1),r=Br(i,s.x2,s.y2);if(t===zT._ModuleSupport.ChartAxisDirection.X){const c=(r.x-o.x)*ii(a);return n.x.max+=c,n.x=En(n.x,a.x,e,o.x),n=tn(n),n.x}const l=(r.y-o.y)*$s(a);return n.y.max-=l,n.y=En(n.y,a.y,e,o.y),n=tn(n),n.y}},HT="zoom-action",YT="pan-action",_at=class{constructor(t,e,i,s,a){this.contextMenuRegistry=t,this.zoomManager=e,this.getModuleProperties=i,this.getRect=s,this.updateZoom=a}registerActions(t,e){if(!t)return;const{contextMenuRegistry:i}=this,s=i.registerDefaultAction({id:HT,type:"series-area",label:"contextMenuZoomToCursor",action:this.onZoomToHere.bind(this)}),a=i.registerDefaultAction({id:YT,type:"series-area",label:"contextMenuPanToCursor",action:this.onPanToHere.bind(this)});return this.toggleActions(e),()=>{s(),a()}}toggleActions(t){const{contextMenuRegistry:e}=this,{minRatioX:i,minRatioY:s}=this.getModuleProperties();UT(t,i,s)?e.disableAction(HT):e.enableAction(HT),VT(t,GT())?e.disableAction(YT):e.enableAction(YT)}computeOrigin(t){const e=this.getRect(),{enabled:i}=this.getModuleProperties();if(!i||!e||!t?.target||!(t instanceof MouseEvent))return;const s={x:0,y:0,width:e.width,height:e.height};return Br(s,t.offsetX,t.offsetY)}onZoomToHere({event:t}){const e=this.computeOrigin(t);if(!e)return;const{isScalingX:i,isScalingY:s,minRatioX:a,minRatioY:n}=this.getModuleProperties(),o=Pi(this.zoomManager.getZoom()),r=e.x*ii(o),l=e.y*$s(o),c=Zt.max-Zt.min,h=c/2;let u={x:{min:e.x-h,max:e.x+h},y:{min:e.y-h,max:e.y+h}};u=W4(u,i?a:c,s?n:c),u=Ph(u,o.x.min-e.x+r,o.y.min-e.y+l),this.updateZoom(tn(u))}onPanToHere({event:t}){const e=this.computeOrigin(t);if(!e)return;const i=Pi(this.zoomManager.getZoom()),s=ii(i),a=$s(i),n=e.x*s,o=e.y*a,r=(Zt.max-Zt.min)/2;let l={x:{min:e.x-r,max:e.x+r},y:{min:e.y-r,max:e.y+r}};l=W4(l,s,a),l=Ph(l,i.x.min-e.x+n,i.y.min-e.y+o),this.updateZoom(tn(l))}},KT=(P(),_(w)),{BBoxValues:Pat}=KT._ModuleSupport,Bat=class{constructor(t){this.axesHandlers=t,this.axes=[]}initAxis(t,e,i,s){const{X:a,Y:n}=KT._ModuleSupport.ChartAxisDirection,o={[a]:"ew-resize",[n]:"ns-resize"}[s],r="afterend",l=t.proxyInteractionService.createProxyElement({type:"region",domManagerId:e,where:r});return l.setCursor(o),l.addListener("drag-start",()=>i.onDragStart(e,s)),l.addListener("drag-move",c=>i.onDrag(c)),l.addListener("drag-end",i.onDragEnd),l.addListener("dblclick",()=>i.onDoubleClick(e,s)),{axisId:e,div:l}}destroy(){this.axes.forEach(t=>t.div.destroy())}update(t){const{X:e,Y:i}=KT._ModuleSupport.ChartAxisDirection,s=[...t.axisManager.getAxisContext(e),...t.axisManager.getAxisContext(i)],{removed:a,added:n}=this.diffAxisIds(s);a.length>0&&(this.axes=this.axes.filter(o=>a.includes(o.axisId)?(o.div.destroy(),!1):!0));for(const o of n){const{axisId:r,direction:l}=o;this.axes.push(this.initAxis(t,r,this.axesHandlers,l))}for(const o of this.axes){const l=s.filter(c=>c.axisId===o.axisId)[0].getCanvasBounds();o.div.setHidden(Pat.isEmpty(l)),l!==void 0&&o.div.setBounds(l)}}diffAxisIds(t){const e=this.axes.map(n=>n.axisId),i=t.map(n=>n.axisId),s=e.filter(n=>!i.includes(n)),a=t.filter(n=>!e.includes(n.axisId));return{removed:s,added:a}}},zat=(P(),_(w)),Y4=16,Fat={off:1,short:.01,long:.002},jat=class{constructor(){this.deceleration=1,this.zoomCoordsHistoryIndex=0,this.coordsHistory=[]}get decelerationValue(){const{deceleration:t}=this;return Math.max(typeof t=="number"?t:Fat[t]??1,1e-4)}addListener(t,e){return this.onUpdate=e,()=>{this.onUpdate=void 0}}stopInteractions(){this.inertiaHandle!=null&&(cancelAnimationFrame(this.inertiaHandle),this.inertiaHandle=void 0)}update(t){this.updateCoords(t.regionX,t.regionY);const{x1:e=0,y1:i=0,x2:s=0,y2:a=0}=this.coords??{};this.onUpdate?.({type:"update",deltaX:e-s,deltaY:i-a})}start(){this.coordsMonitorTimeout=setInterval(this.recordCurrentZoomCoords.bind(this),16)}stop(){const{coordsHistory:t}=this;let e=0,i=0,s=0;if(t.length>0){const a=this.zoomCoordsHistoryIndex%Y4;let n=a-1;n<0&&(n=t.length-1);let o=a;o>=t.length&&(o=0);const r=t[n],l=t[o];e=r.x-l.x,i=r.y-l.y,s=r.t-l.t}if(this.coords=void 0,clearInterval(this.coordsMonitorTimeout),this.coordsMonitorTimeout=void 0,this.zoomCoordsHistoryIndex=0,this.coordsHistory.length=0,s>0&&this.decelerationValue<1){const a=e/s,n=i/s,o=Math.hypot(a,n),r=Math.atan2(n,a),l=performance.now();this.inertiaHandle=zat._ModuleSupport.getWindow().requestAnimationFrame(c=>{this.animateInertia(c,c,l,o,r)})}}recordCurrentZoomCoords(){const{coords:t,coordsHistory:e,zoomCoordsHistoryIndex:i}=this;if(!t)return;const{x2:s,y2:a}=t,n=Date.now();e[i%Y4]={x:s,y:a,t:n},this.zoomCoordsHistoryIndex+=1}animateInertia(t,e,i,s,a){const n=1-this.decelerationValue,o=-s/Math.log(n),r=s*(n**(e-i)-1)/Math.log(n),l=s*(n**(t-i)-1)/Math.log(n);this.onUpdate?.({type:"update",deltaX:-Math.cos(a)*(l-r),deltaY:-Math.sin(a)*(l-r)}),!(l>=o-1)&&(this.inertiaHandle=requestAnimationFrame(c=>{this.animateInertia(c,t,i,s,a)}))}updateCoords(t,e){this.coords?this.coords={x1:this.coords.x2,y1:this.coords.y2,x2:t,y2:e}:this.coords={x1:t,y1:e,x2:t,y2:e}}translateZooms(t,e,i,s){const a=Br(t,t.x+Math.abs(i),t.y+t.height-Math.abs(s)),n=Math.sign(i)*a.x,o=-Math.sign(s)*a.y,r={};for(const[l,{direction:c,zoom:h}]of Object.entries(e)){if(h&&h.min===Zt.min&&h.max===Zt.max)continue;let u=Pi({[c]:h});u=tn(Ph(u,n*ii(u),o*$s(u))),r[l]={direction:c,zoom:u[c]}}return r}},Gat=(P(),_(w)),Vat=200,Uat=class{update(t,e,i,s){const a=t.deltaX*e*Vat;return this.translateZooms(i,s,a)}translateZooms(t,e,i){const s={},a=Br(t,t.x+Math.abs(i),0),n=i<0?-a.x:a.x;for(const[o,{direction:r,zoom:l}]of Object.entries(e)){if(r!==Gat._ModuleSupport.ChartAxisDirection.X)continue;let c=Pi({x:l});c=tn(Ph(c,n*ii(c),0)),s[o]={direction:r,zoom:c.x}}return s}},K4=(P(),_(w)),Wat=class{updateAxes(t,e,i,s){const a=t.sourceEvent,n={},{anchorPointX:o,anchorPointY:r,isScalingX:l,isScalingY:c,scrollingStep:h}=e,u=Br(i,a.offsetX??a.clientX,a.offsetY??a.clientY);for(const[d,{direction:p,zoom:g}]of Object.entries(s)){if(g==null)continue;let f={...g};const x=h*t.deltaY*(g.max-g.min);if(p===K4._ModuleSupport.ChartAxisDirection.X&&l)f.max+=x,f=En(f,g,o,u.x);else if(p===K4._ModuleSupport.ChartAxisDirection.Y&&c)f.max+=x,f=En(f,g,r,u.y);else continue;n[d]={direction:p,zoom:iv(f)}}return n}update(t,e,i,s){const{anchorPointX:a,anchorPointY:n,isScalingX:o,isScalingY:r,scrollingStep:l}=e,c=Br(i,t.canvasX,t.canvasY),h=t.deltaY;let u=Pi(s);return u.x.max+=o?l*h*ii(s):0,u.y.max+=r?l*h*$s(s):0,o&&(u.x=En(u.x,s.x,a,c.x)),r&&(u.y=En(u.y,s.y,n,c.y)),u=tn(u),u}updateDelta(t,e,i){const{anchorPointX:s,anchorPointY:a,isScalingX:n,isScalingY:o,scrollingStep:r}=e;let l=Pi(i);return l.x.max+=n?r*-t*ii(i):0,l.y.max+=o?r*-t*$s(i):0,n&&(l.x=En(l.x,i.x,s)),o&&(l.y=En(l.y,i.y,a)),l=tn(l),l}},Hat=class{constructor(t){this.rect=t,this.rect.visible=!1}update(t,e,i,s){this.rect.visible=!0,this.updateCoords(t.canvasX,t.canvasY,e,i,s),this.updateRect(i)}stop(t,e,i){let s=Pi();if(!t||!e)return s;this.coords&&(s=this.createZoomFromCoords(e,i));const a=e.width/t.width,n=e.height/t.height;return s=tn(wat(s,a,n)),this.reset(),s}reset(){this.coords=void 0,this.rect.visible=!1}didUpdate(){return this.rect.visible&&this.rect.width>0&&this.rect.height>0}updateCoords(t,e,i,s,a){if(!this.coords){this.coords={x1:t,y1:e,x2:t,y2:e};return}const{coords:n}=this;if(n.x2=t,n.y2=e,!s)return;const{isScalingX:o,isScalingY:r,keepAspectRatio:l,minRatioX:c,minRatioY:h}=i,u=Pi(a),d=this.getNormalisedDimensions(),p=u.x.max-u.x.min,g=u.y.max-u.y.min,f=c/p,x=h/g;if(o&&d.width/s.width<f&&(n.x2<n.x1?n.x2=n.x1-s.width*f:n.x2=n.x1+s.width*f),l&&o&&r){const m=s.width/s.height;n.y2<n.y1?n.y2=Math.min(n.y1-d.width/m,n.y1-s.height*x):n.y2=Math.max(n.y1+d.width/m,n.y1+s.height*x)}else r&&d.height/s.height<x&&(n.y2<n.y1?n.y2=n.y1-s.height*x:n.y2=n.y1+s.height*x);o||(n.x1=s.x,n.x2=s.x+s.width),r||(n.y1=s.y,n.y2=s.y+s.height)}updateRect(t){if(!t)return;const{rect:e}=this,i=this.getNormalisedDimensions(),{width:s,height:a}=i;let{x:n,y:o}=i;n=Math.max(n,t.x),n-=Math.max(0,n+s-(t.x+t.width)),o=Math.max(o,t.y),o-=Math.max(0,o+a-(t.y+t.height)),e.x=n,e.y=o,e.width=s,e.height=a}createZoomFromCoords(t,e){const i=Pi(e),s=this.getNormalisedDimensions(),a=Br(t,s.x,s.y+s.height),n=s.width/t.width,o=s.height/t.height;let r=U4(i,n,o);const l=a.x*ii(i),c=a.y*$s(i);return r=Ph(r,l,c),r=tn(r),r}getNormalisedDimensions(){const{x1:t=0,y1:e=0,x2:i=0,y2:s=0}=this.coords??{},a=t<=i?t:i,n=e<=s?e:s,o=t<=i?i-t:t-i,r=e<=s?s-e:e-s;return{x:a,y:n,width:o,height:r}}},Yat=(P(),_(w)),{ARRAY:Kat,BOOLEAN:Xat,STRING:Zat,UNION:$at,ActionOnSet:Qat,BaseProperties:qat,ChartAxisDirection:Jat,InteractionState:X4,NativeWidget:tnt,PropertiesArray:ent,Toolbar:int,ToolbarButtonProperties:snt,Validate:sv,createElement:ant}=Yat._ModuleSupport,XT=class extends snt{};y([sv($at(["reset","zoom-in","zoom-out","pan-left","pan-right","pan-start","pan-end"]))],XT.prototype,"value",2),y([sv(Zat)],XT.prototype,"section",2);var ZT=class extends qat{constructor(t,e,i,s,a,n){super(),this.ctx=t,this.getModuleProperties=e,this.getResetZoom=i,this.updateZoom=s,this.updateAxisZoom=a,this.resetZoom=n,this.enabled=!1,this.buttons=new ent(XT),this.verticalSpacing=10,this.detectionRange=38,this.destroyFns=[],this.container=new tnt(ant("div")),this.container.addClass("ag-charts-zoom-buttons"),t.domManager.addChild("canvas-overlay","zoom-buttons",this.container.getElement()),this.toolbar=new int(t.localeManager),this.container.addChild(this.toolbar),this.toggleVisibility(!1),this.destroyFns.push(this.toolbar.addToolbarListener("button-pressed",this.onButtonPress.bind(this)),this.toolbar.addToolbarListener("button-focused",this.onButtonFocus.bind(this)),t.interactionManager.addListener("hover",this.onHover.bind(this),X4.All),t.interactionManager.addListener("leave",this.onLeave.bind(this),X4.All),t.layoutManager.addListener("layout:complete",this.onLayoutComplete.bind(this)),this.teardown.bind(this))}destroy(){for(const t of this.destroyFns)t()}teardown(){this.ctx.domManager.removeChild("canvas-overlay","zoom-buttons"),this.container.destroy()}onLayoutComplete(t){const{buttons:e,container:i}=this,{rect:s}=t.series;this.toolbar.updateButtons(e),this.toggleButtons();const a=i.getBounds().height;i.setBounds({y:s.y+s.height-a})}onHover(t){if(!this.enabled||this.toolbar.isHidden())return;const{container:e,detectionRange:i,ctx:{scene:s}}=this,{offsetY:a,sourceEvent:{target:n}}=t,o=e.getElement(),r=o.offsetTop-i,l=a>r&&a<s.canvas.element.offsetHeight||n===o;this.toggleVisibility(l)}onLeave(){this.toggleVisibility(!1)}toggleVisibility(t,e=!1){const{container:i,toolbar:s,verticalSpacing:a}=this;s.toggleClass("ag-charts-zoom-buttons__toolbar--hidden",!t);const n=s.getElement();n.style.transitionDuration=e?"0s":"",n.style.transform=t?"translateY(0)":`translateY(${i.getBounds().height+a}px)`}toggleButtons(){const t=Pi(this.ctx.zoomManager.getZoom()),{minRatioX:e,minRatioY:i}=this.getModuleProperties();for(const[s,a]of this.buttons.entries()){let n=!0;switch(a?.value){case"pan-start":n=t.x.min>Zt.min;break;case"pan-end":n=t.x.max<Zt.max;break;case"pan-left":n=t.x.min>Zt.min;break;case"pan-right":n=t.x.max<Zt.max;break;case"zoom-out":n=!VT(t,GT());break;case"zoom-in":n=!UT(t,e,i);break;case"reset":n=!VT(t,this.getResetZoom());break}this.toolbar.toggleButtonEnabledByIndex(s,n)}}onButtonPress({button:t}){if(!this.enabled||this.toolbar.isHidden())return;const e=this.getModuleProperties();if(e.independentAxes&&t.value!=="reset"){const i=this.ctx.zoomManager.getAxisZooms();for(const[s,{direction:a,zoom:n}]of Object.entries(i))n!=null&&this.onButtonPressAxis(t,e,s,a,n)}else this.onButtonPressUnified(t,e)}onButtonFocus(t){this.toggleVisibility(!0,!0)}onButtonPressAxis(t,e,i,s,a){const{anchorPointX:n,anchorPointY:o,isScalingX:r,isScalingY:l,scrollingStep:c}=e;let h={...a};const u=a.max-a.min;switch(t.value){case"pan-start":h.max=u,h.min=0;break;case"pan-end":h.min=h.max-u,h.max=Zt.max;break;case"pan-left":h.min-=u*c,h.max-=u*c;break;case"pan-right":h.min+=u*c,h.max+=u*c;break;case"zoom-in":case"zoom-out":{const d=s===Jat.X,p=d&&r||!d&&l;let g=t.value==="zoom-in"?1-c:1+c;p||(g=1);const m=d?n==="pointer"?FT:n:o==="pointer"?jT:o;h.max=h.min+(h.max-h.min)*g,h=En(h,a,m);break}}this.updateAxisZoom(i,s,iv(h))}onButtonPressUnified(t,e){const{anchorPointX:i,anchorPointY:s,isScalingX:a,isScalingY:n,scrollingStep:o}=e,r=Pi(this.ctx.zoomManager.getZoom());let l=Pi(r);switch(t.value){case"reset":this.resetZoom();return;case"pan-start":l.x.max=ii(l),l.x.min=0;break;case"pan-end":l.x.min=Zt.max-ii(l),l.x.max=Zt.max;break;case"pan-left":l=Ph(l,-ii(l)*o,0);break;case"pan-right":l=Ph(l,ii(l)*o,0);break;case"zoom-in":case"zoom-out":{const c=t.value==="zoom-in"?1-o:1+o,h=i==="pointer"?FT:i,u=s==="pointer"?jT:s;l=U4(l,a?c:1,n?c:1),l.x=En(l.x,r.x,h),l.y=En(l.y,r.y,u);break}}this.updateZoom(tn(l))}};y([sv(Xat),Qat({changeValue(t){this.toolbar?.setHidden(!t)}})],ZT.prototype,"enabled",2),y([sv(Kat)],ZT.prototype,"buttons",2);var{BOOLEAN:zr,NUMBER:Z4,RATIO:$T,UNION:av,OBJECT:$4,OR:nnt,ActionOnSet:nv,ChartAxisDirection:QT,ChartUpdateType:ont,Validate:si,ProxyProperty:rnt,round:lnt}=Pr._ModuleSupport,Q4=t=>lnt(t,10),q4=av(["pointer","start","middle","end"],"an anchor cord"),J4="zoom-cursor",qT="zoom-tooltip",JT=class extends Pr._ModuleSupport.BaseProperties{constructor(t){super(),this.onChange=t,this.enabled=!1,this.padding=0}};y([si(zr),nv({changeValue(t){this.onChange({enabled:t,padding:this.padding})}})],JT.prototype,"enabled",2),y([si($T),nv({changeValue(t){this.onChange({enabled:this.enabled,padding:t})}})],JT.prototype,"padding",2);var gi=class extends Pr._ModuleSupport.BaseModuleInstance{constructor(t){super(),this.ctx=t,this.enabled=!1,this.enableAxisDragging=!0,this.buttons=new ZT(this.ctx,this.getModuleProperties.bind(this),this.getResetZoom.bind(this),this.updateZoom.bind(this),this.updateAxisZoom.bind(this),this.resetZoom.bind(this)),this.enableDoubleClickToReset=!0,this.enablePanning=!0,this.enableScrolling=!0,this.enableSelecting=!1,this.panKey="alt",this.axes="x",this.scrollingStep=(Zt.max-Zt.min)/10,this.keepAspectRatio=!1,this.minVisibleItemsX=2,this.minVisibleItemsY=2,this.anchorPointX=FT,this.anchorPointY=jT,this.autoScaling=new JT(d=>{this.ctx.zoomManager.setAutoScaleYAxis(d.enabled,d.padding)}),this.axisDragger=new Rat,this.panner=new jat,this.scroller=new Wat,this.scrollPanner=new Uat,this.deceleration="short",this.dragState=0,this.minRatioX=0,this.minRatioY=0,this.destroyContextMenuActions=void 0,this.isFirstWheelEvent=!0,this.debouncedWheelReset=Pr._ModuleSupport.debounce(()=>{this.isFirstWheelEvent=!0},100),this._didAutoZoomOnMount=!1;const e=new tv;this.selector=new Hat(e),this.contextMenu=new _at(t.contextMenuRegistry,t.zoomManager,this.getModuleProperties.bind(this),()=>this.paddedRect,this.updateZoom.bind(this));const{Default:i,ZoomDrag:s,Animation:a,Annotations:n,AnnotationsSelected:o}=Pr._ModuleSupport.InteractionState,r=i|a|s,l=i|a,c=r|n|o,h=t.regionManager.getRegion("series");this.domProxy=new Bat({onDragStart:(d,p)=>this.onAxisDragStart(d,p),onDrag:d=>this.onDrag({regionX:d.offsetX,regionY:d.offsetY,canvasX:NaN,canvasY:NaN}),onDragEnd:()=>this.onDragEnd(),onDoubleClick:(d,p)=>{this.hoveredAxis={id:d,direction:p},this.onDoubleClick(),this.hoveredAxis=void 0}});const u="drag-start";this.destroyFns.push(t.scene.attachNode(e),t.keyNavManager.addListener("nav-zoom",d=>this.onNavZoom(d)),h.addListener("dblclick",d=>this.onDoubleClick(d),l),h.addListener("drag",d=>this.onDrag(d),r),h.addListener(u,d=>this.onDragStart(d),r),h.addListener("drag-end",()=>this.onDragEnd(),r),h.addListener("wheel",d=>this.onWheel(d),c),t.gestureDetector.addListener("pinch-move",d=>this.onPinchMove(d)),t.layoutManager.addListener("layout:complete",d=>this.onLayoutComplete(d)),t.updateService.addListener("update-complete",d=>this.onUpdateComplete(d)),t.zoomManager.addListener("zoom-change",d=>this.onZoomChange(d)),t.zoomManager.addListener("zoom-pan-start",d=>this.onZoomPanStart(d)),this.panner.addListener("update",d=>this.onPanUpdate(d)),()=>this.teardown())}teardown(){this.ctx.zoomManager.setZoomModuleEnabled(!1),this.buttons.destroy(),this.destroyContextMenuActions?.()}onEnabledChange(t){this.ctx.zoomManager.setZoomModuleEnabled(t);const e=this.getZoom();this.contextMenu&&(this.destroyContextMenuActions?.(),this.destroyContextMenuActions=this.contextMenu.registerActions(t,e))}onDoubleClick(t){const{enabled:e,enableDoubleClickToReset:i,hoveredAxis:s,ctx:{zoomManager:a}}=this;!e||!i||(s?a.resetAxisZoom("zoom",s.id):t?.preventZoomDblClick||this.resetZoom())}onDragStart(t){const{enabled:e,enableAxisDragging:i,enablePanning:s,enableSelecting:a,hoveredAxis:n,ctx:{cursorManager:o,zoomManager:r}}=this;if(!e)return;this.panner.stopInteractions();let l=0;if(i&&n)l=1;else if(t!=null){const c=this.isPanningKeyPressed(t.sourceEvent);s&&(!a||c)?(o.updateCursor(J4,"grabbing"),l=2,this.panner.start()):a&&!this.isMinZoom(this.getZoom())&&!c&&(l=3)}(this.dragState=l)!==0&&r.fireZoomPanStartEvent("zoom")}onDrag(t){const{anchorPointX:e,anchorPointY:i,axisDragger:s,dragState:a,enabled:n,paddedRect:o,panner:r,selector:l,seriesRect:c,hoveredAxis:h,ctx:{interactionManager:u,tooltipManager:d,updateService:p,zoomManager:g}}=this;if(!n||!o||!c)return;u.pushState(Pr._ModuleSupport.InteractionState.ZoomDrag);const f=this.getZoom();switch(a){case 1:{if(!h)break;const{id:x,direction:m}=h,b=m===Pr._ModuleSupport.ChartAxisDirection.X?e:i,v=g.getAxisZoom(x),S=s.update(t,m,b,c,f,v);g.setAxisManuallyAdjusted("zoom",x),this.updateAxisZoom(x,m,S);break}case 2:r.update(t);break;case 3:l.update(t,this.getModuleProperties(),o,f);break;case 0:return}d.updateTooltip(qT),p.update(ont.PERFORM_LAYOUT,{skipAnimations:!0})}onDragEnd(){const{axisDragger:t,dragState:e,enabled:i,panner:s,selector:a,ctx:{cursorManager:n,interactionManager:o,tooltipManager:r}}=this;if(o.popState(Pr._ModuleSupport.InteractionState.ZoomDrag),!(!i||e===0)){switch(e){case 1:this.hoveredAxis=void 0,t.stop();break;case 2:s.stop();break;case 3:{if(!a.didUpdate())break;const l=this.getZoom();if(this.isMinZoom(l))break;const c=a.stop(this.seriesRect,this.paddedRect,l);this.updateZoom(c);break}}this.dragState=0,n.updateCursor(J4),r.removeTooltip(qT)}}onNavZoom(t){const{enabled:e,enableScrolling:i,scroller:s}=this;!e||!i||(t.preventDefault(),this.updateZoom(s.updateDelta(t.delta,this.getModuleProperties(),this.getZoom())))}onWheel(t){const{enabled:e,enablePanning:i,enableScrolling:s,paddedRect:a}=this;if(!e||!s||!a)return;const n=t.sourceEvent,{deltaX:o,deltaY:r}=n,l=o!=null&&r!=null&&Math.abs(o)>Math.abs(r);i&&l?this.onWheelPanning(t):this.onWheelScrolling(t)}onWheelPanning(t){const{scrollingStep:e,scrollPanner:i,seriesRect:s,ctx:{zoomManager:a}}=this;if(!s)return;t.preventDefault();const n=i.update(t,e,s,a.getAxisZooms());for(const[o,{direction:r,zoom:l}]of Object.entries(n))this.updateAxisZoom(o,r,l)}onWheelScrolling(t){const{enableAxisDragging:e,enableIndependentAxes:i,hoveredAxis:s,scroller:a,seriesRect:n,ctx:{zoomManager:o}}=this;if(!n)return;const r=this.getZoom(),l=this.isMaxZoom(r)&&t.deltaY>0||this.isMinZoom(r)&&t.deltaY<0;(!this.isFirstWheelEvent||!l)&&t.preventDefault(),this.isFirstWheelEvent=!1,this.debouncedWheelReset();const c=e&&s!=null;let h=this.isScalingX(),u=this.isScalingY();c&&(h=s.direction===Pr._ModuleSupport.ChartAxisDirection.X,u=!h);const d=this.getModuleProperties({isScalingX:h,isScalingY:u});if(i===!0){const p=a.updateAxes(t,d,n,o.getAxisZooms());for(const[g,{direction:f,zoom:x}]of Object.entries(p))c&&s.id!==g||this.updateAxisZoom(g,f,x)}else{const p=a.update(t,d,n,this.getZoom());this.updateUnifiedZoom(p)}}onAxisDragStart(t,e){this.hoveredAxis={id:t,direction:e},this.onDragStart(void 0)}onPinchMove(t){const{enabled:e,enableScrolling:i,paddedRect:s,seriesRect:a}=this;if(!e||!i||!s||!a)return;const n=this.getZoom(),o=Pi(n),r=t.deltaDistance*-.01,l=Br(a,t.origin.x,t.origin.y);this.isScalingX()&&(o.x.max+=r*ii(n),o.x=WT(o.x,n.x,l.x)),this.isScalingY()&&(o.y.max+=r*(n.y.max-n.y.min),o.y=WT(o.y,n.y,l.y)),this.updateZoom(tn(o)),t.preventDefault()}onLayoutComplete(t){this.domProxy.update(this.ctx);const{enabled:e}=this;if(!e)return;const{series:{rect:i,paddedRect:s,shouldFlipXY:a}}=t;this.seriesRect=i,this.paddedRect=s,this.shouldFlipXY=a,this._didAutoZoomOnMount=!0}onUpdateComplete(t){const{minRect:e,minVisibleRect:i}=t,{enabled:s,minVisibleItemsX:a,minVisibleItemsY:n,paddedRect:o,shouldFlipXY:r}=this;if(!s||!o||!e||!i)return;const l=this.getZoom(),c=r?n:a,h=r?a:n,u=i.width*c/o.width,d=i.height*h/o.height,p=Q4(u*ii(l)),g=Q4(d*$s(l));this.isScalingX()&&(this.minRatioX=Math.min(1,p)),this.isScalingY()&&(this.minRatioY=Math.min(1,g)),this.minRatioX||(this.minRatioX=this.minRatioY||0),this.minRatioY||(this.minRatioY=this.minRatioX||0)}onZoomChange(t){t.callerId!=="zoom"&&this.panner.stopInteractions();const e=this.getZoom();this.contextMenu.toggleActions(e)}onZoomPanStart(t){t.callerId==="zoom"&&this.panner.stopInteractions()}onPanUpdate(t){const{panner:e,seriesRect:i,ctx:{tooltipManager:s,zoomManager:a}}=this;if(!i)return;const n=e.translateZooms(i,a.getAxisZooms(),t.deltaX,t.deltaY);for(const[o,{direction:r,zoom:l}]of Object.entries(n))this.updateAxisZoom(o,r,l);s.updateTooltip(qT)}isPanningKeyPressed(t){switch(this.panKey){case"alt":return t.altKey;case"ctrl":return t.ctrlKey;case"shift":return t.shiftKey;case"meta":return t.metaKey}}isScalingX(){return this.axes==="xy"?!0:this.shouldFlipXY?this.axes==="y":this.axes==="x"}isScalingY(){return this.axes==="xy"?!0:this.shouldFlipXY?this.axes==="x":this.axes==="y"}getAnchorPointX(){return this.shouldFlipXY?this.anchorPointY:this.anchorPointX}getAnchorPointY(){return this.shouldFlipXY?this.anchorPointX:this.anchorPointY}isMinZoom(t){return UT(t,this.minRatioX,this.minRatioY)}isMaxZoom(t){const e=Zt.max-Zt.min;return ii(t)===e&&$s(t)===e}updateZoom(t){this.enableIndependentAxes?this.updatePrimaryAxisZooms(t):this.updateUnifiedZoom(t)}resetZoom(){this.ctx.zoomManager.resetZoom("zoom")}updatePrimaryAxisZoom(t,e){this.ctx.zoomManager.updatePrimaryAxisZoom("zoom",e,t[e])}updatePrimaryAxisZooms(t){this.updatePrimaryAxisZoom(t,QT.X),this.updatePrimaryAxisZoom(t,QT.Y)}updateUnifiedZoom(t){const{minRatioX:e,minRatioY:i,ctx:{zoomManager:s}}=this,a=this.getZoom(),n=ii(t);n<=ii(a)&&n<e&&(t.x=H4(t.x,a.x,e));const r=$s(t);r<=$s(a)&&r<i&&(t.y=H4(t.y,a.y,i)),s.updateZoom("zoom",t)}updateAxisZoom(t,e,i){const{enableIndependentAxes:s,minRatioX:a,minRatioY:n,ctx:{zoomManager:o}}=this;if(!i)return;const r=this.getZoom();if(s!==!0){r[e]=i,this.updateUnifiedZoom(r);return}const l=i.max-i.min,c=r[e].max-r[e].min,h=e===QT.X?a:n;l<=c&&l<h||o.updateAxisZoom("zoom",t,i)}getZoom(){return Pi(this.ctx.zoomManager.getZoom())}getResetZoom(){return Pi(this.ctx.zoomManager.getRestoredZoom())}getModuleProperties(t){return{anchorPointX:t?.anchorPointX??this.getAnchorPointX(),anchorPointY:t?.anchorPointY??this.getAnchorPointY(),enabled:t?.enabled??this.enabled,independentAxes:t?.independentAxes??this.enableIndependentAxes===!0,isScalingX:t?.isScalingX??this.isScalingX(),isScalingY:t?.isScalingY??this.isScalingY(),keepAspectRatio:t?.keepAspectRatio??this.keepAspectRatio,minRatioX:t?.minRatioX??this.minRatioX,minRatioY:t?.minRatioY??this.minRatioY,scrollingStep:t?.scrollingStep??this.scrollingStep}}};y([nv({newValue(t){this.onEnabledChange(t)}}),si(zr)],gi.prototype,"enabled",2),y([si(zr)],gi.prototype,"enableAxisDragging",2),y([si($4)],gi.prototype,"buttons",2),y([si(zr)],gi.prototype,"enableDoubleClickToReset",2),y([nv({changeValue(t){this.ctx.zoomManager.setIndependentAxes(!!t)}}),si(zr,{optional:!0})],gi.prototype,"enableIndependentAxes",2),y([si(zr)],gi.prototype,"enablePanning",2),y([si(zr)],gi.prototype,"enableScrolling",2),y([si(zr)],gi.prototype,"enableSelecting",2),y([si(av(["alt","ctrl","meta","shift"],"a pan key"))],gi.prototype,"panKey",2),y([si(av(["x","y","xy"],"an axis"))],gi.prototype,"axes",2),y([si($T)],gi.prototype,"scrollingStep",2),y([si(zr)],gi.prototype,"keepAspectRatio",2),y([si(Z4.restrict({min:1}))],gi.prototype,"minVisibleItemsX",2),y([si(Z4.restrict({min:1}))],gi.prototype,"minVisibleItemsY",2),y([si(q4)],gi.prototype,"anchorPointX",2),y([si(q4)],gi.prototype,"anchorPointY",2),y([si($4)],gi.prototype,"autoScaling",2),y([rnt("panner.deceleration"),si(nnt($T,av(["off","short","long"],"a deceleration")))],gi.prototype,"deceleration",2);var cnt={enabled:!0,buttons:[{icon:"zoom-out",tooltip:"toolbarZoomZoomOut",value:"zoom-out",section:"scale"},{icon:"zoom-in",tooltip:"toolbarZoomZoomIn",value:"zoom-in",section:"scale"},{icon:"pan-left",tooltip:"toolbarZoomPanLeft",value:"pan-left",section:"pan"},{icon:"pan-right",tooltip:"toolbarZoomPanRight",value:"pan-right",section:"pan"},{icon:"reset",tooltip:"toolbarZoomReset",value:"reset",section:"reset"}]},hnt={type:"root",optionsKey:"zoom",packageType:"enterprise",chartTypes:["cartesian","topology"],moduleFactory:t=>new gi(t),themeTemplate:{zoom:{anchorPointX:"end",anchorPointY:"middle",axes:"x",buttons:cnt,enabled:!1,enableAxisDragging:!0,enableDoubleClickToReset:!0,enablePanning:!0,enableScrolling:!0,enableSelecting:!1,deceleration:"short",minVisibleItemsX:2,minVisibleItemsY:2,panKey:"alt",scrollingStep:.1,autoScaling:{enabled:!1,padding:.25}}}},unt=(P(),_(w)),dnt=(P(),_(w)),{BOOLEAN:tj,OBJECT:pnt,POSITION:gnt,POSITIVE_NUMBER:tN,BaseProperties:fnt,AxisTicks:ynt,ZIndexMap:mnt,ProxyProperty:eN,Validate:Bh,LayoutElement:xnt,createId:bnt,Group:Snt,Rect:vnt,Triangle:Mnt,TranslatableGroup:Dnt,LinearGradient:Ant}=dnt._ModuleSupport,iN=class extends fnt{constructor(){super(...arguments),this.thickness=16,this.preferredLength=100}};y([Bh(tN)],iN.prototype,"thickness",2),y([Bh(tN)],iN.prototype,"preferredLength",2);var ov=class{constructor(t){this.axisTicks=t}};y([eN("axisTicks.label")],ov.prototype,"label",2),y([eN("axisTicks.interval")],ov.prototype,"interval",2),y([eN("axisTicks.padding")],ov.prototype,"padding",2);var zh=class{constructor(t){this.ctx=t,this.id=bnt(this),this.legendGroup=new Dnt({name:"legend",zIndex:mnt.LEGEND}),this.gradientRect=new vnt,this.arrow=new Mnt,this.ticksGroup=new Snt({name:"legend-axis-group"}),this.destroyFns=[],this.enabled=!1,this.position="bottom",this.reverseOrder=!1,this.gradient=new iN,this.spacing=20,this.data=[],this.highlightManager=t.highlightManager,this.axisTicks=new ynt,this.axisTicks.attachAxis(this.ticksGroup),this.scale=new ov(this.axisTicks),this.legendGroup.append([this.gradientRect,this.arrow,this.ticksGroup]),this.destroyFns.push(t.highlightManager.addListener("highlight-change",()=>this.onChartHoverChange()),t.layoutManager.registerElement(xnt.Legend,e=>this.onStartLayout(e)),()=>this.legendGroup.remove())}isVertical(){return this.position==="right"||this.position==="left"}destroy(){this.destroyFns.forEach(t=>t())}attachLegend(t){t.appendChild(this.legendGroup)}onStartLayout(t){const[e]=this.data;if(!this.enabled||!e?.enabled){this.legendGroup.visible=!1;return}const{colorRange:i}=this.normalizeColorArrays(e);this.updateGradientRect(t.layoutBox,i);const s=this.updateAxis(e),{left:a,top:n}=this.getMeasurements(t.layoutBox,s);this.updateArrow(),this.legendGroup.visible=!0,this.legendGroup.translationX=a,this.legendGroup.translationY=n}normalizeColorArrays(t){let e=t.colorDomain.slice();const i=t.colorRange.slice();if(e.length===i.length)return{colorDomain:e,colorRange:i};e.length>i.length&&i.splice(e.length);const[s,a]=e,n=i.length;return e=i.map((o,r)=>r===0?s:r===n-1?a:s+(a-s)*r/(n-1)),{colorDomain:e,colorRange:i}}updateGradientRect(t,e){const{gradientRect:i}=this,{preferredLength:s,thickness:a}=this.gradient;let n;this.isVertical()?(n=0,i.width=a,i.height=Math.min(t.height,s)):(n=90,i.width=Math.min(t.width,s),i.height=a);const o=new Ant("oklch",e.map((r,l)=>({offset:l/(e.length-1),color:r})),n);i.fill=o}updateAxis(t){const{axisTicks:e}=this,i=this.isVertical(),s=this.reverseOrder!==i;return e.position=this.position,e.translationX=i?this.gradient.thickness:0,e.translationY=i?0:this.gradient.thickness,e.scale.domain=s?t.colorDomain.slice().reverse():t.colorDomain,e.scale.range=i?[0,this.gradientRect.height]:[0,this.gradientRect.width],e.calculateLayout()}updateArrow(){const t=this.highlightManager.getActiveHighlight(),{arrow:e}=this;if(t?.colorValue==null){e.visible=!1;return}const{scale:i,label:s}=this.axisTicks,a=s.fontSize??0,n=i.convert(t.colorValue);let{x:o,y:r}=this.gradientRect,l=Math.PI;this.isVertical()?(o-=a/2,r+=n,l/=2):(o+=n,r-=a/2),e.visible=!0,e.fill=s.color,e.rotation=l,e.size=a,e.translationX=o,e.translationY=r}getMeasurements(t,e){let{x:i,y:s}=t,{width:a,height:n}=this.gradientRect;switch(this.isVertical()?a+=e.width+5:n+=e.height+5,this.position){case"left":s+=t.height/2-n/2,t.shrink(a+this.spacing,"left");break;case"right":i+=t.width-a,s+=t.height/2-n/2,t.shrink(a+this.spacing,"right");break;case"top":i+=t.width/2-a/2,t.shrink(n+this.spacing,"top");break;case"bottom":i+=t.width/2-a/2,s+=t.height-n,t.shrink(n+this.spacing,"bottom")}return{top:s,left:i}}onChartHoverChange(){this.enabled&&this.updateArrow()}};zh.className="GradientLegend",y([Bh(tj)],zh.prototype,"enabled",2),y([Bh(gnt)],zh.prototype,"position",2),y([Bh(tj)],zh.prototype,"reverseOrder",2),y([Bh(pnt)],zh.prototype,"gradient",2),y([Bh(tN)],zh.prototype,"spacing",2);var{ThemeSymbols:{DEFAULT_FONT_FAMILY:Int,DEFAULT_LABEL_COLOUR:knt},ThemeConstants:{FONT_SIZE:Lnt}}=unt._ModuleSupport,Tnt={type:"legend",optionsKey:"gradientLegend",packageType:"enterprise",chartTypes:["cartesian","polar","hierarchy","topology","flow-proportion","standalone","gauge"],identifier:"gradient",moduleFactory:t=>new zh(t),themeTemplate:{enabled:!1,position:"bottom",spacing:20,scale:{padding:13,label:{color:knt,fontSize:Lnt.SMALL,fontFamily:Int},interval:{minSpacing:1}},gradient:{preferredLength:100,thickness:16},reverseOrder:!1},removable:"standalone-only"},Nnt=class{constructor(){this.ieCompatibility=!1}init(){this.ieCompatibility=this.md5("hello")!="5d41402abc4b2a76b9719d911017c592"}md5cycle(t,e){let i=t[0],s=t[1],a=t[2],n=t[3];i=this.ff(i,s,a,n,e[0],7,-680876936),n=this.ff(n,i,s,a,e[1],12,-389564586),a=this.ff(a,n,i,s,e[2],17,606105819),s=this.ff(s,a,n,i,e[3],22,-1044525330),i=this.ff(i,s,a,n,e[4],7,-176418897),n=this.ff(n,i,s,a,e[5],12,1200080426),a=this.ff(a,n,i,s,e[6],17,-1473231341),s=this.ff(s,a,n,i,e[7],22,-45705983),i=this.ff(i,s,a,n,e[8],7,1770035416),n=this.ff(n,i,s,a,e[9],12,-1958414417),a=this.ff(a,n,i,s,e[10],17,-42063),s=this.ff(s,a,n,i,e[11],22,-1990404162),i=this.ff(i,s,a,n,e[12],7,1804603682),n=this.ff(n,i,s,a,e[13],12,-40341101),a=this.ff(a,n,i,s,e[14],17,-1502002290),s=this.ff(s,a,n,i,e[15],22,1236535329),i=this.gg(i,s,a,n,e[1],5,-165796510),n=this.gg(n,i,s,a,e[6],9,-1069501632),a=this.gg(a,n,i,s,e[11],14,643717713),s=this.gg(s,a,n,i,e[0],20,-373897302),i=this.gg(i,s,a,n,e[5],5,-701558691),n=this.gg(n,i,s,a,e[10],9,38016083),a=this.gg(a,n,i,s,e[15],14,-660478335),s=this.gg(s,a,n,i,e[4],20,-405537848),i=this.gg(i,s,a,n,e[9],5,568446438),n=this.gg(n,i,s,a,e[14],9,-1019803690),a=this.gg(a,n,i,s,e[3],14,-187363961),s=this.gg(s,a,n,i,e[8],20,1163531501),i=this.gg(i,s,a,n,e[13],5,-1444681467),n=this.gg(n,i,s,a,e[2],9,-51403784),a=this.gg(a,n,i,s,e[7],14,1735328473),s=this.gg(s,a,n,i,e[12],20,-1926607734),i=this.hh(i,s,a,n,e[5],4,-378558),n=this.hh(n,i,s,a,e[8],11,-2022574463),a=this.hh(a,n,i,s,e[11],16,1839030562),s=this.hh(s,a,n,i,e[14],23,-35309556),i=this.hh(i,s,a,n,e[1],4,-1530992060),n=this.hh(n,i,s,a,e[4],11,1272893353),a=this.hh(a,n,i,s,e[7],16,-155497632),s=this.hh(s,a,n,i,e[10],23,-1094730640),i=this.hh(i,s,a,n,e[13],4,681279174),n=this.hh(n,i,s,a,e[0],11,-358537222),a=this.hh(a,n,i,s,e[3],16,-722521979),s=this.hh(s,a,n,i,e[6],23,76029189),i=this.hh(i,s,a,n,e[9],4,-640364487),n=this.hh(n,i,s,a,e[12],11,-421815835),a=this.hh(a,n,i,s,e[15],16,530742520),s=this.hh(s,a,n,i,e[2],23,-995338651),i=this.ii(i,s,a,n,e[0],6,-198630844),n=this.ii(n,i,s,a,e[7],10,1126891415),a=this.ii(a,n,i,s,e[14],15,-1416354905),s=this.ii(s,a,n,i,e[5],21,-57434055),i=this.ii(i,s,a,n,e[12],6,1700485571),n=this.ii(n,i,s,a,e[3],10,-1894986606),a=this.ii(a,n,i,s,e[10],15,-1051523),s=this.ii(s,a,n,i,e[1],21,-2054922799),i=this.ii(i,s,a,n,e[8],6,1873313359),n=this.ii(n,i,s,a,e[15],10,-30611744),a=this.ii(a,n,i,s,e[6],15,-1560198380),s=this.ii(s,a,n,i,e[13],21,1309151649),i=this.ii(i,s,a,n,e[4],6,-145523070),n=this.ii(n,i,s,a,e[11],10,-1120210379),a=this.ii(a,n,i,s,e[2],15,718787259),s=this.ii(s,a,n,i,e[9],21,-343485551),t[0]=this.add32(i,t[0]),t[1]=this.add32(s,t[1]),t[2]=this.add32(a,t[2]),t[3]=this.add32(n,t[3])}cmn(t,e,i,s,a,n){return e=this.add32(this.add32(e,t),this.add32(s,n)),this.add32(e<<a|e>>>32-a,i)}ff(t,e,i,s,a,n,o){return this.cmn(e&i|~e&s,t,e,a,n,o)}gg(t,e,i,s,a,n,o){return this.cmn(e&s|i&~s,t,e,a,n,o)}hh(t,e,i,s,a,n,o){return this.cmn(e^i^s,t,e,a,n,o)}ii(t,e,i,s,a,n,o){return this.cmn(i^(e|~s),t,e,a,n,o)}md51(t){const e=t.length,i=[1732584193,-271733879,-1732584194,271733878];let s;for(s=64;s<=t.length;s+=64)this.md5cycle(i,this.md5blk(t.substring(s-64,s)));t=t.substring(s-64);const a=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(s=0;s<t.length;s++)a[s>>2]|=t.charCodeAt(s)<<(s%4<<3);if(a[s>>2]|=128<<(s%4<<3),s>55)for(this.md5cycle(i,a),s=0;s<16;s++)a[s]=0;return a[14]=e*8,this.md5cycle(i,a),i}md5blk(t){const e=[];for(let i=0;i<64;i+=4)e[i>>2]=t.charCodeAt(i)+(t.charCodeAt(i+1)<<8)+(t.charCodeAt(i+2)<<16)+(t.charCodeAt(i+3)<<24);return e}rhex(t){const e="0123456789abcdef".split("");let i="",s=0;for(;s<4;s++)i+=e[t>>s*8+4&15]+e[t>>s*8&15];return i}hex(t){for(let e=0;e<t.length;e++)t[e]=this.rhex(t[e]);return t.join("")}md5(t){return this.hex(this.md51(t))}add32(t,e){return this.ieCompatibility?this.add32Compat(t,e):this.add32Std(t,e)}add32Std(t,e){return t+e&4294967295}add32Compat(t,e){const i=(t&65535)+(e&65535);return(t>>16)+(e>>16)+(i>>16)<<16|i&65535}};function sN(t){return t==null||t.length===0}var rv={"01":"GRID","02":"CHARTS","0102":"BOTH"},ej="https://ag-grid.com/charts/licensing/",aN=class li{constructor(e){this.watermarkMessage=void 0,this.totalMessageLength=124,this.document=e,this.md5=new Nnt,this.md5.init()}validateLicense(){const e=this.getLicenseDetails(li.licenseKey,li.gridContext),i=`AG ${e.currentLicenseType==="BOTH"?"Grid and ":""}Charts Enterprise`;let s="";if(e.suppliedLicenseType==="BOTH"?s="AG Grid and AG Charts Enterprise":e.suppliedLicenseType==="GRID"?s="AG Grid Enterprise":e.suppliedLicenseType!==void 0&&(s="AG Charts Enterprise"),e.missing)(!this.isWebsiteUrl()||this.isForceWatermark())&&this.outputMissingLicenseKey(i);else if(e.expired){const a=li.getChartsReleaseDate(),n=li.formatDate(a);this.outputExpiredKey(e.expiry,n,s)}else e.valid?e.isTrial&&e.trialExpired&&this.outputExpiredTrialKey(e.expiry,i,s):this.outputInvalidLicenseKey(!!e.incorrectLicenseType,i,s)}static extractExpiry(e){const i=e.substring(e.lastIndexOf("_")+1,e.length);return new Date(parseInt(li.decode(i),10))}static extractLicenseComponents(e){let i=e.replace(/[\u200B-\u200D\uFEFF]/g,"");if(i=i.replace(/\r?\n|\r/g,""),e.length<=32)return{md5:null,license:e,version:null,isTrial:null};const s=i.length-32,a=i.substring(s),n=i.substring(0,s),[o,r,l]=li.extractBracketedInformation(i);return{md5:a,license:n,version:o,isTrial:r,type:l}}getLicenseDetails(e,i=!1){const s="CHARTS";if(sN(e))return{licenseKey:e,valid:!1,missing:!0,currentLicenseType:s};const a=li.getChartsReleaseDate(),{md5:n,license:o,version:r,isTrial:l,type:c}=li.extractLicenseComponents(e);let h=n===this.md5.md5(o)&&e.indexOf("For_Trialing_ag-Grid_Only")===-1,u,d,p=null,g=!1,f;function x(){u=p<new Date,d=void 0}if(h&&(p=li.extractExpiry(o),h=!isNaN(p.getTime()),h))switch(d=a>p,r){case"legacy":case"2":{h=!1;break}case"3":sN(c)?h=!1:(f=c,c!==rv["02"]&&c!==rv["0102"]?(h=!1,g=!0):l&&x())}return h?{licenseKey:e,valid:h,expiry:li.formatDate(p),expired:d,version:r,isTrial:l,trialExpired:u,invalidLicenseTypeForCombo:i?f!=="BOTH":void 0,incorrectLicenseType:g,currentLicenseType:s,suppliedLicenseType:f}:{licenseKey:e,valid:h,incorrectLicenseType:g,currentLicenseType:s,suppliedLicenseType:f}}isDisplayWatermark(){return this.isForceWatermark()||!this.isLocalhost()&&!this.isWebsiteUrl()&&!sN(this.watermarkMessage)}getWatermarkMessage(){return this.watermarkMessage??""}getHostname(){if(!this.document)return"localhost";const e=this.document.defaultView??window;if(!e)return"localhost";const i=e.location,{hostname:s=""}=i;return s}isForceWatermark(){if(!this.document)return!1;const e=this.document?.defaultView??typeof window<"u"?window:void 0;if(!e)return!1;const{pathname:i}=e.location;return i?i.indexOf("forceWatermark")!==-1:!1}isWebsiteUrl(){const e=this.getHostname();return/^((?:[\w-]+\.)?ag-grid\.com)$/.exec(e)!==null}isLocalhost(){const e=this.getHostname();return/^(?:127\.0\.0\.1|localhost)$/.exec(e)!==null}static formatDate(e){const i=["January","February","March","April","May","June","July","August","September","October","November","December"],s=e.getDate(),a=e.getMonth(),n=e.getFullYear();return s+" "+i[a]+" "+n}static getChartsReleaseDate(){return new Date(parseInt(li.decode(li.RELEASE_INFORMATION),10))}static decode(e){const i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let s="",a,n,o,r,l,c,h,u=0;const d=e.replace(/[^A-Za-z0-9+/=]/g,"");for(;u<d.length;)r=i.indexOf(d.charAt(u++)),l=i.indexOf(d.charAt(u++)),c=i.indexOf(d.charAt(u++)),h=i.indexOf(d.charAt(u++)),a=r<<2|l>>4,n=(l&15)<<4|c>>2,o=(c&3)<<6|h,s=s+String.fromCharCode(a),c!=64&&(s=s+String.fromCharCode(n)),h!=64&&(s=s+String.fromCharCode(o));return s=li.utf8_decode(s),s}static utf8_decode(e){e=e.replace(/rn/g,"n");let i="";for(let s=0;s<e.length;s++){const a=e.charCodeAt(s);a<128?i+=String.fromCharCode(a):a>127&&a<2048?(i+=String.fromCharCode(a>>6|192),i+=String.fromCharCode(a&63|128)):(i+=String.fromCharCode(a>>12|224),i+=String.fromCharCode(a>>6&63|128),i+=String.fromCharCode(a&63|128))}return i}static setGridContext(e=!1){li.gridContext=e}static setLicenseKey(e){li.licenseKey=e}static extractBracketedInformation(e){if(!e.includes("["))return["legacy",!1,void 0];const i=e.match(/\[(.*?)\]/g).map(r=>r.replace("[","").replace("]",""));if(!i||i.length===0)return["legacy",!1,void 0];const s=i.filter(r=>r==="TRIAL").length===1,a=i.filter(r=>r.startsWith("v"))[0],n=a?a.replace("v",""):"legacy",o=rv[i.filter(r=>rv[r])[0]];return[n,s,o]}centerPadAndOutput(e){const i=this.totalMessageLength-e.length;console.error(e.padStart(i/2+e.length,"*").padEnd(this.totalMessageLength,"*"))}padAndOutput(e,i="*",s=""){console.error(e.padEnd(this.totalMessageLength-s.length,i)+s)}outputInvalidLicenseKey(e,i,s){li.gridContext||(e?(this.centerPadAndOutput(""),this.centerPadAndOutput(` ${i} License `),this.centerPadAndOutput(" Incompatible License Key "),this.padAndOutput(`* Your license key is for ${s} only and does not cover you for ${i}.`," ","*"),this.padAndOutput(`* To troubleshoot your license key visit ${ej}.`," ","*"),this.centerPadAndOutput(""),this.centerPadAndOutput("")):(this.centerPadAndOutput(""),this.centerPadAndOutput(` ${i} License `),this.centerPadAndOutput(" Invalid License Key "),this.padAndOutput("* Your license key is not valid."," ","*"),this.padAndOutput(`* To troubleshoot your license key visit ${ej}.`," ","*"),this.centerPadAndOutput(""),this.centerPadAndOutput(""))),this.watermarkMessage="Invalid License"}outputExpiredTrialKey(e,i,s){li.gridContext||(this.centerPadAndOutput(""),this.centerPadAndOutput(` ${i} License `),this.centerPadAndOutput(" Trial Period Expired. "),this.padAndOutput(`* Your trial only license for ${s} expired on ${e}.`," ","*"),this.padAndOutput("* Please email info@ag-grid.com to purchase a license."," ","*"),this.centerPadAndOutput(""),this.centerPadAndOutput("")),this.watermarkMessage="Trial Period Expired"}outputMissingLicenseKey(e){li.gridContext||(this.centerPadAndOutput(""),this.centerPadAndOutput(` ${e} License `),this.centerPadAndOutput(" License Key Not Found "),this.padAndOutput(`* All ${e} features are unlocked for trial.`," ","*"),this.padAndOutput("* If you want to hide the watermark please email info@ag-grid.com for a trial license key."," ","*"),this.centerPadAndOutput(""),this.centerPadAndOutput("")),this.watermarkMessage="For Trial Use Only"}outputExpiredKey(e,i,s){li.gridContext||(this.centerPadAndOutput(""),this.centerPadAndOutput(` ${s} License `),this.centerPadAndOutput(" Incompatible Software Version "),this.padAndOutput(`* Your license key works with versions of ${s} released before ${e}.`," ","*"),this.padAndOutput(`* The version you are trying to use was released on ${i}.`," ","*"),this.padAndOutput("* Please contact info@ag-grid.com to renew your license key."," ","*"),this.centerPadAndOutput(""),this.centerPadAndOutput("")),this.watermarkMessage="License Expired"}};aN.RELEASE_INFORMATION="MTczMzkwNTUyNzEyOQ==",aN.gridContext=!1;var Pd=aN,Cnt=(P(),_(w)),{createElement:Ont}=Cnt._ModuleSupport;function Ent(t,e){const i=t.addChild("canvas-overlay","watermark"),s=Ont("span");s.innerText=e,i.addEventListener("animationend",()=>{t.removeChild("canvas-overlay","watermark"),t.removeStyles("watermark")}),i.classList.add("ag-watermark"),i.appendChild(s)}var wnt=(P(),_(w)),ij=(P(),_(w)),Rnt=(P(),_(w)),{findMinMax:_nt,findMinValue:Pnt,findMaxValue:Bnt}=Rnt._ModuleSupport,us=0,Qs=1,qs=2,Js=3,en=4;function Qf(t,e=1){let i=Math.ceil(Math.log2(t.length/e))-1;return i=Math.min(Math.max(i,0),16),2**i|0}function qf(t){return _nt(t.map(e=>Number(e)))}function lv(t,e,i){return(t.valueOf()-e)/(i-e)}function cv(t,e){return Math.min(Math.floor(t*e),e-1)*en|0}function Jf(t,e,i,s,a,n){const o=new Int32Array(n*en).fill(-1),r=new Float64Array(n*en).fill(NaN);for(let l=0;l<t.length;l+=1){const c=t[l],h=e[l],u=i[l];if(c==null||h==null||u==null)continue;const d=lv(c,s,a),p=h.valueOf(),g=u.valueOf(),f=cv(d,n),x=o[f+us]===-1;(x||d<r[f+us])&&(o[f+us]=l,r[f+us]=d),(x||d>r[f+Qs])&&(o[f+Qs]=l,r[f+Qs]=d),(x||g<r[f+qs])&&(o[f+qs]=l,r[f+qs]=g),(x||p>r[f+Js])&&(o[f+Js]=l,r[f+Js]=p)}return{indexData:o,valueData:r}}function ty(t,e,i,{inPlace:s=!1}={}){const a=i/2|0,n=s?t:new Int32Array(a*en),o=s?e:new Float64Array(a*en);for(let r=0;r<a;r+=1){const l=r*en|0,c=l*2|0,h=c+en|0,u=t[h+us]===-1,d=u||e[c+us]<e[h+us]?c:h;n[l+us]=t[d+us],o[l+us]=e[d+us];const p=u||e[c+Qs]>e[h+Qs]?c:h;n[l+Qs]=t[p+Qs],o[l+Qs]=e[p+Qs];const g=u||e[c+qs]<e[h+qs]?c:h;n[l+qs]=t[g+qs],o[l+qs]=e[g+qs];const f=u||e[c+Js]>e[h+Js]?c:h;n[l+Js]=t[f+Js],o[l+Js]=e[f+Js]}return{maxRange:a,indexData:n,valueData:o}}function znt(t,e,i,s){let a=Pnt(0,t-1,o=>{const r=s(o);return!Number.isFinite(r)||r>e?o:void 0});a=Math.max((a??0)-1,0);let n=Bnt(0,t-1,o=>{const r=s(o);return!Number.isFinite(r)||r<i?o:void 0});return n=Math.min((n??t)+2,t),[a,n]}var dbt=(P(),_(w)),sj={xMin:us,xMax:Qs,yMin:qs,yMax:Js,span:en},Fnt=1e3,jnt=5;function Gnt(t,e,i){if(t.length<Fnt)return;const[s,a]=qf(i);let n=Qf(t,jnt),{indexData:o,valueData:r}=Jf(t,e,e,s,a,n);const l=[{maxRange:n,indexData:o,indexes:sj}];for(;n>64;)({indexData:o,valueData:r,maxRange:n}=ty(o,r,n)),l.push({maxRange:n,indexData:o,indexes:sj});return l.reverse(),l}var{ChartAxisDirection:Vnt,ContinuousScale:Unt,OrdinalTimeScale:Wnt}=ij._ModuleSupport,Hnt=class extends ij._ModuleSupport.BarSeries{visibleRange(t,e,i,s){return znt(t,e,i,s)}aggregateData(t,e){if(e.rawData.length===0||e.type!=="ungrouped")return;const i=this.axes[Vnt.X];if(i==null||!(Unt.is(i.scale)||Wnt.is(i.scale)))return;const s=t.resolveKeysById(this,"xValue",e),a=t.resolveColumnById(this,"yValue-raw",e),{index:n}=t.resolveProcessedDataDefById(this,"xValue"),o=e.domain.keys[n];return Gnt(s,a,o)}},{BarSeriesModule:Ynt}=wnt._ModuleSupport,Knt={...Ynt,type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["cartesian"],identifier:"bar",moduleFactory:t=>new Hnt(t)},Xnt=(P(),_(w)),nN=(P(),_(w));function Znt(t){return{from:t?{scalingX:1,scalingY:0}:{scalingX:0,scalingY:1},to:{scalingX:1,scalingY:1}}}function $nt(t){return(e,i)=>t?{scalingCenterY:i.scaledValues.medianValue}:{scalingCenterX:i.scaledValues.medianValue}}var aj=(P(),_(w)),{ScalableGroup:Qnt,Rect:Bd,Line:ey,BBox:qnt,Selection:nj,Logger:Jnt}=aj._ModuleSupport,tot=class extends Qnt{constructor(){super(),this.append([new Bd({tag:0}),new Bd({tag:0}),new Bd({tag:2}),new Bd({tag:1}),new ey({tag:3}),new ey({tag:3}),new ey({tag:4}),new ey({tag:4})])}updateDatumStyles(t,e,i,s){const{bandwidth:a,scaledValues:{xValue:n,medianValue:o}}=t;let{minValue:r,q1Value:l,q3Value:c,maxValue:h}=t.scaledValues;(i&&!s||!i&&s)&&([h,c,l,r]=[r,l,c,h]);const u=(B,U,H,K)=>i?{y:B,x:U,width:K,height:H}:{x:B,y:U,width:H,height:K},d=(B,U,H)=>i?{y1:B,y2:U,x:H}:{x1:B,x2:U,y:H},p=(B,U,H)=>i?{x1:U,x2:H,y:B}:{x:B,y1:U,y2:H},g=(B,U,H,K)=>({x:B,y:U,width:H,height:K}=u(B,U,H,K),new qnt(B,U,H,K)),{fill:f,fillOpacity:x,stroke:m,strokeWidth:b,strokeOpacity:v,lineDash:S,lineDashOffset:D,cornerRadius:k,cap:L,whisker:T}=e,N=nj.select(this,Bd),C=N.selectByTag(0),[O]=N.selectByTag(2),[R]=N.selectByTag(1),E=N.selectByTag(3),z=N.selectByTag(4);T.strokeWidth>a&&(T.strokeWidth=a);const F=u(l,n,c-l,a);O.setProperties(F),C[0].setProperties(F),C[0].setProperties({cornerRadius:k,clipBBox:g(l,n,Math.round(o-l+b/2),a)}),C[1].setProperties(F),C[1].setProperties({cornerRadius:k,clipBBox:g(Math.round(o-b/2),n,Math.floor(c-o+b/2),a)});const G=Math.max(Math.round(o-b/2),l+b),j=Math.min(Math.round(o+b/2),c-b);R.setProperties(F),R.setProperties({visible:G<j,cornerRadius:k,clipBBox:g(G,n+b,j-G,Math.max(0,a-b*2))});const V=Math.floor(n+a*(1-L.lengthRatio)/2),W=Math.ceil(n+a*(1+L.lengthRatio)/2);z[0].setProperties(p(r,V,W)),z[1].setProperties(p(h,V,W)),E[0].setProperties(d(Math.round(r+T.strokeWidth/2),l,Math.floor(n+a/2))),E[1].setProperties(d(c,Math.round(h-T.strokeWidth/2),Math.floor(n+a/2)));for(const B of C)B.setProperties({fill:f,fillOpacity:x,strokeWidth:b*2,strokeOpacity:0});R.setProperties({fill:m,fillOpacity:v,strokeWidth:0});for(const B of[...E,...z])B.setProperties(T);O.setProperties({stroke:m,strokeWidth:b,strokeOpacity:v,lineDash:S,lineDashOffset:D,cornerRadius:k,fillOpacity:0})}distanceSquared(t,e){const i=nj.selectByClass(this,Bd,ey);return aj._ModuleSupport.nearestSquared(t,e,i).distanceSquared}get midPoint(){const t=this.datum;return t.midPoint===void 0?(Jnt.error("BoxPlotGroup.datum.midPoint is undefined"),{x:NaN,y:NaN}):t.midPoint}},eot=(P(),_(w)),{BaseProperties:oj,AbstractBarSeriesProperties:iot,SeriesTooltip:sot,Validate:Ut,COLOR_STRING:hv,FUNCTION:aot,LINE_DASH:rj,OBJECT:oN,POSITIVE_NUMBER:iy,RATIO:uv,STRING:Ia,mergeDefaults:not}=eot._ModuleSupport,lj=class extends oj{constructor(){super(...arguments),this.lengthRatio=.5}};y([Ut(uv)],lj.prototype,"lengthRatio",2);var zd=class extends oj{};y([Ut(hv,{optional:!0})],zd.prototype,"stroke",2),y([Ut(iy)],zd.prototype,"strokeWidth",2),y([Ut(uv)],zd.prototype,"strokeOpacity",2),y([Ut(rj,{optional:!0})],zd.prototype,"lineDash",2),y([Ut(iy)],zd.prototype,"lineDashOffset",2);var oe=class extends iot{constructor(){super(...arguments),this.fill="#c16068",this.fillOpacity=1,this.stroke="#333",this.strokeWidth=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.cornerRadius=0,this.cap=new lj,this.whisker=new zd,this.tooltip=new sot,this.backgroundFill="white"}toJson(){const{stroke:t,strokeWidth:e,strokeOpacity:i,lineDash:s,lineDashOffset:a}=this,n=super.toJson();return n.whisker=not(n.whisker,{stroke:t,strokeWidth:e,strokeOpacity:i,lineDash:s,lineDashOffset:a}),n}};y([Ut(Ia)],oe.prototype,"xKey",2),y([Ut(Ia)],oe.prototype,"minKey",2),y([Ut(Ia)],oe.prototype,"q1Key",2),y([Ut(Ia)],oe.prototype,"medianKey",2),y([Ut(Ia)],oe.prototype,"q3Key",2),y([Ut(Ia)],oe.prototype,"maxKey",2),y([Ut(Ia,{optional:!0})],oe.prototype,"xName",2),y([Ut(Ia,{optional:!0})],oe.prototype,"yName",2),y([Ut(Ia,{optional:!0})],oe.prototype,"minName",2),y([Ut(Ia,{optional:!0})],oe.prototype,"q1Name",2),y([Ut(Ia,{optional:!0})],oe.prototype,"medianName",2),y([Ut(Ia,{optional:!0})],oe.prototype,"q3Name",2),y([Ut(Ia,{optional:!0})],oe.prototype,"maxName",2),y([Ut(hv,{optional:!0})],oe.prototype,"fill",2),y([Ut(uv)],oe.prototype,"fillOpacity",2),y([Ut(hv)],oe.prototype,"stroke",2),y([Ut(iy)],oe.prototype,"strokeWidth",2),y([Ut(uv)],oe.prototype,"strokeOpacity",2),y([Ut(rj)],oe.prototype,"lineDash",2),y([Ut(iy)],oe.prototype,"lineDashOffset",2),y([Ut(iy)],oe.prototype,"cornerRadius",2),y([Ut(aot,{optional:!0})],oe.prototype,"itemStyler",2),y([Ut(oN)],oe.prototype,"cap",2),y([Ut(oN)],oe.prototype,"whisker",2),y([Ut(oN)],oe.prototype,"tooltip",2),y([Ut(hv)],oe.prototype,"backgroundFill",2);var{extractDecoratedProperties:cj,fixNumericExtent:oot,keyProperty:rot,mergeDefaults:rN,SeriesNodePickMode:hj,SMALLEST_KEY_INTERVAL:lot,valueProperty:sy,diff:cot,animationValidation:hot,computeBarFocusBounds:uot,createDatumId:uj,Color:lN,ContinuousScale:dot,motion:dj}=nN._ModuleSupport,pot=class extends nN._ModuleSupport.SeriesNodeEvent{constructor(t,e,i,s){super(t,e,i,s),this.xKey=s.properties.xKey,this.minKey=s.properties.minKey,this.q1Key=s.properties.q1Key,this.medianKey=s.properties.medianKey,this.q3Key=s.properties.q3Key,this.maxKey=s.properties.maxKey}},cN=class extends nN._ModuleSupport.AbstractBarSeries{constructor(t){super({moduleCtx:t,pickModes:[hj.NEAREST_NODE,hj.EXACT_SHAPE_MATCH],directionKeys:{x:["xKey"],y:["medianKey","q1Key","q3Key","minKey","maxKey"]},directionNames:{x:["xName"],y:["medianName","q1Name","q3Name","minName","maxName"]},pathsPerSeries:[],hasHighlightedLabels:!0}),this.properties=new oe,this.NodeEvent=pot}async processData(t){if(!this.properties.isValid()||!this.visible)return;const{xKey:e,minKey:i,q1Key:s,medianKey:a,q3Key:n,maxKey:o}=this.properties,r=!this.ctx.animationManager.isSkipped(),l=this.getCategoryAxis()?.scale,c=this.getValueAxis()?.scale,{isContinuousX:h,xScaleType:u,yScaleType:d}=this.getScaleInformation({xScale:l,yScale:c}),p=[];r&&this.processedData&&p.push(cot(this.id,this.processedData)),r&&p.push(hot());const{processedData:g}=await this.requestDataModel(t,this.data,{props:[rot(e,u,{id:"xValue"}),sy(i,d,{id:"minValue"}),sy(s,d,{id:"q1Value"}),sy(a,d,{id:"medianValue"}),sy(n,d,{id:"q3Value"}),sy(o,d,{id:"maxValue"}),...h?[lot]:[],...p]});this.smallestDataInterval=g.reduced?.smallestKeyInterval,this.animationState.transition("updateData")}getSeriesDomain(t){const{processedData:e,dataModel:i}=this;if(!(e&&i))return[];if(t===this.getBarDirection()){const o=i.getDomain(this,"minValue","value",e),r=i.getDomain(this,"maxValue","value",e);return oot([Math.min(...o),Math.max(...r)])}const{index:s,def:a}=i.resolveProcessedDataDefById(this,"xValue"),n=e.domain.keys[s];return a.type==="key"&&a.valueType==="category"?n:this.padBandExtent(n)}getSeriesRange(t,e){return[NaN,NaN]}createNodeData(){const{visible:t,dataModel:e,processedData:i}=this,s=this.getCategoryAxis(),a=this.getValueAxis();if(!(e&&i!=null&&i.rawData.length!==0&&s&&a))return;const{xKey:n,fill:o,fillOpacity:r,stroke:l,strokeWidth:c,strokeOpacity:h,lineDash:u,lineDashOffset:d,cap:p,whisker:g}=this.properties,f=[],x=e.resolveKeysById(this,"xValue",i),m=e.resolveColumnById(this,"minValue",i),b=e.resolveColumnById(this,"q1Value",i),v=e.resolveColumnById(this,"medianValue",i),S=e.resolveColumnById(this,"q3Value",i),D=e.resolveColumnById(this,"maxValue",i),{barWidth:k,groupIndex:L}=this.updateGroupScale(s),T=dot.is(s.scale)?k*-.5:0,{groupScale:N}=this,C=this.isVertical(),O={itemId:n,nodeData:f,labelData:[],scales:this.calculateScaling(),visible:this.visible};return t&&i.rawData.forEach((R,E)=>{const z=x[E];if(z==null)return;const F=m[E],G=b[E],j=v[E],V=S[E],W=D[E];if([F,G,j,V,W].some(Z=>typeof Z!="number")||F>G||G>j||j>V||V>W)return;const B={xValue:Math.round(s.scale.convert(z)),minValue:Math.round(a.scale.convert(F)),q1Value:Math.round(a.scale.convert(G)),medianValue:Math.round(a.scale.convert(j)),q3Value:Math.round(a.scale.convert(V)),maxValue:Math.round(a.scale.convert(W))};B.xValue+=Math.round(N.convert(String(L)))+T;const U=Math.round(k),H=Math.abs(B.q3Value-B.q1Value),K=B.xValue+U/2,X=Math.min(B.q3Value,B.q1Value)+H/2,Q={x:C?K:X,y:C?X:K};let $;C?$={x:Q.x-U/2,y:B.minValue,width:U,height:B.maxValue-B.minValue}:$={x:B.minValue,y:Q.y-U/2,width:B.maxValue-B.minValue,height:U},f.push({series:this,itemId:z,datum:R,datumIndex:E,xKey:n,bandwidth:U,scaledValues:B,cap:p,whisker:g,fill:o,fillOpacity:r,stroke:l,strokeWidth:c,strokeOpacity:h,lineDash:u,lineDashOffset:d,midPoint:Q,focusRect:$})}),O}legendItemSymbol(){const{fill:t,fillOpacity:e,stroke:i,strokeWidth:s,strokeOpacity:a}=this.properties;return{marker:{fill:t,fillOpacity:e,stroke:i,strokeOpacity:a,strokeWidth:s}}}getLegendData(t){const{id:e,ctx:{legendManager:i},visible:s}=this,{xKey:a,yName:n,showInLegend:o,legendItemName:r}=this.properties;return!a||t!=="category"?[]:[{legendType:"category",id:e,itemId:e,seriesId:e,enabled:s&&i.getItemEnabled({seriesId:e,itemId:e}),label:{text:r??n??e},symbol:this.legendItemSymbol(),legendItemName:r,hideInLegend:!o}]}getTooltipContent(t){const{id:e,dataModel:i,processedData:s,properties:a}=this,{xKey:n,xName:o,yName:r,medianKey:l,medianName:c,q1Key:h,q1Name:u,q3Key:d,q3Name:p,minKey:g,minName:f,maxKey:x,maxName:m,legendItemName:b,tooltip:v}=a,S=this.getCategoryAxis(),D=this.getValueAxis();if(!i||!s||s.rawData.length===0||!S||!D)return;const{datumIndex:k}=t,L=s.rawData[k],T=i.resolveKeysById(this,"xValue",s)[k],N=i.resolveColumnById(this,"minValue",s)[k],C=i.resolveColumnById(this,"q1Value",s)[k],O=i.resolveColumnById(this,"medianValue",s)[k],R=i.resolveColumnById(this,"q3Value",s)[k],E=i.resolveColumnById(this,"maxValue",s)[k];if(T==null)return;const z=this.getItemBaseStyle(!1);return Object.assign(z,this.getItemStyleOverrides(String(k),L,z,!1)),v.formatTooltip({heading:S.formatDatum(T),title:b??r,symbol:this.legendItemSymbol(),data:[{label:f,fallbackLabel:g,value:D.formatDatum(N)},{label:u,fallbackLabel:h,value:D.formatDatum(C)},{label:c,fallbackLabel:l,value:D.formatDatum(O)},{label:p,fallbackLabel:d,value:D.formatDatum(R)},{label:m,fallbackLabel:x,value:D.formatDatum(E)}]},{seriesId:e,datum:L,title:r,xKey:n,xName:o,yName:r,medianKey:l,medianName:c,q1Key:h,q1Name:u,q3Key:d,q3Name:p,minKey:g,minName:f,maxKey:x,maxName:m,...z})}animateEmptyUpdateReady({datumSelection:t}){const e=this.isVertical(),{from:i,to:s}=Znt(e);dj.resetMotion([t],$nt(e)),dj.staticFromToMotion(this.id,"datums",this.ctx.animationManager,[t],i,s,{phase:"initial"})}isLabelEnabled(){return!1}updateDatumSelection(t){const e=t.nodeData??[];return t.datumSelection.update(e)}getItemBaseStyle(t){const{properties:e}=this,{cornerRadius:i,cap:s,whisker:a}=e,n=t?e.highlightStyle.item:void 0;return{fill:n?.fill??e.fill,fillOpacity:n?.fillOpacity??e.fillOpacity,stroke:n?.stroke??e.stroke,strokeWidth:n?.strokeWidth??e.strokeWidth,strokeOpacity:n?.strokeOpacity??e.strokeOpacity,lineDash:n?.lineDash??e.lineDash??[],lineDashOffset:n?.lineDashOffset??e.lineDashOffset,cornerRadius:i,cap:s,whisker:a}}getItemStyleOverrides(t,e,i,s){const{id:a,properties:n}=this,{xKey:o,minKey:r,q1Key:l,medianKey:c,q3Key:h,maxKey:u,itemStyler:d}=n;if(d!=null)return this.cachedDatumCallback(uj(t,s?"highlight":"node"),()=>d({seriesId:a,datum:e,xKey:o,minKey:r,q1Key:l,medianKey:c,q3Key:h,maxKey:u,highlighted:s,...i}))}updateDatumNodes({datumSelection:t,isHighlight:e}){const i=this.isVertical(),s=this.getValueAxis()?.isReversed();t.each((a,n)=>{let o=this.getFormattedStyles(n,e?"highlight":"node");e&&(o=rN(this.properties.highlightStyle.item,o));const{stroke:r,strokeWidth:l,strokeOpacity:c,lineDash:h,lineDashOffset:u}=o;o.whisker=rN(o.whisker,{stroke:r,strokeWidth:l,strokeOpacity:c,lineDash:h,lineDashOffset:u}),a.updateDatumStyles(n,o,i,s)})}updateLabelNodes(){}updateLabelSelection(t){const{labelData:e,labelSelection:i}=t;return i.update(e)}nodeFactory(){return new tot}getFormattedStyles(t,e){const{id:i,properties:s}=this,{xKey:a,minKey:n,q1Key:o,medianKey:r,q3Key:l,maxKey:c,itemStyler:h,backgroundFill:u,cornerRadius:d}=s,{datum:p,stroke:g,strokeWidth:f,strokeOpacity:x,lineDash:m,lineDashOffset:b,cap:v,whisker:S}=t;let D,k;if(!0)D=t.fill,k=s.fillOpacity;else{try{D=lN.mix(lN.fromString(u),lN.fromString(t.fill),s.fillOpacity).toString()}catch{D=t.fill}k=void 0}const T={fill:D,fillOpacity:k,stroke:g,strokeWidth:f,strokeOpacity:x,lineDash:m,lineDashOffset:b,cornerRadius:d,cap:cj(v),whisker:cj(S)};if(h){const N=this.cachedDatumCallback(uj(p.index,e),()=>h({datum:p,seriesId:i,highlighted:e==="highlight",...T,xKey:a,minKey:n,q1Key:o,medianKey:r,q3Key:l,maxKey:c}));if(N)return rN(N,T)}return T}computeFocusBounds({datumIndex:t}){return uot(this.contextNodeData?.nodeData[t].focusRect)}};cN.className="BoxPlotSeries",cN.type="box-plot";var got=(P(),_(w)),{CARTESIAN_AXIS_TYPE:pj}=got._ModuleSupport.ThemeConstants,fot={series:{direction:"vertical",strokeWidth:2},axes:{[pj.NUMBER]:{crosshair:{snap:!1}},[pj.CATEGORY]:{groupPaddingInner:.2,crosshair:{enabled:!1,snap:!1}}}},{Color:hN,swapAxisCondition:yot,ThemeSymbols:{DEFAULT_BACKGROUND_COLOUR:mot},ThemeConstants:{CARTESIAN_AXIS_TYPE:gj,CARTESIAN_POSITION:fj}}=Xnt._ModuleSupport,xot={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["cartesian"],identifier:"box-plot",moduleFactory:t=>new cN(t),tooltipDefaults:{range:"exact"},defaultAxes:yot([{type:gj.NUMBER,position:fj.LEFT},{type:gj.CATEGORY,position:fj.BOTTOM}],t=>t?.direction==="horizontal"),themeTemplate:fot,groupable:!0,paletteFactory:({takeColors:t,themeTemplateParameters:e})=>{const i=e.get(mot),s=(Array.isArray(i)?i[0]:i)??"white",{fills:[a],strokes:[n]}=t(1);let o;try{o=hN.mix(hN.fromString(s),hN.fromString(a),.3).toString()}catch{o=a}return{fill:o,stroke:n,backgroundFill:s}}},bot=(P(),_(w)),uN=(P(),_(w)),dN=(P(),_(w)),Sot=1e3,yj=us,vot=Js,Mot=qs,mj=Qs;function Dot(t,e,i,s){if(t.length<Sot)return;const[a,n]=qf(s);let o=Qf(t),{indexData:r,valueData:l}=Jf(t,e,i,a,n,o);const c=[{maxRange:o,indexData:r}];for(;o>64;)({indexData:r,valueData:l,maxRange:o}=ty(r,l,o)),c.push({maxRange:o,indexData:r});return c.reverse(),c}var{fixNumericExtent:Aot,keyProperty:Iot,createDatumId:xj,SeriesNodePickMode:bj,ChartAxisDirection:Sj,SMALLEST_KEY_INTERVAL:kot,valueProperty:dv,diff:Lot,animationValidation:Tot,computeBarFocusBounds:Not,visibleRangeIndices:pN,Logger:vj,ContinuousScale:Cot,OrdinalTimeScale:Oot}=dN._ModuleSupport,Eot=class extends dN._ModuleSupport.SeriesNodeEvent{constructor(t,e,i,s){super(t,e,i,s),this.xKey=s.properties.xKey,this.openKey=s.properties.openKey,this.closeKey=s.properties.closeKey,this.highKey=s.properties.highKey,this.lowKey=s.properties.lowKey}},Mj=class extends dN._ModuleSupport.AbstractBarSeries{constructor(t){super({moduleCtx:t,pickModes:[bj.AXIS_ALIGNED,bj.EXACT_SHAPE_MATCH],directionKeys:{x:["xKey"],y:["lowKey","highKey","openKey","closeKey"]},directionNames:{x:["xName"],y:["lowName","highName","openName","closeName"]},pathsPerSeries:[]}),this.NodeEvent=Eot,this.dataAggregationFilters=void 0}async processData(t){if(!this.properties.isValid()||!this.visible)return;const{xKey:e,openKey:i,closeKey:s,highKey:a,lowKey:n}=this.properties,o=!this.ctx.animationManager.isSkipped(),r=this.getCategoryAxis()?.scale,l=this.getValueAxis()?.scale,{isContinuousX:c,xScaleType:h,yScaleType:u}=this.getScaleInformation({xScale:r,yScale:l}),d=[];o&&(this.processedData&&d.push(Lot(this.id,this.processedData)),d.push(Tot())),i&&d.push(dv(i,u,{id:"openValue",invalidValue:void 0,missingValue:void 0}));const{dataModel:p,processedData:g}=await this.requestDataModel(t,this.data,{props:[Iot(e,h,{id:"xValue"}),dv(s,u,{id:"closeValue"}),dv(a,u,{id:"highValue"}),dv(n,u,{id:"lowValue"}),...c?[kot]:[],...d]});this.smallestDataInterval=g.reduced?.smallestKeyInterval,this.dataAggregationFilters=this.aggregateData(p,g),this.animationState.transition("updateData")}aggregateData(t,e){if(e.rawData.length===0)return;const i=this.axes[Sj.X];if(i==null||!(Cot.is(i.scale)||Oot.is(i.scale)))return;const s=t.resolveKeysById(this,"xValue",e),a=t.resolveColumnById(this,"highValue",e),n=t.resolveColumnById(this,"lowValue",e),{index:o}=t.resolveProcessedDataDefById(this,"xValue"),r=e.domain.keys[o];return Dot(s,a,n,r)}getSeriesDomain(t){const{processedData:e,dataModel:i}=this;if(!(e&&i))return[];const{openKey:s}=this.properties;if(t===this.getBarDirection()){const r=i.getDomain(this,"lowValue","value",e),l=i.getDomain(this,"highValue","value",e),c=s?i.getDomain(this,"openValue","value",e):[],h=i.getDomain(this,"closeValue","value",e);return Aot([Math.min(...r,...l,...c,...h),Math.max(...l,...r,...c,...h)])}const{index:a,def:n}=i.resolveProcessedDataDefById(this,"xValue"),o=e.domain.keys[a];return n.type==="key"&&n.valueType==="category"?o:this.padBandExtent(o)}getSeriesRange(t,e){const{dataModel:i,processedData:s}=this;if(!i||!s)return[NaN,NaN];const n=this.axes[Sj.X].scale,o=i.resolveKeysById(this,"xValue",s),r=n.bandwidth??0,[l,c]=pN(o.length,e,h=>{const u=n.convert(o[h]);return[u,u+r]});return i.getDomainBetweenRange(this,["highValue","lowValue"],[l,c],s)}createNodeData(){const{visible:t,dataModel:e,processedData:i}=this,s=this.getCategoryAxis(),a=this.getValueAxis();if(!(e&&i!=null&&i.rawData.length!==0&&s&&a))return;const n=[],{xKey:o,highKey:r,lowKey:l}=this.properties,{rawData:c}=i,h=e.resolveKeysById(this,"xValue",i),u=e.resolveColumnById(this,"openValue",i),d=e.resolveColumnById(this,"closeValue",i),p=e.resolveColumnById(this,"highValue",i),g=e.resolveColumnById(this,"lowValue",i),{groupScale:f}=this,{barWidth:x,groupIndex:m}=this.updateGroupScale(s),b=f.convert(String(m)),v=x>=1?x:f.rawBandwidth,S={itemId:o,nodeData:n,labelData:[],scales:this.calculateScaling(),visible:this.visible};if(!t)return S;const D=(E,z,F,G,j,V,W,B)=>{const U=c[E],H=s.scale.convert(z)+b+W/2,K=a.scale.convert(F),X=a.scale.convert(G),Q=a.scale.convert(j),$=a.scale.convert(V),Z=G>F,Y=Z?"up":"down",tt=Math.min(Q,$),q=Math.max(Q,$)-tt,it={x:H,y:tt+q/2};n.push({series:this,itemId:Y,datum:U,datumIndex:E,xKey:o,xValue:z,openValue:F,closeValue:G,highValue:j,lowValue:V,midPoint:it,aggregatedValue:G,isRising:Z,centerX:H,width:W,y:tt,height:q,yOpen:K,yClose:X,crisp:B})},{dataAggregationFilters:k}=this,L=s.scale,[T,N]=L.range,C=N-T,O=E=>L.convert(h[E])+b,R=k?.find(E=>E.maxRange>C);if(R==null){let[E,z]=pN(c.length,s.range,F=>{const G=O(F);return[G,G+v]});i.rawData.length<1e3&&(E=0,z=i.rawData.length);for(let F=E;F<z;F+=1){const G=h[F];if(G==null)continue;const j=u[F],V=d[F],W=p[F],B=g[F],U=B!=null&&B<=j&&B<=V,H=W!=null&&W>=j&&W>=V;if(!U){vj.warnOnce(`invalid low value for key [${l}] in data element, low value cannot be higher than datum open or close values`);continue}if(!H){vj.warnOnce(`invalid high value for key [${r}] in data element, high value cannot be lower than datum open or close values.`);continue}D(F,G,j,V,W,B,v,!0)}}else{const{maxRange:E,indexData:z}=R,[F,G]=pN(E,s.range,j=>{const V=j*en,W=z[V+yj],B=z[V+mj];if(W!==-1)return[O(W),O(B)+v]});for(let j=F;j<G;j+=1){const V=j*en,W=z[V+yj],B=z[V+mj],U=z[V+vot],H=z[V+Mot];if(W===-1)continue;const K=(W+B)/2|0,X=h[K];if(X==null)continue;const Q=u[W],$=d[B],Z=p[U],Y=g[H],tt=Math.abs(O(B)-O(W))+v;D(K,X,Q,$,Z,Y,tt,!1)}}return S}isVertical(){return!0}isLabelEnabled(){return!1}updateDatumSelection(t){const e=t.nodeData??[];return t.datumSelection.update(e)}updateLabelNodes(t){}updateLabelSelection(t){const{labelData:e,labelSelection:i}=t;return i.update(e)}getItemBaseStyle(t,e){const{properties:i}=this,s=i.item[t],a=e?i.highlightStyle.item:void 0;return{fill:a?.fill??s.fill,fillOpacity:a?.fillOpacity??s.fillOpacity,stroke:a?.stroke??s.stroke,strokeWidth:a?.strokeWidth??s.strokeWidth,strokeOpacity:a?.strokeOpacity??s.strokeOpacity,lineDash:a?.lineDash??s.lineDash,lineDashOffset:a?.lineDashOffset??s.lineDashOffset}}getItemStyleOverrides(t,e,i,s,a){const{id:n,properties:o}=this,{itemStyler:r}=o;if(r==null)return;const{xKey:l,openKey:c,closeKey:h,highKey:u,lowKey:d}=o;return this.cachedDatumCallback(xj(t,a?"highlight":"node"),()=>r({seriesId:n,datum:e,itemId:i,xKey:l,openKey:c,closeKey:h,highKey:u,lowKey:d,highlighted:a,...s}))}getTooltipContent(t){const{id:e,dataModel:i,processedData:s,properties:a}=this,{xKey:n,xName:o,yName:r,openKey:l,openName:c,highKey:h,highName:u,lowKey:d,lowName:p,closeKey:g,closeName:f,legendItemName:x,tooltip:m}=a,b=this.getCategoryAxis(),v=this.getValueAxis();if(!i||!s||s.rawData.length===0||!b||!v)return;const{datumIndex:S}=t,D=s.rawData[S],k=i.resolveKeysById(this,"xValue",s)[S],L=i.resolveColumnById(this,"openValue",s)[S],T=i.resolveColumnById(this,"highValue",s)[S],N=i.resolveColumnById(this,"lowValue",s)[S],C=i.resolveColumnById(this,"closeValue",s)[S];if(k==null)return;const O=C>=L?"up":"down",R=this.properties.item[O],E=this.getItemBaseStyle(O,!1);return Object.assign(E,this.getItemStyleOverrides(String(S),D,O,E,!1)),m.formatTooltip({heading:b.formatDatum(k),title:x,symbol:{marker:{fill:R.fill??R.stroke,fillOpacity:R.fillOpacity??R.strokeOpacity??1,stroke:R.stroke,strokeWidth:R.strokeWidth??1,strokeOpacity:R.strokeOpacity??1}},data:[{label:c,fallbackLabel:l,value:v.formatDatum(L)},{label:u,fallbackLabel:h,value:v.formatDatum(T)},{label:p,fallbackLabel:d,value:v.formatDatum(N)},{label:f,fallbackLabel:g,value:v.formatDatum(C)}]},{seriesId:e,datum:D,title:r,itemId:O,xKey:n,xName:o,yName:r,openKey:l,openName:c,highKey:h,highName:u,lowKey:d,lowName:p,closeKey:g,closeName:f,...E})}getDatumId(t){return xj(t.xValue)}computeFocusBounds(t){const e=this.getNodeData()?.at(t.datumIndex);if(e==null)return;const{centerX:i,y:s,width:a,height:n}=e,o={x:i-a/2,y:s,width:a,height:n};return Not(o)}},wot=(P(),_(w)),Rot=(P(),_(w)),{Path:_ot,ScenePathChangeDetection:oc,BBox:Pot}=Rot._ModuleSupport,_o=class extends _ot{constructor(){super(...arguments),this.centerX=0,this.y=0,this.width=0,this.height=0,this.yOpen=0,this.yClose=0,this.crisp=!1,this.strokeAlignment=0}computeBBox(){const{centerX:t,y:e,width:i,height:s}=this;return new Pot(t-i/2,e,i,s)}isPointInPath(t,e){return this.getBBox().containsPoint(t,e)}distanceSquared(t,e){return this.getBBox().distanceSquared(t,e)}get midPoint(){return{x:this.centerX,y:this.y+this.height/2}}alignedCoordinates(){const{y:t,width:e,height:i,crisp:s,strokeAlignment:a}=this;let{centerX:n,yOpen:o,yClose:r}=this,l=n-e/2,c=n+e/2,h=t,u=t+i;if(s&&e>1){n=this.align(n),o=this.align(o),r=this.align(r);const p=this.align(e/2);l=n-p,c=n+p,h=this.align(t),u=h+this.align(h,i)}const d=(h+u)/2;return n+=a,l+=a,c+=a,h-=a,u+=a,o+=o<d?a:-a,r+=r<d?a:-a,{centerX:n,x0:l,x1:c,y0:h,y1:u,yOpen:o,yClose:r}}executeStroke(t,e){const{width:i,strokeWidth:s}=this;i<s&&(t.lineWidth=i),super.executeStroke(t,e)}};y([oc()],_o.prototype,"centerX",2),y([oc()],_o.prototype,"y",2),y([oc()],_o.prototype,"width",2),y([oc()],_o.prototype,"height",2),y([oc()],_o.prototype,"yOpen",2),y([oc()],_o.prototype,"yClose",2),y([oc()],_o.prototype,"crisp",2),y([oc()],_o.prototype,"strokeAlignment",2);var Bot=class extends _o{updatePath(){const{path:t}=this,{centerX:e,x0:i,x1:s,y0:a,y1:n,yOpen:o,yClose:r}=this.alignedCoordinates();t.clear(),t.moveTo(e,a),t.lineTo(e,n),Math.abs(s-i)>1&&(t.moveTo(i,o),t.lineTo(e,o),t.moveTo(e,r),t.lineTo(s,r))}},{ScenePathChangeDetection:ay,ExtendedPath2D:zot}=wot._ModuleSupport,Fd=class extends _o{constructor(){super(...arguments),this.wickPath=new zot,this.wickStroke=void 0,this.wickStrokeWidth=void 0,this.wickStrokeOpacity=void 0}updatePath(){const{path:t,stroke:e,strokeWidth:i,strokeOpacity:s,lineDash:a,lineDashOffset:n,wickStroke:o,wickStrokeWidth:r,wickStrokeOpacity:l,wickLineDash:c,wickLineDashOffset:h,strokeAlignment:u}=this,{centerX:d,x0:p,x1:g,y0:f,y1:x,yOpen:m,yClose:b}=this.alignedCoordinates();this.path.clear(),this.wickPath.clear();const S=o!=null&&o!==e||r!=null&&r!==i||l!=null&&l!==s||c!=null&&c!==a||h!=null&&h!==n?this.wickPath:t;if(Math.abs(g-p)<=3){S.moveTo(d,f),S.lineTo(d,x);return}const D=Math.min(m,b),k=Math.max(m,b);S.moveTo(d,f),S.lineTo(d,D+i/2),S.moveTo(d,x),S.lineTo(d,k-i/2);const L=u+i/2,T=k-D-2*L;if(T>0)t.rect(p+L,D+L,g-p-2*L,T);else{const N=(D+k)/2;t.moveTo(p,N),t.lineTo(g,N)}}drawPath(t){super.drawPath(t);const{wickPath:e}=this;if(e.isEmpty())return;const{stroke:i,strokeWidth:s,strokeOpacity:a,lineDash:n,lineDashOffset:o,wickStroke:r=i,wickStrokeWidth:l=s,wickStrokeOpacity:c=a,wickLineDash:h=n,wickLineDashOffset:u=o}=this;l!==0&&(t.globalAlpha*=c,typeof r=="string"&&(t.strokeStyle=r),t.lineWidth=l,h!=null&&t.setLineDash(h),t.lineDashOffset=u,t.stroke(e.getPath2D()))}};y([ay()],Fd.prototype,"wickStroke",2),y([ay()],Fd.prototype,"wickStrokeWidth",2),y([ay()],Fd.prototype,"wickStrokeOpacity",2),y([ay()],Fd.prototype,"wickLineDash",2),y([ay()],Fd.prototype,"wickLineDashOffset",2);var Fot=(P(),_(w)),jot=(P(),_(w)),{BaseProperties:Dj,Validate:Fe,AbstractBarSeriesProperties:Got,SeriesTooltip:Vot,STRING:wn,COLOR_STRING:Uot,FUNCTION:Wot,LINE_DASH:Hot,OBJECT:pv,POSITIVE_NUMBER:Aj,RATIO:Yot}=jot._ModuleSupport,Fh=class extends Dj{constructor(){super(...arguments),this.stroke="#333",this.strokeWidth=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0}};y([Fe(Uot)],Fh.prototype,"stroke",2),y([Fe(Aj)],Fh.prototype,"strokeWidth",2),y([Fe(Yot)],Fh.prototype,"strokeOpacity",2),y([Fe(Hot)],Fh.prototype,"lineDash",2),y([Fe(Aj)],Fh.prototype,"lineDashOffset",2);var gN=class extends Dj{constructor(){super(...arguments),this.up=new Fh,this.down=new Fh}};y([Fe(pv)],gN.prototype,"up",2),y([Fe(pv)],gN.prototype,"down",2);var ka=class extends Got{};y([Fe(wn)],ka.prototype,"xKey",2),y([Fe(wn)],ka.prototype,"openKey",2),y([Fe(wn)],ka.prototype,"closeKey",2),y([Fe(wn)],ka.prototype,"highKey",2),y([Fe(wn)],ka.prototype,"lowKey",2),y([Fe(wn,{optional:!0})],ka.prototype,"xName",2),y([Fe(wn,{optional:!0})],ka.prototype,"yName",2),y([Fe(wn,{optional:!0})],ka.prototype,"openName",2),y([Fe(wn,{optional:!0})],ka.prototype,"closeName",2),y([Fe(wn,{optional:!0})],ka.prototype,"highName",2),y([Fe(wn,{optional:!0})],ka.prototype,"lowName",2);var gv=class extends ka{constructor(){super(...arguments),this.tooltip=new Vot,this.item=new gN}};y([Fe(pv)],gv.prototype,"tooltip",2),y([Fe(pv)],gv.prototype,"item",2),y([Fe(Wot,{optional:!0})],gv.prototype,"itemStyler",2);var{BaseProperties:fN,SeriesTooltip:Kot,Validate:fi,COLOR_STRING:yN,FUNCTION:Xot,LINE_DASH:Ij,OBJECT:ny,POSITIVE_NUMBER:oy,RATIO:mN}=Fot._ModuleSupport,jd=class extends fN{};y([fi(yN,{optional:!0})],jd.prototype,"stroke",2),y([fi(oy)],jd.prototype,"strokeWidth",2),y([fi(mN)],jd.prototype,"strokeOpacity",2),y([fi(Ij,{optional:!0})],jd.prototype,"lineDash",2),y([fi(oy)],jd.prototype,"lineDashOffset",2);var Rn=class extends fN{constructor(){super(...arguments),this.fill="#c16068",this.fillOpacity=1,this.stroke="#333",this.strokeWidth=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.cornerRadius=0,this.wick=new jd}};y([fi(yN,{optional:!0})],Rn.prototype,"fill",2),y([fi(mN)],Rn.prototype,"fillOpacity",2),y([fi(yN)],Rn.prototype,"stroke",2),y([fi(oy)],Rn.prototype,"strokeWidth",2),y([fi(mN)],Rn.prototype,"strokeOpacity",2),y([fi(Ij)],Rn.prototype,"lineDash",2),y([fi(oy)],Rn.prototype,"lineDashOffset",2),y([fi(oy)],Rn.prototype,"cornerRadius",2),y([fi(ny)],Rn.prototype,"wick",2);var xN=class extends fN{constructor(){super(...arguments),this.up=new Rn,this.down=new Rn}};y([fi(ny)],xN.prototype,"up",2),y([fi(ny)],xN.prototype,"down",2);var fv=class extends ka{constructor(){super(...arguments),this.item=new xN,this.tooltip=new Kot}};y([fi(ny)],fv.prototype,"item",2),y([fi(ny)],fv.prototype,"tooltip",2),y([fi(Xot,{optional:!0})],fv.prototype,"itemStyler",2);var{createDatumId:Zot}=uN._ModuleSupport,bN=class extends Mj{constructor(){super(...arguments),this.properties=new fv}nodeFactory(){return new Fd}updateDatumNodes({datumSelection:t,isHighlight:e}){const{id:i,properties:s}=this,{xKey:a,highKey:n,lowKey:o,openKey:r,closeKey:l,item:c,itemStyler:h}=s,{up:u,down:d}=c,{fill:p,fillOpacity:g,stroke:f,strokeWidth:x,strokeOpacity:m,lineDash:b,lineDashOffset:v}=u,{stroke:S,strokeWidth:D,strokeOpacity:k,lineDash:L,lineDashOffset:T}=u.wick,{fill:N,fillOpacity:C,stroke:O,strokeWidth:R,strokeOpacity:E,lineDash:z,lineDashOffset:F}=d,{stroke:G,strokeWidth:j,strokeOpacity:V,lineDash:W,lineDashOffset:B}=d.wick,U=e?s.highlightStyle.item:void 0;t.each((H,K)=>{const{isRising:X,centerX:Q,width:$,y:Z,height:Y,yOpen:tt,yClose:q,crisp:it}=K;let at;if(h!=null){const{fill:ot,fillOpacity:et,stroke:gt,strokeWidth:dt,strokeOpacity:ft,lineDash:Dt,lineDashOffset:qt}=X?u:d;at=this.cachedDatumCallback(Zot(this.getDatumId(K),e?"highlight":"node"),()=>h({seriesId:i,itemId:K.itemId,xKey:a,highKey:n,lowKey:o,openKey:r,closeKey:l,datum:K.datum,fill:ot,fillOpacity:et,strokeOpacity:ft,stroke:gt,strokeWidth:dt,lineDash:Dt,lineDashOffset:qt,highlighted:e}))}H.centerX=Q,H.width=$,H.y=Z,H.height=Y,H.yOpen=tt,H.yClose=q,H.crisp=it,H.fill=U?.fill??at?.fill??(X?p:N),H.fillOpacity=U?.fillOpacity??at?.fillOpacity??(X?g:C),H.stroke=U?.stroke??at?.stroke??(X?f:O),H.strokeWidth=U?.strokeWidth??at?.strokeWidth??(X?x:R),H.strokeOpacity=U?.strokeOpacity??at?.strokeOpacity??(X?m:E),H.lineDash=U?.lineDash??at?.lineDash??(X?b:z),H.lineDashOffset=U?.lineDashOffset??at?.lineDashOffset??(X?v:F);const rt=at?.wick;H.wickStroke=U?.stroke??rt?.stroke??(X?S:G),H.wickStrokeWidth=U?.strokeWidth??rt?.strokeWidth??(X?D:j),H.wickStrokeOpacity=U?.strokeOpacity??rt?.strokeOpacity??(X?k:V),H.wickLineDash=U?.lineDash??rt?.lineDash??(X?L:W),H.wickLineDashOffset=U?.lineDashOffset??rt?.lineDashOffset??(X?T:B),H.strokeAlignment=(at?.strokeWidth??(X?x:R))/2})}legendItemSymbol(){const{up:t,down:e}=this.properties.item,i=new uN._ModuleSupport.LinearGradient("rgb",[{color:t.fill,offset:0},{color:t.fill,offset:.5},{color:e.fill,offset:.5}],90),s=new uN._ModuleSupport.LinearGradient("rgb",[{color:t.stroke,offset:0},{color:t.stroke,offset:.5},{color:e.stroke,offset:.5}],90);return{marker:{fill:i,fillOpacity:t.fillOpacity,stroke:s,strokeWidth:t.strokeWidth??1,strokeOpacity:t.strokeOpacity??1}}}getLegendData(t){const{id:e,data:i,visible:s,ctx:{legendManager:a}}=this,{xKey:n,yName:o,showInLegend:r,legendItemName:l}=this.properties;return!i?.length||!n||t!=="category"?[]:[{legendType:"category",id:e,itemId:e,seriesId:e,enabled:s&&a.getItemEnabled({seriesId:e,itemId:e}),label:{text:l??o??e},symbol:this.legendItemSymbol(),legendItemName:l,hideInLegend:!r}]}};bN.className="CandleStickSeries",bN.type="candlestick";var $ot=(P(),_(w)),{CARTESIAN_AXIS_TYPE:kj}=$ot._ModuleSupport.ThemeConstants,Qot={series:{highlightStyle:{item:{strokeWidth:3}}},animation:{enabled:!1},axes:{[kj.NUMBER]:{crosshair:{snap:!1}},[kj.ORDINAL_TIME]:{groupPaddingInner:0,crosshair:{enabled:!0}}}},{CARTESIAN_AXIS_TYPE:Lj,CARTESIAN_POSITION:Tj}=bot._ModuleSupport.ThemeConstants,qot={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["cartesian"],identifier:"candlestick",moduleFactory:t=>new bN(t),tooltipDefaults:{range:"nearest"},defaultAxes:[{type:Lj.NUMBER,position:Tj.LEFT},{type:Lj.ORDINAL_TIME,position:Tj.BOTTOM}],themeTemplate:Qot,groupable:!1,paletteFactory:({takeColors:t,colorsCount:e,userPalette:i,palette:s})=>{if(i==="user-indexed"){const{fills:a,strokes:n}=t(e);return{item:{up:{fill:"transparent",stroke:n[0]},down:{fill:a[0],stroke:n[0]}}}}return{item:{up:s.up,down:s.down}}}},Jot=(P(),_(w)),trt=(P(),_(w)),ert=(P(),_(w)),irt=(P(),_(w)),{Logger:srt}=irt._ModuleSupport;function Nj(t,e,i){i||(e=art(e));const s=new Map;for(const n of t)s.set(n.id,{datum:n,linksBefore:[],linksAfter:[],maxPathLengthBefore:-1,maxPathLengthAfter:-1});let a=0;return s.forEach((n,o)=>{a=Math.max(a,SN(s,e,n,o,-1,[])+SN(s,e,n,o,1,[])+1)}),{links:e,nodeGraph:s,maxPathLength:a}}function Cj(t,e,i,s){const a=s.indexOf(e);if(a!==-1){for(let o=a;o<s.length;o+=1)i.add(s[o]);return}s.push(e);const{toNode:n}=e;for(const o of t)o.fromNode===n&&Cj(t,o,i,s);s.pop()}function art(t){const e=new Set;for(const i of t)Cj(t,i,e,[]);return e.size!==0&&srt.warnOnce("Some links formed circular references. These will be removed from the output."),e.size===0?t:t.filter(i=>!e.has(i))}function SN(t,e,i,s,a,n){if(n.includes(s))return 1/0;let o=a===-1?i.maxPathLengthBefore:i.maxPathLengthAfter;if(o===-1){o=0;const r=a===-1?i.linksBefore:i.linksAfter;for(const l of e){const{fromNode:c,toNode:h}=l,u=a===-1?h.id:c.id,d=a===-1?c.id:h.id,p=s===u?t.get(d):void 0;p!=null&&(r.push({node:p,link:l}),n?.push(s),o=Math.max(o,SN(t,e,p,d,a,n)+1),n?.pop())}a===-1?i.maxPathLengthBefore=o:i.maxPathLengthAfter=o}return o}var{DataModelSeries:nrt,DataController:ort,Validate:rrt,ARRAY:lrt,keyProperty:crt,valueProperty:yv,Selection:jh,Group:Gd,TransformableText:hrt}=ert._ModuleSupport,vN=class extends nrt{constructor(){super(...arguments),this._chartNodes=void 0,this.nodeCount=0,this.linkCount=0,this.nodesDataModel=void 0,this.nodesProcessedData=void 0,this.processedNodes=new Map,this.linkGroup=this.contentGroup.appendChild(new Gd({name:"linkGroup"})),this.nodeGroup=this.contentGroup.appendChild(new Gd({name:"nodeGroup"})),this.focusLinkGroup=this.highlightNode.appendChild(new Gd({name:"linkGroup"})),this.focusNodeGroup=this.highlightNode.appendChild(new Gd({name:"nodeGroup"})),this.highlightLinkGroup=this.highlightNode.appendChild(new Gd({name:"linkGroup"})),this.highlightNodeGroup=this.highlightNode.appendChild(new Gd({name:"nodeGroup"})),this.labelSelection=jh.select(this.labelGroup,hrt),this.linkSelection=jh.select(this.linkGroup,()=>this.linkFactory()),this.nodeSelection=jh.select(this.nodeGroup,()=>this.nodeFactory()),this.focusLinkSelection=jh.select(this.focusLinkGroup,()=>this.linkFactory()),this.focusNodeSelection=jh.select(this.focusNodeGroup,()=>this.nodeFactory()),this.highlightLinkSelection=jh.select(this.highlightLinkGroup,()=>this.linkFactory()),this.highlightNodeSelection=jh.select(this.highlightNodeGroup,()=>this.nodeFactory())}get nodes(){return this.properties.nodes??this._chartNodes}setChartNodes(t){this._chartNodes=t,this.nodes===t&&(this.nodeDataRefresh=!0)}getNodeData(){return this.contextNodeData?.nodeData}async processData(t){const{data:e,nodes:i}=this;if(e==null||!this.properties.isValid())return;const{fromKey:s,toKey:a,sizeKey:n,idKey:o,labelKey:r}=this.properties,l=new ort("standalone",t.suppressFieldDotNotation),c=i!=null?l.request(this.id,i,{props:[crt(o,void 0,{id:"idValue",includeProperty:!1}),...r!=null?[yv(r,void 0,{id:"labelValue",includeProperty:!1})]:[]],groupByKeys:!0}):null,h=this.requestDataModel(t,e,{props:[yv(s,void 0,{id:"fromValue",includeProperty:!1}),yv(a,void 0,{id:"toValue",includeProperty:!1}),...n!=null?[yv(n,void 0,{id:"sizeValue",includeProperty:!1,missingValue:0})]:[]],groupByKeys:!1});i!=null&&l.execute();const[u,d]=await Promise.all([c,h]);this.nodesDataModel=u?.dataModel,this.nodesProcessedData=u?.processedData;const p=new Map;if(u==null){const g=d.dataModel.resolveColumnById(this,"fromValue",d.processedData),f=d.dataModel.resolveColumnById(this,"toValue",d.processedData),x=m=>{const b=p.size;return{series:this,itemId:void 0,datum:{},datumIndex:b,type:1,index:b,id:m,size:0,label:m}};d.processedData.rawData.forEach((m,b)=>{const v=g[b],S=f[b];v==null||S==null||(p.has(v)||p.set(v,x(v)),p.has(S)||p.set(S,x(S)))})}else{const g=u.dataModel.resolveColumnById(this,"idValue",u.processedData),f=r!=null?u.dataModel.resolveColumnById(this,"labelValue",u.processedData):void 0;u.processedData.rawData.forEach((x,m)=>{const b=g[m],v=f?.[m];p.set(b,{series:this,itemId:void 0,datum:x,datumIndex:m,type:1,index:m,id:b,size:0,label:v})})}this.processedNodes=p}getNodeGraph(t,e,{includeCircularReferences:i}){const{dataModel:s,processedData:a}=this;if(s==null||a==null||a.rawData.length===0){const{links:g,nodeGraph:f,maxPathLength:x}=Nj(new Map().values(),[],i);return this.nodeCount=0,this.linkCount=0,{nodeGraph:f,links:g,maxPathLength:x}}const{sizeKey:n}=this.properties,o=s.resolveColumnById(this,"fromValue",a),r=s.resolveColumnById(this,"toValue",a),l=n!=null?s.resolveColumnById(this,"sizeValue",a):void 0,c=new Map;this.processedNodes.forEach(g=>{const f=t(g);c.set(g.id,f)});const h=[];a.rawData.forEach((g,f)=>{const x=o[f],m=r[f],b=l!=null?l[f]:1,v=c.get(x),S=c.get(m);if(b<=0||v==null||S==null)return;const D=e({series:this,itemId:void 0,datum:g,datumIndex:f,type:0,index:f,fromNode:v,toNode:S,size:b});h.push(D)});const{links:u,nodeGraph:d,maxPathLength:p}=Nj(c.values(),h,i);return this.nodeCount=d.size,this.linkCount=u.length,{nodeGraph:d,links:u,maxPathLength:p}}updateSelections(){this.nodeDataRefresh&&(this.contextNodeData=this.createNodeData(),this.nodeDataRefresh=!1)}update(t){const{seriesRect:e}=t,i={seriesRectWidth:e?.width??0,seriesRectHeight:e?.height??0};(this._nodeDataDependencies==null||this._nodeDataDependencies.seriesRectWidth!==i.seriesRectWidth||this._nodeDataDependencies.seriesRectHeight!==i.seriesRectHeight)&&(this._nodeDataDependencies=i),this.updateSelections();const s=this.contextNodeData?.nodeData??[],a=this.contextNodeData?.labelData??[];let n=this.ctx.highlightManager?.getActiveHighlight();if(n?.series===this&&n.type==null){const{itemId:h}=n;n=h!=null?s.find(u=>u.type===1&&u.id===h):void 0}else n?.series!==this&&(n=void 0);this.contentGroup.visible=this.visible,this.contentGroup.opacity=n!=null?this.properties.highlightStyle.series.dimOpacity??1:1,this.labelSelection=this.updateLabelSelection({labelData:a,labelSelection:this.labelSelection}),this.updateLabelNodes({labelSelection:this.labelSelection}),this.linkSelection=this.updateLinkSelection({nodeData:s.filter(h=>h.type===0),datumSelection:this.linkSelection}),this.updateLinkNodes({datumSelection:this.linkSelection,isHighlight:!1}),this.nodeSelection=this.updateNodeSelection({nodeData:s.filter(h=>h.type===1),datumSelection:this.nodeSelection}),this.updateNodeNodes({datumSelection:this.nodeSelection,isHighlight:!1});let o,r,l,c;n?.type===1?(o=s.filter(h=>h.type===0&&(h.toNode===n||h.fromNode===n)),r=o.map(h=>h.fromNode===n?h.toNode:h.fromNode),r.push(n),l=[],c=[n]):n?.type===0?(o=[n],r=[n.fromNode,n.toNode],l=[n],c=[]):(o=[],r=[],l=[],c=[]),this.focusLinkSelection=this.updateLinkSelection({nodeData:o,datumSelection:this.focusLinkSelection}),this.updateLinkNodes({datumSelection:this.focusLinkSelection,isHighlight:!1}),this.focusNodeSelection=this.updateNodeSelection({nodeData:r,datumSelection:this.focusNodeSelection}),this.updateNodeNodes({datumSelection:this.focusNodeSelection,isHighlight:!1}),this.highlightLinkSelection=this.updateLinkSelection({nodeData:l,datumSelection:this.highlightLinkSelection}),this.updateLinkNodes({datumSelection:this.highlightLinkSelection,isHighlight:!0}),this.highlightNodeSelection=this.updateNodeSelection({nodeData:c,datumSelection:this.highlightNodeSelection}),this.updateNodeNodes({datumSelection:this.highlightNodeSelection,isHighlight:!0})}resetAnimation(t){}getSeriesDomain(t){return[]}getSeriesRange(t,e){return[NaN,NaN]}legendItemSymbol(t,e,i={}){const{fills:s,strokes:a}=this.properties,{fill:n=s[e%s.length],fillOpacity:o=1,stroke:r=a[e%a.length],strokeWidth:l=0,strokeOpacity:c=1}=i;return{marker:{fill:n,fillOpacity:o,stroke:r,strokeWidth:l,strokeOpacity:c}}}getLegendData(t){if(t!=="category")return[];const{showInLegend:e}=this.properties;return Array.from(this.processedNodes.values(),({id:i,label:s},a)=>({legendType:"category",id:this.id,itemId:i,seriesId:this.id,enabled:!0,label:{text:s??i},symbol:this.legendItemSymbol(1,a),hideInLegend:!e,isFixed:!0}))}pickNodeClosestDatum({x:t,y:e}){let i=1/0,s;return this.linkSelection.each((a,n)=>{const o=a.containsPoint(t,e)?0:1/0;o<i&&(i=o,s=n)}),this.nodeSelection.each((a,n)=>{const o=a.distanceSquared(t,e);o<i&&(i=o,s=n)}),s!=null?{datum:s,distance:Math.sqrt(i)}:void 0}getDatumAriaText(t,e){if(t.type===0)return this.ctx.localeManager.t("ariaAnnounceFlowProportionLink",{index:t.index+1,count:this.linkCount,from:t.fromNode.id,to:t.toNode.id,size:t.size,sizeName:this.properties.sizeName??this.properties.sizeKey});if(t.type===1)return this.ctx.localeManager.t("ariaAnnounceFlowProportionNode",{index:t.index+1,count:this.nodeCount,description:e})}};y([rrt(lrt,{optional:!0,property:"nodes"})],vN.prototype,"_chartNodes",2);var urt=(P(),_(w)),{BBox:drt,Path:prt,ScenePathChangeDetection:rc}=urt._ModuleSupport;function mv({radius:t,startAngle:e,endAngle:i,tension:s}){const a=t*Math.cos(e),n=t*Math.sin(e),o=t*Math.cos(i),r=t*Math.sin(i),l=a*s,c=n*s,h=o*s,u=r*s;return{x:[a,l,h,o],y:[n,c,u,r]}}var Fr=class extends prt{constructor(){super(...arguments),this.centerX=0,this.centerY=0,this.radius=0,this.startAngle1=0,this.endAngle1=0,this.startAngle2=0,this.endAngle2=0,this.tension=1}computeBBox(){const{centerX:t,centerY:e,radius:i,startAngle1:s,endAngle1:a,startAngle2:n,endAngle2:o,tension:r}=this,l=mv({radius:i,startAngle:s,endAngle:o,tension:r}),c=mv({radius:i,startAngle:n,endAngle:a,tension:r}),h=Math.min(...l.x,...c.x),u=Math.max(...l.x,...c.x)-h,d=Math.min(...l.y,...c.y),p=Math.max(...l.y,...c.y)-d;return new drt(t+h,e+d,u,p)}tensionedCurveTo(t,e,i,s,a,n,o,r){const{path:l,tension:c}=this,h=1-c;l.cubicCurveTo((i-t)*h+t,(s-e)*h+e,(a-o)*h+o,(n-r)*h+r,o,r)}updatePath(){const{path:t,centerX:e,centerY:i,radius:s}=this;let{startAngle1:a,endAngle1:n,startAngle2:o,endAngle2:r}=this;a>o&&([a,o]=[o,a],[n,r]=[r,n]),t.clear();const l=e+s*Math.cos(a),c=i+s*Math.sin(a);t.moveTo(l,c),this.tensionedCurveTo(l,c,e,i,e,i,e+s*Math.cos(r),i+s*Math.sin(r)),t.arc(e,i,s,r,o,!0),this.tensionedCurveTo(e+s*Math.cos(o),i+s*Math.sin(o),e,i,e,i,e+s*Math.cos(n),i+s*Math.sin(n)),t.arc(e,i,s,n,a,!0),t.closePath()}};y([rc()],Fr.prototype,"centerX",2),y([rc()],Fr.prototype,"centerY",2),y([rc()],Fr.prototype,"radius",2),y([rc()],Fr.prototype,"startAngle1",2),y([rc()],Fr.prototype,"endAngle1",2),y([rc()],Fr.prototype,"startAngle2",2),y([rc()],Fr.prototype,"endAngle2",2),y([rc()],Fr.prototype,"tension",2);var grt=(P(),_(w)),{BaseProperties:Oj,SeriesTooltip:frt,SeriesProperties:yrt,ARRAY:mrt,COLOR_STRING:xv,COLOR_STRING_ARRAY:Ej,FUNCTION:wj,LINE_DASH:Rj,OBJECT:bv,POSITIVE_NUMBER:lc,RATIO:ry,STRING:cc,Validate:Rt,Label:xrt}=grt._ModuleSupport,MN=class extends xrt{constructor(){super(...arguments),this.spacing=1,this.maxWidth=1}};y([Rt(lc)],MN.prototype,"spacing",2),y([Rt(lc)],MN.prototype,"maxWidth",2);var Po=class extends Oj{constructor(){super(...arguments),this.fill=void 0,this.fillOpacity=1,this.stroke=void 0,this.strokeOpacity=1,this.strokeWidth=1,this.lineDash=[0],this.lineDashOffset=0,this.tension=0}};y([Rt(xv,{optional:!0})],Po.prototype,"fill",2),y([Rt(ry)],Po.prototype,"fillOpacity",2),y([Rt(xv,{optional:!0})],Po.prototype,"stroke",2),y([Rt(ry)],Po.prototype,"strokeOpacity",2),y([Rt(lc)],Po.prototype,"strokeWidth",2),y([Rt(Rj)],Po.prototype,"lineDash",2),y([Rt(lc)],Po.prototype,"lineDashOffset",2),y([Rt(ry)],Po.prototype,"tension",2),y([Rt(wj,{optional:!0})],Po.prototype,"itemStyler",2);var _n=class extends Oj{constructor(){super(...arguments),this.spacing=1,this.width=1,this.fill=void 0,this.fillOpacity=1,this.stroke=void 0,this.strokeOpacity=1,this.strokeWidth=1,this.lineDash=[0],this.lineDashOffset=0}};y([Rt(lc)],_n.prototype,"spacing",2),y([Rt(lc)],_n.prototype,"width",2),y([Rt(xv,{optional:!0})],_n.prototype,"fill",2),y([Rt(ry)],_n.prototype,"fillOpacity",2),y([Rt(xv,{optional:!0})],_n.prototype,"stroke",2),y([Rt(ry)],_n.prototype,"strokeOpacity",2),y([Rt(lc)],_n.prototype,"strokeWidth",2),y([Rt(Rj)],_n.prototype,"lineDash",2),y([Rt(lc)],_n.prototype,"lineDashOffset",2),y([Rt(wj,{optional:!0})],_n.prototype,"itemStyler",2);var ds=class extends yrt{constructor(){super(...arguments),this.idKey="",this.idName=void 0,this.labelKey=void 0,this.labelName=void 0,this.sizeKey=void 0,this.sizeName=void 0,this.nodes=void 0,this.fills=[],this.strokes=[],this.label=new MN,this.link=new Po,this.node=new _n,this.tooltip=new frt}};y([Rt(cc)],ds.prototype,"fromKey",2),y([Rt(cc)],ds.prototype,"toKey",2),y([Rt(cc)],ds.prototype,"idKey",2),y([Rt(cc,{optional:!0})],ds.prototype,"idName",2),y([Rt(cc,{optional:!0})],ds.prototype,"labelKey",2),y([Rt(cc,{optional:!0})],ds.prototype,"labelName",2),y([Rt(cc,{optional:!0})],ds.prototype,"sizeKey",2),y([Rt(cc,{optional:!0})],ds.prototype,"sizeName",2),y([Rt(mrt,{optional:!0})],ds.prototype,"nodes",2),y([Rt(Ej)],ds.prototype,"fills",2),y([Rt(Ej)],ds.prototype,"strokes",2),y([Rt(bv)],ds.prototype,"label",2),y([Rt(bv)],ds.prototype,"link",2),y([Rt(bv)],ds.prototype,"node",2),y([Rt(bv)],ds.prototype,"tooltip",2);var{SeriesNodePickMode:_j,CachedTextMeasurerPool:brt,TextWrapper:Srt,TextUtils:vrt,createDatumId:Sv,angleBetween:vv,normalizeAngle360:Mrt,isBetweenAngles:Pj,Logger:Drt,Sector:Art,evaluateBezier:Mv}=trt._ModuleSupport,Dv=t=>t.startAngle+vv(t.startAngle,t.endAngle)/2,DN=class extends vN{constructor(t){super({moduleCtx:t,pickModes:[_j.NEAREST_NODE,_j.EXACT_SHAPE_MATCH]}),this.properties=new ds}isLabelEnabled(){return(this.properties.labelKey!=null||this.nodes==null)&&this.properties.label.enabled}linkFactory(){return new Fr}nodeFactory(){return new Art}createNodeData(){const{id:t,_nodeDataDependencies:{seriesRectWidth:e,seriesRectHeight:i}={seriesRectWidth:0,seriesRectHeight:0}}=this,{fromKey:s,toKey:a,sizeKey:n,label:{spacing:o,maxWidth:r,fontSize:l},node:{width:c,spacing:h}}=this.properties,u=e/2,d=i/2;let p=[];const{nodeGraph:g,links:f}=this.getNodeGraph(E=>({...E,centerX:u,centerY:d,innerRadius:NaN,outerRadius:NaN,startAngle:NaN,endAngle:NaN}),E=>({...E,centerX:u,centerY:d,radius:NaN,startAngle1:NaN,endAngle1:NaN,startAngle2:NaN,endAngle2:NaN}),{includeCircularReferences:!0});let x=0;g.forEach(({datum:E,linksBefore:z,linksAfter:F},G)=>{const j=z.reduce((V,{link:W})=>V+W.size,0)+F.reduce((V,{link:W})=>V+W.size,0);if(j===0)g.delete(G);else{E.size=j,x+=E.size;const V=this.getLabelText(this.properties.label,{datum:E.datum,value:E.label,fromKey:s,toKey:a,sizeKey:n,size:E.size});E.label=String(V)}});let m=0;if(this.isLabelEnabled()){const E=this.properties.label.getFont();let z=0;g.forEach(({datum:F})=>{const{id:G,label:j}=F;if(j==null)return;const V=Srt.wrapText(j,{maxWidth:r,font:this.properties.label,textWrap:"never"}),{width:W}=brt.measureText(V,{font:E,textAlign:"left",textBaseline:"middle"});z=Math.max(W,z),p.push({id:G,text:V,centerX:u,centerY:d,angle:NaN,radius:NaN})}),m=z+o}const b=g.size;let v=Math.min(e,i)/2-c-m,S=h/v;if(m!==0&&(b*S>=1.5*Math.PI||v<=0)&&(p=[],v=Math.min(e,i)/2-c,S=h/v),b*S>=2*Math.PI||v<=0){Drt.warnOnce("There was insufficient space to display the Chord Series.");return}const D=v,k=v+c,L=Math.max((2*Math.PI-b*S)/x,0);let T=0;g.forEach(({datum:E})=>{E.innerRadius=D,E.outerRadius=k,E.startAngle=T,E.endAngle=T+E.size*L,T=E.endAngle+S;const z=(E.innerRadius+E.outerRadius)/2,F=Dv(E);E.midPoint={x:E.centerX+z*Math.cos(F),y:E.centerY+z*Math.sin(F)}});const N=[];g.forEach(({datum:E,linksBefore:z,linksAfter:F})=>{const G=Dv(E),j=[...z.map(W=>({link:W.link,distance:vv(Dv(W.node.datum),G),after:!1})),...F.map(W=>({link:W.link,distance:vv(Dv(W.node.datum),G),after:!0}))];let V=E.startAngle;j.toSorted((W,B)=>W.distance-B.distance).forEach(({link:W,after:B})=>{const U=W.size*L;B?(W.startAngle1=V,W.endAngle1=V+U):(W.startAngle2=V,W.endAngle2=V+U),V+=W.size*L}),N.push(E)});const{tension:C}=this.properties.link;f.forEach(E=>{E.radius=v;const z=mv({radius:v,startAngle:E.startAngle1,endAngle:E.endAngle2,tension:C}),F=mv({radius:v,startAngle:E.startAngle2,endAngle:E.endAngle1,tension:C}),G=Mv(...z.x,.5),j=Mv(...z.y,.5),V=Mv(...F.x,.5),W=Mv(...F.y,.5);E.midPoint={x:E.centerX+(G+V)/2,y:E.centerY+(j+W)/2},N.push(E)}),p.forEach(E=>{const z=g.get(E.id)?.datum;z!=null&&(E.radius=k+o,E.angle=Mrt(z.startAngle+vv(z.startAngle,z.endAngle)/2))}),p.sort((E,z)=>E.angle-z.angle);let O=1/0,R=-1/0;return p=p.filter(E=>{const z=vrt.getLineHeight(l),F=Math.atan2(z/2,E.radius),G=E.angle-F,j=E.angle+F;return Pj(O,G,j)||Pj(R,G,j)?!1:(O=Math.min(G,O),R=Math.max(j,R),!0)}),{itemId:t,nodeData:N,labelData:p}}updateLabelSelection(t){const e=this.isLabelEnabled()?t.labelData:[];return t.labelSelection.update(e)}updateLabelNodes(t){const{labelSelection:e}=t,{color:i,fontStyle:s,fontWeight:a,fontSize:n,fontFamily:o}=this.properties.label;e.each((r,{text:l,centerX:c,centerY:h,radius:u,angle:d})=>{r.visible=!0,r.translationX=c+u*Math.cos(d),r.translationY=h+u*Math.sin(d),r.text=l,r.fill=i,r.fontStyle=s,r.fontWeight=a,r.fontSize=n,r.fontFamily=o,r.textBaseline="middle",Math.cos(d)>=0?(r.textAlign="left",r.rotation=d):(r.textAlign="right",r.rotation=d-Math.PI)})}updateNodeSelection(t){return t.datumSelection.update(t.nodeData,void 0,e=>Sv([e.type,e.id]))}getBaseNodeStyle(t){const{properties:e}=this,{fill:i,fillOpacity:s,stroke:a,strokeOpacity:n,lineDash:o,lineDashOffset:r}=e.node,l=this.getStrokeWidth(e.node.strokeWidth),c=t?e.highlightStyle.item:void 0;return{fill:c?.fill??i,fillOpacity:c?.fillOpacity??s,stroke:c?.stroke??a,strokeOpacity:c?.strokeOpacity??n,strokeWidth:c?.strokeWidth??l,lineDash:c?.lineDash??o,lineDashOffset:c?.lineDashOffset??r}}getNodeStyleOverrides(t,e,i,s,a,n,o){const{id:r,properties:l}=this,{fills:c,strokes:h}=l,{itemStyler:u}=l.node,d=n.fill??c[i%c.length],p=n.stroke??h[i%h.length],g={};if(o||(g.fill=d,g.stroke=p),u!=null){const f=this.cachedDatumCallback(Sv(t,o?"highlight":"node"),()=>{const{fillOpacity:x=1,strokeOpacity:m=1,strokeWidth:b=0,lineDash:v=[],lineDashOffset:S=0}=n;return u({seriesId:r,datum:e,highlighted:o,label:a,size:s,fill:d,fillOpacity:x,stroke:p,strokeOpacity:m,strokeWidth:b,lineDash:v,lineDashOffset:S})});Object.assign(g,f)}return g}updateNodeNodes(t){const{datumSelection:e,isHighlight:i}=t,s=this.getBaseNodeStyle(i);e.each((a,n)=>{const{datumIndex:o,size:r,label:l}=n,c=this.getNodeStyleOverrides(String(o),n,o,r,l,s,i);a.centerX=n.centerX,a.centerY=n.centerY,a.innerRadius=n.innerRadius,a.outerRadius=n.outerRadius,a.startAngle=n.startAngle,a.endAngle=n.endAngle,a.fill=c.fill??s?.fill,a.fillOpacity=c.fillOpacity??s?.fillOpacity,a.stroke=c.stroke??s?.stroke,a.strokeOpacity=c.strokeOpacity??s?.strokeOpacity,a.strokeWidth=c.strokeWidth??s?.strokeWidth,a.lineDash=c.lineDash??s?.lineDash,a.lineDashOffset=c.lineDashOffset??s?.lineDashOffset,a.inset=a.strokeWidth/2})}updateLinkSelection(t){return t.datumSelection.update(t.nodeData,void 0,e=>Sv([e.type,e.index,e.fromNode.id,e.toNode.id]))}getBaseLinkStyle(t){const{properties:e}=this,{fill:i,fillOpacity:s,stroke:a,strokeOpacity:n,lineDash:o,lineDashOffset:r,tension:l}=e.link,c=this.getStrokeWidth(e.link.strokeWidth),h=t?e.highlightStyle.item:void 0;return{fill:h?.fill??i,fillOpacity:h?.fillOpacity??s,stroke:h?.stroke??a,strokeOpacity:h?.strokeOpacity??n,strokeWidth:h?.strokeWidth??c,lineDash:h?.lineDash??o,lineDashOffset:h?.lineDashOffset??r,tension:l}}getLinkStyleOverrides(t,e,i,s,a){const{id:n,properties:o}=this,{fills:r,strokes:l}=o,{itemStyler:c}=o.link,h=s.fill??r[i%r.length],u=s.stroke??l[i%l.length],d={};if(a||(d.fill=h,d.stroke=u),c!=null){const p=this.cachedDatumCallback(Sv(t,a?"highlight":"node"),()=>{const{fillOpacity:g=1,strokeOpacity:f=1,strokeWidth:x=0,lineDash:m=[],lineDashOffset:b=0,tension:v}=s;return c({seriesId:n,datum:e,highlighted:a,tension:v,fill:h,fillOpacity:g,stroke:u,strokeOpacity:f,strokeWidth:x,lineDash:m,lineDashOffset:b})});Object.assign(d,p)}return d}updateLinkNodes(t){const{datumSelection:e,isHighlight:i}=t,s=this.getBaseLinkStyle(i);e.each((a,n)=>{const{datumIndex:o}=n,r=n.fromNode.datumIndex,l=this.getLinkStyleOverrides(String(o),n,r,s,i);a.centerX=n.centerX,a.centerY=n.centerY,a.radius=n.radius,a.startAngle1=n.startAngle1,a.endAngle1=n.endAngle1,a.startAngle2=n.startAngle2,a.endAngle2=n.endAngle2,a.fill=l?.fill??s.fill,a.fillOpacity=l?.fillOpacity??s.fillOpacity,a.stroke=l?.stroke??s.stroke,a.strokeOpacity=l?.strokeOpacity??s.strokeOpacity,a.strokeWidth=l?.strokeWidth??s.strokeWidth,a.lineDash=l?.lineDash??s.lineDash,a.lineDashOffset=l?.lineDashOffset??s.lineDashOffset,a.tension=l?.tension??s.tension})}getTooltipContent(t){const{id:e,processedData:i,nodesProcessedData:s,properties:a}=this,{fromKey:n,toKey:o,sizeKey:r,sizeName:l,tooltip:c}=a,{datumIndex:h}=t,u=t.type===0?t.fromNode.index:t.index,d=t.type===0?`${t.fromNode.label} - ${t.toNode.label}`:t.label,p=t.type===0?i?.rawData[t.datumIndex]:s?.rawData[t.datumIndex],g=t.size;let f;if(t.type===0){const x=t.fromNode.datumIndex,m=this.getBaseLinkStyle(!1);Object.assign(m,this.getLinkStyleOverrides(String(h),p,x,m,!1)),f=m}else{const x=t.label,m=this.getBaseNodeStyle(!1);Object.assign(m,this.getNodeStyleOverrides(String(h),p,h,g,x,m,!1)),f=m}return c.formatTooltip({title:d,symbol:this.legendItemSymbol(t.type,u,f),data:r!=null?[{label:l,fallbackLabel:r,value:String(g)}]:[]},{seriesId:e,datum:p,title:d,fromKey:n,toKey:o,sizeKey:r,sizeName:l,size:g,...f})}computeFocusBounds({datumIndex:t}){const e=this.contextNodeData?.nodeData[t];if(e?.type===1){for(const i of this.nodeSelection)if(i.datum===e)return i.node;return}else if(e?.type===0){for(const i of this.linkSelection)if(i.datum===e)return i.node;return}}};DN.className="ChordSeries",DN.type="chord";var{DEFAULT_FONT_FAMILY:Irt,DEFAULT_LABEL_COLOUR:krt}=Jot._ModuleSupport.ThemeSymbols,Lrt={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["flow-proportion"],solo:!0,identifier:"chord",tooltipDefaults:{range:"exact"},moduleFactory:t=>new DN(t),themeTemplate:{series:{highlightStyle:{series:{dimOpacity:.2}},label:{fontFamily:Irt,color:krt,spacing:5,maxWidth:100},node:{spacing:8,width:10,strokeWidth:0},link:{fillOpacity:.5,strokeWidth:0,tension:.4}},legend:{enabled:!1,toggleSeries:!1}},paletteFactory({takeColors:t,colorsCount:e}){const{fills:i,strokes:s}=t(e);return{fills:i,strokes:s}}},Trt=(P(),_(w)),Nrt=(P(),_(w)),{ThemeSymbols:{DEFAULT_INSIDE_SERIES_LABEL_COLOUR:Crt,DEFAULT_FONT_FAMILY:Ort},ThemeConstants:{CARTESIAN_AXIS_TYPE:Vd,CARTESIAN_POSITION:Ud}}=Nrt._ModuleSupport;function Bj(t){const{placement:e,...i}=t?.stageLabel??{};return t?.direction!=="horizontal"?[{type:Vd.CATEGORY,position:e==="after"?Ud.RIGHT:Ud.LEFT,label:i},{type:Vd.NUMBER,position:Ud.BOTTOM}]:[{type:Vd.NUMBER,position:Ud.LEFT},{type:Vd.CATEGORY,position:e==="before"?Ud.TOP:Ud.BOTTOM,label:i}]}var Ert={series:{direction:"vertical",strokeWidth:0,spacingRatio:.25,label:{enabled:!0,fontSize:12,fontFamily:Ort,color:Crt},dropOff:{enabled:!0,fillOpacity:.2,strokeWidth:0}},axes:{[Vd.NUMBER]:{nice:!1,gridLine:{enabled:!1},crosshair:{enabled:!1},label:{enabled:!1,formatter(t){return Math.abs(t.value).toFixed(t.fractionDigits??0)}}},[Vd.CATEGORY]:{line:{enabled:!1}}}},wrt=(P(),_(w)),AN=(P(),_(w)),Rrt=(P(),_(w)),{lineDistanceSquared:Av,BBox:_rt,Path:Prt,ScenePathChangeDetection:hc}=Rrt._ModuleSupport,zj=1e-6;function Fj([t,e],[i,s]){return Math.abs(t-i)<=zj&&Math.abs(e-s)<=zj}var Bo=class extends Prt{constructor(){super(...arguments),this.x0=0,this.y0=0,this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.x3=0,this.y3=0}get midPoint(){const{x0:t,y0:e,x1:i,y1:s,x2:a,y2:n,x3:o,y3:r}=this;return{x:(t+i+a+o)/4,y:(e+s+n+r)/4}}distanceSquared(t,e){if(this.containsPoint(t,e))return 0;const{x0:i,y0:s,x1:a,y1:n,x2:o,y2:r,x3:l,y3:c}=this;return Math.min(Av(t,e,i,s,a,n,1/0),Av(t,e,a,n,o,r,1/0),Av(t,e,o,r,l,c,1/0),Av(t,e,l,c,i,s,1/0))}computeBBox(){const{x0:t,y0:e,x1:i,y1:s,x2:a,y2:n,x3:o,y3:r}=this,l=Math.min(t,i,a,o),c=Math.max(t,i,a,o)-l,h=Math.min(e,s,n,r),u=Math.max(e,s,n,r)-h;return new _rt(l,h,c,u)}updatePath(){const{path:t,x0:e,y0:i,x1:s,y1:a,x2:n,y2:o,x3:r,y3:l}=this,c=[[e,i],[s,a],[n,o],[r,l]];t.clear();let h,u;c.forEach(d=>{if(h!=null&&Fj(h,d)||u!=null&&Fj(u,d))return;const[p,g]=d;h==null?t.moveTo(p,g):t.lineTo(p,g),h??(h=d),u=d}),t.closePath()}};y([hc()],Bo.prototype,"x0",2),y([hc()],Bo.prototype,"y0",2),y([hc()],Bo.prototype,"x1",2),y([hc()],Bo.prototype,"y1",2),y([hc()],Bo.prototype,"x2",2),y([hc()],Bo.prototype,"y2",2),y([hc()],Bo.prototype,"x3",2),y([hc()],Bo.prototype,"y3",2);var Brt=(P(),_(w)),{NODE_UPDATE_STATE_TO_PHASE_MAPPING:zrt}=Brt._ModuleSupport;function jj(t,e,i,s){const{x0:a,y0:n,x1:o,y1:r,x2:l,y2:c,x3:h,y3:u,opacity:d}=t;return i?{x0:(a+h)/2,y0:(n+u)/2,x1:(o+l)/2,y1:(r+c)/2,x2:(o+l)/2,y2:(r+c)/2,x3:(a+h)/2,y3:(n+u)/2,opacity:d}:{x0:(a+o)/2,y0:(n+r)/2,x1:(a+o)/2,y1:(n+r)/2,x2:(l+h)/2,y2:(c+u)/2,x3:(l+h)/2,y3:(c+u)/2,opacity:d}}function Frt(t,e){const i=n=>n==null;return{fromFn:(n,o,r)=>{r==="updated"&&i(o)?r="removed":r==="updated"&&i(n.previousDatum)&&(r="added");let l;r==="added"&&n.previousDatum==null&&e==="fade"?l={...ly(n,o),opacity:0}:r==="unknown"||r==="added"?l=jj(o,n.previousDatum,t,e):l={x0:n.x0,y0:n.y0,x1:n.x1,y1:n.y1,x2:n.x2,y2:n.y2,x3:n.x3,y3:n.y3,opacity:n.opacity};const c=zrt[r];return{...l,phase:c}},toFn:(n,o,r)=>{let l;return r==="removed"&&n.datum==null&&e==="fade"?l={...ly(n,o),opacity:0}:r==="removed"||i(o)?l=jj(o,n.previousDatum,t,e):l=ly(n,o),l}}}function ly(t,e){const{x0:i,y0:s,x1:a,y1:n,x2:o,y2:r,x3:l,y3:c,opacity:h}=e;return{x0:i,y0:s,x1:a,y1:n,x2:o,y2:r,x3:l,y3:c,opacity:h}}var{SeriesNodePickMode:Gj,SeriesZIndexMap:Vj,valueProperty:jrt,keyProperty:Grt,ChartAxisDirection:Vrt,updateLabelNode:Urt,SMALLEST_KEY_INTERVAL:Wrt,LARGEST_KEY_INTERVAL:Hrt,diff:Yrt,fixNumericExtent:Krt,seriesLabelFadeInAnimation:Uj,resetMotion:Xrt,resetLabelFn:Zrt,animationValidation:$rt,computeBarFocusBounds:Qrt,createDatumId:qrt,ContinuousScale:Jrt,Group:tlt,Selection:elt,PointerEvents:Wj,motion:ilt}=AN._ModuleSupport,slt=class extends AN._ModuleSupport.SeriesNodeEvent{constructor(t,e,i,s){super(t,e,i,s),this.xKey=s.properties.stageKey,this.yKey=s.properties.valueKey}},Hj=class extends AN._ModuleSupport.AbstractBarSeries{constructor({moduleCtx:t,animationResetFns:e}){super({moduleCtx:t,pickModes:[Gj.AXIS_ALIGNED,Gj.EXACT_SHAPE_MATCH],hasHighlightedLabels:!0,directionKeys:{x:["stageKey"],y:["valueKey"]},directionNames:{x:[],y:[]},datumSelectionGarbageCollection:!1,animationResetFns:{datum:e.datum,label:Zrt}}),this.NodeEvent=slt,this.connectorNodeGroup=this.contentGroup.appendChild(new tlt({name:`${this.id}-series-connectorNodes`,zIndex:Vj.BACKGROUND})),this.connectorSelection=elt.select(this.connectorNodeGroup,()=>this.connectionFactory()),this.connectorNodeGroup.pointerEvents=Wj.None}get pickModeAxis(){return"main-category"}setSeriesIndex(t){return super.setSeriesIndex(t)?(this.connectorNodeGroup.zIndex=[Vj.BACKGROUND,t],!0):!1}isVertical(){return!super.isVertical()}connectionFactory(){return new Bo}async processData(t){if(!this.properties.isValid())return;const{stageKey:e,valueKey:i}=this.properties,{visible:s,id:a}=this,n=(g,f,x)=>s&&this.ctx.legendManager.getItemEnabled({seriesId:a,itemId:x}),o=this.getCategoryAxis()?.scale,r=this.getValueAxis()?.scale,{isContinuousX:l,xScaleType:c,yScaleType:h}=this.getScaleInformation({xScale:o,yScale:r}),u=[];this.ctx.animationManager.isSkipped()||(this.processedData&&u.push(Yrt(this.id,this.processedData)),u.push($rt()));const d=this.visible?{}:{forceValue:0},{processedData:p}=await this.requestDataModel(t,this.data,{props:[Grt(e,c,{id:"xValue"}),jrt(i,h,{id:"yValue",...d,validation:n,invalidValue:0}),...l?[Wrt,Hrt]:[],...u],groupByKeys:!1});this.smallestDataInterval=p.reduced?.smallestKeyInterval,this.largestDataInterval=p.reduced?.largestKeyInterval,this.animationState.transition("updateData")}getSeriesDomain(t){const{processedData:e,dataModel:i,id:s,ctx:{legendManager:a}}=this;if(!e||!i)return[];const{keys:[n],values:o}=e.domain;if(t===this.getCategoryDirection()){const r=i.resolveProcessedDataDefById(this,"xValue");return r?.def.type==="key"&&r?.def.valueType==="category"?this.hasData?n.filter((l,c)=>a.getItemEnabled({seriesId:s,itemId:c})):[]:this.padBandExtent(n)}else{const r=i.resolveProcessedDataIndexById(this,"yValue"),l=o[r][1],c=[-l,l];return Krt(c)}}getSeriesRange(t,e){return[NaN,NaN]}createNodeData(){const{hasData:t,data:e,dataModel:i,groupScale:s,processedData:a,id:n,ctx:{legendManager:o}}=this,r=this.getCategoryAxis(),l=this.getValueAxis();if(!(t&&e&&r&&l&&i&&a?.type==="ungrouped"&&a.rawData.length!==0))return;const c=r.scale,h=l.scale,u=this.getBarDirection()===Vrt.X,{stageKey:d,valueKey:p}=this.properties,{strokeWidth:g}=this.barStyle(),f=`${p}`,x={itemId:f,nodeData:[],labelData:[],connectorData:[],scales:this.calculateScaling(),visible:this.visible},m=this.visible;if(!m)return x;const b=i.resolveKeysById(this,"xValue",a),v=i.resolveColumnById(this,"yValue",a),{barWidth:S,groupIndex:D}=this.updateGroupScale(r),k=Jrt.is(c)?S*-.5:0;let L;return a.rawData.forEach((T,N)=>{const C=m&&o.getItemEnabled({seriesId:n,itemId:N}),O=b[N];if(O==null)return;const R=Math.round(c.convert(O))+s.convert(String(D))+k,E=v[N],z=Math.round(h.convert(-E)),F=Math.round(h.convert(E)),G=Math.max(g,Math.abs(F-z)),j={x:u?Math.min(F,z):R,y:u?R:Math.min(F,z),width:u?G:S,height:u?S:G},V={x:j.x+j.width/2,y:j.y+j.height/2},W=this.createLabelData({rect:j,barAlongX:u,yDatum:E,datum:T,visible:C}),B={index:N,series:this,itemId:f,datum:T,datumIndex:N,xValue:O,yValue:E,xKey:d,yKey:p,x:j.x,y:j.y,width:j.width,height:j.height,midPoint:V,strokeWidth:g,opacity:1,label:W,visible:C};if(x.nodeData.push(B),W!=null&&x.labelData.push(W),L!=null){const U=L.rect,H=L.nodeDatum,K=L.datumIndex;u?x.connectorData.push({datum:H,datumIndex:K,x0:U.x,y0:U.y+U.height,x1:U.x+U.width,y1:U.y+U.height,x2:j.x+j.width,y2:j.y,x3:j.x,y3:j.y,opacity:1}):x.connectorData.push({datum:H,datumIndex:K,x0:U.x+U.width,y0:U.y,x1:j.x,y1:j.y,x2:j.x,y2:j.y+j.height,x3:U.x+U.width,y3:U.y+U.height,opacity:1})}C&&(L={itemId:f,rect:j,nodeDatum:B,datumIndex:N})}),x}updateNodes(t,e,i){super.updateNodes(t,e,i);const{connectorSelection:s}=this,a=this.contextNodeData?.connectorData??[];this.connectorSelection=this.updateConnectorSelection({connectorSelection:s,connectorData:a}),this.updateConnectorNodes({connectorSelection:s})}updateDatumSelection(t){const{nodeData:e,datumSelection:i}=t,s=e??[];return i.update(s,void 0,a=>this.getDatumId(a))}updateConnectorSelection(t){const{connectorData:e,connectorSelection:i}=t;return i.update(this.connectorEnabled()?e:[],void 0,s=>this.getDatumId(s.datum))}updateConnectorNodes(t){const{fills:e,strokes:i}=this.properties,{fill:s,fillOpacity:a,stroke:n,strokeOpacity:o,strokeWidth:r,lineDash:l,lineDashOffset:c}=this.connectorStyle();t.connectorSelection.each((h,u)=>{const{datumIndex:d}=u;h.setProperties(ly(h,u)),h.fill=s??e[d%e.length],h.fillOpacity=a,h.stroke=n??i[d%i.length],h.strokeOpacity=o,h.strokeWidth=r,h.lineDash=l,h.lineDashOffset=c})}getHighlightLabelData(t,e){const i=t.filter(s=>s.datum===e.datum);return i.length>0?i:void 0}updateLabelSelection(t){const e=this.properties.label.enabled?t.labelData:[];return t.labelSelection.update(e,i=>{i.pointerEvents=Wj.None})}updateLabelNodes(t){t.labelSelection.each((e,i)=>{Urt(e,this.properties.label,i)})}getTooltipContent(t){const{id:e,dataModel:i,processedData:s,properties:a}=this,{fills:n,strokes:o,stageKey:r,valueKey:l,tooltip:c,itemStyler:h}=a,u=this.getCategoryAxis(),d=this.getValueAxis();if(!i||!s||s.rawData.length===0||!u||!d)return;const{datumIndex:p}=t,g=s.rawData[p],f=i.resolveKeysById(this,"xValue",s)[p],x=i.resolveColumnById(this,"yValue",s)[p];if(f==null)return;const m={fill:n[p%n.length],stroke:o[p%o.length],...this.barStyle()};if(h!=null){const b=this.cachedDatumCallback(qrt(String(p),"node"),()=>h({seriesId:e,datum:g,stageKey:r,valueKey:l,highlighted:!1,...m}));Object.assign(m,b)}return c.formatTooltip({symbol:this.legendItemSymbol(p),data:[{label:u.formatDatum(f),value:d.formatDatum(x)}]},{seriesId:e,datum:g,title:r,stageKey:r,valueKey:l,...m})}resetAllAnimation(t){super.resetAllAnimation(t),Xrt([this.connectorSelection],ly)}animateEmptyUpdateReady({labelSelection:t}){const{connectorSelection:e}=this,i=this.isVertical(),a=Frt(i,"normal");ilt.fromToMotion(this.id,"connectors",this.ctx.animationManager,[e],a),Uj(this,"labels",this.ctx.animationManager,t)}animateWaitingUpdateReady(t){const{labelSelection:e}=t;this.ctx.animationManager.stopByAnimationGroupId(this.id),Uj(this,"labels",this.ctx.animationManager,e)}getDatumId(t){return`${t.xValue}`}isLabelEnabled(){return this.properties.label.enabled}computeFocusBounds({datumIndex:t}){return Qrt(this.contextNodeData?.nodeData[t])}legendItemSymbol(t){const{strokeWidth:e,fillOpacity:i,strokeOpacity:s}=this.barStyle(),{fills:a,strokes:n}=this.properties,o=a[t%a.length]??"black",r=n[t%n.length]??"black";return{marker:{fill:o,fillOpacity:i,stroke:r,strokeWidth:e,strokeOpacity:s}}}getLegendData(t){const{id:e,processedData:i,dataModel:s,ctx:{legendManager:a},visible:n}=this;if(!s||!i||t!=="category"||!this.properties.isValid())return[];const{showInLegend:o}=this.properties,r=s.resolveKeysById(this,"xValue",i);return i.rawData.map((l,c)=>{const h=r[c];if(h!=null)return{legendType:"category",id:e,itemId:c,seriesId:e,enabled:n&&a.getItemEnabled({seriesId:e,itemId:c}),label:{text:h},symbol:this.legendItemSymbol(c),skipAnimations:!0,hideInLegend:!o}}).filter(l=>l!=null)}},alt=(P(),_(w)),{Label:nlt,AbstractBarSeriesProperties:olt,SeriesTooltip:rlt,AxisLabel:llt,Validate:Os,UNION:Yj,COLOR_STRING_ARRAY:Kj,LINE_DASH:clt,OBJECT:IN,POSITIVE_NUMBER:kN,RATIO:Xj,STRING:Zj}=alt._ModuleSupport,LN=class extends nlt{constructor(){super(...arguments),this.spacing=0}};y([Os(Yj(["before","middle","after"],"a placement"))],LN.prototype,"placement",2),y([Os(kN)],LN.prototype,"spacing",2);var $j=class extends llt{};y([Os(Yj(["before","after"],"a placement"))],$j.prototype,"placement",2);var La=class extends olt{constructor(){super(...arguments),this.fills=[],this.fillOpacity=1,this.strokes=[],this.strokeWidth=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.label=new LN,this.stageLabel=new $j,this.tooltip=new rlt}};y([Os(Zj)],La.prototype,"stageKey",2),y([Os(Zj)],La.prototype,"valueKey",2),y([Os(Kj)],La.prototype,"fills",2),y([Os(Xj)],La.prototype,"fillOpacity",2),y([Os(Kj)],La.prototype,"strokes",2),y([Os(kN)],La.prototype,"strokeWidth",2),y([Os(Xj)],La.prototype,"strokeOpacity",2),y([Os(clt)],La.prototype,"lineDash",2),y([Os(kN)],La.prototype,"lineDashOffset",2),y([Os(IN)],La.prototype,"label",2),y([Os(IN)],La.prototype,"stageLabel",2),y([Os(IN)],La.prototype,"tooltip",2);function Qj(t,{x:e,y:i,width:s,height:a,opacity:n}){return{x1:e,y1:i,x2:e+s,y2:i+a,opacity:n}}var{formatValue:hlt,Line:ult}=wrt._ModuleSupport,TN=class extends Hj{constructor(t){super({moduleCtx:t,animationResetFns:{datum:Qj}}),this.properties=new La}get hasData(){const{id:t,ctx:{legendManager:e}}=this,i=this.data?.reduce((s,a,n)=>s+(e.getItemEnabled({seriesId:t,itemId:n})?1:0),0);return i!=null&&i>1}getBandScalePadding(){return{inner:1,outer:0}}connectorEnabled(){return!0}barStyle(){return{fillOpacity:1,strokeOpacity:1,strokeWidth:0,lineDash:[],lineDashOffset:0}}connectorStyle(){const{fillOpacity:t,strokeOpacity:e,strokeWidth:i,lineDash:s,lineDashOffset:a}=this.properties;return{fillOpacity:t,strokeOpacity:e,strokeWidth:i,lineDash:s,lineDashOffset:a}}nodeFactory(){return new ult}createLabelData({rect:t,barAlongX:e,yDatum:i,datum:s,visible:a}){const{stageKey:n,valueKey:o,label:r}=this.properties,{spacing:l,placement:c}=r;let h,u,d,p;if(e)switch(h=t.x+t.width/2,d="center",c){case"before":u=t.y-l,p="bottom";break;case"after":u=t.y+t.height+l,p="top";break;default:u=t.y+t.height/2,p="middle"}else switch(u=t.y+t.height/2,p="middle",c){case"before":h=t.x-l,d="right";break;case"after":h=t.x+t.width+l,d="left";break;default:h=t.x+t.width/2,d="center"}return{x:h,y:u,textAlign:d,textBaseline:p,text:this.getLabelText(r,{itemId:o,value:i,datum:s,stageKey:n,valueKey:o},g=>hlt(g,0)),itemId:o,datum:s,series:this,visible:a}}updateDatumNodes(t){const e=t.isHighlight?this.properties.highlightStyle.item:void 0;t.datumSelection.each((i,s)=>{i.setProperties(Qj(i,s)),i.stroke=e?.stroke,i.strokeWidth=e?.strokeWidth??0,i.strokeOpacity=e?.strokeOpacity??1,i.lineDash=e?.lineDash,i.lineDashOffset=e?.lineDashOffset??0})}};TN.className="ConeFunnelSeries",TN.type="cone-funnel";var dlt=(P(),_(w)),{ThemeSymbols:{DEFAULT_LABEL_COLOUR:plt,DEFAULT_FONT_FAMILY:glt},ThemeConstants:{CARTESIAN_AXIS_TYPE:qj}}=dlt._ModuleSupport,flt={series:{direction:"vertical",strokeWidth:0,label:{enabled:!0,fontSize:12,fontFamily:glt,color:plt,placement:"before",spacing:4}},seriesArea:{padding:{top:20,bottom:20}},axes:{[qj.NUMBER]:{nice:!1,gridLine:{enabled:!1},crosshair:{enabled:!1},label:{enabled:!1,formatter(t){return Math.abs(t.value).toFixed(t.fractionDigits??0)}}},[qj.CATEGORY]:{line:{enabled:!1}}}},ylt={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["cartesian"],identifier:"cone-funnel",moduleFactory:t=>new TN(t),solo:!0,tooltipDefaults:{range:"nearest"},defaultAxes:Bj,themeTemplate:flt,paletteFactory:({userPalette:t,themeTemplateParameters:e,takeColors:i,colorsCount:s})=>{const{fills:a}=i(s),n=e.get(Trt._ModuleSupport.ThemeSymbols.DEFAULT_FUNNEL_SERIES_COLOR_RANGE),o=t==="inbuilt"?n:[a[0],a[1]];return{fills:o,strokes:o.slice(0)}}},mlt=(P(),_(w)),xlt=(P(),_(w)),{Label:blt,DropShadow:Slt,AbstractBarSeriesProperties:vlt,BaseProperties:Mlt,SeriesTooltip:Dlt,AxisLabel:Alt,Validate:ge,UNION:Ilt,BOOLEAN:klt,COLOR_STRING_ARRAY:Jj,COLOR_STRING:tG,FUNCTION:Llt,LINE_DASH:eG,OBJECT:cy,POSITIVE_NUMBER:Iv,RATIO:hy,STRING:iG}=xlt._ModuleSupport,Tlt=class extends blt{},sG=class extends Alt{};y([ge(Ilt(["before","after"],"a placement"))],sG.prototype,"placement",2);var jr=class extends Mlt{constructor(){super(...arguments),this.enabled=!0,this.fillOpacity=1,this.strokeWidth=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0}};y([ge(klt)],jr.prototype,"enabled",2),y([ge(tG,{optional:!0})],jr.prototype,"fill",2),y([ge(hy)],jr.prototype,"fillOpacity",2),y([ge(tG,{optional:!0})],jr.prototype,"stroke",2),y([ge(Iv)],jr.prototype,"strokeWidth",2),y([ge(hy)],jr.prototype,"strokeOpacity",2),y([ge(eG)],jr.prototype,"lineDash",2),y([ge(Iv)],jr.prototype,"lineDashOffset",2);var Bi=class extends vlt{constructor(){super(...arguments),this.fills=[],this.fillOpacity=1,this.strokes=[],this.strokeWidth=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.spacingRatio=0,this.dropOff=new jr,this.shadow=new Slt().set({enabled:!1}),this.label=new Tlt,this.stageLabel=new sG,this.tooltip=new Dlt}};y([ge(iG)],Bi.prototype,"stageKey",2),y([ge(iG)],Bi.prototype,"valueKey",2),y([ge(Jj)],Bi.prototype,"fills",2),y([ge(hy)],Bi.prototype,"fillOpacity",2),y([ge(Jj)],Bi.prototype,"strokes",2),y([ge(Iv)],Bi.prototype,"strokeWidth",2),y([ge(hy)],Bi.prototype,"strokeOpacity",2),y([ge(eG)],Bi.prototype,"lineDash",2),y([ge(Iv)],Bi.prototype,"lineDashOffset",2),y([ge(hy)],Bi.prototype,"spacingRatio",2),y([ge(Llt,{optional:!0})],Bi.prototype,"itemStyler",2),y([ge(cy)],Bi.prototype,"dropOff",2),y([ge(cy)],Bi.prototype,"shadow",2),y([ge(cy)],Bi.prototype,"label",2),y([ge(cy)],Bi.prototype,"stageLabel",2),y([ge(cy)],Bi.prototype,"tooltip",2);var{ChartAxisDirection:aG,getRectConfig:Nlt,updateRect:Clt,checkCrisp:Olt,resetBarSelectionsFn:Elt,prepareBarAnimationFunctions:nG,midpointStartingBarPosition:oG,formatValue:wlt,Rect:Rlt,motion:rG}=mlt._ModuleSupport,NN=class extends Hj{constructor(t){super({moduleCtx:t,animationResetFns:{datum:Elt}}),this.properties=new Bi}getBandScalePadding(){return{inner:this.properties.spacingRatio,outer:0}}connectorEnabled(){return this.properties.dropOff.enabled}barStyle(){const{fillOpacity:t,strokeOpacity:e,strokeWidth:i,lineDash:s,lineDashOffset:a}=this.properties;return{fillOpacity:t,strokeOpacity:e,strokeWidth:i,lineDash:s,lineDashOffset:a}}connectorStyle(){const{fill:t,fillOpacity:e,stroke:i,strokeOpacity:s,strokeWidth:a,lineDash:n,lineDashOffset:o}=this.properties.dropOff;return{fill:t,fillOpacity:e,stroke:i,strokeOpacity:s,strokeWidth:a,lineDash:n,lineDashOffset:o}}nodeFactory(){return new Rlt}createLabelData({rect:t,yDatum:e,datum:i,visible:s}){const{valueKey:a,stageKey:n,label:o}=this.properties;return{x:t.x+t.width/2,y:t.y+t.height/2,textAlign:"center",textBaseline:"middle",text:this.getLabelText(o,{itemId:n,value:e,datum:i,valueKey:a,stageKey:n},r=>wlt(r,0)),itemId:n,datum:i,series:this,visible:s}}updateDatumNodes(t){const{datumSelection:e,isHighlight:i}=t,{id:s}=this,{stageKey:a,valueKey:n,highlightStyle:{item:o},fills:r,strokes:l,fillOpacity:c,strokeOpacity:h,strokeWidth:u,lineDash:d,lineDashOffset:p,itemStyler:g,shadow:f}=this.properties,x=this.axes[aG.X],m=Olt(x?.scale,x?.visibleRange,this.smallestDataInterval,this.largestDataInterval),b=this.getCategoryDirection()===aG.X;e.each((v,S)=>{const{datumIndex:D}=S,k=r[D%r.length]??"black",L=l[D%l.length]??"black",T={fill:k,stroke:L,fillOpacity:c,strokeOpacity:h,lineDash:d,lineDashOffset:p,fillShadow:f,strokeWidth:this.getStrokeWidth(u)},N=b?S.width>0:S.height>0,C=Nlt(this,String(S.datumIndex),{datum:S,isHighlighted:i,style:T,highlightStyle:o,itemStyler:g,seriesId:s,stageKey:a,valueKey:n});C.crisp=m,C.visible=N,Clt(v,C)})}animateEmptyUpdateReady(t){super.animateEmptyUpdateReady(t);const{datumSelection:e}=t,i=this.isVertical(),a=nG(oG(i,"normal"));rG.fromToMotion(this.id,"datums",this.ctx.animationManager,[e],a)}animateWaitingUpdateReady(t){super.animateWaitingUpdateReady(t);const{datumSelection:e}=t,{processedData:i}=this,s=i?.reduced?.diff?.[this.id],a=nG(oG(this.isVertical(),"fade"));rG.fromToMotion(this.id,"datums",this.ctx.animationManager,[e],a,(n,o)=>o.xValue,s)}};NN.className="FunnelSeries",NN.type="funnel";var _lt={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["cartesian"],identifier:"funnel",moduleFactory:t=>new NN(t),solo:!0,tooltipDefaults:{range:"exact"},defaultAxes:Bj,themeTemplate:Ert,paletteFactory:({takeColors:t})=>{const{fills:e,strokes:i}=t(1);return{fills:e,strokes:i}}},Plt=(P(),_(w)),CN=(P(),_(w)),Blt=(P(),_(w)),{CachedTextMeasurerPool:lG,TextUtils:cG,TextWrapper:kv,findMaxValue:hG,Logger:zlt}=Blt._ModuleSupport;function Flt(t,e){const{fontSize:i,minimumFontSize:s=i}=t,{fontSize:a,minimumFontSize:n=a}=e,o=i-s,r=a-n;let l=t.fontSize,c=e.fontSize;const h=[{labelFontSize:i,secondaryLabelFontSize:a}];for(;l>s||c>n;){const u=o>0?(l-s)/o:-1,d=r>0?(c-n)/r:-1;u>d?l--:c--,h.push({labelFontSize:l,secondaryLabelFontSize:c})}return h.reverse(),h}function Wd(t,e){return t.lineHeight!=null&&t.fontSize!=null?t.lineHeight*e/t.fontSize:cG.getLineHeight(e)}function uG(t,e,i,s,{padding:a},n){const{spacing:o=0}=e,r=2*a,l=2*a+o,c=(e.minimumFontSize??e.fontSize)+(s.minimumFontSize??s.fontSize);if(c>n(c+l,!1).height-l)return;const h=Flt(e,s),u={fontFamily:e.fontFamily,fontSize:e.fontSize,fontStyle:e.fontStyle,fontWeight:e.fontWeight},d={fontFamily:s.fontFamily,fontSize:s.fontSize,fontStyle:s.fontStyle,fontWeight:s.fontWeight};let p,g;return hG(0,h.length-1,f=>{const{labelFontSize:x,secondaryLabelFontSize:m}=h[f],b=f===0,v=Wd(e,x),S=Wd(s,m),D=n(v+S+l,b),k=D.width-r,L=D.height-l;if(v+S>L||((p==null||p.fontSize!==x)&&(u.fontSize=x,p=pG(e,t,k,L,u,e.wrapping,b?e.overflowStrategy:"hide")),p==null||p.width>k||p.height>L)||((g==null||g.fontSize!==m)&&(d.fontSize=m,g=pG(s,i,k,L,d,s.wrapping,b?s.overflowStrategy:"hide")),g==null))return;const T=p.height+g.height;if(!(g.width>k||T>L))return{width:Math.max(p.width,g.width),height:T+o,meta:D.meta,label:p,secondaryLabel:g}})}function uy(t,e,{padding:i},s){const a=2*i,n=Math.min(e.minimumFontSize??e.fontSize,e.fontSize),o={fontFamily:e.fontFamily,fontSize:e.fontSize,fontStyle:e.fontStyle,fontWeight:e.fontWeight};return hG(n,e.fontSize,r=>{const l=Wd(e,r),c=r===n,h=s(l+a,c),u=h.width-a,d=h.height-a;if(l>d)return;o.fontSize=r;const p=kv.wrapLines(t,{maxWidth:u,maxHeight:d,font:o,textWrap:e.wrapping,overflow:(c?e.overflowStrategy:void 0)??"hide"});if(!p.length)return;const g=jlt(p,{lineHeight:l,font:o,maxWidth:u,maxHeight:d});if(g)return[{fontSize:r,lineHeight:l,...g},h.meta]})}function dG(t){return t?.minimumFontSize!=null&&t?.fontSize&&t?.minimumFontSize>t?.fontSize}function ON(t,e,i,s,a,n){const o=e.enabled?t:void 0,r=s.enabled?i:void 0;(dG(e)||dG(s))&&zlt.warnOnce("minimumFontSize should be set to a value less than or equal to the font size");let l;o!=null&&r!=null&&(l=uG(o,e,r,s,a,n));let c;if(l==null&&o!=null&&(c=uy(o,e,a,n)),c!=null){const[u,d]=c;l={width:u.width,height:u.height,meta:d,label:u,secondaryLabel:void 0}}let h;if(l==null&&o==null&&r!=null&&(h=uy(r,s,a,n)),h!=null){const[u,d]=h;l={width:u.width,height:u.height,meta:d,label:void 0,secondaryLabel:u}}return l}function pG(t,e,i,s,a,n,o){const r=kv.wrapLines(e,{maxWidth:i,maxHeight:s,font:a,textWrap:n,overflow:o});if(!r.length)return;const l=Wd(t,a.fontSize),{width:c}=lG.measureLines(r,{font:a});return{width:c,lineHeight:l,text:r.join(`
`),height:r.length*l,fontSize:a.fontSize}}function jlt(t,{font:e,lineHeight:i=cG.defaultLineHeight,maxWidth:s,maxHeight:a=1/0}){let n=i*t.length;for(;n>a;){if(t.length===1)return;t.pop(),t[t.length-1]=kv.appendEllipsis(t.at(-1)),n=i*t.length}const o=lG.measureLines(t,{font:e});let r,l;if(o.width>s){const c=[];l=0;for(const h of o.lineMetrics){if(h.width>s){if(!c.length)return;break}c.push(h.text),l=Math.max(l,h.width)}r=kv.appendEllipsis(c.join(`
`))}else r=t.join(`
`),l=o.width;return{text:r,width:l,height:n}}var Glt=(P(),_(w)),gG=(P(),_(w)),{Validate:dy,NUMBER:Vlt,POSITIVE_NUMBER:fG,TEXT_WRAP:Ult,OVERFLOW_STRATEGY:Wlt}=gG._ModuleSupport,Hd=class extends gG._ModuleSupport.Label{constructor(){super(...arguments),this.wrapping="on-space",this.overflowStrategy="ellipsis"}};y([dy(Ult)],Hd.prototype,"wrapping",2),y([dy(Wlt)],Hd.prototype,"overflowStrategy",2),y([dy(fG,{optional:!0})],Hd.prototype,"lineHeight",2),y([dy(fG,{optional:!0})],Hd.prototype,"minimumFontSize",2);var zo=class extends Hd{constructor(){super(...arguments),this.spacing=0}};y([dy(Vlt)],zo.prototype,"spacing",2);var py=class extends Hd{},{CartesianSeriesProperties:Hlt,SeriesTooltip:Ylt,Validate:zi,AND:Klt,ARRAY:Xlt,COLOR_STRING:Zlt,COLOR_STRING_ARRAY:$lt,FUNCTION:Qlt,OBJECT:yG,POSITIVE_NUMBER:mG,RATIO:qlt,STRING:Gh,TEXT_ALIGN:Jlt,VERTICAL_ALIGN:tct}=Glt._ModuleSupport,vi=class extends Hlt{constructor(){super(...arguments),this.colorRange=["black","black"],this.stroke="black",this.strokeOpacity=1,this.strokeWidth=0,this.textAlign="center",this.verticalAlign="middle",this.itemPadding=0,this.label=new zo,this.tooltip=new Ylt}};y([zi(Gh,{optional:!0})],vi.prototype,"title",2),y([zi(Gh)],vi.prototype,"xKey",2),y([zi(Gh)],vi.prototype,"yKey",2),y([zi(Gh,{optional:!0})],vi.prototype,"colorKey",2),y([zi(Gh,{optional:!0})],vi.prototype,"xName",2),y([zi(Gh,{optional:!0})],vi.prototype,"yName",2),y([zi(Gh,{optional:!0})],vi.prototype,"colorName",2),y([zi(Klt($lt,Xlt.restrict({minLength:1})))],vi.prototype,"colorRange",2),y([zi(Zlt,{optional:!0})],vi.prototype,"stroke",2),y([zi(qlt)],vi.prototype,"strokeOpacity",2),y([zi(mG,{optional:!0})],vi.prototype,"strokeWidth",2),y([zi(Jlt)],vi.prototype,"textAlign",2),y([zi(tct)],vi.prototype,"verticalAlign",2),y([zi(mG)],vi.prototype,"itemPadding",2),y([zi(Qlt,{optional:!0})],vi.prototype,"itemStyler",2),y([zi(yG)],vi.prototype,"label",2),y([zi(yG)],vi.prototype,"tooltip",2);var{SeriesNodePickMode:xG,computeBarFocusBounds:ect,getMissCount:ict,valueProperty:EN,ChartAxisDirection:Fo,DEFAULT_CARTESIAN_DIRECTION_KEYS:sct,DEFAULT_CARTESIAN_DIRECTION_NAMES:act,createDatumId:nct,Logger:oct,ColorScale:rct,Rect:lct,PointerEvents:cct}=CN._ModuleSupport,hct=class extends CN._ModuleSupport.CartesianSeriesNodeEvent{constructor(t,e,i,s){super(t,e,i,s),this.colorKey=s.properties.colorKey}},uct={left:-.5,center:0,right:-.5},dct={top:-.5,middle:0,bottom:-.5},wN=class extends CN._ModuleSupport.CartesianSeries{constructor(t){super({moduleCtx:t,directionKeys:sct,directionNames:act,pickModes:[xG.NEAREST_NODE,xG.EXACT_SHAPE_MATCH],pathsPerSeries:[],hasMarkers:!1,hasHighlightedLabels:!0}),this.properties=new vi,this.NodeEvent=hct,this.colorScale=new rct}async processData(t){const e=this.axes[Fo.X],i=this.axes[Fo.Y];if(!e||!i||!this.properties.isValid()||!this.data?.length)return;const{xKey:s,yKey:a,colorRange:n,colorKey:o}=this.properties,r=this.axes[Fo.X]?.scale,l=this.axes[Fo.Y]?.scale,{xScaleType:c,yScaleType:h}=this.getScaleInformation({xScale:r,yScale:l}),u=this.colorScale.type,{dataModel:d,processedData:p}=await this.requestDataModel(t,this.data,{props:[EN(s,c,{id:"xValue"}),EN(a,h,{id:"yValue"}),...o?[EN(o,u,{id:"colorValue"})]:[]]});if(this.isColorScaleValid()){const g=d.resolveProcessedDataIndexById(this,"colorValue");this.colorScale.domain=p.domain.values[g],this.colorScale.range=n,this.colorScale.update()}}isColorScaleValid(){const{colorKey:t}=this.properties;if(!t)return!1;const{dataModel:e,processedData:i}=this;if(!e||!i)return!1;const s=e.resolveProcessedDataIndexById(this,"colorValue"),a=i.rawData.length,n=ict(this,i.defs.values[s].missing);return!(a===0||a===n)}getSeriesDomain(t){const{dataModel:e,processedData:i}=this;return!e||!i?[]:t===Fo.X?e.getDomain(this,"xValue","value",i):e.getDomain(this,"yValue","value",i)}getSeriesRange(t,e){return[NaN,NaN]}createNodeData(){const{data:t,visible:e,axes:i,dataModel:s,processedData:a}=this,n=i[Fo.X],o=i[Fo.Y];if(!(t&&s&&a?.rawData.length&&e&&n&&o))return;if(n.type!=="category"||o.type!=="category"){oct.warnOnce(`Heatmap series expected axes to have "category" type, but received "${n.type}" and "${o.type}" instead.`);return}const{xKey:r,xName:l,yKey:c,yName:h,colorKey:u,colorName:d,textAlign:p,verticalAlign:g,itemPadding:f,label:x}=this.properties,m=s.resolveColumnById(this,"xValue",a),b=s.resolveColumnById(this,"yValue",a),v=u?s.resolveColumnById(this,"colorValue",a):void 0,S=n.scale,D=o.scale,k=(S.bandwidth??0)/2,L=(D.bandwidth??0)/2,T=[],N=[],C=S.bandwidth??10,O=D.bandwidth??10,R=(C-2*f)*uct[p],E=(O-2*f)*dct[g],z=()=>({width:C,height:O,meta:null});return a.rawData.forEach((F,G)=>{const j=m[G],V=b[G],W=S.convert(j)+k,B=D.convert(V)+L,U=v?.[G],H=U==null?void 0:this.getLabelText(x,{value:U,datum:F,colorKey:u,colorName:d,xKey:r,yKey:c,xName:l,yName:h}),K=ON(H,this.properties.label,void 0,this.properties.label,{padding:f},z),X={x:W,y:B,size:0};if(T.push({series:this,itemId:c,datumIndex:G,yKey:c,xKey:r,xValue:j,yValue:V,colorValue:U,datum:F,point:X,width:C,height:O,midPoint:{x:W,y:B},missing:U==null}),K?.label!=null){const{text:Q,fontSize:$,lineHeight:Z,height:Y}=K.label,{fontStyle:tt,fontFamily:q,fontWeight:it,color:at}=this.properties.label,rt=X.x+R*(C-2*f),ot=X.y+E*(O-2*f)-(K.height-Y)*.5;N.push({series:this,itemId:c,datum:F,text:Q,fontSize:$,lineHeight:Z,fontStyle:tt,fontFamily:q,fontWeight:it,color:at,textAlign:p,verticalAlign:g,x:rt,y:ot})}}),{itemId:this.properties.yKey??this.id,nodeData:T,labelData:N,scales:this.calculateScaling(),visible:this.visible}}nodeFactory(){return new lct}update(t){return this.ctx.animationManager.skipCurrentBatch(),super.update(t)}updateDatumSelection(t){const{nodeData:e,datumSelection:i}=t,s=e??[];return i.update(s)}getItemBaseStyle(t){const{properties:e}=this,i=t?e.highlightStyle.item:void 0,s=this.getStrokeWidth(e.strokeWidth);return{fill:i?.fill,fillOpacity:i?.fillOpacity??1,stroke:i?.stroke??e.stroke,strokeWidth:i?.strokeWidth??s,strokeOpacity:i?.strokeOpacity??e.strokeOpacity}}getItemStyleOverrides(t,e,i,s,a){const{id:n,properties:o}=this,{xKey:r,yKey:l,colorRange:c,itemStyler:h}=o,u=this.isColorScaleValid()&&i!=null?this.colorScale.convert(i):c[0];let d=s.fill==null?{fill:u}:void 0;if(h!=null){d??(d={});const p=this.cachedDatumCallback(nct(t,a?"highlight":"node"),()=>h({seriesId:n,datum:e,xKey:r,yKey:l,highlighted:a,fill:u,...s}));Object.assign(d,p)}return d}updateDatumNodes(t){const{isHighlight:e}=t,i=this.axes[Fo.X],[s,a]=i?.visibleRange??[],o=!(s!==0||a!==1),r=this.getItemBaseStyle(e);t.datumSelection.each((l,c)=>{const{datumIndex:h,colorValue:u,datum:d,point:p,width:g,height:f}=c,x=this.getItemStyleOverrides(String(h),d,u,r,e);l.crisp=o,l.x=Math.floor(p.x-g/2),l.y=Math.floor(p.y-f/2),l.width=Math.ceil(g),l.height=Math.ceil(f),l.fill=x?.fill??r.fill,l.fillOpacity=x?.fillOpacity??r.fillOpacity,l.stroke=x?.stroke??r.stroke,l.strokeWidth=x?.strokeWidth??r.strokeWidth,l.strokeOpacity=x?.strokeOpacity??r.strokeOpacity})}updateLabelSelection(t){const{labelData:e,labelSelection:i}=t,{enabled:s}=this.properties.label,a=s?e:[];return i.update(a)}updateLabelNodes(t){t.labelSelection.each((e,i)=>{e.text=i.text,e.fontSize=i.fontSize,e.lineHeight=i.lineHeight,e.fontStyle=i.fontStyle,e.fontFamily=i.fontFamily,e.fontWeight=i.fontWeight,e.fill=i.color,e.textAlign=i.textAlign,e.textBaseline=i.verticalAlign,e.x=i.x,e.y=i.y,e.pointerEvents=cct.None})}getTooltipContent(t){const{id:e,dataModel:i,processedData:s,axes:a,properties:n,colorScale:o}=this,{xKey:r,xName:l,yKey:c,yName:h,colorKey:u,colorName:d,colorRange:p,title:g,legendItemName:f,tooltip:x}=n,m=a[Fo.X],b=a[Fo.Y];if(!i||!s||s.rawData.length===0||!m||!b)return;const{datumIndex:v}=t,S=s.rawData[v],D=i.resolveColumnById(this,"xValue",s)[v],k=i.resolveColumnById(this,"yValue",s)[v],L=u!=null&&this.isColorScaleValid()?i.resolveColumnById(this,"colorValue",s)[v]:void 0;if(D==null)return;const T=[];let N;L==null?N=p[0]:(N=o.convert(L),T.push({label:d,fallbackLabel:u,value:String(L)})),T.push({label:l,fallbackLabel:r,value:m.formatDatum(D)},{label:h,fallbackLabel:c,value:b.formatDatum(k)});const C=N!=null?{marker:{shape:"square",fill:N,fillOpacity:1,stroke:void 0,strokeWidth:0,strokeOpacity:1}}:void 0,O=this.getItemBaseStyle(!1);return Object.assign(O,this.getItemStyleOverrides(String(v),S,L,O,!1)),x.formatTooltip({title:g??f,symbol:C,data:T},{seriesId:e,datum:S,title:g,xKey:r,xName:l,yKey:c,yName:h,colorKey:u,colorName:d,...O})}getLegendData(t){return t!=="gradient"||!this.properties.isValid()||!this.isColorScaleValid()||!this.dataModel?[]:[{legendType:"gradient",enabled:this.visible,seriesId:this.id,colorName:this.properties.colorName,colorDomain:this.processedData.domain.values[this.dataModel.resolveProcessedDataIndexById(this,"colorValue")],colorRange:this.properties.colorRange}]}isLabelEnabled(){return this.properties.label.enabled&&!!this.properties.colorKey}getBandScalePadding(){return{inner:0,outer:0}}computeFocusBounds({datumIndex:t}){const e=this.contextNodeData?.nodeData[t];if(e===void 0)return;const{width:i,height:s,midPoint:a}=e,n={x:a.x-i/2,y:a.y-s/2,width:i,height:s};return ect(n)}};wN.className="HeatmapSeries",wN.type="heatmap";var pct=(P(),_(w)),{ThemeSymbols:{DEFAULT_FONT_FAMILY:gct,DEFAULT_LABEL_COLOUR:fct},ThemeConstants:{FONT_SIZE:yct}}=pct._ModuleSupport,mct={series:{label:{enabled:!1,color:fct,fontSize:yct.SMALL,fontFamily:gct,wrapping:"on-space",overflowStrategy:"ellipsis"},itemPadding:3},gradientLegend:{enabled:!0}},{ThemeSymbols:{DEFAULT_DIVERGING_SERIES_COLOR_RANGE:xct,DEFAULT_BACKGROUND_COLOUR:bct},ThemeConstants:{CARTESIAN_AXIS_TYPE:bG,CARTESIAN_POSITION:SG}}=Plt._ModuleSupport,Sct={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["cartesian"],identifier:"heatmap",moduleFactory:t=>new wN(t),tooltipDefaults:{range:"exact"},defaultAxes:[{type:bG.CATEGORY,position:SG.LEFT},{type:bG.CATEGORY,position:SG.BOTTOM}],themeTemplate:mct,paletteFactory:({takeColors:t,colorsCount:e,userPalette:i,themeTemplateParameters:s})=>{const a=s.get(xct),n=s.get(bct),o=(Array.isArray(n)?n[0]:n)??"white",{fills:r,strokes:l}=t(e);return{stroke:i==="inbuilt"?o:l[0],colorRange:i==="inbuilt"?a:[r[0],r[1]]}}},vct=(P(),_(w)),vG=(P(),_(w)),pbt=(P(),_(w)),Mct=1e3,MG=10;function DG(t,e,i,s,a,n){const o=t[n];if(o==null)return!1;const r=lv(o,e,i),l=cv(r,a);return n===s[l+us]||n===s[l+Qs]||n===s[l+qs]||n===s[l+Js]}function Dct(t,e,i){if(t.length<Mct)return;const[s,a]=qf(i);let n=Qf(t,MG);const{indexData:o,valueData:r}=Jf(t,e,e,s,a,n);let l=[];for(let h=0;h<t.length;h+=1)DG(t,s,a,o,n,h)&&l.push(h);const c=[{maxRange:n,indices:l}];for(;l.length>MG&&n>64;)({maxRange:n}=ty(o,r,n,{inPlace:!0})),l=l.filter(DG.bind(null,t,s,a,o,n)),c.push({maxRange:n,indices:l});return c.reverse(),c}var{ChartAxisDirection:Act,ContinuousScale:Ict,OrdinalTimeScale:kct}=vG._ModuleSupport,Lct=class extends vG._ModuleSupport.LineSeries{aggregateData(t,e){if(e.rawData.length===0)return;const i=this.axes[Act.X];if(i==null||!(Ict.is(i.scale)||kct.is(i.scale)))return;const s=t.resolveColumnById(this,"xValue",e),a=t.resolveColumnById(this,"yValueRaw",e),n=t.getDomain(this,"xValue","value",e);return Dct(s,a,n)}},{LineSeriesModule:Tct}=vct._ModuleSupport,Nct={...Tct,type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["cartesian"],identifier:"line",moduleFactory:t=>new Lct(t)},Cct=(P(),_(w)),Oct=(P(),_(w)),{ColorScale:Ect}=Oct._ModuleSupport;function AG(t){if(t==null)return[];const e=new Ect;e.domain=[0,1],e.range=t;const i=5;return Array.from({length:5},(s,a)=>e.convert(a/(i-1)))}var gy=(P(),_(w)),IG={fromFn:()=>({opacity:0,phase:"initial"}),toFn:()=>({opacity:1})};function kG(t,e){if(t==null)return"";if(e==null)return String(t);const[i,s]=e.scale.domain,a=i!==0?Math.ceil(Math.log10(Math.abs(i))):0,n=s!==0?Math.ceil(Math.log10(Math.abs(s))):0,o=Math.max(2-Math.max(a,n),0);return t.toFixed(o)}function fy(t,e,i){if(e.text!=null)return e.text;const s=i??e.value,a=e?.formatter?.({seriesId:t.id,datum:void 0,value:s});if(a!=null)return String(a)}var wct=(P(),_(w)),RN=class extends wct.Marker{updatePath(){const{x:t,y:e,path:i,size:s}=this;i.clear(),i.moveTo(t,e-s/2),i.lineTo(t,e+s/2)}};RN.className="LineMarker";var Rct=(P(),_(w)),{BaseProperties:_ct,Validate:LG,COLOR_STRING:Pct,NUMBER:Bct,Logger:zct,ColorScale:Fct}=Rct._ModuleSupport,Yd=class extends _ct{constructor(){super(...arguments),this.color="black"}};y([LG(Bct,{optional:!0})],Yd.prototype,"stop",2),y([LG(Pct,{optional:!0})],Yd.prototype,"color",2);function jct(t){let e;for(const{stop:i}of t)if(i!=null){if(e!=null&&i<e)return!1;e=i}return!0}function TG(t){return t.flatMap((e,i)=>{const{offset:s}=e,a=t.at(i+1)?.color;return a!=null?[e,{offset:s,color:a}]:[e]})}function Gct(t,e){const i=e==="discrete"?1:0,s=t.map((a,n,{length:o})=>({offset:(n+i)/(o-1+i),color:a}));return e==="discrete"?TG(s):s}function NG(t,e,i,s){if(t.length===0)return Gct(e,s);if(!jct(t))return zct.warnOnce("[fills] must have the stops defined in ascending order"),[];const a=Math.min(...i),n=Math.max(...i),o=s==="discrete",r=new Float64Array(t.length);let l=0,c=-1;for(let p=0;p<t.length;p+=1){const g=t[p];if(p>=c){c=t.length-1;for(let m=p+1;m<t.length;m+=1)if(t[m].stop!=null){c=m;break}}let{stop:f}=g;if(f==null){const m=t[l].stop,b=t[c].stop,v=m??a,S=b??n,D=o&&m==null?1:0;f=v+(S-v)*(p-l+D)/(c-l+D)}else l=p;const x=(f-a)/(n-a);r[p]=x}let h=t.find(p=>p.color!=null)?.color,u;const d=t.map(({color:p},g)=>{const f=r[g];return p!=null?h=p:h!=null?p=h:(u==null&&(u=new Fct,u.domain=[0,1],u.range=e),p=u.convert(f)),{offset:f,color:p}});return s==="discrete"?TG(d):d}var Vct=(P(),_(w)),Uct=(P(),_(w)),{MARKER_SHAPE:Wct,UNION:_N,OR:Hct}=Uct._ModuleSupport,Lv=_N(["continuous","discrete"],"a fill mode"),CG=Hct(Wct,_N(["line"],"a marker shape")),OG=_N(["container","item"],"a corner mode"),Yct=(P(),_(w)),{BaseProperties:EG,Validate:Kd,OBJECT:Kct,BOOLEAN:Xct,NUMBER:PN,NUMBER_ARRAY:Zct,Logger:$ct}=Yct._ModuleSupport,Tv=class extends EG{getSegments(t,e){const{values:i,step:s,count:a}=this,n=Math.min(...t.domain),o=Math.max(...t.domain);let r;if(i!=null){const l=i.filter(c=>c>n&&c<o).sort((c,h)=>c-h);r=[n,...l,o]}else if(s!=null){const l=[];for(let c=n;c<o;c+=s)l.push(c);l.push(o),r=l}else if(a!=null){const l=a+1;r=Array.from({length:l+1},(c,h)=>h/l*(o-n)+n)}else{const l=t.ticks?.().filter(c=>c>n&&c<o);r=l!=null?[n,...l,o]:void 0}return r!=null&&r.length>e&&($ct.warnOnce("the configured segmentation results in more than 1 item per pixel, ignoring. Supply a segmentation configuration that results in larger segments or omit this configuration"),r=void 0),r??(r=[n,o]),r}};y([Kd(Zct,{optional:!0})],Tv.prototype,"values",2),y([Kd(PN,{optional:!0})],Tv.prototype,"step",2),y([Kd(PN,{optional:!0})],Tv.prototype,"count",2);var yy=class extends EG{constructor(){super(...arguments),this.enabled=!1,this.interval=new Tv,this.spacing=0}};y([Kd(Xct)],yy.prototype,"enabled",2),y([Kd(Kct)],yy.prototype,"interval",2),y([Kd(PN)],yy.prototype,"spacing",2);var{BaseProperties:BN,SeriesTooltip:Qct,SeriesProperties:qct,PropertiesArray:zN,Validate:yt,BOOLEAN:wG,COLOR_STRING:Vh,COLOR_STRING_ARRAY:Jct,FUNCTION:tht,LINE_DASH:FN,NUMBER:Xd,OBJECT_ARRAY:jN,OBJECT:Uh,POSITIVE_NUMBER:jo,RATIO:Wh,STRING:RG,UNION:GN,Label:eht}=Vct._ModuleSupport,iht=GN(["before","after","middle"],"a placement"),sht=GN(["inside-start","outside-start","inside-end","outside-end","inside-center","bar-inside","bar-inside-end","bar-outside-end","bar-end"],"an placement"),aht=GN(["horizontal","vertical"],"an orientation"),_G=class extends eht{};y([yt(Xd,{optional:!0})],_G.prototype,"spacing",2);var Fi=class extends BN{constructor(){super(...arguments),this.value=0,this.label=new _G}};y([yt(RG,{optional:!0})],Fi.prototype,"text",2),y([yt(Xd)],Fi.prototype,"value",2),y([yt(CG,{optional:!0})],Fi.prototype,"shape",2),y([yt(iht,{optional:!0})],Fi.prototype,"placement",2),y([yt(Xd,{optional:!0})],Fi.prototype,"spacing",2),y([yt(jo,{optional:!0})],Fi.prototype,"size",2),y([yt(Xd,{optional:!0})],Fi.prototype,"rotation",2),y([yt(Vh,{optional:!0})],Fi.prototype,"fill",2),y([yt(Wh,{optional:!0})],Fi.prototype,"fillOpacity",2),y([yt(Vh,{optional:!0})],Fi.prototype,"stroke",2),y([yt(jo,{optional:!0})],Fi.prototype,"strokeWidth",2),y([yt(Wh,{optional:!0})],Fi.prototype,"strokeOpacity",2),y([yt(FN,{optional:!0})],Fi.prototype,"lineDash",2),y([yt(jo,{optional:!0})],Fi.prototype,"lineDashOffset",2),y([yt(Uh)],Fi.prototype,"label",2);var Ta=class extends BN{constructor(){super(...arguments),this.enabled=!0,this.thicknessRatio=1,this.fills=new zN(Yd),this.fillMode="continuous",this.fillOpacity=1,this.stroke="black",this.strokeWidth=0,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0}};y([yt(wG)],Ta.prototype,"enabled",2),y([yt(jo,{optional:!0})],Ta.prototype,"thickness",2),y([yt(Wh)],Ta.prototype,"thicknessRatio",2),y([yt(jN)],Ta.prototype,"fills",2),y([yt(Lv)],Ta.prototype,"fillMode",2),y([yt(Vh,{optional:!0})],Ta.prototype,"fill",2),y([yt(Wh)],Ta.prototype,"fillOpacity",2),y([yt(Vh)],Ta.prototype,"stroke",2),y([yt(jo)],Ta.prototype,"strokeWidth",2),y([yt(Wh)],Ta.prototype,"strokeOpacity",2),y([yt(FN)],Ta.prototype,"lineDash",2),y([yt(jo)],Ta.prototype,"lineDashOffset",2);var Pn=class extends BN{constructor(){super(...arguments),this.fills=new zN(Yd),this.fillMode="continuous",this.fillOpacity=1,this.stroke="black",this.strokeWidth=0,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.defaultFill="black"}};y([yt(jN)],Pn.prototype,"fills",2),y([yt(Lv)],Pn.prototype,"fillMode",2),y([yt(Vh,{optional:!0})],Pn.prototype,"fill",2),y([yt(Wh)],Pn.prototype,"fillOpacity",2),y([yt(Vh)],Pn.prototype,"stroke",2),y([yt(jo)],Pn.prototype,"strokeWidth",2),y([yt(Wh)],Pn.prototype,"strokeOpacity",2),y([yt(FN)],Pn.prototype,"lineDash",2),y([yt(jo)],Pn.prototype,"lineDashOffset",2),y([yt(Vh)],Pn.prototype,"defaultFill",2);var Nv=class extends zo{constructor(){super(...arguments),this.placement="inside-center",this.avoidCollisions=!0}};y([yt(RG,{optional:!0})],Nv.prototype,"text",2),y([yt(sht)],Nv.prototype,"placement",2),y([yt(wG)],Nv.prototype,"avoidCollisions",2);var ps=class extends qct{constructor(){super(...arguments),this.value=0,this.segmentation=new yy,this.defaultColorRange=[],this.targets=new zN(Fi),this.defaultTarget=new Fi,this.direction="vertical",this.thickness=1,this.cornerRadius=0,this.cornerMode="container",this.margin=0,this.scale=new Pn,this.bar=new Ta,this.label=new Nv,this.tooltip=new Qct}};y([yt(Xd)],ps.prototype,"value",2),y([yt(Uh)],ps.prototype,"segmentation",2),y([yt(Jct)],ps.prototype,"defaultColorRange",2),y([yt(jN)],ps.prototype,"targets",2),y([yt(Uh)],ps.prototype,"defaultTarget",2),y([yt(aht)],ps.prototype,"direction",2),y([yt(jo)],ps.prototype,"thickness",2),y([yt(jo)],ps.prototype,"cornerRadius",2),y([yt(OG)],ps.prototype,"cornerMode",2),y([yt(Xd)],ps.prototype,"margin",2),y([yt(Uh)],ps.prototype,"scale",2),y([yt(Uh)],ps.prototype,"bar",2),y([yt(tht,{optional:!0})],ps.prototype,"itemStyler",2),y([yt(Uh)],ps.prototype,"label",2),y([yt(Uh)],ps.prototype,"tooltip",2);var nht=(P(),_(w)),{CachedTextMeasurerPool:oht,BBox:rht}=nht._ModuleSupport;function VN(t){const{x0:e,y0:i,x1:s,y1:a,horizontalInset:n,verticalInset:o}=t,r=Math.min(e,s)+n,l=Math.min(i,a)+o,c=Math.max(Math.abs(s-e)-2*n,0),h=Math.max(Math.abs(a-i)-2*o,0);return{x:r,y:l,width:c,height:h}}function lht(t,e){if(e==null)return!0;const i=VN(t),s=1e-6,a=i.x+s,n=i.y+s,o=i.x+i.width-s,r=i.y+i.height-s,l=e.x,c=e.x+e.width,h=e.y,u=e.y+e.height;return Math.max(a,l)<=Math.min(o,c)&&Math.max(n,h)<=Math.min(r,u)}function UN(t){const{clipX0:e,clipX1:i,clipY0:s,clipY1:a}=t;return e!=null&&i!=null||s!=null&&a!=null}function cht(t){if(!UN(t))return;const{x0:e,y0:i,x1:s,y1:a}=t,{x:n,y:o,width:r,height:l}=VN(t);let{clipX0:c,clipX1:h,clipY0:u,clipY1:d}=t;(c==null||h==null)&&(c=e,h=s),(u==null||d==null)&&(u=i,d=a);const p=Math.min(c,h),g=Math.min(u,d),f=Math.abs(h-c),x=Math.abs(d-u);return c=Math.max(n,p),u=Math.max(o,g),h=Math.min(n+r,p+f),d=Math.min(o+l,g+x),new rht(Math.min(c,h),Math.min(u,d),Math.abs(h-c),Math.abs(d-u))}function PG(t,e){const i=t?"initial":"update";return{node:{fromFn(a,n){const o=a.previousDatum;let{x0:r,y0:l,x1:c,y1:h,clipX0:u,clipY0:d,clipX1:p,clipY1:g}=o??n;const{horizontalInset:f,verticalInset:x}=n,m=o!=null&&UN(o),b=UN(n);return m&&b||(!m&&b?({x0:r,y0:l,x1:c,y1:h,clipX0:u,clipY0:d,clipX1:p,clipY1:g}=n,t&&(e?p=n.clipX0:g=n.clipY0)):m&&!b?({x0:r,y0:l,x1:c,y1:h}=n,u=void 0,d=void 0,p=void 0,g=void 0):t&&(e?c=r:h=l)),{x0:r,y0:l,x1:c,y1:h,clipX0:u,clipY0:d,clipX1:p,clipY1:g,horizontalInset:f,verticalInset:x,phase:i}},toFn(a,n){const{x0:o,y0:r,x1:l,y1:c,clipX0:h,clipY0:u,clipX1:d,clipY1:p,horizontalInset:g,verticalInset:f}=n;return{x0:o,y0:r,x1:l,y1:c,clipX0:h,clipY0:u,clipX1:d,clipY1:p,horizontalInset:g,verticalInset:f}},applyFn(a,n){a.setProperties(Cv(a,n))}}}}function Cv(t,e){const{x:i,y:s,width:a,height:n}=VN(e),o=cht(e),r=lht(e,o);return{x:i,y:s,width:a,height:n,clipBBox:o,visible:r}}var hht={Before:"right",Center:"center",After:"left"},uht={Before:"top",Center:"middle",After:"bottom"},dht={Before:-1,Center:-.5,After:0},pht={Before:0,Center:-.5,After:-1};function ght(t,e,i,s,a){const{scale:n,bar:o}=s,{padding:r,horizontal:l}=i;e.each((c,h)=>{const u=fy(t,h,a?.label),d=()=>({width:n.width,height:n.height,meta:null});let p;const g=h.avoidCollisions&&h.placement!=="outside-start"&&h.placement!=="outside-end";if(u==null)return;if(g)p=uy(u,h,{padding:r},d)?.[0];else{const E={fontSize:h.fontSize,fontStyle:h.fontStyle,fontWeight:h.fontWeight,fontFamily:h.fontFamily,lineHeight:h.lineHeight},{width:z,height:F}=oht.measureText(u,{font:E});p={text:u,fontSize:h.fontSize,lineHeight:Wd(h,h.fontSize),width:z,height:F}}if(p==null){c.visible=!1;return}const f=l?n.x:n.y+n.height,x=l?n.x+n.width:n.y,m=l?o.x:o.y+o.height,b=l?o.x+o.width:o.y,v=h.spacing*(l?1:-1);let S,D,k,L;switch(h.placement){case"outside-start":S=-1/0,D=1/0,k=f-v,L="Before";break;case"outside-end":S=-1/0,D=1/0,k=x+v,L="After";break;case"inside-start":S=f,D=b,k=f+v,L="After";break;case"inside-end":S=b,D=x,k=x-v,L="Before";break;case"inside-center":S=f,D=x,k=(f+x)/2,L="Center";break;case"bar-inside":S=m,D=b,k=(m+b)/2,L="Center";break;case"bar-inside-end":S=m,D=b,k=b-v,L="Before";break;case"bar-outside-end":S=b,D=x,k=b+v,L="After";break;case"bar-end":S=-1/0,D=1/0,k=b,L="Center";break}const T=l?k:n.x+n.width/2,N=l?n.y+n.height/2:k;let C,O;l?(C=T+dht[L]*p.width,O=C+p.width):(C=N+pht[L]*p.height,O=C+p.height);const R=Math.min(C,O)>=Math.min(S,D)&&Math.max(C,O)<=Math.max(S,D);if(h.avoidCollisions&&!R){c.visible=!1;return}c.visible=!0,c.text=p.text,c.fontSize=p.fontSize,c.lineHeight=p.lineHeight,c.textAlign=l?hht[L]:"center",c.textBaseline=l?"middle":uht[L],c.x=T,c.y=N})}var{fromToMotion:WN,resetMotion:fht,SeriesNodePickMode:BG,StateMachine:yht,createDatumId:zG,ChartAxisDirection:Bn,CachedTextMeasurerPool:mht,toRadians:xht,BBox:Ov,Group:Zd,PointerEvents:HN,Selection:$d,Rect:bht,Text:FG,LinearGradient:Sht,getMarker:vht,easing:Mht}=gy._ModuleSupport,Dht={before:180,middle:0,after:0},Aht={before:90,middle:0,after:-90},YN=class extends gy._ModuleSupport.Series{constructor(t){super({moduleCtx:t,useLabelLayer:!0,pickModes:[BG.EXACT_SHAPE_MATCH,BG.NEAREST_NODE]}),this.canHaveAxes=!0,this.properties=new ps,this.originX=0,this.originY=0,this.scaleGroup=this.contentGroup.appendChild(new Zd({name:"scaleGroup"})),this.itemGroup=this.contentGroup.appendChild(new Zd({name:"itemGroup"})),this.itemTargetGroup=this.contentGroup.appendChild(new Zd({name:"itemTargetGroup"})),this.itemTargetLabelGroup=this.contentGroup.appendChild(new Zd({name:"itemTargetLabelGroup"})),this.itemLabelGroup=this.contentGroup.appendChild(new Zd({name:"itemLabelGroup"})),this.highlightTargetGroup=this.highlightGroup.appendChild(new Zd({name:"itemTargetLabelGroup"})),this.scaleSelection=$d.select(this.scaleGroup,()=>this.nodeFactory()),this.datumSelection=$d.select(this.itemGroup,()=>this.nodeFactory()),this.targetSelection=$d.select(this.itemTargetGroup,e=>this.markerFactory(e)),this.targetLabelSelection=$d.select(this.itemTargetLabelGroup,FG),this.labelSelection=$d.select(this.itemLabelGroup,FG),this.highlightTargetSelection=$d.select(this.highlightTargetGroup,e=>this.markerFactory(e)),this.nodeDatum={series:this,datum:{}},this.animationState=new yht("empty",{empty:{update:{target:"ready",action:()=>this.animateEmptyUpdateReady()},reset:"empty",skip:"ready"},ready:{updateData:"waiting",clear:"clearing",resize:()=>this.animateReadyResize(),reset:"empty",skip:"ready"},waiting:{update:{target:"ready",action:()=>this.animateWaitingUpdateReady()},reset:"empty",skip:"ready"},clearing:{update:{target:"empty"},reset:"empty",skip:"ready"}}),this.itemGroup.pointerEvents=HN.None,this.itemTargetLabelGroup.pointerEvents=HN.None,this.itemLabelGroup.pointerEvents=HN.None}get horizontal(){return this.properties.direction==="horizontal"}get thickness(){return this.properties.thickness}computeInset(t,e){const{label:i}=this.properties;let s;switch(i.placement){case"outside-start":s=1;break;case"outside-end":s=-1;break;default:return 0}const a=i.text?.split(`
`);let n;if(t===Bn.Y)n=Wd(i,i.fontSize)*(a?.length??1);else{const o=i.getFont();n=(a??e.map(l=>fy(this,this.labelDatum(i,l))??"")).reduce((l,c)=>{const{width:h}=mht.measureText(c,{font:o});return Math.max(l,h)},0)}return s*(i.spacing+n)}get hasData(){return!0}nodeFactory(){const t=new bht;return t.crisp=!0,t}markerFactory({shape:t}){const e=t!=="line"?vht(t):RN,i=new e;return i.size=1,i}processData(){this.nodeDataRefresh=!0,this.animationState.transition("updateData")}formatLabel(t){const{axes:e,horizontal:i}=this,s=i?e[Bn.X]:e[Bn.Y];return kG(t,s)}createLinearGradient(t,e){const{properties:i,originX:s,originY:a,horizontal:n,axes:o}=this,{thickness:r,defaultColorRange:l}=i,c=n?o[Bn.X]:o[Bn.Y],{domain:h,range:u}=c.scale,d=u[1]-u[0],p=NG(t,l,h,e);return new Sht("oklch",p,n?90:0,new Ov(s,a,n?d:r,n?r:d))}getTargets(){const{properties:t}=this,e=t.defaultTarget;return Array.from(t.targets).map(i=>{const{text:s=e.text,value:a=e.value??0,shape:n=e.shape??"triangle",rotation:o=e.rotation??0,strokeWidth:r=e.strokeWidth??0,placement:l=e.placement??"middle",spacing:c=e.spacing??0,size:h=e.size??0,fill:u=e.fill??"black",fillOpacity:d=e.fillOpacity??1,stroke:p=e.stroke??"black",strokeOpacity:g=e.strokeOpacity??1,lineDash:f=e.lineDash??[0],lineDashOffset:x=e.lineDashOffset??0}=i,{enabled:m=e.label.enabled,color:b=e.label.color??"black",fontStyle:v=e.label.fontStyle??"normal",fontWeight:S=e.label.fontWeight??"normal",fontSize:D=e.label.fontSize,fontFamily:k=e.label.fontFamily,spacing:L=e.label.spacing??0}=i.label;return{text:s,value:a,shape:n,placement:l,spacing:c,size:h,rotation:o,fill:u,fillOpacity:d,stroke:p,strokeWidth:r,strokeOpacity:g,lineDash:f,lineDashOffset:x,label:{enabled:m,color:b,fontStyle:v,fontWeight:S,fontSize:D,fontFamily:k,spacing:L}}})}getTargetPoint(t){const e=this.axes[Bn.X],i=this.axes[Bn.Y];if(e==null||i==null)return{x:0,y:0};const{properties:s,originX:a,originY:n,horizontal:o}=this,{thickness:r}=s,{value:l,placement:c,spacing:h,size:u}=t,d=o?e:i,p=d.scale.convert(l)-d.scale.range[0];let g;switch(c){case"before":g=-(h+u/2);break;case"after":g=r+h+u/2;break;default:g=r/2;break}return{x:a+e.range[0]+(o?p:g),y:n+i.range[0]+(o?g:p)}}getTargetLabel(t){const{size:e,placement:i,label:s}=t,{spacing:a,color:n,fontStyle:o,fontWeight:r,fontSize:l,fontFamily:c}=s,h=void 0,u=e/2+a;let d,p,g=0,f=0;return this.horizontal?(d="center",i==="after"?(p="top",f=u):(p="bottom",f=-u)):(p="middle",i==="before"?(d="right",g=-u):(d="left",g=u)),{offsetX:g,offsetY:f,fill:n,textAlign:d,textBaseline:p,fontStyle:o,fontWeight:r,fontSize:l,fontFamily:c,lineHeight:h}}labelDatum(t,e){const{placement:i,avoidCollisions:s,spacing:a,text:n,color:o,fontSize:r,minimumFontSize:l,fontStyle:c,fontWeight:h,fontFamily:u,lineHeight:d,wrapping:p,overflowStrategy:g,formatter:f=x=>this.formatLabel(x.value)}=t;return{placement:i,avoidCollisions:s,spacing:a,text:n,value:e,fill:o,fontSize:r,minimumFontSize:l,fontStyle:c,fontWeight:h,fontFamily:u,lineHeight:d,wrapping:p,overflowStrategy:g,formatter:f}}createNodeData(){const{id:t,properties:e,originX:i,originY:s,horizontal:a}=this;if(!e.isValid())return;const{value:n,segmentation:o,thickness:r,cornerRadius:l,cornerMode:c,bar:h,scale:u,label:d}=e,p=this.getTargets(),g=this.axes[Bn.X],f=this.axes[Bn.Y];if(g==null||f==null)return;const x=a?g:f,m=g.scale,b=f.scale,v=x.scale;let{domain:S}=x.scale;x.isReversed()&&(S=S.slice().reverse());const D=[],k=[],L=[],T=[],[N,C]=v.range,O=Math.abs(C-N);let[R,E]=g.range;g.isReversed()&&([E,R]=[R,E]);let[z,F]=f.range;f.isReversed()&&([F,z]=[z,F]);const G=a?m.convert(n):E,j=a?F:b.convert(n),V=o.enabled?o.spacing/2:0,W=a?V:0,B=a?0:V,U=Math.min(h.thickness??Math.round(h.thicknessRatio*r),r),H=-(r-U)/2,K=a?0:H,X=a?H:0,Q=c==="item",$=Math.ceil(O);let Z=o.enabled?o.interval.getSegments(v,$):void 0;const Y=h.fill??this.createLinearGradient(h.fills,h.fillMode),tt=u.fill??(h.enabled&&u.fills.length===0?u.defaultFill:void 0)??this.createLinearGradient(u.fills,u.fillMode);if(Z==null&&Q){const it=Math.min(...S),at=Math.max(...S),rt={value:n,segmentStart:it,segmentEnd:at};if(h.enabled){const Dt=Math.min(l,U/2,O/2)*(x.isReversed()?-1:1),qt=a?Dt:0,Me=a?0:Dt;D.push({series:this,itemId:"value",datum:rt,type:0,x0:i+R-qt-K,y0:s+z-Me-X,x1:i+G+qt+K,y1:s+j+Me+X,clipX0:void 0,clipY0:void 0,clipX1:void 0,clipY1:void 0,topLeftCornerRadius:l,topRightCornerRadius:l,bottomRightCornerRadius:l,bottomLeftCornerRadius:l,fill:Y,horizontalInset:W,verticalInset:B})}const et=Math.min(l,r/2,O/2)*(x.isReversed()?-1:1),gt=a?et:0,dt=a?0:et;T.push({series:this,itemId:"scale",datum:rt,type:0,x0:i+R-gt,y0:s+z-dt,x1:i+E+gt,y1:s+F+dt,clipX0:void 0,clipY0:void 0,clipX1:void 0,clipY1:void 0,topLeftCornerRadius:l,topRightCornerRadius:l,bottomRightCornerRadius:l,bottomLeftCornerRadius:l,fill:tt,horizontalInset:W,verticalInset:B})}else{Z??(Z=S);const it=i+R-K,at=s+z-X,rt=i+G+K,ot=s+j+X;for(let et=0;et<Z.length-1;et+=1){const gt=Z[et+0],dt=Z[et+1],ft={value:n,segmentStart:gt,segmentEnd:dt},Dt=et===0,qt=et===Z.length-2,Me=v.convert(gt),ri=v.convert(dt),rn=Q||Dt?l:0,ea=Q||qt?l:0,Ai=a?rn:ea,Wo=ea,ia=a?ea:rn,SM=rn;h.enabled&&D.push({series:this,itemId:`value-${et}`,datum:ft,type:0,x0:i+(a?Me:R),y0:s+(a?z:Me),x1:i+(a?ri:E),y1:s+(a?F:ri),clipX0:it,clipY0:at,clipX1:rt,clipY1:ot,topLeftCornerRadius:Ai,topRightCornerRadius:Wo,bottomRightCornerRadius:ia,bottomLeftCornerRadius:SM,fill:Y,horizontalInset:W,verticalInset:B}),T.push({series:this,itemId:`scale-${et}`,datum:ft,type:0,x0:i+(a?Me:R),y0:s+(a?z:Me),x1:i+(a?ri:E),y1:s+(a?F:ri),clipX0:void 0,clipY0:void 0,clipX1:void 0,clipY1:void 0,topLeftCornerRadius:Ai,topRightCornerRadius:Wo,bottomRightCornerRadius:ia,bottomLeftCornerRadius:SM,fill:tt,horizontalInset:W,verticalInset:B})}}d.enabled&&L.push(this.labelDatum(d,n));const q=a?Dht:Aht;for(let it=0;it<p.length;it+=1){const at=p[it],{value:rt,text:ot,shape:et,size:gt,fill:dt,fillOpacity:ft,stroke:Dt,strokeWidth:qt,strokeOpacity:Me,lineDash:ri,lineDashOffset:rn}=at,ea=this.getTargetPoint(at),Ai=xht(at.rotation+q[at.placement]);k.push({series:this,itemId:`target-${it}`,midPoint:ea,datum:{value:rt},type:1,value:rt,text:ot,x:ea.x,y:ea.y,shape:et,size:gt,rotation:Ai,fill:dt,fillOpacity:ft,stroke:Dt,strokeOpacity:Me,strokeWidth:qt,lineDash:ri,lineDashOffset:rn,label:this.getTargetLabel(at)})}return{itemId:t,nodeData:D,targetData:k,labelData:L,scaleData:T}}updateSelections(t){(this.nodeDataRefresh||t)&&(this.contextNodeData=this.createNodeData(),this.nodeDataRefresh=!1)}highlightDatum(t){if(t!=null&&t.series===this&&t.type===1)return t}update({seriesRect:t}){const{datumSelection:e,labelSelection:i,targetSelection:s,targetLabelSelection:a,scaleSelection:n,highlightTargetSelection:o}=this,r=this.checkResize(t);this.updateSelections(r),this.contentGroup.visible=this.visible,this.contentGroup.opacity=this.getOpacity();const l=this.contextNodeData?.nodeData??[],c=this.contextNodeData?.labelData??[],h=this.contextNodeData?.targetData??[],u=this.contextNodeData?.scaleData??[],d=this.highlightDatum(this.ctx.highlightManager.getActiveHighlight());this.scaleSelection=this.updateScaleSelection({scaleData:u,scaleSelection:n}),this.updateScaleNodes({scaleSelection:n}),this.targetSelection=this.updateTargetSelection({targetData:h,targetSelection:s}),this.updateTargetNodes({targetSelection:s,isHighlight:!1}),this.targetLabelSelection=this.updateTargetLabelSelection({targetData:h,targetLabelSelection:a}),this.updateTargetLabelNodes({targetLabelSelection:a}),this.datumSelection=this.updateDatumSelection({nodeData:l,datumSelection:e}),this.updateDatumNodes({datumSelection:e}),this.labelSelection=this.updateLabelSelection({labelData:c,labelSelection:i}),this.updateLabelNodes({labelSelection:i}),this.highlightTargetSelection=this.updateTargetSelection({targetData:d!=null?[d]:[],targetSelection:o}),this.updateTargetNodes({targetSelection:o,isHighlight:!0}),r&&this.animationState.transition("resize"),this.animationState.transition("update")}updateDatumSelection(t){return t.datumSelection.update(t.nodeData,void 0,e=>zG(t.nodeData.length,e.itemId))}updateDatumNodes(t){const{datumSelection:e}=t,{ctx:i,properties:s}=this,{bar:a}=s,{fillOpacity:n,stroke:o,strokeOpacity:r,lineDash:l,lineDashOffset:c}=a,h=this.getStrokeWidth(a.strokeWidth),u=i.animationManager.isSkipped();e.each((d,p)=>{const{topLeftCornerRadius:g,topRightCornerRadius:f,bottomRightCornerRadius:x,bottomLeftCornerRadius:m,fill:b}=p;d.fill=b,d.fillOpacity=n,d.stroke=o,d.strokeOpacity=r,d.strokeWidth=h,d.lineDash=l,d.lineDashOffset=c,d.topLeftCornerRadius=g,d.topRightCornerRadius=f,d.bottomRightCornerRadius=x,d.bottomLeftCornerRadius=m,(u||d.previousDatum==null)&&d.setProperties(Cv(d,p))})}updateScaleSelection(t){return t.scaleSelection.update(t.scaleData,void 0,e=>zG(t.scaleData.length,e.itemId))}updateScaleNodes(t){const{scaleSelection:e}=t,{scale:i}=this.properties,{fillOpacity:s,stroke:a,strokeOpacity:n,strokeWidth:o,lineDash:r,lineDashOffset:l}=i;e.each((c,h)=>{const{topLeftCornerRadius:u,topRightCornerRadius:d,bottomRightCornerRadius:p,bottomLeftCornerRadius:g,fill:f}=h;c.fill=f,c.fillOpacity=s,c.stroke=a,c.strokeOpacity=n,c.strokeWidth=o,c.lineDash=r,c.lineDashOffset=l,c.topLeftCornerRadius=u,c.topRightCornerRadius=d,c.bottomRightCornerRadius=p,c.bottomLeftCornerRadius=g,c.setProperties(Cv(c,h))})}updateTargetSelection(t){return t.targetSelection.update(t.targetData,void 0,e=>e.itemId)}updateTargetNodes(t){const{targetSelection:e,isHighlight:i}=t,s=i?this.properties.highlightStyle.item:void 0;e.each((a,n)=>{const{x:o,y:r,size:l,rotation:c,fill:h,fillOpacity:u,stroke:d,strokeOpacity:p,strokeWidth:g,lineDash:f,lineDashOffset:x}=n;a.size=l,a.fill=s?.fill??h,a.fillOpacity=s?.fillOpacity??u,a.stroke=s?.stroke??d,a.strokeOpacity=s?.strokeOpacity??p,a.strokeWidth=s?.strokeWidth??g,a.lineDash=s?.lineDash??f,a.lineDashOffset=s?.lineDashOffset??x,a.translationX=o,a.translationY=r,a.rotation=c})}updateTargetLabelSelection(t){return t.targetLabelSelection.update(t.targetData)}updateTargetLabelNodes(t){const{targetLabelSelection:e}=t;e.each((i,s)=>{const{x:a,y:n,text:o}=s,{offsetX:r,offsetY:l,fill:c,fontStyle:h,fontWeight:u,fontSize:d,fontFamily:p,textAlign:g,textBaseline:f}=s.label;i.visible=!0,i.x=a+r,i.y=n+l,i.text=o,i.fill=c,i.fontStyle=h,i.fontWeight=u,i.fontSize=d,i.fontFamily=p,i.textAlign=g,i.textBaseline=f})}updateLabelSelection(t){return t.labelSelection.update(t.labelData,void 0,e=>"primary")}updateLabelNodes(t){const{labelSelection:e}=t,i=this.ctx.animationManager.isSkipped();e.each((s,a)=>{s.fill=a.fill,s.fontStyle=a.fontStyle,s.fontWeight=a.fontWeight,s.fontFamily=a.fontFamily}),(i||this.labelsHaveExplicitText())&&this.formatLabelText()}labelsHaveExplicitText(){for(const{datum:t}of this.labelSelection)if(t.text==null)return!1;return!0}formatLabelText(t){const{labelSelection:e,horizontal:i,axes:s}=this,a=s[Bn.X],n=s[Bn.Y];if(a==null||n==null)return;const[o,r]=a.range,[l,c]=n.range,h=this.originX+Math.min(o,r),u=this.originY+Math.min(l,c),d=Math.abs(r-o),p=Math.abs(c-l),g=t?.label??this.properties.value;let f;if(i){const b=a.scale.convert(g);f=new Ov(h,u,b-h,p)}else{const b=n.scale.convert(g);f=new Ov(h,b,d,p-b)}const x={scale:new Ov(h,u,d,p),bar:f},{margin:m}=this.properties;ght(this,e,{padding:m,horizontal:i},x,t)}resetAllAnimation(){this.ctx.animationManager.stopByAnimationGroupId(this.id),fht([this.datumSelection],Cv),this.formatLabelText()}resetAnimation(t){t==="initial"?this.animationState.transition("reset"):t==="ready"&&this.animationState.transition("skip")}animateLabelText(t={}){const{animationManager:e}=this.ctx;let i=0,s=0;if(this.labelSelection.each((a,n)=>{a.opacity=1,i=a.previousDatum?.value??t.from??n.value,s=n.value}),!this.labelsHaveExplicitText())if(i===s)this.formatLabelText({label:s});else{const a=`${this.id}_labels`;e.animate({id:a,groupId:"label",from:{label:i},to:{label:s},phase:t.phase??"update",ease:Mht.easeOut,onUpdate:n=>this.formatLabelText(n)})}}animateEmptyUpdateReady(){const{animationManager:t}=this.ctx,{node:e}=PG(!0,this.horizontal);WN(this.id,"node",t,[this.datumSelection],e,(i,s)=>s.itemId),WN(this.id,"label",t,[this.labelSelection],IG,()=>"primary"),this.animateLabelText({from:0,phase:"initial"})}animateWaitingUpdateReady(){const{animationManager:t}=this.ctx,{node:e}=PG(!1,this.horizontal);WN(this.id,"node",t,[this.datumSelection],e,(i,s)=>s.itemId),this.animateLabelText()}animateReadyResize(){this.resetAllAnimation()}getSeriesDomain(){return[NaN,NaN]}getSeriesRange(t,e){return[NaN,NaN]}getLegendData(){return[]}pickNode(t,e){switch(e){case"event":case"context-menu":{const i=this.scaleGroup.pickNode(t.x,t.y);return i!=null?{pickMode:gy._ModuleSupport.SeriesNodePickMode.EXACT_SHAPE_MATCH,match:i.datum,distance:0}:void 0}case"tooltip":case"highlight":case"highlight-tooltip":{const i=this.itemTargetGroup.pickNode(t.x,t.y);return i!=null?{pickMode:gy._ModuleSupport.SeriesNodePickMode.EXACT_SHAPE_MATCH,match:i.datum,distance:0}:{pickMode:gy._ModuleSupport.SeriesNodePickMode.NEAREST_NODE,match:this.nodeDatum,distance:0}}}}getTooltipContent(t){const{id:e,properties:i}=this,{tooltip:s}=i;if(!i.isValid())return;const a=this.highlightDatum(t),n=a?.value??i.value,o=a?.text;return s.formatTooltip({data:[{label:o??"",value:this.formatLabel(n)}]},{seriesId:e,title:void 0,datum:void 0,value:n})}pickFocus(t){const e=this.contextNodeData?.targetData;if(e==null||e.length===0)return;const i=Math.min(Math.max(t.datumIndex,0),e.length-1),s=e[i];for(const a of this.targetSelection)if(a.datum===s)return{bounds:a.node,showFocusBox:!0,clipFocusBox:!0,datum:s,datumIndex:i}}getCaptionText(){const{value:t}=this.properties,e=[];return e.push(this.formatLabel(t)),e.join(". ")}};YN.className="LinearGaugeSeries",YN.type="linear-gauge";var{ThemeSymbols:{DEFAULT_FONT_FAMILY:jG,DEFAULT_HIERARCHY_FILLS:Iht,DEFAULT_LABEL_COLOUR:KN,DEFAULT_INVERTED_LABEL_COLOUR:kht,DEFAULT_GAUGE_SERIES_COLOR_RANGE:Lht},ThemeConstants:{CARTESIAN_AXIS_TYPE:XN}}=Cct._ModuleSupport,Tht={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["gauge"],identifier:"linear-gauge",moduleFactory:t=>new YN(t),tooltipDefaults:{range:"exact"},defaultAxes:[{type:XN.NUMBER,line:{enabled:!1}},{type:XN.NUMBER,line:{enabled:!1}}],themeTemplate:{minWidth:200,minHeight:200,series:{thickness:50,bar:{strokeWidth:0},segmentation:{enabled:!1,interval:{},spacing:1},defaultTarget:{fill:KN,stroke:KN,size:10,shape:"triangle",placement:"after",spacing:5,label:{enabled:!0,fontWeight:"normal",fontSize:12,fontFamily:jG,color:KN,spacing:5}},label:{enabled:!1,placement:"inside-start",fontWeight:"normal",fontSize:24,minimumFontSize:12,spacing:18,fontFamily:jG,color:kht},margin:4,tooltip:{enabled:!1}},axes:{[XN.NUMBER]:{line:{enabled:!1},gridLine:{enabled:!1}}}},paletteFactory(t){const{takeColors:e,colorsCount:i,userPalette:s,themeTemplateParameters:a}=t,{fills:n}=e(i),o=a.get(Lht),r=a.get(Iht),l=s==="inbuilt"?o:[n[0],n[1]];return{scale:{defaultFill:r?.[1],stroke:r?.[2]},defaultColorRange:AG(l)}}},Nht=(P(),_(w)),my={zoom:{axes:"xy",anchorPointX:"pointer",anchorPointY:"pointer"},legend:{enabled:!1},gradientLegend:{enabled:!1},tooltip:{range:"exact"}},Cht=(P(),_(w)),Oht=(P(),_(w)),Eht=1e-9;function GG(t,e,i,s){const[a,n]=t,[o,r]=e,l=o-a,c=r-n,h=l*l+c*c;let u,d;if(Math.abs(h)<Eht)u=a,d=n;else{let f=((i-a)*l+(s-n)*c)/h;f=Math.max(0,Math.min(1,f)),u=a+f*(o-a),d=n+f*(r-n)}const p=i-u,g=s-d;return p*p+g*g}function VG(t,e,i){let s=1/0,a=t[t.length-1];for(const n of t)s=Math.min(s,GG(a,n,e,i)),a=n;return Math.sqrt(s)}function ZN(t){let[e,i]=t[0],s=0;for(let a=1;a<t.length;a+=1){const[n,o]=t[a],r=Math.hypot(n-e,o-i);s+=r,e=n,i=o}return s}function Ev(t){if(t.length===0)return;const e=ZN(t)/2;let[i,s]=t[0],a=0;for(let n=1;n<t.length;n+=1){const[o,r]=t[n],l=Math.hypot(o-i,r-s),c=a+l;if(c>e){const h=(e-a)/l,u=[i+(o-i)*h,s+(r-s)*h],d=Math.atan2(r-s,o-i);return{point:u,angle:d}}a=c,i=o,s=r}}var wht=(P(),_(w)),{LonLatBBox:Rht}=wht._ModuleSupport;function xy(t,e,i,s,a){return t==null?t=new Rht(e,i,s,a):(t.lon0=Math.min(t.lon0,e),t.lat0=Math.min(t.lat0,i),t.lon1=Math.max(t.lon1,s),t.lat1=Math.max(t.lat1,a)),t}function Hh(t,e){return t.forEach(i=>{const[s,a]=i;e=xy(e,s,a,s,a)}),e}function _ht(t){if(t.length===0)return;let e=0,i=0,s=0,[a,n]=t[t.length-1];for(const[o,r]of t){const l=a*r-o*n;s+=l,e+=(a+o)*l,i+=(n+r)*l,a=o,n=r}return s*=3,[e/s,i/s]}function wv(t,e,i){let s=!1,a=1/0;for(const n of t){let o=n[n.length-1],[r,l]=o;for(const c of n){const[h,u]=c;u>i!=l>i&&e<(r-h)*(i-u)/(l-u)+h&&(s=!s),a=Math.min(a,GG(o,c,e,i)),o=c,r=h,l=u}}return(s?-1:1)*Math.sqrt(a)}var{Path:Pht,ExtendedPath2D:Bht,BBox:zht,ScenePathChangeDetection:UG}=Oht._ModuleSupport,Qd=class extends Pht{constructor(){super(...arguments),this.projectedGeometry=void 0,this.renderMode=3,this.strokePath=new Bht}computeBBox(){return(this.dirtyPath||this.isDirtyPath())&&(this.updatePath(),this.dirtyPath=!1),this.bbox?.clone()}updatePath(){const{projectedGeometry:t}=this;this.strokePath.clear(),this.path.clear(),this.bbox=t!=null?this.drawGeometry(t,void 0):void 0}drawPath(t){super.drawPath(t),this.renderStroke(t,this.strokePath.getPath2D())}containsPoint(t,e){const{projectedGeometry:i}=this;return i==null||!this.getBBox().containsPoint(t,e)?!1:this.geometryDistance(i,t,e)<=0}distanceSquared(t,e){const{projectedGeometry:i}=this;if(i==null)return 1/0;const s=this.geometryDistance(i,t,e);return s>0?s*s:0}geometryDistance(t,e,i){const{renderMode:s,strokeWidth:a}=this,n=(s&1)!==0,o=(s&2)!==0,r=Math.max(a/2,1)+1;switch(t.type){case"GeometryCollection":return t.geometries.reduce((l,c)=>Math.min(l,this.geometryDistance(c,e,i)),1/0);case"MultiPolygon":return n?t.coordinates.reduce((l,c)=>Math.min(l,Math.max(wv(c,e,i),0)),1/0):1/0;case"Polygon":return n?Math.max(wv(t.coordinates,e,i),0):1/0;case"MultiLineString":return o?t.coordinates.reduce((l,c)=>Math.min(l,Math.max(VG(c,e,i)-r,0)),1/0):1/0;case"LineString":return o?Math.max(VG(t.coordinates,e,i)-r,0):1/0;case"MultiPoint":case"Point":default:return 1/0}}drawGeometry(t,e){const{renderMode:i,path:s,strokePath:a}=this,n=(i&1)!==0,o=(i&2)!==0;switch(t.type){case"GeometryCollection":t.geometries.forEach(r=>{e=this.drawGeometry(r,e)});break;case"MultiPolygon":n&&t.coordinates.forEach(r=>{e=this.drawPolygon(s,r,e)});break;case"Polygon":n&&(e=this.drawPolygon(s,t.coordinates,e));break;case"LineString":o&&(e=this.drawLineString(a,t.coordinates,e,!1));break;case"MultiLineString":o&&t.coordinates.forEach(r=>{e=this.drawLineString(a,r,e,!1)});break;case"Point":case"MultiPoint":break}return e}drawPolygon(t,e,i){if(e.length<1)return i;i=this.drawLineString(t,e[0],i,!0);for(let s=1;s<e.length;s+=1){const a=e[s];this.drawLineString(t,a,void 0,!0)}return i}drawLineString(t,e,i,s){if(e.length<2)return i;const a=s?e.length-1:e.length;for(let n=0;n<a;n+=1){const[o,r]=e[n];if(n===0?t.moveTo(o,r):t.lineTo(o,r),i==null)i=new zht(o,r,0,0);else{const{x:l,y:c}=i,h=l+i.width,u=c+i.height;i.x=Math.min(l,o),i.y=Math.min(c,r),i.width=Math.max(h,o)-i.x,i.height=Math.max(u,r)-i.y}}return s&&t.closePath(),i}};y([UG()],Qd.prototype,"projectedGeometry",2),y([UG()],Qd.prototype,"renderMode",2);function qd(t,e){if(t.bbox!=null){const[i,s,a,n]=t.bbox;return e=xy(e,i,s,a,n),e}switch(t.type){case"GeometryCollection":t.geometries.forEach(i=>{e=qd(i,e)});break;case"MultiPolygon":t.coordinates.forEach(i=>{i.length>0&&(e=Hh(i[0],e))});break;case"Polygon":t.coordinates.length>0&&(e=Hh(t.coordinates[0],e));break;case"MultiLineString":t.coordinates.forEach(i=>{e=Hh(i,e)});break;case"LineString":e=Hh(t.coordinates,e);break;case"MultiPoint":t.coordinates.forEach(i=>{const[s,a]=i;e=xy(e,s,a,s,a)});break;case"Point":{const[i,s]=t.coordinates;e=xy(e,i,s,i,s);break}}return e}function Rv(t){switch(t.type){case"GeometryCollection":{let e,i;return t.geometries.forEach(s=>{const a=Rv(s);if(a==null)return;const n=Hh(a[0],void 0);if(n==null)return;const o=Math.abs(n.lat1-n.lat0)*Math.abs(n.lon1-n.lon0);(e==null||o>e)&&(e=o,i=a)}),i}case"MultiPolygon":{let e,i;return t.coordinates.forEach(s=>{const a=Hh(s[0],void 0);if(a==null)return;const n=Math.abs(a.lat1-a.lat0)*Math.abs(a.lon1-a.lon0);(e==null||n>e)&&(e=n,i=s)}),i}case"Polygon":return t.coordinates;case"MultiLineString":case"LineString":case"MultiPoint":case"Point":return}}function _v(t){switch(t.type){case"GeometryCollection":{let e,i;return t.geometries.forEach(s=>{const a=_v(s);if(a==null)return;const n=ZN(a);n!=null&&(e==null||n>e)&&(e=n,i=a)}),i}case"MultiLineString":{let e=0,i;return t.coordinates.forEach(s=>{const a=ZN(s);a>e&&(e=a,i=s)}),i}case"LineString":return t.coordinates;case"MultiPolygon":case"Polygon":case"MultiPoint":case"Point":return}}function $N(t,e){if(t==null)return!1;switch(t.type){case"GeometryCollection":return t.geometries.some(i=>$N(i,e));case"MultiPolygon":case"Polygon":return(e&1)!==0;case"MultiLineString":case"LineString":return(e&2)!==0;case"MultiPoint":case"Point":return(e&4)!==0}}function uc(t,e){switch(t.type){case"GeometryCollection":return{type:"GeometryCollection",geometries:t.geometries.map(i=>uc(i,e))};case"Polygon":return{type:"Polygon",coordinates:QN(t.coordinates,e)};case"MultiPolygon":return{type:"MultiPolygon",coordinates:Fht(t.coordinates,e)};case"MultiLineString":return{type:"MultiLineString",coordinates:QN(t.coordinates,e)};case"LineString":return{type:"LineString",coordinates:qN(t.coordinates,e)};case"MultiPoint":return{type:"MultiPoint",coordinates:qN(t.coordinates,e)};case"Point":return{type:"Point",coordinates:e.convert(t.coordinates)}}}function Fht(t,e){return t.map(i=>QN(i,e))}function QN(t,e){return t.map(i=>qN(i,e))}function qN(t,e){return t.map(i=>e.convert(i))}var WG=(P(),_(w)),gbt=class extends WG._ModuleSupport.SeriesProperties{},by=class extends WG._ModuleSupport.DataModelSeries{addChartEventListeners(){this.destroyFns.push(this.ctx.chartEventManager.addListener("legend-item-click",t=>{this.onLegendItemClick(t)}),this.ctx.chartEventManager.addListener("legend-item-double-click",t=>{this.onLegendItemDoubleClick(t)}))}getSeriesDomain(){return[NaN,NaN]}getSeriesRange(t,e){return[NaN,NaN]}},HG=(P(),_(w));function YG(t){return Array.isArray(t)&&t.length>=2&&t.every(HG._ModuleSupport.isFiniteNumber)}function Pv(t){return Array.isArray(t)&&t.length>=2&&t.every(YG)}var KG=.001;function jht(t){return Math.abs(t[0][0]-t[t.length-1][0])<KG&&Math.abs(t[0][1]-t[t.length-1][1])<KG}function XG(t){return Array.isArray(t)&&t.every(Pv)&&t.every(jht)}function ZG(t){if(t===null)return!0;if(typeof t!="object"||t.type==null)return!1;const{type:e,coordinates:i}=t;switch(e){case"GeometryCollection":return Array.isArray(t.geometries)&&t.geometries.every(ZG);case"MultiPolygon":return Array.isArray(i)&&i.every(XG);case"Polygon":return XG(i);case"MultiLineString":return Array.isArray(i)&&i.every(Pv);case"LineString":return Pv(i);case"MultiPoint":return Pv(i);case"Point":return YG(i)}}function Ght(t){return t!==null&&typeof t=="object"&&t.type==="Feature"&&ZG(t.geometry)}function Vht(t){return t!==null&&typeof t=="object"&&t.type==="FeatureCollection"&&Array.isArray(t.features)&&t.features.every(Ght)}var Go=HG._ModuleSupport.predicateWithMessage(Vht,"a GeoJSON object"),Uht=(P(),_(w)),{COLOR_STRING:Wht,LINE_DASH:Hht,OBJECT:Yht,POSITIVE_NUMBER:$G,RATIO:Kht,Validate:Yh,SeriesProperties:Xht,SeriesTooltip:Zht}=Uht._ModuleSupport,dc=class extends Xht{constructor(){super(...arguments),this.topology=void 0,this.stroke="black",this.strokeOpacity=1,this.strokeWidth=0,this.lineDash=[0],this.lineDashOffset=0,this.tooltip=new Zht}};y([Yh(Go,{optional:!0})],dc.prototype,"topology",2),y([Yh(Wht)],dc.prototype,"stroke",2),y([Yh(Kht)],dc.prototype,"strokeOpacity",2),y([Yh($G)],dc.prototype,"strokeWidth",2),y([Yh(Hht)],dc.prototype,"lineDash",2),y([Yh($G)],dc.prototype,"lineDashOffset",2),y([Yh(Yht)],dc.prototype,"tooltip",2);var{createDatumId:$ht,SeriesNodePickMode:Qht,Validate:qht,Logger:Jht,Group:tut,Selection:eut,PointerEvents:iut}=Cht._ModuleSupport,Bv=class extends by{constructor(t){super({moduleCtx:t,useLabelLayer:!0,pickModes:[Qht.EXACT_SHAPE_MATCH]}),this.properties=new dc,this._chartTopology=void 0,this.itemGroup=this.contentGroup.appendChild(new tut({name:"itemGroup"})),this.datumSelection=eut.select(this.itemGroup,()=>this.nodeFactory())}getNodeData(){return this.contextNodeData?.nodeData}get topology(){return this.properties.topology??this._chartTopology}setOptionsData(){}setChartData(){}get hasData(){return!1}renderToOffscreenCanvas(){return!0}setChartTopology(t){this._chartTopology=t,this.topology===t&&(this.nodeDataRefresh=!0)}setSeriesIndex(t){return super.setSeriesIndex(t)?(this.contentGroup.zIndex=[0,t,0],this.highlightGroup.zIndex=[0,t,1],!0):!1}nodeFactory(){const t=new Qd;return t.renderMode=2,t.lineJoin="round",t.lineCap="round",t.pointerEvents=iut.None,t}processData(){const{topology:t}=this;this.topologyBounds=t?.features.reduce((e,i)=>{const s=i.geometry;return s==null?e:qd(s,e)},void 0),t==null&&Jht.warnOnce("no topology was provided for [MapShapeBackgroundSeries]; nothing will be rendered.")}createNodeData(){const{id:t,topology:e,scale:i}=this;if(e==null)return;const s=[],a=[];return e.features.forEach((n,o)=>{const{geometry:r}=n,l=r!=null&&i!=null?uc(r,i):void 0;l!=null&&s.push({series:this,itemId:o,datum:n,index:o,projectedGeometry:l})}),{itemId:t,nodeData:s,labelData:a}}updateSelections(){this.nodeDataRefresh&&(this.contextNodeData=this.createNodeData(),this.nodeDataRefresh=!1)}update(){const{datumSelection:t}=this;this.updateSelections(),this.contentGroup.visible=this.visible;const{nodeData:e=[]}=this.contextNodeData??{};this.datumSelection=this.updateDatumSelection({nodeData:e,datumSelection:t}),this.updateDatumNodes({datumSelection:t})}updateDatumSelection(t){return t.datumSelection.update(t.nodeData,void 0,e=>$ht(e.index))}updateDatumNodes(t){const{properties:e}=this,{datumSelection:i}=t,{stroke:s,strokeOpacity:a,lineDash:n,lineDashOffset:o}=e,r=this.getStrokeWidth(e.strokeWidth);i.each((l,c)=>{const{projectedGeometry:h}=c;if(h==null){l.visible=!1,l.projectedGeometry=void 0;return}l.visible=!0,l.projectedGeometry=h,l.stroke=s,l.strokeWidth=r,l.strokeOpacity=a,l.lineDash=n,l.lineDashOffset=o})}resetAnimation(){}getLegendData(){return[]}getTooltipContent(t){}computeFocusBounds(t){}};Bv.className="MapLineBackgroundSeries",Bv.type="map-line-background",y([qht(Go,{optional:!0,property:"topology"})],Bv.prototype,"_chartTopology",2);var{DEFAULT_HIERARCHY_STROKES:sut}=Nht._ModuleSupport.ThemeSymbols,aut={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["topology"],identifier:"map-line-background",moduleFactory:t=>new Bv(t),tooltipDefaults:{range:"exact"},themeTemplate:{...my,series:{strokeWidth:1,lineDash:[0],lineDashOffset:0}},paletteFactory:({themeTemplateParameters:t})=>({stroke:t.get(sut)?.[1]})},QG=(P(),_(w)),qG=(P(),_(w));function nut(){return{fromFn:(i,s,a)=>a==="removed"?{scalingX:1,scalingY:1}:i.previousDatum==null?{scalingX:0,scalingY:0}:{scalingX:i.scalingX,scalingY:i.scalingY},toFn:(i,s,a)=>a==="removed"?{scalingX:0,scalingY:0}:{scalingX:1,scalingY:1}}}function JG(t,e){const i=t.contextNodeData?.nodeData[e.datumIndex];if(i!==void 0){for(const s of t.datumSelection.nodes())if(s.datum===i)return s}}var out=(P(),_(w)),{AND:rut,ARRAY:lut,COLOR_STRING:cut,COLOR_STRING_ARRAY:hut,FUNCTION:uut,LINE_DASH:dut,NUMBER_ARRAY:put,OBJECT:tV,POSITIVE_NUMBER:JN,RATIO:gut,STRING:zn,Validate:ke,SeriesProperties:fut,SeriesTooltip:yut,Label:mut}=out._ModuleSupport,ve=class extends fut{constructor(){super(...arguments),this.topology=void 0,this.idKey="",this.topologyIdKey="name",this.idName=void 0,this.labelKey=void 0,this.labelName=void 0,this.colorRange=void 0,this.maxStrokeWidth=void 0,this.stroke="black",this.strokeOpacity=1,this.strokeWidth=0,this.lineDash=[0],this.lineDashOffset=0,this.label=new mut,this.tooltip=new yut}};y([ke(Go,{optional:!0})],ve.prototype,"topology",2),y([ke(zn,{optional:!0})],ve.prototype,"title",2),y([ke(zn,{optional:!0})],ve.prototype,"legendItemName",2),y([ke(zn)],ve.prototype,"idKey",2),y([ke(zn)],ve.prototype,"topologyIdKey",2),y([ke(zn,{optional:!0})],ve.prototype,"idName",2),y([ke(zn,{optional:!0})],ve.prototype,"labelKey",2),y([ke(zn,{optional:!0})],ve.prototype,"labelName",2),y([ke(zn,{optional:!0})],ve.prototype,"sizeKey",2),y([ke(zn,{optional:!0})],ve.prototype,"sizeName",2),y([ke(zn,{optional:!0})],ve.prototype,"colorKey",2),y([ke(zn,{optional:!0})],ve.prototype,"colorName",2),y([ke(put,{optional:!0})],ve.prototype,"sizeDomain",2),y([ke(rut(hut,lut.restrict({minLength:1})),{optional:!0})],ve.prototype,"colorRange",2),y([ke(JN,{optional:!0})],ve.prototype,"maxStrokeWidth",2),y([ke(cut)],ve.prototype,"stroke",2),y([ke(gut)],ve.prototype,"strokeOpacity",2),y([ke(JN)],ve.prototype,"strokeWidth",2),y([ke(dut)],ve.prototype,"lineDash",2),y([ke(JN)],ve.prototype,"lineDashOffset",2),y([ke(uut,{optional:!0})],ve.prototype,"itemStyler",2),y([ke(tV)],ve.prototype,"label",2),y([ke(tV)],ve.prototype,"tooltip",2);var{getMissCount:xut,createDatumId:eV,SeriesNodePickMode:iV,valueProperty:Sy,CachedTextMeasurerPool:but,Validate:Sut,Logger:sV,ColorScale:vut,LinearScale:Mut,Selection:tC,Text:Dut}=qG._ModuleSupport,zv=class extends by{constructor(t){super({moduleCtx:t,useLabelLayer:!0,pickModes:[iV.EXACT_SHAPE_MATCH,iV.NEAREST_NODE],usesPlacedLabels:!0}),this.properties=new ve,this._chartTopology=void 0,this.colorScale=new vut,this.sizeScale=new Mut,this.datumSelection=tC.select(this.contentGroup,()=>this.nodeFactory()),this.labelSelection=tC.select(this.labelGroup,Dut),this.highlightDatumSelection=tC.select(this.highlightNode,()=>this.nodeFactory()),this._previousDatumMidPoint=void 0}getNodeData(){return this.contextNodeData?.nodeData}get topology(){return this.properties.topology??this._chartTopology}get hasData(){return super.hasData&&this.topology!=null}renderToOffscreenCanvas(){return!0}setSeriesIndex(t){return super.setSeriesIndex(t)?(this.contentGroup.zIndex=[1,t],this.highlightGroup.zIndex=[2,t],!0):!1}setChartTopology(t){this._chartTopology=t,this.topology===t&&(this.nodeDataRefresh=!0)}isLabelEnabled(){return this.properties.labelKey!=null&&this.properties.label.enabled}nodeFactory(){const t=new Qd;return t.renderMode=2,t.lineJoin="round",t.lineCap="round",t}async processData(t){if(this.data==null||!this.properties.isValid())return;const{data:e,topology:i,sizeScale:s,colorScale:a}=this,{topologyIdKey:n,idKey:o,sizeKey:r,colorKey:l,labelKey:c,sizeDomain:h,colorRange:u}=this.properties,d=new Map;i?.features.forEach(v=>{const S=v.properties?.[n];S==null||!$N(v.geometry,2)||d.set(S,v)});const p=this.sizeScale.type,g=this.colorScale.type,f=this.scale?.type,{dataModel:x,processedData:m}=await this.requestDataModel(t,e,{props:[Sy(o,f,{id:"idValue",includeProperty:!1}),Sy(o,f,{id:"featureValue",includeProperty:!1,processor:()=>v=>d.get(v)}),...c!=null?[Sy(c,"band",{id:"labelValue"})]:[],...r!=null?[Sy(r,p,{id:"sizeValue"})]:[],...l!=null?[Sy(l,g,{id:"colorValue"})]:[]]}),b=m.rawData.length!==0?x.resolveColumnById(this,"featureValue",m):void 0;if(this.topologyBounds=b?.reduce((v,S)=>{const D=S?.geometry;return D==null?v:qd(D,v)},void 0),r!=null){const v=x.resolveProcessedDataIndexById(this,"sizeValue"),S=m.domain.values[v]??[];s.domain=h??S}if(u!=null&&this.isColorScaleValid()){const v=x.resolveProcessedDataIndexById(this,"colorValue");a.domain=m.domain.values[v],a.range=u,a.update()}i==null&&sV.warnOnce("no topology was provided for [MapLineSeries]; nothing will be rendered.")}isColorScaleValid(){const{colorKey:t}=this.properties;if(!t)return!1;const{dataModel:e,processedData:i}=this;if(!e||!i)return!1;const s=e.resolveProcessedDataIndexById(this,"colorValue"),a=i.rawData.length,n=xut(this,i.defs.values[s].missing);return!(a===0||a===n)}getLabelDatum(t,e,i,s){if(e==null||i==null)return;const a=_v(i);if(a==null)return;const{idKey:n,idName:o,sizeKey:r,sizeName:l,colorKey:c,colorName:h,labelKey:u,labelName:d,label:p}=this.properties,g=this.getLabelText(p,{value:e,datum:t,idKey:n,idName:o,sizeKey:r,sizeName:l,colorKey:c,colorName:h,labelKey:u,labelName:d});if(g==null)return;const f=but.measureText(String(g),{font:s}),x=Ev(a);if(x==null)return;const[m,b]=x.point,{width:v,height:S}=f;return{point:{x:m,y:b,size:0},label:{width:v,height:S,text:g},marker:void 0,placement:void 0}}createNodeData(){const{id:t,dataModel:e,processedData:i,sizeScale:s,properties:a,scale:n}=this,{idKey:o,sizeKey:r,colorKey:l,labelKey:c,label:h}=a;if(e==null||i==null||i.rawData.length===0)return;const u=e.resolveColumnById(this,"idValue",i),d=e.resolveColumnById(this,"featureValue",i),p=c!=null?e.resolveColumnById(this,"labelValue",i):void 0,g=r!=null?e.resolveColumnById(this,"sizeValue",i):void 0,f=l!=null?e.resolveColumnById(this,"colorValue",i):void 0,x=a.maxStrokeWidth??a.strokeWidth;s.range=[Math.min(a.strokeWidth,x),x];const m=h.getFont(),b=new Map;i.rawData.forEach((L,T)=>{const N=u[T],C=d[T]?.geometry??void 0,O=C!=null&&n!=null?uc(C,n):void 0;N!=null&&O!=null&&b.set(N,O)});const v=[],S=[],D=[];i.rawData.forEach((L,T)=>{const N=u[T],C=f?.[T],O=g?.[T],R=p?.[T],E=b.get(N);E==null&&D.push(N);const z=this.getLabelDatum(L,R,E,m);z!=null&&S.push(z),v.push({series:this,itemId:o,datum:L,datumIndex:T,idValue:N,labelValue:R,colorValue:C,sizeValue:O,projectedGeometry:E})});const k=10;if(D.length>k){const L=D.length-k;D.length=k,D.push(`(+${L} more)`)}return D.length>0&&sV.warnOnce("some data items do not have matches in the provided topology",D),{itemId:t,nodeData:v,labelData:S}}updateSelections(){this.nodeDataRefresh&&(this.contextNodeData=this.createNodeData(),this.nodeDataRefresh=!1)}update(){const{datumSelection:t,highlightDatumSelection:e}=this;this.updateSelections(),this.contentGroup.visible=this.visible,this.contentGroup.opacity=this.getOpacity();let i=this.ctx.highlightManager?.getActiveHighlight();i!=null&&(i.series!==this||i.datum==null)&&(i=void 0);const s=this.contextNodeData?.nodeData??[];this.datumSelection=this.updateDatumSelection({nodeData:s,datumSelection:t}),this.updateDatumNodes({datumSelection:t,isHighlight:!1}),this.highlightDatumSelection=this.updateDatumSelection({nodeData:i!=null?[i]:[],datumSelection:e}),this.updateDatumNodes({datumSelection:e,isHighlight:!0})}updateDatumSelection(t){return t.datumSelection.update(t.nodeData,void 0,e=>eV(e.idValue))}getItemBaseStyle(t){const{properties:e}=this,i=t?e.highlightStyle.item:void 0,s=this.getStrokeWidth(e.strokeWidth);return{stroke:i?.stroke??e.stroke,strokeWidth:i?.strokeWidth??s,strokeOpacity:i?.strokeOpacity??e.strokeOpacity,lineDash:i?.lineDash??e.lineDash,lineDashOffset:i?.lineDashOffset??e.lineDashOffset}}getItemStyleOverrides(t,e,i,s,a,n){const{id:o,properties:r,colorScale:l,sizeScale:c}=this,{colorRange:h,itemStyler:u}=r;let d;if(!n&&i!=null&&(d??(d={}),d.stroke=this.isColorScaleValid()?l.convert(i):h?.[0]??r.stroke),s!=null&&(d??(d={}),d.strokeWidth=c.convert(s,!0)),u!=null){const p=this.cachedDatumCallback(eV(t,n?"highlight":"node"),()=>u({seriesId:o,datum:e,highlighted:n,...a,...d}));d??(d={}),Object.assign(d,p)}return d}updateDatumNodes(t){const{datumSelection:e,isHighlight:i}=t,s=this.getItemBaseStyle(i);e.each((a,n)=>{const{datum:o,datumIndex:r,colorValue:l,sizeValue:c,projectedGeometry:h}=n;if(h==null){a.visible=!1,a.projectedGeometry=void 0;return}const u=this.getItemStyleOverrides(String(r),o,l,c,s,i);a.visible=!0,a.projectedGeometry=h,a.stroke=u?.stroke??s.stroke,a.strokeWidth=u?.strokeWidth??s.strokeWidth,a.strokeOpacity=u?.strokeOpacity??s.strokeOpacity,a.lineDash=u?.lineDash??s.lineDash,a.lineDashOffset=u?.lineDashOffset??s.lineDashOffset})}updatePlacedLabelData(t){this.labelSelection=this.labelSelection.update(t,e=>{e.pointerEvents=qG._ModuleSupport.PointerEvents.None}),this.updateLabelNodes({labelSelection:this.labelSelection})}updateLabelNodes(t){const{labelSelection:e}=t,{color:i,fontStyle:s,fontWeight:a,fontSize:n,fontFamily:o}=this.properties.label;e.each((r,{x:l,y:c,width:h,height:u,text:d})=>{r.visible=!0,r.x=l+h/2,r.y=c+u/2,r.text=d,r.fill=i,r.fontStyle=s,r.fontWeight=a,r.fontSize=n,r.fontFamily=o,r.textAlign="center",r.textBaseline="middle"})}resetAnimation(){}getLabelData(){return this.isLabelEnabled()?this.contextNodeData?.labelData??[]:[]}pickNodeClosestDatum({x:t,y:e}){let i=1/0,s;return this.datumSelection.each((a,n)=>{const o=a.distanceSquared(t,e);o<i&&(i=o,s=n)}),s!=null?{datum:s,distance:Math.sqrt(i)}:void 0}datumMidPoint(t){const{_previousDatumMidPoint:e}=this;if(e?.datum===t)return e.point;const i=t.projectedGeometry,s=i!=null?_v(i):void 0,a=s!=null?Ev(s)?.point:void 0,n=a!=null?{x:a[0],y:a[1]}:void 0;return this._previousDatumMidPoint={datum:t,point:n},n}legendItemSymbol(t){const{dataModel:e,processedData:i,properties:s}=this,{strokeWidth:a,strokeOpacity:n,lineDash:o}=s;let{stroke:r}=s;if(t!=null&&this.isColorScaleValid()){const c=e.resolveColumnById(this,"colorValue",i)[t];r=this.colorScale.convert(c)}return{marker:{fill:void 0,fillOpacity:0,stroke:void 0,strokeWidth:0,strokeOpacity:0,enabled:!1},line:{stroke:r,strokeWidth:a,strokeOpacity:n,lineDash:o}}}getLegendData(t){const{processedData:e,dataModel:i}=this;if(e==null||i==null)return[];const{id:s,visible:a}=this,{title:n,legendItemName:o,idKey:r,idName:l,colorKey:c,colorName:h,colorRange:u,showInLegend:d}=this.properties;if(t==="gradient"&&c!=null&&u!=null){const p=e.domain.values[i.resolveProcessedDataIndexById(this,"colorValue")];return[{legendType:"gradient",enabled:a,seriesId:s,colorName:h,colorRange:u,colorDomain:p}]}else return t==="category"?[{legendType:"category",id:s,itemId:s,seriesId:s,enabled:a,label:{text:o??n??l??r},symbol:this.legendItemSymbol(),legendItemName:o,hideInLegend:!d}]:[]}getTooltipContent(t){const{id:e,dataModel:i,processedData:s,properties:a}=this,{idKey:n,idName:o,colorKey:r,colorName:l,sizeKey:c,sizeName:h,labelKey:u,labelName:d,title:p,legendItemName:g,tooltip:f}=a;if(!i||!s?.rawData.length)return;const{datumIndex:x}=t,m=s.rawData[x],b=i.resolveColumnById(this,"idValue",s),v=[],S=c!=null?i.resolveColumnById(this,"sizeValue",s)[x]:void 0,D=r!=null?i.resolveColumnById(this,"colorValue",s)[x]:void 0;if(c!=null&&v.push({label:h,fallbackLabel:c,value:String(S)}),r!=null&&v.push({label:l,fallbackLabel:r,value:String(D)}),u!=null&&u!==n){const L=i.resolveColumnById(this,"labelValue",s)[x];v.push({label:d,fallbackLabel:u,value:L})}const k=this.getItemBaseStyle(!1);return Object.assign(k,this.getItemStyleOverrides(String(x),x,D,S,k,!1)),f.formatTooltip({heading:b[x],title:p??g,symbol:this.legendItemSymbol(x),data:v},{seriesId:e,datum:m,title:p,idKey:n,idName:o,colorKey:r,colorName:l,sizeKey:c,sizeName:h,labelKey:u,labelName:d,...k})}computeFocusBounds(t){const e=JG(this,t);return e?e.getBBox():void 0}};zv.className="MapLineSeries",zv.type="map-line",y([Sut(Go,{optional:!0,property:"topology"})],zv.prototype,"_chartTopology",2);var{DEFAULT_DIVERGING_SERIES_COLOR_RANGE:Aut,DEFAULT_FONT_FAMILY:Iut,DEFAULT_LABEL_COLOUR:kut}=QG._ModuleSupport.ThemeSymbols,Lut={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["topology"],identifier:"map-line",moduleFactory:t=>new zv(t),tooltipDefaults:{range:"exact"},themeTemplate:{...my,series:{strokeWidth:1,maxStrokeWidth:3,lineDash:[0],lineDashOffset:0,label:{enabled:!0,fontSize:12,fontFamily:Iut,color:kut}}},paletteFactory:t=>{const{takeColors:e,colorsCount:i,userPalette:s,themeTemplateParameters:a}=t,{fill:n}=QG._ModuleSupport.singleSeriesPaletteFactory(t),o=a.get(Aut),{fills:r}=e(i);return{colorRange:s==="inbuilt"?o:[r[0],r[1]],stroke:n}}},aV=(P(),_(w)),nV=(P(),_(w)),Tut=(t,e,i)=>{let s=t,a=s;for(const n of e)if(s==null||i(s.value,n)>0)s={value:n,next:s},a=s;else{for(a=a;a.next!=null&&i(a.next.value,n)<=0;)a=a.next;a.next={value:n,next:a.next}}return s};function oV(t,e,i){const s=Hh(t[0],void 0);if(s==null)return;const a=(s.lon0+s.lon1)/2,n=(s.lat0+s.lat1)/2,o=Math.abs(s.lon1-s.lon0),r=Math.abs(s.lat1-s.lat0),l=_ht(t[0]),[c,h]=l,u=-wv(t,c,h);let d;const p=(D,k)=>{const T=Math.max(k-u,0);return D-.5*T},g=(D,k,L)=>{const{distance:T,maxDistance:N}=i(t,D,k,L),C=Math.hypot(c-D,h-k),O=Math.min(Math.max(c,D-L/2),D+L/2),R=Math.min(Math.max(h,k-L/2),k+L/2),E=Math.hypot(c-O,h-R),z=p(T,C),F=p(N,E);return{distance:T,maxDistance:N,value:z,maxValue:F,x:D,y:k,stride:L}},f=(D,k,L,T)=>{const N=g(k,L,T);N.maxDistance>=0&&D.push(N)},x=Math.min(o,r)/2;let m={value:g(a,n,x),next:null};for(;m!=null;){const D=m.value,{distance:k,value:L,maxValue:T,x:N,y:C,stride:O}=D;if(m=m.next,k>0&&(d==null||L>d.value)&&(d=D),d!=null&&T-d.value<=e)continue;const R=O/2,E=[];f(E,N-R,C-R,R),f(E,N+R,C-R,R),f(E,N-R,C+R,R),f(E,N+R,C+R,R),E.sort(rV),m=Tut(m,E,rV)}if(d==null)return;const{distance:b,x:v,y:S}=d;return{x:v,y:S,distance:b}}var rV=(t,e)=>e.maxValue-t.maxValue;function eC(t,e){const i=oV(t,e,(n,o,r,l)=>{const c=-wv(n,o,r),h=c+l*Math.SQRT2;return{distance:c,maxDistance:h}});if(i==null)return;const{x:s,y:a}=i;return[s,a]}function lV(t,e){let i;switch(t.type){case"GeometryCollection":return t.geometries.flatMap(s=>lV(s,e));case"MultiPoint":return t.coordinates;case"Point":return[t.coordinates];case"MultiPolygon":{const s=Rv(t);i=s!=null?eC(s,e):void 0;break}case"Polygon":{const s=t.coordinates;i=s!=null?eC(s,e):void 0;break}case"MultiLineString":{const s=_v(t);i=s!=null?Ev(s)?.point:void 0;break}case"LineString":{const s=t.coordinates;i=Ev(s)?.point;break}}return i!=null?[i]:[]}var Nut=(P(),_(w)),{AND:Cut,ARRAY:Out,COLOR_STRING:cV,COLOR_STRING_ARRAY:Eut,FUNCTION:wut,NUMBER_ARRAY:Rut,OBJECT:hV,POSITIVE_NUMBER:iC,RATIO:uV,STRING:gs,MARKER_SHAPE:_ut,Validate:$t,SeriesProperties:Put,SeriesTooltip:But,Logger:zut,Label:Fut}=Nut._ModuleSupport,dV=class extends Fut{constructor(){super(...arguments),this.placement="bottom"}};y([$t(gs)],dV.prototype,"placement",2);var Qt=class extends Put{constructor(){super(...arguments),this.topology=void 0,this.idKey=void 0,this.topologyIdKey="name",this.idName=void 0,this.latitudeKey=void 0,this.latitudeName=void 0,this.longitudeKey=void 0,this.longitudeName=void 0,this.labelKey=void 0,this.labelName=void 0,this.colorRange=void 0,this.shape="circle",this.size=6,this.fill="black",this.fillOpacity=1,this.stroke="black",this.strokeWidth=1,this.strokeOpacity=1,this.label=new dV,this.tooltip=new But}isValid(){const t=super.isValid(),e=this.idKey!=null,i=this.latitudeKey!=null&&this.longitudeKey!=null;return!e&&!i?(zut.warnOnce("Either both [topology] and [idKey] or both [latitudeKey] and [longitudeKey] must be set to render a map marker series."),!1):t}};y([$t(Go,{optional:!0})],Qt.prototype,"topology",2),y([$t(gs,{optional:!0})],Qt.prototype,"title",2),y([$t(gs,{optional:!0})],Qt.prototype,"legendItemName",2),y([$t(gs,{optional:!0})],Qt.prototype,"idKey",2),y([$t(gs)],Qt.prototype,"topologyIdKey",2),y([$t(gs,{optional:!0})],Qt.prototype,"idName",2),y([$t(gs,{optional:!0})],Qt.prototype,"latitudeKey",2),y([$t(gs,{optional:!0})],Qt.prototype,"latitudeName",2),y([$t(gs,{optional:!0})],Qt.prototype,"longitudeKey",2),y([$t(gs,{optional:!0})],Qt.prototype,"longitudeName",2),y([$t(gs,{optional:!0})],Qt.prototype,"labelKey",2),y([$t(gs,{optional:!0})],Qt.prototype,"labelName",2),y([$t(gs,{optional:!0})],Qt.prototype,"sizeKey",2),y([$t(gs,{optional:!0})],Qt.prototype,"sizeName",2),y([$t(gs,{optional:!0})],Qt.prototype,"colorKey",2),y([$t(gs,{optional:!0})],Qt.prototype,"colorName",2),y([$t(Cut(Eut,Out.restrict({minLength:1})),{optional:!0})],Qt.prototype,"colorRange",2),y([$t(_ut)],Qt.prototype,"shape",2),y([$t(iC)],Qt.prototype,"size",2),y([$t(iC,{optional:!0})],Qt.prototype,"maxSize",2),y([$t(Rut,{optional:!0})],Qt.prototype,"sizeDomain",2),y([$t(cV)],Qt.prototype,"fill",2),y([$t(uV)],Qt.prototype,"fillOpacity",2),y([$t(cV)],Qt.prototype,"stroke",2),y([$t(iC)],Qt.prototype,"strokeWidth",2),y([$t(uV)],Qt.prototype,"strokeOpacity",2),y([$t(wut,{optional:!0})],Qt.prototype,"itemStyler",2),y([$t(hV)],Qt.prototype,"label",2),y([$t(hV)],Qt.prototype,"tooltip",2);var{CachedTextMeasurerPool:jut,Validate:Gut,fromToMotion:Vut,StateMachine:Uut,getMissCount:Wut,createDatumId:pV,SeriesNodePickMode:gV,valueProperty:Kh,computeMarkerFocusBounds:Hut,Logger:Yut,ColorScale:Kut,LinearScale:Xut,Group:Zut,Selection:sC,Text:$ut,getMarker:fV}=nV._ModuleSupport,Fv=class extends by{constructor(t){super({moduleCtx:t,useLabelLayer:!0,pickModes:[gV.EXACT_SHAPE_MATCH,gV.NEAREST_NODE],usesPlacedLabels:!0}),this.properties=new Qt,this._chartTopology=void 0,this.colorScale=new Kut,this.sizeScale=new Xut,this.markerGroup=this.contentGroup.appendChild(new Zut({name:"markerGroup"})),this.labelSelection=sC.select(this.labelGroup,$ut,!1),this.markerSelection=sC.select(this.markerGroup,()=>this.markerFactory(),!1),this.highlightMarkerSelection=sC.select(this.highlightNode,()=>this.markerFactory()),this.animationState=new Uut("empty",{empty:{update:{target:"ready",action:()=>this.animateMarkers()},reset:"empty",skip:"ready"},ready:{updateData:"waiting",clear:"clearing",resize:()=>this.resetAllAnimation(),reset:"empty",skip:"ready"},waiting:{update:{target:"ready",action:()=>this.animateMarkers()},resize:{target:"ready",action:()=>this.resetAllAnimation()},reset:"empty",skip:"ready"},clearing:{update:{target:"empty",action:()=>this.resetAllAnimation()},reset:"empty",skip:"ready"}},()=>this.checkProcessedDataAnimatable())}getNodeData(){return this.contextNodeData?.nodeData}get topology(){return this.properties.topology??this._chartTopology}get hasData(){const t=this.properties.latitudeKey!=null&&this.properties.longitudeKey!=null;return super.hasData&&(this.topology!=null||t)}renderToOffscreenCanvas(){return!0}setChartTopology(t){this._chartTopology=t,this.topology===t&&(this.nodeDataRefresh=!0)}setSeriesIndex(t){return super.setSeriesIndex(t)?(this.contentGroup.zIndex=[3,t],this.highlightGroup.zIndex=[4,t],!0):!1}isLabelEnabled(){return this.properties.labelKey!=null&&this.properties.label.enabled}markerFactory(){const{shape:t}=this.properties,e=fV(t);return new e}async processData(t){if(this.data==null||!this.properties.isValid())return;const{data:e,topology:i,sizeScale:s,colorScale:a}=this,{topologyIdKey:n,idKey:o,latitudeKey:r,longitudeKey:l,sizeKey:c,colorKey:h,labelKey:u,sizeDomain:d,colorRange:p}=this.properties,g=new Map;i?.features.forEach(N=>{const C=N.properties?.[n];C!=null&&g.set(C,N)});const f=this.sizeScale.type,x=this.colorScale.type,m=this.scale?.type,b=r!=null&&l!=null,{dataModel:v,processedData:S}=await this.requestDataModel(t,e,{props:[...o!=null?[Kh(o,m,{id:"idValue",includeProperty:!1}),Kh(o,m,{id:"featureValue",includeProperty:!1,processor:()=>N=>g.get(N)})]:[],...b?[Kh(r,m,{id:"latValue"}),Kh(l,m,{id:"lonValue"})]:[],...u?[Kh(u,"band",{id:"labelValue"})]:[],...c?[Kh(c,f,{id:"sizeValue"})]:[],...h?[Kh(h,x,{id:"colorValue"})]:[]]}),D=S.rawData.length!==0,k=D&&o!=null?v.resolveColumnById(this,"featureValue",S):void 0,L=D&&b?v.resolveColumnById(this,"latValue",S):void 0,T=D&&b?v.resolveColumnById(this,"lonValue",S):void 0;if(this.topologyBounds=S.rawData.reduce((N,C,O)=>{const E=k?.[O]?.geometry;if(E!=null&&(N=qd(E,N)),L!=null&&T!=null){const z=T[O],F=L[O];N=xy(N,z,F,z,F)}return N},void 0),c!=null){const N=v.resolveProcessedDataIndexById(this,"sizeValue"),C=S.domain.values[N]??[];s.domain=d??C}if(p!=null&&this.isColorScaleValid()){const N=v.resolveProcessedDataIndexById(this,"colorValue");a.domain=S.domain.values[N],a.range=p,a.update()}this.animationState.transition("updateData")}isColorScaleValid(){const{colorKey:t}=this.properties;if(!t)return!1;const{dataModel:e,processedData:i}=this;if(!e||!i)return!1;const s=e.resolveProcessedDataIndexById(this,"colorValue"),a=i.rawData.length,n=Wut(this,i.defs.values[s].missing);return!(a===0||a===n)}getLabelDatum(t,e,i,s,a,n){if(e==null)return;const{idKey:o,idName:r,latitudeKey:l,latitudeName:c,longitudeKey:h,longitudeName:u,sizeKey:d,sizeName:p,colorKey:g,colorName:f,labelKey:x,labelName:m,label:b}=this.properties,{placement:v}=b,S=this.getLabelText(b,{value:e,datum:t,idKey:o,idName:r,latitudeKey:l,latitudeName:c,longitudeKey:h,longitudeName:u,sizeKey:d,sizeName:p,colorKey:g,colorName:f,labelKey:x,labelName:m});if(S==null)return;const{width:D,height:k}=jut.measureText(String(S),{font:n});return{point:{x:i,y:s,size:a},label:{width:D,height:k,text:S},marker:fV(this.properties.shape),placement:v}}createNodeData(){const{id:t,dataModel:e,processedData:i,sizeScale:s,properties:a,scale:n}=this,{idKey:o,latitudeKey:r,longitudeKey:l,sizeKey:c,colorKey:h,labelKey:u,label:d}=a;if(e==null||i==null||i.rawData.length===0||n==null)return;const p=r!=null&&l!=null,g=o!=null?e.resolveColumnById(this,"idValue",i):void 0,f=o!=null?e.resolveColumnById(this,"featureValue",i):void 0,x=p?e.resolveColumnById(this,"latValue",i):void 0,m=p?e.resolveColumnById(this,"lonValue",i):void 0,b=u!=null?e.resolveColumnById(this,"labelValue",i):void 0,v=c!=null?e.resolveColumnById(this,"sizeValue",i):void 0,S=h!=null?e.resolveColumnById(this,"colorValue",i):void 0,D=a.maxSize??a.size;s.range=[Math.min(a.size,D),D];const k=d.getFont();let L;g!=null&&f!=null&&(L=new Map,i.rawData.forEach((R,E)=>{const z=g[E],F=f[E]?.geometry??void 0,G=F!=null&&n!=null?uc(F,n):void 0;z!=null&&G!=null&&L.set(z,G)}));const T=[],N=[],C=[];i.rawData.forEach((R,E)=>{const z=g?.[E],F=m?.[E],G=x?.[E],j=S?.[E],V=v?.[E],W=b?.[E],B=V!=null?s.convert(V,!0):a.size,U=z!=null?L?.get(z):void 0;if(z!=null&&uc==null&&C.push(z),F!=null&&G!=null){const[H,K]=n.convert([F,G]),X=this.getLabelDatum(R,W,H,K,B,k);X&&N.push(X),T.push({series:this,itemId:r,datum:R,datumIndex:E,index:-1,idValue:z,lonValue:F,latValue:G,labelValue:W,sizeValue:V,colorValue:j,point:{x:H,y:K,size:B},midPoint:{x:H,y:K}})}else U!=null&&lV(U,1).forEach(([H,K],X)=>{const Q=this.getLabelDatum(R,W,H,K,B,k);Q&&N.push(Q),T.push({series:this,itemId:r,datum:R,datumIndex:E,index:X,idValue:z,lonValue:F,latValue:G,labelValue:W,sizeValue:V,colorValue:j,point:{x:H,y:K,size:B},midPoint:{x:H,y:K}})})});const O=10;if(C.length>O){const R=C.length-O;C.length=O,C.push(`(+${R} more)`)}return C.length>0&&Yut.warnOnce("some data items do not have matches in the provided topology",C),{itemId:t,nodeData:T,labelData:N}}updateSelections(){this.nodeDataRefresh&&(this.contextNodeData=this.createNodeData(),this.nodeDataRefresh=!1)}checkScaleChange(){return this.previousScale===this.scale?!1:(this.previousScale=this.scale,!0)}update({seriesRect:t}){const e=this.checkResize(t),i=this.checkScaleChange(),{markerSelection:s,highlightMarkerSelection:a}=this;this.updateSelections(),this.contentGroup.visible=this.visible,this.contentGroup.opacity=this.getOpacity();let n=this.ctx.highlightManager?.getActiveHighlight();n!=null&&(n.series!==this||n.datum==null)&&(n=void 0);const o=this.contextNodeData?.nodeData??[];this.markerSelection=this.updateMarkerSelection({markerData:o,markerSelection:s}),this.updateMarkerNodes({markerSelection:s,isHighlight:!1,highlightedDatum:n}),this.highlightMarkerSelection=this.updateMarkerSelection({markerData:n!=null?[n]:[],markerSelection:a}),this.updateMarkerNodes({markerSelection:a,isHighlight:!0,highlightedDatum:n}),(i||e)&&this.animationState.transition("resize"),this.animationState.transition("update")}updatePlacedLabelData(t){this.labelSelection=this.labelSelection.update(t,e=>{e.pointerEvents=nV._ModuleSupport.PointerEvents.None}),this.updateLabelNodes({labelSelection:this.labelSelection})}updateLabelNodes(t){const{labelSelection:e}=t,{color:i,fontStyle:s,fontWeight:a,fontSize:n,fontFamily:o}=this.properties.label;e.each((r,{x:l,y:c,width:h,height:u,text:d})=>{r.visible=!0,r.x=l+h/2,r.y=c+u/2,r.text=d,r.fill=i,r.fontStyle=s,r.fontWeight=a,r.fontSize=n,r.fontFamily=o,r.textAlign="center",r.textBaseline="middle"})}updateMarkerSelection(t){const{markerData:e,markerSelection:i}=t;return i.update(e,void 0,s=>pV([s.index,s.idValue,s.lonValue,s.latValue]))}getMarkerItemBaseStyle(t){const{properties:e}=this,i=t?e.highlightStyle.item:void 0,s=this.getStrokeWidth(e.strokeWidth);return{size:e.size,fill:i?.fill??e.fill,fillOpacity:i?.fillOpacity??e.fillOpacity,stroke:i?.stroke??e.stroke,strokeWidth:i?.strokeWidth??s,strokeOpacity:i?.strokeOpacity??e.strokeOpacity}}getMarkerItemStyleOverrides(t,e,i,s,a,n){const{id:o,properties:r,colorScale:l,sizeScale:c}=this,{colorRange:h,itemStyler:u}=r;let d;if(!n&&i!=null&&(d??(d={}),d.fill=this.isColorScaleValid()?l.convert(i):h?.[0]??r.fill),s!=null&&(d??(d={}),d.size=c.convert(s,!0)),u!=null){const p=this.cachedDatumCallback(pV(t,n?"highlight":"node"),()=>u({seriesId:o,datum:e,highlighted:n,...a,...d}));d??(d={}),Object.assign(d,p)}return d}updateMarkerNodes(t){const{markerSelection:e,isHighlight:i,highlightedDatum:s}=t,a=this.getMarkerItemBaseStyle(i);e.each((n,o)=>{const{datumIndex:r,datum:l,point:c,colorValue:h,sizeValue:u}=o,d=this.getMarkerItemStyleOverrides(String(r),l,h,u,a,i);n.size=d?.size??a.size,n.fill=d?.fill??a.fill,n.fillOpacity=d?.fillOpacity??a.fillOpacity,n.stroke=d?.stroke??a.stroke,n.strokeWidth=d?.strokeWidth??a.strokeWidth,n.strokeOpacity=d?.strokeOpacity??a.strokeOpacity,n.translationX=c.x,n.translationY=c.y,n.zIndex=!i&&s!=null&&l===s.datum?1:0})}isProcessedDataAnimatable(){return!0}resetAnimation(t){t==="initial"?this.animationState.transition("reset"):t==="ready"&&this.animationState.transition("skip")}resetAllAnimation(){this.ctx.animationManager.stopByAnimationGroupId(this.id),this.ctx.animationManager.skipCurrentBatch(),this.labelSelection.cleanup(),this.markerSelection.cleanup(),this.highlightMarkerSelection.cleanup()}animateMarkers(){const{animationManager:t}=this.ctx,e=nut();Vut(this.id,"markers",t,[this.markerSelection,this.highlightMarkerSelection],e)}getLabelData(){return this.isLabelEnabled()?this.contextNodeData?.labelData??[]:[]}pickNodeClosestDatum(t){const{x:e,y:i}=t;let s=1/0,a;return this.contextNodeData?.nodeData.forEach(n=>{const{x:o,y:r,size:l}=n.point,c=Math.max(Math.abs(o-e)-l,0),h=Math.max(Math.abs(r-i)-l,0),u=c*c+h*h;u<s&&(s=u,a=n)}),a!=null?{datum:a,distance:Math.sqrt(s)}:void 0}legendItemSymbol(t){const{dataModel:e,processedData:i,properties:s}=this,{shape:a,fillOpacity:n,stroke:o,strokeWidth:r,strokeOpacity:l}=s;let{fill:c}=s;if(t!=null&&this.isColorScaleValid()){const u=e.resolveColumnById(this,"colorValue",i)[t];c=this.colorScale.convert(u)}return{marker:{shape:a,fill:c,fillOpacity:n,stroke:o,strokeWidth:r,strokeOpacity:l}}}getLegendData(t){const{processedData:e,dataModel:i}=this;if(e==null||i==null)return[];const{id:s,visible:a}=this,{title:n,legendItemName:o,idName:r,idKey:l,colorKey:c,colorName:h,colorRange:u,showInLegend:d}=this.properties;if(t==="gradient"&&c!=null&&u!=null){const p=e.domain.values[i.resolveProcessedDataIndexById(this,"colorValue")];return[{legendType:"gradient",enabled:a,seriesId:s,colorName:h,colorRange:u,colorDomain:p}]}else return t==="category"?[{legendType:"category",id:s,itemId:s,seriesId:s,enabled:a,label:{text:o??n??r??l??s},symbol:this.legendItemSymbol(),legendItemName:o,hideInLegend:!d}]:[]}getTooltipContent(t){const{id:e,dataModel:i,processedData:s,properties:a}=this,{idKey:n,idName:o,latitudeKey:r,latitudeName:l,longitudeKey:c,longitudeName:h,colorKey:u,colorName:d,sizeKey:p,sizeName:g,labelKey:f,labelName:x,title:m,legendItemName:b,tooltip:v}=a;if(!i||!s?.rawData.length)return;const{datumIndex:S}=t,D=s.rawData[S],k=p!=null?i.resolveColumnById(this,"sizeValue",s)[S]:void 0,L=u!=null?i.resolveColumnById(this,"colorValue",s)[S]:void 0,T=[];if(k!=null&&T.push({label:g,fallbackLabel:p,value:String(k)}),L!=null&&T.push({label:d,fallbackLabel:u,value:String(L)}),f!=null&&f!==n){const O=i.resolveColumnById(this,"labelValue",s)[S];T.push({label:x,fallbackLabel:f,value:O})}let N;if(n!=null)N=i.resolveColumnById(this,"idValue",s)[S];else if(r!=null&&c!=null){const O=i.resolveColumnById(this,"latValue",s)[S],R=i.resolveColumnById(this,"lonValue",s)[S];N=`${Math.abs(O).toFixed(4)}\xB0 ${O>=0?"N":"S"}, ${Math.abs(R).toFixed(4)}\xB0 ${R>=0?"W":"E"}`}const C=this.getMarkerItemBaseStyle(!1);return Object.assign(C,this.getMarkerItemStyleOverrides(String(S),S,L,k,C,!1)),v.formatTooltip({heading:N,title:m??b,symbol:this.legendItemSymbol(S),data:T},{seriesId:e,datum:D,title:m,idKey:n,idName:o,latitudeKey:r,latitudeName:l,longitudeKey:c,longitudeName:h,colorKey:u,colorName:d,sizeKey:p,sizeName:g,labelKey:f,labelName:x,...C})}getFormattedMarkerStyle(t){const{datumIndex:e,colorValue:i,sizeValue:s}=t,a=this.getMarkerItemBaseStyle(!1);return Object.assign(a,this.getMarkerItemStyleOverrides(String(e),e,i,s,a,!1)),{size:a.size}}computeFocusBounds(t){return Hut(this,t)}};Fv.className="MapMarkerSeries",Fv.type="map-marker",y([Gut(Go,{optional:!0,property:"topology"})],Fv.prototype,"_chartTopology",2);var{DEFAULT_LABEL_COLOUR:Qut,DEFAULT_DIVERGING_SERIES_COLOR_RANGE:qut}=aV._ModuleSupport.ThemeSymbols,Jut={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["topology"],identifier:"map-marker",moduleFactory:t=>new Fv(t),tooltipDefaults:{range:"exact"},themeTemplate:{...my,series:{shape:"circle",maxSize:30,fillOpacity:.5,label:{color:Qut}}},paletteFactory:t=>{const{takeColors:e,colorsCount:i,userPalette:s,themeTemplateParameters:a}=t,{fill:n,stroke:o}=aV._ModuleSupport.singleSeriesPaletteFactory(t),r=a.get(qut),{fills:l}=e(i);return{fill:n,stroke:o,colorRange:s==="inbuilt"?r:[l[0],l[1]]}}},tdt=(P(),_(w)),edt=(P(),_(w)),idt=(P(),_(w)),{COLOR_STRING:yV,LINE_DASH:sdt,OBJECT:adt,POSITIVE_NUMBER:mV,RATIO:xV,Validate:Gr,SeriesProperties:ndt,SeriesTooltip:odt}=idt._ModuleSupport,Vo=class extends ndt{constructor(){super(...arguments),this.topology=void 0,this.fill="black",this.fillOpacity=1,this.stroke="black",this.strokeOpacity=1,this.strokeWidth=0,this.lineDash=[0],this.lineDashOffset=0,this.tooltip=new odt}};y([Gr(Go,{optional:!0})],Vo.prototype,"topology",2),y([Gr(yV)],Vo.prototype,"fill",2),y([Gr(xV)],Vo.prototype,"fillOpacity",2),y([Gr(yV)],Vo.prototype,"stroke",2),y([Gr(xV)],Vo.prototype,"strokeOpacity",2),y([Gr(mV)],Vo.prototype,"strokeWidth",2),y([Gr(sdt)],Vo.prototype,"lineDash",2),y([Gr(mV)],Vo.prototype,"lineDashOffset",2),y([Gr(adt)],Vo.prototype,"tooltip",2);var{createDatumId:rdt,SeriesNodePickMode:ldt,Validate:cdt,Logger:hdt,Selection:udt,Group:ddt,PointerEvents:pdt}=edt._ModuleSupport,jv=class extends by{constructor(t){super({moduleCtx:t,useLabelLayer:!0,pickModes:[ldt.EXACT_SHAPE_MATCH]}),this.properties=new Vo,this._chartTopology=void 0,this.itemGroup=this.contentGroup.appendChild(new ddt({name:"itemGroup"})),this.datumSelection=udt.select(this.itemGroup,()=>this.nodeFactory())}get topology(){return this.properties.topology??this._chartTopology}setOptionsData(){}setChartData(){}getNodeData(){}get hasData(){return!1}renderToOffscreenCanvas(){return!0}setChartTopology(t){this._chartTopology=t,this.topology===t&&(this.nodeDataRefresh=!0)}setSeriesIndex(t){return super.setSeriesIndex(t)?(this.contentGroup.zIndex=[0,t,0],this.highlightGroup.zIndex=[0,t,1],!0):!1}nodeFactory(){const t=new Qd;return t.renderMode=1,t.lineJoin="round",t.pointerEvents=pdt.None,t}processData(){const{topology:t}=this;this.topologyBounds=t?.features.reduce((e,i)=>{const s=i.geometry;return s==null?e:qd(s,e)},void 0),t==null&&hdt.warnOnce("no topology was provided for [MapShapeBackgroundSeries]; nothing will be rendered.")}createNodeData(){const{id:t,topology:e,scale:i}=this;if(e==null)return;const s=[],a=[];return e.features.forEach((n,o)=>{const{geometry:r}=n,l=r!=null&&i!=null?uc(r,i):void 0;l!=null&&s.push({series:this,itemId:o,datum:n,index:o,projectedGeometry:l})}),{itemId:t,nodeData:s,labelData:a}}updateSelections(){this.nodeDataRefresh&&(this.contextNodeData=this.createNodeData(),this.nodeDataRefresh=!1)}update(){const{datumSelection:t}=this;this.updateSelections(),this.contentGroup.visible=this.visible;const{nodeData:e=[]}=this.contextNodeData??{};this.datumSelection=this.updateDatumSelection({nodeData:e,datumSelection:t}),this.updateDatumNodes({datumSelection:t})}updateDatumSelection(t){return t.datumSelection.update(t.nodeData,void 0,e=>rdt(e.index))}updateDatumNodes(t){const{properties:e}=this,{datumSelection:i}=t,{fill:s,fillOpacity:a,stroke:n,strokeOpacity:o,lineDash:r,lineDashOffset:l}=e,c=this.getStrokeWidth(e.strokeWidth);i.each((h,u)=>{const{projectedGeometry:d}=u;if(d==null){h.visible=!1,h.projectedGeometry=void 0;return}h.visible=!0,h.projectedGeometry=d,h.fill=s,h.fillOpacity=a,h.stroke=n,h.strokeWidth=c,h.strokeOpacity=o,h.lineDash=r,h.lineDashOffset=l})}resetAnimation(){}getLegendData(){return[]}getTooltipContent(t){}pickFocus(){}computeFocusBounds(t){}};jv.className="MapShapeBackgroundSeries",jv.type="map-shape-background",y([cdt(Go,{optional:!0,property:"topology"})],jv.prototype,"_chartTopology",2);var{DEFAULT_BACKGROUND_COLOUR:gdt,DEFAULT_HIERARCHY_FILLS:fdt}=tdt._ModuleSupport.ThemeSymbols,ydt={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["topology"],identifier:"map-shape-background",moduleFactory:t=>new jv(t),tooltipDefaults:{range:"exact"},themeTemplate:{...my,series:{stroke:gdt,strokeWidth:1}},paletteFactory:({themeTemplateParameters:t})=>({fill:t.get(fdt)?.[1]})},bV=(P(),_(w)),SV=(P(),_(w));function mdt(t,{aspectRatio:e,precision:i}){const s=oV(t,i,(l,c,h,u)=>{const d=bdt(l,c,h,e),p=d+2*u*e,g=d*Math.SQRT2,f=p*Math.SQRT2;return{distance:g,maxDistance:f}});if(s==null)return;const{x:a,y:n,distance:o}=s,r=o/Math.SQRT2;return{x:a,y:n,maxWidth:r}}function xdt(t,e,i,s,a){const[n,o]=t,[r,l]=e,c=1/a,h=r-n,u=l-o,[d,p]=o<=l?t:e,[g,f]=n<=r?t:e,[x,m]=o<=l?e:t,[b,v]=n<=r?e:t;let S=1/0;if(h!==0){const C=u/h;for(let O=0;O<=1;O+=1){const R=O===0?c:-c,E=(C*n-o-R*i+s)/(C-R);if(E>=g&&E<=b){const z=Math.abs(i-E)*2;S=Math.min(S,z)}}}else for(let C=0;C<=1;C+=1){const R=(C===0?c:-c)*(n-i)+s;if(R>=p&&R<=m){const z=Math.abs(s-R)*2*a;S=Math.min(S,z)}}const D=a,k=Math.abs((d-i)/(p-s)),L=Math.abs((x-i)/(m-s));if(m<s&&L<D){const O=Math.abs(s-m)*2*a;S=Math.min(S,O)}else if(p>s&&k<D){const O=Math.abs(s-p)*2*a;S=Math.min(S,O)}const T=Math.abs((f-s)/(g-i)),N=Math.abs((v-s)/(b-i));if(b<i&&N<c){const C=Math.abs(i-b)*2;S=Math.min(S,C)}else if(g>i&&T<c){const C=Math.abs(i-g)*2;S=Math.min(S,C)}return S}function bdt(t,e,i,s){let a=!1,n=1/0;for(const o of t){let r=o[o.length-1],[l,c]=r;for(const h of o){const[u,d]=h;d>i!=c>i&&e<(l-u)*(i-d)/(c-d)+u&&(a=!a);const p=xdt(r,h,e,i,s);n=Math.min(n,p),r=h,l=u,c=d}}return(a?1:-1)*n}function Gv(t,e,i){i>=e&&(t.maxX=Math.min(t.maxX,i-e)),i<=e&&(t.minX=Math.max(t.minX,i-e))}function Sdt(t,e,i,s,a,n){const o=a-n/2,r=a+n/2,[l,c]=e,[h,u]=i,d=h-l,p=u-c,[g,f]=l<=h?e:i,[x,m]=l<=h?i:e;if(d!==0){const b=p/d;for(let v=0;v<=1;v+=1){const D=((v===0?o:r)-c)/b+l;D>=g&&D<=x&&Gv(t,s,D)}}else Math.max(o,Math.min(c,u))<=Math.min(r,Math.max(c,u))&&Gv(t,s,l);return x<s&&m>=o&&m<=r?Gv(t,s,x):g>s&&f>=o&&f<=r&&Gv(t,s,g),t}function vdt(t,e,i,s){const a={minX:-1/0,maxX:1/0};for(const r of t){let l=r[r.length-1];for(const c of r)Sdt(a,l,c,e,i,s),l=c}const{minX:n,maxX:o}=a;return Number.isFinite(n)&&Number.isFinite(o)?{x:e+(n+o)/2,width:o-n}:{x:e,width:0}}var Mdt=(P(),_(w)),{AND:Ddt,ARRAY:Adt,COLOR_STRING:vV,COLOR_STRING_ARRAY:Idt,FUNCTION:kdt,LINE_DASH:Ldt,OBJECT:MV,POSITIVE_NUMBER:aC,RATIO:DV,STRING:Vr,Validate:Ee,SeriesProperties:Tdt,SeriesTooltip:Ndt}=Mdt._ModuleSupport,Le=class extends Tdt{constructor(){super(...arguments),this.topology=void 0,this.idKey="",this.idName=void 0,this.topologyIdKey="name",this.labelKey=void 0,this.labelName=void 0,this.colorRange=void 0,this.fill="black",this.fillOpacity=1,this.stroke="black",this.strokeOpacity=1,this.strokeWidth=0,this.lineDash=[0],this.lineDashOffset=0,this.padding=0,this.label=new py,this.tooltip=new Ndt}};y([Ee(Go,{optional:!0})],Le.prototype,"topology",2),y([Ee(Vr,{optional:!0})],Le.prototype,"title",2),y([Ee(Vr,{optional:!0})],Le.prototype,"legendItemName",2),y([Ee(Vr)],Le.prototype,"idKey",2),y([Ee(Vr,{optional:!0})],Le.prototype,"idName",2),y([Ee(Vr)],Le.prototype,"topologyIdKey",2),y([Ee(Vr,{optional:!0})],Le.prototype,"labelKey",2),y([Ee(Vr,{optional:!0})],Le.prototype,"labelName",2),y([Ee(Vr,{optional:!0})],Le.prototype,"colorKey",2),y([Ee(Vr,{optional:!0})],Le.prototype,"colorName",2),y([Ee(Ddt(Idt,Adt.restrict({minLength:1})),{optional:!0})],Le.prototype,"colorRange",2),y([Ee(vV)],Le.prototype,"fill",2),y([Ee(DV)],Le.prototype,"fillOpacity",2),y([Ee(vV)],Le.prototype,"stroke",2),y([Ee(DV)],Le.prototype,"strokeOpacity",2),y([Ee(aC)],Le.prototype,"strokeWidth",2),y([Ee(Ldt)],Le.prototype,"lineDash",2),y([Ee(aC)],Le.prototype,"lineDashOffset",2),y([Ee(aC)],Le.prototype,"padding",2),y([Ee(kdt,{optional:!0})],Le.prototype,"itemStyler",2),y([Ee(MV)],Le.prototype,"label",2),y([Ee(MV)],Le.prototype,"tooltip",2);var{getMissCount:Cdt,createDatumId:AV,SeriesNodePickMode:IV,valueProperty:Vv,Validate:Odt,CachedTextMeasurerPool:Edt,TextUtils:kV,Logger:LV,ColorScale:wdt,Group:TV,Selection:nC,Text:Rdt,PointerEvents:_dt}=SV._ModuleSupport,NV=SV._ModuleSupport.MercatorScale.fixedScale(),Uv=class extends by{constructor(t){super({moduleCtx:t,useLabelLayer:!0,pickModes:[IV.EXACT_SHAPE_MATCH,IV.NEAREST_NODE]}),this.properties=new Le,this._chartTopology=void 0,this.colorScale=new wdt,this.itemGroup=this.contentGroup.appendChild(new TV({name:"itemGroup"})),this.itemLabelGroup=this.contentGroup.appendChild(new TV({name:"itemLabelGroup"})),this.datumSelection=nC.select(this.itemGroup,()=>this.nodeFactory()),this.labelSelection=nC.select(this.itemLabelGroup,Rdt),this.highlightDatumSelection=nC.select(this.highlightNode,()=>this.nodeFactory()),this.previousLabelLayouts=void 0,this._previousDatumMidPoint=void 0,this.itemLabelGroup.pointerEvents=_dt.None}getNodeData(){return this.contextNodeData?.nodeData}get topology(){return this.properties.topology??this._chartTopology}get hasData(){return super.hasData&&this.topology!=null}renderToOffscreenCanvas(){return!0}setChartTopology(t){this._chartTopology=t,this.topology===t&&(this.nodeDataRefresh=!0)}setSeriesIndex(t){return super.setSeriesIndex(t)?(this.contentGroup.zIndex=[1,t],this.highlightGroup.zIndex=[2,t],!0):!1}isLabelEnabled(){return this.properties.labelKey!=null&&this.properties.label.enabled}nodeFactory(){const t=new Qd;return t.renderMode=1,t.lineJoin="round",t}async processData(t){if(this.data==null||!this.properties.isValid())return;const{data:e,topology:i,colorScale:s}=this,{topologyIdKey:a,idKey:n,colorKey:o,labelKey:r,colorRange:l}=this.properties,c=new Map;i?.features.forEach(f=>{const x=f.properties?.[a];x==null||!$N(f.geometry,1)||c.set(x,f)});const h=this.colorScale.type,u=this.scale?.type,{dataModel:d,processedData:p}=await this.requestDataModel(t,e,{props:[Vv(n,u,{id:"idValue",includeProperty:!1}),Vv(n,u,{id:"featureValue",includeProperty:!1,processor:()=>f=>c.get(f)}),...r?[Vv(r,"band",{id:"labelValue"})]:[],...o?[Vv(o,h,{id:"colorValue"})]:[]]}),g=p.rawData.length!==0?d.resolveColumnById(this,"featureValue",p):void 0;if(this.topologyBounds=g?.reduce((f,x)=>{const m=x?.geometry;return m==null?f:qd(m,f)},void 0),l!=null&&this.isColorScaleValid()){const f=d.resolveProcessedDataIndexById(this,"colorValue");s.domain=p.domain.values[f],s.range=l,s.update()}i==null&&LV.warnOnce("no topology was provided for [MapShapeSeries]; nothing will be rendered.")}isColorScaleValid(){const{colorKey:t}=this.properties;if(!t)return!1;const{dataModel:e,processedData:i}=this;if(!e||!i)return!1;const s=e.resolveProcessedDataIndexById(this,"colorValue"),a=i.rawData.length,n=Cdt(this,i.defs.values[s].missing);return!(a===0||a===n)}getLabelLayout(t,e,i,s,a){if(e==null||s==null)return;const{idKey:n,idName:o,colorKey:r,colorName:l,labelKey:c,labelName:h,padding:u,label:d}=this.properties,p=this.getLabelText(d,{value:e,datum:t,idKey:n,idName:o,colorKey:r,colorName:l,labelKey:c,labelName:h});if(p==null)return;const g=Edt.measureText(String(p),{font:i}),f=p.split(`
`).length,x=(g.width+2*u)/(f*kV.getLineHeight(d.fontSize)+2*u);if(a?.geometry===s&&a?.labelText===p&&a?.aspectRatio===x)return a;const m=uc(s,NV),b=Rv(m);if(b==null)return;const v=mdt(b,{aspectRatio:x,precision:.001});if(v==null)return;const{x:S,y:D,maxWidth:k}=v;return{geometry:s,labelText:p,aspectRatio:x,x:S,y:D,maxWidth:k,fixedPolygon:b}}getLabelDatum(t,e){const{scale:i}=this;if(i==null)return;const{padding:s,label:a}=this.properties,{labelText:n,aspectRatio:o,x:r,y:l,maxWidth:c,fixedPolygon:h}=t,u={width:Math.ceil(c*e),height:Math.ceil(c*e/o),meta:r},d=uy(n,a,{padding:s},(S,D)=>{if(!D)return u;const k=vdt(h,r,l,S/e);return{width:k.width*e,height:S,meta:k.x}});if(d==null)return;const[{text:p,fontSize:g,lineHeight:f,width:x},m]=d;if(p===kV.EllipsisChar)return;const b=x<u.width?r:m,v=this.scale.convert(NV.invert([b,l]));return{x:v[0],y:v[1],text:p,fontSize:g,lineHeight:f}}createNodeData(){const{id:t,dataModel:e,processedData:i,properties:s,scale:a,previousLabelLayouts:n}=this,{idKey:o,colorKey:r,labelKey:l,label:c}=s;if(e==null||i==null||i.rawData.length===0)return;const h=a!=null?(a.range[1][0]-a.range[0][0])/a.bounds.width:NaN,u=e.resolveColumnById(this,"idValue",i),d=e.resolveColumnById(this,"featureValue",i),p=l!=null?e.resolveColumnById(this,"labelValue",i):void 0,g=r!=null?e.resolveColumnById(this,"colorValue",i):void 0,f=c.getFont(),x=new Map;this.previousLabelLayouts=x;const m=[],b=[],v=[];i.rawData.forEach((D,k)=>{const L=u[k],T=g?.[k],N=p?.[k],C=d[k]?.geometry??void 0;C==null&&v.push(L);const O=this.getLabelLayout(D,N,f,C,n?.get(L));O!=null&&x.set(L,O);const R=O!=null&&a!=null?this.getLabelDatum(O,h):void 0;R!=null&&b.push(R);const E=C!=null&&a!=null?uc(C,a):void 0;m.push({series:this,itemId:o,datum:D,datumIndex:k,idValue:L,colorValue:T,labelValue:N,projectedGeometry:E})});const S=10;if(v.length>S){const D=v.length-S;v.length=S,v.push(`(+${D} more)`)}return v.length>0&&LV.warnOnce("some data items do not have matches in the provided topology",v),{itemId:t,nodeData:m,labelData:b}}updateSelections(){this.nodeDataRefresh&&(this.contextNodeData=this.createNodeData(),this.nodeDataRefresh=!1)}update(){const{datumSelection:t,labelSelection:e,highlightDatumSelection:i}=this;this.updateSelections(),this.contentGroup.visible=this.visible,this.contentGroup.opacity=this.getOpacity();let s=this.ctx.highlightManager?.getActiveHighlight();s!=null&&(s.series!==this||s.datum==null)&&(s=void 0);const a=this.contextNodeData?.nodeData??[],n=this.contextNodeData?.labelData??[];this.datumSelection=this.updateDatumSelection({nodeData:a,datumSelection:t}),this.updateDatumNodes({datumSelection:t,isHighlight:!1}),this.labelSelection=this.updateLabelSelection({labelData:n,labelSelection:e}),this.updateLabelNodes({labelSelection:e}),this.highlightDatumSelection=this.updateDatumSelection({nodeData:s!=null?[s]:[],datumSelection:i}),this.updateDatumNodes({datumSelection:i,isHighlight:!0})}updateDatumSelection(t){return t.datumSelection.update(t.nodeData,void 0,e=>AV(e.idValue))}getItemBaseStyle(t){const{properties:e}=this,i=t?e.highlightStyle.item:void 0,s=this.getStrokeWidth(e.strokeWidth);return{fill:i?.fill??e.fill,fillOpacity:i?.fillOpacity??e.fillOpacity,stroke:i?.stroke??e.stroke,strokeWidth:i?.strokeWidth??s,strokeOpacity:i?.strokeOpacity??e.strokeOpacity,lineDash:i?.lineDash??e.lineDash,lineDashOffset:i?.lineDashOffset??e.lineDashOffset}}getItemStyleOverrides(t,e,i,s,a){const{id:n,properties:o,colorScale:r}=this,{colorRange:l,itemStyler:c}=o;let h;if(!a&&i!=null&&(h??(h={}),h.fill=this.isColorScaleValid()?r.convert(i):l?.[0]??o.fill),c!=null){const u=this.cachedDatumCallback(AV(t,a?"highlight":"node"),()=>c({seriesId:n,datum:e,highlighted:a,...s,...h}));h??(h={}),Object.assign(h,u)}return h}updateDatumNodes(t){const{datumSelection:e,isHighlight:i}=t,s=this.getItemBaseStyle(i);e.each((a,n)=>{const{datum:o,datumIndex:r,colorValue:l,projectedGeometry:c}=n;if(c==null){a.visible=!1,a.projectedGeometry=void 0;return}const h=this.getItemStyleOverrides(String(r),o,l,s,i);a.visible=!0,a.projectedGeometry=c,a.fill=h?.fill??s.fill,a.fillOpacity=h?.fillOpacity??s.fillOpacity,a.stroke=h?.stroke??s.stroke,a.strokeWidth=h?.strokeWidth??s.strokeWidth,a.strokeOpacity=h?.strokeOpacity??s.strokeOpacity,a.lineDash=h?.lineDash??s.lineDash,a.lineDashOffset=h?.lineDashOffset??s.lineDashOffset})}updateLabelSelection(t){const e=this.isLabelEnabled()?t.labelData:[];return t.labelSelection.update(e)}updateLabelNodes(t){const{labelSelection:e}=t,{color:i,fontStyle:s,fontWeight:a,fontFamily:n}=this.properties.label;e.each((o,{x:r,y:l,text:c,fontSize:h,lineHeight:u})=>{o.visible=!0,o.x=r,o.y=l,o.text=c,o.fill=i,o.fontStyle=s,o.fontWeight=a,o.fontSize=h,o.lineHeight=u,o.fontFamily=n,o.textAlign="center",o.textBaseline="middle"})}resetAnimation(){}pickNodeClosestDatum({x:t,y:e}){let i=1/0,s;return this.datumSelection.each((a,n)=>{const o=a.distanceSquared(t,e);o<i&&(i=o,s=n)}),s!=null?{datum:s,distance:Math.sqrt(i)}:void 0}datumMidPoint(t){const{_previousDatumMidPoint:e}=this;if(e?.datum===t)return e.point;const i=t.projectedGeometry,s=i!=null?Rv(i):void 0,a=s!=null?eC(s,2):void 0,n=a!=null?{x:a[0],y:a[1]}:void 0;return this._previousDatumMidPoint={datum:t,point:n},n}legendItemSymbol(t){const{dataModel:e,processedData:i,properties:s}=this,{fillOpacity:a,stroke:n,strokeWidth:o,strokeOpacity:r}=s;let{fill:l}=s;if(t!=null&&this.isColorScaleValid()){const h=e.resolveColumnById(this,"colorValue",i)[t];l=this.colorScale.convert(h)}return{marker:{fill:l,fillOpacity:a,stroke:n,strokeWidth:o,strokeOpacity:r}}}getLegendData(t){const{processedData:e,dataModel:i}=this;if(e==null||i==null)return[];const{id:s,visible:a}=this,{title:n,legendItemName:o,idKey:r,idName:l,colorKey:c,colorName:h,colorRange:u,showInLegend:d}=this.properties;if(t==="gradient"&&c!=null&&u!=null){const p=e.domain.values[i.resolveProcessedDataIndexById(this,"colorValue")];return[{legendType:"gradient",enabled:a,seriesId:s,colorName:h,colorRange:u,colorDomain:p}]}else return t==="category"?[{legendType:"category",id:s,itemId:s,seriesId:s,enabled:a,label:{text:o??n??l??r},symbol:this.legendItemSymbol(),legendItemName:o,hideInLegend:!d}]:[]}getTooltipContent(t){const{id:e,dataModel:i,processedData:s,properties:a}=this,{idKey:n,idName:o,colorKey:r,colorName:l,labelKey:c,labelName:h,legendItemName:u,title:d,tooltip:p}=a;if(!i||!s?.rawData.length)return;const{datumIndex:g}=t,f=s.rawData[g],x=i.resolveColumnById(this,"idValue",s)[g],m=r!=null?i.resolveColumnById(this,"colorValue",s)[g]:void 0,b=[];if(m!=null&&b.push({label:l,fallbackLabel:r,value:String(m)}),c!=null&&c!==n){const S=i.resolveColumnById(this,"labelValue",s)[g];b.push({label:h,fallbackLabel:c,value:S})}const v=this.getItemBaseStyle(!1);return Object.assign(v,this.getItemStyleOverrides(String(g),g,m,v,!1)),p.formatTooltip({heading:x,title:d??u,symbol:this.legendItemSymbol(g),data:b},{seriesId:e,datum:f,title:d,idKey:n,idName:o,colorKey:r,colorName:l,labelKey:c,labelName:h,...v})}computeFocusBounds(t){return JG(this,t)}};Uv.className="MapShapeSeries",Uv.type="map-shape",y([Odt(Go,{optional:!0,property:"topology"})],Uv.prototype,"_chartTopology",2);var{DEFAULT_INVERTED_LABEL_COLOUR:Pdt,DEFAULT_DIVERGING_SERIES_COLOR_RANGE:Bdt,DEFAULT_BACKGROUND_COLOUR:zdt}=bV._ModuleSupport.ThemeSymbols,Fdt={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["topology"],identifier:"map-shape",moduleFactory:t=>new Uv(t),tooltipDefaults:{range:"exact"},themeTemplate:{...my,series:{fillOpacity:1,strokeWidth:1,lineDash:[0],lineDashOffset:0,padding:2,label:{color:Pdt,fontWeight:"bold",overflowStrategy:"hide"}}},paletteFactory:t=>{const{takeColors:e,colorsCount:i,userPalette:s,themeTemplateParameters:a}=t,{fill:n}=bV._ModuleSupport.singleSeriesPaletteFactory(t),o=a.get(Bdt),{fills:r}=e(i);return{fill:n,stroke:a.get(zdt),colorRange:s==="inbuilt"?o:[r[0],r[1]]}}},jdt=(P(),_(w)),Gdt=(P(),_(w)),oC=(P(),_(w)),{isDefined:Vdt,ChartAxisDirection:Ur,PolarAxis:Udt,diff:Wdt,fixNumericExtent:Hdt,groupAccumulativeValueProperty:CV,keyProperty:Ydt,normaliseGroupTo:Kdt,resetLabelFn:Xdt,seriesLabelFadeInAnimation:Zdt,seriesLabelFadeOutAnimation:$dt,valueProperty:Qdt,animationValidation:qdt,createDatumId:OV,SeriesNodePickMode:EV,normalizeAngle360:wV,BandScale:Jdt,motion:RV}=oC._ModuleSupport,tpt=class extends oC._ModuleSupport.SeriesNodeEvent{constructor(t,e,i,s){super(t,e,i,s),this.angleKey=s.properties.angleKey,this.radiusKey=s.properties.radiusKey}},_V=class extends oC._ModuleSupport.PolarSeries{constructor(t,{animationResetFns:e}){super({moduleCtx:t,useLabelLayer:!0,canHaveAxes:!0,pickModes:[EV.NEAREST_NODE,EV.EXACT_SHAPE_MATCH],animationResetFns:{...e,label:Xdt}}),this.NodeEvent=tpt,this.groupScale=new Jdt,this.circleCache={r:0,cx:0,cy:0}}getSeriesDomain(t){const{dataModel:e,processedData:i}=this;if(!i||!e)return[];if(t===Ur.X)return e.getDomain(this,"angleValue","key",i);{const s=e.getDomain(this,"radiusValue-end","value",i),a=[s[0]>0?0:s[0],s[1]<0?0:s[1]];return Hdt(a)}}async processData(t){const{visible:e}=this,{angleKey:i,radiusKey:s,normalizedTo:a}=this.properties,n=!this.ctx.animationManager.isSkipped();if(!this.properties.isValid())return;const o=this.getStackId(),r=`${o}-trailing`,l=[];Vdt(a)&&l.push(Kdt([o,r],Math.abs(a),"range")),n&&this.processedData&&l.push(Wdt(this.id,this.processedData)),n&&l.push(qdt());const c=e||!n?{}:{forceValue:0},h=this.axes[Ur.Y]?.scale.type,u=this.axes[Ur.X]?.scale.type;await this.requestDataModel(t,this.data,{props:[Ydt(i,u,{id:"angleValue"}),Qdt(s,h,{id:"radiusValue-raw",invalidValue:null,...c}),...CV(s,"normal","current",{id:"radiusValue-end",rangeId:"radiusValue-range",invalidValue:null,groupId:o,separateNegative:!0,...c},h),...CV(s,"trailing","current",{id:"radiusValue-start",invalidValue:null,groupId:r,separateNegative:!0,...c},h),...l]}),this.animationState.transition("updateData")}didCircleChange(){const t=this.radius,e=this.centerX,i=this.centerY,s=this.circleCache;return t!==s.r||e!==s.cx||i!==s.cy?(this.circleCache={r:t,cx:e,cy:i},!0):!1}isRadiusAxisReversed(){return this.axes[Ur.Y]?.isReversed()}maybeRefreshNodeData(){if(!this.didCircleChange()&&!this.nodeDataRefresh)return;const{nodeData:e=[]}=this.createNodeData()??{};this.nodeData=e,this.nodeDataRefresh=!1}getAxisInnerRadius(){const t=this.axes[Ur.Y];return t instanceof Udt?this.radius*t.innerRadiusRatio:0}createNodeData(){const{processedData:t,dataModel:e,groupScale:i}=this;if(!e||!t||t.type!=="ungrouped"||t.rawData.length===0||!this.properties.isValid())return;const s=this.axes[Ur.X],a=this.axes[Ur.Y],n=s?.scale,o=a?.scale;if(!n||!o)return;const r=e.resolveKeysById(this,"angleValue",t),l=e.resolveColumnById(this,"radiusValue-start",t),c=e.resolveColumnById(this,"radiusValue-end",t),h=e.resolveColumnById(this,"radiusValue-raw",t),u=e.resolveProcessedDataIndexById(this,"radiusValue-range");let d=0,p=0;s instanceof yh&&(d=s.groupPaddingInner,p=s.paddingInner);const f=(n.bandwidth??0)*(1-p),{index:x,visibleGroupCount:m}=this.ctx.seriesStateManager.getVisiblePeerGroupIndex(this);i.domain=Array.from({length:m}).map((G,j)=>String(j)),i.range=[-f/2,f/2],i.paddingInner=m>1?d:0;const b=this.isRadiusAxisReversed(),v=b?this.radius:this.getAxisInnerRadius(),S=b?this.getAxisInnerRadius():this.radius,D=S+v,{angleKey:k,radiusKey:L,angleName:T,radiusName:N,label:C}=this.properties,O=(G,j,V,W)=>{const B=this.getLabelText(C,{value:j,datum:G,angleKey:k,radiusKey:L,angleName:T,radiusName:N});if(B)return{x:V,y:W,text:B,textAlign:"center",textBaseline:"middle"}},R=[],E={itemId:L,nodeData:R,labelData:R};if(!this.visible)return E;const{rawData:z,aggregation:F}=t;return z.forEach((G,j)=>{const V=r[j];if(V==null)return;const W=h[j],B=W>=0&&!Object.is(W,-0),U=l[j],H=c[j],X=F[j][u][B?1:0]??0,Q=B===b;if(U===void 0||H===void 0)return;let $,Z;if(z.length===1)$=-.5*Math.PI,Z=1.5*Math.PI;else{const ft=n.convert(V);$=wV(ft+i.convert(String(x))),Z=wV($+i.bandwidth)}const Y=$+i.bandwidth/2,tt=D-o.convert(U),q=D-o.convert(H),it=(tt+q)/2,at=D-o.convert(0),rt=D-o.convert(X),ot=Math.cos(Y)*it,et=Math.sin(Y)*it,gt=this.properties.label.enabled?O(G,W,ot,et):void 0,dt=this.getColumnWidth($,Z);R.push({series:this,datum:G,datumIndex:j,point:{x:ot,y:et,size:0},midPoint:{x:ot,y:et},label:gt,angleValue:V,radiusValue:W,negative:Q,innerRadius:tt,outerRadius:q,stackInnerRadius:at,stackOuterRadius:rt,startAngle:$,endAngle:Z,axisInnerRadius:v,axisOuterRadius:S,columnWidth:dt,index:j})}),{itemId:L,nodeData:R,labelData:R}}getColumnWidth(t,e){return NaN}update({seriesRect:t}){const e=this.checkResize(t);this.maybeRefreshNodeData(),this.contentGroup.translationX=this.centerX,this.contentGroup.translationY=this.centerY,this.highlightGroup.translationX=this.centerX,this.highlightGroup.translationY=this.centerY,this.labelGroup&&(this.labelGroup.translationX=this.centerX,this.labelGroup.translationY=this.centerY),this.updateSectorSelection(this.itemSelection,!1),this.updateSectorSelection(this.highlightSelection,!0),this.updateLabels(),e&&this.animationState.transition("resize"),this.animationState.transition("update")}getItemBaseStyle(t){const{properties:e}=this,i=t?e.highlightStyle.item:void 0,s=this.getStrokeWidth(e.strokeWidth);return{fill:i?.fill??e.fill,fillOpacity:i?.fillOpacity??e.fillOpacity,stroke:i?.stroke??e.stroke,strokeWidth:i?.strokeWidth??s,strokeOpacity:i?.strokeOpacity??e.strokeOpacity,lineDash:i?.lineDash??e.lineDash,lineDashOffset:i?.lineDashOffset??e.lineDashOffset,cornerRadius:e.cornerRadius}}getItemStyleOverrides(t,e,i,s){const{id:a,properties:n}=this,{angleKey:o,radiusKey:r,itemStyler:l}=n;if(l!=null)return this.cachedDatumCallback(OV(t,s?"highlight":"node"),()=>l({seriesId:a,datum:e,highlighted:s,angleKey:o,radiusKey:r,...i}))}updateSectorSelection(t,e){let i=[];if(e){const a=this.ctx.highlightManager?.getActiveHighlight();a?.datum&&a.series===this&&i.push(a)}else i=this.nodeData;const s=this.getItemBaseStyle(e);t.update(i,void 0,a=>this.getDatumId(a)).each((a,n)=>{const{datum:o,datumIndex:r}=n,l=this.getItemStyleOverrides(String(r),o,s,e);this.updateItemPath(a,n,e,{...l,...s}),a.fill=l?.fill??s.fill,a.fillOpacity=l?.fillOpacity??s.fillOpacity,a.stroke=l?.stroke??s.stroke,a.strokeWidth=l?.strokeWidth??s.strokeWidth,a.strokeOpacity=l?.strokeOpacity??s.strokeOpacity,a.lineDash=l?.lineDash??s.lineDash,a.lineDashOffset=l?.lineDashOffset??s.lineDashOffset,a.cornerRadius=l?.cornerRadius??s.cornerRadius,a.lineJoin="round"})}updateLabels(){const{label:t}=this.properties;this.labelSelection.update(this.nodeData).each((e,i)=>{t.enabled&&i.label?(e.x=i.label.x,e.y=i.label.y,e.fill=t.color,e.fontFamily=t.fontFamily,e.fontSize=t.fontSize,e.fontStyle=t.fontStyle,e.fontWeight=t.fontWeight,e.text=i.label.text,e.textAlign=i.label.textAlign,e.textBaseline=i.label.textBaseline,e.visible=!0):e.visible=!1})}animateEmptyUpdateReady(){const{labelSelection:t}=this,e=this.getColumnTransitionFunctions();RV.fromToMotion(this.id,"datums",this.ctx.animationManager,[this.itemSelection],e),Zdt(this,"labels",this.ctx.animationManager,t)}animateClearingUpdateEmpty(){const{itemSelection:t}=this,{animationManager:e}=this.ctx,i=this.getColumnTransitionFunctions();RV.fromToMotion(this.id,"datums",e,[t],i),$dt(this,"labels",e,this.labelSelection)}getTooltipContent(t){const{id:e,dataModel:i,processedData:s,axes:a,properties:n}=this,{angleKey:o,angleName:r,radiusKey:l,radiusName:c,tooltip:h}=n,u=a[Ur.X],d=a[Ur.Y];if(!i||!s||s.rawData.length===0||!u||!d)return;const{datumIndex:p}=t,g=s.rawData[p],f=i.resolveKeysById(this,"angleValue",s)[p],x=i.resolveColumnById(this,"radiusValue-raw",s)[p];if(f==null)return;const m=this.getItemBaseStyle(!1);return Object.assign(m,this.getItemStyleOverrides(String(p),p,m,!1)),h.formatTooltip({heading:u.formatDatum(f),symbol:this.legendItemSymbol(),data:[{label:c,fallbackLabel:l,value:d.formatDatum(x)}]},{seriesId:e,datum:g,title:r,angleKey:o,angleName:r,radiusKey:l,radiusName:c,...m})}pickNodeClosestDatum(t){return this.pickNodeNearestDistantObject(t,this.itemSelection.nodes())}legendItemSymbol(){const{fill:t,stroke:e,fillOpacity:i,strokeOpacity:s,strokeWidth:a}=this.properties;return{marker:{fill:t??"rgba(0, 0, 0, 0)",stroke:e??"rgba(0, 0, 0, 0)",fillOpacity:i??1,strokeOpacity:s??1,strokeWidth:a}}}getLegendData(t){if(!this.properties.isValid()||t!=="category")return[];const{id:e,visible:i}=this,{radiusKey:s,radiusName:a,showInLegend:n}=this.properties;return[{legendType:"category",id:e,itemId:s,seriesId:e,enabled:i,label:{text:a??s},symbol:this.legendItemSymbol(),hideInLegend:!n}]}getDatumId(t){return OV(t.angleValue)}computeLabelsBBox(){return null}},ept=(P(),_(w)),{SeriesProperties:ipt,SeriesTooltip:spt,Validate:Mi,COLOR_STRING:PV,NUMBER:BV,FUNCTION:apt,LINE_DASH:npt,OBJECT:zV,POSITIVE_NUMBER:rC,RATIO:FV,STRING:vy,Label:opt}=ept._ModuleSupport,ai=class extends ipt{constructor(){super(...arguments),this.fill="black",this.fillOpacity=1,this.stroke="black",this.strokeWidth=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.cornerRadius=0,this.rotation=0,this.label=new opt,this.tooltip=new spt}};y([Mi(vy)],ai.prototype,"angleKey",2),y([Mi(vy,{optional:!0})],ai.prototype,"angleName",2),y([Mi(vy)],ai.prototype,"radiusKey",2),y([Mi(vy,{optional:!0})],ai.prototype,"radiusName",2),y([Mi(PV)],ai.prototype,"fill",2),y([Mi(FV)],ai.prototype,"fillOpacity",2),y([Mi(PV)],ai.prototype,"stroke",2),y([Mi(rC)],ai.prototype,"strokeWidth",2),y([Mi(FV)],ai.prototype,"strokeOpacity",2),y([Mi(npt)],ai.prototype,"lineDash",2),y([Mi(rC)],ai.prototype,"lineDashOffset",2),y([Mi(rC)],ai.prototype,"cornerRadius",2),y([Mi(apt,{optional:!0})],ai.prototype,"itemStyler",2),y([Mi(BV)],ai.prototype,"rotation",2),y([Mi(vy,{optional:!0})],ai.prototype,"stackGroup",2),y([Mi(BV,{optional:!0})],ai.prototype,"normalizedTo",2),y([Mi(zV)],ai.prototype,"label",2),y([Mi(zV)],ai.prototype,"tooltip",2);var rpt=(P(),_(w)),lpt=(P(),_(w)),{motion:cpt}=lpt._ModuleSupport;function jV(){const t={startAngle:new Map,endAngle:new Map},e=["startAngle","endAngle"],i=(o,r,l)=>{e.forEach(c=>{const h=t[c];let u=(l==="removed"||l==="updated"?o:r)[c],d=(l==="removed"?o:r)[c];isNaN(d)&&(d=o.previousDatum?.[c]??NaN);const p=u-d;Math.abs(p)>Math.PI&&(u-=Math.sign(p)*2*Math.PI),h.set(r,{from:u,to:d})})},s=(o,r)=>({startAngle:t.startAngle.get(o)[r],endAngle:t.endAngle.get(o)[r]});return{calculate:i,from:o=>s(o,"from"),to:o=>s(o,"to")}}function GV(t,e,i){if(i==="updated"){if(t.previousDatum==null||isNaN(t.previousDatum.startAngle)||isNaN(t.previousDatum.endAngle))return"added";if(isNaN(e.startAngle)||isNaN(e.endAngle))return"removed"}return i==="added"&&t.previousDatum!=null?"updated":i}function hpt(t){const e=jV();return{toFn:(a,n,o)=>{const{startAngle:r,endAngle:l}=e.to(n);let c,h,u,d,p;return o==="removed"?(c=a.innerRadius,h=a.innerRadius,u=a.columnWidth,d=a.axisInnerRadius,p=a.axisOuterRadius):(c=isNaN(n.innerRadius)?t:n.innerRadius,h=isNaN(n.outerRadius)?t:n.outerRadius,u=isNaN(n.columnWidth)?a.columnWidth:n.columnWidth,d=n.axisInnerRadius,p=n.axisOuterRadius),{innerRadius:c,outerRadius:h,columnWidth:u,axisInnerRadius:d,axisOuterRadius:p,startAngle:r,endAngle:l}},fromFn:(a,n,o)=>{o=GV(a,n,o),e.calculate(a,n,o);const{startAngle:r,endAngle:l}=e.from(n);let c,h,u,d,p;o==="removed"||o==="updated"?(c=a.innerRadius,h=a.outerRadius,u=a.columnWidth,d=a.axisInnerRadius,p=a.axisOuterRadius):(c=t,h=t,u=n.columnWidth,d=n.axisInnerRadius,p=n.axisOuterRadius);const g=cpt.NODE_UPDATE_STATE_TO_PHASE_MAPPING[o];return{innerRadius:c,outerRadius:h,columnWidth:u,axisInnerRadius:d,axisOuterRadius:p,startAngle:r,endAngle:l,phase:g}}}}function upt(t,{innerRadius:e,outerRadius:i,columnWidth:s,axisInnerRadius:a,axisOuterRadius:n,startAngle:o,endAngle:r}){return{innerRadius:e,outerRadius:i,columnWidth:s,axisInnerRadius:a,axisOuterRadius:n,startAngle:o,endAngle:r}}var{SectorBox:Wv,motion:dpt}=rpt._ModuleSupport;function lC(t){const{negative:e,innerRadius:i,outerRadius:s,stackInnerRadius:a,stackOuterRadius:n}=t;return{innerRadius:e?n:a,outerRadius:e?a:n,clipInnerRadius:e?s:i,clipOuterRadius:e?i:s}}function ppt(t){const e=jV();return{toFn:(a,n,o)=>{const{startAngle:r,endAngle:l}=e.to(n);let c,h,u;if(o==="removed")c=t,h=t,u=new Wv(r,l,c,h);else{let d,p;({innerRadius:c,outerRadius:h,clipInnerRadius:d,clipOuterRadius:p}=lC(n)),isNaN(c)&&(c=t),isNaN(h)&&(h=t),isNaN(d)&&(d=t),isNaN(p)&&(p=t),u=new Wv(r,l,d,p)}return{innerRadius:c,outerRadius:h,startAngle:r,endAngle:l,clipSector:u}},fromFn:(a,n,o)=>{o=GV(a,n,o),e.calculate(a,n,o);const{startAngle:r,endAngle:l}=e.from(n);let c,h,u;o==="removed"||o==="updated"?(c=a.innerRadius,h=a.outerRadius,u=a.clipSector):(c=t,h=t),u??(u=new Wv(r,l,c,h));const d=dpt.NODE_UPDATE_STATE_TO_PHASE_MAPPING[o];return{innerRadius:c,outerRadius:h,startAngle:r,endAngle:l,clipSector:u,phase:d}}}}function gpt(t,e){const{startAngle:i,endAngle:s}=e,{innerRadius:a,outerRadius:n,clipInnerRadius:o,clipOuterRadius:r}=lC(e),l=new Wv(i,s,o,r);return{innerRadius:a,outerRadius:n,startAngle:i,endAngle:s,clipSector:l}}var{Sector:fpt,SectorBox:ypt,PolarZIndexMap:cC}=Gdt._ModuleSupport,hC=class extends _V{constructor(t){super(t,{animationResetFns:{item:gpt}}),this.properties=new ai}setSeriesIndex(t){return super.setSeriesIndex(t)?(this.contentGroup.zIndex=[0,cC.FOREGROUND,t],this.highlightGroup.zIndex=[0,cC.HIGHLIGHT,t],this.labelGroup.zIndex=[0,cC.LABEL,t],!0):!1}getStackId(){return`nightingale-stack-${this.seriesGrouping?.groupIndex??this.id}-yValues`}nodeFactory(){return new fpt}updateItemPath(t,e,i,s){const{negative:a}=e;if(t.centerX=0,t.centerY=0,t.startOuterCornerRadius=a?0:this.properties.cornerRadius,t.endOuterCornerRadius=a?0:this.properties.cornerRadius,t.startInnerCornerRadius=a?this.properties.cornerRadius:0,t.endInnerCornerRadius=a?this.properties.cornerRadius:0,i){const{startAngle:n,endAngle:o}=e,{innerRadius:r,outerRadius:l,clipInnerRadius:c,clipOuterRadius:h}=lC(e);t.innerRadius=r,t.outerRadius=l,t.startAngle=n,t.endAngle=o,t.clipSector=new ypt(n,o,c,h)}}getColumnTransitionFunctions(){const t=this.isRadiusAxisReversed()?this.radius:this.getAxisInnerRadius();return ppt(t)}};hC.className="NightingaleSeries",hC.type="nightingale";var mpt=(P(),_(w)),{ThemeSymbols:{DEFAULT_FONT_FAMILY:xpt,DEFAULT_LABEL_COLOUR:bpt},ThemeConstants:{POLAR_AXIS_TYPE:VV,POLAR_AXIS_SHAPE:UV}}=mpt._ModuleSupport,Spt={series:{strokeWidth:1,label:{enabled:!1,fontSize:12,fontFamily:xpt,color:bpt}},axes:{[VV.ANGLE_CATEGORY]:{shape:UV.CIRCLE,groupPaddingInner:0,paddingInner:0,label:{spacing:10}},[VV.RADIUS_NUMBER]:{shape:UV.CIRCLE}}},{ThemeSymbols:{DEFAULT_POLAR_SERIES_STROKE:vpt},ThemeConstants:{POLAR_AXIS_TYPE:WV}}=jdt._ModuleSupport,Mpt={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["polar"],identifier:"nightingale",moduleFactory:t=>new hC(t),tooltipDefaults:{range:"exact"},defaultAxes:[{type:WV.ANGLE_CATEGORY},{type:WV.RADIUS_NUMBER}],themeTemplate:Spt,paletteFactory({takeColors:t,userPalette:e}){const{fills:[i],strokes:[s]}=t(1);return{fill:i,stroke:e!=="inbuilt"?s:vpt}},stackable:!0,groupable:!0,stackedByDefault:!0},Dpt=(P(),_(w)),HV=(P(),_(w)),{createDatumId:Apt}=HV._ModuleSupport,uC=class extends Mj{constructor(){super(...arguments),this.properties=new gv}nodeFactory(){return new Bot}updateDatumNodes({datumSelection:t,isHighlight:e}){const{id:i,properties:s}=this,{xKey:a,highKey:n,lowKey:o,openKey:r,closeKey:l,item:c,itemStyler:h}=s,{up:u,down:d}=c,{stroke:p,strokeWidth:g,strokeOpacity:f,lineDash:x,lineDashOffset:m}=u,{stroke:b,strokeWidth:v,strokeOpacity:S,lineDash:D,lineDashOffset:k}=d,L=e?s.highlightStyle.item:void 0;t.each((T,N)=>{const{isRising:C,centerX:O,width:R,y:E,height:z,yOpen:F,yClose:G,crisp:j}=N;let V;if(h!=null){const{stroke:W,strokeWidth:B,strokeOpacity:U,lineDash:H,lineDashOffset:K}=C?u:d;V=this.cachedDatumCallback(Apt(this.getDatumId(N),e?"highlight":"node"),()=>h({seriesId:i,itemId:N.itemId,xKey:a,highKey:n,lowKey:o,openKey:r,closeKey:l,datum:N.datum,strokeOpacity:U,stroke:W,strokeWidth:B,lineDash:H,lineDashOffset:K,highlighted:e}))}T.centerX=O,T.width=R,T.y=E,T.height=z,T.yOpen=F,T.yClose=G,T.crisp=j,T.stroke=L?.stroke??V?.stroke??(C?p:b),T.strokeWidth=L?.strokeWidth??V?.strokeWidth??(C?g:v),T.strokeOpacity=L?.strokeOpacity??V?.strokeOpacity??(C?f:S),T.lineDash=L?.lineDash??V?.lineDash??(C?x:D),T.lineDashOffset=L?.lineDashOffset??V?.lineDashOffset??(C?m:k),T.strokeAlignment=(V?.strokeWidth??(C?g:v))/2})}getLegendData(t){const{id:e,data:i,ctx:{legendManager:s},visible:a}=this,{xKey:n,yName:o,item:{up:r,down:l},showInLegend:c,legendItemName:h}=this.properties;if(!i?.length||!n||t!=="category")return[];const u=new HV._ModuleSupport.LinearGradient("rgb",[{color:r.stroke,offset:0},{color:r.stroke,offset:.5},{color:l.stroke,offset:.5}],90);return[{legendType:"category",id:e,itemId:e,seriesId:e,enabled:a&&s.getItemEnabled({seriesId:e,itemId:e}),label:{text:h??o??e},symbol:{marker:{fill:u,fillOpacity:r.strokeOpacity,stroke:void 0,strokeWidth:0,strokeOpacity:1}},legendItemName:h,hideInLegend:!c}]}};uC.className="ohlc",uC.type="ohlc";var{CARTESIAN_AXIS_TYPE:Hv,CARTESIAN_POSITION:YV}=Dpt._ModuleSupport.ThemeConstants,Ipt={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["cartesian"],identifier:"ohlc",moduleFactory:t=>new uC(t),tooltipDefaults:{range:"nearest"},defaultAxes:[{type:Hv.NUMBER,position:YV.LEFT},{type:Hv.ORDINAL_TIME,position:YV.BOTTOM}],themeTemplate:{animation:{enabled:!1},axes:{[Hv.NUMBER]:{crosshair:{snap:!1}},[Hv.ORDINAL_TIME]:{groupPaddingInner:0,crosshair:{enabled:!0}}}},groupable:!1,paletteFactory:({takeColors:t,colorsCount:e,userPalette:i,palette:s})=>{if(i==="user-indexed"){const[a]=t(e).strokes;return{item:{up:{stroke:a},down:{stroke:a}}}}return{item:{up:{stroke:s.up.stroke},down:{stroke:s.down.stroke}}}}},fbt=(P(),_(w)),KV=(P(),_(w)),kpt=(P(),_(w)),{SeriesProperties:Lpt,SeriesTooltip:Tpt,Validate:ni,UNION:Npt,COLOR_STRING_ARRAY:XV,FUNCTION:Cpt,DIRECTION:Opt,BOOLEAN:Ept,LINE_DASH:wpt,OBJECT:Yv,NUMBER:Rpt,POSITIVE_NUMBER:Kv,RATIO:ZV,STRING:$V,Label:QV,DropShadow:_pt}=kpt._ModuleSupport,Ppt=class extends QV{},dC=class extends QV{constructor(){super(...arguments),this.spacing=0}};y([ni(Rpt)],dC.prototype,"spacing",2),y([ni(Npt(["before","after"],"a placement"))],dC.prototype,"placement",2);var yi=class extends Lpt{constructor(){super(...arguments),this.fills=[],this.fillOpacity=1,this.strokes=[],this.strokeWidth=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.direction="vertical",this.reverse=void 0,this.spacing=0,this.aspectRatio=void 0,this.shadow=new _pt().set({enabled:!1}),this.label=new Ppt,this.stageLabel=new dC,this.tooltip=new Tpt}};y([ni($V)],yi.prototype,"stageKey",2),y([ni($V)],yi.prototype,"valueKey",2),y([ni(XV)],yi.prototype,"fills",2),y([ni(ZV)],yi.prototype,"fillOpacity",2),y([ni(XV)],yi.prototype,"strokes",2),y([ni(Kv)],yi.prototype,"strokeWidth",2),y([ni(ZV)],yi.prototype,"strokeOpacity",2),y([ni(wpt)],yi.prototype,"lineDash",2),y([ni(Kv)],yi.prototype,"lineDashOffset",2),y([ni(Opt)],yi.prototype,"direction",2),y([ni(Ept,{optional:!0})],yi.prototype,"reverse",2),y([ni(Kv)],yi.prototype,"spacing",2),y([ni(Kv,{optional:!0})],yi.prototype,"aspectRatio",2),y([ni(Cpt,{optional:!0})],yi.prototype,"itemStyler",2),y([ni(Yv)],yi.prototype,"shadow",2),y([ni(Yv)],yi.prototype,"label",2),y([ni(Yv)],yi.prototype,"stageLabel",2),y([ni(Yv)],yi.prototype,"tooltip",2);var{valueProperty:qV,SeriesNodePickMode:JV,CachedTextMeasurerPool:Bpt,TextUtils:zpt,createDatumId:Fpt,BBox:pC,Group:gC,Selection:Xv,Text:tU,PointerEvents:eU}=KV._ModuleSupport,jpt=class extends KV._ModuleSupport.DataModelSeries{constructor(t){super({moduleCtx:t,pickModes:[JV.EXACT_SHAPE_MATCH,JV.NEAREST_NODE]}),this.properties=new yi,this.itemGroup=this.contentGroup.appendChild(new gC({name:"itemGroup"})),this.itemLabelGroup=this.contentGroup.appendChild(new gC({name:"itemLabelGroup"})),this.stageLabelGroup=this.contentGroup.appendChild(new gC({name:"stageLabelGroup"})),this.datumSelection=Xv.select(this.itemGroup,()=>this.nodeFactory()),this.labelSelection=Xv.select(this.itemLabelGroup,tU),this.stageLabelSelection=Xv.select(this.stageLabelGroup,tU),this.highlightDatumSelection=Xv.select(this.highlightNode,()=>this.nodeFactory()),this.itemLabelGroup.pointerEvents=eU.None,this.stageLabelGroup.pointerEvents=eU.None}addChartEventListeners(){this.destroyFns.push(this.ctx.chartEventManager?.addListener("legend-item-click",t=>this.onLegendItemClick(t)))}nodeFactory(){return new Bo}getNodeData(){return this.contextNodeData?.nodeData}async processData(t){if(this.data==null||!this.properties.isValid())return;const{id:e,visible:i,ctx:{legendManager:s}}=this,{stageKey:a,valueKey:n}=this.properties,o="band",r="number",l=(h,u,d)=>i&&s.getItemEnabled({seriesId:e,itemId:d}),c=this.visible?{}:{forceValue:0};await this.requestDataModel(t,this.data,{props:[qV(a,o,{id:"xValue"}),qV(n,r,{id:"yValue",...c,validation:l,invalidValue:0})]})}createNodeData(){const{id:t,dataModel:e,processedData:i,properties:s,visible:a,ctx:{legendManager:n}}=this,{stageKey:o,valueKey:r,direction:l,reverse:c=l==="horizontal",spacing:h,aspectRatio:u,label:d,stageLabel:p}=s;if(e==null||i==null||i.rawData.length===0)return;const g=l==="horizontal",f=e.resolveColumnById(this,"xValue",i),x=e.resolveColumnById(this,"yValue",i),m=Bpt.getMeasurer({font:p.getFont()});let b,v;g?(b="center",v=p.placement==="before"?"bottom":"top"):(b=p.placement==="after"?"left":"right",v="middle");const S=p.enabled?[]:void 0;let D=0,k=0,L=0;i.rawData.forEach((W,B)=>{const U=f[B],H=x[B],K=a&&n.getItemEnabled({seriesId:t,itemId:B});if(L+=H,S==null)return;const X=this.getLabelText(this.properties.stageLabel,{datum:W,value:U,stageKey:o,valueKey:r}),{width:Q}=m.measureText(X),$=X.split(`
`).length*zpt.getLineHeight(d.fontSize);D=Math.max(D,Q),k=Math.max(k,$),S.push({x:NaN,y:NaN,text:X,textAlign:b,textBaseline:v,visible:K})});const T=this._nodeDataDependencies?.seriesRectWidth??0,N=this._nodeDataDependencies?.seriesRectHeight??0,C=h*(i.rawData.length-1);let O;if(g){const W=k+p.spacing;O=new pC(0,p.placement==="before"?W:0,T,N-W)}else{const W=D+p.spacing;O=new pC(p.placement==="after"?0:W,0,T-W,N)}if(u!=null&&u!==0){const W=l==="horizontal"?1/u:u,B=Math.min(O.width,O.height*W),U=B/W;O=new pC(O.x+(O.width-B)/2,O.y+(O.height-U)/2,B,U)}let R,E;g?E=p.placement==="before"?O.y-p.spacing:O.y+O.height+p.spacing:R=p.placement==="after"?O.x+O.width+p.spacing:O.x-p.spacing;const z=O.width-(g?C:0),F=O.height-(g?0:C);if(z<0||F<0)return;const G=[],j=[];let V=0;return i.rawData.forEach((W,B)=>{const U=f[B],H=x[B],K=a&&n.getItemEnabled({seriesId:t,itemId:B}),X=V+H,Q=(V+X)/(2*L),$=(X-V)/L,Z=g?z*Q+h*B:z*.5,Y=g?F*.5:F*Q+h*B,tt=O.x+Z,q=O.y+Y;if(S!=null){const dt=S[B];dt.x=R??tt,dt.y=E??q}let it,at,rt,ot;if(g){const dt=z*$;it=dt,rt=dt;const ft=(Z+dt/2)*(F/O.width),Dt=(Z-dt/2)*(F/O.width);at=c?O.height-ft:ft,ot=c?O.height-Dt:Dt}else{const dt=F*$;at=dt,ot=dt;const ft=(Y-dt/2)*(z/O.height),Dt=(Y+dt/2)*(z/O.height);it=c?O.width-ft:ft,rt=c?O.width-Dt:Dt}const et=this.getLabelText(d,{datum:W,value:H,stageKey:o,valueKey:r}),gt={x:tt,y:q,text:et,textAlign:"center",textBaseline:"middle",visible:K};j.push(gt),G.push({series:this,itemId:r,datum:W,datumIndex:B,index:B,xValue:U,yValue:H,x:tt,y:q,top:it,right:at,bottom:rt,left:ot,label:gt,enabled:K,midPoint:{x:tt,y:q}}),V=X}),{itemId:t,nodeData:G,labelData:j,stageLabelData:S}}updateSelections(){this.nodeDataRefresh&&(this.contextNodeData=this.createNodeData(),this.nodeDataRefresh=!1)}update({seriesRect:t}){this.checkResize(t);const{datumSelection:e,labelSelection:i,stageLabelSelection:s,highlightDatumSelection:a}=this;this.updateSelections(),this.contentGroup.visible=this.visible,this.contentGroup.opacity=this.getOpacity();let n=this.ctx.highlightManager?.getActiveHighlight();n!=null&&(n.series!==this||n.datum==null)&&(n=void 0);const o=this.contextNodeData?.nodeData??[],r=this.contextNodeData?.labelData??[],l=this.contextNodeData?.stageLabelData??[];this.datumSelection=this.updateDatumSelection({nodeData:o,datumSelection:e}),this.updateDatumNodes({datumSelection:e,isHighlight:!1}),this.labelSelection=this.updateLabelSelection({labelData:r,labelSelection:i}),this.updateLabelNodes({labelSelection:i,labelProperties:this.properties.label}),this.stageLabelSelection=this.updateStageLabelSelection({stageLabelData:l,stageLabelSelection:s}),this.updateLabelNodes({labelSelection:s,labelProperties:this.properties.stageLabel}),this.highlightDatumSelection=this.updateDatumSelection({nodeData:n!=null?[n]:[],datumSelection:a}),this.updateDatumNodes({datumSelection:a,isHighlight:!0})}updateDatumSelection(t){return t.datumSelection.update(t.nodeData)}getItemBaseStyle(t){const{properties:e}=this,i=t?e.highlightStyle.item:void 0,s=this.getStrokeWidth(e.strokeWidth);return{fill:i?.fill,fillOpacity:i?.fillOpacity??e.fillOpacity,stroke:i?.stroke,strokeWidth:i?.strokeWidth??s,strokeOpacity:i?.strokeOpacity??e.strokeOpacity,lineDash:i?.lineDash??e.lineDash,lineDashOffset:i?.lineDashOffset??e.lineDashOffset}}getItemStyleOverrides(t,e,i,s,a){const{id:n,properties:o}=this,{fills:r,strokes:l,stageKey:c,valueKey:h,itemStyler:u}=o,d=s.fill??r[i%r.length],p=s.stroke??l[i%l.length],g={};if(a||(g.fill=d,g.stroke=p),u!=null){const f=this.cachedDatumCallback(Fpt(t,a?"highlight":"node"),()=>u({seriesId:n,datum:e,stageKey:c,valueKey:h,highlighted:a,fill:d,stroke:p,...s}));Object.assign(g,f)}return g}updateDatumNodes(t){const{datumSelection:e,isHighlight:i}=t,{properties:s}=this,{shadow:a}=s,n=this.getItemBaseStyle(i);e.each((o,r)=>{const{datumIndex:l,datum:c,x:h,y:u,top:d,right:p,bottom:g,left:f}=r,x=this.getItemStyleOverrides(String(l),c,l,n,i);o.x0=h-d/2,o.x1=h+d/2,o.x2=h+g/2,o.x3=h-g/2,o.y0=u-f/2,o.y1=u-p/2,o.y2=u+p/2,o.y3=u+f/2,o.fill=x?.fill??n.fill,o.fillOpacity=x?.fillOpacity??n.fillOpacity,o.stroke=x?.stroke??n.stroke,o.strokeOpacity=x?.strokeOpacity??n.strokeOpacity,o.strokeWidth=x?.strokeWidth??n.strokeWidth,o.lineDash=x?.lineDash??n.lineDash,o.lineDashOffset=x?.lineDashOffset??n.lineDashOffset,o.fillShadow=a})}updateLabelSelection(t){return t.labelSelection.update(this.properties.label.enabled?t.labelData:[])}updateStageLabelSelection(t){return t.stageLabelSelection.update(t.stageLabelData)}updateLabelNodes(t){const{labelSelection:e,labelProperties:i}=t,{color:s,fontSize:a,fontStyle:n,fontWeight:o,fontFamily:r}=i;e.each((l,{visible:c,x:h,y:u,text:d,textAlign:p,textBaseline:g})=>{l.visible=c,l.x=h,l.y=u,l.text=d,l.fill=s,l.fontStyle=n,l.fontWeight=o,l.fontSize=a,l.fontFamily=r,l.textAlign=p,l.textBaseline=g})}resetAnimation(t){}computeFocusBounds(t){const e=this.getNodeData()?.[t.datumIndex];if(e!==void 0){for(const i of this.datumSelection)if(i.datum===e)return i.node}}getTooltipContent(t){const{id:e,dataModel:i,processedData:s,properties:a}=this,{stageKey:n,valueKey:o,tooltip:r}=a;if(!i||!s||s.rawData.length===0)return;const{datumIndex:l}=t,c=s.rawData[l],h=i.resolveColumnById(this,"xValue",s)[l],u=i.resolveColumnById(this,"yValue",s)[l];if(h==null)return;const d=this.getLabelText(this.properties.stageLabel,{datum:s.rawData[l],value:u,stageKey:n,valueKey:o}),p=this.getItemBaseStyle(!1);return Object.assign(p,this.getItemStyleOverrides(String(l),l,l,p,!1)),r.formatTooltip({symbol:this.legendItemSymbol(l),data:[{label:String(h),value:d}]},{seriesId:e,datum:c,title:void 0,stageKey:n,valueKey:o,...p})}getSeriesDomain(){return[NaN,NaN]}getSeriesRange(t,e){return[NaN,NaN]}pickNodeClosestDatum({x:t,y:e}){let i=1/0,s;return this.datumSelection.each((a,n)=>{const o=a.distanceSquared(t,e);o<i&&(i=o,s=n)}),s!=null?{datum:s,distance:Math.sqrt(i)}:void 0}legendItemSymbol(t){const{fills:e,strokes:i,strokeWidth:s,fillOpacity:a,strokeOpacity:n}=this.properties,o=e[t%e.length]??"black",r=i[t%i.length]??"black";return{marker:{fill:o,fillOpacity:a,stroke:r,strokeWidth:s,strokeOpacity:n}}}getLegendData(t){const{processedData:e,dataModel:i,id:s,ctx:{legendManager:a},visible:n}=this;if(!i||!e||t!=="category"||!this.properties.isValid())return[];const{showInLegend:o}=this.properties,r=[],l=i.resolveColumnById(this,"xValue",e);return e.rawData.forEach((c,h)=>{const u=l[h];r.push({legendType:"category",id:s,itemId:h,seriesId:s,enabled:n&&a.getItemEnabled({seriesId:s,itemId:h}),label:{text:u},symbol:this.legendItemSymbol(h),hideInLegend:!o})}),r}},Gpt=(P(),_(w)),{DEFAULT_FONT_FAMILY:iU,DEFAULT_LABEL_COLOUR:Vpt,DEFAULT_INSIDE_SERIES_LABEL_COLOUR:Upt}=Gpt._ModuleSupport.ThemeSymbols,Wpt={series:{direction:"vertical",strokeWidth:0,spacing:2,label:{enabled:!0,fontSize:12,fontFamily:iU,color:Upt},stageLabel:{enabled:!0,fontSize:12,fontFamily:iU,color:Vpt,spacing:12}}},Hpt={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["standalone"],identifier:"pyramid",moduleFactory:t=>new jpt(t),solo:!0,tooltipDefaults:{range:"exact"},themeTemplate:Wpt,paletteFactory:({takeColors:t,colorsCount:e})=>{const{fills:i,strokes:s}=t(e);return{fills:i,strokes:s}}},Ypt=(P(),_(w)),fC=(P(),_(w)),{ThemeSymbols:{DEFAULT_FONT_FAMILY:Kpt,DEFAULT_LABEL_COLOUR:Xpt},ThemeConstants:{POLAR_AXIS_TYPE:Zpt}}=fC._ModuleSupport,sU={series:{label:{enabled:!1,fontSize:12,fontFamily:Kpt,color:Xpt},marker:{enabled:!0,fillOpacity:1,shape:"circle",size:6,strokeOpacity:1,strokeWidth:0}},axes:{[Zpt.ANGLE_CATEGORY]:{label:{spacing:10}}}},$pt=fC._ModuleSupport.mergeDefaults({series:{strokeWidth:2}},sU),Qpt=fC._ModuleSupport.mergeDefaults({series:{fillOpacity:.8,strokeWidth:2,marker:{enabled:!1}}},sU),aU=(P(),_(w)),Jd=(P(),_(w)),qpt=(P(),_(w)),{Label:Jpt,SeriesMarker:tgt,SeriesProperties:egt,SeriesTooltip:igt,Validate:ta,BOOLEAN:sgt,COLOR_STRING:agt,NUMBER:ngt,LINE_DASH:ogt,OBJECT:yC,POSITIVE_NUMBER:nU,RATIO:rgt,STRING:Zv}=qpt._ModuleSupport,fs=class extends egt{constructor(){super(...arguments),this.stroke="black",this.strokeWidth=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.rotation=0,this.marker=new tgt,this.label=new Jpt,this.tooltip=new igt,this.connectMissingData=!1}};y([ta(Zv)],fs.prototype,"angleKey",2),y([ta(Zv)],fs.prototype,"radiusKey",2),y([ta(Zv,{optional:!0})],fs.prototype,"angleName",2),y([ta(Zv,{optional:!0})],fs.prototype,"radiusName",2),y([ta(agt)],fs.prototype,"stroke",2),y([ta(nU)],fs.prototype,"strokeWidth",2),y([ta(rgt)],fs.prototype,"strokeOpacity",2),y([ta(ogt)],fs.prototype,"lineDash",2),y([ta(nU)],fs.prototype,"lineDashOffset",2),y([ta(ngt)],fs.prototype,"rotation",2),y([ta(yC)],fs.prototype,"marker",2),y([ta(yC)],fs.prototype,"label",2),y([ta(yC)],fs.prototype,"tooltip",2),y([ta(sgt)],fs.prototype,"connectMissingData",2);var{ChartAxisDirection:Fn,PolarAxis:lgt,SeriesNodePickMode:oU,valueProperty:rU,fixNumericExtent:cgt,seriesLabelFadeInAnimation:hgt,markerFadeInAnimation:ugt,resetMarkerFn:dgt,animationValidation:pgt,computeMarkerFocusBounds:ggt,isFiniteNumber:lU,extent:fgt,isNumberEqual:cU,createDatumId:ygt,BBox:mgt,Group:xgt,Path:bgt,PointerEvents:Sgt,Selection:hU,Text:vgt,getMarker:Mgt}=Jd._ModuleSupport,Dgt=class extends Jd._ModuleSupport.SeriesNodeEvent{constructor(t,e,i,s){super(t,e,i,s),this.angleKey=s.properties.angleKey,this.radiusKey=s.properties.radiusKey}},mC=class extends Jd._ModuleSupport.PolarSeries{constructor(t){super({moduleCtx:t,useLabelLayer:!0,pickModes:[oU.NEAREST_NODE,oU.EXACT_SHAPE_MATCH],canHaveAxes:!0,animationResetFns:{item:dgt}}),this.clipFocusBox=!1,this.properties=new fs,this.NodeEvent=Dgt,this.lineGroup=this.contentGroup.appendChild(new xgt({name:"radar-line",zIndex:Jd._ModuleSupport.SeriesZIndexMap.ANY_CONTENT})),this.lineSelection=hU.select(this.lineGroup,bgt),this.resetInvalidToZero=!1,this.circleCache={r:0,cx:0,cy:0}}nodeFactory(){const{shape:t}=this.properties.marker,e=Mgt(t);return new e}setSeriesIndex(t){return super.setSeriesIndex(t)?(this.lineGroup.zIndex=[Jd._ModuleSupport.SeriesZIndexMap.ANY_CONTENT,t,Jd._ModuleSupport.SeriesContentZIndexMap.FOREGROUND,1],!0):!1}getSeriesDomain(t){const{dataModel:e,processedData:i}=this;if(!i||!e)return[];if(t===Fn.X)return e.getDomain(this,"angleValue","value",i);{const s=e.getDomain(this,"radiusValue","value",i),a=fgt(s.length===0?s:[0].concat(s));return cgt(a)}}async processData(t){if(!this.properties.isValid())return;const{angleKey:e,radiusKey:i}=this.properties,s=[];this.ctx.animationManager.isSkipped()||s.push(pgt());const a=this.axes[Fn.Y]?.scale.type,n=this.axes[Fn.X]?.scale.type;await this.requestDataModel(t,this.data,{props:[rU(e,n,{id:"angleValue"}),rU(i,a,{id:"radiusValue",invalidValue:void 0}),...s]}),this.animationState.transition("updateData")}didCircleChange(){const t=this.radius,e=this.centerX,i=this.centerY,s=this.circleCache;return t===s.r&&e===s.cx&&i===s.cy?!1:(this.circleCache={r:t,cx:e,cy:i},!0)}getAxisInnerRadius(){const t=this.axes[Fn.Y];return t instanceof lgt?this.radius*t.innerRadiusRatio:0}maybeRefreshNodeData(){if(!this.didCircleChange()&&!this.nodeDataRefresh)return;const{nodeData:e=[]}=this.createNodeData()??{};this.nodeData=e,this.nodeDataRefresh=!1}createNodeData(){const{processedData:t,dataModel:e}=this;if(!t||!e||t.rawData.length===0||!this.properties.isValid())return;const{angleKey:i,radiusKey:s,angleName:a,radiusName:n,marker:o,label:r}=this.properties,l=this.axes[Fn.X]?.scale,c=this.axes[Fn.Y]?.scale;if(!l||!c)return;const h=e.resolveColumnById(this,"angleValue",t),u=e.resolveColumnById(this,"radiusValue",t),d=this.getAxisInnerRadius(),p=t.rawData.map((g,f)=>{const x=h[f],m=u[f],b=l.convert(x),v=this.radius+d-c.convert(m),S=Math.cos(b),D=Math.sin(b),k=S*v,L=D*v;let T;if(r.enabled){const N=this.getLabelText(r,{value:m,datum:g,angleKey:i,radiusKey:s,angleName:a,radiusName:n});if(N){let C="right";cU(S,0)?C="center":S>0&&(C="left");let O="bottom";cU(D,0)?O="middle":D>0&&(O="top"),T={x:k+S*o.size,y:L+D*o.size,text:N,textAlign:C,textBaseline:O}}}return{series:this,datum:g,datumIndex:f,index:f,point:{x:k,y:L,size:o.size},midPoint:{x:k,y:L},label:T,angleValue:x,radiusValue:m,missing:!lU(b)||!lU(v)}});return{itemId:s,nodeData:p,labelData:p}}update({seriesRect:t}){const e=this.checkResize(t),i=!this.ctx.animationManager.isSkipped(),{series:s}=this.ctx.highlightManager?.getActiveHighlight()??{};this.highlightGroup.visible=(i||this.visible)&&s===this,this.maybeRefreshNodeData(),this.contentGroup.translationX=this.centerX,this.contentGroup.translationY=this.centerY,this.highlightGroup.translationX=this.centerX,this.highlightGroup.translationY=this.centerY,this.labelGroup&&(this.labelGroup.translationX=this.centerX,this.labelGroup.translationY=this.centerY),this.updatePathSelections(),this.updateMarkerSelection(),this.updateMarkers(this.itemSelection,!1),this.updateMarkers(this.highlightSelection,!0),this.updateLabels(),e&&this.animationState.transition("resize"),this.animationState.transition("update")}updatePathSelections(){const t=this.visible?[!0]:[];this.lineSelection.update(t)}updateMarkerSelection(){this.properties.marker.isDirty()&&(this.itemSelection.clear(),this.itemSelection.cleanup(),this.itemSelection=hU.select(this.itemGroup,()=>this.nodeFactory(),!1)),this.itemSelection.update(this.properties.marker.enabled?this.nodeData:[])}getMarkerFill(t){return t?.fill??this.properties.marker.fill}getMarkerItemBaseStyle(t){const{properties:e}=this,{marker:i}=e,s=t?e.highlightStyle.item:void 0,a=this.getStrokeWidth(i.strokeWidth);return{size:i.size,fill:s?.fill??i.fill,fillOpacity:s?.fillOpacity??i.fillOpacity,stroke:s?.stroke??i.stroke,strokeWidth:s?.strokeWidth??a,strokeOpacity:s?.strokeOpacity??i.strokeOpacity}}getMarkerItemStyleOverrides(t,e,i,s){const{id:a,properties:n}=this,{angleKey:o,radiusKey:r,marker:l}=n,{itemStyler:c}=l;if(c!=null)return this.cachedDatumCallback(ygt(t,s?"highlight":"node"),()=>c({seriesId:a,datum:e,angleKey:o,radiusKey:r,highlighted:s,...i}))}updateMarkers(t,e){const{visible:i}=this,{marker:s}=this.properties;let a=[];if(i&&s.shape&&s.enabled)if(e){const o=this.ctx.highlightManager?.getActiveHighlight();o?.datum&&(a=[o])}else a=this.nodeData;const n=this.getMarkerItemBaseStyle(e);t.update(a).each((o,r)=>{const{datum:l,datumIndex:c,point:h}=r,u=this.getMarkerItemStyleOverrides(String(c),l,n,!1);o.fill=u?.fill??n.fill,o.stroke=u?.stroke??n.stroke,o.strokeWidth=u?.strokeWidth??n.strokeWidth,o.fillOpacity=u?.fillOpacity??n.fillOpacity,o.strokeOpacity=u?.strokeOpacity??n.strokeOpacity,o.size=u?.size??n.size;const{x:d,y:p}=h;o.x=d,o.y=p,o.visible=i&&o.size>0&&!isNaN(d)&&!isNaN(p)})}updateLabels(){const{label:t}=this.properties;this.labelSelection.update(this.nodeData).each((e,i)=>{t.enabled&&i.label?(e.x=i.label.x,e.y=i.label.y,e.fill=t.color,e.fontFamily=t.fontFamily,e.fontSize=t.fontSize,e.fontStyle=t.fontStyle,e.fontWeight=t.fontWeight,e.text=i.label.text,e.textAlign=i.label.textAlign,e.textBaseline=i.label.textBaseline,e.visible=!0):e.visible=!1})}getTooltipContent(t){const{id:e,dataModel:i,processedData:s,axes:a,properties:n}=this,{angleKey:o,angleName:r,radiusKey:l,radiusName:c,tooltip:h}=n,u=a[Fn.X],d=a[Fn.Y];if(!i||!s||s.rawData.length===0||!u||!d)return;const{datumIndex:p}=t,g=s.rawData[p],f=i.resolveColumnById(this,"angleValue",s)[p],x=i.resolveColumnById(this,"radiusValue",s)[p];if(f==null)return;const m=this.getMarkerItemBaseStyle(!1);return Object.assign(m,this.getMarkerItemStyleOverrides(String(p),p,m,!1)),h.formatTooltip({heading:u.formatDatum(f),symbol:this.legendItemSymbol(),data:[{label:c,fallbackLabel:l,value:d.formatDatum(x)}]},{seriesId:e,datum:g,title:r,angleKey:o,radiusKey:l,angleName:r,radiusName:c,...m})}legendItemSymbol(){const{stroke:t,strokeWidth:e,strokeOpacity:i,lineDash:s,marker:a}=this.properties;return{marker:{shape:a.shape,fill:this.getMarkerFill()??a.stroke??t??"rgba(0, 0, 0, 0)",stroke:a.stroke??t??"rgba(0, 0, 0, 0)",fillOpacity:a.fillOpacity??1,strokeOpacity:a.strokeOpacity??i??1,strokeWidth:a.strokeWidth??0,enabled:a.enabled||e<=0},line:{stroke:t,strokeOpacity:i,strokeWidth:e,lineDash:s}}}getLegendData(t){if(!this.properties.isValid()||t!=="category")return[];const{id:e,ctx:{legendManager:i},visible:s}=this,{radiusKey:a,radiusName:n,showInLegend:o}=this.properties;return[{legendType:"category",id:e,itemId:a,seriesId:e,enabled:s&&i.getItemEnabled({seriesId:e,itemId:a}),label:{text:n??a},symbol:this.legendItemSymbol(),hideInLegend:!o}]}pickNodeClosestDatum(t){const{nodeData:e,centerX:i,centerY:s}=this,{x:a,y:n}=t,o=this.radius;if(Math.sqrt((a-i)**2+(n-s)**2)>o+this.properties.marker.size)return;let l=1/0,c;for(const h of e){const{point:{x:u=NaN,y:d=NaN}={}}=h;if(isNaN(u)||isNaN(d))continue;const p=Math.sqrt((t.x-u-i)**2+(t.y-d-s)**2);p<l&&(l=p,c=h)}if(c){const h=Math.max(l-(c.point?.size??0),0);return{datum:c,distance:h}}}computeLabelsBBox(){const{label:t}=this.properties;this.maybeRefreshNodeData();const e=[],i=new vgt;return this.nodeData.forEach(s=>{if(!t.enabled||!s.label)return;i.text=s.label.text,i.x=s.label.x,i.y=s.label.y,i.setFont(t),i.setAlign(s.label);const a=i.getBBox();e.push(a)}),e.length===0?null:mgt.merge(e)}getLineNode(){return this.lineSelection?.at(0)}beforePathAnimation(){const t=this.getLineNode();t&&(t.fill=void 0,t.lineJoin="round",t.lineCap="round",t.pointerEvents=Sgt.None,t.stroke=this.properties.stroke,t.strokeWidth=this.getStrokeWidth(this.properties.strokeWidth),t.strokeOpacity=this.properties.strokeOpacity,t.lineDash=this.properties.lineDash,t.lineDashOffset=this.properties.lineDashOffset)}getLinePoints(){const{nodeData:t,resetInvalidToZero:e}=this,{connectMissingData:i}=this.properties;if(t.length===0)return[];const s=this.axes[Fn.Y],n=this.axes[Fn.X]?.isReversed(),r=s?.isReversed()&&!n?[...t].reverse():t,l=[];let c=!1,h;return r.forEach((u,d)=>{let{x:p,y:g}=u.point;const f=isNaN(p)||isNaN(g);f||(h??(h=u)),f&&!i&&(p=0,g=0);const x=d===0||!e&&!i&&(f||c);l.push({x:p,y:g,moveTo:x}),c=f}),h!==void 0&&l.push({x:h.point.x,y:h.point.y,moveTo:!1}),l}animateSinglePath(t,e,i){const{path:s}=t;s.clear(!0);const a=this.getAxisInnerRadius(),n=this.axes[Fn.Y],r=n?.isReversed()?this.radius+a-n?.scale.convert(0):a;e.forEach(l=>{const{x:c,y:h,arc:u,radius:d=0,startAngle:p=0,endAngle:g=0,moveTo:f}=l,x=Math.atan2(h,c),m=r*Math.cos(x),b=r*Math.sin(x),v=i,S=m*(1-v)+c*v,D=b*(1-v)+h*v;u?s.arc(c,h,d,p,g):f?s.moveTo(S,D):s.lineTo(S,D)}),t.checkPathDirty()}animatePaths(t){const e=this.getLinePoints(),i=this.getLineNode();i&&this.animateSinglePath(i,e,t)}animateEmptyUpdateReady(){const{itemSelection:t,labelSelection:e}=this,{animationManager:i}=this.ctx;this.beforePathAnimation(),i.animate({id:`${this.id}_'path`,groupId:this.id,from:0,to:1,phase:"initial",collapsable:!1,onUpdate:s=>this.animatePaths(s),onStop:()=>this.animatePaths(1)}),ugt(this,i,"added",t),hgt(this,"labels",i,e)}animateWaitingUpdateReady(t){super.animateWaitingUpdateReady(t),this.resetPaths()}animateReadyResize(t){super.animateReadyResize(t),this.resetPaths()}resetPaths(){const t=this.getLineNode();if(t){const{path:e}=t,i=this.getLinePoints();t.fill=void 0,t.stroke=this.properties.stroke,t.strokeWidth=this.getStrokeWidth(this.properties.strokeWidth),t.strokeOpacity=this.properties.strokeOpacity,t.lineDash=this.properties.lineDash,t.lineDashOffset=this.properties.lineDashOffset,e.clear(!0);for(const{x:s,y:a,moveTo:n}of i)n?e.moveTo(s,a):e.lineTo(s,a);t.checkPathDirty()}}getFormattedMarkerStyle(t){const{angleKey:e,radiusKey:i}=this.properties;return this.getMarkerStyle(this.properties.marker,{datum:t,angleKey:e,radiusKey:i,highlighted:!0})}computeFocusBounds(t){const e=ggt(this,t),{translationX:i,translationY:s}=this.contentGroup;return e?.translate(i,s),e}};mC.className="RadarSeries";var Agt=(P(),_(w)),{RATIO:Igt,COLOR_STRING:kgt,Validate:uU}=Agt._ModuleSupport,xC=class extends fs{constructor(){super(...arguments),this.fill="black",this.fillOpacity=1}};y([uU(kgt)],xC.prototype,"fill",2),y([uU(Igt)],xC.prototype,"fillOpacity",2);var{Group:Lgt,Path:Tgt,PointerEvents:Ngt,Selection:Cgt,ChartAxisDirection:dU}=aU._ModuleSupport,bC=class extends mC{constructor(t){super(t),this.properties=new xC,this.resetInvalidToZero=!0;const e=new Lgt;this.contentGroup.append(e),this.areaSelection=Cgt.select(e,Tgt)}updatePathSelections(){const t=this.visible?[!0]:[];this.areaSelection.update(t),super.updatePathSelections()}getAreaNode(){return this.areaSelection.at(0)}getMarkerFill(t){return t?.fill??this.properties.marker.fill??this.properties.fill}beforePathAnimation(){super.beforePathAnimation();const t=this.getAreaNode();t.fill=this.properties.fill,t.fillOpacity=this.properties.fillOpacity,t.pointerEvents=Ngt.None,t.stroke=void 0}animatePaths(t){super.animatePaths(t),this.animateSinglePath(this.getAreaNode(),this.getAreaPoints(),t)}getAreaPoints(){const t=this.getLinePoints(),e=o=>{const r=this.axes[o];return r instanceof aU._ModuleSupport.PolarAxis?r:void 0},i=e(dU.Y),s=e(dU.X);if(!i?.isReversed())return t;const n=s?.getAxisLinePoints()?.points??[];return t.concat(...n)}resetPaths(){super.resetPaths();const t=this.getAreaNode();if(t){const{path:e}=t,i=this.getAreaPoints();t.fill=this.properties.fill,t.fillOpacity=this.properties.fillOpacity,t.stroke=void 0,t.lineDash=this.properties.lineDash,t.lineDashOffset=this.properties.lineDashOffset,t.lineJoin=t.lineCap="round",e.clear(!0),i.forEach(({x:s,y:a,moveTo:n,arc:o,radius:r=0,startAngle:l=0,endAngle:c=0})=>{o?e.arc(s,a,r,l,c):n?e.moveTo(s,a):e.lineTo(s,a)}),e.closePath(),t.checkPathDirty()}}};bC.className="RadarAreaSeries",bC.type="radar-area";var{markerPaletteFactory:Ogt,ThemeConstants:{POLAR_AXIS_TYPE:pU}}=Ypt._ModuleSupport,Egt={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["polar"],identifier:"radar-area",moduleFactory:t=>new bC(t),tooltipDefaults:{range:"nearest"},defaultAxes:[{type:pU.ANGLE_CATEGORY},{type:pU.RADIUS_NUMBER}],themeTemplate:Qpt,paletteFactory:t=>{const{marker:e}=Ogt(t);return{stroke:e.stroke,fill:e.fill,marker:e}}},wgt=(P(),_(w)),SC=class extends mC{updatePathSelections(){this.lineSelection.update(this.visible?[!0]:[])}};SC.className="RadarLineSeries",SC.type="radar-line";var{POLAR_AXIS_TYPE:gU}=wgt._ModuleSupport.ThemeConstants,Rgt={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["polar"],identifier:"radar-line",moduleFactory:t=>new SC(t),tooltipDefaults:{range:"nearest"},defaultAxes:[{type:gU.ANGLE_CATEGORY},{type:gU.RADIUS_NUMBER}],themeTemplate:$pt,paletteFactory:({takeColors:t})=>{const{fills:[e],strokes:[i]}=t(1);return{stroke:e,marker:{fill:e,stroke:i}}}},_gt=(P(),_(w)),vC=(P(),_(w)),Pgt=(P(),_(w)),{SeriesProperties:Bgt,SeriesTooltip:zgt,Validate:Di,COLOR_STRING:fU,NUMBER:yU,FUNCTION:Fgt,LINE_DASH:jgt,OBJECT:mU,POSITIVE_NUMBER:MC,RATIO:xU,STRING:My,Label:Ggt}=Pgt._ModuleSupport,mi=class extends Bgt{constructor(){super(...arguments),this.fill="black",this.fillOpacity=1,this.stroke="black",this.strokeWidth=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.cornerRadius=0,this.rotation=0,this.label=new Ggt,this.tooltip=new zgt}};y([Di(My)],mi.prototype,"angleKey",2),y([Di(My)],mi.prototype,"radiusKey",2),y([Di(My,{optional:!0})],mi.prototype,"angleName",2),y([Di(My,{optional:!0})],mi.prototype,"radiusName",2),y([Di(fU)],mi.prototype,"fill",2),y([Di(xU)],mi.prototype,"fillOpacity",2),y([Di(fU)],mi.prototype,"stroke",2),y([Di(MC)],mi.prototype,"strokeWidth",2),y([Di(xU)],mi.prototype,"strokeOpacity",2),y([Di(jgt)],mi.prototype,"lineDash",2),y([Di(MC)],mi.prototype,"lineDashOffset",2),y([Di(MC)],mi.prototype,"cornerRadius",2),y([Di(Fgt,{optional:!0})],mi.prototype,"itemStyler",2),y([Di(yU)],mi.prototype,"rotation",2),y([Di(My,{optional:!0})],mi.prototype,"stackGroup",2),y([Di(yU,{optional:!0})],mi.prototype,"normalizedTo",2),y([Di(mU)],mi.prototype,"label",2),y([Di(mU)],mi.prototype,"tooltip",2);var Vgt=(P(),_(w)),{SectorBox:bU,motion:Ugt}=Vgt._ModuleSupport;function Wgt(t,e,i){if(i==="updated"){if(t.previousDatum==null||isNaN(t.previousDatum.innerRadius)||isNaN(t.previousDatum.outerRadius))return"added";if(isNaN(e.innerRadius)||isNaN(e.outerRadius))return"removed"}return i==="added"&&t.previousDatum!=null?"updated":i}function SU(t){return{toFn:(s,a,n)=>{let o,r,l,c,h;return n==="removed"?(o=t,r=t,l=a.innerRadius,c=a.outerRadius,h=new bU(o,r,l,c)):(o=a.startAngle,r=a.endAngle,l=isNaN(a.innerRadius)?s.innerRadius:a.innerRadius,c=isNaN(a.outerRadius)?s.outerRadius:a.outerRadius,h=a.clipSector),{startAngle:o,endAngle:r,innerRadius:l,outerRadius:c,clipSector:h}},fromFn:(s,a,n)=>{n=Wgt(s,a,n);let o,r,l,c,h;n==="removed"||n==="updated"?(o=s.startAngle,r=s.endAngle,l=s.innerRadius,c=s.outerRadius,h=s.clipSector):(o=t,r=t,l=a.innerRadius,c=a.outerRadius),h??(h=new bU(o,r,l,c));const u=Ugt.NODE_UPDATE_STATE_TO_PHASE_MAPPING[n];return{startAngle:o,endAngle:r,innerRadius:l,outerRadius:c,clipSector:h,phase:u}}}}function Hgt(t,e){return{centerX:0,centerY:0,innerRadius:e.innerRadius,outerRadius:e.outerRadius,startAngle:e.startAngle,endAngle:e.endAngle,clipSector:e.clipSector}}var{ChartAxisDirection:Wr,PolarAxis:Ygt,diff:Kgt,isDefined:Xgt,groupAccumulativeValueProperty:vU,keyProperty:Zgt,normaliseGroupTo:$gt,valueProperty:Qgt,fixNumericExtent:qgt,resetLabelFn:Jgt,seriesLabelFadeInAnimation:tft,seriesLabelFadeOutAnimation:eft,animationValidation:ift,angleBetween:sft,createDatumId:MU,BandScale:aft,Sector:nft,SectorBox:oft,motion:DU}=vC._ModuleSupport,rft=class extends vC._ModuleSupport.SeriesNodeEvent{constructor(t,e,i,s){super(t,e,i,s),this.angleKey=s.properties.angleKey,this.radiusKey=s.properties.radiusKey}},DC=class extends vC._ModuleSupport.PolarSeries{constructor(t){super({moduleCtx:t,useLabelLayer:!0,canHaveAxes:!0,animationResetFns:{item:Hgt,label:Jgt}}),this.properties=new mi,this.NodeEvent=rft,this.groupScale=new aft,this.circleCache={r:0,cx:0,cy:0}}nodeFactory(){return new nft}getSeriesDomain(t){const{dataModel:e,processedData:i}=this;if(!i||!e)return[];if(t===Wr.X){const s=e.getDomain(this,"angleValue-end","value",i),a=[s[0]>0?0:s[0],s[1]<0?0:s[1]];return qgt(a)}else return e.getDomain(this,"radiusValue","key",i)}async processData(t){const{visible:e}=this,{angleKey:i,radiusKey:s,normalizedTo:a}=this.properties,n=!this.ctx.animationManager.isSkipped();if(!this.properties.isValid())return;const o=this.getStackId(),r=`${o}-trailing`,l=[];Xgt(a)&&l.push($gt([o,r],Math.abs(a),"range")),n&&(this.processedData&&l.push(Kgt(this.id,this.processedData)),l.push(ift()));const c=e||!n?{}:{forceValue:0},h=this.axes[Wr.Y]?.scale.type,u=this.axes[Wr.X]?.scale.type;await this.requestDataModel(t,this.data,{props:[Zgt(s,h,{id:"radiusValue"}),Qgt(i,u,{id:"angleValue-raw",invalidValue:null,...c}),...vU(i,"normal","current",{id:"angleValue-end",rangeId:"angleValue-range",invalidValue:null,groupId:o,separateNegative:!0,...c},u),...vU(i,"trailing","current",{id:"angleValue-start",invalidValue:null,groupId:r,separateNegative:!0,...c},u),...l]}),this.animationState.transition("updateData")}didCircleChange(){const t=this.radius,e=this.centerX,i=this.centerY,s=this.circleCache;return t===s.r&&e===s.cx&&i===s.cy?!1:(this.circleCache={r:t,cx:e,cy:i},!0)}maybeRefreshNodeData(){if(!this.didCircleChange()&&!this.nodeDataRefresh)return;const{nodeData:e=[]}=this.createNodeData()??{};this.nodeData=e,this.nodeDataRefresh=!1}getAxisInnerRadius(){const t=this.axes[Wr.Y];return t instanceof Ygt?this.radius*t.innerRadiusRatio:0}createNodeData(){const{processedData:t,dataModel:e}=this;if(!e||!t||t.type!=="ungrouped"||t.rawData.length===0||!this.properties.isValid())return;const i=this.axes[Wr.X],s=this.axes[Wr.Y],a=i?.scale,n=s?.scale;if(!a||!n)return;const o=e.resolveKeysById(this,"radiusValue",t),r=e.resolveColumnById(this,"angleValue-start",t),l=e.resolveColumnById(this,"angleValue-end",t),c=e.resolveColumnById(this,"angleValue-raw",t),h=e.resolveProcessedDataIndexById(this,"angleValue-range");let u=0;s instanceof mh&&(u=s.groupPaddingInner);const{groupScale:d}=this,{index:p,visibleGroupCount:g}=this.ctx.seriesStateManager.getVisiblePeerGroupIndex(this);d.domain=Array.from({length:g}).map((F,G)=>String(G)),d.range=[0,Math.abs(n.bandwidth??0)],d.paddingInner=g>1?u:0;const f=d.bandwidth>=1?d.bandwidth:d.rawBandwidth,x=i.isReversed(),m=s.isReversed(),b=m?this.radius:this.getAxisInnerRadius(),S=(m?this.getAxisInnerRadius():this.radius)+b,{angleKey:D,radiusKey:k,angleName:L,radiusName:T,label:N}=this.properties,C=(F,G,j,V)=>{const W=this.getLabelText(N,{value:G,datum:F,angleKey:D,radiusKey:k,angleName:L,radiusName:T});if(W)return{x:j,y:V,text:W,textAlign:"center",textBaseline:"middle"}},O=[],R={itemId:k,nodeData:O,labelData:O};if(!this.visible)return R;const{rawData:E,aggregation:z}=t;return E.forEach((F,G)=>{const j=o[G];if(j==null)return;const V=c[G],W=r[G],B=l[G],U=V>=0&&!Object.is(V,-0),K=z[G][h][U?1:0],X=U===x;let Q=a.convert(W,!0),$=a.convert(B,!0),Z=a.convert(0,!0),Y=a.convert(K,!0);X&&([Z,Y]=[Y,Z],[Q,$]=[$,Q]);const q=S-n.convert(j)+d.convert(String(p)),it=q+f,at=(q+it)/2,rt=Q+sft(Q,$)/2,ot=Math.cos(rt)*at,et=Math.sin(rt)*at,gt=this.properties.label.enabled?C(F,V,ot,et):void 0,dt=new oft(Q,$,q,it);O.push({series:this,datum:F,datumIndex:G,point:{x:ot,y:et,size:0},midPoint:{x:ot,y:et},label:gt,angleValue:V,radiusValue:j,innerRadius:q,outerRadius:it,startAngle:Z,endAngle:Y,clipSector:dt,reversed:X,index:G})}),R}update({seriesRect:t}){const e=this.checkResize(t);this.maybeRefreshNodeData(),this.contentGroup.translationX=this.centerX,this.contentGroup.translationY=this.centerY,this.highlightGroup.translationX=this.centerX,this.highlightGroup.translationY=this.centerY,this.labelGroup&&(this.labelGroup.translationX=this.centerX,this.labelGroup.translationY=this.centerY),this.updateSectorSelection(this.itemSelection,!1),this.updateSectorSelection(this.highlightSelection,!0),this.updateLabels(),e&&this.animationState.transition("resize"),this.animationState.transition("update")}getItemBaseStyle(t){const{properties:e}=this,i=t?e.highlightStyle.item:void 0,s=this.getStrokeWidth(e.strokeWidth);return{fill:i?.fill??e.fill,fillOpacity:i?.fillOpacity??e.fillOpacity,stroke:i?.stroke??e.stroke,strokeWidth:i?.strokeWidth??s,strokeOpacity:i?.strokeOpacity??e.strokeOpacity,lineDash:i?.lineDash??e.lineDash,lineDashOffset:i?.lineDashOffset??e.lineDashOffset,cornerRadius:e.cornerRadius}}getItemStyleOverrides(t,e,i,s){const{id:a,properties:n}=this,{angleKey:o,radiusKey:r,itemStyler:l}=n;if(l!=null)return this.cachedDatumCallback(MU(t,s?"highlight":"node"),()=>l({seriesId:a,datum:e,highlighted:s,angleKey:o,radiusKey:r,...i}))}updateSectorSelection(t,e){let i=[];if(e){const a=this.ctx.highlightManager?.getActiveHighlight();a?.datum&&a.series===this&&i.push(a)}else i=this.nodeData;const s=this.getItemBaseStyle(e);t.update(i,void 0,a=>this.getDatumId(a)).each((a,n)=>{const{datum:o,datumIndex:r}=n,l=this.getItemStyleOverrides(String(r),o,s,e),c=l?.stroke??s.stroke,h=l?.strokeWidth??s.strokeWidth,u=l?.cornerRadius??s.cornerRadius;a.fill=l?.fill??s.fill,a.fillOpacity=l?.fillOpacity??s.fillOpacity,a.stroke=c,a.strokeWidth=h,a.strokeOpacity=l?.strokeOpacity??s.strokeOpacity,a.lineDash=l?.lineDash??s.lineDash,a.lineDashOffset=l?.lineDashOffset??s.lineDashOffset,a.lineJoin="round",a.inset=c!=null?h/2:0,a.startInnerCornerRadius=o.reversed?u:0,a.startOuterCornerRadius=o.reversed?u:0,a.endInnerCornerRadius=o.reversed?0:u,a.endOuterCornerRadius=o.reversed?0:u,e&&(a.startAngle=n.startAngle,a.endAngle=n.endAngle,a.clipSector=n.clipSector,a.innerRadius=n.innerRadius,a.outerRadius=n.outerRadius)})}updateLabels(){const{label:t}=this.properties;this.labelSelection.update(this.nodeData).each((e,i)=>{t.enabled&&i.label?(e.x=i.label.x,e.y=i.label.y,e.fill=t.color,e.fontFamily=t.fontFamily,e.fontSize=t.fontSize,e.fontStyle=t.fontStyle,e.fontWeight=t.fontWeight,e.text=i.label.text,e.textAlign=i.label.textAlign,e.textBaseline=i.label.textBaseline,e.visible=!0):e.visible=!1})}getBarTransitionFunctions(){const t=this.axes[Wr.X]?.scale;let e=0;if(!t)return SU(e);const i=Math.min(t.domain[0],t.domain[1]),s=Math.max(t.domain[0],t.domain[1]);return i<=0&&s>=0&&(e=t.convert(0)),SU(e)}animateEmptyUpdateReady(){const{labelSelection:t}=this,e=this.getBarTransitionFunctions();DU.fromToMotion(this.id,"datums",this.ctx.animationManager,[this.itemSelection],e),tft(this,"labels",this.ctx.animationManager,t)}animateClearingUpdateEmpty(){const{itemSelection:t}=this,{animationManager:e}=this.ctx,i=this.getBarTransitionFunctions();DU.fromToMotion(this.id,"datums",e,[t],i),eft(this,"labels",e,this.labelSelection)}getTooltipContent(t){const{id:e,dataModel:i,processedData:s,axes:a,properties:n}=this,{angleKey:o,angleName:r,radiusKey:l,radiusName:c,tooltip:h}=n,u=a[Wr.X],d=a[Wr.Y];if(!i||!s||s.rawData.length===0||!u||!d)return;const{datumIndex:p}=t,g=s.rawData[p],f=i.resolveKeysById(this,"radiusValue",s)[p],x=i.resolveColumnById(this,"angleValue-raw",s)[p];if(f==null)return;const m=this.getItemBaseStyle(!1);return Object.assign(m,this.getItemStyleOverrides(String(p),p,m,!1)),h.formatTooltip({heading:d.formatDatum(f),symbol:this.legendItemSymbol(),data:[{label:r,fallbackLabel:o,value:u.formatDatum(x)}]},{seriesId:e,datum:g,title:r,angleKey:o,angleName:r,radiusKey:l,radiusName:c,...m})}pickNodeClosestDatum(t){return this.pickNodeNearestDistantObject(t,this.itemSelection.nodes())}legendItemSymbol(){const{fill:t,stroke:e,fillOpacity:i,strokeOpacity:s,strokeWidth:a}=this.properties;return{marker:{fill:t??"rgba(0, 0, 0, 0)",stroke:e??"rgba(0, 0, 0, 0)",fillOpacity:i??1,strokeOpacity:s??1,strokeWidth:a}}}getLegendData(t){if(!this.properties.isValid()||t!=="category")return[];const{id:e,visible:i}=this,{angleKey:s,angleName:a,showInLegend:n}=this.properties;return[{legendType:"category",id:e,itemId:s,seriesId:e,enabled:i,label:{text:a??s},symbol:this.legendItemSymbol(),hideInLegend:!n}]}getDatumId(t){return MU(t.radiusValue)}computeLabelsBBox(){return null}getStackId(){return`radialBar-stack-${this.seriesGrouping?.groupIndex??this.id}-xValues`}};DC.className="RadialBarSeries",DC.type="radial-bar";var lft=(P(),_(w)),{ThemeSymbols:{DEFAULT_FONT_FAMILY:cft,DEFAULT_INVERTED_LABEL_COLOUR:hft},ThemeConstants:{POLAR_AXIS_TYPE:uft}}=lft._ModuleSupport,dft={series:{strokeWidth:0,label:{enabled:!1,fontSize:12,fontFamily:cft,color:hft}},axes:{[uft.RADIUS_CATEGORY]:{innerRadiusRatio:.2,groupPaddingInner:.2,paddingInner:.2,paddingOuter:.1}}},{POLAR_AXIS_TYPE:AU}=_gt._ModuleSupport.ThemeConstants,pft={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["polar"],identifier:"radial-bar",moduleFactory:t=>new DC(t),tooltipDefaults:{range:"exact"},defaultAxes:[{type:AU.ANGLE_NUMBER},{type:AU.RADIUS_CATEGORY}],themeTemplate:dft,paletteFactory:({takeColors:t})=>{const{fills:[e],strokes:[i]}=t(1);return{fill:e,stroke:i}},stackable:!0,groupable:!0},gft=(P(),_(w)),fft=(P(),_(w)),yft=(P(),_(w)),{Validate:IU,RATIO:kU}=yft._ModuleSupport,AC=class extends ai{};y([IU(kU,{optional:!0})],AC.prototype,"columnWidthRatio",2),y([IU(kU,{optional:!0})],AC.prototype,"maxColumnWidthRatio",2);var{ChartAxisDirection:mft,PolarAxis:xft,RadialColumnShape:bft,getRadialColumnWidth:Sft}=fft._ModuleSupport,IC=class extends _V{constructor(t){super(t,{animationResetFns:{item:upt}}),this.properties=new AC}getStackId(){return`radarColumn-stack-${this.seriesGrouping?.groupIndex??this.id}-yValues`}nodeFactory(){return new bft}getColumnTransitionFunctions(){const t=this.isRadiusAxisReversed()?this.radius:this.getAxisInnerRadius();return hpt(t)}isRadiusAxisCircle(){const t=this.axes[mft.Y];return t instanceof xft?t.shape==="circle":!1}updateItemPath(t,e,i){t.isBeveled=this.isRadiusAxisCircle(),t.isRadiusAxisReversed=this.isRadiusAxisReversed(),i&&(t.innerRadius=e.innerRadius,t.outerRadius=e.outerRadius,t.startAngle=e.startAngle,t.endAngle=e.endAngle,t.columnWidth=e.columnWidth,t.axisInnerRadius=e.axisInnerRadius,t.axisOuterRadius=e.axisOuterRadius)}getColumnWidth(t,e){const{columnWidthRatio:i=.5,maxColumnWidthRatio:s=.5}=this.properties;return Sft(t,e,this.radius,i,s)}};IC.className="RadialColumnSeries",IC.type="radial-column";var vft=(P(),_(w)),{ThemeSymbols:{DEFAULT_FONT_FAMILY:Mft,DEFAULT_LABEL_COLOUR:Dft},ThemeConstants:{POLAR_AXIS_TYPE:LU,POLAR_AXIS_SHAPE:TU}}=vft._ModuleSupport,Aft={series:{columnWidthRatio:.5,maxColumnWidthRatio:.5,strokeWidth:0,label:{enabled:!1,fontSize:12,fontFamily:Mft,color:Dft}},axes:{[LU.ANGLE_CATEGORY]:{shape:TU.CIRCLE,groupPaddingInner:0,paddingInner:0,label:{spacing:10}},[LU.RADIUS_NUMBER]:{shape:TU.CIRCLE,innerRadiusRatio:.5}}},{POLAR_AXIS_TYPE:NU}=gft._ModuleSupport.ThemeConstants,Ift={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["polar"],identifier:"radial-column",moduleFactory:t=>new IC(t),tooltipDefaults:{range:"exact"},defaultAxes:[{type:NU.ANGLE_CATEGORY},{type:NU.RADIUS_NUMBER}],themeTemplate:Aft,paletteFactory:({takeColors:t})=>{const{fills:[e],strokes:[i]}=t(1);return{fill:e,stroke:i}},stackable:!0,groupable:!0},kft=(P(),_(w)),Dy=(P(),_(w)),Lft=(P(),_(w)),{SvgPath:Tft,Rotatable:Nft,Translatable:Cft,Scalable:Oft}=Lft._ModuleSupport,kC=class extends Nft(Oft(Cft(Tft))){constructor(){super(...arguments),this.scalingCenterX=.5,this.scalingCenterY=.5,this.rotationCenterX=.5,this.rotationCenterY=.5}};kC.defaultPathData="M0.50245 0.53745C0.481767 0.53745 0.465 0.520683 0.465 0.5C0.465 0.479317 0.481767 0.46255 0.50245 0.46255L1 0.500012L0.50245 0.53745Z";var Eft=(P(),_(w)),{BaseProperties:$v,SeriesTooltip:wft,SeriesProperties:Rft,PropertiesArray:LC,Validate:ut,BOOLEAN:CU,COLOR_STRING:Hr,COLOR_STRING_ARRAY:_ft,FUNCTION:Pft,LINE_DASH:Qv,NUMBER:Xh,OBJECT_ARRAY:TC,OBJECT:Yr,POSITIVE_NUMBER:sn,RATIO:jn,STRING:NC,UNION:Bft,Logger:zft,Label:Fft}=Eft._ModuleSupport,jft=Bft(["inside","outside","middle"],"a placement"),OU=class extends Fft{};y([ut(Xh,{optional:!0})],OU.prototype,"spacing",2);var ji=class extends $v{constructor(){super(...arguments),this.label=new OU}};y([ut(NC,{optional:!0})],ji.prototype,"text",2),y([ut(Xh,{optional:!0})],ji.prototype,"value",2),y([ut(CG,{optional:!0})],ji.prototype,"shape",2),y([ut(jft,{optional:!0})],ji.prototype,"placement",2),y([ut(Xh,{optional:!0})],ji.prototype,"spacing",2),y([ut(sn,{optional:!0})],ji.prototype,"size",2),y([ut(Xh,{optional:!0})],ji.prototype,"rotation",2),y([ut(Hr,{optional:!0})],ji.prototype,"fill",2),y([ut(jn,{optional:!0})],ji.prototype,"fillOpacity",2),y([ut(Hr,{optional:!0})],ji.prototype,"stroke",2),y([ut(sn,{optional:!0})],ji.prototype,"strokeWidth",2),y([ut(jn,{optional:!0})],ji.prototype,"strokeOpacity",2),y([ut(Qv,{optional:!0})],ji.prototype,"lineDash",2),y([ut(sn,{optional:!0})],ji.prototype,"lineDashOffset",2),y([ut(Yr)],ji.prototype,"label",2);var Gn=class extends $v{constructor(){super(...arguments),this.enabled=!0,this.fills=new LC(Yd),this.fillMode="continuous",this.fillOpacity=1,this.stroke="black",this.strokeWidth=0,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0}};y([ut(CU)],Gn.prototype,"enabled",2),y([ut(TC)],Gn.prototype,"fills",2),y([ut(Lv)],Gn.prototype,"fillMode",2),y([ut(Hr,{optional:!0})],Gn.prototype,"fill",2),y([ut(jn)],Gn.prototype,"fillOpacity",2),y([ut(Hr,{optional:!0})],Gn.prototype,"stroke",2),y([ut(sn,{optional:!0})],Gn.prototype,"strokeWidth",2),y([ut(jn)],Gn.prototype,"strokeOpacity",2),y([ut(Qv)],Gn.prototype,"lineDash",2),y([ut(sn)],Gn.prototype,"lineDashOffset",2);var Vn=class extends $v{constructor(){super(...arguments),this.fills=new LC(Yd),this.fillMode="continuous",this.fillOpacity=1,this.stroke="black",this.strokeWidth=0,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.defaultFill="black"}};y([ut(TC)],Vn.prototype,"fills",2),y([ut(Lv)],Vn.prototype,"fillMode",2),y([ut(Hr,{optional:!0})],Vn.prototype,"fill",2),y([ut(jn)],Vn.prototype,"fillOpacity",2),y([ut(Hr)],Vn.prototype,"stroke",2),y([ut(sn)],Vn.prototype,"strokeWidth",2),y([ut(jn)],Vn.prototype,"strokeOpacity",2),y([ut(Qv)],Vn.prototype,"lineDash",2),y([ut(sn)],Vn.prototype,"lineDashOffset",2),y([ut(Hr)],Vn.prototype,"defaultFill",2);var Un=class extends $v{constructor(){super(...arguments),this.enabled=!0,this.spacing=0,this.fill="black",this.fillOpacity=1,this.stroke="black",this.strokeWidth=0,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0}};y([ut(CU)],Un.prototype,"enabled",2),y([ut(jn,{optional:!0})],Un.prototype,"radiusRatio",2),y([ut(Xh)],Un.prototype,"spacing",2),y([ut(Hr)],Un.prototype,"fill",2),y([ut(jn)],Un.prototype,"fillOpacity",2),y([ut(Hr)],Un.prototype,"stroke",2),y([ut(sn)],Un.prototype,"strokeWidth",2),y([ut(jn)],Un.prototype,"strokeOpacity",2),y([ut(Qv)],Un.prototype,"lineDash",2),y([ut(sn)],Un.prototype,"lineDashOffset",2);var EU=class extends zo{};y([ut(NC,{optional:!0})],EU.prototype,"text",2);var wU=class extends py{};y([ut(NC,{optional:!0})],wU.prototype,"text",2);var oi=class extends Rft{constructor(){super(...arguments),this.segmentation=new yy,this.defaultColorRange=[],this.targets=new LC(ji),this.defaultTarget=new ji,this.outerRadiusRatio=1,this.innerRadiusRatio=1,this.cornerRadius=0,this.cornerMode="container",this.spacing=0,this.scale=new Vn,this.bar=new Gn,this.needle=new Un,this.label=new EU,this.secondaryLabel=new wU,this.tooltip=new wft}isValid(t){if(!super.isValid(t))return!1;const{outerRadius:e,innerRadius:i}=this;return e==null!=(i==null)?(zft.warnOnce("Either [innerRadius] and [outerRadius] must both be set, or neither can be set."),!1):!0}};y([ut(Xh)],oi.prototype,"value",2),y([ut(Yr)],oi.prototype,"segmentation",2),y([ut(_ft)],oi.prototype,"defaultColorRange",2),y([ut(TC)],oi.prototype,"targets",2),y([ut(Yr)],oi.prototype,"defaultTarget",2),y([ut(jn)],oi.prototype,"outerRadiusRatio",2),y([ut(jn)],oi.prototype,"innerRadiusRatio",2),y([ut(sn,{optional:!0})],oi.prototype,"outerRadius",2),y([ut(sn,{optional:!0})],oi.prototype,"innerRadius",2),y([ut(sn)],oi.prototype,"cornerRadius",2),y([ut(OG)],oi.prototype,"cornerMode",2),y([ut(Xh)],oi.prototype,"spacing",2),y([ut(Yr)],oi.prototype,"scale",2),y([ut(Yr)],oi.prototype,"bar",2),y([ut(Yr)],oi.prototype,"needle",2),y([ut(Pft,{optional:!0})],oi.prototype,"itemStyler",2),y([ut(Yr)],oi.prototype,"label",2),y([ut(Yr)],oi.prototype,"secondaryLabel",2),y([ut(Yr)],oi.prototype,"tooltip",2);var Gft=(P(),_(w)),{SectorBox:CC}=Gft._ModuleSupport;function Vft(t){const{startAngle:e,endAngle:i,clipStartAngle:s,clipEndAngle:a,innerRadius:n,outerRadius:o}=t;if(!(s==null||a==null))return new CC(Math.max(s,e),Math.min(a,i),n,o)}function RU(t,e,i){return Math.max(t,i.startAngle)<=Math.min(e,i.endAngle)}function OC(t){return t.clipStartAngle!=null&&t.clipEndAngle!=null}function EC(t,e){const{clipStartAngle:i,clipEndAngle:s,innerRadius:a,outerRadius:n}=t;return new CC(i,e?i:s,a,n)}function _U(t,e){const i=t?"initial":"update";return{node:{fromFn(n,o){const r=n.previousDatum;let{startAngle:l,endAngle:c}=r??o;const h=r!=null&&OC(r)?EC(r,t):void 0,u=OC(o)?EC(o,t):void 0;let d;return h!=null&&u!=null?d=h:h==null&&u!=null?(d=u,l=o.startAngle,c=o.endAngle):h!=null&&u==null?(d=void 0,l=o.startAngle,c=o.endAngle):t&&(c=l),{startAngle:l,endAngle:c,clipSector:d,phase:i}},toFn(n,o){const{startAngle:r,endAngle:l}=o;let c;return OC(o)&&(c=EC(o,!1)),{startAngle:r,endAngle:l,clipSector:c}},applyFn(n,o){const{startAngle:r,endAngle:l}=o;let{clipSector:c}=o;c!=null&&(c=new CC(Math.max(r,c.startAngle),Math.min(l,c.endAngle),c.innerRadius,c.outerRadius));const h=c==null||RU(r,l,c);n.startAngle=r,n.endAngle=l,n.clipSector=c,n.visible=h}},needle:{fromFn(n){let{angle:o}=n.previousDatum??n.datum;return t&&(o=e),{rotation:o,phase:i}},toFn(n,o){const{angle:r}=o;return{rotation:r}}}}}function wC(t,e){const{startAngle:i,endAngle:s}=e,a=Vft(e),n=a==null||RU(i,s,a);return{startAngle:i,endAngle:s,clipSector:a,visible:n}}function PU(t,e){const{angle:i}=e;return{rotation:i}}var Uft={top:0,middle:.5,bottom:1};function Wft(t,e,i,s,a){const{padding:n,textAlign:o,verticalAlign:r}=i;let l,c;if(e.each((S,D)=>{D.label==="primary"?l=D:D.label==="secondary"&&(c=D)}),l==null)return;const h=fy(t,l,a?.label);if(h==null)return;const u=c!=null?fy(t,c,a?.secondaryLabel):void 0,d={padding:n},p=o==="center"?2:1,g=r==="middle"?2:1,f=S=>({width:Math.sqrt(Math.max(s**2-(S/g)**2,0))*p,height:Math.min(S,g*s),meta:null});let x,m,b;if(c!=null&&u!=null){const S=uG(h,l,u,c,d,f);x=S?.label,m=S?.secondaryLabel,b=S?.height??0}else{const S=uy(h,l,d,f);x=S?.[0],m=void 0,b=S?.[0].height??0}const v=b*Uft[r];e.each((S,D)=>{let k;if(D.label==="primary"?k=x:D.label==="secondary"&&(k=m),k==null){S.visible=!1;return}S.visible=!0,S.text=k.text,S.fontSize=k.fontSize,S.lineHeight=k.lineHeight,S.textAlign=o,S.textBaseline="middle";const L=D.label==="primary"?k.height/2:b-k.height/2;S.y=D.centerY+L-v,S.x=D.centerX})}var{fromToMotion:Ay,resetMotion:BU,SeriesNodePickMode:zU,StateMachine:Hft,createDatumId:RC,ChartAxisDirection:pc,normalizeAngle360:FU,normalizeAngle360Inclusive:jU,toDegrees:Yft,toRadians:Kft,BBox:Xft,Group:Zh,PointerEvents:_C,Selection:$h,Sector:Zft,Text:GU,ConicGradient:$ft,getMarker:Qft}=Dy._ModuleSupport,qft={inside:90,middle:0,outside:-90},Jft=[{textAlign:"left",textBaseline:"top"},{textAlign:"right",textBaseline:"top"},{textAlign:"right",textBaseline:"bottom"},{textAlign:"left",textBaseline:"bottom"}],tyt=[{textAlign:"right",textBaseline:"bottom"},{textAlign:"left",textBaseline:"bottom"},{textAlign:"left",textBaseline:"top"},{textAlign:"right",textBaseline:"top"}],PC=class extends Dy._ModuleSupport.Series{constructor(t){super({moduleCtx:t,useLabelLayer:!0,pickModes:[zU.EXACT_SHAPE_MATCH,zU.NEAREST_NODE]}),this.canHaveAxes=!0,this.properties=new oi,this.centerX=0,this.centerY=0,this.radius=0,this.textAlign="center",this.verticalAlign="middle",this.scaleGroup=this.contentGroup.appendChild(new Zh({name:"scaleGroup"})),this.itemGroup=this.contentGroup.appendChild(new Zh({name:"itemGroup"})),this.itemNeedleGroup=this.contentGroup.appendChild(new Zh({name:"itemNeedleGroup"})),this.itemTargetGroup=this.contentGroup.appendChild(new Zh({name:"itemTargetGroup"})),this.itemTargetLabelGroup=this.contentGroup.appendChild(new Zh({name:"itemTargetLabelGroup"})),this.itemLabelGroup=this.contentGroup.appendChild(new Zh({name:"itemLabelGroup"})),this.highlightTargetGroup=this.highlightGroup.appendChild(new Zh({name:"itemTargetLabelGroup"})),this.scaleSelection=$h.select(this.scaleGroup,()=>this.nodeFactory()),this.datumSelection=$h.select(this.itemGroup,()=>this.nodeFactory()),this.needleSelection=$h.select(this.itemNeedleGroup,kC),this.targetSelection=$h.select(this.itemTargetGroup,e=>this.markerFactory(e)),this.targetLabelSelection=$h.select(this.itemTargetLabelGroup,GU),this.labelSelection=$h.select(this.itemLabelGroup,GU),this.highlightTargetSelection=$h.select(this.highlightTargetGroup,e=>this.markerFactory(e)),this.nodeDatum={series:this,datum:{}},this.animationState=new Hft("empty",{empty:{update:{target:"ready",action:()=>this.animateEmptyUpdateReady()},reset:"empty",skip:"ready"},ready:{updateData:"waiting",clear:"clearing",resize:()=>this.animateReadyResize(),reset:"empty",skip:"ready"},waiting:{update:{target:"ready",action:()=>this.animateWaitingUpdateReady()},reset:"empty",skip:"ready"},clearing:{update:{target:"empty"},reset:"empty",skip:"ready"}}),this.itemGroup.pointerEvents=_C.None,this.itemTargetLabelGroup.pointerEvents=_C.None,this.itemLabelGroup.pointerEvents=_C.None}get maximumRadius(){return this.properties.outerRadius}get minimumRadius(){return this.properties.outerRadius}get hasData(){return this.properties.value!=null}nodeFactory(){return new Zft}markerFactory({shape:t}){const e=t!=="line"?Qft(t):RN,i=new e;return i.size=1,i}processData(){this.nodeDataRefresh=!0,this.animationState.transition("updateData")}formatLabel(t){return kG(t,this.axes[pc.X])}createConicGradient(t,e){const{centerX:i,centerY:s,radius:a}=this,{domain:n,range:o}=this.axes[pc.X].scale,[r,l]=o,{defaultColorRange:c}=this.properties,h=FU((r+l)/2+Math.PI),u=jU(l-r),d=NG(t,c,n,e).map(({color:p,offset:g})=>(g=Math.min(Math.max(g,0),1),g=(r+u*g-h)/(2*Math.PI),g=(g%1+1)%1,{offset:g,color:p}));return new $ft("oklch",d,Yft(h)-90,new Xft(i-a,s-a,2*a,2*a))}getTargets(){const{properties:t}=this,e=t.defaultTarget;return Array.from(t.targets).map(i=>{const{text:s=e.text,value:a=e.value??0,shape:n=e.shape??"triangle",rotation:o=e.rotation??0,strokeWidth:r=e.strokeWidth??0,placement:l=e.placement??"middle",spacing:c=e.spacing??0,size:h=e.size??0,fill:u=e.fill??"black",fillOpacity:d=e.fillOpacity??1,stroke:p=e.stroke??"black",strokeOpacity:g=e.strokeOpacity??1,lineDash:f=e.lineDash??[0],lineDashOffset:x=e.lineDashOffset??0}=i,{enabled:m=e.label.enabled,color:b=e.label.color??"black",fontStyle:v=e.label.fontStyle??"normal",fontWeight:S=e.label.fontWeight??"normal",fontSize:D=e.label.fontSize,fontFamily:k=e.label.fontFamily,spacing:L=e.label.spacing??0}=i.label;return{text:s,value:a,shape:n,placement:l,spacing:c,size:h,rotation:o,fill:u,fillOpacity:d,stroke:p,strokeWidth:r,strokeOpacity:g,lineDash:f,lineDashOffset:x,label:{enabled:m,color:b,fontStyle:v,fontWeight:S,fontSize:D,fontFamily:k,spacing:L}}})}getTargetRadius(t){const{radius:e,properties:i}=this,{innerRadiusRatio:s,outerRadiusRatio:a}=i,{placement:n,spacing:o,size:r}=t,l=e*a,c=e*s;switch(n){case"inside":return Math.max(c-o-r/2,0);case"outside":return l+o+r/2;default:return(c+l)/2}}getTargetLabel(t){const i=this.axes[pc.X].scale,{value:s,size:a,placement:n,label:o}=t,{spacing:r,color:l,fontStyle:c,fontWeight:h,fontSize:u,fontFamily:d}=o,p=void 0,g=i.convert(s),f=FU(g)/(Math.PI/2)|0,x=a/2+r;let m,b,v,S;switch(n){case"outside":({textAlign:m,textBaseline:b}=Jft[f]),v=x*Math.cos(g),S=x*Math.sin(g);break;case"inside":({textAlign:m,textBaseline:b}=tyt[f]),v=-x*Math.cos(g),S=-x*Math.sin(g);break;default:m="center",b="bottom",v=0,S=-x;break}return{offsetX:v,offsetY:S,fill:l,textAlign:m,textBaseline:b,fontStyle:c,fontWeight:h,fontSize:u,fontFamily:d,lineHeight:p}}createNodeData(){const{id:t,properties:e,radius:i,centerX:s,centerY:a}=this;if(!e.isValid())return;const n=this.axes[pc.X];if(n==null)return;const{value:o,innerRadiusRatio:r,outerRadiusRatio:l,segmentation:c,cornerRadius:h,cornerMode:u,needle:d,bar:p,scale:g,label:f,secondaryLabel:x}=e,{outerRadius:m=i*l,innerRadius:b=i*r}=e,v=this.getTargets(),{domain:S}=n.scale,D=[],k=[],L=[],T=[],N=[],[C,O]=n.range,R=n.scale,E=u==="item",z=R.convert(S[0]),F=R.convert(o),G=Math.ceil(jU(F-z)*i);let j=c.enabled?c.interval.getSegments(n.scale,G):void 0;const V=p.fill??this.createConicGradient(p.fills,p.fillMode),W=g.fill??(p.enabled&&g.fills.length===0?g.defaultFill:void 0)??this.createConicGradient(g.fills,g.fillMode);if(j==null&&E){const[B,U]=S,H={value:o,segmentStart:B,segmentEnd:U},X=Math.min(h,(m-b)/2)/((b+m)/2);p.enabled&&D.push({series:this,itemId:"value",datum:H,type:0,centerX:s,centerY:a,outerRadius:m,innerRadius:b,startAngle:z-X,endAngle:F+X,clipStartAngle:void 0,clipEndAngle:void 0,startCornerRadius:h,endCornerRadius:h,fill:V}),N.push({series:this,itemId:"scale",datum:H,type:0,centerX:s,centerY:a,outerRadius:m,innerRadius:b,startAngle:C-X,endAngle:O+X,clipStartAngle:void 0,clipEndAngle:void 0,startCornerRadius:h,endCornerRadius:h,fill:W})}else{j??(j=S);for(let B=0;B<j.length-1;B++){const U=j[B],H=j[B+1],K={value:o,segmentStart:U,segmentEnd:H},X=B===0,Q=B===j.length-2,$=R.convert(U),Z=R.convert(H);p.enabled&&D.push({series:this,itemId:`value-${B}`,datum:K,type:0,centerX:s,centerY:a,outerRadius:m,innerRadius:b,startAngle:$,endAngle:Z,clipStartAngle:z,clipEndAngle:F,startCornerRadius:E||X?h:0,endCornerRadius:E||Q?h:0,fill:V}),N.push({series:this,itemId:`scale-${B}`,datum:K,type:0,centerX:s,centerY:a,outerRadius:m,innerRadius:b,startAngle:$,endAngle:Z,clipStartAngle:void 0,clipEndAngle:void 0,startCornerRadius:E||X?h:0,endCornerRadius:E||Q?h:0,fill:W})}}if(!d.enabled&&f.enabled){const{text:B,color:U,fontSize:H,minimumFontSize:K,fontStyle:X,fontWeight:Q,fontFamily:$,lineHeight:Z,formatter:Y=tt=>this.formatLabel(tt.value)}=f;T.push({label:"primary",centerX:s,centerY:a,text:B,value:o,fill:U,fontSize:H,minimumFontSize:K,fontStyle:X,fontWeight:Q,fontFamily:$,lineHeight:Z,formatter:Y})}if(!d.enabled&&x.enabled){const{text:B,color:U,fontSize:H,minimumFontSize:K,fontStyle:X,fontWeight:Q,fontFamily:$,lineHeight:Z,formatter:Y}=x;T.push({label:"secondary",centerX:s,centerY:a,text:B,value:o,fill:U,fontSize:H,minimumFontSize:K,fontStyle:X,fontWeight:Q,fontFamily:$,lineHeight:Z,formatter:Y})}if(d.enabled){let B=d.radiusRatio!=null?i*d.radiusRatio:b;B=Math.max(B-d.spacing,0);const U=R.convert(o);L.push({centerX:s,centerY:a,radius:B,angle:U})}for(let B=0;B<v.length;B+=1){const U=v[B],{value:H,text:K,size:X,shape:Q,fill:$,fillOpacity:Z,stroke:Y,strokeWidth:tt,strokeOpacity:q,lineDash:it,lineDashOffset:at}=U;if(H<Math.min(...S)||H>Math.max(...S))continue;const rt=this.getTargetRadius(U),ot=R.convert(H),et=Kft(U.rotation+qft[U.placement]);k.push({series:this,itemId:`target-${B}`,midPoint:{x:rt*Math.cos(ot)+s,y:rt*Math.sin(ot)+a},datum:{value:H},type:1,value:H,text:K,centerX:s,centerY:a,shape:Q,radius:rt,angle:ot,rotation:et,size:X,fill:$,fillOpacity:Z,stroke:Y,strokeOpacity:q,strokeWidth:tt,lineDash:it,lineDashOffset:at,label:this.getTargetLabel(U)})}return{itemId:t,nodeData:D,needleData:L,targetData:k,labelData:T,scaleData:N}}updateSelections(t){(this.nodeDataRefresh||t)&&(this.contextNodeData=this.createNodeData(),this.nodeDataRefresh=!1)}highlightDatum(t){if(t!=null&&t.series===this&&t.type===1)return t}update({seriesRect:t}){const{datumSelection:e,labelSelection:i,needleSelection:s,targetSelection:a,targetLabelSelection:n,scaleSelection:o,highlightTargetSelection:r}=this,l=this.checkResize(t);this.updateSelections(l),this.contentGroup.visible=this.visible,this.contentGroup.opacity=this.getOpacity();const c=this.contextNodeData?.nodeData??[],h=this.contextNodeData?.labelData??[],u=this.contextNodeData?.needleData??[],d=this.contextNodeData?.targetData??[],p=this.contextNodeData?.scaleData??[],g=this.highlightDatum(this.ctx.highlightManager.getActiveHighlight());this.scaleSelection=this.updateScaleSelection({scaleData:p,scaleSelection:o}),this.updateScaleNodes({scaleSelection:o}),this.needleSelection=this.updateNeedleSelection({needleData:u,needleSelection:s}),this.updateNeedleNodes({needleSelection:s}),this.targetSelection=this.updateTargetSelection({targetData:d,targetSelection:a}),this.updateTargetNodes({targetSelection:a,isHighlight:!1}),this.targetLabelSelection=this.updateTargetLabelSelection({targetData:d,targetLabelSelection:n}),this.updateTargetLabelNodes({targetLabelSelection:n}),this.datumSelection=this.updateDatumSelection({nodeData:c,datumSelection:e}),this.updateDatumNodes({datumSelection:e}),this.labelSelection=this.updateLabelSelection({labelData:h,labelSelection:i}),this.updateLabelNodes({labelSelection:i}),this.highlightTargetSelection=this.updateTargetSelection({targetData:g!=null?[g]:[],targetSelection:r}),this.updateTargetNodes({targetSelection:r,isHighlight:!0}),l&&this.animationState.transition("resize"),this.animationState.transition("update")}updateDatumSelection(t){return t.datumSelection.update(t.nodeData,void 0,e=>RC(t.nodeData.length,e.itemId))}updateDatumNodes(t){const{datumSelection:e}=t,{ctx:i,properties:s}=this,{bar:a,segmentation:n}=s,o=n.spacing??0,{fillOpacity:r,stroke:l,strokeOpacity:c,lineDash:h,lineDashOffset:u}=a,d=this.getStrokeWidth(a.strokeWidth),p=i.animationManager.isSkipped();e.each((g,f)=>{const{centerX:x,centerY:m,innerRadius:b,outerRadius:v,startCornerRadius:S,endCornerRadius:D,fill:k}=f;g.centerX=x,g.centerY=m,g.innerRadius=b,g.outerRadius=v,g.fill=k,g.fillOpacity=r,g.stroke=l,g.strokeOpacity=c,g.strokeWidth=d,g.lineDash=h,g.lineDashOffset=u,g.startOuterCornerRadius=S,g.startInnerCornerRadius=S,g.endOuterCornerRadius=D,g.endInnerCornerRadius=D,g.radialEdgeInset=(o+g.strokeWidth)/2,g.concentricEdgeInset=g.strokeWidth/2,(p||g.previousDatum==null)&&g.setProperties(wC(g,f))})}updateScaleSelection(t){return t.scaleSelection.update(t.scaleData,void 0,e=>RC(t.scaleData.length,e.itemId))}updateScaleNodes(t){const{scaleSelection:e}=t,{scale:i,segmentation:s}=this.properties,a=s.spacing??0,{fillOpacity:n,stroke:o,strokeOpacity:r,strokeWidth:l,lineDash:c,lineDashOffset:h}=i;e.each((u,d)=>{const{centerX:p,centerY:g,innerRadius:f,outerRadius:x,startCornerRadius:m,endCornerRadius:b,fill:v}=d;u.centerX=p,u.centerY=g,u.innerRadius=f,u.outerRadius=x,u.fill=v,u.fillOpacity=n,u.stroke=o,u.strokeOpacity=r,u.strokeWidth=l,u.lineDash=c,u.lineDashOffset=h,u.startOuterCornerRadius=m,u.startInnerCornerRadius=m,u.endOuterCornerRadius=b,u.endInnerCornerRadius=b,u.radialEdgeInset=(a+u.strokeWidth)/2,u.concentricEdgeInset=u.strokeWidth/2,u.setProperties(wC(u,d))})}updateNeedleSelection(t){return t.needleSelection.update(t.needleData,void 0,()=>RC([]))}updateNeedleNodes(t){const{needleSelection:e}=t,{fill:i,fillOpacity:s,stroke:a,strokeOpacity:n,strokeWidth:o,lineDash:r,lineDashOffset:l}=this.properties.needle,c=this.ctx.animationManager.isSkipped();e.each((h,u)=>{const{centerX:d,centerY:p,radius:g}=u,f=g*2;h.d=kC.defaultPathData,h.fill=i,h.fillOpacity=s,h.stroke=a,h.strokeOpacity=n,h.strokeWidth=o/f,h.lineDash=r.map(x=>x/f),h.lineDashOffset=l/f,h.translationX=d,h.translationY=p,h.scalingX=f,h.scalingY=f,c&&h.setProperties(PU(h,u))})}updateTargetSelection(t){return t.targetSelection.update(t.targetData,void 0,e=>e.itemId)}updateTargetNodes(t){const{targetSelection:e,isHighlight:i}=t,s=i?this.properties.highlightStyle.item:void 0;e.each((a,n)=>{const{centerX:o,centerY:r,angle:l,radius:c,size:h,rotation:u,fill:d,fillOpacity:p,stroke:g,strokeOpacity:f,strokeWidth:x,lineDash:m,lineDashOffset:b}=n;a.size=h,a.fill=s?.fill??d,a.fillOpacity=s?.fillOpacity??p,a.stroke=s?.stroke??g,a.strokeOpacity=s?.strokeOpacity??f,a.strokeWidth=s?.strokeWidth??x,a.lineDash=s?.lineDash??m,a.lineDashOffset=s?.lineDashOffset??b,a.translationX=o+c*Math.cos(l),a.translationY=r+c*Math.sin(l),a.rotation=l+u})}updateTargetLabelSelection(t){return t.targetLabelSelection.update(t.targetData,void 0,e=>e.itemId)}updateTargetLabelNodes(t){const{targetLabelSelection:e}=t;e.each((i,s)=>{const{centerX:a,centerY:n,radius:o,angle:r,text:l}=s,{offsetX:c,offsetY:h,fill:u,fontStyle:d,fontWeight:p,fontSize:g,fontFamily:f,textAlign:x,textBaseline:m}=s.label;if(l==null){i.visible=!1;return}i.visible=!0,i.x=a+o*Math.cos(r)+c,i.y=n+o*Math.sin(r)+h,i.text=l,i.fill=u,i.fontStyle=d,i.fontWeight=p,i.fontSize=g,i.fontFamily=f,i.textAlign=x,i.textBaseline=m})}updateLabelSelection(t){return t.labelSelection.update(t.labelData,void 0,e=>e.label)}updateLabelNodes(t){const{labelSelection:e}=t,i=this.ctx.animationManager.isSkipped();e.each((s,a)=>{s.fill=a.fill,s.fontStyle=a.fontStyle,s.fontWeight=a.fontWeight,s.fontFamily=a.fontFamily}),(i||this.labelsHaveExplicitText())&&this.formatLabelText()}labelsHaveExplicitText(){for(const{datum:t}of this.labelSelection)if(t.text==null)return!1;return!0}formatLabelText(t){if(this.axes[pc.X]==null)return;const{labelSelection:i,radius:s,textAlign:a,verticalAlign:n}=this,{spacing:o,innerRadiusRatio:r}=this.properties;Wft(this,i,{padding:o,textAlign:a,verticalAlign:n},s*r,t)}resetAllAnimation(){this.ctx.animationManager.stopByAnimationGroupId(this.id),BU([this.datumSelection],wC),BU([this.needleSelection],PU),this.formatLabelText()}resetAnimation(t){t==="initial"?this.animationState.transition("reset"):t==="ready"&&this.animationState.transition("skip")}animateLabelText(t={}){const{animationManager:e}=this.ctx;let i,s,a,n;if(this.labelSelection.each((o,r)=>{o.opacity=1,r.label==="primary"?(i=o.previousDatum?.value??t.from??r.value,s=r.value):r.label==="secondary"&&(a=o.previousDatum?.value??t.from??r.value,n=r.value)}),!this.labelsHaveExplicitText())if(s==null||n==null)this.formatLabelText();else if(i===s&&a===n)this.formatLabelText({label:s,secondaryLabel:n});else{const o=`${this.id}_labels`;e.animate({id:o,groupId:"label",from:{label:i,secondaryLabel:a},to:{label:s,secondaryLabel:n},phase:t.phase??"update",onUpdate:r=>this.formatLabelText(r)})}}animateEmptyUpdateReady(){const{animationManager:t}=this.ctx,{node:e,needle:i}=_U(!0,this.axes[pc.X]?.range[0]??0);Ay(this.id,"node",t,[this.datumSelection],e,(s,a)=>a.itemId),Ay(this.id,"needle",t,[this.needleSelection],i,()=>"needle"),Ay(this.id,"label",t,[this.labelSelection],IG,(s,a)=>a.label),this.animateLabelText({from:this.axes[pc.X]?.scale.domain[0]??0,phase:"initial"})}animateWaitingUpdateReady(){const{animationManager:t}=this.ctx,{node:e,needle:i}=_U(!1,this.axes[pc.X]?.range[0]??0);Ay(this.id,"node",t,[this.datumSelection],e,(s,a)=>a.itemId),Ay(this.id,"needle",t,[this.needleSelection],i,()=>"needle"),this.animateLabelText()}animateReadyResize(){this.resetAllAnimation()}getSeriesDomain(){return[NaN,NaN]}getSeriesRange(t,e){return[NaN,NaN]}getLegendData(){return[]}pickNode(t,e){switch(e){case"event":case"context-menu":{const i=this.scaleGroup.pickNode(t.x,t.y);return i!=null?{pickMode:Dy._ModuleSupport.SeriesNodePickMode.EXACT_SHAPE_MATCH,match:i.datum,distance:0}:void 0}case"tooltip":case"highlight":case"highlight-tooltip":{const i=this.itemTargetGroup.pickNode(t.x,t.y);return i!=null?{pickMode:Dy._ModuleSupport.SeriesNodePickMode.EXACT_SHAPE_MATCH,match:i.datum,distance:0}:{pickMode:Dy._ModuleSupport.SeriesNodePickMode.NEAREST_NODE,match:this.nodeDatum,distance:0}}}}getTooltipContent(t){const{id:e,properties:i}=this,{tooltip:s}=i;if(!i.isValid())return;const a=this.highlightDatum(t),n=a?.value??i.value,o=a?.text;return s.formatTooltip({data:[{label:o??"",value:this.formatLabel(n)}]},{seriesId:e,title:void 0,datum:void 0,value:n})}pickFocus(t){const e=this.contextNodeData?.targetData;if(e==null||e.length===0)return;const i=Math.min(Math.max(t.datumIndex,0),e.length-1),s=e[i];for(const a of this.targetSelection)if(a.datum===s)return{bounds:a.node,showFocusBox:!0,clipFocusBox:!0,datum:s,datumIndex:i}}getCaptionText(){const{value:t}=this.properties,e=[];return e.push(this.formatLabel(t)),this.labelSelection.each((i,s)=>{const a=fy(this,s);a!=null&&e.push(a)}),e.join(". ")}};PC.className="RadialGaugeSeries",PC.type="radial-gauge";var{ThemeSymbols:{DEFAULT_FONT_FAMILY:BC,DEFAULT_HIERARCHY_FILLS:eyt,DEFAULT_LABEL_COLOUR:Iy,DEFAULT_MUTED_LABEL_COLOUR:iyt,DEFAULT_GAUGE_SERIES_COLOR_RANGE:syt},ThemeConstants:{POLAR_AXIS_TYPE:zC}}=kft._ModuleSupport,ayt={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["gauge"],identifier:"radial-gauge",moduleFactory:t=>new PC(t),tooltipDefaults:{range:"exact"},defaultAxes:[{type:zC.ANGLE_NUMBER,line:{enabled:!1}},{type:zC.RADIUS_NUMBER,line:{enabled:!1}}],themeTemplate:{minWidth:200,minHeight:200,series:{outerRadiusRatio:1,innerRadiusRatio:.8,bar:{strokeWidth:0},segmentation:{enabled:!1,interval:{},spacing:2},defaultTarget:{fill:Iy,stroke:Iy,size:10,shape:"triangle",placement:"outside",spacing:5,label:{enabled:!0,fontWeight:"normal",fontSize:12,fontFamily:BC,color:Iy,spacing:5}},needle:{enabled:!1,fill:Iy,spacing:10},label:{enabled:!0,fontWeight:"normal",fontSize:56,minimumFontSize:18,fontFamily:BC,color:Iy},secondaryLabel:{enabled:!0,fontWeight:"normal",fontSize:14,minimumFontSize:12,fontFamily:BC,color:iyt},tooltip:{enabled:!1}},axes:{[zC.ANGLE_NUMBER]:{startAngle:270,endAngle:450,nice:!1,line:{enabled:!1}}}},paletteFactory(t){const{takeColors:e,colorsCount:i,userPalette:s,themeTemplateParameters:a}=t,{fills:n}=e(i),o=a.get(syt),r=a.get(eyt),l=s==="inbuilt"?o:[n[0],n[1]];return{scale:{defaultFill:r?.[1],stroke:r?.[2]},defaultColorRange:AG(l)}}},nyt=(P(),_(w)),qv=(P(),_(w)),oyt=1e3;function VU(t,e,i,s,a,n){const o=t[n];if(o==null)return!1;const r=lv(o,e,i),l=cv(r,a);return n===s[l+Js]}function UU(t,e,i,s,a,n){const o=t[n];if(o==null)return!1;const r=lv(o,e,i),l=cv(r,a);return n===s[l+qs]}function ryt(t,e,i,s){if(t.length<oyt)return;const[a,n]=qf(s);let o=Qf(t);const{indexData:r,valueData:l}=Jf(t,e,i,a,n,o);let c=[],h=[];for(let d=0;d<t.length;d+=1)VU(t,a,n,r,o,d)&&c.push(d),UU(t,a,n,r,o,d)&&h.push(d);const u=[{maxRange:o,topIndices:c,bottomIndices:h}];for(;o>64;)({maxRange:o}=ty(r,l,o,{inPlace:!0})),c=c.filter(VU.bind(null,t,a,n,r,o)),h=h.filter(UU.bind(null,t,a,n,r,o)),u.push({maxRange:o,topIndices:c,bottomIndices:h});return u.reverse(),u}var lyt=(P(),_(w)),{CartesianSeriesProperties:cyt,InterpolationProperties:hyt,SeriesMarker:uyt,SeriesTooltip:dyt,Validate:we,BOOLEAN:pyt,COLOR_STRING:WU,LINE_DASH:gyt,OBJECT:ky,PLACEMENT:fyt,POSITIVE_NUMBER:FC,RATIO:HU,STRING:Qh,DropShadow:yyt,Label:myt}=lyt._ModuleSupport,jC=class extends myt{constructor(){super(...arguments),this.placement="outside",this.padding=6}};y([we(fyt)],jC.prototype,"placement",2),y([we(FC)],jC.prototype,"padding",2);var je=class extends cyt{constructor(){super(...arguments),this.fill="#99CCFF",this.fillOpacity=1,this.stroke="#99CCFF",this.strokeWidth=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.interpolation=new hyt,this.shadow=new yyt().set({enabled:!1}),this.marker=new uyt,this.label=new jC,this.tooltip=new dyt,this.connectMissingData=!1}};y([we(Qh)],je.prototype,"xKey",2),y([we(Qh)],je.prototype,"yLowKey",2),y([we(Qh)],je.prototype,"yHighKey",2),y([we(Qh,{optional:!0})],je.prototype,"xName",2),y([we(Qh,{optional:!0})],je.prototype,"yName",2),y([we(Qh,{optional:!0})],je.prototype,"yLowName",2),y([we(Qh,{optional:!0})],je.prototype,"yHighName",2),y([we(WU)],je.prototype,"fill",2),y([we(HU)],je.prototype,"fillOpacity",2),y([we(WU)],je.prototype,"stroke",2),y([we(FC)],je.prototype,"strokeWidth",2),y([we(HU)],je.prototype,"strokeOpacity",2),y([we(gyt)],je.prototype,"lineDash",2),y([we(FC)],je.prototype,"lineDashOffset",2),y([we(ky)],je.prototype,"interpolation",2),y([we(ky)],je.prototype,"shadow",2),y([we(ky)],je.prototype,"marker",2),y([we(ky)],je.prototype,"label",2),y([we(ky)],je.prototype,"tooltip",2),y([we(pyt)],je.prototype,"connectMissingData",2);var xyt=(P(),_(w)),{CollapseMode:Jv,isScaleValid:YU,pairUpSpans:tM,prepareAreaFillAnimationFns:byt,plotInterpolatedLinePathStroke:tp,prepareLinePathPropertyAnimation:Syt,areScalingEqual:KU}=xyt._ModuleSupport;function vyt(t,e,i,s){const a=(l,c)=>{tp(l,c,e.removed),tp(l,c,i.removed)},n=(l,c)=>{tp(l,c,e.moved),tp(l,c,i.moved)},o=(l,c)=>{tp(l,c,e.added),tp(l,c,i.added)},r=Syt(t,s);return{status:t,path:{addPhaseFn:o,updatePhaseFn:n,removePhaseFn:a},pathProperties:r}}function Myt(t,e,i){const s=t.scales.x?.type==="category",a=e.scales.x?.type==="category";if(s!==a||!YU(t.scales.x)||!YU(e.scales.x))return;let n="updated";e.visible&&!t.visible?n="removed":!e.visible&&t.visible&&(n="added");const o=tM({scales:t.scales,data:t.fillData.spans},{scales:e.scales,data:e.fillData.spans},Jv.Split);if(o==null)return;const r=tM({scales:t.scales,data:t.fillData.phantomSpans},{scales:e.scales,data:e.fillData.phantomSpans},Jv.Split);if(r==null)return;const l=tM({scales:t.scales,data:t.highStrokeData.spans},{scales:e.scales,data:e.highStrokeData.spans},Jv.Split);if(l==null)return;const c=tM({scales:t.scales,data:t.lowStrokeData.spans},{scales:e.scales,data:e.lowStrokeData.spans},Jv.Split);if(c==null)return;const h="fade",u=byt(n,o,r,h),d=vyt(n,l,c,h),p=(i?.changed??!0)||!KU(t.scales.x,e.scales.x)||!KU(t.scales.y,e.scales.y)||n!=="updated";return{status:n,fill:u,stroke:d,hasMotion:p}}var{valueProperty:XU,keyProperty:Dyt,ChartAxisDirection:Na,mergeDefaults:Ayt,updateLabelNode:Iyt,fixNumericExtent:ZU,buildResetPathFn:kyt,resetLabelFn:Lyt,resetMarkerFn:Tyt,resetMarkerPositionFn:$U,pathSwipeInAnimation:Nyt,resetMotion:Cyt,markerSwipeScaleInAnimation:Oyt,seriesLabelFadeInAnimation:GC,animationValidation:Eyt,diff:wyt,updateClipPath:QU,computeMarkerFocusBounds:qU,plotAreaPathFill:Ryt,plotLinePathStroke:JU,interpolatePoints:tW,pathFadeInAnimation:eW,markerFadeInAnimation:iW,fromToMotion:sW,pathMotion:aW,extent:_yt,getMarker:Pyt,visibleRangeIndices:Byt,createDatumId:zyt,PointerEvents:VC,Group:Fyt,BBox:jyt,ContinuousScale:Gyt,OrdinalTimeScale:Vyt}=qv._ModuleSupport,Uyt=class extends qv._ModuleSupport.SeriesNodeEvent{constructor(t,e,i,s){super(t,e,i,s),this.xKey=s.properties.xKey,this.yLowKey=s.properties.yLowKey,this.yHighKey=s.properties.yHighKey}},UC=class extends qv._ModuleSupport.CartesianSeries{constructor(t){super({moduleCtx:t,hasMarkers:!0,pathsPerSeries:["fill","stroke"],pickModes:[qv._ModuleSupport.SeriesNodePickMode.AXIS_ALIGNED],directionKeys:{[Na.X]:["xKey"],[Na.Y]:["yLowKey","yHighKey"]},directionNames:{[Na.X]:["xName"],[Na.Y]:["yLowName","yHighName","yName"]},animationResetFns:{path:kyt({getVisible:()=>this.visible,getOpacity:()=>this.getOpacity()}),label:Lyt,marker:(e,i)=>({...Tyt(e),...$U(e,i)})}}),this.properties=new je,this.NodeEvent=Uyt,this.dataAggregationFilters=void 0}async processData(t){if(!this.properties.isValid())return;const{xKey:e,yLowKey:i,yHighKey:s}=this.properties,a=this.axes[Na.X]?.scale,n=this.axes[Na.Y]?.scale,{xScaleType:o,yScaleType:r}=this.getScaleInformation({xScale:a,yScale:n}),l=[],c=!this.ctx.animationManager.isSkipped();!this.ctx.animationManager.isSkipped()&&this.processedData&&l.push(wyt(this.id,this.processedData)),c&&l.push(Eyt());const{dataModel:h,processedData:u}=await this.requestDataModel(t,this.data,{props:[Dyt(e,o,{id:"xValue"}),XU(i,r,{id:"yLowValue"}),XU(s,r,{id:"yHighValue"}),...l]});this.dataAggregationFilters=this.aggregateData(h,u),this.animationState.transition("updateData")}aggregateData(t,e){if(e.rawData.length===0)return;const i=this.axes[Na.X];if(i==null||!(Gyt.is(i.scale)||Vyt.is(i.scale)))return;const s=t.resolveKeysById(this,"xValue",e),a=t.resolveColumnById(this,"yHighValue",e),n=t.resolveColumnById(this,"yLowValue",e),{index:o}=t.resolveProcessedDataDefById(this,"xValue"),r=e.domain.keys[o];return ryt(s,a,n,r)}getSeriesDomain(t){const{processedData:e,dataModel:i}=this;if(!(e&&i))return[];const{domain:{keys:[s],values:a}}=e;if(t===Na.X){const n=i.resolveProcessedDataDefById(this,"xValue");return n?.def.type==="key"&&n.def.valueType==="category"?s:ZU(_yt(s))}else{const n=i.resolveProcessedDataIndexById(this,"yLowValue"),o=a[n],r=i.resolveProcessedDataIndexById(this,"yHighValue"),l=a[r],c=[o[0]>l[0]?l[0]:o[0],l[1]<o[1]?o[1]:l[1]];return ZU(c)}}visibleRangeIndices(t,e){const{dataModel:i,processedData:s}=this;if(!i||!s)return[0,0];const a=this.axes[Na.X].scale,n=i.resolveKeysById(this,"xValue",s);return Byt(e?.length??n.length,t,o=>{const r=a.convert(n[e?.[o]??o]);return[r,r]})}getSeriesRange(t,e){const{dataModel:i,processedData:s}=this;if(!i||!s)return[NaN,NaN];const[a,n]=this.visibleRangeIndices(e);return i.getDomainBetweenRange(this,["yLowValue","yHighValue"],[a,n],s)}createNodeData(){const{data:t,dataModel:e,processedData:i,axes:s}=this,a=s[Na.X],n=s[Na.Y];if(!(t&&a&&n&&e&&i!=null&&i.rawData.length!==0))return;const o=a.scale,r=n.scale,{xKey:l,yLowKey:c,yHighKey:h,connectMissingData:u,marker:d,interpolation:p}=this.properties,{rawData:g}=i,f=(o.bandwidth??0)/2,x=e.resolveKeysById(this,"xValue",i),m=e.resolveColumnById(this,"yHighValue",i),b=e.resolveColumnById(this,"yLowValue",i),v=B=>o.convert(x[B])+f,S=[],D=[],k=[],L=(B,U,H)=>{const K=g[B],X=x[B];if(X==null)return;const Q=k[k.length-1];if(Number.isFinite(U)&&Number.isFinite(H)){const $=(rt,ot,et)=>{D.push({index:B,series:this,itemId:rt,datum:K,datumIndex:B,midPoint:{x:Y,y:et},yHighValue:U,yLowValue:H,xValue:X,xKey:l,yLowKey:c,yHighKey:h,point:{x:Y,y:et,size:it},enabled:!0});const gt=this.createLabelData({point:{x:Y,y:et},value:ot,yLowValue:H,yHighValue:U,itemId:rt,inverted:Z,datum:K,series:this});S.push(gt)},Z=H>U,Y=v(B),tt=r.convert(U),q=r.convert(H),{size:it}=d;$("high",U,tt),$("low",H,q);const at={high:{point:{x:Y,y:tt},xDatum:X,yDatum:U},low:{point:{x:Y,y:q},xDatum:X,yDatum:H}};Array.isArray(Q)?Q.push(at):Q!=null?(Q.skip+=1,k.push([at])):k.push([at])}else u||(Array.isArray(Q)||Q==null?k.push({skip:0}):Q.skip+=1)},{dataAggregationFilters:T}=this,[N,C]=o.range,O=C-N,R=T?.find(B=>B.maxRange>O),E=R?.topIndices,z=R?.bottomIndices;let[F,G]=this.visibleRangeIndices(a.range,E);F=Math.max(F-1,0),G=Math.min(G+1,E?.length??x.length),i.rawData.length<1e3&&(F=0,G=i.rawData.length);for(let B=F;B<G;B+=1){const U=E?.[B]??B,H=z?.[B]??B;L(U,m[U],b[H])}const j=k.flatMap(B=>{if(!Array.isArray(B))return[];const U=B.map(H=>H.high);return tW(U,p)}),V=k.flatMap(B=>{if(!Array.isArray(B))return[];const U=B.map(H=>H.low);return tW(U,p)});return{itemId:`${c}-${h}`,labelData:S,nodeData:D,fillData:{itemId:"high",spans:j,phantomSpans:V},highStrokeData:{itemId:"high",spans:j},lowStrokeData:{itemId:"low",spans:V},scales:this.calculateScaling(),visible:this.visible}}createLabelData({point:t,value:e,itemId:i,inverted:s,datum:a,series:n}){const{xKey:o,yLowKey:r,yHighKey:l,xName:c,yName:h,yLowName:u,yHighName:d,label:p}=this.properties,{placement:g,padding:f=10}=p;let x=i;s&&(x=i==="low"?"high":"low");const m=g==="outside"&&x==="high"||g==="inside"&&x==="low"?-1:1;return{x:t.x,y:t.y+f*m,series:n,itemId:i,datum:a,text:this.getLabelText(p,{value:e,datum:a,itemId:i,xKey:o,yLowKey:r,yHighKey:l,xName:c,yLowName:u,yHighName:d,yName:h}),textAlign:"center",textBaseline:m===-1?"bottom":"top"}}isPathOrSelectionDirty(){return this.properties.marker.isDirty()}markerFactory(){const{shape:t}=this.properties.marker,e=Pyt(t);return new e}updatePathNodes(t){const{opacity:e,visible:i,animationEnabled:s}=t,[a,n]=t.paths,o=this.getStrokeWidth(this.properties.strokeWidth);n.setProperties({fill:void 0,lineCap:"round",lineJoin:"round",pointerEvents:VC.None,stroke:this.properties.stroke,strokeWidth:o,strokeOpacity:this.properties.strokeOpacity,lineDash:this.properties.lineDash,lineDashOffset:this.properties.lineDashOffset,opacity:e,visible:i||s}),a.setProperties({stroke:void 0,lineJoin:"round",pointerEvents:VC.None,fill:this.properties.fill,fillOpacity:this.properties.fillOpacity,lineDash:this.properties.lineDash,lineDashOffset:this.properties.lineDashOffset,strokeOpacity:this.properties.strokeOpacity,fillShadow:this.properties.shadow,strokeWidth:o,opacity:e,visible:i||s}),QU(this,n),QU(this,a)}updatePaths(t){this.updateAreaPaths(t.paths,t.contextData)}updateAreaPaths(t,e){for(const i of t)i.visible=e.visible;if(e.visible)this.updateFillPath(t,e),this.updateStrokePath(t,e);else for(const i of t)i.path.clear(),i.markDirty()}updateFillPath(t,e){const[i]=t;i.path.clear(),Ryt(i,e.fillData),i.markDirty()}updateStrokePath(t,e){const[,i]=t;i.path.clear(),JU(i,e.highStrokeData.spans),JU(i,e.lowStrokeData.spans),i.markDirty()}updateMarkerSelection(t){const{nodeData:e,markerSelection:i}=t;return this.properties.marker.isDirty()&&(i.clear(),i.cleanup()),i.update(this.properties.marker.enabled?e:[])}getMarkerItemBaseStyle(t){const{properties:e}=this,{marker:i}=e,s=t?e.highlightStyle.item:void 0,a=this.getStrokeWidth(i.strokeWidth);return{size:i.size,fill:s?.fill??i.fill,fillOpacity:s?.fillOpacity??i.fillOpacity,stroke:s?.stroke??i.stroke,strokeWidth:s?.strokeWidth??a,strokeOpacity:s?.strokeOpacity??i.strokeOpacity}}getMarkerItemStyleOverrides(t,e,i,s){const{id:a,properties:n}=this,{xKey:o,yHighKey:r,yLowKey:l,marker:c}=n,{itemStyler:h}=c;if(h!=null)return this.cachedDatumCallback(zyt(t,s?"highlight":"node"),()=>h({seriesId:a,datum:e,xKey:o,yHighKey:r,yLowKey:l,highlighted:s,...i}))}updateMarkerNodes(t){const{markerSelection:e,isHighlight:i}=t,{xKey:s,yLowKey:a,yHighKey:n,marker:o,fill:r,stroke:l,strokeWidth:c,fillOpacity:h,strokeOpacity:u}=this.properties,d=Ayt(i&&this.properties.highlightStyle.item,o.getStyle(),{fill:r,fillOpacity:h,stroke:l,strokeWidth:c,strokeOpacity:u});e.each((p,g)=>{this.updateMarkerStyle(p,o,{datum:g,highlighted:i,xKey:s,yHighKey:n,yLowKey:a},d)}),i||this.properties.marker.markClean()}updateLabelSelection(t){const{labelData:e,labelSelection:i}=t;return i.update(e,s=>{s.pointerEvents=VC.None})}updateLabelNodes(t){t.labelSelection.each((e,i)=>{Iyt(e,this.properties.label,i)})}getHighlightLabelData(t,e){const i=t.filter(s=>s.datum===e.datum);return i.length>0?i:void 0}getHighlightData(t,e){const i=t.filter(s=>s.datum===e.datum);return i.length>0?i:void 0}getTooltipContent(t){const{id:e,dataModel:i,processedData:s,axes:a,properties:n}=this,{xName:o,yName:r,yLowKey:l,yLowName:c,xKey:h,yHighKey:u,yHighName:d,tooltip:p}=n,g=a[Na.X],f=a[Na.Y];if(!i||!s||s.rawData.length===0||!g||!f)return;const{datumIndex:x}=t,m=s.rawData[x],b=i.resolveKeysById(this,"xValue",s)[x],v=i.resolveColumnById(this,"yHighValue",s)[x],S=i.resolveColumnById(this,"yLowValue",s)[x];if(b==null)return;const D=this.getMarkerItemBaseStyle(!1);Object.assign(D,this.getMarkerItemStyleOverrides(String(x),x,D,!1));const k=`${f.formatDatum(S)} - ${f.formatDatum(v)}`;return p.formatTooltip({heading:g.formatDatum(b),symbol:this.legendItemSymbol(),data:[{label:r,fallbackLabel:`${c??l} - ${d??d}`,value:k}]},{seriesId:e,datum:m,title:r,itemId:t.itemId,xName:o,yName:r,yLowKey:l,yLowName:c,xKey:h,yHighKey:u,yHighName:d,...D})}legendItemSymbol(){const{fill:t,stroke:e,strokeWidth:i,strokeOpacity:s,lineDash:a,marker:n}=this.properties;return{marker:{shape:n.shape,fill:n.fill??t,stroke:n.stroke??e,fillOpacity:n.fillOpacity,strokeOpacity:n.strokeOpacity,strokeWidth:n.strokeWidth},line:{stroke:e,strokeOpacity:s,strokeWidth:i,lineDash:a}}}getLegendData(t){if(t!=="category")return[];const{id:e,visible:i}=this,{yLowKey:s,yHighKey:a,yName:n,yLowName:o,yHighName:r,showInLegend:l}=this.properties,c=n??`${o??s} - ${r??a}`,h=`${s}-${a}`;return[{legendType:"category",id:e,itemId:h,seriesId:e,enabled:i,label:{text:`${c}`},symbol:this.legendItemSymbol(),hideInLegend:!l}]}isLabelEnabled(){return this.properties.label.enabled}onDataChange(){}nodeFactory(){return new Fyt}animateEmptyUpdateReady(t){const{markerSelection:e,labelSelection:i,contextData:s,paths:a}=t,{animationManager:n}=this.ctx;this.updateAreaPaths(a,s),Nyt(this,n,...a),Cyt([e],$U),Oyt(this,n,e),GC(this,"labels",n,i)}animateReadyResize(t){const{contextData:e,paths:i}=t;this.updateAreaPaths(i,e),super.animateReadyResize(t)}animateWaitingUpdateReady(t){const{animationManager:e}=this.ctx,{markerSelection:i,labelSelection:s,contextData:a,paths:n,previousContextData:o}=t,[r,l]=n;if(r==null&&l==null)return;this.resetMarkerAnimation(t),this.resetLabelAnimation(t);const c=()=>{this.resetPathAnimation(t),this.updateAreaPaths(n,a)},h=()=>{e.skipCurrentBatch(),c()};if(a==null||o==null){c(),iW(this,e,"added",i),eW(this,"fill_path_properties",e,"add",r),eW(this,"stroke_path_properties",e,"add",l),GC(this,"labels",e,s);return}const u=Myt(a,o,this.processedData?.reduced?.diff?.[this.id]);if(u===void 0){h();return}else if(u.status==="no-op")return;sW(this.id,"fill_path_properties",e,[r],u.fill.pathProperties),sW(this.id,"stroke_path_properties",e,[l],u.stroke.pathProperties),u.status==="added"?this.updateAreaPaths(n,a):u.status==="removed"?this.updateAreaPaths(n,o):(aW(this.id,"fill_path_update",e,[r],u.fill.path),aW(this.id,"stroke_path_update",e,[l],u.stroke.path)),u.hasMotion&&(iW(this,e,void 0,i),GC(this,"labels",e,s)),this.ctx.animationManager.animate({id:this.id,groupId:"reset_after_animation",phase:"trailing",from:{},to:{},onComplete:()=>this.updateAreaPaths(n,a)})}getFormattedMarkerStyle(t){const{xKey:e,yLowKey:i,yHighKey:s}=this.properties;return this.getMarkerStyle(this.properties.marker,{datum:t,xKey:e,yLowKey:i,yHighKey:s,highlighted:!0})}computeFocusBounds(t){const e=qU(this,t),i=qU(this,{...t,datumIndex:t.datumIndex+1});if(e&&i)return jyt.merge([e,i])}computeFocusDatumIndex(t,e){const i={...t,datumIndex:t.datumIndex+t.datumIndexDelta,datumIndexDelta:t.datumIndexDelta*2};return super.computeFocusDatumIndex(i,e)}};UC.className="RangeAreaSeries",UC.type="range-area";var WC=(P(),_(w)),Wyt={series:{fillOpacity:.7,nodeClickRange:"nearest",marker:{enabled:!1,size:6,strokeWidth:2},label:{enabled:!1,placement:"outside",padding:10,fontSize:12,fontFamily:WC._ModuleSupport.ThemeSymbols.DEFAULT_FONT_FAMILY,color:WC._ModuleSupport.ThemeSymbols.DEFAULT_LABEL_COLOUR},interpolation:{type:"linear",tension:1,position:"end"}},axes:{[WC._ModuleSupport.ThemeConstants.CARTESIAN_AXIS_TYPE.NUMBER]:{crosshair:{enabled:!0}}}},{markerPaletteFactory:Hyt,ThemeConstants:{CARTESIAN_AXIS_TYPE:nW,CARTESIAN_POSITION:oW}}=nyt._ModuleSupport,Yyt={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["cartesian"],identifier:"range-area",moduleFactory:t=>new UC(t),tooltipDefaults:{range:"nearest"},defaultAxes:[{type:nW.NUMBER,position:oW.LEFT},{type:nW.CATEGORY,position:oW.BOTTOM}],themeTemplate:Wyt,paletteFactory:t=>{const{marker:e}=Hyt(t);return{fill:e.fill,stroke:e.stroke,marker:e}}},rW=(P(),_(w)),HC=(P(),_(w)),Kyt=1e3,Xyt=5;function Zyt(t,e,i,s){if(t.length<Kyt)return;const[a,n]=qf(s);let o=Qf(t,Xyt),{indexData:r,valueData:l}=Jf(t,e,i,a,n,o);const c=[{maxRange:o,indexData:r}];for(;o>64;)({indexData:r,valueData:l,maxRange:o}=ty(r,l,o)),c.push({maxRange:o,indexData:r});return c.reverse(),c}var $yt=(P(),_(w)),{AbstractBarSeriesProperties:Qyt,SeriesTooltip:qyt,Validate:Re,COLOR_STRING:lW,FUNCTION:Jyt,LINE_DASH:tmt,OBJECT:YC,PLACEMENT:emt,POSITIVE_NUMBER:eM,RATIO:cW,STRING:qh,BOOLEAN:imt,DropShadow:smt,Label:amt}=$yt._ModuleSupport,KC=class extends amt{constructor(){super(...arguments),this.placement="inside",this.padding=6}};y([Re(emt)],KC.prototype,"placement",2),y([Re(eM)],KC.prototype,"padding",2);var Ge=class extends Qyt{constructor(){super(...arguments),this.fill="#99CCFF",this.fillOpacity=1,this.stroke="#99CCFF",this.strokeWidth=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.cornerRadius=0,this.shadow=new smt().set({enabled:!1}),this.label=new KC,this.tooltip=new qyt,this.fastDataProcessing=!1}};y([Re(qh)],Ge.prototype,"xKey",2),y([Re(qh)],Ge.prototype,"yLowKey",2),y([Re(qh)],Ge.prototype,"yHighKey",2),y([Re(qh,{optional:!0})],Ge.prototype,"xName",2),y([Re(qh,{optional:!0})],Ge.prototype,"yName",2),y([Re(qh,{optional:!0})],Ge.prototype,"yLowName",2),y([Re(qh,{optional:!0})],Ge.prototype,"yHighName",2),y([Re(lW)],Ge.prototype,"fill",2),y([Re(cW)],Ge.prototype,"fillOpacity",2),y([Re(lW)],Ge.prototype,"stroke",2),y([Re(eM)],Ge.prototype,"strokeWidth",2),y([Re(cW)],Ge.prototype,"strokeOpacity",2),y([Re(tmt)],Ge.prototype,"lineDash",2),y([Re(eM)],Ge.prototype,"lineDashOffset",2),y([Re(eM)],Ge.prototype,"cornerRadius",2),y([Re(Jyt,{optional:!0})],Ge.prototype,"itemStyler",2),y([Re(YC)],Ge.prototype,"shadow",2),y([Re(YC)],Ge.prototype,"label",2),y([Re(YC)],Ge.prototype,"tooltip",2),y([Re(imt)],Ge.prototype,"fastDataProcessing",2);var{SeriesNodePickMode:hW,valueProperty:uW,keyProperty:nmt,ChartAxisDirection:iM,getRectConfig:omt,updateRect:rmt,checkCrisp:lmt,updateLabelNode:cmt,SMALLEST_KEY_INTERVAL:hmt,LARGEST_KEY_INTERVAL:umt,diff:dmt,prepareBarAnimationFunctions:dW,midpointStartingBarPosition:pW,resetBarSelectionsFn:pmt,fixNumericExtent:gmt,seriesLabelFadeInAnimation:gW,resetLabelFn:fmt,animationValidation:ymt,computeBarFocusBounds:mmt,visibleRangeIndices:XC,createDatumId:xmt,ContinuousScale:fW,OrdinalTimeScale:bmt,Rect:Smt,PointerEvents:vmt,motion:yW}=HC._ModuleSupport,Mmt=class extends HC._ModuleSupport.SeriesNodeEvent{constructor(t,e,i,s){super(t,e,i,s),this.xKey=s.properties.xKey,this.yLowKey=s.properties.yLowKey,this.yHighKey=s.properties.yHighKey}},ZC=class extends HC._ModuleSupport.AbstractBarSeries{constructor(t){super({moduleCtx:t,pickModes:[hW.AXIS_ALIGNED,hW.EXACT_SHAPE_MATCH],hasHighlightedLabels:!0,directionKeys:{x:["xKey"],y:["yLowKey","yHighKey"]},directionNames:{x:["xName"],y:["yLowName","yHighName","yName"]},datumSelectionGarbageCollection:!1,animationResetFns:{datum:pmt,label:fmt}}),this.properties=new Ge,this.dataAggregationFilters=void 0,this.NodeEvent=Mmt}async processData(t){if(!this.properties.isValid())return;const{xKey:e,yLowKey:i,yHighKey:s,fastDataProcessing:a}=this.properties,n=!a,o=this.getCategoryAxis()?.scale,r=this.getValueAxis()?.scale,{isContinuousX:l,xScaleType:c,yScaleType:h}=this.getScaleInformation({xScale:o,yScale:r}),u=[];this.ctx.animationManager.isSkipped()||(this.processedData&&u.push(dmt(this.id,this.processedData)),u.push(ymt()));const d=this.visible?{}:{forceValue:0},{dataModel:p,processedData:g}=await this.requestDataModel(t,this.data,{props:[nmt(e,c,{id:"xValue"}),uW(i,h,{id:"yLowValue",invalidValue:null,...d}),uW(s,h,{id:"yHighValue",invalidValue:null,...d}),...l?[hmt,umt]:[],...u],groupByKeys:n});this.smallestDataInterval=g.reduced?.smallestKeyInterval,this.largestDataInterval=g.reduced?.largestKeyInterval,this.dataAggregationFilters=this.aggregateData(p,g),this.animationState.transition("updateData")}aggregateData(t,e){if(e.type!=="grouped"||e.rawData.length===0)return;const i=this.axes[iM.X];if(i==null||!(fW.is(i.scale)||bmt.is(i.scale)))return;const s=t.resolveKeysById(this,"xValue",e),a=t.resolveColumnById(this,"yHighValue",e),n=t.resolveColumnById(this,"yLowValue",e),{index:o}=t.resolveProcessedDataDefById(this,"xValue"),r=e.domain.keys[o];return Zyt(s,a,n,r)}getSeriesDomain(t){const{processedData:e,dataModel:i}=this;if(!e||!i)return[];const{keys:[s],values:a}=e.domain;if(t===this.getCategoryDirection()){const n=i.resolveProcessedDataDefById(this,"xValue");return n?.def.type==="key"&&n?.def.valueType==="category"?s:this.padBandExtent(s)}else{const n=i.resolveProcessedDataIndexById(this,"yLowValue"),o=a[n],r=i.resolveProcessedDataIndexById(this,"yHighValue"),l=a[r],c=[o[0]>l[0]?l[0]:o[0],l[1]<o[1]?o[1]:l[1]];return gmt(c)}}getSeriesRange(t,e){const{dataModel:i,processedData:s}=this;if(!i||!s)return[NaN,NaN];const a=this.axes[iM.X].scale,n=i.resolveKeysById(this,"xValue",s),o=a.bandwidth??0,[r,l]=XC(n.length,e,c=>{const h=a.convert(n[c]);return[h,h+o]});return i.getDomainBetweenRange(this,["yHighValue","yLowValue"],[r,l],s)}createNodeData(){const{data:t,dataModel:e,groupScale:i,processedData:s,visible:a}=this,n=this.getCategoryAxis(),o=this.getValueAxis();if(!(t&&n&&o&&e&&s?.rawData.length))return;const r=n.scale,l=o.scale,c=this.getBarDirection()===iM.X,{xKey:h,yLowKey:u,yHighKey:d,fill:p,stroke:g,strokeWidth:f}=this.properties,x=`${u}-${d}`,m={itemId:x,nodeData:[],labelData:[],scales:this.calculateScaling(),visible:this.visible};if(!a)return m;const{rawData:b}=s,v=e.resolveKeysById(this,"xValue",s),S=e.resolveColumnById(this,"yLowValue",s),D=e.resolveColumnById(this,"yHighValue",s),{barWidth:k,groupIndex:L}=this.updateGroupScale(n),T=fW.is(r)?k*-.5:0,N=i.convert(String(L)),C=lmt(n?.scale,n?.visibleRange,this.smallestDataInterval,this.largestDataInterval),O=V=>Math.round(r.convert(v[V]))+N+T,R=(V,W,B,U,H,K,X)=>{const Q=b[V],$=v[V];if($==null)return;const Z=S[V],Y=D[V];if(!Number.isFinite(Z?.valueOf())||!Number.isFinite(Y?.valueOf()))return;const[tt,q]=Z<Y?[Z,Y]:[Y,Z],it=Math.round(l.convert(K)),at=Math.round(l.convert(H)),rt=Math.max(f,Math.abs(at-it)),ot={x:c?Math.min(it,at):B,y:c?B:Math.min(it,at),width:c?rt:U,height:c?U:rt},et={x:ot.x+ot.width/2,y:ot.y+ot.height/2},gt=this.createLabelData({rect:ot,barAlongX:c,yLowValue:tt,yHighValue:q,datum:Q,series:this}),dt={index:W,valueIndex:V,series:this,itemId:x,datum:Q,datumIndex:V,xValue:$,yLowValue:Z,yHighValue:Y,yLowKey:u,yHighKey:d,xKey:h,x:ot.x,y:ot.y,width:ot.width,height:ot.height,midPoint:et,fill:p,stroke:g,strokeWidth:f,opacity:1,crisp:X,labels:gt};m.nodeData.push(dt),m.labelData.push(...gt)},{dataAggregationFilters:E}=this,[z,F]=r.range,G=F-z,j=E?.find(V=>V.maxRange>G);if(j!=null){const{maxRange:V,indexData:W}=j,[B,U]=XC(V,n.range,H=>{const K=H*en,X=W[K+us],Q=W[K+Qs];if(X===-1)return;const $=(X+Q)/2|0;return[O($),O(Q)+k]});for(let H=B;H<U;H+=1){const K=H*en,X=W[K+us],Q=W[K+Qs],$=W[K+qs],Z=W[K+Js];if(X===-1)continue;const Y=(X+Q)/2|0;if(v[Y]==null)continue;const q=O(Y),it=Math.abs(O(X)-O(Q))+k,at=S[$],rt=D[Z];R(Y,0,q,it,at,rt,!1)}}else if(s.type==="ungrouped"){let[V,W]=XC(b.length,n.range,B=>[O(B),k]);s.rawData.length<1e3&&(V=0,W=s.rawData.length);for(let B=V;B<W;B+=1){const U=O(B),H=k,K=S[B],X=D[B];R(B,0,U,H,K,X,C)}}else s.groups.forEach(({datumIndices:V},W)=>{V.forEach(B=>{const U=O(B),H=k,K=S[B],X=D[B];R(B,W,U,H,K,X,C)})});return m}createLabelData({rect:t,barAlongX:e,yLowValue:i,yHighValue:s,datum:a,series:n}){const{xKey:o,yLowKey:r,yHighKey:l,xName:c,yLowName:h,yHighName:u,yName:d,label:p}=this.properties,g={datum:a,xKey:o,yLowKey:r,yHighKey:l,xName:c,yLowName:h,yHighName:u,yName:d},{placement:f,padding:x}=p,b=x*(f==="outside"?1:-1),v={x:t.x+(e?-b:t.width/2),y:t.y+(e?t.height/2:t.height+b),textAlign:e?"left":"center",textBaseline:e?"middle":"bottom",text:this.getLabelText(p,{itemId:"low",value:i,...g}),itemId:"low",datum:a,series:n},S={x:t.x+(e?t.width+b:t.width/2),y:t.y+(e?t.height/2:-b),textAlign:e?"right":"center",textBaseline:e?"middle":"top",text:this.getLabelText(p,{itemId:"high",value:s,...g}),itemId:"high",datum:a,series:n};return f==="outside"&&(v.textAlign=e?"right":"center",v.textBaseline=e?"middle":"top",S.textAlign=e?"left":"center",S.textBaseline=e?"middle":"bottom"),[v,S]}nodeFactory(){return new Smt}updateDatumSelection(t){const{nodeData:e,datumSelection:i}=t,s=e??[];return i.update(s,void 0,a=>this.getDatumId(a))}getItemBaseStyle(t){const{properties:e}=this,{cornerRadius:i}=e,s=t?e.highlightStyle.item:void 0;return{fill:s?.fill??e.fill,fillOpacity:s?.fillOpacity??e.fillOpacity,stroke:s?.stroke??e.stroke,strokeWidth:s?.strokeWidth??e.strokeWidth,strokeOpacity:s?.strokeOpacity??e.strokeOpacity,lineDash:s?.lineDash??e.lineDash??[],lineDashOffset:s?.lineDashOffset??e.lineDashOffset,cornerRadius:i}}getItemStyleOverrides(t,e,i,s){const{id:a,properties:n}=this,{xKey:o,yHighKey:r,yLowKey:l,itemStyler:c}=n;if(c!=null)return this.cachedDatumCallback(xmt(t,s?"highlight":"node"),()=>c({seriesId:a,datum:e,xKey:o,yHighKey:r,yLowKey:l,highlighted:s,...i}))}updateDatumNodes(t){const{datumSelection:e,isHighlight:i}=t,{id:s}=this,{yLowKey:a,yHighKey:n,highlightStyle:{item:o},fillOpacity:r,strokeOpacity:l,strokeWidth:c,lineDash:h,lineDashOffset:u,itemStyler:d,shadow:p}=this.properties,g=this.getCategoryDirection()===iM.X;e.each((f,x)=>{const m={fill:x.fill,stroke:x.stroke,fillOpacity:r,strokeOpacity:l,lineDash:h,lineDashOffset:u,fillShadow:p,strokeWidth:this.getStrokeWidth(c),cornerRadius:this.properties.cornerRadius},b=g?x.width>0:x.height>0,v=omt(this,this.getDatumId(x),{datum:x,isHighlighted:i,style:m,highlightStyle:o,itemStyler:d,seriesId:s,yLowKey:a,yHighKey:n});v.crisp=x.crisp,v.visible=b,rmt(f,v)})}getHighlightLabelData(t,e){const i=t.filter(s=>s.datum===e.datum);return i.length>0?i:void 0}updateLabelSelection(t){const e=this.properties.label.enabled?t.labelData:[];return t.labelSelection.update(e,i=>{i.pointerEvents=vmt.None})}updateLabelNodes(t){t.labelSelection.each((e,i)=>{cmt(e,this.properties.label,i)})}getTooltipContent(t){const{id:e,dataModel:i,processedData:s,properties:a}=this,{xKey:n,xName:o,yName:r,yLowKey:l,yHighKey:c,yLowName:h,yHighName:u,tooltip:d}=a,p=this.getCategoryAxis(),g=this.getValueAxis();if(!i||!s||s.rawData.length===0||!p||!g)return;const{datumIndex:f}=t,x=s.rawData[f],m=i.resolveKeysById(this,"xValue",s)[f],b=i.resolveColumnById(this,"yHighValue",s)[f],v=i.resolveColumnById(this,"yLowValue",s)[f];if(m==null)return;const S=this.getItemBaseStyle(!1);Object.assign(S,this.getItemStyleOverrides(String(f),x,S,!1));const D=`${g.formatDatum(v)} - ${g.formatDatum(b)}`;return d.formatTooltip({heading:p.formatDatum(m),symbol:this.legendItemSymbol(),data:[{label:r,fallbackLabel:`${h??l} - ${u??c}`,value:D}]},{seriesId:e,datum:x,title:r,xKey:n,xName:o,yName:r,yLowKey:l,yHighKey:c,yLowName:h,yHighName:u,...S})}legendItemSymbol(){const{fill:t,stroke:e,strokeWidth:i,fillOpacity:s,strokeOpacity:a}=this.properties;return{marker:{fill:t,stroke:e,fillOpacity:s,strokeOpacity:a,strokeWidth:i}}}getLegendData(t){if(t!=="category")return[];const{id:e,visible:i}=this,{yName:s,yLowName:a,yHighName:n,yLowKey:o,yHighKey:r,showInLegend:l}=this.properties,c=s??`${a??o} - ${n??r}`,h=`${o}-${r}`;return[{legendType:"category",id:e,itemId:h,seriesId:e,enabled:i,label:{text:`${c}`},symbol:this.legendItemSymbol(),hideInLegend:!l}]}animateEmptyUpdateReady({datumSelection:t,labelSelection:e}){const i=dW(pW(this.isVertical(),"normal"));yW.fromToMotion(this.id,"datums",this.ctx.animationManager,[t],i),gW(this,"labels",this.ctx.animationManager,e)}animateWaitingUpdateReady(t){const{datumSelection:e,labelSelection:i}=t,{processedData:s}=this,a=s?.reduced?.diff?.[this.id];this.ctx.animationManager.stopByAnimationGroupId(this.id);const n=dW(pW(this.isVertical(),"fade"));yW.fromToMotion(this.id,"datums",this.ctx.animationManager,[e],n,(o,r)=>this.getDatumId(r),a),gW(this,"labels",this.ctx.animationManager,i)}getDatumId(t){return`${t.xValue}-${t.valueIndex}`}isLabelEnabled(){return this.properties.label.enabled}onDataChange(){}computeFocusBounds({datumIndex:t}){return mmt(this.contextNodeData?.nodeData[t])}};ZC.className="RangeBarSeries",ZC.type="range-bar";var $C=(P(),_(w)),Dmt={series:{direction:"vertical",strokeWidth:0,label:{enabled:!1,fontSize:12,fontFamily:$C._ModuleSupport.ThemeSymbols.DEFAULT_FONT_FAMILY,color:$C._ModuleSupport.ThemeSymbols.DEFAULT_INSIDE_SERIES_LABEL_COLOUR,placement:"inside"}},axes:{[$C._ModuleSupport.ThemeConstants.CARTESIAN_AXIS_TYPE.NUMBER]:{crosshair:{enabled:!0}}}},{CARTESIAN_AXIS_TYPE:mW,CARTESIAN_POSITION:xW}=rW._ModuleSupport.ThemeConstants,Amt={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["cartesian"],identifier:"range-bar",moduleFactory:t=>new ZC(t),tooltipDefaults:{range:"exact"},defaultAxes:rW._ModuleSupport.swapAxisCondition([{type:mW.NUMBER,position:xW.LEFT},{type:mW.CATEGORY,position:xW.BOTTOM}],t=>t?.direction==="horizontal"),themeTemplate:Dmt,paletteFactory:({takeColors:t})=>{const{fills:[e],strokes:[i]}=t(1);return{fill:e,stroke:i}},groupable:!0},Imt=(P(),_(w)),kmt=(P(),_(w));function bW(t){t.nodes.sort((e,i)=>Math.round((e.datum.y-i.datum.y)*100)/100||-(e.datum.size-i.datum.size))}function Lmt({nodes:t,size:e},{seriesRectHeight:i,nodeSpacing:s,sizeScale:a}){const n=i*e*a;let r=(i-(n+s*(t.length-1)))/2;t.forEach(({datum:l})=>{const c=i*l.size*a;l.y=r,l.height=c,r+=c+s})}function Tmt(t,e){const{nodes:i}=t,{seriesRectHeight:s,nodeSpacing:a}=e;bW(t);let n=0,o=0;for(const{datum:c}of i){const h=Math.max(o-c.y,0);c.y+=h,n+=h,o=c.y+c.height+a}if(o-a<s)return n>0;let l=s;for(let c=i.length-1;c>=0;c-=1){const{datum:h}=i[c],u=h.y+h.height,d=Math.min(l-u,0);h.y+=d,n+=d,l=h.y-a}return!0}function QC(t,e,i,s,a,n,o,r){const l=(i-t)/(s-e),c=(o-a)/(r-n),h=((n-e)*(l*c)+t*c-a*l)/(c-l);return t<i?h>t&&h<Math.min(i,o):h<t&&h>Math.max(i,o)}function SW(t,e){let i=!1;const s=t.nodes.filter(n=>e(n).length===1);let a=!0;for(let n=0;a&&n<s.length;n+=1){a=!1;for(let o=0;o<s.length-1;o+=1){const{datum:r}=s[o],l=e(s[o])[0].node.datum,{datum:c}=s[o+1],h=e(s[o+1])[0].node.datum;if(!(QC(r.x,r.y,l.x,l.y,c.x,c.y,h.x,h.y)||QC(r.x,r.y+r.height/2,l.x,l.y+l.height/2,c.x,c.y+c.height/2,h.x,h.y+h.height/2)||QC(r.x,r.y+r.height,l.x,l.y+l.height,c.x,c.y+c.height,h.x,h.y+h.height)))continue;const d=s[o];s[o]=s[o+1],s[o+1]=d;const p=r.y;r.y=c.y+c.height-r.height,c.y=p,i=!0,a=!0}}return i}function Nmt(t){let e=!1;return bW(t),e=SW(t,i=>i.linksBefore)||e,e=SW(t,i=>i.linksAfter)||e,e}function Cmt(t){if(t.length===0)return;let e=0,i=0;for(const{node:{datum:s}}of t)e+=s.y*s.size,i+=s.size;return e/i}function vW(t,e,i,s){return t.nodes.forEach(({datum:a,linksBefore:n,linksAfter:o})=>{const r=s===1?n:o,l=s===1?o:n,c=Cmt(r);if(c!=null){const h=l.length!==0?i:1;a.y=a.y+(c-a.y)*h}}),Tmt(t,e)}function MW(t,e,i){let s=!1;for(const a of t)s=vW(a,e,i,1)||s;return s}function Omt(t,e,i){let s=!1;for(let a=t.length-1;a>=0;a-=1)s=vW(t[a],e,i,-1)||s;return s}function DW(t){let e=!1;for(let i=t.length-1;i>=0;i-=1)e=Nmt(t[i])||e;return e}function Emt(t,e){t.forEach(s=>{Lmt(s,e)});let i=!1;for(let s=0;s<6;s+=1){const a=MW(t,e,1);i=Omt(t,e,.5);const n=DW(t);if(!a&&!i&&!n)break}i&&(MW(t,e,1),DW(t))}var wmt=(P(),_(w)),{BBox:Rmt,Path:_mt,ScenePathChangeDetection:ep,splitBezier:Pmt}=wmt._ModuleSupport;function sM(t,e,i,s,a,n,o,r,l,c){let h,u;if(a!==i&&l!==o){const k=-(s-e)/(a-i),L=-(r-n)/(l-o);h=(o-i+k*e-L*n)/(k-L),u=k*(h-e)+i}else if(a===i&&l!==o)h=e,u=-(r-n)/(l-o)*(h-r)+l;else if(a!==i&&l===o)h=r,u=-(s-e)/(a-i)*(h-e)+i;else throw new Error("Offsetting flat bezier curve");const d=Math.hypot(i-u,e-h),p=(d+c)/d,g=Math.hypot(l-u,r-h),f=(g+c)/g,x=h+(s-h)*p,m=u+(a-u)*p,b=h+(n-h)*f,v=u+(o-u)*f,S=h+(r-h)*f,D=u+(l-u)*f;t.cubicCurveTo(x,m,b,v,S,D)}var Jh=class extends _mt{constructor(){super(...arguments),this.x1=0,this.x2=0,this.y1=0,this.y2=0,this.height=0,this.inset=0}computeBBox(){const t=Math.min(this.x1,this.x2),e=Math.max(this.x1,this.x2)-t,i=Math.min(this.y1,this.y2),s=Math.max(this.y1,this.y2)-i+this.height;return new Rmt(t,i,e,s)}updatePath(){const{path:t,inset:e}=this;t.clear();const i=this.x1+e,s=this.x2-e,a=this.y1+e,n=this.y2+e,o=this.height-2*e;if(o<0||i>s)return;const r=i,l=a+o/2,c=(i+s)/2,h=a+o/2,u=(i+s)/2,d=n+o/2,p=s,g=n+o/2;if(t.moveTo(r,l-o/2),Math.abs(this.y2-this.y1)<1||this.x2-this.x1<this.height*Math.SQRT2)t.cubicCurveTo(c,h-o/2,u,d-o/2,p,g-o/2),t.lineTo(p,g+o/2),t.cubicCurveTo(u,d+o/2,c,h+o/2,r,l+o/2);else{const[f,x]=Pmt(r,l,c,h,u,d,p,g,.5),m=(n>a?1:-1)*o/2;sM(t,f[0].x,f[0].y,f[1].x,f[1].y,f[2].x,f[2].y,f[3].x,f[3].y,m),sM(t,x[0].x,x[0].y,x[1].x,x[1].y,x[2].x,x[2].y,x[3].x,x[3].y,-m),t.lineTo(p,g+o/2),sM(t,x[3].x,x[3].y,x[2].x,x[2].y,x[1].x,x[1].y,x[0].x,x[0].y,m),sM(t,f[3].x,f[3].y,f[2].x,f[2].y,f[1].x,f[1].y,f[0].x,f[0].y,-m)}t.closePath()}};y([ep()],Jh.prototype,"x1",2),y([ep()],Jh.prototype,"x2",2),y([ep()],Jh.prototype,"y1",2),y([ep()],Jh.prototype,"y2",2),y([ep()],Jh.prototype,"height",2),y([ep()],Jh.prototype,"inset",2);var Bmt=(P(),_(w)),{BaseProperties:AW,SeriesTooltip:zmt,SeriesProperties:Fmt,ARRAY:jmt,COLOR_STRING:aM,COLOR_STRING_ARRAY:IW,FUNCTION:kW,LINE_DASH:LW,OBJECT:nM,POSITIVE_NUMBER:tu,RATIO:oM,STRING:gc,UNION:Gmt,Validate:Pt,Label:Vmt}=Bmt._ModuleSupport,Umt=Gmt(["left","right","center","justify"],"a justification value"),TW=class extends Vmt{constructor(){super(...arguments),this.spacing=1}};y([Pt(tu)],TW.prototype,"spacing",2);var Kr=class extends AW{constructor(){super(...arguments),this.fill=void 0,this.fillOpacity=1,this.stroke=void 0,this.strokeOpacity=1,this.strokeWidth=1,this.lineDash=[0],this.lineDashOffset=0}};y([Pt(aM,{optional:!0})],Kr.prototype,"fill",2),y([Pt(oM)],Kr.prototype,"fillOpacity",2),y([Pt(aM,{optional:!0})],Kr.prototype,"stroke",2),y([Pt(oM)],Kr.prototype,"strokeOpacity",2),y([Pt(tu)],Kr.prototype,"strokeWidth",2),y([Pt(LW)],Kr.prototype,"lineDash",2),y([Pt(tu)],Kr.prototype,"lineDashOffset",2),y([Pt(kW,{optional:!0})],Kr.prototype,"itemStyler",2);var an=class extends AW{constructor(){super(...arguments),this.spacing=1,this.width=1,this.alignment="justify",this.fill=void 0,this.fillOpacity=1,this.stroke=void 0,this.strokeOpacity=1,this.strokeWidth=1,this.lineDash=[0],this.lineDashOffset=0}};y([Pt(tu)],an.prototype,"spacing",2),y([Pt(tu)],an.prototype,"width",2),y([Pt(Umt)],an.prototype,"alignment",2),y([Pt(aM,{optional:!0})],an.prototype,"fill",2),y([Pt(oM)],an.prototype,"fillOpacity",2),y([Pt(aM,{optional:!0})],an.prototype,"stroke",2),y([Pt(oM)],an.prototype,"strokeOpacity",2),y([Pt(tu)],an.prototype,"strokeWidth",2),y([Pt(LW)],an.prototype,"lineDash",2),y([Pt(tu)],an.prototype,"lineDashOffset",2),y([Pt(kW,{optional:!0})],an.prototype,"itemStyler",2);var ys=class extends Fmt{constructor(){super(...arguments),this.nodes=void 0,this.idKey="",this.idName=void 0,this.labelKey=void 0,this.labelName=void 0,this.sizeKey=void 0,this.sizeName=void 0,this.fills=[],this.strokes=[],this.label=new TW,this.link=new Kr,this.node=new an,this.tooltip=new zmt}};y([Pt(jmt,{optional:!0})],ys.prototype,"nodes",2),y([Pt(gc)],ys.prototype,"fromKey",2),y([Pt(gc)],ys.prototype,"toKey",2),y([Pt(gc)],ys.prototype,"idKey",2),y([Pt(gc,{optional:!0})],ys.prototype,"idName",2),y([Pt(gc,{optional:!0})],ys.prototype,"labelKey",2),y([Pt(gc,{optional:!0})],ys.prototype,"labelName",2),y([Pt(gc,{optional:!0})],ys.prototype,"sizeKey",2),y([Pt(gc,{optional:!0})],ys.prototype,"sizeName",2),y([Pt(IW)],ys.prototype,"fills",2),y([Pt(IW)],ys.prototype,"strokes",2),y([Pt(nM)],ys.prototype,"label",2),y([Pt(nM)],ys.prototype,"link",2),y([Pt(nM)],ys.prototype,"node",2),y([Pt(nM)],ys.prototype,"tooltip",2);var{SeriesNodePickMode:NW,CachedTextMeasurerPool:Wmt,TextWrapper:CW,TextUtils:OW,createDatumId:rM,Logger:Hmt,Rect:Ymt,BBox:Kmt}=kmt._ModuleSupport,qC=class extends vN{constructor(t){super({moduleCtx:t,pickModes:[NW.NEAREST_NODE,NW.EXACT_SHAPE_MATCH]}),this.properties=new ys}isLabelEnabled(){return(this.properties.labelKey!=null||this.nodes==null)&&this.properties.label.enabled}linkFactory(){return new Jh}nodeFactory(){return new Ymt}createNodeData(){const{id:t,_nodeDataDependencies:{seriesRectWidth:e,seriesRectHeight:i}={seriesRectWidth:0,seriesRectHeight:0}}=this,{fromKey:s,toKey:a,sizeKey:n,label:{spacing:o},node:{spacing:r,width:l,alignment:c}}=this.properties,{nodeGraph:h,links:u,maxPathLength:d}=this.getNodeGraph(L=>({...L,x:NaN,y:NaN,width:l,height:NaN}),L=>({...L,x1:NaN,x2:NaN,y1:NaN,y2:NaN,height:NaN}),{includeCircularReferences:!1}),p=h,g=this.isLabelEnabled()?(e-l)*(1-d/(d+1)):0,f=(e-l-2*g)/(d-1),x=[];for(let L=0;L<d;L+=1){const T=g+L*f;x.push({index:L,size:0,nodes:[],x:T})}p.forEach(L=>{const{datum:T,linksBefore:N,linksAfter:C,maxPathLengthBefore:O,maxPathLengthAfter:R}=L,E=Math.max(N.reduce((G,{link:j})=>G+j.size,0),C.reduce((G,{link:j})=>G+j.size,0));if(N.length===0&&C.length===0||E===0){L.columnIndex=-1;return}let z;switch(c){case"left":z=x[O];break;case"right":z=x[d-1-R];break;case"center":{if(N.length!==0)z=x[O];else if(C.length!==0){const G=C.reduce((j,V)=>Math.min(j,V.node.maxPathLengthBefore),d)-1;z=x[G]}else z=x[0];break}case"justify":{z=C.length===0?x[d-1]:x[O];break}}T.x=z.x,T.size=E;const F=this.getLabelText(this.properties.label,{datum:T.datum,value:T.label,fromKey:s,toKey:a,sizeKey:n,size:E});T.label=String(F),z.nodes.push(L),z.size+=E,L.columnIndex=z.index}),p.forEach(L=>{let T=1/0,N=0;L.linksAfter.forEach(C=>{const O=C.node,{columnIndex:R}=O;R<T?(T=R,N=O.datum.size):R===T&&(N=Math.max(N,O.datum.size))}),L.closestColumnIndex=T,L.maxSizeOfClosestNodesAfter=N});const m=x.reduce((L,{size:T,nodes:N})=>{const C=(1-(N.length-1)*(r/i))/T;return Math.min(L,C)},1/0);for(let L=x.length-1;L>=0;L-=1)x[L].nodes.sort((N,C)=>N.closestColumnIndex-C.closestColumnIndex||N.maxSizeOfClosestNodesAfter-C.maxSizeOfClosestNodesAfter||N.datum.size-C.datum.size);Emt(x,{seriesRectHeight:i,nodeSpacing:r,sizeScale:m});let b=!1;if(p.forEach(({datum:L,linksBefore:T,linksAfter:N})=>{b||(b=L.height<0);const C=L.y+L.height,O=z=>z.sort((F,G)=>{const j=F.node.datum,V=G.node.datum,W=j.y+j.height,B=V.y+V.height,U=Math.atan2(j.y-L.y,Math.abs(j.x-L.x))-Math.atan2(V.y-L.y,Math.abs(V.x-L.x)),H=Math.atan2(W-C,Math.abs(j.x-L.x))-Math.atan2(B-C,Math.abs(V.x-L.x));return U+H});let R=L.y;O(T).forEach(({link:z})=>{z.y2=R,R+=z.size*i*m});let E=L.y;O(N).forEach(({link:z})=>{z.y1=E,E+=z.size*i*m})}),b){Hmt.warnOnce("There was insufficient space to display the Sankey Series. Reduce the node spacing, or provide a larger container.");return}const v=[],S=[],{fontSize:D}=this.properties.label,k=this.properties.label.getFont();return x.forEach((L,T)=>{const N=T===0,C=T===x.length-1;let O=-1/0;L.nodes.sort((R,E)=>R.datum.y-E.datum.y),L.nodes.forEach(({datum:R})=>{if(R.midPoint={x:R.x+R.width/2,y:R.y+R.height/2},v.push(R),R.label==null)return;const E=N?R.x-o:R.x+R.width+o,z=R.y+R.height/2;let F;if(!N&&!C){const W=z-OW.getLineHeight(D),B=z+OW.getLineHeight(D);let U=e;p.forEach(({datum:K})=>{K.x>R.x&&Math.max(K.y,W)<=Math.min(K.y+K.height,B)&&(U=Math.min(U,K.x-o))});const H=U-R.x-2*o;F=CW.wrapText(R.label,{maxWidth:H,maxHeight:R.height,font:this.properties.label,textWrap:"never",overflow:"hide"})}if(F==null||F===""){const W=N||C?o:o*2;F=CW.wrapText(R.label,{maxWidth:f-W,maxHeight:R.height,font:this.properties.label,textWrap:"never"})}if(F==="")return;const{height:G}=Wmt.measureText(F,{font:k,textAlign:"left",textBaseline:"middle"}),j=z-G/2,V=z+G/2;j>=O&&(S.push({x:E,y:z,leading:N,text:F}),O=V)})}),u.forEach(L=>{const{fromNode:T,toNode:N,size:C}=L;L.height=i*C*m,L.x1=T.x+l,L.x2=N.x,L.midPoint={x:(L.x1+L.x2)/2,y:(L.y1+L.y2)/2+L.height/2},v.push(L)}),{itemId:t,nodeData:v,labelData:S}}updateLabelSelection(t){const e=this.isLabelEnabled()?t.labelData:[];return t.labelSelection.update(e)}updateLabelNodes(t){const{labelSelection:e}=t,{color:i,fontStyle:s,fontWeight:a,fontSize:n,fontFamily:o}=this.properties.label;e.each((r,{x:l,y:c,leading:h,text:u})=>{r.visible=!0,r.x=l,r.y=c,r.text=u,r.fill=i,r.fontStyle=s,r.fontWeight=a,r.fontSize=n,r.fontFamily=o,r.textAlign=h?"right":"left",r.textBaseline="middle"})}updateNodeSelection(t){return t.datumSelection.update(t.nodeData,void 0,e=>rM([e.type,e.id]))}getBaseNodeStyle(t){const{properties:e}=this,{fill:i,fillOpacity:s,stroke:a,strokeOpacity:n,lineDash:o,lineDashOffset:r}=e.node,l=this.getStrokeWidth(e.node.strokeWidth),c=t?e.highlightStyle.item:void 0;return{fill:c?.fill??i,fillOpacity:c?.fillOpacity??s,stroke:c?.stroke??a,strokeOpacity:c?.strokeOpacity??n,strokeWidth:c?.strokeWidth??l,lineDash:c?.lineDash??o,lineDashOffset:c?.lineDashOffset??r}}getNodeStyleOverrides(t,e,i,s,a,n,o){const{id:r,properties:l}=this,{fills:c,strokes:h}=l,{itemStyler:u}=l.node,d=n.fill??c[i%c.length],p=n.stroke??h[i%h.length],g={};if(o||(g.fill=d,g.stroke=p),u!=null){const f=this.cachedDatumCallback(rM(t,o?"highlight":"node"),()=>{const{fillOpacity:x=1,strokeOpacity:m=1,strokeWidth:b=0,lineDash:v=[],lineDashOffset:S=0}=n;return u({seriesId:r,datum:e,highlighted:o,label:a,size:s,fill:d,fillOpacity:x,stroke:p,strokeOpacity:m,strokeWidth:b,lineDash:v,lineDashOffset:S})});Object.assign(g,f)}return g}updateNodeNodes(t){const{datumSelection:e,isHighlight:i}=t,s=this.getBaseNodeStyle(i);e.each((a,n)=>{const{datumIndex:o,size:r,label:l}=n,c=this.getNodeStyleOverrides(String(o),n,o,r,l,s,i);a.x=n.x,a.y=n.y,a.width=Math.max(n.width,0),a.height=Math.max(n.height,0),a.fill=c?.fill??s.fill,a.fillOpacity=c?.fillOpacity??s.fillOpacity,a.stroke=c?.stroke??s.stroke,a.strokeOpacity=c?.strokeOpacity??s.strokeOpacity,a.strokeWidth=c?.strokeWidth??s.strokeWidth,a.lineDash=c?.lineDash??s.lineDash,a.lineDashOffset=c?.lineDashOffset??s.lineDashOffset})}updateLinkSelection(t){return t.datumSelection.update(t.nodeData,void 0,e=>rM([e.type,e.index,e.fromNode.id,e.toNode.id]))}getBaseLinkStyle(t){const{properties:e}=this,{fill:i,fillOpacity:s,stroke:a,strokeOpacity:n,lineDash:o,lineDashOffset:r}=e.link,l=this.getStrokeWidth(e.link.strokeWidth),c=t?e.highlightStyle.item:void 0;return{fill:c?.fill??i,fillOpacity:c?.fillOpacity??s,stroke:c?.stroke??a,strokeOpacity:c?.strokeOpacity??n,strokeWidth:c?.strokeWidth??l,lineDash:c?.lineDash??o,lineDashOffset:c?.lineDashOffset??r}}getLinkStyleOverrides(t,e,i,s,a){const{id:n,properties:o}=this,{fills:r,strokes:l}=o,{itemStyler:c}=o.link,h=s.fill??r[i%r.length],u=s.stroke??l[i%l.length],d={};if(a||(d.fill=h,d.stroke=u),c!=null){const p=this.cachedDatumCallback(rM(t,a?"highlight":"node"),()=>{const{fillOpacity:g=1,strokeOpacity:f=1,strokeWidth:x=0,lineDash:m=[],lineDashOffset:b=0}=s;return c({seriesId:n,datum:e,highlighted:a,fill:h,fillOpacity:g,stroke:u,strokeOpacity:f,strokeWidth:x,lineDash:m,lineDashOffset:b})});Object.assign(d,p)}return d}updateLinkNodes(t){const{datumSelection:e,isHighlight:i}=t,s=this.getBaseLinkStyle(i);e.each((a,n)=>{const{datumIndex:o}=n,r=n.fromNode.datumIndex,l=this.getLinkStyleOverrides(String(o),n,r,s,i);a.x1=n.x1,a.y1=n.y1,a.x2=n.x2,a.y2=n.y2,a.height=n.height,a.fill=l?.fill??s?.fill,a.fillOpacity=l?.fillOpacity??s?.fillOpacity,a.stroke=l?.stroke??s?.stroke,a.strokeOpacity=l?.strokeOpacity??s?.strokeOpacity,a.strokeWidth=Math.min(l?.strokeWidth??s?.strokeWidth,n.height/2),a.lineDash=l?.lineDash??s?.lineDash,a.lineDashOffset=l?.lineDashOffset??s?.lineDashOffset,a.inset=a.strokeWidth/2})}getTooltipContent(t){const{id:e,processedData:i,nodesProcessedData:s,properties:a}=this,{fromKey:n,toKey:o,sizeKey:r,sizeName:l,tooltip:c}=a,{datumIndex:h}=t,u=t.type===0?t.fromNode.index:t.index,d=t.type===0?`${t.fromNode.label} - ${t.toNode.label}`:t.label,p=t.type===0?i?.rawData[t.datumIndex]:s?.rawData[t.datumIndex],g=t.size;let f;if(t.type===0){const x=t.fromNode.datumIndex,m=this.getBaseLinkStyle(!1);Object.assign(m,this.getLinkStyleOverrides(String(h),p,x,m,!1)),f=m}else{const x=t.label,m=this.getBaseNodeStyle(!1);Object.assign(m,this.getNodeStyleOverrides(String(h),p,h,g,x,m,!1)),f=m}return c.formatTooltip({title:d,symbol:this.legendItemSymbol(t.type,u,f),data:r!=null?[{label:l,fallbackLabel:r,value:String(g)}]:[]},{seriesId:e,datum:p,title:d,fromKey:n,toKey:o,sizeKey:r,sizeName:l,size:g,...f})}computeFocusBounds({datumIndex:t}){const e=this.contextNodeData?.nodeData[t];if(e?.type===1){const{x:i,y:s,width:a,height:n}=e;return new Kmt(i,s,a,n)}else if(e?.type===0){for(const i of this.linkSelection)if(i.datum===e)return i.node;return}}};qC.className="SankeySeries",qC.type="sankey";var{DEFAULT_FONT_FAMILY:Xmt,DEFAULT_LABEL_COLOUR:Zmt}=Imt._ModuleSupport.ThemeSymbols,$mt={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["flow-proportion"],solo:!0,identifier:"sankey",moduleFactory:t=>new qC(t),tooltipDefaults:{range:"exact"},themeTemplate:{seriesArea:{padding:{top:10,bottom:10}},series:{highlightStyle:{series:{dimOpacity:.2}},label:{fontFamily:Xmt,color:Zmt,fontSize:12,spacing:10},node:{spacing:20,width:10,strokeWidth:0},link:{fillOpacity:.5,strokeWidth:0}},legend:{enabled:!1,toggleSeries:!1}},paletteFactory({takeColors:t,colorsCount:e}){return t(e)}},Qmt=(P(),_(w)),EW=(P(),_(w)),qmt=(P(),_(w)),{HierarchySeriesProperties:Jmt,HighlightStyle:txt,SeriesTooltip:ext,Validate:Ve,COLOR_STRING:ixt,FUNCTION:sxt,NUMBER:wW,OBJECT:ip,POSITIVE_NUMBER:JC,RATIO:lM,STRING:cM}=qmt._ModuleSupport,fc=class extends txt{constructor(){super(...arguments),this.label=new zo,this.secondaryLabel=new zo}};y([Ve(cM,{optional:!0})],fc.prototype,"fill",2),y([Ve(lM,{optional:!0})],fc.prototype,"fillOpacity",2),y([Ve(ixt,{optional:!0})],fc.prototype,"stroke",2),y([Ve(JC,{optional:!0})],fc.prototype,"strokeWidth",2),y([Ve(lM,{optional:!0})],fc.prototype,"strokeOpacity",2),y([Ve(ip)],fc.prototype,"label",2),y([Ve(ip)],fc.prototype,"secondaryLabel",2);var Es=class extends Jmt{constructor(){super(...arguments),this.fillOpacity=1,this.strokeWidth=0,this.strokeOpacity=1,this.cornerRadius=0,this.highlightStyle=new fc,this.label=new zo,this.secondaryLabel=new py,this.tooltip=new ext}};y([Ve(cM,{optional:!0})],Es.prototype,"sizeName",2),y([Ve(cM,{optional:!0})],Es.prototype,"labelKey",2),y([Ve(cM,{optional:!0})],Es.prototype,"secondaryLabelKey",2),y([Ve(lM)],Es.prototype,"fillOpacity",2),y([Ve(JC)],Es.prototype,"strokeWidth",2),y([Ve(lM)],Es.prototype,"strokeOpacity",2),y([Ve(JC)],Es.prototype,"cornerRadius",2),y([Ve(wW,{optional:!0})],Es.prototype,"sectorSpacing",2),y([Ve(wW,{optional:!0})],Es.prototype,"padding",2),y([Ve(sxt,{optional:!0})],Es.prototype,"itemStyler",2),y([Ve(ip)],Es.prototype,"highlightStyle",2),y([Ve(ip)],Es.prototype,"label",2),y([Ve(ip)],Es.prototype,"secondaryLabel",2),y([Ve(ip)],Es.prototype,"tooltip",2);var{fromToMotion:axt,normalizeAngle360:nxt,createDatumId:oxt,Sector:Ly,ScalableGroup:RW,Selection:t2,TransformableText:Ty}=EW._ModuleSupport,_W=(t,e=0,i=2*Math.PI/t.sumSize,s=Array.from(t,()=>{}))=>{let a=e;for(const n of t.children){const o=a,r=a+n.sumSize*i;s[n.index]={start:o,end:r},_W(n,o,i,s),a=r}return s},e2=class extends EW._ModuleSupport.HierarchySeries{constructor(){super(...arguments),this.properties=new Es,this.groupSelection=t2.select(this.contentGroup,RW),this.highlightSelection=t2.select(this.highlightGroup,RW),this.angleData=[]}processData(){const{childrenKey:t,colorKey:e,colorName:i,labelKey:s,secondaryLabelKey:a,sizeKey:n,sizeName:o}=this.properties;super.processData(),this.angleData=_W(this.rootNode),this.labelData=Array.from(this.rootNode,({datum:r,depth:l})=>{let c;if(r!=null&&l!=null&&s!=null){const u=r[s];c=this.getLabelText(this.properties.label,{depth:l,datum:r,childrenKey:t,colorKey:e,colorName:i,labelKey:s,secondaryLabelKey:a,sizeKey:n,sizeName:o,value:u})}c===""&&(c=void 0);let h;if(r!=null&&l!=null&&a!=null){const u=r[a];h=this.getLabelText(this.properties.secondaryLabel,{depth:l,datum:r,childrenKey:t,colorKey:e,colorName:i,labelKey:s,secondaryLabelKey:a,sizeKey:n,sizeName:o,value:u})}return h===""&&(h=void 0),c!=null||h!=null?{label:c,secondaryLabel:h}:void 0})}updateSelections(){if(!this.nodeDataRefresh)return;this.nodeDataRefresh=!1;const{chart:t}=this;if(t==null||t.seriesRect==null)return;const i=Array.from(this.rootNode),s=a=>{a.append([new Ly,new Ty({tag:0}),new Ty({tag:1})])};this.groupSelection.update(i,s,a=>this.getDatumId(a)),this.highlightSelection.update(i,s,a=>this.getDatumId(a))}getItemBaseStyle(t){const{properties:e}=this,i=t?e.highlightStyle:void 0;return{fill:i?.fill,fillOpacity:i?.fillOpacity??e.fillOpacity,stroke:i?.stroke,strokeWidth:i?.strokeWidth??e.strokeWidth,strokeOpacity:i?.strokeOpacity??e.strokeOpacity}}getItemStyleOverrides(t,e,i,s,a,n,o){const{id:r,properties:l,colorScale:c}=this,{fills:h,strokes:u,itemStyler:d}=l,p=n.fill??h[i%h.length],g=n.stroke??u[i%u.length],f={};if(o||(f.fill=a!=null?c.convert(a):p,f.stroke=g),d!=null){const x=this.cachedDatumCallback(oxt(t,o?"highlight":"node"),()=>d({seriesId:r,datum:e,depth:s,highlighted:o,fill:p,stroke:g,...n}));Object.assign(f,x)}return f}updateNodes(){const{chart:t,data:e,maxDepth:i,labelData:s}=this;if(t==null||e==null||s==null)return;const{width:a,height:n}=t.seriesRect,{sectorSpacing:o=0,padding:r=0,cornerRadius:l}=this.properties;this.contentGroup.translationX=a/2,this.contentGroup.translationY=n/2,this.highlightGroup.translationX=a/2,this.highlightGroup.translationY=n/2;const c=o*.5,u=Math.min(a,n)/2/(i+1),d=-Math.PI/2,p=this.ctx.highlightManager?.getActiveHighlight();new Ty().setFont(this.properties.label),this.rootNode.walk(S=>{const D=this.angleData[S.index];if(S.depth!=null&&D!=null){const k=D.end-D.start,L=(S.depth+.5)*u;S.midPoint.x=Math.cos(k)*L,S.midPoint.y=Math.sin(k)*L}});const f=(S,D,k,L)=>{const{datum:T,index:N,rootIndex:C,depth:O,colorValue:R}=S,E=this.angleData[N];if(O==null||E==null){D.visible=!1;return}D.visible=!0;const z=this.getItemStyleOverrides(String(N),T,C,O,R,k,L),F=z.strokeWidth??k.strokeWidth;D.fill=z.fill??k.fill,D.fillOpacity=z.fillOpacity??k.fillOpacity,D.stroke=z.stroke??k.stroke,D.strokeWidth=F,D.strokeOpacity=z.strokeOpacity??k.strokeOpacity,D.centerX=0,D.centerY=0,D.innerRadius=O*u,D.outerRadius=(O+1)*u,D.startAngle=E.start+d,D.endAngle=E.end+d,D.inset=c+F*.5,D.cornerRadius=l},x=this.getItemBaseStyle(!1);this.groupSelection.selectByClass(Ly).forEach(S=>{f(S.datum,S,x,!1)});const m=this.getItemBaseStyle(!0);this.highlightSelection.selectByClass(Ly).forEach(S=>{const D=S.datum,k=p===D;S.visible=k,S.visible&&f(S.datum,S,m,!0)});const b=Array.from(this.rootNode,(S,D)=>{const{depth:k}=S,L=s[D],T=this.angleData[D];if(k==null||T==null)return;const N=k*u+c,C=(k+1)*u-c,O=N>c?c/N:c,R=C>c?c/C:c,E=T.start+O,F=T.end+O-E,G=T.start+R,V=T.end+R-G,W=it=>{if(k===0&&S.parent?.sumSize===S.sumSize)return{width:2*Math.sqrt(C**2-(it*.5)**2),height:it,meta:0};const rt=it,ot=2*Math.sqrt(C**2-(N+rt)**2),et=F<Math.PI?2*N*Math.tan(F*.5):1/0,gt=Math.min(ot,et),dt=Math.PI/4;let ft,Dt;return k===0?(ft=it,Dt=Math.sqrt(C**2-(ft/2)**2)-it/(2*Math.tan(V*.5))):nxt(F)<dt?(ft=2*N*Math.tan(F*.5),Dt=Math.sqrt(C**2-(ft/2)**2)-N):(Dt=0,ft=0),gt>=Dt?{width:gt,height:rt,meta:1}:{width:Dt,height:ft,meta:2}},B=ON(L?.label,this.properties.label,L?.secondaryLabel,this.properties.secondaryLabel,{padding:r},W);if(B==null)return;const{width:U,height:H,meta:K,label:X,secondaryLabel:Q}=B,$=d+(T.start+T.end)/2,Z=Math.sin($)>=0,Y=Math.cos($)>=0,tt=(Z?3:12)&(Y?6:9);let q;switch(K){case 0:q=0;break;case 1:{const at=C-(u-H)*.58,rt=Math.sqrt((C-r)**2-(U/2)**2);q=Math.min(at,rt);break}case 2:if(k===0){const it=H/(2*Math.tan(F*.5))+U*.5,at=Math.sqrt(C**2-(H*.5)**2)-U*.5;q=(it+at)*.5}else q=(N+C)*.5;break}return{width:U,height:H,labelPlacement:K,circleQuarter:tt,radius:q,theta:$,label:X,secondaryLabel:Q}}),v=(S,D,k,L)=>{const{index:T,depth:N}=S,C=b?.[T],O=k===0?this.properties.label:this.properties.secondaryLabel,R=k===0?C?.label:C?.secondaryLabel;if(N==null||C==null||R==null){D.visible=!1;return}const{height:E,labelPlacement:z,circleQuarter:F,radius:G,theta:j}=C;let V;switch(L&&(V=(k===0?this.properties.highlightStyle.label:this.properties.highlightStyle.secondaryLabel).color),D.text=R.text,D.fontSize=R.fontSize,D.lineHeight=R.lineHeight,D.fontStyle=O.fontStyle,D.fontFamily=O.fontFamily,D.fontWeight=O.fontWeight,D.fill=V??O.color,z){case 0:D.textAlign="center",D.textBaseline="top",D.translationX=0,D.translationY=(k===0?0:E-R.height)-E*.5,D.rotation=0;break;case 1:{const W=(F&3)!==0,B=k===0==!W?G:G-(E-R.height);D.textAlign="center",D.textBaseline=W?"bottom":"top",D.translationX=Math.cos(j)*B,D.translationY=Math.sin(j)*B,D.rotation=W?j-Math.PI*.5:j+Math.PI*.5;break}case 2:{const W=(F&6)!==0,B=k===0==!W?(E-R.height)*.5:(R.height-E)*.5;D.textAlign="center",D.textBaseline="middle",D.translationX=Math.cos(j)*G+Math.cos(j+Math.PI/2)*B,D.translationY=Math.sin(j)*G+Math.sin(j+Math.PI/2)*B,D.rotation=W?j:j+Math.PI;break}}D.visible=!0};this.groupSelection.selectByClass(Ty).forEach(S=>{v(S.datum,S,S.tag,!1)}),this.highlightSelection.selectByClass(Ty).forEach(S=>{const D=S.datum,k=p===D;S.visible=k,S.visible&&v(S.datum,S,S.tag,k)})}getTooltipContent(t){const{id:e,properties:i}=this,{labelKey:s,secondaryLabelKey:a,childrenKey:n,sizeKey:o,sizeName:r,colorKey:l,colorName:c,tooltip:h}=i,{datum:u,index:d,rootIndex:p,depth:g}=t;if(u==null||g==null)return;const f=[],x=o!=null?u[o]:void 0;x!=null&&f.push({label:r,fallbackLabel:o,value:x});const m=l!=null?u[l]:void 0;m!=null&&f.push({label:c,fallbackLabel:l,value:m});const b=this.getItemBaseStyle(!1);Object.assign(b,this.getItemStyleOverrides(String(d),u,p,g,m,b,!1));const v=b.fill;return h.formatTooltip({title:s!=null?u[s]:void 0,symbol:{marker:{shape:"square",fill:v,fillOpacity:1,stroke:void 0,strokeWidth:0,strokeOpacity:1}},data:f},{seriesId:e,datum:u,title:void 0,depth:g,labelKey:s,secondaryLabelKey:a,childrenKey:n,sizeKey:o,sizeName:r,colorKey:l,colorName:c,...b})}createNodeData(){}pickNodeClosestDatum(t){return this.pickNodeNearestDistantObject(t,this.groupSelection.selectByClass(Ly))}animateEmptyUpdateReady({datumSelections:t}){axt(this.id,"nodes",this.ctx.animationManager,t,{toFn(){return{scalingX:1,scalingY:1}},fromFn(e,i,s){return s==="unknown"&&i!=null&&e.previousDatum==null?{scalingX:0,scalingY:0}:{scalingX:1,scalingY:1}}})}getAnimationData(){return{datumSelections:[this.groupSelection]}}computeFocusBounds(t){let e;for(const{node:i,datum:s}of this.groupSelection)s===t&&(e=t2.selectByClass(i,Ly)[0]);return e}};e2.className="SunburstSeries",e2.type="sunburst";var{DEFAULT_INSIDE_SERIES_LABEL_COLOUR:hM,DEFAULT_DIVERGING_SERIES_COLOR_RANGE:rxt}=Qmt._ModuleSupport.ThemeSymbols,lxt={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["hierarchy"],identifier:"sunburst",moduleFactory:t=>new e2(t),tooltipDefaults:{range:"exact"},solo:!0,themeTemplate:{series:{label:{fontSize:14,minimumFontSize:9,color:hM,overflowStrategy:"ellipsis",wrapping:"never",spacing:2},secondaryLabel:{fontSize:8,minimumFontSize:7,color:hM,overflowStrategy:"ellipsis",wrapping:"never"},sectorSpacing:2,padding:3,highlightStyle:{label:{color:hM},secondaryLabel:{color:hM},fill:"rgba(255,255,255, 0.33)",stroke:"rgba(0, 0, 0, 0.4)",strokeWidth:2}},gradientLegend:{enabled:!0}},paletteFactory:({takeColors:t,colorsCount:e,themeTemplateParameters:i})=>{const{fills:s,strokes:a}=t(e),n=i.get(rxt);return{fills:s,strokes:a,colorRange:n}}},cxt=(P(),_(w)),i2=(P(),_(w)),hxt=(P(),_(w)),{BaseProperties:uM,HierarchySeriesProperties:uxt,HighlightStyle:dxt,SeriesTooltip:pxt,Validate:bt,BOOLEAN:gxt,COLOR_STRING:dM,FUNCTION:fxt,NUMBER:yxt,OBJECT:nn,POSITIVE_NUMBER:Uo,RATIO:yc,STRING:eu,STRING_ARRAY:PW,TEXT_ALIGN:BW,VERTICAL_ALIGN:mxt,Label:xxt}=hxt._ModuleSupport,zW=class extends xxt{constructor(){super(...arguments),this.spacing=0}};y([bt(yxt)],zW.prototype,"spacing",2);var on=class extends uM{constructor(){super(...arguments),this.fillOpacity=1,this.strokeWidth=1,this.strokeOpacity=1,this.cornerRadius=0,this.textAlign="center",this.gap=0,this.padding=0,this.interactive=!0,this.label=new zW}};y([bt(eu,{optional:!0})],on.prototype,"fill",2),y([bt(yc)],on.prototype,"fillOpacity",2),y([bt(dM,{optional:!0})],on.prototype,"stroke",2),y([bt(Uo)],on.prototype,"strokeWidth",2),y([bt(yc)],on.prototype,"strokeOpacity",2),y([bt(Uo)],on.prototype,"cornerRadius",2),y([bt(BW)],on.prototype,"textAlign",2),y([bt(Uo)],on.prototype,"gap",2),y([bt(Uo)],on.prototype,"padding",2),y([bt(gxt)],on.prototype,"interactive",2),y([bt(nn)],on.prototype,"label",2);var Ca=class extends uM{constructor(){super(...arguments),this.fillOpacity=1,this.strokeWidth=1,this.strokeOpacity=1,this.cornerRadius=0,this.textAlign="center",this.verticalAlign="middle",this.gap=0,this.padding=0,this.label=new zo,this.secondaryLabel=new py}};y([bt(eu,{optional:!0})],Ca.prototype,"fill",2),y([bt(yc)],Ca.prototype,"fillOpacity",2),y([bt(dM,{optional:!0})],Ca.prototype,"stroke",2),y([bt(Uo,{optional:!0})],Ca.prototype,"strokeWidth",2),y([bt(yc)],Ca.prototype,"strokeOpacity",2),y([bt(Uo)],Ca.prototype,"cornerRadius",2),y([bt(BW)],Ca.prototype,"textAlign",2),y([bt(mxt)],Ca.prototype,"verticalAlign",2),y([bt(Uo)],Ca.prototype,"gap",2),y([bt(Uo)],Ca.prototype,"padding",2),y([bt(nn)],Ca.prototype,"label",2),y([bt(nn)],Ca.prototype,"secondaryLabel",2);var iu=class extends uM{constructor(){super(...arguments),this.label=new zo}};y([bt(eu,{optional:!0})],iu.prototype,"fill",2),y([bt(yc,{optional:!0})],iu.prototype,"fillOpacity",2),y([bt(dM,{optional:!0})],iu.prototype,"stroke",2),y([bt(Uo,{optional:!0})],iu.prototype,"strokeWidth",2),y([bt(yc,{optional:!0})],iu.prototype,"strokeOpacity",2),y([bt(nn)],iu.prototype,"label",2);var mc=class extends uM{constructor(){super(...arguments),this.label=new zo,this.secondaryLabel=new py}};y([bt(eu,{optional:!0})],mc.prototype,"fill",2),y([bt(yc,{optional:!0})],mc.prototype,"fillOpacity",2),y([bt(dM,{optional:!0})],mc.prototype,"stroke",2),y([bt(Uo,{optional:!0})],mc.prototype,"strokeWidth",2),y([bt(yc,{optional:!0})],mc.prototype,"strokeOpacity",2),y([bt(nn)],mc.prototype,"label",2),y([bt(nn)],mc.prototype,"secondaryLabel",2);var s2=class extends dxt{constructor(){super(...arguments),this.group=new iu,this.tile=new mc}};y([bt(nn)],s2.prototype,"group",2),y([bt(nn)],s2.prototype,"tile",2);var Wn=class extends uxt{constructor(){super(...arguments),this.highlightStyle=new s2,this.tooltip=new pxt,this.group=new on,this.tile=new Ca,this.undocumentedGroupFills=[],this.undocumentedGroupStrokes=[]}};y([bt(eu,{optional:!0})],Wn.prototype,"sizeName",2),y([bt(eu,{optional:!0})],Wn.prototype,"labelKey",2),y([bt(eu,{optional:!0})],Wn.prototype,"secondaryLabelKey",2),y([bt(fxt,{optional:!0})],Wn.prototype,"itemStyler",2),y([bt(nn)],Wn.prototype,"highlightStyle",2),y([bt(nn)],Wn.prototype,"tooltip",2),y([bt(nn)],Wn.prototype,"group",2),y([bt(nn)],Wn.prototype,"tile",2),y([bt(PW)],Wn.prototype,"undocumentedGroupFills",2),y([bt(PW)],Wn.prototype,"undocumentedGroupStrokes",2);var{TextUtils:bxt,TextWrapper:Sxt,clamp:vxt,isNumberEqual:Mxt,createDatumId:FW,Rect:jW,Group:GW,BBox:pM,Selection:a2,Text:gM}=i2._ModuleSupport,VW=new gM;function Dxt(t,e){const{fontStyle:i,fontWeight:s,fontSize:a,fontFamily:n}=e;VW.setProperties({text:t,fontStyle:i,fontWeight:s,fontSize:a,fontFamily:n,textAlign:"left",textBaseline:"top"});const{width:o,height:r}=VW.getBBox();return{width:o,height:r}}function xc(t){return t.children.length>0?t.sumSize-t.sizeValue:t.sizeValue}var UW={left:0,center:.5,right:1},Axt={top:0,middle:.5,bottom:1},ybt=class extends i2._ModuleSupport.Group{distanceSquared(t,e){return this.getBBox().distanceSquared(t,e)}},n2=class extends i2._ModuleSupport.HierarchySeries{constructor(){super(...arguments),this.properties=new Wn,this.rectGroup=this.contentGroup.appendChild(new GW),this.rectSelection=a2.select(this.rectGroup,jW),this.labelSelection=a2.select(this.labelGroup,GW),this.highlightSelection=a2.select(this.rectGroup,jW)}groupTitleHeight(t,e){const i=this.labelData?.[t.index]?.label,{label:s}=this.properties.group,a=3;if(i!=null){if(s.fontSize>e.width/a||s.fontSize>e.height/a)return;{const{height:n}=Dxt(i,s);return Math.max(n,s.fontSize)}}}getNodePadding(t,e){if(t.index===0)return{top:0,right:0,bottom:0,left:0};if(t.children.length===0){const{padding:o}=this.properties.tile;return{top:o,right:o,bottom:o,left:o}}const{label:{spacing:i},padding:s}=this.properties.group,a=this.groupTitleHeight(t,e),n=a!=null?a+i:0;return{top:s+n,right:s,bottom:s,left:s}}processData(){super.processData();const{childrenKey:t,colorKey:e,colorName:i,labelKey:s,secondaryLabelKey:a,sizeKey:n,sizeName:o,tile:r,group:l}=this.properties;if(!this.data?.length){this.labelData=void 0;return}this.labelData=Array.from(this.rootNode,({datum:c,depth:h,children:u})=>{const d=u.length===0,p=d?r.label:l.label;let g;if(c!=null&&h!=null&&s!=null){const x=c[s];g=this.getLabelText(p,{depth:h,datum:c,childrenKey:t,colorKey:e,colorName:i,labelKey:s,secondaryLabelKey:a,sizeKey:n,sizeName:o,value:x})}g===""&&(g=void 0);let f;if(d&&c!=null&&h!=null&&a!=null){const x=c[a];f=this.getLabelText(r.secondaryLabel,{depth:h,datum:c,childrenKey:t,colorKey:e,colorName:i,labelKey:s,secondaryLabelKey:a,sizeKey:n,sizeName:o,value:x})}return f===""&&(f=void 0),g!=null||f!=null?{label:g,secondaryLabel:f}:void 0})}sortChildren({children:t}){const e=Array.from(t,(s,a)=>a).filter(s=>xc(t[s])>0).sort((s,a)=>xc(t[a])-xc(t[s]));return{sortedChildrenIndices:e,childAt:s=>{const a=e[s];return t[a]}}}squarify(t,e,i,s){const{index:a,datum:n,children:o}=t;if(e.width<=0||e.height<=0){i[a]=void 0,s[a]=void 0;return}const r=n!=null?this.getNodePadding(t,e):{top:0,right:0,bottom:0,left:0};i[a]=a===0?void 0:e,s[a]=a===0?void 0:r;const{sortedChildrenIndices:l,childAt:c}=this.sortChildren(t),h=l.every(T=>o[T].children.length===0),u=1,d=e.width-r.left-r.right,p=e.height-r.top-r.bottom;if(d<=0||p<=0)return;const g=l.length;let f=0,x=0,m=1/0,b=l.reduce((T,N)=>T+xc(o[N]),0);const v=new pM(e.x+r.left,e.y+r.top,d,p),S=v.clone();let D=0;for(;D<g;){const T=xc(c(D)),N=xc(c(x)),C=S.width<S.height;f+=T;const O=C?S.height:S.width,R=C?S.width:S.height,E=R*N/f;let z=O*f/b;const F=Math.max(E,z)/Math.min(E,z),G=Math.abs(u-F);if(G<m){m=G,D++;continue}f-=T,z=O*f/b;let j=C?S.x:S.y;for(let V=x;V<D;V++){const W=c(V),B=xc(W),U=C?j:S.x,H=C?S.y:j,K=R*B/f,X=C?K:z,Q=C?z:K,$=new pM(U,H,X,Q);this.applyGap(v,$,h),this.squarify(W,$,i,s),b-=B,j+=K}C?(S.y+=z,S.height-=z):(S.x+=z,S.width-=z),x=D,f=0,m=1/0}const k=S.width<S.height;let L=k?S.x:S.y;for(let T=x;T<g;T++){const N=c(T),C=k?L:S.x,O=k?S.y:L,R=xc(N)/b,E=S.width*(k?R:1),z=S.height*(k?1:R),F=new pM(C,O,E,z);this.applyGap(v,F,h),this.squarify(N,F,i,s),L+=k?E:z}}applyGap(t,e,i){const s=i?this.properties.tile.gap*.5:this.properties.group.gap*.5,a=l=>({left:l.x,top:l.y,right:l.x+l.width,bottom:l.y+l.height}),n=a(t),o=a(e);["top","right","bottom","left"].forEach(l=>{Mxt(n[l],o[l])||e.shrink(s,l)})}createNodeData(){}getGroupBaseStyle(t){const{properties:e}=this,{group:i}=e,s=t?e.highlightStyle.group:void 0;return{fill:s?.fill??i.fill,fillOpacity:s?.fillOpacity??i.fillOpacity,stroke:s?.stroke??i.stroke,strokeWidth:s?.strokeWidth??i.strokeWidth,strokeOpacity:s?.strokeOpacity??i.strokeOpacity}}getGroupStyleOverrides(t,e,i,s,a){const{id:n,properties:o}=this,{undocumentedGroupFills:r,undocumentedGroupStrokes:l,itemStyler:c}=o,h=s.fill??r[Math.min(i??0,r.length)],u=s.stroke??l[Math.min(i??0,l.length)],d={};if(a||(d.fill=h,d.stroke=u),c!=null){const p=this.cachedDatumCallback(FW(t,a?"highlight":"node"),()=>c({seriesId:n,datum:e,depth:i,highlighted:a,fill:h,stroke:u,...s}));Object.assign(d,p)}return d}getTileBaseStyle(t){const{properties:e}=this,{tile:i}=e,s=t?e.highlightStyle.tile:void 0;return{fill:s?.fill??i.fill,fillOpacity:s?.fillOpacity??i.fillOpacity,stroke:s?.stroke??i.stroke,strokeWidth:s?.strokeWidth??i.strokeWidth,strokeOpacity:s?.strokeOpacity??i.strokeOpacity}}getTileStyleOverrides(t,e,i,s,a,n,o){const{id:r,properties:l,colorScale:c}=this,{fills:h,strokes:u,itemStyler:d}=l,p=n.fill??h[s%h.length],g=n.stroke??u[s%u.length],f={};if(o||(f.fill=a!=null?c.convert(a):p,f.stroke=g),d!=null){const x=this.cachedDatumCallback(FW(t,o?"highlight":"node"),()=>d({seriesId:r,datum:e,depth:i,highlighted:o,fill:p,stroke:g,...n}));Object.assign(f,x)}return f}updateSelections(){let t=this.ctx.highlightManager?.getActiveHighlight();if(t!=null&&!this.properties.group.interactive&&t.children.length!==0&&(t=void 0),this.highlightSelection.update(t!=null?[t]:[],void 0,a=>this.getDatumId(a)),!this.nodeDataRefresh)return;this.nodeDataRefresh=!1;const{seriesRect:e}=this.chart??{};if(!e)return;const i=Array.from(this.rootNode),s=a=>{a.append([new gM({tag:0}),new gM({tag:1})])};this.rectSelection.update(i,void 0,a=>this.getDatumId(a)),this.labelSelection.update(i,s,a=>this.getDatumId(a))}updateNodes(){const{rootNode:t,data:e}=this,{highlightStyle:i,tile:s,group:a}=this.properties,{seriesRect:n}=this.chart??{};if(!n||!e)return;const{width:o,height:r}=n,l=Array.from(this.rootNode,()=>{}),c=Array.from(this.rootNode,()=>{});this.squarify(t,new pM(0,0,o,r),l,c),this.updateNodeMidPoint(l);const h=(m,b,v,S,D)=>{const k=l[m.index];if(k==null){b.visible=!1;return}const{datum:L,depth:T=-1,index:N,rootIndex:C,colorValue:O}=m,R=m.children.length===0,E=R?S:v,z=R?this.getTileStyleOverrides(String(N),L,T,C,O,E,D):this.getGroupStyleOverrides(String(N),L,T,E,D);b.crisp=!0,b.fill=z?.fill??E.fill,b.fillOpacity=z?.fillOpacity??E.fillOpacity,b.stroke=z?.stroke??E.stroke,b.strokeWidth=z?.strokeWidth??E.strokeWidth,b.strokeOpacity=z?.strokeOpacity??E.strokeOpacity,b.cornerRadius=R?s.cornerRadius:a.cornerRadius,b.zIndex=[0,T,D?1:0];const F=m.parent?.children.every(V=>V.children.length===0),G=m.parent!=null?l[m.parent.index]:void 0,j=m.parent!=null?c[m.parent.index]:void 0;F===!0&&G!=null&&j!=null?(b.clipBBox=k,b.x=G.x+j.left,b.y=G.y+j.top,b.width=G.width-(j.left+j.right),b.height=G.height-(j.top+j.bottom)):(b.clipBBox=void 0,b.x=k.x,b.y=k.y,b.width=k.width,b.height=k.height),b.visible=!0},u=this.getGroupBaseStyle(!1),d=this.getTileBaseStyle(!1);this.rectSelection.each((m,b)=>h(b,m,u,d,!1));const p=this.getGroupBaseStyle(!0),g=this.getTileBaseStyle(!0);this.highlightSelection.each((m,b)=>{h(b,m,p,g,!0)});const f=Array.from(this.rootNode,m=>{const{index:b,children:v}=m,S=l[b],D=this.labelData?.[b];if(!(S==null||D==null))if(v.length===0){const k={width:S.width,height:S.height,meta:null},L=ON(D.label,this.properties.tile.label,D.secondaryLabel,this.properties.tile.secondaryLabel,{padding:s.padding},()=>k);if(L==null)return;const{height:T,label:N,secondaryLabel:C}=L,{textAlign:O,verticalAlign:R,padding:E}=s,z=UW[O]??.5,F=S.x+E+(S.width-2*E)*z,G=Axt[R]??.5,j=S.y+E+T*.5+(S.height-2*E-T)*G;return{label:N!=null?{text:N.text,fontSize:N.fontSize,lineHeight:N.lineHeight,style:this.properties.tile.label,x:F,y:j-(T-N.height)*.5}:void 0,secondaryLabel:C!=null?{text:C.text,fontSize:C.fontSize,lineHeight:C.fontSize,style:this.properties.tile.secondaryLabel,x:F,y:j+(T-C.height)*.5}:void 0,verticalAlign:"middle",textAlign:O}}else{if(D?.label==null)return;{const{padding:k,textAlign:L}=a,T=this.groupTitleHeight(m,S);if(T==null)return;const N=S.width-2*k,C=Sxt.wrapText(D.label,{maxWidth:S.width-2*k,font:a.label,textWrap:"never"}),O=UW[L]??.5;return{label:{text:C,fontSize:a.label.fontSize,lineHeight:bxt.getLineHeight(a.label.fontSize),style:this.properties.group.label,x:S.x+k+N*O,y:S.y+k+T*.5},secondaryLabel:void 0,verticalAlign:"middle",textAlign:L}}}}),x=(m,b,v,S)=>{const D=m.children.length===0,k=f[m.index],L=v===0?k?.label:k?.secondaryLabel;if(k==null||L==null){b.visible=!1;return}let T;if(S){const{tile:N,group:C}=i;T=N.secondaryLabel.color,D?v===0&&(T=N.label.color):T=C.label.color}b.text=L.text,b.fontSize=L.fontSize,b.lineHeight=L.lineHeight,b.fontStyle=L.style.fontStyle,b.fontFamily=L.style.fontFamily,b.fontWeight=L.style.fontWeight,b.fill=T??L.style.color,b.textAlign=k.textAlign,b.textBaseline=k.verticalAlign,b.x=L.x,b.y=L.y,b.visible=!0,b.zIndex=1};this.labelSelection.selectByClass(gM).forEach(m=>{x(m.datum,m,m.tag,!1)})}updateNodeMidPoint(t){this.rootNode.walk(e=>{const i=t[e.index];i!=null&&(e.midPoint.x=i.x+i.width/2,e.midPoint.y=i.y)})}pickNodeClosestDatum(t){const e=this.pickNodeExactShape(t);return e!==void 0?e:this.pickNodeNearestDistantObject(t,this.rectSelection.nodes())}getTooltipContent(t){const{id:e,properties:i}=this,{labelKey:s,secondaryLabelKey:a,childrenKey:n,sizeKey:o,sizeName:r,colorKey:l,colorName:c,tooltip:h}=i,{datum:u,index:d,rootIndex:p,depth:g,children:f}=t;if(u==null||g==null)return;const x=f.length===0,m=[],b=o!=null?u[o]:void 0;b!=null&&m.push({label:r,fallbackLabel:o,value:b});const v=l!=null?u[l]:void 0;v!=null&&m.push({label:c,fallbackLabel:l,value:v});let S;x?(S=this.getTileBaseStyle(!1),Object.assign(S,this.getTileStyleOverrides(String(d),u,g,p,v,S,!1))):(S=this.getGroupBaseStyle(!1),Object.assign(S,this.getGroupStyleOverrides(String(d),u,g,S,!1)));const D=S.fill,k=x?{marker:{shape:"square",fill:D,fillOpacity:1,stroke:void 0,strokeWidth:0,strokeOpacity:1}}:void 0;return h.formatTooltip({title:s!=null?u[s]:void 0,symbol:k,data:m},{seriesId:e,datum:u,title:void 0,depth:g,labelKey:s,secondaryLabelKey:a,childrenKey:n,sizeKey:o,sizeName:r,colorKey:l,colorName:c,...S})}pickFocus(t){const{focusPath:e}=this;(e.length<2||this.focusSorted==null)&&(e.length=1,this.focusSorted=this.sortChildren(e[0].nodeDatum),e.push({nodeDatum:this.focusSorted.childAt(0),childIndex:0}));const{datumIndexDelta:i,otherIndexDelta:s}=t,a=e[e.length-1];if(s===1){if(a.nodeDatum.children.length>0){this.focusSorted=this.sortChildren(a.nodeDatum);const o={nodeDatum:this.focusSorted.childAt(0),childIndex:0};return e.push(o),this.computeFocusOutputs(o)}}else if(i!==0){const o=a.childIndex+i,r=(a.nodeDatum.parent?.children.length??1)-1;return a.childIndex=vxt(0,o,r),a.nodeDatum=this.focusSorted.childAt(a.childIndex),this.computeFocusOutputs(a)}const n=super.pickFocus(t);return s<0&&(this.focusSorted=this.sortChildren(e[e.length-1].nodeDatum.parent)),n}getAnimationData(){return{datumSelections:[]}}computeFocusBounds(t){return this.rectSelection.at(t.index)?.getBBox()}};n2.className="TreemapSeries",n2.type="treemap";var{DEFAULT_DIVERGING_SERIES_COLOR_RANGE:Ixt,DEFAULT_FONT_FAMILY:o2,DEFAULT_HIERARCHY_FILLS:kxt,DEFAULT_HIERARCHY_STROKES:Lxt,DEFAULT_INSIDE_SERIES_LABEL_COLOUR:fM,DEFAULT_LABEL_COLOUR:WW}=cxt._ModuleSupport.ThemeSymbols,Txt={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["hierarchy"],identifier:"treemap",moduleFactory:t=>new n2(t),tooltipDefaults:{range:"exact"},solo:!0,themeTemplate:{series:{group:{label:{enabled:!0,color:WW,fontStyle:void 0,fontWeight:"normal",fontSize:12,fontFamily:o2,spacing:4},fill:void 0,stroke:void 0,strokeWidth:1,padding:4,gap:2,textAlign:"left"},tile:{label:{enabled:!0,color:fM,fontStyle:void 0,fontWeight:"normal",fontSize:18,minimumFontSize:10,fontFamily:o2,wrapping:"on-space",overflowStrategy:"ellipsis",spacing:2},secondaryLabel:{enabled:!0,color:fM,fontStyle:void 0,fontWeight:void 0,fontSize:12,minimumFontSize:10,fontFamily:o2,wrapping:"never",overflowStrategy:"ellipsis"},fill:void 0,stroke:void 0,strokeWidth:0,padding:3,gap:1},highlightStyle:{group:{label:{color:WW},fill:"rgba(255,255,255, 0.33)",stroke:"rgba(0, 0, 0, 0.4)",strokeWidth:2},tile:{label:{color:fM},secondaryLabel:{color:fM},fill:"rgba(255,255,255, 0.33)",stroke:"rgba(0, 0, 0, 0.4)",strokeWidth:2}}},gradientLegend:{enabled:!0}},paletteFactory:({takeColors:t,colorsCount:e,themeTemplateParameters:i})=>{const{fills:s,strokes:a}=t(e),n=i.get(Ixt),o=i.get(kxt),r=i.get(Lxt);return{fills:s,strokes:a,colorRange:n,undocumentedGroupFills:o,undocumentedGroupStrokes:r}}},HW=(P(),_(w)),su=(P(),_(w)),Nxt=(P(),_(w)),{AbstractBarSeriesProperties:Cxt,BaseProperties:Ny,PropertiesArray:Oxt,SeriesTooltip:Ext,Validate:_t,BOOLEAN:wxt,COLOR_STRING:r2,FUNCTION:YW,LINE_DASH:KW,NUMBER:Rxt,OBJECT:Xr,OBJECT_ARRAY:_xt,POSITIVE_NUMBER:sp,RATIO:l2,STRING:ap,UNION:XW,DropShadow:Pxt,Label:Bxt}=Nxt._ModuleSupport,yM=class extends Ny{};y([_t(XW(["subtotal","total"],"a total type"))],yM.prototype,"totalType",2),y([_t(Rxt)],yM.prototype,"index",2),y([_t(ap)],yM.prototype,"axisLabel",2);var ZW=class extends Ny{};y([_t(YW,{optional:!0})],ZW.prototype,"renderer",2);var c2=class extends Bxt{constructor(){super(...arguments),this.placement="outside-end",this.padding=6}};y([_t(XW(["inside-center","inside-start","inside-end","outside-start","outside-end"],"a placement"))],c2.prototype,"placement",2),y([_t(sp)],c2.prototype,"padding",2);var ms=class extends Ny{constructor(){super(...arguments),this.fill="#c16068",this.stroke="#c16068",this.fillOpacity=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.strokeWidth=1,this.cornerRadius=0,this.shadow=new Pxt().set({enabled:!1}),this.label=new c2,this.tooltip=new ZW}};y([_t(ap,{optional:!0})],ms.prototype,"name",2),y([_t(r2)],ms.prototype,"fill",2),y([_t(r2)],ms.prototype,"stroke",2),y([_t(l2)],ms.prototype,"fillOpacity",2),y([_t(l2)],ms.prototype,"strokeOpacity",2),y([_t(KW)],ms.prototype,"lineDash",2),y([_t(sp)],ms.prototype,"lineDashOffset",2),y([_t(sp)],ms.prototype,"strokeWidth",2),y([_t(sp)],ms.prototype,"cornerRadius",2),y([_t(YW,{optional:!0})],ms.prototype,"itemStyler",2),y([_t(Xr)],ms.prototype,"shadow",2),y([_t(Xr)],ms.prototype,"label",2),y([_t(Xr)],ms.prototype,"tooltip",2);var au=class extends Ny{constructor(){super(...arguments),this.enabled=!0,this.stroke="black",this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.strokeWidth=2}};y([_t(wxt)],au.prototype,"enabled",2),y([_t(r2)],au.prototype,"stroke",2),y([_t(l2)],au.prototype,"strokeOpacity",2),y([_t(KW)],au.prototype,"lineDash",2),y([_t(sp)],au.prototype,"lineDashOffset",2),y([_t(sp)],au.prototype,"strokeWidth",2);var mM=class extends Ny{constructor(){super(...arguments),this.positive=new ms,this.negative=new ms,this.total=new ms}};y([_t(Xr)],mM.prototype,"positive",2),y([_t(Xr)],mM.prototype,"negative",2),y([_t(Xr)],mM.prototype,"total",2);var Zr=class extends Cxt{constructor(){super(...arguments),this.item=new mM,this.totals=new Oxt(yM),this.line=new au,this.tooltip=new Ext}};y([_t(ap)],Zr.prototype,"xKey",2),y([_t(ap)],Zr.prototype,"yKey",2),y([_t(ap,{optional:!0})],Zr.prototype,"xName",2),y([_t(ap,{optional:!0})],Zr.prototype,"yName",2),y([_t(Xr)],Zr.prototype,"item",2),y([_t(_xt)],Zr.prototype,"totals",2),y([_t(Xr)],Zr.prototype,"line",2),y([_t(Xr)],Zr.prototype,"tooltip",2);var{adjustLabelPlacement:zxt,SeriesNodePickMode:$W,fixNumericExtent:Fxt,valueProperty:QW,keyProperty:jxt,accumulativeValueProperty:xM,trailingAccumulatedValueProperty:Gxt,ChartAxisDirection:h2,getRectConfig:Vxt,createDatumId:qW,updateRect:Uxt,checkCrisp:Wxt,updateLabelNode:Hxt,prepareBarAnimationFunctions:Yxt,collapsedStartingBarPosition:Kxt,resetBarSelectionsFn:Xxt,seriesLabelFadeInAnimation:Zxt,resetLabelFn:$xt,animationValidation:Qxt,DEFAULT_CARTESIAN_DIRECTION_KEYS:qxt,DEFAULT_CARTESIAN_DIRECTION_NAMES:Jxt,computeBarFocusBounds:tbt,isContinuous:JW,Rect:ebt,motion:ibt}=su._ModuleSupport,u2=class extends su._ModuleSupport.AbstractBarSeries{constructor(t){super({moduleCtx:t,directionKeys:qxt,directionNames:Jxt,pickModes:[$W.NEAREST_NODE,$W.EXACT_SHAPE_MATCH],pathsPerSeries:["connector"],hasHighlightedLabels:!0,pathsZIndexSubOrderOffset:[-1,-1],animationResetFns:{datum:Xxt,label:$xt}}),this.properties=new Zr,this.seriesItemTypes=new Set(["positive","negative","total"])}async processData(t){const{xKey:e,yKey:i,totals:s}=this.properties,{data:a=[]}=this;if(!this.properties.isValid()||!this.visible)return;const n=b=>JW(b)&&Number(b)>=0,o=b=>JW(b)&&Number(b)>=0,r=b=>b==="total"||b==="subtotal",l={missingValue:void 0,invalidValue:void 0},c=[],h=s.reduce((b,v)=>{const S=b.get(v.index);return S?S.push(v):b.set(v.index,[v]),b},new Map);a.forEach((b,v)=>{c.push(b),h.get(v)?.forEach(S=>c.push({...S.toJson(),[e]:S.axisLabel}))});const u=[];this.ctx.animationManager.isSkipped()||u.push(Qxt());const d=this.getCategoryAxis()?.scale,p=this.getValueAxis()?.scale,{isContinuousX:g,xScaleType:f,yScaleType:x}=this.getScaleInformation({xScale:d,yScale:p}),{processedData:m}=await this.requestDataModel(t,c,{props:[jxt(e,f,{id:"xValue"}),xM(i,x,{...l,id:"yCurrent"}),xM(i,x,{...l,missingValue:0,id:"yCurrentTotal"}),xM(i,x,{...l,id:"yCurrentPositive",validation:n}),xM(i,x,{...l,id:"yCurrentNegative",validation:o}),Gxt(i,x,{...l,id:"yPrevious"}),QW(i,x,{id:"yRaw"}),QW("totalType","band",{id:"totalTypeValue",missingValue:void 0,validation:r}),...g?[su._ModuleSupport.SMALLEST_KEY_INTERVAL,su._ModuleSupport.LARGEST_KEY_INTERVAL]:[],...u]});this.smallestDataInterval=m.reduced?.smallestKeyInterval,this.largestDataInterval=m.reduced?.largestKeyInterval,this.updateSeriesItemTypes(),this.animationState.transition("updateData")}getSeriesDomain(t){const{processedData:e,dataModel:i}=this;if(!e||!i)return[];const{keys:[s],values:a}=e.domain;if(t===this.getCategoryDirection()){const n=i.resolveProcessedDataDefById(this,"xValue");if(n?.def.type==="key"&&n?.def.valueType==="category")return s;const o=t===h2.Y,r=this.getCategoryAxis().isReversed();return this.padBandExtent(s,r!==o)}else{const n=i.resolveProcessedDataIndexById(this,"yCurrent"),o=a[n],r=[Math.min(0,o[0]),Math.max(0,o[1])];return Fxt(r)}}getSeriesRange(t,e){return[NaN,NaN]}createNodeData(){const{data:t,dataModel:e,processedData:i}=this,s=this.getCategoryAxis(),a=this.getValueAxis();if(!t||!s||!a||!e||i==null||i.rawData.length===0)return;const{line:n}=this.properties,o=s.scale,r=a.scale,l=this.getBarDirection()===h2.X,c=this.getBandwidth(s)??10,h=s.isReversed(),u=a.isReversed();if(i.type!=="ungrouped")return;const d={itemId:this.properties.yKey,nodeData:[],labelData:[],pointData:[],scales:this.calculateScaling(),visible:this.visible};if(!this.visible)return d;const p=[],g=e.resolveKeysById(this,"xValue",i),f=e.resolveColumnById(this,"yRaw",i),x=e.resolveColumnById(this,"totalTypeValue",i),m=e.resolveColumnById(this,"yCurrent",i),b=e.resolveColumnById(this,"yPrevious",i),v=e.resolveColumnById(this,"yCurrentTotal",i);function S(R,E,z){return R||E?{cumulativeValue:v[z],trailingValue:E?k:0}:{cumulativeValue:m[z],trailingValue:b[z]}}function D(R,E,z,F,G){return R?F:E?(F??0)-(G??0):z}let k=0;const{xKey:L,yKey:T,xName:N,yName:C}=this.properties;i.rawData.forEach((R,E)=>{const z=x[E],F=this.isSubtotal(z),G=this.isTotal(z),j=G||F,V=g[E];if(V==null)return;const W=Math.round(o.convert(V)),B=f[E],{cumulativeValue:U,trailingValue:H}=S(G,F,E);j&&(k=U??0);const K=Math.round(r.convert(U)),X=Math.round(r.convert(H)),Q=D(G,F,B,U,H),$=(Q??0)>=0,Z=this.getSeriesItemType($,z),{fill:Y,stroke:tt,strokeWidth:q,label:it}=this.getItemConfig(Z),at=$?K:X,rt=$?X:K,ot=Math.max(q,Math.abs(rt-at)),et={x:l?Math.min(at,rt):W,y:l?W:Math.min(at,rt),width:l?ot:c,height:l?c:ot},gt={x:et.x+et.width/2,y:et.y+et.height/2},dt=j?K:X,ft=Math.floor(n.strokeWidth)%2/2,Dt=h?K:dt,qt=h?dt:K;let Me,ri;l?(Me={x:Dt+ft,y:et.y},ri={x:qt+ft,y:et.y+et.height}):(Me={x:et.x,y:Dt+ft},ri={x:et.x+et.width,y:qt+ft});const rn={x:h?ri.x:Me.x,y:h?ri.y:Me.y,x2:h?Me.x:ri.x,y2:h?Me.y:ri.y,size:0};p.push(rn);const ea=Z==="subtotal"?"total":Z,Ai=this.getLabelText(it,{itemId:ea,value:Q,datum:R,xKey:L,yKey:T,xName:N,yName:C}),Wo={index:E,series:this,itemId:Z,datum:R,datumIndex:E,cumulativeValue:U??0,xValue:V,yValue:Q,yKey:T,xKey:L,x:et.x,y:et.y,width:et.width,height:et.height,midPoint:gt,fill:Y,stroke:tt,strokeWidth:q,opacity:1,label:{text:Ai,...zxt({isUpward:(Q??-1)>=0!==u,isVertical:!l,placement:it.placement,padding:it.padding,rect:et})}};d.nodeData.push(Wo),d.labelData.push(Wo)});const O=this.properties.line.enabled;return m!=null&&O&&(d.pointData=p),d}updateSeriesItemTypes(){const{dataModel:t,seriesItemTypes:e,processedData:i}=this;if(!t||!i)return;e.clear();const s=t.resolveProcessedDataIndexById(this,"yCurrentPositive"),a=t.resolveProcessedDataIndexById(this,"yCurrentNegative"),n=t.resolveProcessedDataIndexById(this,"totalTypeValue"),o=i.domain.values[s]??[],r=i.domain.values[a]??[];o.length>0&&e.add("positive"),r.length>0&&e.add("negative");const l=i?.domain.values[n];l&&l.forEach(c=>{(c==="total"||c==="subtotal")&&e.add("total")})}isSubtotal(t){return t==="subtotal"}isTotal(t){return t==="total"}nodeFactory(){return new ebt}getSeriesItemType(t,e){return e??(t?"positive":"negative")}getItemConfig(t){switch(t){case"positive":return this.properties.item.positive;case"negative":return this.properties.item.negative;case"subtotal":case"total":return this.properties.item.total}}updateDatumSelection(t){const{nodeData:e,datumSelection:i}=t,s=e??[];return i.update(s)}getItemStyle(t,e,i,s){const{id:a,properties:n}=this,o=n.item[i==="subtotal"?"total":i],r=s?n.highlightStyle.item:void 0,{itemStyler:l}=o,{xKey:c,yKey:h}=n,u={fill:r?.fill??o.fill,fillOpacity:r?.fillOpacity??o.fillOpacity,stroke:r?.stroke??o.stroke,strokeWidth:r?.strokeWidth??o.strokeWidth,strokeOpacity:r?.strokeOpacity??o.strokeOpacity,lineDash:r?.lineDash??o.lineDash??[],lineDashOffset:r?.lineDashOffset??o.lineDashOffset,cornerRadius:o.cornerRadius};if(l!=null){const d=this.cachedDatumCallback(qW(t,s?"highlight":"node"),()=>l({seriesId:a,itemId:i,datum:e,xKey:c,yKey:h,highlighted:s,...u}));Object.assign(u,d)}return u}updateDatumNodes(t){const{datumSelection:e,isHighlight:i}=t,{id:s}=this,{yKey:a,highlightStyle:{item:n}}=this.properties,o=this.getCategoryAxis(),r=Wxt(o?.scale,o?.visibleRange,this.smallestDataInterval,this.largestDataInterval),l=this.getCategoryDirection()===h2.X;e.each((c,h)=>{const u=h.itemId,{fillOpacity:d,strokeOpacity:p,strokeWidth:g,lineDash:f,lineDashOffset:x,cornerRadius:m,itemStyler:b,shadow:v}=this.getItemConfig(u),S={fill:h.fill,stroke:h.stroke,fillOpacity:d,strokeOpacity:p,lineDash:f,lineDashOffset:x,fillShadow:v,strokeWidth:this.getStrokeWidth(g),cornerRadius:m},D=l?h.width>0:h.height>0,k=Vxt(this,qW(h.index,"node"),{datum:h,isHighlighted:i,style:S,highlightStyle:n,itemStyler:b,seriesId:s,itemId:h.itemId,value:h.yValue,yKey:a});k.crisp=r,k.visible=D,Uxt(c,k)})}updateLabelSelection(t){const{labelData:e,labelSelection:i}=t;if(e.length===0)return i.update([]);const s=e.filter(a=>{const{label:n}=this.getItemConfig(a.itemId);return n.enabled});return i.update(s)}updateLabelNodes(t){t.labelSelection.each((e,i)=>{Hxt(e,this.getItemConfig(i.itemId).label,i.label)})}getTooltipContent(t){const{id:e,dataModel:i,processedData:s,properties:a}=this,{xKey:n,xName:o,yKey:r,yName:l,tooltip:c}=a,h=this.getCategoryAxis(),u=this.getValueAxis();if(!i||!s||s.rawData.length===0||!h||!u)return;const{datumIndex:d}=t,p=s.rawData[d],g=i.resolveKeysById(this,"xValue",s)[d],f=i.resolveColumnById(this,"yRaw",s)[d],x=i.resolveColumnById(this,"yCurrentTotal",s),m=i.resolveColumnById(this,"totalTypeValue",s);if(g==null)return;const b=m[d],v=(f??0)>=0,S=this.getSeriesItemType(v,b);let D;if(this.isTotal(b))D=x[d];else if(this.isSubtotal(b)){D=x[d];for(let L=d-1;L>=0;L-=1)if(this.isSubtotal(m[L])){D=D-x[L];break}}else D=f;const k=this.getItemStyle(String(d),p,S,!1);return c.formatTooltip({heading:h.formatDatum(g),symbol:this.legendItemSymbol(S),data:[{label:l,fallbackLabel:r,value:u.formatDatum(D)}]},{seriesId:e,datum:p,title:l,itemId:S,xKey:n,xName:o,yKey:r,yName:l,...k})}legendItemSymbol(t){const{fill:e,stroke:i,fillOpacity:s,strokeOpacity:a,strokeWidth:n}=this.getItemConfig(t);return{marker:{fill:e,stroke:i,fillOpacity:s,strokeOpacity:a,strokeWidth:n}}}getLegendData(t){if(t!=="category")return[];const{id:e,seriesItemTypes:i}=this,s=[],a=o=>o.charAt(0).toUpperCase()+o.substring(1),{showInLegend:n}=this.properties;return i.forEach(o=>{const{name:r}=this.getItemConfig(o);s.push({legendType:"category",id:e,itemId:o,seriesId:e,enabled:!0,label:{text:r??a(o)},symbol:this.legendItemSymbol(o),hideInLegend:!n,isFixed:!0})}),s}toggleSeriesItem(){}animateEmptyUpdateReady({datumSelection:t,labelSelection:e,contextData:i,paths:s}){const a=Yxt(Kxt(this.isVertical(),this.axes,"normal"));ibt.fromToMotion(this.id,"datums",this.ctx.animationManager,[t],a),Zxt(this,"labels",this.ctx.animationManager,e);const{pointData:n}=i;if(!n)return;const[o]=s;this.isVertical()?this.animateConnectorLinesVertical(o,n):this.animateConnectorLinesHorizontal(o,n)}animateConnectorLinesHorizontal(t,e){const{path:i}=t;this.updateLineNode(t);const s=this.getValueAxis(),a=s?.isReversed(),n=a?(c,h)=>c<h:(c,h)=>c>h,o=s?.scale.convert(0),r=e.reduce((c,h)=>(n(h.x,c)&&(c=h.x),c),a?1/0:0),l=(c,h,u,d,p)=>(c-h)/(u-h)*(p-d)+d;this.ctx.animationManager.animate({id:`${this.id}_connectors`,groupId:this.id,phase:"initial",from:o,to:r,ease:su._ModuleSupport.Motion.easeOut,collapsable:!1,onUpdate(c){i.clear(!0),e.forEach((h,u)=>{const d=l(c,o,r,o,h.x),p=l(c,o,r,o,h.x2);u!==0&&i.lineTo(d,h.y),i.moveTo(p,h.y2)}),t.checkPathDirty()}})}animateConnectorLinesVertical(t,e){const{path:i}=t;this.updateLineNode(t);const s=this.getValueAxis(),a=s?.isReversed(),n=a?(c,h)=>c>h:(c,h)=>c<h,o=s?.scale.convert(0),r=e.reduce((c,h)=>(n(h.y,c)&&(c=h.y),c),a?0:1/0),l=(c,h,u,d,p)=>(c-h)/(u-h)*(p-d)+d;this.ctx.animationManager.animate({id:`${this.id}_connectors`,groupId:this.id,phase:"initial",from:o,to:r,ease:su._ModuleSupport.Motion.easeOut,collapsable:!1,onUpdate(c){i.clear(!0),e.forEach((h,u)=>{const d=l(c,o,r,o,h.y),p=l(c,o,r,o,h.y2);u!==0&&i.lineTo(h.x,d),i.moveTo(h.x2,p)}),t.checkPathDirty()}})}animateReadyResize(t){super.animateReadyResize(t),this.resetConnectorLinesPath(t)}updatePaths(t){this.resetConnectorLinesPath({contextData:t.contextData,paths:t.paths})}resetConnectorLinesPath({contextData:t,paths:e}){if(e.length===0)return;const[i]=e;this.updateLineNode(i);const{path:s}=i;s.clear(!0);const{pointData:a}=t;a&&(a.forEach((n,o)=>{o!==0&&s.lineTo(n.x,n.y),s.moveTo(n.x2,n.y2)}),i.checkPathDirty())}updateLineNode(t){const{stroke:e,strokeWidth:i,strokeOpacity:s,lineDash:a,lineDashOffset:n}=this.properties.line;t.setProperties({fill:void 0,stroke:e,strokeWidth:this.getStrokeWidth(i),strokeOpacity:s,lineDash:a,lineDashOffset:n,lineJoin:"round",pointerEvents:su._ModuleSupport.PointerEvents.None})}isLabelEnabled(){const{positive:t,negative:e,total:i}=this.properties.item;return t.label.enabled||e.label.enabled||i.label.enabled}onDataChange(){}computeFocusBounds({datumIndex:t}){return tbt(this.contextNodeData?.nodeData[t])}};u2.className="WaterfallSeries",u2.type="waterfall";var d2=(P(),_(w)),p2={strokeWidth:0,label:{enabled:!1,fontStyle:void 0,fontWeight:"normal",fontSize:12,fontFamily:d2._ModuleSupport.ThemeSymbols.DEFAULT_FONT_FAMILY,color:d2._ModuleSupport.ThemeSymbols.DEFAULT_LABEL_COLOUR,formatter:void 0,placement:"outside-end"}},sbt={series:{item:{positive:p2,negative:p2,total:p2},line:{stroke:d2._ModuleSupport.ThemeSymbols.PALETTE_NEUTRAL_STROKE,strokeOpacity:1,lineDash:[0],lineDashOffset:0,strokeWidth:2}},legend:{enabled:!0,toggleSeries:!1}},{ThemeSymbols:g2,ThemeConstants:bM}=HW._ModuleSupport,abt={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["cartesian"],identifier:"waterfall",solo:!0,moduleFactory:t=>new u2(t),tooltipDefaults:{range:"exact"},defaultAxes:HW._ModuleSupport.swapAxisCondition([{type:bM.CARTESIAN_AXIS_TYPE.NUMBER,position:bM.CARTESIAN_POSITION.LEFT},{type:bM.CARTESIAN_AXIS_TYPE.CATEGORY,position:bM.CARTESIAN_POSITION.BOTTOM}],t=>t?.direction==="horizontal"),themeTemplate:sbt,paletteFactory:({takeColors:t,colorsCount:e,userPalette:i,palette:s})=>{if(i==="user-indexed"){const{fills:a,strokes:n}=t(e);return{line:{stroke:s.neutral.stroke},item:{positive:{fill:a[0],stroke:n[0]},negative:{fill:a[1],stroke:n[1]},total:{fill:a[2],stroke:n[2]}}}}return{line:{stroke:s.neutral.stroke},item:{positive:{fill:s.altUp.fill,stroke:s.altUp.stroke,label:{color:g2.DEFAULT_LABEL_COLOUR}},negative:{fill:s.altDown.fill,stroke:s.altDown.stroke,label:{color:g2.DEFAULT_LABEL_COLOUR}},total:{fill:s.neutral.fill,stroke:s.neutral.stroke,label:{color:g2.DEFAULT_LABEL_COLOUR}}}}}},nbt=`.ag-watermark{position:absolute;bottom:20px;right:25px;font-weight:700;font-family:Impact,sans-serif;font-size:19px;opacity:.7;animation:1s ease-out 3s ag-watermark-fadeout;color:#9b9b9b;pointer-events:none;&:before{content:"";display:block;height:40px;width:170px;background-image:url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjU4IiBoZWlnaHQ9IjQwIiB2aWV3Qm94PSIwIDAgMjU4IDQwIiBmaWxsPSJub25lIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPgo8cGF0aCBkPSJNMjUuNzc5IDI4LjY1N0gxMy4zNTlMMTEuMTczIDM0LjAxMkg1LjY3Mjk3TDE3LjE4MiA3LjA1OTk5SDIxLjk1M0wzMy40NjIgMzQuMDEySDI3Ljk2MkwyNS43NzYgMjguNjU3SDI1Ljc3OVpNMjQuMDY4IDI0LjM5N0wxOS41ODggMTMuNDM0TDE1LjEwNyAyNC4zOTdIMjQuMDY4Wk02Mi4wOTIgMTguODIzSDQ5LjgxN1YyMy4wODZINTYuNzc1QzU2LjU1NSAyNS4yMjIgNTUuNzU1IDI2LjkyNyA1NC4zNzIgMjguMjAyQzUyLjk4OSAyOS40NzYgNTEuMTY2IDMwLjExNSA0OC45MDkgMzAuMTE1QzQ3LjYyMiAzMC4xMTUgNDYuNDUgMjkuODg1IDQ1LjM5MyAyOS40MjNDNDQuMzU4MyAyOC45NzgxIDQzLjQzMjYgMjguMzEzOCA0Mi42OCAyNy40NzZDNDEuOTI3IDI2LjYzOSA0MS4zNDQgMjUuNjMxIDQwLjkzMSAyNC40NTNDNDAuNTE5IDIzLjI3NSA0MC4zMTEgMjEuOTcgNDAuMzExIDIwLjUzN0M0MC4zMTEgMTkuMTA1IDQwLjUxNiAxNy44IDQwLjkzMSAxNi42MjFDNDEuMzQ0IDE1LjQ0MyA0MS45MjcgMTQuNDM2IDQyLjY4IDEzLjU5OEM0My40Mzc2IDEyLjc1NzcgNDQuMzY5NiAxMi4wOTMyIDQ1LjQxMSAxMS42NTFDNDYuNDc4IDExLjE4OSA0Ny42NTYgMTAuOTYgNDguOTQ2IDEwLjk2QzUxLjYxMiAxMC45NiA1My42MzcgMTEuNjAyIDU1LjAyIDEyLjg4NUw1OC4zIDkuNjA0OTlDNTUuODE3IDcuNjY5OTkgNTIuNjc2IDYuNjk5OTkgNDguODcyIDYuNjk5OTlDNDYuNzYgNi42OTk5OSA0NC44NTMgNy4wMzQ5OSA0My4xNTQgNy43MDA5OUM0MS40NTUgOC4zNjc5OSAzOS45OTggOS4zMDM5OSAzOC43ODMgMTAuNTA0QzM3LjU2NyAxMS43MDcgMzYuNjM0IDEzLjE1OCAzNS45NzcgMTQuODU3QzM1LjMxOSAxNi41NTYgMzQuOTk0IDE4LjQ1MSAzNC45OTQgMjAuNTRDMzQuOTk0IDIyLjYzIDM1LjMyOSAyNC40OTQgMzUuOTk1IDI2LjIwNUMzNi42NjIgMjcuOTE2IDM3LjYwNSAyOS4zNzQgMzguODE3IDMwLjU3N0M0MC4wMzIgMzEuNzggNDEuNDg2IDMyLjcxMyA0My4xODggMzMuMzgzQzQ0Ljg4OCAzNC4wNDkgNDYuNzgyIDM0LjM4NCA0OC44NzIgMzQuMzg0QzUwLjk2MSAzNC4zODQgNTIuNzUgMzQuMDQ5IDU0LjM5IDMzLjM4M0M1Ni4wMzEgMzIuNzE2IDU3LjQyNiAzMS43OCA1OC41NzkgMzAuNTc3QzU5LjczMyAyOS4zNzQgNjAuNjE5IDI3LjkxNiA2MS4yMzkgMjYuMjA1QzYxLjg2IDI0LjQ5NCA2Mi4xNyAyMi42MDUgNjIuMTcgMjAuNTRDNjIuMTY5NiAxOS45Njg4IDYyLjE0NDUgMTkuMzk4IDYyLjA5NSAxOC44MjlMNjIuMDkyIDE4LjgyM1pNMTUxLjgxIDE2Ljk4MUMxNTMuNDEgMTQuNjA5IDE1Ny40MTkgMTQuMzU4IDE1OS4wMjIgMTQuMzU4VjE4LjkxQzE1Ni45NTcgMTguOTEgMTU0Ljk4NSAxOC45OTYgMTUzLjc1NyAxOS44OTJDMTUyLjUyOSAyMC43OTIgMTUxLjkxOSAyMS45ODIgMTUxLjkxOSAyMy40NjRWMzMuOTlIMTQ2Ljk2NFYxNC4zNThIMTUxLjczNkwxNTEuODEgMTYuOTgxWk0xNDMuMDExIDE0LjM2MVYzNC4wMzFIMTM4LjI0TDEzOC4xMzEgMzEuMDQ1QzEzNy40NjYgMzIuMDc2IDEzNi41NTEgMzIuOTIxOSAxMzUuNDcxIDMzLjUwNEMxMzQuMzc2IDM0LjA5OSAxMzMuMDY4IDM0LjM5NiAxMzEuNTM2IDM0LjM5NkMxMzAuMiAzNC4zOTYgMTI4Ljk2MyAzNC4xNTIgMTI3LjgyMiAzMy42NjhDMTI2LjcgMzMuMTk2NCAxMjUuNjg5IDMyLjQ5NSAxMjQuODU1IDMxLjYwOUMxMjQuMDE4IDMwLjcyMiAxMjMuMzU0IDI5LjY2MiAxMjIuODcxIDI4LjQyMkMxMjIuMzg0IDI3LjE4NSAxMjIuMTQyIDI1LjgxMSAxMjIuMTQyIDI0LjMwNEMxMjIuMTQyIDIyLjc5OCAxMjIuMzg0IDIxLjM3OCAxMjIuODcxIDIwLjExNkMxMjMuMzU3IDE4Ljg1NCAxMjQuMDE4IDE3Ljc3MiAxMjQuODU1IDE2Ljg3M0MxMjUuNjg4IDE1Ljk3NjQgMTI2LjY5OCAxNS4yNjM2IDEyNy44MjIgMTQuNzhDMTI4Ljk2MyAxNC4yODEgMTMwLjIwMyAxNC4wMzMgMTMxLjUzNiAxNC4wMzNDMTMzLjA0MyAxNC4wMzMgMTM0LjMzIDE0LjMxOCAxMzUuMzk3IDE0Ljg4OEMxMzYuNDYyIDE1LjQ1ODkgMTM3LjM3NSAxNi4yNzggMTM4LjA1NyAxNy4yNzZWMTQuMzYxSDE0My4wMTFaTTEzMi42MzEgMzAuMTMzQzEzNC4yNTYgMzAuMTMzIDEzNS41NjcgMjkuNTk0IDEzNi41NjUgMjguNTEyQzEzNy41NjEgMjcuNDMgMTM4LjA2IDI1Ljk5MSAxMzguMDYgMjQuMTk2QzEzOC4wNiAyMi40MDEgMTM3LjU2MSAyMC45OSAxMzYuNTY1IDE5Ljg5OUMxMzUuNTcgMTguODA3IDEzNC4yNTkgMTguMjU4IDEzMi42MzEgMTguMjU4QzEzMS4wMDMgMTguMjU4IDEyOS43MjkgMTguODA0IDEyOC43MzQgMTkuODk5QzEyNy43MzggMjAuOTkzIDEyNy4yMzkgMjIuNDM4IDEyNy4yMzkgMjQuMjMzQzEyNy4yMzkgMjYuMDI4IDEyNy43MzUgMjcuNDMzIDEyOC43MzQgMjguNTE1QzEyOS43MjkgMjkuNTk0IDEzMS4wMjggMzAuMTM2IDEzMi42MzEgMzAuMTM2VjMwLjEzM1pNOTMuNjk4IDI3Ljg3NkM5My41Nzk1IDI4LjAwMjUgOTMuNDU2NCAyOC4xMjQ2IDkzLjMyOSAyOC4yNDJDOTEuOTQ3IDI5LjUxNiA5MC4xMjMgMzAuMTU1IDg3Ljg2NiAzMC4xNTVDODYuNTggMzAuMTU1IDg1LjQwOCAyOS45MjYgODQuMzUgMjkuNDY0QzgzLjMxNTUgMjkuMDE4OSA4Mi4zODk4IDI4LjM1NDYgODEuNjM3IDI3LjUxN0M4MC44ODQgMjYuNjc5IDgwLjMwMSAyNS42NzIgNzkuODg5IDI0LjQ5NEM3OS40NzYgMjMuMzE1IDc5LjI2OSAyMi4wMSA3OS4yNjkgMjAuNTc4Qzc5LjI2OSAxOS4xNDUgNzkuNDczIDE3Ljg0IDc5Ljg4OSAxNi42NjJDODAuMzAxIDE1LjQ4NCA4MC44ODQgMTQuNDc2IDgxLjYzNyAxMy42MzlDODIuMzk0OSAxMi43OTg3IDgzLjMyNzMgMTIuMTM0MiA4NC4zNjkgMTEuNjkyQzg1LjQzNiAxMS4yMyA4Ni42MTQgMTEgODcuOTAzIDExQzkwLjU3IDExIDkyLjU5NSAxMS42NDIgOTMuOTc3IDEyLjkyNkw5Ny4yNTggOS42NDQ5OUM5NC43NzQgNy43MTA5OSA5MS42MzMgNi43Mzk5OSA4Ny44MjkgNi43Mzk5OUM4NS43MTggNi43Mzk5OSA4My44MTEgNy4wNzQ5OSA4Mi4xMTIgNy43NDE5OUM4MC40MTMgOC40MDc5OSA3OC45NTYgOS4zNDQ5OSA3Ny43NCAxMC41NDVDNzYuNTI1IDExLjc0NyA3NS41OTIgMTMuMTk5IDc0LjkzNCAxNC44OThDNzQuMjc3IDE2LjU5NyA3My45NTEgMTguNDkxIDczLjk1MSAyMC41ODFDNzMuOTUxIDIyLjY3IDc0LjI4NiAyNC41MzQgNzQuOTUzIDI2LjI0NUM3NS42MTkgMjcuOTU3IDc2LjU2MiAyOS40MTQgNzcuNzc0IDMwLjYxN0M3OC45OSAzMS44MiA4MC40NDQgMzIuNzUzIDgyLjE0NiAzMy40MjNDODMuODQ1IDM0LjA5IDg1LjczOSAzNC40MjQgODcuODI5IDM0LjQyNEM4OS45MTkgMzQuNDI0IDkxLjcwOCAzNC4wOSA5My4zNDggMzMuNDIzQzk0LjcxOCAzMi44NjUgOTUuOTE4IDMyLjEyMSA5Ni45NDggMzEuMTkxQzk3LjE0OSAzMS4wMDggOTcuMzQ4IDMwLjgxNSA5Ny41MzcgMzAuNjJMOTMuNzAxIDI3Ljg4NUw5My42OTggMjcuODc2Wk0xMTAuODAyIDE0LjAxNUMxMDkuMTk5IDE0LjAxNSAxMDYuODM2IDE0LjQ3MSAxMDUuNjExIDE2LjE1OEwxMDUuNTM3IDYuMDE1OTlIMTAwLjc2NVYzMy45MzlIMTA1LjcyVjIyLjY0MUMxMDUuNzcxIDIxLjQ2MDcgMTA2LjI4OCAyMC4zNDg4IDEwNy4xNTcgMTkuNTQ4OUMxMDguMDI3IDE4Ljc0OTEgMTA5LjE3OCAxOC4zMjY2IDExMC4zNTggMTguMzc0QzExMy4zOTcgMTguMzc0IDExNC4yNjggMjEuMTU5IDExNC4yNjggMjIuNjQxVjMzLjkzOUgxMTkuMjIzVjIxLjA1OUMxMTkuMjIzIDIxLjA1OSAxMTkuMTQyIDE0LjAxNSAxMTAuODAyIDE0LjAxNVpNMTczLjc2MyAxNC4zNThIMTY5Ljk5OVY4LjcxNDk5SDE2NS4wNDhWMTQuMzU4SDE2MS4yODRWMTguOTE2SDE2NS4wNDhWMzQuMDAzSDE2OS45OTlWMTguOTE2SDE3My43NjNWMTQuMzU4Wk0xOTAuNzg3IDI1LjI2MkMxOTAuMTI5IDI0LjUwMTQgMTg5LjMwNyAyMy44OTk0IDE4OC4zODQgMjMuNTAxQzE4Ny40ODggMjMuMTE3IDE4Ni4zMzEgMjIuNzMyIDE4NC45NDggMjIuMzY0QzE4NC4xNjUgMjIuMTQzOSAxODMuMzkgMjEuODk3OCAxODIuNjIzIDIxLjYyNkMxODIuMTYzIDIxLjQ2MjEgMTgxLjc0MSAyMS4yMDY2IDE4MS4zODMgMjAuODc1QzE4MS4yMzUgMjAuNzQyMSAxODEuMTE4IDIwLjU3ODkgMTgxLjAzOSAyMC4zOTY0QzE4MC45NjEgMjAuMjE0IDE4MC45MjIgMjAuMDE2NiAxODAuOTI3IDE5LjgxOEMxODAuOTI3IDE5LjI3MiAxODEuMTU2IDE4Ljg0NCAxODEuNjI1IDE4LjUxQzE4Mi4xMjEgMTguMTU2IDE4Mi44NjIgMTcuOTc2IDE4My44MjYgMTcuOTc2QzE4NC43OSAxNy45NzYgMTg1LjU4NyAxOC4yMDkgMTg2LjE0OCAxOC42NjhDMTg2LjcwNiAxOS4xMjQgMTg3LjAwNyAxOS43MjUgMTg3LjA3MiAyMC41TDE4Ny4wOTQgMjAuNzgySDE5MS42MzNMMTkxLjYxNyAyMC40NkMxOTEuNTIxIDE4LjQ4NSAxOTAuNzcxIDE2LjkgMTg5LjM4NSAxNS43NUMxODguMDEyIDE0LjYxMiAxODYuMTg1IDE0LjAzMyAxODMuOTYyIDE0LjAzM0MxODIuNDc3IDE0LjAzMyAxODEuMTQxIDE0LjI4NyAxNzkuOTk0IDE0Ljc4NkMxNzguODMxIDE1LjI5MSAxNzcuOTI2IDE1Ljk5NSAxNzcuMjk2IDE2Ljg4MkMxNzYuNjczIDE3Ljc0NTUgMTc2LjMzOCAxOC43ODQgMTc2LjM0MSAxOS44NDlDMTc2LjM0MSAyMS4xNjcgMTc2LjY5OCAyMi4yNDkgMTc3LjM5OSAyMy4wNjRDMTc4LjA2IDIzLjg0MzIgMTc4Ljg5OCAyNC40NTM0IDE3OS44NDIgMjQuODQ0QzE4MC43NDQgMjUuMjE2IDE4MS45MjggMjUuNjA3IDE4My4zNjEgMjZDMTg0LjgwNiAyNi40MSAxODUuODcyIDI2Ljc4NSAxODYuNTMgMjcuMTIzQzE4Ny4xIDI3LjQxNCAxODcuMzc5IDI3Ljg0NSAxODcuMzc5IDI4LjQ0NEMxODcuMzc5IDI5LjA0MiAxODcuMTIyIDI5LjQ2NyAxODYuNTk1IDI5LjgzOUMxODYuMDQzIDMwLjIyNiAxODUuMjM3IDMwLjQyNSAxODQuMjAxIDMwLjQyNUMxODMuMTY2IDMwLjQyNSAxODIuMzk0IDMwLjE3NCAxODEuNzQ5IDI5LjY3NEMxODEuMTEzIDI5LjE4MSAxODAuNzcyIDI4LjU4OSAxODAuNzEgMjcuODY0TDE4MC42ODUgMjcuNTgySDE3Ni4wMTNMMTc2LjAyNSAyNy45MDFDMTc2LjA2NyAyOS4wOTU1IDE3Ni40NzIgMzAuMjQ4NyAxNzcuMTg4IDMxLjIwNkMxNzcuOTA3IDMyLjE4IDE3OC44OTMgMzIuOTU4IDE4MC4xMTggMzMuNTE5QzE4MS4zMzYgMzQuMDc3IDE4Mi43MzIgMzQuMzYyIDE4NC4yNjYgMzQuMzYyQzE4NS44MDEgMzQuMzYyIDE4Ny4xMDkgMzQuMTA4IDE4OC4yMzggMzMuNjA5QzE4OS4zNzYgMzMuMTA0IDE5MC4yNzIgMzIuMzk0IDE5MC45MDEgMzEuNDk0QzE5MS41MzQgMzAuNTkyIDE5MS44NTMgMjkuNTU0IDE5MS44NTMgMjguNDAzQzE5MS44MjggMjcuMTEgMTkxLjQ2NiAyNi4wNTMgMTkwLjc3NyAyNS4yNjJIMTkwLjc4N1oiIGZpbGw9IiM5QjlCOUIiLz4KPHBhdGggZD0iTTI0MS45ODIgMjUuNjU4MlYxNy43MTE3SDIyOC40NDFMMjIwLjQ5NCAyNS42NTgySDI0MS45ODJaIiBmaWxsPSIjOUI5QjlCIi8+CjxwYXRoIGQ9Ik0yNTcuMjM5IDUuOTUwODFIMjQwLjI2NUwyMzIuMjU1IDEzLjg5NzNIMjU3LjIzOVY1Ljk1MDgxWiIgZmlsbD0iIzlCOUI5QiIvPgo8cGF0aCBkPSJNMjEyLjYxMSAzMy42MDQ4TDIxNi42OCAyOS41MzYxSDIzMC40MTJWMzcuNDgyN0gyMTIuNjExVjMzLjYwNDhaIiBmaWxsPSIjOUI5QjlCIi8+CjxwYXRoIGQ9Ik0yMTUuNTk5IDIxLjc4MDNIMjI0LjM3MkwyMzIuMzgyIDEzLjgzMzdIMjE1LjU5OVYyMS43ODAzWiIgZmlsbD0iIzlCOUI5QiIvPgo8cGF0aCBkPSJNMjA2IDMzLjYwNDdIMjEyLjYxMUwyMjAuNDk0IDI1LjY1ODJIMjA2VjMzLjYwNDdaIiBmaWxsPSIjOUI5QjlCIi8+CjxwYXRoIGQ9Ik0yNDAuMjY1IDUuOTUwODFMMjM2LjE5NyAxMC4wMTk0SDIxMC4yNTlWMi4wNzI4OEgyNDAuMjY1VjUuOTUwODFaIiBmaWxsPSIjOUI5QjlCIi8+Cjwvc3ZnPgo=);background-repeat:no-repeat;background-size:170px 40px}>span{padding-left:.7rem}}@keyframes ag-watermark-fadeout{0%{opacity:.5}to{opacity:0}}.ag-charts-dialog{display:flex;flex-direction:column;font-size:14px}.ag-charts-dialog__tabs{display:flex;flex-direction:column}.ag-charts-dialog__header{border-bottom:1px solid var(--ag-charts-border-color);display:flex}.ag-charts-dialog__tab-list{display:flex;gap:var(--ag-charts-input-spacing)}.ag-charts-dialog__drag-handle{align-items:center;color:inherit;cursor:grab;display:flex;padding:1px 6px;text-align:center}.ag-charts-dialog__drag-handle--dragging{cursor:grabbing}.ag-charts-dialog__tab-button{background:none;border:0;border-bottom:2px solid transparent;border-radius:0;color:var(--ag-charts-dialog-tab-color--inactive);margin-bottom:-1px;padding:var(--ag-charts-input-padding) calc(var(--ag-charts-input-padding) / 2)}.ag-charts-dialog__tab-button:hover{background:none}.ag-charts-dialog__tab-button--active{border-color:currentColor;color:inherit}.ag-charts-dialog__drag-handle+.ag-charts-dialog__tab-button{margin-left:calc(var(--ag-charts-input-spacing) * -1)}.ag-charts-button.ag-charts-dialog__close-button{background:none;border:0;margin-left:auto;padding:1px 6px}.ag-charts-dialog__close-button:focus-visible{outline:var(--ag-charts-focus-border);box-shadow:var(--ag-charts-focus-border-shadow);z-index:calc(var(--ag-charts-layer-ui-overlay) + 1)}.ag-charts-dialog__tab-panel{display:none;flex-direction:column;gap:calc(var(--ag-charts-input-spacing) * 2);margin:0 calc(var(--ag-charts-input-spacing) * 2);padding:calc(var(--ag-charts-input-spacing) * 2) 0}.ag-charts-dialog__tab-panel--active{display:flex}.ag-charts-dialog__input-group-line{display:flex;gap:18px}.ag-charts-dialog__input-group{align-items:center;display:flex;font-size:12px}.ag-charts-dialog__input-group-label{color:var(--ag-charts-dialog-input-group-label-color);margin-right:5px}.ag-charts-dialog__input-group-label[for]{cursor:pointer}.ag-charts-dialog__button{border-radius:0;margin-right:-1px}.ag-charts-dialog__button.ag-charts-dialog__button--active{background:var(--ag-charts-input-background-color--active);border-color:var(--ag-charts-input-border-color--active);color:var(--ag-charts-input-color--active);z-index:var(--input-layer-active)}.ag-charts-dialog__button:first-child,.ag-charts-dialog__input-group-label+.ag-charts-dialog__button{border-bottom-left-radius:var(--ag-charts-input-border-radius);border-top-left-radius:var(--ag-charts-input-border-radius)}.ag-charts-dialog__button:last-child{border-bottom-right-radius:var(--ag-charts-input-border-radius);border-top-right-radius:var(--ag-charts-input-border-radius)}.ag-charts-dialog__color-picker-button{--color: #000;background:var(--color);border:none;color:transparent;height:26px;width:26px}.ag-charts-dialog__color-picker-button:hover{background:var(--color)}.ag-charts-dialog__color-picker-button--multi-color,.ag-charts-dialog__color-picker-button--multi-color:hover{background:linear-gradient(135deg,red 0%,#ff0 calc(100% * 1 / 6),#0f0 calc(100% * 2 / 6),#0ff 50%,#00f calc(100% * 4 / 6),#f0f calc(100% * 5 / 6),red 100%)}.ag-charts-color-picker{width:190px;padding:8px;--h: 0;--s: 0;--v: 0;--a: 0;--color: #000;--color-a: #000;--thumb-size: 18px;--inner-width: 172px;--track-height: 12px;--palette-height: 136px;--checker: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="4" height="4"><rect x="0" y="0" width="4" height="4" fill="%23fff"/><path d="M0 0H2V4H4V2H0Z" fill="%23b2b2b2"/></svg>');--multi-color: linear-gradient( 135deg, #f00 0% , #ff0 calc(100% * 1 / 6), #0f0 calc(100% * 2 / 6), #0ff 50% , #00f calc(100% * 4 / 6), #f0f calc(100% * 5 / 6), #f00 100% )}.ag-charts-color-picker__content{display:flex;flex-direction:column}.ag-charts-color-picker__palette{position:relative;width:100%;height:var(--palette-height);margin-bottom:8px;background:linear-gradient(to bottom,#0000,#000),linear-gradient(to right,#fff,#fff0) hsl(var(--h),100%,50%);border-radius:6px;box-shadow:inset 0 0 0 1px #0003}.ag-charts-color-picker__palette:after{content:"";position:absolute;display:block;top:calc(var(--thumb-size) * -.5 + (1 - var(--v)) * 100%);left:calc(var(--thumb-size) * -.5 + var(--s) * 100%);background:var(--color);width:var(--thumb-size);height:var(--thumb-size);border-radius:99px;box-shadow:var(--box-shadow);--box-shadow: inset 0 0 0 3px white, inset 0 0 1px 3px #0006, 0 0 5px #00000038}.ag-charts-color-picker__palette:focus-visible:after{outline:var(--ag-charts-focus-border);box-shadow:var(--box-shadow),0 0 0 2px #fff8,var(--ag-charts-focus-border-shadow)}.ag-charts-color-picker__color-row{display:flex;gap:8px;align-items:center;margin-bottom:4px;--inset: calc((var(--thumb-size) - var(--track-height)) / 2)}.ag-charts-color-picker__hue-input,.ag-charts-color-picker__alpha-input{-webkit-appearance:none;display:block;position:relative;padding:0;margin:0 calc(var(--inset) * -1);border:0;height:var(--thumb-size);width:auto;background:transparent;--inset: calc((var(--thumb-size) - var(--track-height)) / 2)}.ag-charts-color-picker__hue-input::-webkit-slider-thumb,.ag-charts-color-picker__alpha-input::-webkit-slider-thumb{-webkit-appearance:none;width:var(--thumb-size);height:var(--thumb-size);border-radius:99px;box-shadow:var(--box-shadow);--box-shadow: inset 0 0 0 3px white, inset 0 0 1px 3px #0006, 0 0 5px #00000038;transform:translateZ(0)}.ag-charts-color-picker__hue-input::-webkit-slider-thumb{background:hsl(var(--h),100%,50%)}.ag-charts-color-picker__alpha-input::-webkit-slider-thumb{background:transparent}.ag-charts-color-picker__alpha-input--opaque::-webkit-slider-thumb{background:var(--color)}.ag-charts-color-picker__hue-input:focus-visible::-webkit-slider-thumb,.ag-charts-color-picker__alpha-input:focus-visible::-webkit-slider-thumb{outline:var(--ag-charts-focus-border);box-shadow:var(--box-shadow),var(--ag-charts-focus-border-shadow)}.ag-charts-color-picker__hue-input:before,.ag-charts-color-picker__alpha-input:before{position:absolute;content:"";display:block;top:calc(50% - var(--track-height) / 2);left:var(--inset);right:var(--inset);height:var(--track-height);border-radius:99px;box-shadow:inset 0 0 0 1px #0003}.ag-charts-color-picker__multi-color-button{width:36px;margin-left:var(--inset);height:var(--track-height);border-radius:99px;border:0;background:var(--multi-color);box-shadow:inset 0 0 0 1px #0003}.ag-charts-color-picker__multi-color-button--hidden{display:none}.ag-charts-color-picker__multi-color-button--active{box-shadow:inset 0 0 0 1px #0003;outline-offset:1px;outline:2px solid #2196f3}.ag-charts-color-picker__hue-input{flex:1 0 0}.ag-charts-color-picker__hue-input:before{background:linear-gradient(to right,red,red calc((100% - var(--track-height)) * 0 / 6 + var(--track-height) / 2),#ff0 calc((100% - var(--track-height)) * 1 / 6 + var(--track-height) / 2),#0f0 calc((100% - var(--track-height)) * 2 / 6 + var(--track-height) / 2),#0ff calc((100% - var(--track-height)) * 3 / 6 + var(--track-height) / 2),#00f calc((100% - var(--track-height)) * 4 / 6 + var(--track-height) / 2),#f0f calc((100% - var(--track-height)) * 5 / 6 + var(--track-height) / 2),red calc((100% - var(--track-height)) * 6 / 6 + var(--track-height) / 2))}.ag-charts-color-picker__alpha-input{margin-bottom:7px}.ag-charts-color-picker__alpha-input:before{background:linear-gradient(to right,transparent,var(--color)),var(--checker) top left / 4px 4px}.ag-charts-color-picker__color-field{display:flex;border:var(--ag-charts-border);background:var(--ag-charts-background-color);border-radius:4px;overflow:hidden}.ag-charts-color-picker__color-field:has(:focus-visible){border-color:var(--ag-charts-active-color);box-shadow:var(--ag-charts-focus-border-shadow)}.ag-charts-color-picker__color-label{width:16px;height:16px;margin:7px 0 7px 7px;color:transparent;background:linear-gradient(to right,var(--color-a),var(--color-a)),var(--checker) top left / 4px 4px;border-radius:2px;box-shadow:inset 0 0 0 1px #0003}.ag-charts-color-picker__color-label--multi-color{background:var(--multi-color)}.ag-charts-color-picker__color-input{flex:1;min-width:0;padding:7px 7px 7px 8px;border:0;margin:0;color:inherit;background:transparent;font-variant:tabular-nums}.ag-charts-color-picker__color-input:focus-visible{border:none;outline:none}.ag-charts-annotations__line-stroke-width-menu,.ag-charts-annotations__line-style-type-menu,.ag-charts-annotations__text-size-menu{.ag-charts-menu__row:first-child{border-radius:0}}.ag-charts-annotations__stroke-width-button:before{--stroke-width-color: var(--ag-charts-toolbar-foreground-color);background:var(--stroke-width-color);content:"";margin-right:var(--ag-charts-toolbar-button-padding);height:min(var(--stroke-width),20px);width:12px}.ag-charts-annotations__stroke-width-button[aria-disabled=true]:before{filter:grayscale(1);opacity:.5}.ag-charts-annotations__color-picker-button{--emblem: var(--color)}.ag-charts-annotations__color-picker-button--multi-color{--emblem: linear-gradient( to right, #f00 0% , #ff0 calc(100% * 1 / 6), #0f0 calc(100% * 2 / 6), #0ff 50% , #00f calc(100% * 4 / 6), #f0f calc(100% * 5 / 6), #f00 100% )}.ag-charts-annotations__color-picker-button:after{content:"";display:block;position:absolute;bottom:3px;left:5px;right:5px;height:4px;border-radius:99px;box-shadow:inset 0 0 0 1px color-mix(in srgb,var(--ag-charts-foreground-color) 10%,transparent);background:var(--emblem)}.ag-charts-annotations__color-picker-button[aria-disabled=true]:after{filter:grayscale(1);opacity:.5}.ag-charts-annotations__toolbar-menu{min-width:200px}.ag-charts-annotations__text-size-menu{--item-padding: 4px 8px;border-top-left-radius:0;border-top-right-radius:0;width:34px}.ag-charts-annotations__line-stroke-width-menu{--item-padding: 6px;column-gap:6px}.ag-charts-annotations__line-style-type-menu{--item-padding: 6px;column-gap:0}.ag-charts-annotations__axis-button-wrapper{position:absolute;left:0;top:0;user-select:none;font:16px Verdana,sans-serif;overflow:hidden;white-space:nowrap;z-index:var(--ag-charts-layer-annotations);box-sizing:border-box}.ag-charts-annotations__axis-button-wrapper--hidden{display:none}.ag-charts-annotations__axis-button{cursor:pointer;border:none;border-radius:2px;padding:0;line-height:16px;background-color:var(--ag-charts-axis-label-background-color);color:var(--ag-charts-axis-label-color)}.ag-charts-annotations__axis-button:hover{opacity:.8;color:var(--ag-charts-axis-label-color)}.ag-charts-dialog--annotation-settings{min-height:233px;width:289px}.ag-charts-dialog--annotation-settings .ag-charts-textarea{height:calc(10px * 2 + var(--line-height) * 1em * 3 + 2px);overflow-y:auto;resize:vertical}.ag-charts-context-menu{background:#f8f8f8;border:1px solid #babfc7;border-radius:5px;box-shadow:0 1px 4px 1px #babfc766;color:#181d1f;font:13px Verdana,sans-serif;transition:transform .1s ease;white-space:nowrap;z-index:var(--ag-charts-layer-ui-overlay)}.ag-charts-context-menu.ag-charts-dark-context-menu{color:#fff;background:#15181c}.ag-charts-context-menu__cover{position:fixed;left:0;top:0}.ag-charts-context-menu__menu{display:flex;flex-direction:column;padding:.5em 0}.ag-charts-context-menu__menu:focus{outline:none}.ag-charts-context-menu__item{background:none;border:none;box-sizing:border-box;font:inherit;padding:.5em 1em;text-align:left;-webkit-appearance:none;-moz-appearance:none}.ag-charts-context-menu__item.ag-charts-dark-context-menu{color:#fff}.ag-charts-context-menu__item:focus{background:#2196f31a}.ag-charts-context-menu__item:focus.ag-charts-dark-context-menu{background:#2196f31a}.ag-charts-context-menu__item:active{background:#2196f333}.ag-charts-context-menu__item:active.ag-charts-dark-context-menu{background:#2196f31a}.ag-charts-context-menu__item:focus-visible{outline:var(--ag-charts-focus-border);box-shadow:var(--ag-charts-focus-border-shadow);z-index:calc(var(--ag-charts-layer-ui-overlay) + 1)}.ag-charts-context-menu__item[aria-disabled=true]{border:none;opacity:.5;text-align:left}.ag-charts-context-menu__item[aria-disabled=true]:focus{background:inherit;cursor:inherit}.ag-charts-context-menu__divider{margin:5px 0;background:#babfc7;height:1px}.ag-charts-context-menu__divider.ag-charts-dark-context-menu{background:#2196f31a}.ag-charts-crosshair-label{position:absolute;left:0;top:0;user-select:none;pointer-events:none;font:12px Verdana,sans-serif;overflow:hidden;white-space:nowrap;z-index:var(--ag-charts-layer-crosshair);box-sizing:border-box}.ag-charts-crosshair-label-content{padding:0 8px;border-radius:2px;line-height:20px;background-color:var(--ag-charts-axis-label-background-color);color:var(--ag-charts-axis-label-color)}.ag-charts-crosshair-label--hidden{visibility:hidden!important}.ag-charts-text-input{position:absolute}.ag-charts-text-input__textarea{display:block;height:100%;width:100%;border:0;background:none;line-height:1.38;outline:none;transform:translateY(.09em)}.ag-charts-text-input__textarea[placeholder]:empty:before{content:attr(placeholder);color:var(--ag-charts-input-placeholder-color);font-weight:400}.ag-charts-text-input__textarea[placeholder]:not(:empty):before{content:""}.ag-charts-chart-toolbar__menu{min-width:200px}.ag-charts-range-buttons .ag-charts-toolbar__button{padding:var(--ag-charts-toolbar-button-padding) calc(var(--ag-charts-toolbar-button-padding) * 1.5)}.ag-charts-zoom-buttons{align-items:center;display:flex;height:calc(var(--ag-charts-toolbar-size) + 10px);justify-content:center;overflow:hidden;padding-bottom:10px;pointer-events:none;width:100%;.ag-charts-toolbar{--ag-charts-toolbar-size: var(--ag-charts-toolbar-size-small);--ag-charts-toolbar-font-size: var(--ag-charts-toolbar-font-size-small);--ag-charts-toolbar-button-padding: var(--ag-charts-toolbar-button-padding-small);display:flex;height:var(--ag-charts-toolbar-size);justify-content:center;opacity:1;pointer-events:auto;transition:opacity .2s ease-in-out,transform .4s ease-in-out;.ag-charts-toolbar__button--first{border-bottom-left-radius:var(--ag-charts-button-radius);border-top-left-radius:var(--ag-charts-button-radius)}.ag-charts-toolbar__button--last{border-bottom-right-radius:var(--ag-charts-button-radius);border-top-right-radius:var(--ag-charts-button-radius)}.ag-charts-toolbar__label{padding-left:calc(var(--ag-charts-toolbar-gap) / 2);padding-right:calc(var(--ag-charts-toolbar-gap) / 2)}.ag-charts-toolbar__icon+.ag-charts-toolbar__label{padding-left:0}}.ag-charts-toolbar__button--gap{margin-left:var(--ag-charts-toolbar-gap)}.ag-charts-zoom-buttons__toolbar--hidden{opacity:0;transition:opacity .4s ease-in-out,transform .4s ease-in-out}}.ag-charts-shared-toolbar{gap:var(--ag-charts-toolbar-gap);.ag-charts-toolbar__button{border-radius:var(--ag-charts-button-radius);margin:0}}
`;function t3(){Df._ModuleSupport.moduleRegistry.register(DQ,PQ,m7,oit,yit,Knt,mst,xot,qot,Lrt,ylt,_lt,Ipt,Dit,Tit,Uit,Yit,ust,Tht,Nct,Lut,aut,Jut,Fdt,ydt,Ust,xat,Tnt,Sct,Mpt,FQ,Egt,Rgt,pft,Ift,l7,ayt,g7,Amt,Yyt,sat,Hpt,$mt,nat,lxt,Tat,Txt,abt,hnt),Df._ModuleSupport.enterpriseModule.isEnterprise=!0,Df._ModuleSupport.enterpriseModule.styles=nbt,Df._ModuleSupport.enterpriseModule.licenseManager=t=>new Pd(t.container?.ownerDocument??(typeof document>"u"?void 0:document)),Df._ModuleSupport.enterpriseModule.injectWatermark=Ent}F$(_k,(P(),_(w)),ln.exports);var Hn=(P(),_(w)),obt={setLicenseKey(t){Pd.setLicenseKey(t)}};function e3(){t3(),(0,Hn.setupCommunityModules)()}var rbt={VERSION:Hn.VERSION,_Scene:Hn._Scene,_Theme:Hn._Theme,_Util:Hn._Util,create:Hn.AgCharts.create.bind(Hn.AgCharts),createSparkline:Hn.AgCharts.__createSparkline.bind(Hn.AgCharts),setup:e3,setGridContext:Pd.setGridContext.bind(Pd),setLicenseKey:Pd.setLicenseKey.bind(Pd),isEnterprise:!0};if(t3(),typeof ln.exports=="object"&&typeof rp=="object"){var lbt=(t,e,i,s)=>{if(e&&typeof e=="object"||typeof e=="function")for(let a of Object.getOwnPropertyNames(e))!Object.prototype.hasOwnProperty.call(t,a)&&a!==i&&Object.defineProperty(t,a,{get:()=>e[a],enumerable:!(s=Object.getOwnPropertyDescriptor(e,a))||s.enumerable});return t};ln.exports=lbt(ln.exports,rp)}return ln.exports});
